const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./B3yxY20h.js","./CkfJ-xIb.js","./qExclXic.js","./-Rap9rN9.js","./KcazVFlU.js","./CYsUaMUi.js","./Buev1GnW.js","./nr4b1jUc.js","./DJt6mz6N.js","./DIQz3k7I.js","./IA8T1MmK.js","./Dw1G2G-_.js","./DLUfmZk0.js","./CYP43kA7.js","./aQeO9QTD.js","./BlYv-CXL.js","./D6wORzA5.js","./ribPFsGq.js","./CQOAfpG2.js"])))=>i.map(i=>d[i]);
import{_ as w}from"./CkfJ-xIb.js";import{l as a}from"./BlYv-CXL.js";import{a as d}from"./ribPFsGq.js";import"./-Rap9rN9.js";import{a4 as k}from"./Buev1GnW.js";import"./Djp3mnm5.js";import"./BfKMU0fZ.js";import{u as g}from"./D9MYZs-V.js";import{e as L}from"./KcazVFlU.js";import"./BS3H3l-F.js";import{S as m,k as y,m as z}from"./IA8T1MmK.js";new L(1e3);new a([128,128,128]);const _=new a("white");function G(o){if(o==null||!("symbolLayers"in o)||o.symbolLayers==null)return!1;switch(o.type){case"point-3d":return o.symbolLayers.some((n=>n.type==="object"));case"line-3d":return o.symbolLayers.some((n=>n.type==="path"));case"polygon-3d":return o.symbolLayers.some((n=>n.type==="object"||n.type==="extrude"));default:return!1}}function H(o){return o.resource?.href??""}function K(o,n){if(!o)return null;let r=null;return m(o)?r=j(o):y(o)&&(r=o.type==="cim"?g(o):o.color?new a(o.color):null),r?f(r,n):null}function j(o){const n=o.symbolLayers;if(!n)return null;let r=null;return n.forEach((t=>{t.type==="object"&&t.resource?.href||(r=t.type==="water"?t.color:t.material?t.material.color:null)})),r?new a(r):null}function f(o,n){if(n==null||o==null)return o;const r=o.toRgba();return r[3]=r[3]*n,new a(r)}function x(o,n,r){const t=o.symbolLayers;if(!t)return;const e=l=>f(n??l??(r!=null?_:null),r);t.forEach((l=>{if(l.type!=="object"||!l.resource?.href||n)if(l.type==="water")l.color=e(l.color);else{const c=l.material!=null?l.material.color:null,u=e(c);if(l.material==null?l.material=new z({color:u}):l.material.color=u,r!=null&&"outline"in l&&l.outline?.color!=null&&(l.outline.color=f(l.outline.color,r)),"marker"in l&&l.marker!=null){const i=e(l.marker.color);l.marker.color=i}}}))}function S(o,n,r){(n=n??o.color)&&(o.color=f(n,r)),r!=null&&"outline"in o&&o.outline?.color&&(o.outline.color=f(o.outline.color,r))}function Q(o,n,r){o&&(n||r!=null)&&(n&&(n=new a(n)),m(o)?x(o,n,r):y(o)&&S(o,n,r))}async function v(o,n){const r=o.symbolLayers;r&&await d(r,(async t=>E(t,n)))}async function E(o,n){switch(o.type){case"extrude":$(o,n);break;case"icon":case"line":case"text":R(o,n);break;case"path":A(o,n);break;case"object":await O(o,n)}}function R(o,n){const r=h(n);r!=null&&(o.size=r)}function h(o){for(const n of o)if(typeof n=="number")return n;return null}function $(o,n){const r=n[2];typeof r=="number"&&(o.size=r)}async function O(o,n){const{resourceSize:r,symbolSize:t}=await D(o),e=b(n,r,t);e!=null&&(o.width=s(n[0],t[0],r[0],e),o.depth=s(n[1],t[1],r[1],e),o.height=s(n[2],t[2],r[2],e))}function A(o,n){const r=b(n,k,[o.width,void 0,o.height]);r!=null&&(o.width=s(n[0],o.width,1,r),o.height=s(n[2],o.height,1,r))}function b(o,n,r){for(let t=0;t<3;t++){const e=o[t];switch(e){case"symbol-value":{const l=r[t];return l!=null?l/n[t]:1}case"proportional":break;default:if(e&&n[t])return e/n[t]}}return null}async function D(o){const{computeObjectLayerResourceSize:n}=await w(()=>import("./B3yxY20h.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]),import.meta.url),r=await n(o,10),{width:t,height:e,depth:l}=o,c=[t,l,e];let u=1;for(let i=0;i<3;i++){const p=c[i];if(p!=null){u=p/r[i];break}}for(let i=0;i<3;i++)c[i]==null&&(c[i]=r[i]*u);return{resourceSize:r,symbolSize:c}}function s(o,n,r,t){switch(o){case"proportional":return r*t;case"symbol-value":return n??r;default:return o}}function P(o,n){const r=h(n);if(r!=null)switch(o.type){case"simple-marker":o.size=r;break;case"picture-marker":{const t=o.width/o.height;t>1?(o.width=r,o.height=r*t):(o.width=r*t,o.height=r);break}case"simple-line":o.width=r;break;case"text":o.font.size=r}}async function W(o,n){if(o&&n)return m(o)?v(o,n):void(y(o)&&P(o,n))}function X(o,n,r){if(o&&n!=null)if(m(o)){const t=o.symbolLayers;t&&t.forEach((e=>{if(e.type==="object")switch(r){case"tilt":e.tilt=(e.tilt??0)+n;break;case"roll":e.roll=(e.roll??0)+n;break;default:e.heading=(e.heading??0)+n}e.type==="icon"&&(e.angle+=n)}))}else y(o)&&(o.type!=="simple-marker"&&o.type!=="picture-marker"&&o.type!=="text"||(o.angle+=n))}function Y(o){return o!=null&&o.type==="polygon-3d"&&o.symbolLayers.some((n=>n.type==="extrude"))}export{Y as A,Q as L,W as M,X as N,H as b,G as h,K as w};
