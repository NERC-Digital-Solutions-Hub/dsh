const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CsDLt0uf.js","./kxzLohoh.js","./BT212Icy.js","./DUlE1Kon.js","./BFGjv385.js","./DSdBzmdi.js","./DxH_hBwP.js","./BI67_pHU.js","./Cc17QD5h.js","./uh6gjmpK.js","./CdqyOKuv.js","./PPVm8Dsz.js","./DfRz3K_A.js","./zBqsFMnn.js","./Oe6SV2kF.js","./DvKU1K2H.js","../assets/jsxFactory.CQED0rIl.css","./DlHjpvET.js","./C5IPdfsw.js","./dCrS7Wqq.js","./BTFiZ01f.js","./BfsPW2bh.js","./GOizrh0l.js","./Be2V6wEE.js","./IuJNvtIr.js","./CkkHWuE3.js","./B8nunW49.js","./DgYAzkgC.js","./AD2GcA0r.js","./Dcx_NrbM.js","./C8su7l4Y.js","./CspH9Kfw.js","./jjnFKm2P.js","./D0Dr7phT.js","./C1_AgMSu.js","./CRrk3Hur.js","./C39C94HS.js","./u2v3y1km.js","./HTOW8iPe.js","./DtjklSP3.js","./COWcuGI-.js","./B911Jptw.js","./Bih5x83q.js","./QDGi7GdX.js","./BeUU2AIC.js","./D41BK6dh.js","./CLXy8HB1.js","./B8vQCAMP.js","./Z__T9Lpy.js","./r4cPpyEu.js","./BrMvsWoD.js","./D5DHASuI.js","./Dh0lHqRZ.js","./C4Kv2vRO.js","./DuIgqnlY.js","./z4BMC05e.js","./MBhswfTz.js","./DaQyK3nQ.js","./CKhDoJii.js","./BzQhUrN8.js","./Cd67kGb1.js","./Caulfaw_.js","./BEA_VxVb.js","./Ci6C1k20.js","./bnayRBMH.js","./DPJXGPFY.js","./D-57UJtx.js","./BAtjbRqK.js","./ClB7vY8t.js","./Djp3mnm5.js","./CjadiZf0.js","./J6jWJpvs.js","./CprQ0-zm.js","./BT3_6vQX.js","./FvPJly2c.js","./DKzVzLpH.js","./BEQnBRaB.js","./B8nonhNC.js","./BBa5Ksby.js","./BvOub3JO.js","./CGpFc7sv.js","./BaN4dDqR.js","./Cn1vmhQf.js","./BXAeIeBi.js","./C9SoQ3a0.js","./BKtwV4GZ.js","./CD2g8Juu.js","./iNvouxpq.js","./BA8mPeve.js","./BJXfqnjN.js","./D14Jvju_.js","./CAPEj8Cx.js","./D2Yxuq6P.js","./CEVkfTgd.js","./DD9DYTwn.js","./CVwTD0fV.js","./D0NQgKcK.js","./b_fk785i.js","./Bu8LbX79.js","./CaqnSMi6.js","./C-CJOyzY.js","./BP4OB8lT.js","./q_b6UJoq.js","./sjfz1WYE.js","./CQ1KD0MB.js","./D5jpRriJ.js","./C3-hxTuw.js","./CEPXXbfq.js","./B0By0VWJ.js","./BB9Oo-BD.js","./GKolV7NZ.js","./BHFMIzj3.js","./DC4T6Ptu.js","./n__Nwz3z.js","./C9eBls0H.js","./sd8OvKRi.js","./Cp0qNGcE.js","./DjcuonZY.js","./iG1wnc6C.js","./Ce6-sqL1.js","./Cgc_BHpn.js","./XaXpG9zZ.js","./qyF9FwQ9.js","./XI-Li77m.js","./BQKFBo9G.js","./BELp7PG8.js","./DPb6J-GU.js","./Cn30EQ8i.js","./BAB5GhQ5.js","./CPc8fHiW.js","./CAnm2fw-.js","./CWGl2bYv.js","./Ca-7ty7r.js","./DndJXGKg.js","./ypvuBaub.js","./DgIqTRow.js","./C2g4lrCg.js","./7KSGTDwA.js","./CZw_cnq0.js","./D71z0FvY.js","./D-YQ4CHs.js","./Bkx2kNjV.js","./B2xel-Uw.js","./BYhdBRWK.js","./8WtPGj6h.js","./CG7ZQ6BV.js","./ypcU6u8y.js","./DUowVffz.js","./BvER9tXK.js","./BiXJFJDW.js","./n_VqDs8R.js","./D5J0HRgs.js","./Bw68hAdJ.js","./BPTNpVpY.js","./C2y1nKdd.js","./Bxxl7NsE.js","./CaVKkSa6.js","./CUzevAry.js","./C8zGwbjb.js","./DYadzJtd.js","./BN2vyTX-.js","./CckC_upx.js","./CxFjfwe1.js","./Cbfyo8tL.js","./DI5QB4t2.js","./CXuogR47.js","./gqIXS9_O.js","./CcdLLxYe.js","./CmbaMVYS.js","./Bk-CNa4s.js","./BNzB1xUB.js","./CsJ57Kta.js","./C6ttjuGt.js","./CHFp6N2U.js","./C_CdZhHo.js","./C6Dtflaq.js"])))=>i.map(i=>d[i]);
import{_ as f}from"./PPVm8Dsz.js";import{_ as l,m as n,a as k,c as ae}from"./DUlE1Kon.js";import{s as j,O as $}from"./BzQhUrN8.js";import{s as X}from"./CHFp6N2U.js";import{l as L,h as M,a as Y}from"./zBqsFMnn.js";import{N as ve}from"./BFGjv385.js";import"./DSdBzmdi.js";import{B as q,k as de,n as c,F as B,G as Z}from"./BT212Icy.js";import"./BI67_pHU.js";import{o as fe,d as ee}from"./BBa5Ksby.js";import{b as te,c as Ie,a as ie,e as Le}from"./C_CdZhHo.js";import{s as we}from"./gqIXS9_O.js";import{l as Ce}from"./Cc17QD5h.js";import{e as se}from"./BQBvadb7.js";import{aa as Ee}from"./CdqyOKuv.js";import{u as le,J as V}from"./DxH_hBwP.js";import{a as Me,c as Ae,p as Te}from"./CAPEj8Cx.js";import{e as U}from"./D-YQ4CHs.js";const C="esri-layer-list",S=`${C}__item`,x={base:C,actionMenu:`${C}__action-menu`,actionGroup:`${C}__action-group`,filterNoResults:`${C}__filter-no-results`,item:S,itemActive:`${S}--active`,itemContentBottom:`${S}-content-bottom`,itemMessage:`${S}-message`,itemActionIcon:`${S}-action-icon`,itemActionImage:`${S}-action-image`,itemTemporaryIcon:`${S}-temporary-icon`,itemTableIcon:`${S}-table-icon`,itemCatalogIcon:`${S}-catalog-icon`,statusIndicator:`${C}__status-indicator`,publishing:`${C}__publishing`,updating:`${C}__updating`,connectionStatus:`${C}__connection-status`,connectionStatusConnected:`${C}__connection-status--connected`,visibleToggle:`${C}__visible-toggle`,visibleIcon:`${C}__visible-icon`},ce={hide:"hide",hideChildren:"hide-children"},Oe=10,Pe=2;function Se({exclusive:e,visible:t,visibilityAppearance:i}){const s=i==="checkbox";return t?e?"circle-f":s?"check-square-f":"view-visible":e?"circle":s?"square":"view-hide"}function $e({connectionStatus:e,publishing:t}){return e?e==="connected"?"beacon":"offline":t?"square":"bullet-point"}function De(e){return e?.listMode===ce.hideChildren}function G(e){return e?.listMode??void 0}function Fe(e){return e!=null&&"minScale"in e&&e.minScale!=null?e.minScale:void 0}function ke(e){return e!=null&&"maxScale"in e&&e.maxScale!=null?e.maxScale:void 0}function xe(e){if(!e)return"inherited";const t=Ge(J(e)?e.layer:e);return t!=null?t?"independent":"inherited":"visibilityMode"in e&&e.visibilityMode!=null?e.visibilityMode:"independent"}function Re(e){e?.removeMany(e.filter(t=>t?.destroyed))}function pe(e){if(e&&(!("type"in e)||e.type!=="wmts"))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function Ne(e,t){e&&(e.filterPredicate=t?i=>t(T(i)):void 0)}function Ve(e){const t=(e?.layer&&J(e.layer)?e.layer.layer:void 0)??e?.layer;return!!t&&t.type!=="catalog"&&(ze(t)??!0)}function Ue(e){return G(e)!==ce.hide}function He(e,t){if(!e||t==null||isNaN(t))return!1;const i=Fe(e),s=ke(e),o=i!=null&&!isNaN(i)&&i>0&&t>i,r=s!=null&&!isNaN(s)&&s>0&&t<s;return o||r}function he(e,t){e?.sort((i,s)=>{const o="uid"in i?t.indexOf(i.uid):-1,r="uid"in s?t.indexOf(s.uid):-1;return o>r?-1:o<r?1:0})}function Be(e,t){const i=e?.layer;if(!i)return;const s=pe(i);if(!s)return;let o;s==="layers"&&"layers"in i?o=i.layers:s==="sublayers"&&"sublayers"in i&&(o=i.sublayers),he(o,t)}function ne(e){const t=e?.layer;return t&&"layers"in t?t.layers:null}function J(e){return e!=null&&"layer"in e&&e.layer!=null}function Ge(e){const t=ue(e);return t!=null&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}function ze(e){const t=ue(e);return t!=null&&"supportsDynamicLayers"in t?t.supportsDynamicLayers:void 0}function ue(e){return e&&"capabilities"in e&&e.capabilities!=null&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}function T(e){return e?.["data-item"]}function oe(e){return e?.getAttribute("data-layer-type")}function We(e){const{children:t,error:i}=e,s="incompatible"in e&&e.incompatible;return!!t?.filter(o=>!o.hidden).length&&!i&&!s}function je(e){for(const t of e)for(const i of t)if(i.type==="button"||i.type==="toggle")return i}var W,F;let a=(F=class extends q{constructor(t){super(t),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=i=>{this.item.actionsOpen=i.currentTarget.open},this._setTooltipReference=i=>{this.onTooltipReferenceChange?.(this.item.layer?.uid,i)},this._removeTooltipReference=()=>{this.onTooltipReferenceChange?.(this.item.layer?.uid,null)}}loadDependencies(){return de({"action-group":()=>f(()=>import("./CsDLt0uf.js").then(t=>t.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]),import.meta.url),"action-menu":()=>f(()=>import("./C8su7l4Y.js").then(t=>t.i),__vite__mapDeps([30,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39]),import.meta.url),action:()=>f(()=>import("./IuJNvtIr.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,28,29]),import.meta.url),icon:()=>f(()=>import("./BfsPW2bh.js").then(t=>t.i),__vite__mapDeps([21,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,22,23]),import.meta.url),"list-item":()=>f(()=>import("./COWcuGI-.js"),__vite__mapDeps([40,21,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,22,23,41,26,31,32,33,17,27,38,34,42,28,19,20,1,18,24,25,29,43,44,45,46,47]),import.meta.url),list:()=>f(()=>import("./Z__T9Lpy.js"),__vite__mapDeps([48,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,49,26,23,22,25,21,50,51,52,35,29,27,38,53,54,28,55,33,46]),import.meta.url),notice:()=>f(()=>import("./MBhswfTz.js"),__vite__mapDeps([56,21,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,22,23,26,57,34,28,19,20,18]),import.meta.url)})}render(){const t=this.parentTitles??[],{_title:i,item:s,activeItem:o,selectionMode:r,selectedItems:p,messages:h,parent:y,css:m,dragDisabled:b}=this,I="visibleAtCurrentTimeExtent"in s&&"layerInvisibleAtTime"in h&&!s.visibleAtCurrentTimeExtent?`${i} (${h.layerInvisibleAtTime})`:"visibleAtCurrentScale"in s&&"layerInvisibleAtScale"in h&&!s.visibleAtCurrentScale?`${i} (${h.layerInvisibleAtScale})`:i,w="parent"in s&&s.parent?.layer?.type==="catalog",{layer:O}=s,D="visibleAtCurrentScale"in s&&!s.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in s&&!s.visibleAtCurrentTimeExtent;return c("calcite-list-item",{afterCreate:_=>this._focusSelectedDragEl(_,s),afterUpdate:_=>this._focusSelectedDragEl(_,s),class:this.classes(m.item,"itemActive"in m&&{[m.itemActive]:o===s}),"data-item":s,"data-layer-id":O?.id,dragDisabled:!s.sortable||w||b,expanded:"open"in s&&s.open,id:O?.uid,key:`list-item-${O?.uid}`,label:i,metadata:{parentTitles:t,_title:i},selected:r!=="none"&&p.includes(s),title:I,unavailable:D,value:O?.uid,onCalciteListItemSelect:_=>"visible"in s&&this._handleCalciteListItemSelect(_,s,y),onCalciteListItemToggle:_=>"open"in s&&this._handleCalciteListItemToggle(_,s)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:t}=this;return this.item.title||("untitledTable"in t?t.untitledTable:t.untitledLayer)}get _renderedItemStatus(){const{item:t,parent:i,visibleElements:s,css:o}=this;if(!s.statusIndicators)return null;const{publishing:r}=t,p="updating"in t&&t.updating&&!i,h="connectionStatus"in t?t.connectionStatus:void 0,y=!!h;return c("calcite-icon",{class:this.classes(o.statusIndicator,{[o.publishing]:r},"updating"in o&&{[o.updating]:p},"connectionStatus"in o&&{[o.connectionStatus]:y},"connectionStatusConnected"in o&&{[o.connectionStatusConnected]:y&&h==="connected"}),icon:$e({connectionStatus:h,publishing:r}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:t,visibleElements:i,css:s}=this,{layer:o}=t,r="temporaryLayerIndicators"in i&&i.temporaryLayerIndicators,p="temporaryTableIndicators"in i&&i.temporaryTableIndicators,h=o&&"persistenceEnabled"in o&&(fe(o)||!o.persistenceEnabled);return(r||p)&&h?c("calcite-icon",{class:s.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"content-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{_title:t,item:i,parent:s,messages:o,visibilityAppearance:r,css:p}=this;if(!("visible"in i&&"layerVisibility"in o&&"showLayer"in o&&"hideLayer"in o&&"visibleToggle"in p&&r))return null;const{visible:h}=i,y=this._getParentVisibilityMode(s);if(y==="inherited")return null;const m=Se({visible:h,exclusive:y==="exclusive",visibilityAppearance:r}),b=r==="checkbox",I=o.layerVisibility,w=we(h?o.hideLayer:o.showLayer,{layerName:t});return c("calcite-action",{appearance:"transparent",class:p.visibleToggle,icon:b?m:void 0,key:"visibility-toggle",label:w,onclick:()=>this._toggleVisibility(i,s),scale:"s",slot:b?"actions-start":"actions-end",text:I,title:w},b?null:c("calcite-icon",{class:this.classes({[p.visibleIcon]:y!=="exclusive"&&h}),icon:m,scale:"s"}))}get _renderedPanel(){const{panel:t}=this.item;return!t?.open||t.disabled||t.flowEnabled?null:c("div",{class:this.css.itemContentBottom,key:`content-panel-${t.uid}`,slot:"content-bottom"},t.render())}get _renderedPanelAction(){const{panel:t}=this.item;if(!t?.visible)return null;const{open:i,title:s,disabled:o}=t;return c("calcite-action",{active:i,appearance:"transparent",disabled:o,icon:te(t),key:`action-${t.uid}`,onclick:()=>this._togglePanel(t),scale:"s",slot:"actions-end",text:s??"",title:s??void 0},this._renderFallbackIcon(t))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:t,messagesCommon:i}=this,s=i.options;return c("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:i.menu,open:t.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},c("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:s,title:s}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(t=>c("calcite-action-group",{key:`action-section-${t.uid}`},t.toArray().map(i=>this._renderAction({action:i,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){const{css:t}=this,i=this.item.layer,s=i?.type==="catalog-footprint",o=i?.type==="sublayer"&&ee(i,"footprints");return"itemCatalogIcon"in t&&(s||o)?c("calcite-icon",{class:t.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){const{css:t}=this,i=this.item.layer,s=i?.type==="catalog-dynamic-group",o=i?.type==="sublayer"&&ee(i,"layers-in-view");return"itemCatalogIcon"in t&&(s||o)?c("calcite-icon",{class:t.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:t,item:i,visibleElements:s}=this;if(!("visible"in i))return;const{layer:o}=i,r=o?.type==="catalog-dynamic-group";return"catalogLayerList"in s&&s.catalogLayerList&&r?c("calcite-action",{appearance:"transparent",disabled:!o.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(i),scale:"s",slot:"actions-end",text:t}):null}get _renderedChildList(){const{dragEnabled:t,item:i,rootGroupUid:s,listModeDisabled:o,selectionMode:r,displayMode:p}=this;if(!("children"in i))return;const h=[...this.parentTitles??[],i.title],{children:y,layer:m}=i,b=m?.type!=="catalog-dynamic-group"&&We(i),I=!o&&De(m),w=m?.type==="group",O=!I&&!b&&t&&w,D=!!t&&"childrenSortable"in i&&i.childrenSortable&&Ve(i);return b||O?c("calcite-list",{canPull:_=>!!this.canMove&&this.canMove(_,"pull"),canPut:_=>!!this.canMove&&this.canMove(_,"put"),"data-item":i,"data-layer-type":s,displayMode:p,dragEnabled:D,group:w?s:`${s}-${m?.uid}`,key:`child-list-${m?.uid}`,label:i.title,selectionAppearance:"border",selectionMode:r},y?.filter(_=>!_.hidden&&(this.visibleElements.errors||!_.error)).toArray().map(_=>this._renderItem(_,i,h)),this._renderedTablesItem):null}get _hasTables(){const{layerTablesEnabled:t}=this,i=this.item.layer;if(!t||!i)return!1;switch(i.type){case"knowledge-graph":return t.includes(i.type)&&"tables"in i&&!!i.tables?.length;case"map-image":case"tile":return t.includes(i.type)&&"subtables"in i&&!!i.subtables?.length;default:return!1}}get _renderedTablesItem(){const{item:t,messages:i,css:s}=this,{layer:o}=t;return"itemTableIcon"in s&&"visible"in t&&"tables"in i&&this._hasTables?c("calcite-list-item",{class:s.item,"data-layer-id":o?.id,dragDisabled:!0,key:`list-item-table-list-tables-${o?.uid}`,label:i.tables,title:i.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(t)},c("calcite-icon",{class:s.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),c("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:t,messages:i,css:s}=this;return t.error?c("div",{class:s.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},c("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},c("div",{slot:"message"},"tableError"in i?i.tableError:i.layerError))):"incompatible"in t&&t.incompatible&&"layerIncompatible"in i?c("div",{class:s.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},c("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},c("div",{slot:"message"},i.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:je(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(t=>t.filter(i=>i.visible))}get _actionsCount(){return this.item.actionsSections.reduce((t,i)=>t+i.length,0)}_renderAction(t){const{item:i}=this,{action:s,textEnabled:o}=t;if(!s)return null;const{active:r,disabled:p,title:h,type:y,indicator:m}=s;return c("calcite-action",{active:y==="toggle"&&s.value,appearance:"transparent","data-action-id":s.id,disabled:p,icon:te(s),indicator:m,key:`action-${s.uid}`,loading:r,onclick:()=>this._triggerAction(i,s),scale:"s",slot:o?void 0:"actions-end",text:h??"",textEnabled:o,title:h??void 0},this._renderFallbackIcon(s))}_renderFallbackIcon(t){const{css:i}=this,{icon:s}=t,o="className"in t?t.className:void 0;if(s)return null;const r="image"in t?t.image:void 0,p={[i.itemActionIcon]:!!o,[i.itemActionImage]:!!r};return o&&(p[o]=!0),r||o?c("span",{"aria-hidden":"true",class:this.classes(i.itemActionIcon,p),key:"icon",styles:Ie(r)}):null}_renderItem(t,i,s=[]){return c(W,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,displayMode:this.displayMode,dragEnabled:this.dragEnabled,item:t,key:`layerListItem-${t.layer?.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:s,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(t,i){i&&t&&(i.type==="toggle"&&(i.value=!i.value),this.onAction(i,t))}_triggerOnTablesOpen(t){t&&this.onTablesOpen&&this.onTablesOpen(t)}_triggerOnCatalogOpen(t){t&&this.onCatalogOpen?.(t)}_focusSelectedDragEl(t,i){this.selectedDragItemLayerUid===i.layer?.uid&&(B(t),this.onSelectedDragItemLayerUidChange?.(null))}_handleCalciteListItemToggle(t,i){t.stopPropagation(),i.open=t.target.expanded}_getParentVisibilityMode(t){return t&&"visibilityMode"in t?t.visibilityMode:null}_handleCalciteListItemSelect(t,i,s){if(T(t.target)!==i)return;const o=this._getParentVisibilityMode(s);this.selectionMode==="none"&&o!=="inherited"&&this._toggleVisibility(i,s)}_togglePanel(t){t.open=!t.open,t.open&&this.onPanelOpen()}_toggleVisibility(t,i){!t||!("visible"in t)||this._getParentVisibilityMode(i)==="exclusive"&&t.visible||(t.visible=!t.visible)}},W=F,F.vnodeSelector="calcite-list-item",F);l([n()],a.prototype,"activeItem",void 0),l([n()],a.prototype,"canMove",void 0),l([n()],a.prototype,"css",void 0),l([n()],a.prototype,"displayMode",void 0),l([n()],a.prototype,"dragEnabled",void 0),l([n()],a.prototype,"dragDisabled",void 0),l([n()],a.prototype,"item",void 0),l([n()],a.prototype,"layerTablesEnabled",void 0),l([n()],a.prototype,"listModeDisabled",void 0),l([n()],a.prototype,"messages",void 0),l([n()],a.prototype,"messagesCommon",void 0),l([n()],a.prototype,"onAction",void 0),l([n()],a.prototype,"onPanelOpen",void 0),l([n()],a.prototype,"onCatalogOpen",void 0),l([n()],a.prototype,"onTablesOpen",void 0),l([n()],a.prototype,"onSelectedDragItemLayerUidChange",void 0),l([n()],a.prototype,"onTooltipReferenceChange",void 0),l([n()],a.prototype,"parent",void 0),l([n()],a.prototype,"parentTitles",void 0),l([n()],a.prototype,"rootGroupUid",void 0),l([n()],a.prototype,"selectionMode",void 0),l([n()],a.prototype,"selectedItems",void 0),l([n()],a.prototype,"selectedDragItemLayerUid",void 0),l([n()],a.prototype,"visibleElements",void 0),l([n()],a.prototype,"visibilityAppearance",void 0),l([n()],a.prototype,"_title",null),l([n()],a.prototype,"_renderedItemStatus",null),l([n()],a.prototype,"_renderedItemTemporaryIcon",null),l([n()],a.prototype,"_renderedItemToggle",null),l([n()],a.prototype,"_renderedPanel",null),l([n()],a.prototype,"_renderedPanelAction",null),l([n()],a.prototype,"_renderedActions",null),l([n()],a.prototype,"_renderedActionMenu",null),l([n()],a.prototype,"_renderedActionMenuContent",null),l([n()],a.prototype,"_renderedCatalogFootprintIcon",null),l([n()],a.prototype,"_renderedCatalogDynamicIcon",null),l([n()],a.prototype,"_renderedCatalogSelectNode",null),l([n()],a.prototype,"_renderedChildList",null),l([n()],a.prototype,"_hasTables",null),l([n()],a.prototype,"_renderedTablesItem",null),l([n()],a.prototype,"_renderedItemMessage",null),l([n()],a.prototype,"_singleAction",null),l([n()],a.prototype,"_filteredSections",null),l([n()],a.prototype,"_actionsCount",null),a=W=l([k("esri.widgets.LayerList.LayerListItem")],a);const qe=a;let v=class extends j(q){constructor(e,t){super(e,t),this._legend=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([L(()=>this._canCreateLegend,()=>this._createLegend(),M),L(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),M)])}destroy(){this._legend=le(this._legend)}get _canCreateLegend(){const{content:e,listItem:t}=this;if(!t)return!1;const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}get _legendOptions(){const{listItem:e,_legendLayerInfo:t}=this,i=e?.view;return t&&i?{view:i,layerInfos:[t]}:{}}get _legendLayerInfo(){const e=this.listItem?.layer;if(!e||e.type==="subtype-sublayer")return null;const t=J(e)?e:null,i=e?.parent,s=i!=null&&"type"in i&&i.type==="map-image"?t?.source:null,o="";return s&&i?{layer:i,title:o,sublayerIds:[s.mapLayerId]}:{layer:e,title:o}}get disabled(){const{listItem:e,_legend:t,content:i}=this;return!e||!(Array.isArray(i)&&i.length>1)&&!!t&&(!t.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return c("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:t,disabled:i,open:s}=this;return e&&!i&&s?e==="legend"&&t?c("div",{key:"legend-widget"},t.render()):typeof e=="string"?c("div",{innerHTML:e,key:e}):ie(e)?c("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?c("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:t}=this;return t?Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e):null}async _createLegend(){if(le(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await f(()=>import("./CKhDoJii.js"),__vite__mapDeps([58,3,4,5,6,13,10,11,12,2,7,8,9,14,15,16,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,20,166]),import.meta.url),t=new e(this._legendOptions);this._legend=t}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:ie(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(t=>this._getWidget(t)).find(t=>t):this._getWidget(e)}};l([n()],v.prototype,"_legend",void 0),l([n()],v.prototype,"_canCreateLegend",null),l([n()],v.prototype,"_legendOptions",null),l([n()],v.prototype,"_legendLayerInfo",null),l([n()],v.prototype,"content",void 0),l([n()],v.prototype,"disabled",null),l([n()],v.prototype,"flowEnabled",void 0),l([n()],v.prototype,"icon",null),l([n()],v.prototype,"image",void 0),l([n()],v.prototype,"listItem",void 0),l([n()],v.prototype,"open",void 0),l([n()],v.prototype,"title",null),l([n()],v.prototype,"visible",void 0),v=l([k("esri.widgets.LayerList.ListItemPanel")],v);const ye=v;var R;const Je=$.ofType({key:"type",defaultKeyValue:"button",base:Te,typeMap:{button:Ae,toggle:Me}}),me=$.ofType(Je),z="layer",H="child-list-mode",Ke="hide";let u=R=class extends j(ae){constructor(e){super(e),this.actionsSections=new me,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new($.ofType(R)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.parent=null,this.view=null}initialize(){if(this.addHandles([L(()=>[this.layer,this.layer?.listMode,this.listModeDisabled],()=>this._watchLayerProperties(this.layer),M),L(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),M),L(()=>this.view,e=>this._updateChildrenView(e),M),L(()=>this.panel,e=>this._setListItemOnPanel(e),M)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;const i=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(s=>s.layer===i)??null}set panel(e){const t=this._get("panel");e!==t&&e&&t?.destroy(),this._set("panel",e)}castPanel(e){return this.panel?.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new ye(e):null}get sortable(){return this.layer?.type!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=V(this,"layer.layer");return(!e||e&&V(this,"layer.layer.loaded"))&&V(this,"layer.title")||V(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){const{layer:e,checkPublishStatusEnabled:t}=this;return!!(t&&e&&"publishingInfo"in e&&e.publishingInfo?.status==="publishing")}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:s}=this;return!s&&!t&&(e?e.updating:i?.loadStatus==="loading"||!1)}get visible(){return!!this.layer?.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!He(this.layer,this.view?.scale)}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return xe(this.layer)}clone(){return new R({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){this.children?.forEach(t=>t.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_createChildren(e){const{listModeDisabled:t,children:i}=this,s=e.filter(o=>!i.some(r=>r.layer===o));i.addMany(this._createChildItems(s,t))}_destroyChildren(e){const{children:t}=this,i=t.filter(s=>!!s.layer&&!e.includes(s.layer));t.destroyMany(i)}_sortChildren(e){this.children.sort((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(H),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(H),this.listModeDisabled||this.addHandles(e.toArray().map(t=>L(()=>t.listMode,()=>this._compileChildren(e))),H)}_compileChildren(e){const t=this.listModeDisabled?e:e?.filter(i=>G(i)!==Ke);e?.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),z)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.reverse().map(i=>t||Ue(i)?new R({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(ve)}_watchLayerProperties(e){if(this.removeHandles(z),this.removeHandles(H),!e)return;if((!this.listModeDisabled&&G(e))==="hide-children")return void this.children.destroyAll();const t=pe(e);t&&this.addHandles(L(()=>e[t],i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)},M),z)}};l([n({type:me})],u.prototype,"actionsSections",void 0),l([n()],u.prototype,"actionsOpen",void 0),l([n()],u.prototype,"checkPublishStatusEnabled",void 0),l([n({type:$.ofType(u)})],u.prototype,"children",void 0),l([n()],u.prototype,"childrenSortable",void 0),l([n({readOnly:!0})],u.prototype,"connectionStatus",null),l([n({readOnly:!0})],u.prototype,"error",null),l([n()],u.prototype,"hidden",void 0),l([n({readOnly:!0})],u.prototype,"incompatible",null),l([n()],u.prototype,"layer",void 0),l([n({readOnly:!0})],u.prototype,"layerView",null),l([n()],u.prototype,"listItemCreatedFunction",void 0),l([n({nonNullable:!0})],u.prototype,"listModeDisabled",void 0),l([n()],u.prototype,"open",void 0),l([n({type:ye})],u.prototype,"panel",null),l([Ee("panel")],u.prototype,"castPanel",null),l([n()],u.prototype,"parent",void 0),l([n({value:!0})],u.prototype,"sortable",null),l([n()],u.prototype,"title",null),l([n({readOnly:!0})],u.prototype,"publishing",null),l([n({readOnly:!0})],u.prototype,"updating",null),l([n()],u.prototype,"view",void 0),l([n()],u.prototype,"visible",null),l([n({readOnly:!0})],u.prototype,"visibleAtCurrentScale",null),l([n({readOnly:!0})],u.prototype,"visibleAtCurrentTimeExtent",null),l([n({readOnly:!0})],u.prototype,"visibilityMode",null),u=R=l([k("esri.widgets.LayerList.ListItem")],u);const K=u,A={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},Qe="hide",ge=$.ofType(K);let P=class extends Ce{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new ge,this.view=null}initialize(){this.addHandles([L(()=>this.view?.ready===!0,()=>this._viewHandles(),M),L(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),L(()=>se(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],A.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,s){const o=e?.layer;if(!o||o.type==="subtype-sublayer"||o.type==="sublayer")return;const r=this.view?.map?.layers,p=t?ne(t):r,h=i?ne(i):r;if(!p||!h)return;const{operationalItems:y}=this,m=t?.children||y,b=i?.children||y,I=h.length-s;e.parent=i||null,m.remove(e),p.remove(o),b.includes(e)||b.add(e,I),h.includes(o)||h.add(o,I),this._compileList()}_createLayerViewHandles(e){this.removeHandles(A.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),A.layerViews)}_createMapLayerHandles(e){this.removeHandles(A.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),A.mapLayers)}_createListItem(e){const{view:t,listItemCreatedFunction:i,checkPublishStatusEnabled:s,listModeDisabled:o}=this;return new K({checkPublishStatusEnabled:s,listModeDisabled:o,layer:e,listItemCreatedFunction:i,view:t})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(t=>G(t)!==Qe):void 0}_watchLayersListMode(e){this.removeHandles(A.layerListMode),e&&!this.listModeDisabled&&this.addHandles(L(()=>e.filter(t=>"listMode"in t).map(t=>t.listMode).toArray(),()=>this._compileList()),A.layerListMode)}_compileList(){const e=this.view?.map?.layers,t=se(this.view)&&!this.view.inGeographicLayout?e?.filter(({type:s})=>s==="link-chart"):e;this._watchLayersListMode(t);const i=this._getViewableLayers(t);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach(i=>{t.some(s=>s.layer===i)||t.add(this._createListItem(i))})}_removeItems(e){const{operationalItems:t}=this,i=[];t.forEach(s=>{s&&e&&e.includes(s.layer)||i.push(s)}),t.destroyMany(i)}_sortItems(e){const{operationalItems:t}=this;t.sort((i,s)=>{const o=e.indexOf(i.layer),r=e.indexOf(s.layer);return o>r?-1:o<r?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([A.mapLayers,A.layerViews,A.viewLayers]),e?.ready?this.addHandles([L(()=>this.view?.map?.allLayers,t=>this._createMapLayerHandles(t),M),L(()=>this.view?.allLayerViews,t=>this._createLayerViewHandles(t),M)],A.viewLayers):this._removeAllItems()}};l([n()],P.prototype,"checkPublishStatusEnabled",void 0),l([n()],P.prototype,"listItemCreatedFunction",void 0),l([n({nonNullable:!0})],P.prototype,"listModeDisabled",void 0),l([n({type:ge})],P.prototype,"operationalItems",void 0),l([n({readOnly:!0})],P.prototype,"state",null),l([n()],P.prototype,"totalItems",null),l([n()],P.prototype,"view",void 0),P=l([k("esri.widgets.LayerList.LayerListViewModel")],P);const _e=P;let E=class extends ae{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};l([n({type:Boolean,nonNullable:!0})],E.prototype,"catalogLayerList",void 0),l([n({type:Boolean,nonNullable:!0})],E.prototype,"closeButton",void 0),l([n({type:Boolean,nonNullable:!0})],E.prototype,"collapseButton",void 0),l([n({type:Boolean,nonNullable:!0})],E.prototype,"errors",void 0),l([n({type:Boolean,nonNullable:!0})],E.prototype,"filter",void 0),l([n({type:Boolean,nonNullable:!0})],E.prototype,"flow",void 0),l([n({type:Boolean,nonNullable:!0})],E.prototype,"heading",void 0),l([n({type:Boolean,nonNullable:!0})],E.prototype,"statusIndicators",void 0),l([n({type:Boolean,nonNullable:!0})],E.prototype,"temporaryLayerIndicators",void 0),E=l([k("esri.widgets.LayerList.LayerListVisibleElements")],E);const be=E,Xe=["label","description","metadata"],Ye=$.ofType(K),re="nested";let d=class extends j(q){constructor(e,t){super(e,t),this._rootListEl=null,this._activeItem=null,this._tooltipReferenceMap=new X,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new X,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new $(["knowledge-graph"]),this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=Pe,this.minFilterItems=Oe,this.openedLayers=new $,this.openedLayerLists=new $,this.selectedItems=new Ye,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new _e,this.visibilityAppearance="default",this.visibleElements=new be,this._canMove=({dragEl:i,fromEl:s,toEl:o},r)=>{const p=r==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,h=T(i);if(!h?.sortable)return!1;const y=T(s),m=oe(s),b=T(o),I=oe(o),w=!!m&&!!I&&m===I,O={selected:h,from:y,to:b},D=s.group,_=o.group,N=y?.layer?.type??"",g=b?.layer?.type??"",Q=new Set(["map-image","catalog","knowledge-graph"]);return D&&_&&typeof p=="function"?p.call(null,O):w&&!Q.has(N)&&!Q.has(g)&&h?.layer?.type!=="sublayer"},this._onCatalogOpen=i=>{this.openedLayers.push(i.layer?.parent),this._focusLayerFlowItem=i.layer?.uid},this._onTablesOpen=i=>{this.openedLayers.push(i.layer),this._focusLayerFlowItem=i.layer?.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onTooltipReferenceChange=(i,s)=>{s?this._tooltipReferenceMap.set(i,s):this._tooltipReferenceMap.delete(i)},this._onSelectedDragItemLayerUidChange=i=>{this._selectedDragItemLayerUid=i},this._onTriggerAction=(i,s)=>{this.triggerAction(i,s)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=i=>{if(this.visibilityAppearance!=="default")return;const s=Array.from(i.composedPath()).find(o=>o.classList?.contains(x.item));this._activeItem=T(s)},this._onCalciteListOrderChange=i=>{const{_lastDragDetail:s}=this,{toEl:o,fromEl:r,dragEl:p,newIndex:h}=i;if(r&&o&&!(s?.newIndex===h&&s?.dragEl===p&&s?.toEl===o&&s?.fromEl===r)){if(this._lastDragDetail=i,this._selectedDragItemLayerUid=p.value,r===o){const y=Array.from(r.children).filter(m=>m?.matches("calcite-list-item")).map(m=>m.value);return void this._sortLayers(r,y)}this._moveLayerFromChildList({toEl:o,fromEl:r,dragEl:p,newIndex:h})}}}initialize(){this.addHandles([Y(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),M),Y(()=>this.viewModel.operationalItems,"change",()=>Re(this.selectedItems),M),L(()=>[this.filterPredicate,this._rootListEl],()=>Ne(this._rootListEl,this.filterPredicate))])}loadDependencies(){return de({button:()=>f(()=>import("./CcdLLxYe.js"),__vite__mapDeps([167,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,26,35,29,27,53,28]),import.meta.url),flow:()=>f(()=>import("./CmbaMVYS.js"),__vite__mapDeps([168,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,26,23,22,28,19,20]),import.meta.url),"flow-item":()=>f(()=>import("./Bk-CNa4s.js"),__vite__mapDeps([169,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,49,170]),import.meta.url),list:()=>f(()=>import("./Z__T9Lpy.js"),__vite__mapDeps([48,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,49,26,23,22,25,21,50,51,52,35,29,27,38,53,54,28,55,33,46]),import.meta.url),notice:()=>f(()=>import("./MBhswfTz.js"),__vite__mapDeps([56,21,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,22,23,26,57,34,28,19,20,18]),import.meta.url),tooltip:()=>f(()=>import("./CsJ57Kta.js"),__vite__mapDeps([171,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,26,31,32,22,33,17,34,36,25]),import.meta.url)})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten(e=>e.children.filter(t=>t.layer?.type!=="catalog-dynamic-group")).length}get _visibleItems(){return this.operationalItems?.filter(e=>!e.hidden&&(this.visibleElements.errors||!e.error))}get _openedPanelItems(){return this._visibleItems.flatten(e=>e.children).filter(({hidden:e,panel:t})=>!e&&t?.open&&!t.disabled&&t.flowEnabled)}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){const{openedLayers:e}=this;return e.toArray().map((t,i)=>this._renderLayerFlowItem(t,i===e.length-1))}get icon(){return"layers"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){const e=this.viewModel?.state,t={[U.hidden]:e==="loading",[U.disabled]:e==="disabled"};return c("div",{class:this.classes(x.base,U.widget,U.panel,t)},this._renderItemTooltips(),this._renderItems())}async _createFlowList(e,t){const{_layerListMap:i}=this,s=i.get(e);if(s)return s;const o=e.type==="catalog"?await this._createCatalogLayerList(e):await this._createTableList(e);return t.aborted||i.set(e,o),o}async _handleOpenedLayersChange(){const{_layerListMap:e,openedLayers:t,openedLayerLists:i}=this;this._openedLayersController?.abort();const s=new AbortController,{signal:o}=s;this._openedLayersController=s,e.forEach((h,y)=>{t.includes(y)||(h.destroy(),e.delete(y))});const r=await Promise.all(t.map(h=>this._createFlowList(h,o)));if(o.aborted)return;i.removeAll(),i.addMany(r);const p=i.at(-1);p?"catalogLayer"in p?(this._set("catalogLayerList",p),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",p)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(e){const{_tooltipReferenceMap:t,messages:i}=this;return e?c("calcite-tooltip",{key:`tooltip-${e.layer?.uid}`,overlayPositioning:"fixed",referenceElement:t.get(e.layer?.uid)},i.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){return e.incompatible?this._renderItemTooltip(e):e.children?.filter(t=>!t.hidden).toArray().map(t=>this._renderItemTooltipNodes(t))}_renderItemTooltips(){return this._visibleItems?.toArray().map(e=>this._renderItemTooltipNodes(e))}_renderNoItemsMessage(){return c("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return c("div",{class:x.itemMessage,key:"esri-layer-list__no-items"},c("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}async _createCatalogLayerList(e){const{default:t}=await f(()=>import("./C6ttjuGt.js"),__vite__mapDeps([172,11,3,4,5,6,59,8,9,60,12,173,13,2,7,10,14,15,16,140,174,166]),import.meta.url),{headingLevel:i,catalogOptions:s,view:o,filterPlaceholder:r,listItemCreatedFunction:p,minFilterItems:h,selectionMode:y,visibilityAppearance:m,_onCatalogOpen:b,_onTablesOpen:I,layerTablesEnabled:w}=this;return new t({headingLevel:i,view:o,filterPlaceholder:r,listItemCreatedFunction:p,minFilterItems:h,selectionMode:y,visibilityAppearance:m,...s,catalogLayer:e,layerTablesEnabled:w,onCatalogOpen:b,onTablesOpen:I})}_getTableListParams(e){switch(e.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:e.tables};case"map-image":return{...this.mapImageOptions,tables:e.subtables};case"tile":return{...this.tileOptions,tables:e.subtables};default:return null}}async _createTableList(e){const{default:t}=await f(()=>import("./C6Dtflaq.js"),__vite__mapDeps([175,11,3,4,5,6,59,8,9,60,12,13,2,7,10,14,15,16,140,174,166,91]),import.meta.url),{headingLevel:i,selectionMode:s,dragEnabled:o}=this;return new t({headingLevel:i,selectionMode:s,dragEnabled:o,...this._getTableListParams(e)})}_renderLayerFlowItem(e,t){const{messages:i,openedLayers:s}=this,o=e.title||this.messages.untitledLayer;return c("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":e.uid,description:o,heading:i[e.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${e.uid}`,selected:t,onCalciteFlowItemBack:r=>{r.preventDefault(),s.pop();const p=s.at(-1);p?this._focusLayerFlowItem=p.uid:this._focusRootFlowItem=!0}},this._layerListMap.get(e)?.render())}_renderPanelFlowItems(){const{_openedPanelItems:e,openedLayers:t}=this;return e.toArray().map(({title:i,panel:s},o)=>{const r=()=>this._handlePanelFlowItemBack(s);return c("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:i,heading:s.title,headingLevel:this.headingLevel,key:`flow-panel-${s.uid}`,selected:!t.length&&o===e.length-1,onCalciteFlowItemBack:p=>{p.preventDefault(),r()}},s.render(),c("calcite-button",{appearance:"transparent",onclick:r,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,B(e))}_focusLayerFlowItemNode(e){this._focusLayerFlowItem===e.dataset.layerUid&&(this._focusLayerFlowItem=null,B(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,B(e))}_renderItems(){const{visible:e,collapsed:t,_visibleItems:i,_openedPanelItems:s,_filterEnabled:o,_rootGroupUid:r,visibleElements:{closeButton:p,collapseButton:h,heading:y,flow:m},_dragEnabled:b,selectionMode:I,filterText:w,openedLayers:O,filterPlaceholder:D,messages:_}=this,N=[c("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:p,closed:!e,collapsed:t,collapsible:h,heading:y?_.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!O.length&&!s.length,onCalciteFlowItemClose:()=>this.visible=!1},i?.length?null:this._renderNoItems(),c("calcite-list",{afterCreate:g=>{this._rootListEl=g,g.addEventListener("focusin",this._setActiveItem),g.addEventListener("focusout",this._clearActiveItem)},afterRemoved:g=>{this._rootListEl=null,g.removeEventListener("focusin",this._setActiveItem),g.removeEventListener("focusout",this._clearActiveItem)},canPull:g=>this._canMove(g,"pull"),canPut:g=>this._canMove(g,"put"),"data-layer-type":r,displayMode:re,dragEnabled:b,filterEnabled:o,filterPlaceholder:D,filterProps:Xe,filterText:o?w:"",group:r,key:"root-list",label:_.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:I,onCalciteListChange:g=>this._handleCalciteListChange(g),onCalciteListDragEnd:g=>this._handleCalciteListDragEnd(g.detail),onCalciteListFilter:g=>this.filterText=g.currentTarget?.filterText??"",onCalciteListOrderChange:g=>this._onCalciteListOrderChange(g.detail)},i.toArray().map(g=>this._renderItem(g)),o?c("div",{class:x.filterNoResults,slot:"filter-no-results"},c("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return e?m?c("calcite-flow",{key:"root-flow"},N):N:null}_renderItem(e,t,i){return c(qe,{activeItem:this._activeItem,canMove:this._canMove,css:x,displayMode:re,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer?.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:t,parentTitles:i,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:e,fromEl:t,dragEl:i,newIndex:s}){const o=T(i),r=T(e),p=T(t);this.viewModel.moveListItem(o,p,r,s)}_handleCalciteListDragEnd(e){const{fromEl:t,dragEl:i,oldIndex:s}=e;t.insertBefore(i,t.children[s])}_sortLayers(e,t){if(e)if(e===this._rootListEl)he(this.view?.map?.layers,t);else{const i=T(e);if(!i)return;Be(i,t)}}_handleCalciteListChange(e){const{selectionMode:t,selectedItems:i}=this;if(t==="none")return;const s=e.target.selectedItems.map(o=>T(o)).filter(Boolean);i.removeAll(),i.addMany(s)}};l([n()],d.prototype,"_rootListEl",void 0),l([n()],d.prototype,"_activeItem",void 0),l([n()],d.prototype,"_tooltipReferenceMap",void 0),l([n()],d.prototype,"_focusRootFlowItem",void 0),l([n()],d.prototype,"_focusPanelFlowItem",void 0),l([n()],d.prototype,"_focusLayerFlowItem",void 0),l([n()],d.prototype,"_layerListMap",void 0),l([n()],d.prototype,"_totalItems",null),l([n()],d.prototype,"_visibleItems",null),l([n()],d.prototype,"_openedPanelItems",null),l([n()],d.prototype,"_dragEnabled",null),l([n()],d.prototype,"_filterEnabled",null),l([n()],d.prototype,"_renderedOpenLayerFlowItems",null),l([n({readOnly:!0})],d.prototype,"catalogLayerList",void 0),l([n()],d.prototype,"catalogOptions",void 0),l([n()],d.prototype,"collapsed",void 0),l([n()],d.prototype,"dragEnabled",void 0),l([n()],d.prototype,"filterPlaceholder",void 0),l([n()],d.prototype,"filterPredicate",void 0),l([n()],d.prototype,"filterText",void 0),l([n()],d.prototype,"headingLevel",void 0),l([n()],d.prototype,"icon",null),l([n()],d.prototype,"knowledgeGraphOptions",void 0),l([n()],d.prototype,"label",null),l([n()],d.prototype,"layerTablesEnabled",void 0),l([n()],d.prototype,"listItemCanGiveFunction",void 0),l([n()],d.prototype,"listItemCanReceiveFunction",void 0),l([n()],d.prototype,"listItemCreatedFunction",null),l([n()],d.prototype,"mapImageOptions",void 0),l([n(),Z("esri/widgets/LayerList/t9n/LayerList")],d.prototype,"messages",void 0),l([n(),Z("esri/t9n/common")],d.prototype,"messagesCommon",void 0),l([n()],d.prototype,"minDragEnabledItems",void 0),l([n()],d.prototype,"minFilterItems",void 0),l([n({readOnly:!0})],d.prototype,"openedLayers",void 0),l([n({readOnly:!0})],d.prototype,"openedLayerLists",void 0),l([n()],d.prototype,"operationalItems",null),l([n()],d.prototype,"selectedItems",void 0),l([n()],d.prototype,"selectionMode",void 0),l([n({readOnly:!0})],d.prototype,"tableList",void 0),l([n()],d.prototype,"tileOptions",void 0),l([n()],d.prototype,"view",null),l([Le("trigger-action"),n({type:_e})],d.prototype,"viewModel",void 0),l([n()],d.prototype,"visibilityAppearance",void 0),l([n({type:be,nonNullable:!0})],d.prototype,"visibleElements",void 0),d=l([k("esri.widgets.LayerList")],d);const Ze=d,vt=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"}));export{qe as C,Ze as D,K as I,vt as L,T as N,pe as d,Pe as e,Ne as f,Oe as i,Ue as p,oe as q,Re as s,Xe as t,G as u};
