import{b as _,h as l,c as d,a4 as h,X as g,ae as m,E as y,e as w,a8 as o,aC as E,i as p,J as q,r as v,aD as R}from"./DJ1Kzkln.js";function k(s,r,...n){var e=s,t=o,u;_(()=>{t!==(t=r())&&(u&&(E(u),u=null),u=w(()=>t(e,...n)))},y),l&&(e=p)}function x(s){return(r,...n)=>{var e=s(...n),t;if(l)t=p,d();else{var u=e.render().trim(),f=h(u);t=q(f),r.before(t)}const i=e.setup?.(t);g(t,t),typeof i=="function"&&m(i)}}function S(s,r,n){if(s==null)return r(void 0),o;const e=v(()=>s.subscribe(r,n));return e.unsubscribe?()=>e.unsubscribe():e}const c=[];function z(s,r=o){let n=null;const e=new Set;function t(i){if(R(s,i)&&(s=i,n)){const b=!c.length;for(const a of e)a[1](),c.push(a,s);if(b){for(let a=0;a<c.length;a+=2)c[a][0](c[a+1]);c.length=0}}}function u(i){t(i(s))}function f(i,b=o){const a=[i,b];return e.add(a),e.size===1&&(n=r(t,u)||o),i(s),()=>{e.delete(a),e.size===0&&n&&(n(),n=null)}}return{set:t,update:u,subscribe:f}}function A(s){let r;return S(s,n=>r=n)(),r}export{S as a,x as c,A as g,k as s,z as w};
