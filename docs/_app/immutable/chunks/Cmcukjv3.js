const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BdxnjgRm.js","./DwAWIrQ2.js","./D6wORzA5.js","./D6KPPgz5.js","./BoGhUpgK.js","./BO0zSyDw.js","./k6TpQ-vv.js","./zaHqI9Tj.js","./BWW8flL2.js","./n6gGuowy.js","./B5lVMRid.js","./DSPk0Ak5.js","./ju9f9SUf.js","./BTaqRh0J.js","./CzvYEThE.js","./Bz8ODP7-.js","./f3N8RNee.js","./PPVm8Dsz.js","./BCCr_gIb.js","./BIm8jKWl.js","./mHg8bgsm.js","./6MRGLEa9.js","./DOsAn7Yf.js","./DGk5f3jX.js","./C8GVJd0n.js","./DkeL9hOQ.js","./9YvG7tFv.js","./NvCg0b_A.js","./DVjOipaJ.js","./aQeO9QTD.js","./DHt-b6sf.js","./llusru1W.js","./CtAyxxum.js","./CNM-_wGD.js","./TzWrp0a3.js","./BtaXzzQS.js","./CSl9z7eV.js"])))=>i.map(i=>d[i]);
import{r as I}from"./D6KPPgz5.js";import{e as C}from"./D-YQ4CHs.js";import{n as $,F as y}from"./ByDk2C3L.js";import{_ as d}from"./PPVm8Dsz.js";import{l as A}from"./DwAWIrQ2.js";import{L as E}from"./BO0zSyDw.js";import{r as V}from"./Ctqntsjr.js";import{T as x}from"./BCCr_gIb.js";import{o as R}from"./CWFjSrE_.js";import{N as U,$ as N}from"./C0inHWSP.js";import{m as M}from"./DVjOipaJ.js";import{c as T}from"./DoEkxHGI.js";function st({level:t,class:e,...n},o){const r=w(t);return $(`h${r}`,{...n,"aria-level":String(r),class:y(C.heading,e),role:"heading"},o)}function w(t){return I(Math.ceil(t),1,6)}function ut(t,e=1){return w(t+e)}const _=/^-?(\d+)(\.(\d+))?$/i;function O(t,e){return t-e}function B(t,e){let n,o;return n=Number(t.toFixed(e)),n<t?o=n+1/10**e:(o=n,n-=1/10**e),n=Number(n.toFixed(e)),o=Number(o.toFixed(e)),[n,o]}function F(t,e,n,o,r){const l=Q(t,e,n,o),i=l.previous==null||l.previous<=r,a=l.next==null||l.next<=r;return i&&a||l.previous+l.next<=2*r}function v(t){const e=String(t),n=e.match(_);if(n?.[1])return{integer:n[1].split("").length,fractional:n[3]?n[3].split("").length:0};if(e.toLowerCase().includes("e")){const o=e.split("e"),r=o[0],l=o[1];if(r&&l){const i=Number(r);let a=Number(l);const u=a>0;u||(a=Math.abs(a));const s=v(i);return u?(s.integer+=a,a>s.fractional?s.fractional=0:s.fractional-=a):(s.fractional+=a,a>s.integer?s.integer=1:s.integer-=a),s}}return{integer:0,fractional:0}}function Q(t,e,n,o){const r={previous:null,next:null};if(n!=null){const l=t-n,i=e-n-l;r.previous=Math.floor(Math.abs(100*i/l))}if(o!=null){const l=o-t,i=o-e-l;r.next=Math.floor(Math.abs(100*i/l))}return r}function ct(t,e={}){const n=t.slice(),{tolerance:o=2,strictBounds:r=!1,indexes:l=n.map(((i,a)=>a))}=e;l.sort(O);for(let i=0;i<l.length;i++){const a=l[i],u=n[a],s=a===0?null:n[a-1],c=a===n.length-1?null:n[a+1],f=v(u).fractional;if(f){let m,p=0,g=!1;for(;p<=f&&!g;){const h=B(u,p);m=r&&i===0?h[1]:h[0],g=F(u,m,s,c,o),p++}g&&(n[a]=m)}}return n}const L={maximumFractionDigits:20};function q(t){return R(t,L)}const k="<",D=">";function S(t,e,n,o){let r="";return e===0?r=`${k} `:e===n&&(r=`${D} `),r+(o?U(t,o):q(t))}const At=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function j(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find((i=>i.type==="color"));if(!e)return null;let n=null,o=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;n=e.stops[0].value,o=e.stops[e.stops.length-1].value}const r=n!=null&&o!=null?n+(o-n)/2:0,{getColor:l}=await d(async()=>{const{getColor:i}=await import("./BdxnjgRm.js").then(a=>a.b);return{getColor:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]),import.meta.url);return l(e,r)??null}async function ft(t,e){const n=t.trailCap,o=t.trailWidth||1,r=e||await j(t)||t.color;return new M({cap:n,color:r,width:o})}function K(t,e){if(!e.field)return null;if("featureReduction"in t)switch(t.featureReduction?.type){case"cluster":case"binning":{const n=t.featureReduction.fields.find((({name:o})=>o.toLowerCase()===e.field.toLowerCase()));return n&&"getField"in t?t.getField(n.onStatisticField):null}}return"getField"in t?t.getField?.(e.field):null}function W(t,e){const n="popupTemplate"in t?t.popupTemplate?.fieldInfos:null;if(n?.length&&e)return n.find((o=>o.fieldName?.toLowerCase()===e.toLowerCase()))?.format?.dateFormat}function mt(t,e,n){const o=K(t,e);if(!o||!N(o)&&!x(o))return null;let r=W(t,o.name);if(!r&&o.type==="date"){let l=0,i=0;e.stops?(l=e.stops?.at(0)?.value??l,i=e.stops?.at(-1)?.value??i):"minDataValue"in e&&"maxDataValue"in e&&(l=e.minDataValue??l,i=e.maxDataValue??i),r=i-l>2*V.days?"short-date":"short-date-short-time"}return{fieldType:o.type,format:r,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:n,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}}}function pt(t,e){if("authoringInfo"in t)return t.authoringInfo?.visualVariables?.find((({theme:n})=>n===e))}const G=new A([64,64,64]);function b(t,e){const n=[],o=t.length-1;return t.length===5?n.push(0,2,4):n.push(0,o),t.map(((r,l)=>n.includes(l)?S(r,l,o,e):null))}async function gt(t,e,n){let o=!1,r=[],l=[];if(t.stops){const s=t.stops;r=s.map((c=>c.value)),o=s.some((c=>!!c.label)),o&&(l=s.map((c=>c.label)))}const i=r[0],a=r[r.length-1];if(i==null&&a==null)return null;const u=o?null:b(r,n);return(await Promise.all(r.map((async(s,c)=>{const f=t.type==="opacity"?await P(s,t,e):(await d(async()=>{const{getColor:p}=await import("./BdxnjgRm.js").then(g=>g.b);return{getColor:p}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]),import.meta.url)).getColor(t,s),m=o?l[c]:u?.[c]??"";return f==null?null:{value:s,color:f,label:m}})))).filter(E).reverse()}async function P(t,e,n){const o=new A(n??G),r=(await d(async()=>{const{getOpacity:l}=await import("./BdxnjgRm.js").then(i=>i.b);return{getOpacity:l}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]),import.meta.url)).getOpacity(e,t);return r!=null&&(o.a=r),o}function dt(t){let e=!1,n=[],o=[];n=t.map((a=>a.value)),e=t.some((a=>!!a.label)),e&&(o=t.map((a=>a.label??"")));const r=n[0],l=n[n.length-1];if(r==null&&l==null)return null;const i=e?null:b(n);return n.map(((a,u)=>({value:a,color:H(a,t),label:e?o[u]:i?.[u]??""}))).reverse()}function H(t,e){const{startIndex:n,endIndex:o,weight:r}=Z(t,e);if(n===o)return e[n].color;const l=A.blendColors(e[n].color,e[o].color,r);return new A(l)}function Z(t,e){let n=0,o=e.length-1;return e.some(((r,l)=>t<r.value?(o=l,!0):(n=l,!1))),{startIndex:n,endIndex:o,weight:(t-e[n].value)/(e[o].value-e[n].value)}}function ht(t,e){let n=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach(((o,r)=>{r===0?n.push({value:e.max,color:new A(o.toColor),label:"high"}):n.push({value:null,color:new A(o.toColor),label:""}),r===t.colorRamps.length-1?n.push({value:e.min,color:new A(o.fromColor),label:"low"}):n.push({value:null,color:new A(o.fromColor),label:""})}));else{let o,r;t&&t.type==="algorithmic"?(o=t.fromColor,r=t.toColor):(o=[0,0,0,1],r=[255,255,255,1]),n=[{value:e.max,color:new A(r),label:"high"},{value:e.min,color:new A(o),label:"low"}]}return n}function wt(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter((o=>o.color?.a>0));let n=e.length-1;if(e&&e[0]){const o=e[n];o&&o.ratio!==1&&(e.push(new T({ratio:1,color:o.color})),n++)}return e.map(((o,r)=>{let l="";return r===0?l=t.legendOptions?.minLabel||"low":r===n&&(l=t.legendOptions?.maxLabel||"high"),{color:o.color,label:l,ratio:o.ratio}})).reverse()}export{D as a,dt as b,pt as c,wt as d,ht as e,j as f,At as g,mt as h,v as i,st as j,Q as l,ut as n,k as o,ft as p,S as r,H as s,gt as t,ct as u};
