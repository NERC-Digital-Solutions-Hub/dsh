import{g as E,s as se,i as le,L as ae}from"./Rwg6dtTd.js";function k(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}const ie=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,ue={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function C(e){const t=e?.match(ie);if(!t)return null;const[,n,r,o]=t;if(!n)return null;let s=null,l=null,i=null;const{devext:c,qaext:f,www:y}=ue;if(r)if(s=n,o)switch(o.toLowerCase()){case"devext":({customBaseUrl:l,portalHostname:i}=c);break;case"qa":({customBaseUrl:l,portalHostname:i}=f);break;default:return null}else({customBaseUrl:l,portalHostname:i}=y);else switch(n.toLowerCase()){case"devext":({customBaseUrl:l,portalHostname:i}=c);break;case"qaext":({customBaseUrl:l,portalHostname:i}=f);break;case"www":({customBaseUrl:l,portalHostname:i}=y);break;default:return null}return{customBaseUrl:l,isPortal:!1,portalHostname:i,urlKey:s}}function an(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function un(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,n=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):n.test(e)?e=e.replace(n,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}function ce(e){const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}function fe(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}const pe=()=>le.getLogger("esri.core.urlUtils"),d=E.request,z="esri/config: esriConfig.request.proxyUrl is not set.",D=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,J=/^\s*http:/i,Q=/^\s*https:/i,he=/^\s*file:/i,W=/:\d+$/,me=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,de=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ge=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");class h{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let n=this.uri.match(de);this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),this.authority!=null&&(n=this.authority.match(ge),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}toString(){return this.uri}}const $={},F=new h(E.applicationUrl);let a=F;const N=we();let b=N;const ye=()=>a,xe=()=>b;function we(){const e=a.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${a.scheme}://${a.host}${a.port!=null?`:${a.port}`:""}`}${t}`}const $e={setAppUrl:e=>a=e,setAppBaseUrl:e=>b=e,restoreUrls:()=>{a=F,b=N}};function p(e){if(!e)return null;const t={path:null,query:null},n=new h(e),r=e.indexOf("?");return n.query===null?t.path=e:(t.path=e.slice(0,r),t.query=H(n.query)),n.fragment&&(t.hash=n.fragment,n.query===null&&(t.path=t.path.slice(0,t.path.length-(n.fragment.length+1)))),t}function H(e){const t=e.split("&"),n={};for(const r of t){if(!r)continue;const o=r.indexOf("=");let s,l;o<0?(s=decodeURIComponent(r),l=""):(s=decodeURIComponent(r.slice(0,o)),l=decodeURIComponent(r.slice(o+1)));let i=n[s];typeof i=="string"&&(i=n[s]=[i]),Array.isArray(i)?i.push(l):n[s]=l}return n}function q(e,t){return e?t&&typeof t=="function"?Object.keys(e).map((n=>encodeURIComponent(n)+"="+encodeURIComponent(t(n,e[n])))).join("&"):Object.keys(e).map((n=>{const r=e[n];if(r==null)return"";const o=encodeURIComponent(n)+"=",s=t?.[n];return s?o+encodeURIComponent(s(r)):Array.isArray(r)?r.map((l=>k(l)?o+encodeURIComponent(JSON.stringify(l)):o+encodeURIComponent(l))).join("&"):k(r)?o+encodeURIComponent(JSON.stringify(r)):o+encodeURIComponent(r)})).filter((n=>n)).join("&"):""}function _(e=!1){let t,n=d.proxyUrl;if(typeof e=="string"){t=ne(e);const r=A(e);r&&(n=r.proxyUrl)}else t=!!e;if(!n)throw pe().warn(z),new se("urlUtils:proxy-not-set",z);return t&&v()&&(n=I(n)),p(n)}function Ue(e,t=!1){const n=A(e);let r,o;if(n){const s=j(n.proxyUrl);r=s.path,o=s.query?H(s.query):null}else if(t){const s=_(e);r=s.path,o=s.query}if(r){const s=p(e);e=r+"?"+s.path;const l=q({...o,...s.query});l&&(e=`${e}?${l}`)}return e}const w={path:"",query:""};function j(e){const t=e.indexOf("?");return t!==-1?(w.path=e.slice(0,t),w.query=e.slice(t+1)):(w.path=e,w.query=null),w}function G(e){return e=(e=R(e=te(e=j(e).path),!0)).toLowerCase()}function be(e){const t={proxyUrl:e.proxyUrl,urlPrefix:G(e.urlPrefix)},n=d.proxyRules,r=t.urlPrefix;let o=n.length;for(let s=0;s<n.length;s++){const l=n[s].urlPrefix;if(r.indexOf(l)===0){if(r.length===l.length)return-1;o=s;break}l.indexOf(r)===0&&(o=s+1)}return n.splice(o,0,t),o}function A(e){const t=d.proxyRules,n=G(e);for(let r=0;r<t.length;r++)if(n.indexOf(t[r].urlPrefix)===0)return t[r]}function Oe(e,t){if(!e||!t)return!1;e=m(e),t=m(t);const n=C(e),r=C(t);return n!=null&&r!=null?n.portalHostname===r.portalHostname:n==null&&r==null&&P(e,t,!0)}function qe(e,t){if(!e||!t)return!1;e=m(e),t=m(t);const n=C(e),r=C(t);return n!=null&&r!=null&&n.portalHostname===r.portalHostname}function Ce(e,t){return e=m(e),t=m(t),R(e)===R(t)}function m(e){const t=(e=U(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function Pe(e,t=d.interceptors){const n=r=>r instanceof RegExp?r.test(e):typeof r=="string"?e.startsWith(r):r==null;if(t){for(const r of t)if(Array.isArray(r.urls)){if(r.urls.some(n))return r}else if(n(r.urls))return r}return null}function P(e,t,n=!1){if(!e||!t)return!1;const r=T(e),o=T(t);return!(!n&&r.scheme!==o.scheme)&&r.host!=null&&o.host!=null&&r.host.toLowerCase()===o.host.toLowerCase()&&r.port===o.port}function ve(e){if(typeof e=="string"){if(!g(e))return!0;e=T(e)}if(P(e,a))return!0;const t=d.trustedServers||[];for(let n=0;n<t.length;n++){const r=Re(t[n]);for(let o=0;o<r.length;o++)if(P(e,r[o]))return!0}return!1}function Re(e){return $[e]||(B(e)||u(e)?$[e]=[new h(S(e))]:$[e]=[new h(`http://${e}`),new h(`https://${e}`)]),$[e]}function S(e,t=b,n){return u(e)?n?.preserveProtocolRelative?e:a.scheme==="http"&&a.authority===V(e).slice(2)?`http:${e}`:`https:${e}`:B(e)?e:M(e[0]==="/"?Je(t):t,e)}function Ae(e,t=b,n){if(e==null||!g(e))return e;const r=U(e),o=r.toLowerCase(),s=U(t).toLowerCase().replace(/\/+$/,""),l=n?U(n).toLowerCase().replace(/\/+$/,""):null;if(l&&s.indexOf(l)!==0)return e;const i=(x,oe,L)=>(L=x.indexOf(oe,L))===-1?x.length:L;let c=i(o,"/",o.indexOf("//")+2),f=-1;for(;o.slice(0,c+1)===s.slice(0,c)+"/"&&(f=c+1,c!==o.length);)c=i(o,"/",c+1);if(f===-1||l&&f<l.length)return e;e=r.slice(f);const y=s.slice(f-1).replaceAll(/[^/]+/g,"").length;if(y>0)for(let x=0;x<y;x++)e=`../${e}`;else e=`./${e}`;return e}function U(e){return e=Ge(e=_e(e=Ne(e=S(e=e.trim()))))}function M(...e){const t=e.filter(ae);if(!t?.length)return;const n=[];if(g(t[0])){const o=t[0],s=o.indexOf("//");s!==-1&&(n.push(o.slice(0,s+1)),ze(t[0])&&(n[0]+="/"),t[0]=o.slice(s+2))}else t[0][0]==="/"&&n.push("");const r=t.reduce(((o,s)=>s?o.concat(s.split("/")):o),[]);for(let o=0;o<r.length;o++){const s=r[o];s===".."&&n.length>0&&n[n.length-1]!==".."?n.pop():(!s&&o===r.length-1||s&&(s!=="."||n.length===0))&&n.push(s)}return n.join("/")}function V(e,t=!1){if(e==null||K(e)||X(e))return null;let n=e.indexOf("://");if(n===-1&&u(e))n=2;else{if(n===-1)return null;n+=3}const r=e.indexOf("/",n);return r!==-1&&(e=e.slice(0,r)),t&&(e=R(e,!0)),e}function g(e){return u(e)||B(e)}function K(e){return e!=null&&e.slice(0,5)==="blob:"}function X(e){return e!=null&&e.slice(0,5)==="data:"}function Y(e){const t=O(e);return t?.isBase64?ce(t.data):null}function Se(e){return fe(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Be=/^data:(.*?)(;base64)?,(.*)$/;function O(e){const t=e.match(Be);if(!t)return null;const[,n,r,o]=t;return{mediaType:n,isBase64:!!r,data:o}}function Le(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function Te(e){return(await fetch(e)).blob()}function Z(e){const t=Y(e);if(!t)return null;const n=O(e);return new Blob([t],{type:n.mediaType})}function He(e,t){Ie(e,t)}function je(e,t){ee(e,t)}function Ie(e,t){const n=Z(e);return!!n&&ee(n,t)}function ee(e,t){if(!e)return!1;const n=document.createElement("a");if(!("download"in n))return!1;const r=URL.createObjectURL(e);return n.download=t,n.href=r,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),!0}function u(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function B(e){return e!=null&&D.test(e)}function ne(e){return e!=null&&Q.test(e)||a.scheme==="https"&&u(e)}function ke(e){return e!=null&&J.test(e)||a.scheme==="http"&&u(e)}function ze(e){return e!=null&&he.test(e)}function Ee(e){return u(e)?`http:${e}`:e.replace(Q,"http:")}function I(e){return u(e)?`https:${e}`:e.replace(J,"https:")}function De(){return a.scheme==="http"}function v(){return a.scheme==="https"}function R(e,t=!1){return u(e)?e.slice(2):(e=e.replace(D,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Je(e){const t=e.indexOf("//"),n=e.indexOf("/",t+2);return n===-1?e:e.slice(0,n)}function Qe(e){let t=0;if(g(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const n=e.lastIndexOf("/");return n<t?e:e.slice(0,n+1)}function We(e,t){if(!e)return"";const n=p(e).path.replace(/\/+$/,""),r=n.slice(n.lastIndexOf("/")+1);if(!t?.length)return r;const o=new RegExp(`\\.(${t.join("|")})$`,"i");return r.replace(o,"")}function te(e){return e.endsWith("/")?e:`${e}/`}function Fe(e){return e.replace(/\/+$/,"")}function Ne(e){if(/^https?:\/\//i.test(e)){const t=j(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function _e(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Ge(e){const t=d.httpsDomains;if(!ke(e))return e;const n=e.indexOf("/",7);let r;if(r=n===-1?e:e.slice(0,n),r=r.toLowerCase().slice(7),W.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return De()&&r===a.authority&&!me.test(e)||(v()&&r===a.authority||t&&t.some((o=>r===o||r.endsWith(`.${o}`)))||v()&&!A(e))&&(e=I(e)),e}function Me(e,t,n){if(!(t&&n&&e&&g(e)))return e;const r=e.indexOf("//"),o=e.indexOf("/",r+2),s=e.indexOf(":",r+2),l=Math.min(o<0?e.length:o,s<0?e.length:s);return e.slice(r+2,l).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${n}${e.slice(l)}`}function Ve(e,t){const n=new URL(e);return n.host=t,n.port&&!W.test(t)&&(n.port=""),n.toString()}function Ke(e){return new URL(e).host}function T(e){return typeof e=="string"?new h(S(e)):(e.scheme||(e.scheme=a.scheme),e)}function Xe(e){return sn.test(e)}function Ye(e,t){const n=p(e),r=Object.keys(n.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function Ze(e,t,n){const r=p(e),o=r.query||{};return o[t]=String(n),`${r.path}?${q(o)}`}function en(e,t){if(!t)return e;const n=p(e),r=n.query||{};for(const[s,l]of Object.entries(t))l!=null&&(r[s]=l);const o=q(r);return o?`${n.path}?${o}`:n.path}function nn(e,t){const{path:n,query:r}=p(e);if(!r)return e;delete r[t];const o=q(r);return o?`${n}?${o}`:n}function tn(e){if(e==null)return null;const t=e.match(re);return t?t[2]:null}function rn(e){if(e==null)return null;const t=e.match(re);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function on(e){return typeof e=="string"?O(e)??{data:e}:new Promise(((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(O(r.result)),r.onerror=o=>n(o)}))}const re=/([^.]*)\.([^/]*)$/,sn=/(^data:image\/svg|\.svg$)/i,cn=Object.freeze(Object.defineProperty({__proto__:null,Url:h,addProxy:Ue,addProxyRule:be,addQueryParameter:Ze,addQueryParameters:en,base64UrlEncode:Se,blobUrlToBlob:Te,changeDomain:Me,changeHost:Ve,dataComponents:O,dataToArrayBuffer:Y,dataToBlob:Z,downloadBlobAsFile:je,downloadDataAsFile:He,ensureTrailingSlash:te,getAppBaseUrl:xe,getAppUrl:ye,getFilename:We,getHost:Ke,getInterceptor:Pe,getOrigin:V,getPathExtension:tn,getProxyRule:A,getProxyUrl:_,hasProtocol:B,hasSameCanonicalArcGISOnlinePortal:qe,hasSameCanonicalPortal:Oe,hasSameOrigin:P,hasSamePortal:Ce,isAbsolute:g,isAppHTTPS:v,isBlobProtocol:K,isDataProtocol:X,isHTTPSProtocol:ne,isProtocolRelative:u,isSVG:Xe,isTrustedServer:ve,join:M,makeAbsolute:S,makeData:Le,makeRelative:Ae,normalize:U,objectToQuery:q,parseData:on,queryToObject:H,removeFile:Qe,removeQueryParameter:nn,removeQueryParameters:Ye,removeTrailingSlash:Fe,splitPathExtension:rn,test:$e,toHTTP:Ee,toHTTPS:I,trustedServersUrlCache:$,urlToObject:p},Symbol.toStringTag,{value:"Module"}));export{I as $,H as A,Ze as B,te as C,Ce as D,Xe as E,P as F,Ae as G,en as H,p as I,_ as J,U as K,be as L,ve as M,Pe as N,cn as O,Ke as P,Qe as R,Ye as S,A as T,M as V,tn as W,V as X,g as Y,K as Z,S as _,Oe as a,k as b,on as c,ne as d,X as e,Se as f,an as g,xe as h,Te as i,Fe as j,Ue as k,Le as l,Ve as m,Y as n,O as o,u as p,We as q,un as r,C as s,ce as t,Z as u,q as v,Me as w,h as x,ye as y,rn as z};
