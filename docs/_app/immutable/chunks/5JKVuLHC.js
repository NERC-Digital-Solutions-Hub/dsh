import{n as o,b as d}from"./NIvIaQ85.js";import{J as w,o as J,U as a,g as S,B as l}from"./YliWwaI6.js";import{s as c,a as m}from"./DVT6d5pJ.js";import{a as i}from"./DUAqxRaD.js";function u(s){return async(t,r,e)=>{if(J(e,2,2,t,r),(e=w(e))[0]===null&&e[1]===null)return!1;if(l(e[0])){if(a(e[1]))return new m({parentfeatureset:e[0],relation:s,relationGeom:e[1]});if(e[1]===null)return new c({parentfeatureset:e[0]});throw new o(t,"InvalidParameter",r)}if(a(e[0])){if(a(e[1])){switch(s){case"esriSpatialRelEnvelopeIntersects":{const f=d(e[0]),n=d(e[1]);return f!=null&&n!=null&&i("intersects",[f.toJSON(),n.toJSON()])}case"esriSpatialRelIntersects":return i("intersects",[e[0].toJSON(),e[1].toJSON()]);case"esriSpatialRelContains":return i("contains",[e[0].toJSON(),e[1].toJSON()]);case"esriSpatialRelOverlaps":return i("overlaps",[e[0].toJSON(),e[1].toJSON()]);case"esriSpatialRelWithin":return i("within",[e[0].toJSON(),e[1].toJSON()]);case"esriSpatialRelTouches":return i("touches",[e[0].toJSON(),e[1].toJSON()]);case"esriSpatialRelCrosses":return i("crosses",[e[0].toJSON(),e[1].toJSON()])}throw new o(t,"InvalidParameter",r)}if(l(e[1]))return new m({parentfeatureset:e[1],relation:s,relationGeom:e[0]});if(e[1]===null)return!1;throw new o(t,"InvalidParameter",r)}if(e[0]===null){if(l(e[1]))return new c({parentfeatureset:e[1]});if(a(e[1])||e[1]===null)return!1}throw new o(t,"InvalidParameter",r)}}function v(s){s.mode==="async"&&(s.functions.intersects=function(t,r){return s.standardFunctionAsync(t,r,u("esriSpatialRelIntersects"))},s.functions.envelopeintersects=function(t,r){return s.standardFunctionAsync(t,r,u("esriSpatialRelEnvelopeIntersects"))},s.signatures.push({name:"envelopeintersects",min:2,max:2}),s.functions.contains=function(t,r){return s.standardFunctionAsync(t,r,u("esriSpatialRelContains"))},s.functions.overlaps=function(t,r){return s.standardFunctionAsync(t,r,u("esriSpatialRelOverlaps"))},s.functions.within=function(t,r){return s.standardFunctionAsync(t,r,u("esriSpatialRelWithin"))},s.functions.touches=function(t,r){return s.standardFunctionAsync(t,r,u("esriSpatialRelTouches"))},s.functions.crosses=function(t,r){return s.standardFunctionAsync(t,r,u("esriSpatialRelCrosses"))},s.functions.relate=function(t,r){return s.standardFunctionAsync(t,r,async(e,f,n)=>{if(n=w(n),J(n,3,3,t,r),a(n[0])&&a(n[1]))return i("relate",[n[0].toJSON(),n[1].toJSON(),S(n[2])]);if(a(n[0])&&n[1]===null||a(n[1])&&n[0]===null)return!1;if(l(n[0])&&n[1]===null)return new c({parentfeatureset:n[0]});if(l(n[1])&&n[0]===null)return new c({parentfeatureset:n[1]});if(l(n[0])&&a(n[1]))return n[0].relate(n[1],S(n[2]));if(l(n[1])&&a(n[0]))return n[1].relate(n[0],S(n[2]));if(n[0]===null&&n[1]===null)return!1;throw new o(t,"InvalidParameter",r)})})}export{v as registerFunctions};
