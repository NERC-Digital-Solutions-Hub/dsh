import{s as m}from"./DGjcIG0n.js";import{e as S}from"./w-2V2ENZ.js";import{j as c}from"./CVJoTV8m.js";import{S as d,u as b,j as p,c as C,a as w,g as $,f as I,w as M}from"./DE49FngL.js";import{a as h}from"./BXte5Lg3.js";import{m as k,a as x}from"./DZzaLosK.js";import{u as D}from"./CuBDo_-F.js";import{g as L}from"./D-JjE83C.js";import{D as v,L as F}from"./BS_oygkd.js";const f="#useCIMFallbackSymbology()",i={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function j(e,l=i){if(!e)return{symbol:null};const{retainId:s=i.retainId,ignoreDrivers:n=i.ignoreDrivers,hasLabelingContext:r=i.hasLabelingContext,retainCIM:a=i.retainCIM,cimFallbackEnabled:t=i.cimFallbackEnabled}=l;let o=null;if(d(e)||e instanceof b)o=e.clone();else if(e.type==="cim"){const y=e.data?.symbol?.type;switch(y){case"CIMPointSymbol":o=a?e.clone():p.fromCIMSymbol(e);break;case"CIMLineSymbol":t&&(o=F.clone(),l?.logWarning?.(f,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":t&&(o=v.clone(),l?.logWarning?.(f,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!o)return{error:new m("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${y||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof k)o=C.fromSimpleLineSymbol(e);else if(e instanceof D)o=p.fromSimpleMarkerSymbol(e);else if(e instanceof h)o=p.fromPictureMarkerSymbol(e);else if(e instanceof x)o=l.geometryType&&l.geometryType==="mesh"?w.fromSimpleFillSymbol(e):$.fromSimpleFillSymbol(e);else{if(!(e instanceof L))return{error:new m("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=r?I.fromTextSymbol(e):p.fromTextSymbol(e)}return s&&o&&o.type!=="cim"&&(o.id=e.id),!n||o.type==="cim"||o instanceof b||o.symbolLayers.forEach((y=>y.ignoreDrivers=!0)),{symbol:o}}function G(e,l,s,n){const r=g(e,{},{context:n,isLabelSymbol:!1});r!=null&&S(s,r,l)}function H(e,l,s,n){const r=g(e,{},{context:n,isLabelSymbol:!0});r!=null&&(l[s]=r)}function u(e){return d(e)||e instanceof b}function T(e){return e?.type==="polygon-3d"||e?.type==="line-3d"}function g(e,l,s){if(e==null)return null;const{context:n,isLabelSymbol:r}=s,a=n?.origin,t=n?.messages;if(a==="web-scene"&&!u(e)){const o=j(e,{retainCIM:!0,hasLabelingContext:r});return o.symbol!=null?o.symbol.write(l,n):(t?.push(new m("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:n,error:o.error})),null)}return c(n?.layer)&&T(e)?(t?.push(new m("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${n?.layer?.declaredClass}'.`,{symbol:e,context:n})),null):(a==="web-map"||a==="portal-item"&&!c(n?.layer))&&u(e)?(t?.push(new m("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:n})),null):e.write(l,n)}function J(e,l){return M(e,null,l)}export{j as a,i as g,G as i,H as p,J as u};
