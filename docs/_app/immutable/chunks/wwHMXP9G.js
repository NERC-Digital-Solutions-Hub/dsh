import{f as ut,r as l,m as p,a as Q,l as Ie,aJ as wn}from"./CKPuaBYR.js";import{L as xn,h as An}from"./w-2V2ENZ.js";import"./DGjcIG0n.js";import{a as Tn,n as Rn}from"./EzLf78vY.js";import{m as ie,o as vt,a as Nt}from"./DihdZA_m.js";import{j as oe,a as ae,O as qe,ao as Mn,C as _n,al as zn,aR as Sn,a_ as He,a9 as kn}from"./Dc40Hn7j.js";import{L as Pn,e as A,d as F,u as jn,q as Be,j as dt,p as it,l as On,B as In,_ as qn,o as De,b as Ve,E as xe}from"./C4eyRFHZ.js";import{n as j,_ as Hn,r as _t,l as Bn}from"./Cgb6qxNH.js";import{H as N,s as ue,o as D,v as Xt,R as M,P as R,q as E,_ as St,Z as Kt,c as le,p as gt,J as Dn,j as Vn,A as Un}from"./DysKX3BL.js";import{n as d,r as kt,t as ot,N as Zn}from"./BT7E4tWz.js";import{n as rt,a as Ue,e as Dt}from"./fcdkgpXY.js";import{N as te,q as ce,b as pe,j as Pt,y as Ze}from"./BDfaKG_l.js";import{l as jt}from"./DnQgC4Ha.js";import{l as Fn,w as Cn}from"./DE3--tLW.js";import{r as Gn}from"./BF70gY8q.js";import{g as Yn}from"./Cg6qoSAP.js";import{R as Wn}from"./Bo7PZbSN.js";import{s as Ae,_ as Jn}from"./DWJ_RHQc.js";import{r as Qn}from"./0eYbUadG.js";import{m as Xn,l as Kn}from"./D6KPPgz5.js";import{s as tr,j as er}from"./BkQcsSCB.js";import{n as nr}from"./DPb6J-GU.js";import{i as rr}from"./C6ccPtdP.js";import{l as Vt,M as O,Q as ee,a as Fe,k as Ce,z as sr,p as ir,V as or,H as Ge,O as Ye}from"./DxmZhvCW.js";import{I as ar,O as ur,_ as lr,$ as cr,U as pr}from"./BhKWQh_H.js";import{m as hr,x as fr,E as dr,j as he}from"./BWEPK8Ul.js";import{e as $t}from"./DQOJ18NT.js";import{w as yr,a as gr}from"./BMnI4All.js";let zt=class extends ut{constructor(t){super(t),this.enabled=!1}};l([p({type:Boolean,nonNullable:!0})],zt.prototype,"enabled",void 0),zt=l([Q("esri.views.interactive.sketch.SketchLabelOptions")],zt);const We=zt;let mt=class extends ut{constructor(t){super(t),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};l([p({type:String,nonNullable:!0})],mt.prototype,"mode",void 0),mt=l([Q("esri.views.interactive.sketch.SketchTooltipElevationOptions")],mt);let L=class extends ut{constructor(t){super(t),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};l([p({type:Boolean,nonNullable:!0})],L.prototype,"area",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"coordinates",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"direction",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"distance",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"elevation",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"header",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"helpMessage",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"orientation",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"radius",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"rotation",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"scale",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"size",void 0),l([p({type:Boolean,nonNullable:!0})],L.prototype,"totalLength",void 0),L=l([Q("esri.views.interactive.sketch.SketchTooltipVisibleElements")],L);const Je=L;let x=class extends ut{constructor(t){super(t),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new mt,this.placement="auto",this.offset=null,this.visibleElements=new Je,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};l([p({type:Boolean,nonNullable:!0})],x.prototype,"enabled",void 0),l([p()],x.prototype,"forceEnabled",void 0),l([p()],x.prototype,"effectiveEnabled",null),l([p()],x.prototype,"helpMessage",void 0),l([p()],x.prototype,"helpMessageIcon",void 0),l([p({type:Boolean,nonNullable:!0})],x.prototype,"inputEnabled",void 0),l([p({type:mt,nonNullable:!0})],x.prototype,"elevation",void 0),l([p()],x.prototype,"placement",void 0),l([p()],x.prototype,"offset",void 0),l([p({type:Je,nonNullable:!0})],x.prototype,"visibleElements",void 0),l([p()],x.prototype,"visualVariables",void 0),l([p()],x.prototype,"xyMode",void 0),x=l([Q("esri.views.interactive.sketch.SketchTooltipOptions")],x);const Qe=x;let lt=class extends ut{constructor(t){super(t),this.length=null,this.verticalLength=null,this.area=null}};l([p()],lt.prototype,"length",void 0),l([p()],lt.prototype,"verticalLength",void 0),l([p()],lt.prototype,"area",void 0),lt=l([Q("esri.views.interactive.sketch.Units")],lt);const Ot=lt;var T;function mr(e,t){if(e==null||t==null)return;const n=ne(e,t);return n!=null?vt(n,"radians","geographic"):void 0}(function(e){e.Absolute="absolute",e.Relative="relative",e.RelativeBilateral="relative-bilateral"})(T||(T={}));const ne=(()=>{const e=d(),t=d();return(n,r)=>(D(e,n.x,n.y,n.z??0),D(t,r.x,r.y,r.z??0),vr(e,t,n.spatialReference,r.spatialReference))})(),vr=(()=>{const e=j(),t=d(),n=d();return(r,s,i,o)=>{if(N(r,s))return;const a=te(i),u=te(o);if(a&&u&&ae(a,u)&&rt(r,i,t,a)&&rt(s,o,n,u)){const{azimuth:h}=ce(Nr,t,n,a);return h!=null?oe(h,"degrees","radians"):void 0}e[0]=s[0]-r[0],e[1]=s[1]-r[1];let c=Pn(Hn,e);return e[0]<0&&(c=br-c),c}})();function Qs(e,t,n,r=T.Absolute){if(t&&n)switch(r){case T.Absolute:return mr(t,n);case T.Relative:return Re(Te(e,t,n),T.Relative);case T.RelativeBilateral:return Re(Te(e,t,n),T.RelativeBilateral)}}function Te(e,t,n){if(!e||!t||!n)return;const r=ne(e,t),s=ne(t,n);return r!=null&&s!=null?vt(s-r,"radians","geographic"):void 0}function Re(e,t){if(e!=null)switch(t){case T.Absolute:return $r(e);case T.Relative:{const n=It(e);let r=Me.normalize(n,0,!0);return r===-180&&(r=180),vt(r,"degrees","geographic")}case T.RelativeBilateral:{const n=It(e),r=Math.abs(Me.normalize(n,0,!0));return vt(r,"degrees","geographic")}}}function $r(e){const t=It(e),n=Lr.normalize(t,0,!0);return vt(n,"degrees","geographic")}const Xs=(()=>{const e=d();return(t,n,r,s,i,o="geodesic")=>{ue(e,n);const a=It(i);if(o==="geodesic"){const y=te(r);if(y&&rt(e,r,e,y))return Pt(t,e,a,s,y),t[2]=n[2],!!rt(t,y,t,r)}const u=ie(a,"geographic","arithmetic"),c=oe(u,"degrees","radians"),h=n[0]+s*Math.cos(c),f=n[1]+s*Math.sin(c),$=n[2];return D(t,h,f,$),!0}})();function It(e){if(e!=null)return ie(Xe(e),e.rotationType,"geographic")}function Ks(e){if(e!=null)return ie(Xe(e),e.rotationType,"arithmetic")}function Xe(e){return oe(e.value,e.unit,"degrees")}const Nr=new pe,br=2*Math.PI,Lr=Tn,Me=new Rn(-180,180);let X=class extends ut{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?T.RelativeBilateral:T.Relative;case"absolute":return T.Absolute}}get displayUnits(){return this._get("displayUnits")??new Ot}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){return this._get("inputUnits")??new Ot}set inputUnits(e){this._set("inputUnits",e)}};l([p({type:String,nonNullable:!0})],X.prototype,"directionMode",void 0),l([p({type:Boolean,nonNullable:!0})],X.prototype,"relativeDirectionIsBilateral",void 0),l([p()],X.prototype,"effectiveDirectionMode",null),l([p({type:Ot,nonNullable:!0})],X.prototype,"displayUnits",null),l([p({type:Ot,nonNullable:!0})],X.prototype,"inputUnits",null),X=l([Q("esri.views.interactive.sketch.SketchValueOptions")],X);const Ke=X;let ct=class extends ut{constructor(t){super(t),this.labels=new We,this.tooltips=new Qe,this.values=new Ke}};l([p({nonNullable:!0,type:We})],ct.prototype,"labels",void 0),l([p({nonNullable:!0,type:Qe})],ct.prototype,"tooltips",void 0),l([p({nonNullable:!0,type:Ke})],ct.prototype,"values",void 0),ct=l([Q("esri.views.interactive.sketch.SketchOptions")],ct);const ei=ct;var at;function tn(e,t,n){return z(e,t,n)}function z(e=0,t=0,n=0){return kt(e,t,n)}function ni(e){return e}function ri(e){return e}function et(e,t,n){return kt(e,t,n)}function pt(e){const[t,n,r]=e;return e.length>3?[t,n,r,e[3]]:[t,n,r]}function si(e){return e[3]=((e.length>3?e[3]:void 0)??at.NONE)|at.TARGET,e}function ii(e){return!!(((e.length>3?e[3]:void 0)??at.NONE)&at.TARGET)}function _e(e,t,{coordinateHelper:n,elevationInfo:r},s){return e?Er(n.vectorToDehydratedPoint(e,wr),t,r,s):null}function Er(e,t,n,r=z()){return r[0]=e.x,r[1]=e.y,r[2]=e.z??0,t==null||(t.type==="2d"?r[2]=0:r[2]=hr(t,e,n,he)??0),r}function oi(e,t,n){return n?(Ue(n,e[0],e[1],e[2],t),n):Dt(e[0],e[1],e[2],t)}function ai(e,t,{z:n,m:r},s,i){const{spatialReference:o,elevationInfo:a}=s;let u;n==null&&r==null?u=void 0:t==null||t.type==="2d"?u=n??void 0:u=fr(t,e,o,he,a)??0;const[c,h]=e;return i?Ue(i,c,h,u,o):i=Dt(c,h,u,o),r!=null&&(i.m=r,i.hasM=!0),i}function ui(e,t,n,r,s=z()){const[i,o]=e;return s[0]=i,s[1]=o,e.length>3&&(s[3]=e[3]??at.NONE),n?.type!=="3d"?(s[2]=t.value,s):(s[2]=dr(n,i,o,t.value,r,t.elevationInfo,he)??0,s)}(function(e){e[e.NONE=0]="NONE",e[e.TARGET=1]="TARGET"})(at||(at={}));const wr=Dt(0,0,0,null);let H=class extends Ie{constructor(){super(...arguments),this.enabled=!0}};l([p({type:Boolean})],H.prototype,"enabled",void 0),H=l([Q("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],H);let m=class extends Ie{constructor(t){super(t),this.lineSnapper=new H,this.parallelLineSnapper=new H,this.rightAngleSnapper=new H,this.rightAngleTriangleSnapper=new H,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new jt([255,127,0]),this.orangeTransparent=new jt([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};l([p({type:H,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"lineSnapper",void 0),l([p({type:H,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"parallelLineSnapper",void 0),l([p({type:H,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"rightAngleSnapper",void 0),l([p({type:H,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"rightAngleTriangleSnapper",void 0),l([p({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],m.prototype,"shortLineThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],m.prototype,"distance",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],m.prototype,"pointThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],m.prototype,"intersectionParallelLineThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],m.prototype,"parallelLineThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],m.prototype,"verticalLineThresholdMeters",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"touchSensitivityMultiplier",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],m.prototype,"pointOnLineThreshold",void 0),l([p({type:jt,nonNullable:!0})],m.prototype,"orange",void 0),l([p({type:jt,nonNullable:!0})],m.prototype,"orangeTransparent",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"lineHintWidthReference",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"lineHintWidthTarget",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],m.prototype,"lineHintFadedExtensions",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"parallelLineHintWidth",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],m.prototype,"parallelLineHintLength",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],m.prototype,"parallelLineHintOffset",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],m.prototype,"rightAngleHintSize",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],m.prototype,"rightAngleHintOutlineSize",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],m.prototype,"satisfiesConstraintScreenThreshold",void 0),m=l([Q("esri.views.interactive.snapping.Settings.Defaults")],m);const pi=new m;var ht;(function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"})(ht||(ht={}));const hi=Symbol("grid-placement-graphic");function xr(e,t){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function fi(e,t){return Math.sqrt(xr(e,t))}function di(e,t){t.sort(((n,r)=>Xt(n.targetPoint,e)-Xt(r.targetPoint,e)))}var ze;function yi({parameters:{point:e,distance:t,returnEdge:n,vertexMode:r,coordinateHelper:{spatialReference:s},filter:i},mode:o,returnZ:a,filter:u}){const c=u?.clone()??new Wn({where:"1=1"});return c.returnZ=a??o==="3d",i&&(c.geometry=i.geometry,c.distance=i.distance,c.spatialRelationship=i.spatialRelationship,c.where=Gn(c.where,i.where),c.timeExtent=Yn(c.timeExtent,i.timeExtent),c.objectIds=Ar(c.objectIds,i.objectIds)),{point:Dt(e[0],e[1],e[2],s.toJSON()),mode:o,distance:t,returnEdge:n,vertexMode:r,query:c.toJSON()}}function Ar(e,t){return e||t?t?e?Array.from(wn(new Set(e),new Set(t))):t:e:null}function gi(e,t,n){return{left:_e(e.leftVertex.pos,t,n),right:_e(e.rightVertex.pos,t,n)}}(function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(ze||(ze={}));const Se=Symbol("snapping-toggle");function mi(e,t=()=>{}){const n=Fn((()=>({view:e.view,snappingOptions:e.snappingOptions})),(({view:r,snappingOptions:s})=>{if(e.removeHandles(Se),!r||!s)return;const i=Jn.TOOL,o=[r.on("key-down",(a=>{a.key!==Ae.toggle||a.repeat||(s.enabledToggled=!0,t())}),i),r.on("key-up",(a=>{a.key===Ae.toggle&&(s.enabledToggled=!1,t())}),i),r.on("pointer-move",(a=>{const u=a.native.ctrlKey;s.enabledToggled!==u&&(s.enabledToggled=u,t())}),i)];e.addHandles(o,Se)}),Cn);e.addHandles(n)}function vi(e){return Qn(e)&&"utilityNetworks"in e&&!!e.utilityNetworks?.length}function Yt(e,t){return e[0]*t[1]-e[1]*t[0]}function Tr(e,t,n){const r=dt(n,t)/it(n);return On(e,n,r)}function $i(e,t,n,r,s=n){return A(st,r,n),A(qt,t,s),Tr(ft,qt,st),jn(e,s,ft)}function Ni(e,t,n,r){A(st,t,n);const s=r/Be(st);return F(e,n,st,s)}function bi(e,t){const n=e.start,r=e.end,s=t.start,i=t.end,o=A(st,r,n),a=A(en,i,s),u=Yt(o,a);if(Math.abs(u)<=Mr)return[];const c=A(qt,n,s),h=Yt(a,c)/u,f=Yt(o,c)/u;if(h>=0){if(f>=0||t.type===v.LINE)return[F(ft,n,o,h)]}else if(e.type===v.LINE&&(f>=0||t.type===v.LINE))return[F(ft,n,o,h)];return[]}function Rr(e,t,n){const r=[],s=A(st,e.end,e.start),i=A(en,e.start,t),o=it(s),a=2*dt(s,i),u=a*a-4*o*(it(i)-n*n);if(u===0){const c=-a/(2*o);(e.type===v.LINE||c>=0)&&r.push(F(ft,e.start,s,c))}else if(u>0){const c=Math.sqrt(u),h=(-a+c)/(2*o);(e.type===v.LINE||h>=0)&&r.push(F(ft,e.start,s,h));const f=(-a-c)/(2*o);(e.type===v.LINE||f>=0)&&r.push(F(qt,e.start,s,f))}return r}var v;(function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"})(v||(v={}));const Mr=1e-6,st=j(),en=j(),qt=j(),ft=j();function fe({start:e,end:t,type:n},r,s){const i=[],o=A(bt,t,e),a=A(Ut,e,r),u=it(o),c=2*dt(o,a),h=c*c-4*u*(it(a)-s*s);if(h===0){const f=-c/(2*u);(n===_.PLANE||f>=0)&&i.push(F(j(),e,o,f))}else if(h>0){const f=Math.sqrt(h),$=(-c+f)/(2*u);(n===_.PLANE||$>=0)&&i.push(F(j(),e,o,$));const y=(-c-f)/(2*u);(n===_.PLANE||y>=0)&&i.push(F(j(),e,o,y))}return i}function nn(e,t){const n=e.start,r=e.end,s=A(bt,r,n),i=D(Ft,-s[1],s[0],0),o=t.start,a=t.end,u=M(ye,a,o),c=R(u,i),h=D(pn,n[0],n[1],0),f=M(hn,h,o),$=R(f,i),y=$t();if(Math.abs(c)<y)return[];const b=E(fn,o,u,$/c);if(t.type===v.RAY){const w=M(re,b,o);if(R(w,u)<-y)return[]}if(e.type===_.HALF_PLANE){const w=In(Ut,b,n);if(dt(w,s)<-y)return[]}return[ot(b)]}function _r(e,t){return Sr(Ht(ge,t[2],e),t)}function rn(e,t){return ln(Ht(ge,0,e),Ht(Or,0,t)).map((([r,s])=>_t(r,s)))}function sn(e,t,n){return an(e,Ht(ge,e[2],t),n)}function on(e,t,n,r=d()){const s=A(bt,e,t),i=Be(s);return F(r,t,s,i===0?1:n/i),r[2]=e[2],r}function an(e,{start:t,end:n,type:r},s=d()){const i=M(Zt,e,t),o=M(Ft,n,t),a=R(i,o)/R(o,o);return E(s,t,o,r===v.RAY?Math.max(a,0):a)}const zr=(()=>{const e=d(),t=d(),n=d();return({start:r,end:s},{center:i,radius:o,normal:a,slicePlane:u})=>{const c=Vt(i,a,jr);if(g(ee(c,r),0)&&g(ee(c,s),0)){Fe(a,e,t);const f=(b,w)=>(le(n,w,i),De(b,R(n,e),R(n,t)),b),$=Rr({start:f(bt,r),end:f(Ut,s),type:v.LINE},Bn,o),y=[];for(const[b,w]of $){const S=ue(d(),i);E(S,S,e,b),E(S,S,t,w),u&&!tt(u,S)||y.push(S)}return y}const h=d();return Ce(c,r,s,h)?!g(gt(h,i),o)||u&&!tt(u,h)?[]:[h]:[]}})();function un({start:e,end:t,type:n},r,s){const i=[],o=le(Zt,t,e),a=A(Ut,e,r),u=it(o),c=2*dt(o,a),h=c*c-4*u*(it(a)-s*s);if(h===0){const f=-c/(2*u);(n===v.LINE||f>=0)&&i.push(E(d(),e,o,f))}else if(h>0){const f=Math.sqrt(h),$=(-c+f)/(2*u);(n===v.LINE||$>=0)&&i.push(E(d(),e,o,$));const y=(-c-f)/(2*u);(n===v.LINE||y>=0)&&i.push(E(d(),e,o,y))}return i}function ln(e,t){const n=e.start,r=e.end,s=t.start,i=t.end,o=M(Zt,r,n),a=M(Ft,i,s),u=M(ye,s,n),c=St(pn,o,a);if(!g(R(u,c),0))return[];const h=Kt(c);if(g(h,0))return[];const f=St(hn,u,a),$=R(f,c)/h,y=E(fn,n,o,$);if(e.type===v.RAY){const b=M(re,y,n);if(R(o,b)<-$t())return[]}if(t.type===v.RAY){const b=M(re,y,s);if(R(a,b)<-$t())return[]}return[ot(y)]}function Sr({start:e,end:t,type:n},r){const s=M(Zt,r,e),i=M(Ft,t,e),o=St(ye,i,s),a=Kt(o)/Kt(i),u=$t();if(a<u)switch(n){case v.LINE:return[ot(r)];case v.RAY:return R(i,s)<-u?[]:[ot(r)]}return[]}function de(e,t,n,r){const[s,i]=e,[o,a]=n,u=o-s,c=a-i,h=u*u+c*c,f=Math.sqrt(h);if(f>t+r)return[];if(f<Math.abs(t-r))return[];if(g(f,0)&&g(t,r))return[];const $=(t*t-r*r+h)/(2*f),y=Math.sqrt(t*t-$*$),b=y*c/f,w=y*u/f,[S,nt]=qn(bt,e,n,$/f);return g(b,w)?[_t(S,nt)]:[_t(S+b,nt-w),_t(S-b,nt+w)]}function Ht(e,t,{start:n,end:r,type:s}){return D(e.start,n[0],n[1],t),D(e.end,r[0],r[1],t),e.type=Pr[s],e}function cn(e,t){return g(e[2],t[2])}function g(e,t){return Xn(Math.abs(e-t),0,$t())}function kr(e,t){return t.filter((n=>tt(e,n)))}function tt(e,t){return sr(e,t)}var _;(function(e){e[e.PLANE=0]="PLANE",e[e.HALF_PLANE=1]="HALF_PLANE"})(_||(_={}));const Pr={[_.PLANE]:v.LINE,[_.HALF_PLANE]:v.RAY},bt=j(),Ut=j(),Zt=d(),Ft=d(),ye=d(),pn=d(),hn=d(),fn=d(),re=d(),jr=O(),ge={start:d(),end:d(),type:v.LINE},Or={start:d(),end:d(),type:v.LINE};class I{intersect(t){return G(this,t)}closestPoints(t){return[this.closestTo(t)]}}class Lt extends I{constructor(t){super(),this.point=t}equals(t){return this===t||q(t)&&N(this.point,t.point)}closestTo(){return pt(this.point)}}class me extends I{constructor(t,n,r){super(),this.start=t,this.end=n,this.lineLike={start:t,end:n,type:r}}equals(t){return this===t||V(t)&&this.lineLike.type===t.lineLike.type&&N(this.start,t.start)&&N(this.end,t.end)}closestTo(t){const n=z();return an(t,this.lineLike,n),n}}class dn extends me{constructor(t,n){super(t,n,v.LINE)}}class Ir extends me{constructor(t,n){super(t,n,v.RAY)}}class yn extends I{constructor(t){super(),this.constraints=t}equals(t){return this===t||se(t)&&An(this.constraints,t.constraints,((n,r)=>n.equals(r)))}closestTo(t){let n,r=1/0;for(const s of this.constraints){const i=s.closestTo(t),o=Xt(t,i);o<r&&(r=o,n=i)}return pt(n??t)}closestPoints(t){return this.constraints.flatMap((n=>n===this?[]:n.closestPoints(t)))}}class qr extends I{constructor(t,n){super(),this.center=t,this.radius=n}equals(t){return this===t||Z(t)&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}closestTo(t){const n=z();return on(t,this.center,this.radius,n),n}}class ve extends I{constructor(t,n){super(),this.center=t,this.radius=n}equals(t){return this===t||W(t)&&N(this.center,t.center)&&this.radius===t.radius}closestTo(t){const n=z();return on(t,this.center,this.radius,n),n[2]=this.center[2],n}asCircle(){return new $e(pt(this.center),this.radius,et(0,0,1))}}class $e extends I{constructor(t,n,r,s=void 0){super(),this.center=t,this.radius=n,this.normal=r,this.slicePlane=s}equals(t){return this===t||K(t)&&N(this.center,t.center)&&N(this.normal,t.normal)&&this.radius===t.radius}closestTo(t){const{center:n,radius:r}=this;Ge(this.getPlane(Hr),t,Wt);const s=M(Wt,Wt,n),i=Vn(s);if(g(i,0))return pt(t);const o=r/Math.sqrt(i),a=z();E(a,n,s,o);const{slicePlane:u}=this;return u&&!tt(u,a)?be(u,this)?.closestTo(t)??pt(t):a}getPlane(t=O()){return Vt(this.center,this.normal,t)}}const Wt=d(),Hr=O();class Br extends I{constructor(t){super(),this.z=t}equals(t){return this===t||Y(t)&&this.z===t.z}closestTo(t){return et(t[0],t[1],this.z)}getPlane(t=O()){return D(ke,0,0,this.z),Vt(ke,Zn,t)}}const ke=d();class Ne extends I{constructor(t,n,r){super(),this.start=t,this.end=n,this.planeLike={start:t,end:n,type:r}}equals(t){return this===t||U(t)&&this.planeLike.type===t.planeLike.type&&N(this.start,t.start)&&N(this.end,t.end)}closestTo(t){const n=z();return sn(t,this.planeLike,n),n}closestEndTo(t){const{start:n,end:r}=this.planeLike;return Math.sign(dt(A(Dr,r,n),A(Vr,t,n)))>0?this.end:this.start}getPlane(t=O()){const n=ue(Pe,this.end);return n[2]+=1,ir(this.start,this.end,n,t)}getSlicePlane(t=O()){const{start:n,end:r,type:s}=this.planeLike;if(s===_.PLANE)return;const i=D(Pe,n[0],n[1],0),o=D(je,r[0],r[1],0),a=le(je,o,i);return Vt(i,a,t),t}}const Dr=j(),Vr=j(),Pe=d(),je=d();class Li extends Ne{constructor(t,n){super(t,n,_.HALF_PLANE)}}class Ei extends Ne{constructor(t,n){super(t,n,_.PLANE)}}class Ur extends I{constructor(t,n){super(),this.sphere=ur(t,n)}equals(t){return this===t||J(t)&&lr(this.sphere,t.sphere)}closestTo(t){const n=z();return cr(this.sphere,t,n),n}get center(){return pr(this.sphere)}get radius(){return this.sphere[3]}}class Zr extends I{constructor(t,n,r){super(),this.start=t,this.end=n,this.getZ=r,this.planeLike={start:t,end:n,type:_.PLANE}}equals(t){return this===t||Bt(t)&&N(this.start,t.start)&&N(this.end,t.end)&&this.getZ===t.getZ}closestTo(t){return Jr(this,t)}addIfOnTheGround(t,n){for(const r of n){const s=this.getZ(r[0],r[1])??0;g(r[2],s)&&(r[2]=s,t.push(r))}}}class Fr extends I{constructor(t,n,r){super(),this._x=t,this._y=n,this._z=r}equals(t){return this===t||hs(t)&&this._x===t._x&&this._y===t._y&&this._z===t._z}closestTo([t,n,r]){return tn(this._x??t,this._y??n,this._z??r)}}class Cr extends I{constructor(t,n,r,s,i){super(),this._origin=t,this._spatialReference=n,this._distanceMeters=r,this._z=s,this._directionDegrees=i}equals(t){return this===t||ps(t)&&xe(this._origin,t._origin)&&this._spatialReference===t._spatialReference&&this._distanceMeters===t._distanceMeters&&this._z===t._z&&this._directionDegrees===t._directionDegrees}closestTo([t,n,r]){return De(yt,t,n),xe(yt,this._origin)||this._applyDirectionAndDistance(yt),tn(yt[0],yt[1],this._z??r)}_applyDirectionAndDistance(t){if(this._directionDegrees!=null&&this._distanceMeters!=null)Pt(t,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)Yr(t,this._origin,this._directionDegrees,t,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:n}=ce(Gr,this._origin,t,this._spatialReference);Pt(t,this._origin,n??0,this._distanceMeters,this._spatialReference)}}}const yt=[0,0],Gr=new pe;function Yr(e,t,n,r,s){let{azimuth:i,distance:o}=ce(Wr,t,r,s);i??=0;let a=o*Math.cos((i-n)*rr);a=Math.max(0,a),Pt(e,t,n,a,s)}const Wr=new pe;function Jr(e,t){const n=z();return sn(t,e.planeLike,n),n[2]=e.getZ(n[0],n[1])??mn,n}function G(e,t){if(se(e)){const n=[];for(const r of e.constraints){const s=r.intersect(t);s&&n.push(s)}return Le(n)}if(se(t))return G(t,e);if(Bt(e))return Oe(e,t);if(Bt(t))return Oe(t,e);if(q(e)){const{point:n}=e;if(q(t))return N(n,t.point)?e:void 0;const r=t.closestTo(n);return Dn(r,n)?e:void 0}if(V(e)){if(q(t))return G(t,e);if(V(t))return B(ln(e.lineLike,t.lineLike));if(Y(t))return Qr(e,t);if(U(t))return B(nn(t.planeLike,e.lineLike));if(Z(t))return B(un(e.lineLike,t.center,t.radius));if(K(t))return B(zr(e.lineLike,t));if(W(t))return Xr(e,t);if(J(t))return Kr(e,t)}else if(Y(e)){if(q(t)||V(t))return G(t,e);if(Y(t))return ts(e,t);if(U(t))return es(e,t);if(Z(t))return ns(e,t);if(K(t))return ss(e,t);if(W(t))return rs(e,t);if(J(t))return is(e,t)}else if(U(e)){if(q(t)||V(t)||Y(t))return G(t,e);if(U(t))return Jt(rn(e.planeLike,t.planeLike));if(Z(t))return Jt(fe(e.planeLike,t.center,t.radius));if(K(t))return as(e,t);if(W(t))return os(e,t);if(J(t))return us(e,t)}else if(Z(e)){if(q(t)||V(t)||Y(t)||U(t))return G(t,e);if(Z(t))return Jt(de(e.center,e.radius,t.center,t.radius));if(K(t))return void 0;if(W(t))return ls(e,t);if(J(t))return void 0}else if(K(e)){if(q(t)||V(t)||Y(t)||U(t)||Z(t))return G(t,e);if(K(t))return void 0;if(W(t))return t.asCircle(),void 0;if(J(t))return void 0}else if(W(e)){if(q(t)||V(t)||Y(t)||U(t)||Z(t)||K(t))return G(t,e);if(W(t))return cs(t,e);if(J(t))return void 0}else if(J(e)){if(q(t)||V(t)||Y(t)||U(t)||Z(t)||W(t))return G(t,e);if(J(t))return void 0}}const Qr=(()=>{const e=O();return(t,n)=>{const{start:r,end:s}=t;if(cn(r,s)&&g(r[2],n.z))return t;const i=z();return Ce(n.getPlane(e),r,s,i)?new Lt(i):void 0}})();function Xr({lineLike:e},{center:t,radius:n}){const r=t[2];return B(un(e,t,n).filter((s=>g(s[2],r))))}function Kr({lineLike:e},{sphere:t}){return B(ar(t,e.start,e.end))}const be=(()=>{const e=nr(),t=d(),n=d();return(r,s,i)=>{const{normal:o,center:a,radius:u}=s;Fe(o,t,n);const c=Ye(r),h=u*R(c,t),f=u*R(c,n);tr(e,a[0],a[1],a[2],1);const $=er(r,e),y=Math.hypot(h,f),b=g(y,0);if(g(ee(r,a),0)){if(b)return s;if(g(u,0))return!i||tt(i,a)?new Lt(pt(a)):void 0;St(t,c,o),Un(t,t);const Gt=new Array,At=ot(a);E(At,At,t,u),i&&!tt(i,At)||Gt.push(At);const Tt=ot(a);return E(Tt,Tt,t,-u),i&&!tt(i,Tt)||Gt.push(Tt),B(Gt)}if(b)return;const w=-$/y;if(Math.abs(w)>1||g(w,1))return;const S=Math.atan(h/f),nt=Kn(w)-S,we=Math.PI-nt,Et=new Array,wt=d();E(wt,a,t,u*Math.cos(nt)),E(wt,wt,n,u*Math.sin(nt)),Et.push(wt);const xt=d();return E(xt,a,t,u*Math.cos(we)),E(xt,xt,n,u*Math.sin(we)),Et.push(xt),B(i?kr(i,Et):Et)}})();function ts(e,t){return g(e.z,t.z)?e:void 0}function es({z:e},{planeLike:t}){const[n,r]=t.start,[s,i]=t.end,o=et(n,r,e),a=et(s,i,e);return t.type===_.PLANE?new dn(o,a):new Ir(o,a)}function ns(e,t){const[n,r]=t.center;return new ve(et(n,r,e.z),t.radius)}function rs(e,t){return g(t.center[2],e.z)?t:void 0}const ss=(()=>{const e=O();return(t,n)=>be(t.getPlane(e),n,n.slicePlane)})();function is(e,{center:t,radius:n}){const r=Math.abs(t[2]-e.z);if(r>n&&!g(r,n))return;const s=et(t[0],t[1],e.z),i=Math.sqrt(n**2-r**2);return g(i,0)?void 0:new ve(s,i)}const os=(()=>{const e=O();return(t,{center:n,radius:r})=>{const s=fe(t.planeLike,n,r),i=n[2];t.getSlicePlane(e);const o=new Array;for(const[a,u]of s){const c=[a,u,i];tt(e,c)&&o.push(c)}return B(o)}})(),as=(()=>{const e=O(),t=O();return(n,r)=>be(n.getPlane(e),r,n.getSlicePlane(t))})(),us=(()=>{const e=O();return(t,{center:n,radius:r})=>{const s=t.getPlane(e),i=or(s,n),o=Math.abs(i);if(o>r&&!g(o,r))return;const a=Math.sqrt(r**2-i**2);if(g(a,0)){const h=z();return Ge(s,n,h),new Lt(h)}const u=z(),c=ot(Ye(s));return E(u,n,c,i),new $e(u,a,c,t.getSlicePlane())}})();function ls(e,t){const n=Ve(e.center,t.center);return g(n,0)&&g(e.radius,t.radius)?t:gn(de(e.center,e.radius,t.center,t.radius),t.center[2])}function cs(e,t){if(!cn(e.center,t.center))return;const n=Ve(e.center,t.center);return g(n,0)&&g(e.radius,t.radius)?e:gn(de(e.center,e.radius,t.center,t.radius),e.center[2])}function Oe(e,t){const{planeLike:n,getZ:r}=e,s=new Array;if(q(t))e.addIfOnTheGround(s,_r(n,t.point));else if(V(t))e.addIfOnTheGround(s,nn(n,t.lineLike));else if(Z(t))for(const[i,o]of fe(n,t.center,t.radius)){const a=r(i,o);a!=null&&s.push(kt(i,o,a))}else if(U(t)||Bt(t))for(const[i,o]of rn(n,t.planeLike)){const a=r(i,o)??mn;s.push(kt(i,o,a))}return B(s)}function Jt(e){return Le(e.map((([t,n])=>{const r=et(t,n,0),s=et(t,n,1);return new dn(r,s)})))}function B(e){return Le(e.map((t=>t?new Lt(t):void 0)))}function gn(e,t){return B(e.map((([n,r])=>[n,r,t])))}function Le(e){if(e.length!==0)return e.length===1?e[0]??void 0:new yn(e.filter(xn))}function se(e){return e instanceof yn}function q(e){return e instanceof Lt}function V(e){return e instanceof me}function Y(e){return e instanceof Br}function U(e){return e instanceof Ne}function Z(e){return e instanceof qr}function W(e){return e instanceof ve}function K(e){return e instanceof $e}function J(e){return e instanceof Ur}function Bt(e){return e instanceof Zr}function ps(e){return e instanceof Cr}function hs(e){return e instanceof Fr}const mn=0;let Ct=class{constructor(t,n){this.isDraped=t,this.domain=n}},xi=class vn extends Ct{constructor(t,n,r,s,i=ht.ALL,o=!0,a=!0){super(s,i),this.type=t,this.lineStart=n,this.lineEnd=r,this.fadeLeft=o,this.fadeRight=a}equals(t){return t instanceof vn&&this.type===t.type&&N(this.lineStart,t.lineStart)&&N(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}get length(){return gt(this.lineStart,this.lineEnd)}};class $n extends Ct{constructor(t,n,r=ht.ALL){super(n,r),this.intersectionPoint=t}equals(t){return t instanceof $n&&N(this.intersectionPoint,t.intersectionPoint)}}let Ai=class Nn extends Ct{constructor(t,n,r,s=ht.ALL){super(r,s),this.lineStart=t,this.lineEnd=n}equals(t){return t instanceof Nn&&N(this.lineStart,t.lineStart)&&N(this.lineEnd,t.lineEnd)}};class bn extends Ct{constructor(t,n,r,s,i=ht.ALL){super(s,i),this.previousVertex=t,this.centerVertex=n,this.nextVertex=r}equals(t){return t instanceof bn&&N(this.previousVertex,t.previousVertex)&&N(this.centerVertex,t.centerVertex)&&N(this.nextVertex,t.nextVertex)}}function Ti(e){return Ze(e)||qe(e)}function Ri(e,t,n,...r){return Ze(e)?t.apply(void 0,r):e.isWebMercator?n.apply(void 0,r):null}function Ln(e){return Mn(e)?_n(e)||qe(e)||zn(e)||Sn(e)?yr:e:gr(e)}var C;function Mi(e){return fs(e,C.Horizontal)}function fs(e,t){const{hasZ:n,spatialReference:r}=e,s=Ln(r);let i=0;const o=He(s);if(o==null)return null;const a=t===C.Direct?ys:En;for(const u of e.paths){if(u.length<2)continue;const c=u.length-1;for(let h=0;h<c;++h){const f=u[h];k[0]=f[0],k[1]=f[1],k[2]=n?f[2]:0;const $=u[h+1];P[0]=$[0],P[1]=$[1],P[2]=n?$[2]:0;const y=a(k,P,r);if(y==null)return null;i+=y.value}}return Nt(i,o)}function _i(e,t){const{spatialReference:n}=e;return ae(n,t.spatialReference)?(k[0]=e.x,k[1]=e.y,k[2]=e.hasZ?e.z:0,P[0]=t.x,P[1]=t.y,P[2]=t.hasZ?t.z:0,En(k,P,n)):null}function zi(e,t){const{spatialReference:n}=e;return ae(n,t.spatialReference)?(k[0]=e.x,k[1]=e.y,k[2]=e.hasZ?e.z:0,P[0]=t.x,P[1]=t.y,P[2]=t.hasZ?t.z:0,gs(k,P,n)):null}function Si(e){return e!=null?ds(e.hasZ?e.z:0,e.spatialReference):null}function ds(e,t){const n=kn(t);return n!=null?Nt(e??0,n):null}function ys(e,t,n){const r=Ee(e,t,n,C.Direct);return r!=null?Nt(r.direct,r.unit):null}function En(e,t,n){const r=Ee(e,t,n,C.Horizontal);return r!=null?Nt(r.horizontal,r.unit):null}function gs(e,t,n){const r=Ee(e,t,n,C.Vertical);return r!=null?Nt(r.verticalSigned,r.unit):null}function Ee(e,t,n,r){const s=Ln(n),i=He(s);if(i==null)return null;const o=t[2]-e[2];if(r===C.Vertical)return{verticalSigned:o,unit:i};if(!rt(e,n,Qt,s)||!rt(t,n,Rt,s))return null;if(r===C.Direct)return{direct:gt(Rt,Qt),unit:i};if(D(Mt,e[0],e[1],t[2]),!rt(Mt,n,Mt,s))return null;const a=gt(Mt,Rt);return r===C.Horizontal?{horizontal:a,unit:i}:{direct:gt(Rt,Qt),horizontal:a,vertical:Math.abs(o),unit:i}}(function(e){e[e.Direct=0]="Direct",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"})(C||(C={}));const k=d(),P=d(),Qt=d(),Rt=d(),Mt=d();function ms(e){return e?.type==="graphic"}function ki(e){return e.find(ms)??null}export{It as $,$r as A,T as B,Re as C,Ti as D,di as E,bi as F,ze as G,Ei as H,$i as I,an as J,qr as K,dn as L,Xs as M,_e as N,Ri as O,Er as P,ai as Q,Si as R,Ln as S,_i as T,Zr as U,Mi as V,mi as W,We as X,Qe as Y,En as Z,Ke as _,Ct as a,Fr as a0,Le as a1,Br as a2,mr as a3,Cr as a4,ds as a5,Qs as a6,q as a7,Ks as a8,oi as a9,ui as aa,ii as ab,zi as ac,gs as ad,si as b,z as c,hi as d,et as e,tn as f,Lt as g,vi as h,ht as i,Li as j,fi as k,ei as l,ni as m,xr as n,gi as o,pi as p,vr as q,v as r,ri as s,Ni as t,ki as u,$n as v,xi as w,Ai as x,yi as y,bn as z};
