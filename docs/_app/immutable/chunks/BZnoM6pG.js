const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Bk4ggx9U.js","./D9Z9MdNV.js","./pCx8oau_.js","./iFuBOtDF.js","./DHq0rblm.js","./BfhsIlKo.js","./BgvLO-3W.js","./KcazVFlU.js","./CYsUaMUi.js","./BOB_xkBk.js","./D6KPPgz5.js","./BDqMdsvZ.js","./B-VZ3wrL.js","./Bvto7RYj.js","./Dytf6RTV.js","./C8PpcA25.js","./DhdgDebw.js","./CaNAmI22.js","./gRIb6kZn.js","./D6wORzA5.js","./aQeO9QTD.js","./CBG-jaYw.js","./Dt5YSiFI.js","./C1yg1qUQ.js","./LE72oyNN.js","./DJTyCEHv.js"])))=>i.map(i=>d[i]);
import{_ as w}from"./D9Z9MdNV.js";import{l as u}from"./gRIb6kZn.js";import{a as d}from"./DgwIrkEl.js";import"./DHq0rblm.js";import{_ as k}from"./BOB_xkBk.js";import"./BfhsIlKo.js";import"./Djp3mnm5.js";import"./Bso-6bUH.js";import{u as g}from"./vx7aVD29.js";import"./pCx8oau_.js";import"./BgvLO-3W.js";import{e as L}from"./KcazVFlU.js";import"./BS3H3l-F.js";import{S as m,k as p,m as z}from"./B-VZ3wrL.js";new L(1e3);new u([128,128,128]);const _=new u("white");function Q(o){if(o==null||!("symbolLayers"in o)||o.symbolLayers==null)return!1;switch(o.type){case"point-3d":return o.symbolLayers.some((r=>r.type==="object"));case"line-3d":return o.symbolLayers.some((r=>r.type==="path"));case"polygon-3d":return o.symbolLayers.some((r=>r.type==="object"||r.type==="extrude"));default:return!1}}function W(o){return o.resource?.href??""}function X(o,r){if(!o)return null;let n=null;return m(o)?n=j(o):p(o)&&(n=o.type==="cim"?g(o):o.color?new u(o.color):null),n?f(n,r):null}function j(o){const r=o.symbolLayers;if(!r)return null;let n=null;return r.forEach((t=>{t.type==="object"&&t.resource?.href||(n=t.type==="water"?t.color:t.material?t.material.color:null)})),n?new u(n):null}function f(o,r){if(r==null||o==null)return o;const n=o.toRgba();return n[3]=n[3]*r,new u(n)}function x(o,r,n){const t=o.symbolLayers;if(!t)return;const e=l=>f(r??l??(n!=null?_:null),n);t.forEach((l=>{if(l.type!=="object"||!l.resource?.href||r)if(l.type==="water")l.color=e(l.color);else{const c=l.material!=null?l.material.color:null,a=e(c);if(l.material==null?l.material=new z({color:a}):l.material.color=a,n!=null&&"outline"in l&&l.outline?.color!=null&&(l.outline.color=f(l.outline.color,n)),"marker"in l&&l.marker!=null){const i=e(l.marker.color);l.marker.color=i}}}))}function S(o,r,n){(r=r??o.color)&&(o.color=f(r,n)),n!=null&&"outline"in o&&o.outline?.color&&(o.outline.color=f(o.outline.color,n))}function Y(o,r,n){o&&(r||n!=null)&&(r&&(r=new u(r)),m(o)?x(o,r,n):p(o)&&S(o,r,n))}async function v(o,r){const n=o.symbolLayers;n&&await d(n,(async t=>E(t,r)))}async function E(o,r){switch(o.type){case"extrude":$(o,r);break;case"icon":case"line":case"text":R(o,r);break;case"path":A(o,r);break;case"object":await O(o,r)}}function R(o,r){const n=h(r);n!=null&&(o.size=n)}function h(o){for(const r of o)if(typeof r=="number")return r;return null}function $(o,r){const n=r[2];typeof n=="number"&&(o.size=n)}async function O(o,r){const{resourceSize:n,symbolSize:t}=await D(o),e=b(r,n,t);e!=null&&(o.width=s(r[0],t[0],n[0],e),o.depth=s(r[1],t[1],n[1],e),o.height=s(r[2],t[2],n[2],e))}function A(o,r){const n=b(r,k,[o.width,void 0,o.height]);n!=null&&(o.width=s(r[0],o.width,1,n),o.height=s(r[2],o.height,1,n))}function b(o,r,n){for(let t=0;t<3;t++){const e=o[t];switch(e){case"symbol-value":{const l=n[t];return l!=null?l/r[t]:1}case"proportional":break;default:if(e&&r[t])return e/r[t]}}return null}async function D(o){const{computeObjectLayerResourceSize:r}=await w(()=>import("./Bk4ggx9U.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url),n=await r(o,10),{width:t,height:e,depth:l}=o,c=[t,l,e];let a=1;for(let i=0;i<3;i++){const y=c[i];if(y!=null){a=y/n[i];break}}for(let i=0;i<3;i++)c[i]==null&&(c[i]=n[i]*a);return{resourceSize:n,symbolSize:c}}function s(o,r,n,t){switch(o){case"proportional":return n*t;case"symbol-value":return r??n;default:return o}}function P(o,r){const n=h(r);if(n!=null)switch(o.type){case"simple-marker":o.size=n;break;case"picture-marker":{const t=o.width/o.height;t>1?(o.width=n,o.height=n*t):(o.width=n*t,o.height=n);break}case"simple-line":o.width=n;break;case"text":o.font.size=n}}async function Z(o,r){if(o&&r)return m(o)?v(o,r):void(p(o)&&P(o,r))}function oo(o,r,n){if(o&&r!=null)if(m(o)){const t=o.symbolLayers;t&&t.forEach((e=>{if(e.type==="object")switch(n){case"tilt":e.tilt=(e.tilt??0)+r;break;case"roll":e.roll=(e.roll??0)+r;break;default:e.heading=(e.heading??0)+r}e.type==="icon"&&(e.angle+=r)}))}else p(o)&&(o.type!=="simple-marker"&&o.type!=="picture-marker"&&o.type!=="text"||(o.angle+=r))}function ro(o){return o!=null&&o.type==="polygon-3d"&&o.symbolLayers.some((r=>r.type==="extrude"))}export{ro as A,Y as L,Z as M,oo as N,W as b,Q as h,X as w};
