const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DWR6fSLu.js","./DSdBzmdi.js","./BFGjv385.js","./DQ5msxj1.js","./DE7MWQCs.js","./PPVm8Dsz.js","./DzPnzJx5.js","./gvnm7ut2.js","./B9pz1KbE.js","./Chk7m36c.js","./VyRghXPR.js","./BNYdKLCN.js","./BqElk1ee.js","./DMoEL77_.js","./B6nb1bq7.js","./CSadq5My.js","./BgD4SoW1.js","./Duz7X5CL.js","./ChAwAQaw.js","./DKTxA4NN.js","./r_tU0ZMk.js","./rp9n50F-.js","./DaI2-IGa.js","./BQrLTgwz.js","./DrJtTCsF.js","./Bo1rbSmH.js","./BhL_StXk.js","./bnayRBMH.js","./BQr2meHs.js","./DHoYicJw.js"])))=>i.map(i=>d[i]);
import{d as U,a as j}from"./gvnm7ut2.js";import{l as P,w as V}from"./ABSTBJkg.js";import{_ as A}from"./PPVm8Dsz.js";import{n as J,_ as s,m as a,a as S}from"./Chk7m36c.js";import{H as B}from"./DE7MWQCs.js";import{i as $,s as g}from"./DSdBzmdi.js";import{e as h,I as _,O as I,D as O,c as M}from"./r_tU0ZMk.js";import{s as k}from"./DKTxA4NN.js";import{u as q}from"./BNYdKLCN.js";import{I as z}from"./DzPnzJx5.js";import{s as C}from"./BFGjv385.js";import{z as L,f as w}from"./B6nb1bq7.js";import{o as v,r as T}from"./DMoEL77_.js";async function F(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await A(async()=>{const{fromItem:n}=await import("./DWR6fSLu.js");return{fromItem:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]),import.meta.url);try{return await r(t)}catch(n){const i=t?.portalItem,o=i?.id||"unset",u=i?.portal?.url||C.portalUrl;throw $.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+u+"', id: '"+o+"')",n),n}}const b={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function f(e,t,r,n=h){const i=new _(I(n)),o=O.fromJSDate(e,{zone:i}),u=r==="decades"||r==="centuries"?"year":N(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),o.plus({[u]:t}).toJSDate()}function lt(e,t,r="milliseconds"){const n=e.getTime(),i=G(t,r,"milliseconds");return new Date(n+i)}function D(e,t,r=h){const n=new _(I(r)),i=O.fromJSDate(e,{zone:n});if(t==="decades"||t==="centuries"){const u=i.startOf("year"),{year:p}=u,x=p-p%(t==="decades"?10:100);return u.set({year:x}).toJSDate()}const o=N(t);return i.startOf(o).toJSDate()}function G(e,t,r){return e===0?0:e*b[t]/b[r]}function ut(e,t){return e&&t?e.intersection(t):e||t}function N(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var m,c;let d=(c=class extends J{static get allTime(){return E}static get empty(){return R}static fromArray(t){return new m({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,r){return r.end!=null?new Date(r.end):null}writeEnd(t,r){r.end=t?.getTime()??null}get isAllTime(){return this.equals(m.allTime)}get isEmpty(){return this.equals(m.empty)}readStart(t,r){return r.start!=null?new Date(r.start):null}writeStart(t,r){r.start=t?.getTime()??null}clone(){return new m({end:this.end,start:this.start})}equals(t){if(!t)return!1;const r=this.start?.getTime()??this.start,n=this.end?.getTime()??this.end,i=t.start?.getTime()??t.start,o=t.end?.getTime()??t.end;return r===i&&n===o}expandTo(t,r=h){if(this.isEmpty||this.isAllTime)return this.clone();let n=this.start;n&&(n=D(n,t,r));let i=this.end;if(i){const o=D(i,t,r);i=i.getTime()===o.getTime()?o:f(o,1,t,r)}return new m({start:n,end:i})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return m.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const r=this.start?.getTime()??-1/0,n=this.end?.getTime()??1/0,i=t.start?.getTime()??-1/0,o=t.end?.getTime()??1/0;let u,p;return i>=r&&i<=n?u=i:r>=i&&r<=o&&(u=r),n>=i&&n<=o?p=n:o>=r&&o<=n&&(p=o),u==null||p==null||isNaN(u)||isNaN(p)?m.empty:new m({start:u===-1/0?null:new Date(u),end:p===1/0?null:new Date(p)})}offset(t,r,n=h){if(this.isEmpty||this.isAllTime)return this.clone();const i=new m,{start:o,end:u}=this;return o!=null&&(i.start=f(o,t,r,n)),u!=null&&(i.end=f(u,t,r,n)),i}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return E.clone();const r=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,n=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new m({start:r,end:n})}},m=c,c);s([a({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),s([v("end")],d.prototype,"readEnd",null),s([T("end")],d.prototype,"writeEnd",null),s([a({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),s([a({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),s([a({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),s([v("start")],d.prototype,"readStart",null),s([T("start")],d.prototype,"writeStart",null),d=m=s([S("esri.time.TimeExtent")],d);const E=new d,R=new d({start:void 0,end:void 0});let H=0,l=class extends M(k(q)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new L(-180,-90,180,90,w.WGS84),this.id=Date.now().toString(16)+"-layer-"+H++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=w.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await A(async()=>{const{fromUrl:r}=await import("./DHoYicJw.js");return{fromUrl:r}},__vite__mapDeps([29,5,1,2,6,4,7,3,8,9,10,11,12,13,14,15,16,17,18,19,20,21,23]),import.meta.url)).fromUrl(t)}static fromPortalItem(e){return F(e)}initialize(){this.when().catch(e=>{U(e)||$.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return z(this.url)}createLayerView(e,t){return Promise.reject(new g("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await B(e,{query:{f:"json"},responseType:"json"})).data;throw new g("layer:no-attribution-data","Layer does not have attribution data")}};s([a({type:String})],l.prototype,"attributionDataUrl",void 0),s([a({readOnly:!0})],l.prototype,"effectiveVisible",null),s([a({type:L})],l.prototype,"fullExtent",void 0),s([a({readOnly:!0})],l.prototype,"hasAttributionData",null),s([a({type:String,clonable:!1})],l.prototype,"id",void 0),s([a({type:Boolean,nonNullable:!0})],l.prototype,"legendEnabled",void 0),s([a({type:["show","hide","hide-children"]})],l.prototype,"listMode",void 0),s([a({type:Number,range:{min:0,max:1},nonNullable:!0})],l.prototype,"opacity",void 0),s([a({clonable:!1})],l.prototype,"parent",void 0),s([a({readOnly:!0})],l.prototype,"parsedUrl",null),s([a({type:Boolean,readOnly:!0})],l.prototype,"persistenceEnabled",void 0),s([a({type:Boolean})],l.prototype,"popupEnabled",void 0),s([a({type:Boolean})],l.prototype,"attributionVisible",void 0),s([a({type:w})],l.prototype,"spatialReference",void 0),s([a({type:String})],l.prototype,"title",void 0),s([a({readOnly:!0,json:{read:!1}})],l.prototype,"type",void 0),s([a()],l.prototype,"url",void 0),s([a({type:d})],l.prototype,"visibilityTimeExtent",void 0),s([a({type:Boolean,nonNullable:!0})],l.prototype,"visible",void 0),l=s([S("esri.layers.Layer")],l);const y=new WeakMap;function W(e){return!e.destroyed&&(y.has(e)||e.addHandles([P(()=>{const{parent:t}=e;return!!(t&&t instanceof l)&&(t.type==="catalog-dynamic-group"||W(t))},t=>y.set(e,t),V),j(()=>y.delete(e))]),y.get(e))}function pt(e,t){const r=e.parent,{layer:n}=e;if(n?.type!=="map-image"||!n.sourceJSON||!r)return!1;const i=n.sourceJSON.layers;if(!i)return!1;const o=i.find(p=>e.id===p.id),u=t==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return o?.type===u&&i.find(p=>p.id===r.id)?.type==="Catalog Layer"}export{f as a,l as b,G as c,pt as d,ut as g,lt as i,d as m,W as o,b as r};
