import{bb as S,a7 as u,r as c,a as l,bc as b,bd as w,x as h,aI as J,d as M,be as N}from"./BNOt8YR4.js";import{f as _,n as g,ab as $}from"./Rwg6dtTd.js";class f{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(S),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new f,i=this._originStores[u.DEFAULTS];i&&i.forEach(((r,s)=>{t.set(s,_(r),u.DEFAULTS)}));for(let r=u.SERVICE;r<S;r++){const s=this._originStores[r];s&&s.forEach(((o,n)=>{e&&e.has(n)||t.set(n,_(o),r)}))}return t}get(e,t){const i=t===void 0?this._values:this._originStores[t];return i?i.get(e):void 0}keys(e){const t=e==null?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,i=u.USER){let r=this._originStores[i];if(r||(r=new Map,this._originStores[i]=r),r.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=i){const s=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,i),s!==t}return!1}delete(e,t=u.USER){const i=this._originStores[t];if(!i)return;const r=i.get(e);if(i.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let s=t-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return r}has(e,t){const i=t===void 0?this._values:this._originStores[t];return!!i&&i.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const i=this._originStores[t],r=i?.get(e),s=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,t),s!==r}originOf(e){return this._propertyOriginMap.get(e)||u.DEFAULTS}isAtOrigin(e,t){return this.has(e,t)&&this.originOf(e)===t}isBelowOrigin(e,t){return!this.has(e)||this.originOf(e)<t}forEach(e){this._values.forEach(e)}}const E=a=>{let e=class extends a{constructor(...t){super(...t);const i=g(this),r=i.store,s=new f;i.store=s,b(i,r,s)}read(t,i){w(this,t,i)}getAtOrigin(t,i){const r=O(this),s=h(i);if(typeof t=="string")return r.get(t,s);const o={};return t.forEach((n=>{o[n]=r.get(n,s)})),o}originOf(t){return J(this.originIdOf(t))}originIdOf(t){return O(this).originOf(t)}revert(t,i){const r=O(this),s=h(i),o=g(this);let n;n=typeof t=="string"?t==="*"?r.keys(s):[t]:t,n.forEach((p=>{o.invalidate(p),r.revert(p,s),o.commit(p)}))}};return e=c([l("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function O(a){return g(a).store}let d=class extends E(M){};d=c([l("esri.core.ReadOnlyMultiOriginJSONSupport")],d);const m=a=>{let e=class extends a{constructor(...t){super(...t)}clear(t,i="user"){g(this).clearOrigin(t,h(i))}write(t,i){return N(this,t=t||{},i),t}setAtOrigin(t,i,r){g(this).setAtOrigin(t,i,h(r))}removeOrigin(t){const i=v(this),r=h(t),s=i.keys(r);for(const o of s)i.originOf(o)===r&&i.set(o,i.get(o,r),u.USER)}updateOrigin(t,i){const r=v(this),s=h(i),o=$(this,t);for(let n=s+1;n<S;++n)r.delete(t,n);r.set(t,o,s)}toJSON(t){return this.write({},t)}};return e=c([l("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function v(a){return g(a).store}const A=a=>{let e=class extends m(E(a)){constructor(...t){super(...t)}};return e=c([l("esri.core.MultiOriginJSONSupport")],e),e};let y=class extends A(M){};y=c([l("esri.core.MultiOriginJSONSupport")],y);export{A as S,y as a};
