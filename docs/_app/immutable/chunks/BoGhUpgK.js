import{b as w,a as Dt,G as ur,Q as Pt,w as lr,y as Ht,r as Wt,R as fr,c as hr,e as B}from"./BO0zSyDw.js";import{s as at,i as S,e as dr}from"./k6TpQ-vv.js";function vs(e,t,r,n){var s,o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function ws(e,t){return function(r,n){t(r,n,e)}}function bs(e,t,r,n){function s(o){return o instanceof r?o:new r((function(i){i(o)}))}return new(r||(r=Promise))((function(o,i){function a(l){try{u(n.next(l))}catch(f){i(f)}}function c(l){try{u(n.throw(l))}catch(f){i(f)}}function u(l){l.done?o(l.value):s(l.value).then(a,c)}u((n=n.apply(e,[])).next())}))}function As(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:n,async:r})}return t}var pr=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function Os(e){function t(o){e.error=e.hasError?new pr(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,(function(i){return t(i),s()}))}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function Ts(e,t){for(const r of e.values())if(t(r))return!0;return!1}function Es(e,t){for(const r of e.values())if(t(r))return r;return null}function yr(e,t,r){const n=e.get(t);if(n!==void 0)return n;const s=r();return e.set(t,s),s}function Ss(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const gr={remove:()=>{}};function y(e){return e?{remove(){e&&(e(),e=void 0)}}:gr}function we(e){e.forEach((t=>t?.remove()))}function ks(e){we(e),e.length=0}function mr(e){return y((()=>we(e)))}function js(e){return y((()=>e()?.remove()))}function Ns(e){return y((()=>e?.abort()))}function Cs(e){return y(e!=null?()=>e.destroy():void 0)}function _r(e){return typeof e=="object"&&!!e&&"remove"in e&&typeof e.remove=="function"}function Is(e){_r(e)&&e.remove()}function Ds(e){return{[Symbol.dispose](){e.remove()}}}function $r(e){return{setTimeout:(t,r)=>{const n=e.setTimeout(t,r);return y((()=>e.clearTimeout(n)))}}}const vr=$r(globalThis);function be(e){return wr(e)||Ae(e)}function wr(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function Ae(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function br(e,t,r){if(!be(e))throw new TypeError("target is not a Evented or EventTarget object");return Ae(e)?Ar(e,t,r):e.on(t,r)}function Ar(e,t,r,n){if(Array.isArray(t)){const s=t.slice();for(const o of s)e.addEventListener(o,r,n);return y((()=>{for(const o of s)e.removeEventListener(o,r,n)}))}return e.addEventListener(t,r,n),y((()=>e.removeEventListener(t,r,n)))}function Oe(e,t,r){if(!be(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const n=br(e,t,(s=>{n.remove(),r.call(e,s)}));return n}function Ps(e,t){if(e==null)throw new Error(t??"value is None")}function Or(e){return e?.destroy(),null}function Ms(e){return e?.dispose(),null}function Tr(e){return e?.remove(),null}function Rs(e){return e?.abort(),null}function Us(e){return e?.release(),null}function zs(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function qs(e,t){let r;return e.some(((n,s)=>(r=t(n,s),r!=null))),r??void 0}function C(e="Aborted"){return new at("AbortError",e)}function Te(e,t="Aborted"){if(Ee(e))throw C(t)}function ct(e){return e instanceof AbortSignal?e:e?.signal??void 0}function Ee(e){const t=ct(e);return t!=null&&t.aborted}function Bs(e){if(Mt(e))throw e}function xs(e){if(!Mt(e))throw e}function W(e,t){const r=ct(e);if(r!=null){if(!r.aborted)return Oe(r,"abort",(()=>t()));t()}}function Ls(e,t){const r=ct(e);if(r!=null)return Te(r),Oe(r,"abort",(()=>t(C())))}function Fs(e,t){return ct(t)==null?e:new Promise(((r,n)=>{let s=W(t,(()=>n(C())));const o=()=>{s=Tr(s)};e.then(o,o),e.then(r,n)}))}function Mt(e){return e?.name==="AbortError"}async function Vs(e){try{return await e}catch(t){if(!Mt(t))throw t;return}}async function Er(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),n=r.map((i=>e[i])),s=await Er(n),o={};return r.map(((i,a)=>o[i]=s[a])),o}const t=e;return Promise.allSettled(t).then((r=>Array.from(t,((n,s)=>{const o=r[s];return o.status==="fulfilled"?{promise:n,value:o.value}:{promise:n,error:o.reason}}))))}async function Gs(e){return(await Promise.allSettled(e)).filter((t=>t.status==="fulfilled")).map((t=>t.value))}async function Js(e){return(await Promise.allSettled(e)).filter((t=>t.status==="rejected")).map((t=>t.reason))}function Sr(e,t=void 0,r){const n=new AbortController;return W(r,(()=>n.abort())),new Promise(((s,o)=>{let i=setTimeout((()=>{i=0,s(t)}),e);W(n,(()=>{i&&(clearTimeout(i),o(C()))}))}))}function Hs(e,t,r,n){const s=r&&"abort"in r?r:null;n!=null||s||(n=r);let o=setTimeout((()=>{o=0,s?.abort()}),t);const i=()=>n||new at("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then((a=>{if(o===0)throw i();return clearTimeout(o),a}),(a=>{throw clearTimeout(o),o===0?i():a}))}function Ws(e,t){const r=new AbortController,n=setTimeout((()=>r.abort()),t);return W(e,(()=>{r.abort(),clearTimeout(n)})),{...e,signal:r.signal}}function kr(e){return e&&typeof e.then=="function"}function Kt(e){return kr(e)?e:Promise.resolve(e)}function Ks(e,t=-1){let r,n,s,o,i=null;const a=(...c)=>{if(r){n=c,o&&o.reject(C()),o=$t();const h=o.promise;if(i){const k=i;i=null,k.abort()}return h}if(s=o||$t(),o=null,t>0){const h=new AbortController;r=Kt(e(...c,h.signal));const k=r;Sr(t).then((()=>{r===k&&(o?h.abort():i=h)}))}else r=1,r=Kt(e(...c));const u=()=>{const h=n;n=s=r=i=null,h!=null&&a(...h)},l=r,f=s;return l.then(u,u),l.then(f.resolve,f.reject),f.promise};return a}function $t(){let e,t;const r=new Promise(((s,o)=>{e=s,t=o})),n=s=>{e(s)};return n.resolve=s=>e(s),n.reject=s=>t(s),n.timeout=(s,o)=>vr.setTimeout((()=>n.reject(o)),s),n.promise=r,n}function Ys(e,t){t.then(e.resolve,e.reject)}async function Zs(e){await Promise.resolve(),Te(e)}function jr(e){return e?.release&&typeof e.release=="function"}function Nr(e){return e?.acquire&&typeof e.acquire=="function"}var $;let Rt=($=class{constructor(t,r,n,s=1,o=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=n,this.allocationSize=s,this._pool=new Array(o),this._initialSize=o;for(let i=0;i<o;i++)this._pool[i]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let r;if($.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let s=0;s<n;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):Nr(r)&&r.acquire(...t),r}release(t){t&&!$.test.disabled&&(this._releaseFunction?this._releaseFunction(t):jr(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const n=this._pool[r];this._dispose(n)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}},$.test={disabled:!1},$);function Cr(e){e.length=0}let Se=class{constructor(t=50,r=50){this._pool=new Rt(Array,void 0,Cr,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return dt.acquire()}static release(t){return dt.release(t)}static prune(){dt.prune()}};const dt=new Se(100),Yt=new WeakMap;function Ir(e,t,r=!1){const n=`ðŸ›‘ DEPRECATED - ${t}`;if(!r)return void e.warn(n);let s=Yt.get(e);s||(s=new Set,Yt.set(e,s)),s.has(t)||(s.add(t),e.warn(n))}const K="https://www.esriurl.com/";function Qs(e,t,r,n={}){w("esri-deprecation-warnings")&&I(e,`This widget is deprecated. Use the ${t} component instead.`,{see:[`${t} component reference: ${K}${r}/`,`Esri's move to web components: ${K}components-transition-plan/`],replacement:`<${r}></${r}>`,warnOnce:!0,...n})}function to(e,t,r,n={}){w("esri-deprecation-warnings")&&I(e,`This view model is deprecated. Use the ${t} component directly instead.`,{see:[`${t} component reference: ${K}${r}/`,`Esri's move to web components: ${K}components-transition-plan/`],replacement:`<${r}></${r}>`,warnOnce:!0,...n})}function eo(e,t,r={}){w("esri-deprecation-warnings")&&I(e,`Module: ${t}`,r)}function Dr(e,t,r={}){if(w("esri-deprecation-warnings")){const{moduleName:n}=r;I(e,`Function: ${(n?n+"::":"")+t+"()"}`,r)}}function ro(e,t,r={}){if(w("esri-deprecation-warnings")){const{moduleName:n}=r;I(e,`Property: ${(n?n+"::":"")+t}`,r)}}function no(e,t,r={}){w("esri-deprecation-warnings")&&I(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function I(e,t,r={}){if(w("esri-deprecation-warnings")){const{replacement:n,version:s,see:o,warnOnce:i}=r;let a=t;if(n&&(a+=`
	ðŸ› ï¸ Replacement: ${n}`),s&&(a+=`
	âš™ï¸ Version: ${s}`),o)if(Array.isArray(o)){a+=`
	ðŸ”— See for more details:`;for(const c of o)a+=`
		${c}`}else a+=`
	ðŸ”— See ${o} for more details.`;Ir(e,a,i)}}function so(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function oo(e,t){for(const r of e)if(r!=null&&t(r))return r}function Zt(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let Ut=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach((r=>{t+=r.length})),t}add(t,r){if(Zt(t)){const n=this._getOrCreateGroup(r);for(const s of t)Qt(s)&&n.push(s)}else Qt(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach((n=>n.forEach(t)));else{const n=this._getGroup(t);n&&r&&n.forEach(r)}}has(t){return this._groups.has(L(t))}remove(t){if(typeof t!="string"&&Zt(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(Xt(this._getGroup(t)),this._groups.delete(L(t)),this):this}removeAll(){return this._groups.forEach(Xt),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(L(t),r),r}_getGroup(t){return this._groups.get(L(t))}};function L(e){return e||"_default_"}function Xt(e){for(const t of e)t instanceof Ut?t.removeAll():t.remove()}function Qt(e){return e!=null&&(!!e.remove||e instanceof Ut)}const ke=Symbol("Accessor-beforeDestroy");function je(e){return e.__accessor__??null}function Pr(e,t){return e?.metadata?.[t]!=null}function Mr(e,t,r){return r?Y(e,t,{policy:r,path:""}):Y(e,t,null)}function Y(e,t,r){return t?Object.keys(t).reduce(((n,s)=>{const o=s;if(o==="__proto__")return n;let i=null,a="merge";if(r&&(i=r.path?`${r.path}.${s}`:s,a=r.policy(i)),a==="replace"||a==="replace-arrays"&&Array.isArray(n[o]))return n[o]=t[o],n;if(n[o]===void 0)return n[o]=Dt(t[o]),n;let c=n[o],u=t[o];if(c===u)return n;if(Array.isArray(u)||Array.isArray(n))c=c?Array.isArray(c)?n[o]=c.slice():n[o]=[c]:n[o]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach((l=>{c.includes(l)||c.push(l)})));else if(u&&typeof u=="object")if(r){const l=r.path;r.path=i,n[o]=Y(c,u,r),r.path=l}else n[o]=Y(c,u,null);else n.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(n[o]=u);return n}),e||{}):e}function Ne(e){return Array.isArray(e)?e:e.split(".")}function te(e){return e.includes(",")?e.split(",").map((t=>t.trim())):[e.trim()]}function Rr(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...te(r));return t}return te(e)}function Ce(e,t,r,n){const s=Rr(t);if(s.length!==1){const o=s.map((i=>n(e,i,r)));return mr(o)}return n(e,s[0],r)}function Ie(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=je(t);return Pr(n,r)?n.get(r):t[r]}function De(e,t,r){if(e==null)return e;const n=Ie(t[r],e);return!n&&r<t.length-1?void 0:r===t.length-1?n:De(n,t,r+1)}function ut(e,t,r=0){return typeof t!="string"||t.includes(".")?De(e,Ne(t),r):Ie(t,e)}function Z(e,t){return ut(e,t)}function ao(e,t){return ut(t,e)!==void 0}const g={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function x(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const n in t)t[n]=Dt(t[n]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Pe(e,t){const r=x(e);let n=r[t];return n||(n=r[t]={}),n}function Ur(e,t){return Mr(e,t,qr)}const zr=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function qr(e){return zr.test(e)?"replace":"merge"}let Br=class{constructor(t,r){this._observers=t,this._observer=r}remove(){ur(this._observers,this._observer)}},xr=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return Lr;this._observers==null&&(this._observers=[]);const r=this._observers;let n=!1,s=!1;const o=r.length;for(let i=0;i<o;++i){const a=r[i];if(a.destroyed)s=!0;else if(a===t){n=!0;break}}return n||(r.push(t),s&&this._removeDestroyedObservers()),new Br(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let n=0;for(let s=0;s<r;++s){for(;s+n<r&&t[s+n].destroyed;)++n;if(n>0){if(!(s+n<r))break;t[s]=t[s+n]}}t.length=r-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const Lr=y();var p;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(p||(p={}));const lo=p.USER+1;function Fr(e){switch(e){case"defaults":return p.DEFAULTS;case"service":return p.SERVICE;case"portal-item":return p.PORTAL_ITEM;case"web-scene":return p.WEB_SCENE;case"web-map":return p.WEB_MAP;case"link-chart":return p.LINK_CHART;case"user":return p.USER;default:return null}}function vt(e){switch(e){case p.DEFAULTS:return"defaults";case p.SERVICE:return"service";case p.PORTAL_ITEM:return"portal-item";case p.WEB_SCENE:return"web-scene";case p.WEB_MAP:return"web-map";case p.LINK_CHART:return"link-chart";case p.USER:return"user"}}function fo(e){return vt(e)}const d={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let lt=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){this.accessed?.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach((t=>{this._handles.push(t.observe(this._observer))})),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const X=new lt,P=[];let M=X;function ft(e){M.onAccessed(e)}let G=!1,J=!1;function v(e,t,r){if(G)return zt(e,t,r);let n=null;return Me(e),n=t.call(r),Re(),n}function Vr(e,t){return v(X,e,t)}function zt(e,t,r){const n=G;G=!0,Me(e);let s=null;try{s=t.call(r)}catch(o){J&&S.getLogger("esri.core.accessorSupport.tracking").error(o)}return Re(),G=n,s}function Me(e){M=e,P.push(e)}function Re(){const e=P.length;if(e>1){const t=P.pop();M=P[e-2],t.onTrackingEnd()}else if(e===1){const t=P.pop();M=X,t.onTrackingEnd()}else M=X}function Ue(e,t){if(t.flags&d.DepTrackingInitialized)return;t.flags|=d.DepTrackingInitialized;const r=J;J=!1,t.flags&d.AutoTracked?zt(t.trackingTarget,t.metadata.get,e):ze(e,t),J=r}const Gr=[];function ze(e,t){t.flags&d.ExplicitlyTracking||(t.flags|=d.ExplicitlyTracking,zt(t.trackingTarget,(()=>{const r=t.metadata.dependsOn||Gr;for(const n of r)if(typeof n!="string"||n.includes(".")){const s=Ne(n);for(let o=0,i=e;o<s.length&&i!=null&&typeof i=="object";++o)i=ee(i,s[o],o!==s.length-1)}else ee(e,n,!1)})),t.flags&=-129)}function ee(e,t,r){const n=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const o=parseInt(n,10);if(!isNaN(o))return Array.isArray(e)?e[o]:e.at(o)}const s=je(e);if(s){const o=s.propertiesByName.get(n);o&&(ft(o),Ue(e,o))}return r?e[n]:void 0}let re=class extends xr{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new lt(this),this.flags=0,this.flags=d.Dirty|(r.nonNullable?d.NonNullable:0)|(r.hasOwnProperty("value")?d.HasDefaultValue:0)|(r.get===void 0?d.DepTrackingInitialized:0)|(r.dependsOn===void 0?d.AutoTracked:0)}destroy(){this.flags&d.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&ft(this);const r=t.store,n=this.propertyName,s=this.flags,o=r.get(n);if(s&d.Computing||~s&d.Dirty&&r.has(n))return o;this.flags|=d.Computing;const i=t.host;let a;s&d.AutoTracked?a=v(this.trackingTarget,this.metadata.get,i):(ze(i,this),a=this.metadata.get.call(i)),this.flags|=d.DepTrackingInitialized,r.set(n,a,p.COMPUTED);const c=r.get(n);return c===o?this.flags&=-2:Vr(this.commit,this),this.flags&=-5,c}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&d.Overridden&&(this.flags|=d.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const n of r)n.onCommitted()}}},Jr=class qe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new qe;return this._values.forEach(((n,s)=>{t&&t.has(s)||r.set(s,Dt(n))})),r}get(t){return this._values.get(t)}originOf(){return p.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}isAtOrigin(t,r){return this.has(t)}isBelowOrigin(t,r){return!this.has(t)}forEach(t){this._values.forEach(t)}};function j(e,t,r){return e!==void 0}function ne(e,t,r,n){return e!==void 0&&(!(r==null&&e.flags&d.NonNullable)||(n.lifecycle,!1))}let Hr=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=g.INITIALIZING,this.store=new Jr,this.mutable=!0,this._origin=p.USER;const r=this.host.constructor.__accessorMetadata__;for(const n in r){const s=new re(n,r[n]);this.propertiesByName.set(n,s)}this.metadata=r}initialize(){this.lifecycle=g.CONSTRUCTING}constructed(){this.lifecycle=g.CONSTRUCTED}destroy(){this.lifecycle=g.DESTROYED,this.propertiesByName.forEach((t=>t.destroy()))}get initialized(){return this.lifecycle!==g.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(!j(r))return;if(r.metadata.get)return r.getComputed(this);this.mutable&&ft(r);const n=this.store;return n.has(t)?n.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const n=this.propertiesByName.get(t);if(n!==void 0&&n.flags&d.HasDefaultValue)return"defaults"}return vt(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(j(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const n=this.propertiesByName.get(t);j(n)&&this._internalSet(n,r)}getDependsInfo(t,r,n){const s=this.propertiesByName.get(r);if(!j(s))return"";const o=new lt,i=v(o,(()=>s.metadata.get?.call(t)));let a=`${n}${t.declaredClass.split(".").pop()}.${r}: ${i}
`;const c=o.accessed??new Set;if(c.size===0)return a;n+="  ";for(const u of c)u instanceof re&&(a+=`${n}${u.propertyName}: undefined
`);return a}setAtOrigin(t,r,n){const s=this.propertiesByName.get(t);if(j(s))return this._setAtOrigin(s,r,n)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&d.Overridden)}clearOrigin(t,r){const n=this.store,s=this.propertiesByName.get(t);if(!j(s))return;const o=n.isAtOrigin(t,r)&&!(s.flags&d.Overridden);n.delete(t,r),o&&s.notifyChange()}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&d.Overridden&&(r.flags&=-3,r.notifyChange())}override(t,r){const n=this.propertiesByName.get(t);if(!ne(n,t,r,this))return;const s=n.metadata.cast;if(s){const o=this._cast(s,r),{valid:i,value:a}=o;if(pt.release(o),!i)return;r=a}n.flags|=d.Overridden,this._internalSet(n,r)}set(t,r){const n=this.propertiesByName.get(t);if(!ne(n,t,r,this))return;const s=n.metadata.cast;if(s){const i=this._cast(s,r),{valid:a,value:c}=i;if(pt.release(i),!a)return;r=c}const o=n.metadata.set;o?o.call(this.host,r):this._internalSet(n,r)}setDefaultOrigin(t){this._origin=Fr(t)}getDefaultOrigin(){return vt(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const n=this.lifecycle!==g.INITIALIZING?this._origin:p.DEFAULTS;this._setAtOrigin(t,r,n)}_setAtOrigin(t,r,n){const s=this.store,o=t.propertyName;if(s.isAtOrigin(o,n)&&Pt(r,s.get(o))&&~t.flags&d.Overridden)return;const i=s.isBelowOrigin(o,n)||s.isAtOrigin(o,n);i&&t.invalidate(),s.set(o,r,n),i&&t.commit(),Ue(this.host,t)}_cast(t,r){const n=pt.acquire();return n.valid=!0,n.value=r,t&&(n.value=t.call(this.host,r,n)),n}},Wr=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const pt=new Rt(Wr);function Q(e,t,r){if(e&&t)if(typeof t=="object")for(const n of Object.getOwnPropertyNames(t))Q(e,n,t[n]);else{if(t.includes(".")){const s=t.split("."),o=s.splice(-1,1)[0];return void Q(Z(e,s),o,r)}const n=e.__accessor__;n!=null&&Kr(t,n),e[t]=r}}function Kr(e,t){if(w("esri-unknown-property-errors")&&!Yr(e,t))throw new at("set:unknown-property",Zr(e,t))}function Yr(e,t){return t.metadata[e]!=null}function Zr(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let Xr;function Qr(){return Xr}var se;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(se||(se={}));let tn=class extends Rt{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const F=[];function Be(e){F.push(e),F.length===1&&queueMicrotask((()=>{const t=F.slice();F.length=0;for(const r of t)r()}))}let xe=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort(((t,r)=>t-r))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((t,r)=>t+r),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var wt;(function(e){const t=(o,i,a,c)=>{let u=i,l=i;const f=a>>>1,h=o[u-1];for(;l<=f;){l=u<<1,l<a&&c(o[l-1],o[l])<0&&++l;const k=o[l-1];if(c(k,h)<=0)break;o[u-1]=k,u=l}o[u-1]=h},r=(o,i)=>o<i?-1:o>i?1:0;function n(o,i,a,c){i===void 0&&(i=0),a===void 0&&(a=o.length),c===void 0&&(c=r);for(let l=a>>>1;l>i;l--)t(o,l,a,c);const u=i+1;for(let l=a-1;l>i;l--){const f=o[i];o[i]=o[l],o[l]=f,t(o,u,l,c)}}function*s(o,i,a,c){i===void 0&&(i=0),a===void 0&&(a=o.length),c===void 0&&(c=r);for(let l=a>>>1;l>i;l--)t(o,l,a,c),yield;const u=i+1;for(let l=a-1;l>i;l--){const f=o[i];o[i]=o[l],o[l]=f,t(o,u,l,c),yield}}e.sort=n,e.iterableSort=s})(wt||(wt={}));const oe=wt,en=1.5,rn=1.1;let Le=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new lr,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>ie(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let n=0;n<this._length;n++){const s=this.data[n];t(s)&&r.push(s)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const n=this.data.indexOf(t,r);return n!==-1&&n<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let n=0;n<r;n++)this.data[this._length++]=t[n]}fill(t,r){for(let n=0;n<r;n++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,ie(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=Ht(this.data,Wt(t),this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(Ht(this.data,Wt(t),this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,n){this.length=fr(this.data,t,this.length,r,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const n=this.data[t];this.data[t]=this.data[r],this.data[r]=n}sort(t){oe.sort(this.data,0,this.length,t)}iterableSort(t){return oe.iterableSort(this.data,0,this.length,t)}some(t,r){for(let n=0;n<this.length;++n)if(t.call(r,this.data[n],n,this.data))return!0;return!1}find(t,r){const{data:n,length:s}=this;for(let o=0;o<s;++o)if(t.call(r,n[o]))return n[o]}filterInPlace(t,r){let n=0;for(let s=0;s<this._length;++s){const o=this.data[s];t.call(r,o,s,this.data)&&(this.data[s]=this.data[n],this.data[n]=o,n++)}if(this._deallocator)for(let s=n;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=n,this._shrink(),this}forAll(t,r){const{data:n,length:s}=this;for(let o=0;o<s;++o)t.call(r,n[o],o,n)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const n=new Array(this.length);for(let s=0;s<this.length;++s)n[s]=t.call(r,this.data[s],s,this.data);return n}reduce(t,r){let n=r;for(let s=0;s<this.length;++s)n=t(n,this.data[s],s,this.data);return n}has(t){const r=this.length,n=this.data;for(let s=0;s<r;++s)if(n[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function ie(e){e.data.length>en*e.length&&(e.data.length=Math.floor(e.length*rn))}function vo(e){return e}function wo(e){return 1e3*e}function bo(e){return e}function Ao(e){return .001*e}let nn=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},sn=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},bt=0;const D={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},At=["prepare","preRender","render","postRender","update","finish"],Ot=[],T=new Le;let on=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Fe()}};function an(){b!=null&&(cancelAnimationFrame(b),b=requestAnimationFrame(qt))}function Fe(){b==null&&(bt=performance.now(),b=requestAnimationFrame(qt))}const tt={frameTasks:T,willDispatch:!1,clearFrameTasks:un,dispatch:Ge,executeFrameTasks:ln,reschedule:an};function cn(e){const t=new sn(e);return Ot.push(t),tt.willDispatch||(tt.willDispatch=!0,Be(Ge)),t}function So(e){const t=new nn(e);return T.push(t),Fe(),new on(t)}let b=null;function un(e=!1){T.forAll((t=>{t.removed=!0})),e&&Ve()}function qt(){const e=performance.now();b=null,b=T.some((r=>!r.paused&&!r.removed))?requestAnimationFrame(qt):null,tt.executeFrameTasks(e)}function ln(e){const t=e-bt;bt=e;const r=1e3/60,n=Math.max(0,t-r);D.time=e,D.frameDuration=r-n;for(let s=0;s<At.length;s++){const o=performance.now(),i=At[s];T.forAll((a=>{a.paused||a.removed||(s===0&&a.ticks++,a.phases[i]&&(D.elapsedFrameTime=performance.now()-e,D.deltaTime=a.ticks===0?0:t,a.phases[i]?.call(a,D)))})),dn[s].push(performance.now()-o)}Ve(),pn.push(performance.now()-e)}const V=new Le;function Ve(){T.forAll((e=>{e.removed&&V.push(e)})),T.removeUnorderedMany(V.data,V.length),V.clear()}function Ge(){for(;Ot.length;){const e=Ot.shift();e.isActive&&e.callback()}tt.willDispatch=!1}function fn(e=1,t){const r=$t(),n=()=>{Ee(t)?r.reject(C()):e===0?r():(--e,Be((()=>n())))};return n(),r.promise}function hn(e){return fn(1,e)}async function ko(e){await hn(e),await new Promise((t=>requestAnimationFrame((()=>{e?.aborted||t()}))))}const dn=At.map((e=>new xe(e))),pn=new xe("total");function yn(e,t){for(const r of e.values())if(t(r))return!0;return!1}function ae(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function jo(e,t){return t!=null&&e.add(t),e}function gn(e,t){const r=new Set;return ae(r,e),ae(r,t),r}function mn(e,t){const r=new Set;for(const n of t)e.has(n)&&r.add(n);return r}function No(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function Co(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function _n(e,t){const r=new Set(e);for(const n of t)r.delete(n);return r}function Io(e,t){return _n(gn(e,t),mn(e,t))}let $n=0;function yt(){return++$n}let Bt=class extends lt{constructor(t){super(new vn(t)),this._observer&&ce.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&ce.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},vn=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=wn}};const ce=new FinalizationRegistry((e=>{e.deref()?.destroy()}));function wn(){}let N=!1;const et=[];function Je(e,t){let r=new Bt(o),n=null,s=!1;function o(){if(!r||s)return;if(N)return void We(o);const a=n;r.clear(),N=!0,s=!0,n=v(r,e),s=!1,N=!1,t(n,a),Ke()}function i(){r&&(r.destroy(),r=null,n=null)}return s=!0,n=v(r,e),s=!1,y(i)}function He(e,t){let r=new Bt(s),n=null;function s(){t(n,i)}function o(){r&&(r.destroy(),r=null),n=null}function i(){return r?(r.clear(),n=v(r,e),n):null}return i(),y(o)}function Mo(e,t){let r=!1,n=!1;const s=!!t?.sync;let o=new Bt((()=>{r||n||(n=!0,s?i():queueMicrotask(i))}));function i(){n=!1,o&&!r&&(N?We(i):(o.clear(),N=!0,r=!0,v(o,e),r=!1,N=!1,Ke()))}function a(){o&&(o.destroy(),o=null)}return r=!0,v(o,e),r=!1,y(a)}function We(e){et.includes(e)||et.unshift(e)}function Ke(){for(;et.length;)et.pop()()}var R;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(R||(R={}));var O;let xt=(O=class{constructor(){this.uid=yt(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,n,s,o){return this.pool.acquire(R.Untracked,t,r,n,s,o,Pt)}static acquireTracked(t,r,n,s){return this.pool.acquire(R.Tracked,t,r,n,null,null,s)}notify(t,r){this.type===R.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,n,s,o,i,a){this.uid=yt(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=n,this.getValue=s,this.target=o,this.path=i,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=yt(),this.removed=!0}},O.pool=new tn(O),O);const H=new Se,m=new Set;let rt;function nt(e){m.delete(e),m.add(e),rt||(rt=cn(On))}function bn(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function An(e){for(const t of m.values())t.target===e&&(t.removed=!0)}function On(){let e=10;for(;rt&&e--;){rt=null;const t=Tn(),r=H.acquire();for(const n of t){const s=n.uid;bn(n),s===n.uid&&n.removed&&r.push(n)}for(const n of m)n.removed&&(r.push(n),m.delete(n));for(const n of r)xt.pool.release(n);H.release(r),H.release(t),Tt.forEach((n=>n()))}}function Tn(){const e=H.acquire();e.length=m.size;let t=0;for(const r of m)e[t]=r,++t;return m.clear(),e}const Tt=new Set;function Ro(e){return Tt.add(e),y((()=>Tt.delete(e)))}function En(e,t,r){let n=Ce(e,t,r,((s,o,i)=>{let a,c,u=He((()=>ut(s,o)),((l,f)=>{s.__accessor__?.lifecycle===g.DESTROYED||a&&a.uid!==c?n.remove():(a||(a=xt.acquireUntracked(l,i,f,s,o),c=a.uid),nt(a))}));return y((()=>{u.remove(),a&&(a.uid!==c||a.removed||(a.removed=!0,nt(a)),a=null),n=u=null}))}));return n}function Sn(e,t,r){const n=Ce(e,t,r,((s,o,i)=>{let a=!1;return Je((()=>ut(s,o)),((c,u)=>{s.__accessor__.lifecycle!==g.DESTROYED?a||(a=!0,Pt(u,c)||i.call(s,c,u,o,s),a=!1):n.remove()}))}));return n}function kn(e,t,r,n=!1){return e.__accessor__&&e.__accessor__.lifecycle!==g.DESTROYED?n?Sn(e,t,r):En(e,t,r):y()}function jn(e,t,r){let n,s,o=He(e,((i,a)=>{n&&n.uid!==s?o.remove():(n||(n=xt.acquireTracked(i,t,a,r),s=n.uid),nt(n))}));return y((()=>{o.remove(),n&&(n.uid!==s||n.removed||(n.removed=!0,nt(n)),n=null),o=null}))}function Nn(e,t,r){let n=!1;return Je(e,((s,o)=>{n||(n=!0,r(o,s)||t(s,o),n=!1)}))}function Uo(e,t,r=!1,n=hr){return r?Nn(e,t,n):jn(e,t,n)}function zo(e){return yn(m,(t=>t.oldValue===e))}const A=()=>S.getLogger("esri.core.accessorSupport.ensureTypes");function Cn(e){if(e==null)return e;const t=new Date(e);return isNaN(t.getTime())?(A().error("Accessor#set",`Invalid date value: '${e}', falling back to current date`),new Date):t}function In(e){return e==null?e:!!e}function Dn(e){return e==null?e:e.toString()}function Pn(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function Mn(e){return e==null?e:Math.round(parseFloat(e))}function Rn(e){return null}function Un(e,t){return r=>{let n=e(r);return t.step!=null&&(n=Math.round(n/t.step)*t.step),t.min!=null&&(n=Math.max(t.min,n)),t.max!=null&&(n=Math.min(t.max,n)),n}}function Ye(e){return e?.constructor&&e.constructor.__accessorMetadata__!==void 0}function st(e,t){return t!=null&&e&&!(t instanceof e)}function Ze(e){return e&&"isCollection"in e}function ue(e){return e?.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function zn(e,t){if(!t?.constructor||!Ze(t.constructor))return Et(e,t)?t:new e(t);const r=ue(e.prototype.itemType),n=ue(t.constructor.prototype.itemType);return r?n?r===n?t:r.prototype.isPrototypeOf(n.prototype)?new e(t):(Et(e,t),t):new e(t):t}function Et(e,t){return!!Ye(t)&&(A().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+ht(e)+"'"),!0)}function qn(e,t){return t==null?t:Ze(e)?zn(e,t):st(e,t)?Et(e,t)?t:new e(t):t}function ht(e){return e?.prototype?.declaredClass||"unknown"}const Bn=new WeakMap;function xn(e){switch(e){case Number:return t=>Pn(t);case Lt:return Mn;case Boolean:return In;case String:return Dn;case Date:return Cn;case Ft:return Rn;default:return yr(Bn,e,(()=>qn.bind(null,e)))}}function E(e,t){const r=xn(e);return arguments.length===1?r:r(t)}function z(e,t,r){return arguments.length===1?z.bind(null,e):t&&(Array.isArray(t)?t.map((n=>e(n,r))):[e(t,r)])}function Ln(e,t){return arguments.length===1?z((r=>E(e,r))):z((r=>E(e,r)),t)}function Xe(e,t,r){return t!==0&&Array.isArray(r)?r.map((n=>Xe(e,t-1,n))):e(r)}function ot(e,t,r){if(arguments.length===2)return o=>ot(e,t,o);if(!r)return r;r=Xe(e,t,r);let n=t,s=r;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(s!==void 0)for(let o=0;o<n;o++)r=[r];return r}function Fn(e,t,r){return arguments.length===2?ot((n=>E(e,n)),t):ot((n=>E(e,n)),t,r)}function Qe(e){return!!Array.isArray(e)&&!e.some((t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)}))}function St(e,t){if(arguments.length===2)return St(e).call(null,t);const r=new Set,n=e.filter((a=>typeof a!="function")),s=e.filter((a=>typeof a=="function"));for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let o=null,i=null;return(a,c)=>{if(a==null)return a;const u=typeof a,l=u==="string"||u==="number";return l&&(r.has(a)||s.some((f=>u==="string"&&f===String||u==="number"&&f===Number)))||u==="object"&&s.some((f=>!st(a,f)))?a:(l&&n.length?(o||(o=n.map((f=>typeof f=="string"?`'${f}'`:`${f}`)).join(", ")),A().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof a=="object"&&s.length?(i||(i=s.map((f=>ht(f))).join(", ")),A().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${i}`)):A().error("Accessor#set",`'${a}' is not a valid value for this property`),c&&(c.valid=!1),null)}}function kt(e,t){if(arguments.length===2)return kt(e).call(null,t);const r={},n=[],s=[];for(const c in e.typeMap){const u=e.typeMap[c];r[c]=E(u),n.push(ht(u)),s.push(c)}const o=()=>`'${n.join("', '")}'`,i=()=>`'${s.join("', '")}'`,a=typeof e.key=="string"?c=>c[e.key]:e.key;return c=>{if(e.base&&!st(e.base,c)||c==null)return c;const u=a(c)||e.defaultKeyValue,l=r[u];if(!l)return A().error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${i()})`),null;if(!st(e.typeMap[u],c))return c;if(typeof e.key=="string"&&!Ye(c)){const f={};for(const h in c)h!==e.key&&(f[h]=c[h]);return l(f)}return l(c)}}class Lt{}class Ft{}const qo={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Vn(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function tr(e){switch(e.type){case"native":return E(e.value);case"array":return z(tr(e.value));case"one-of":return Gn(e);default:return null}}function Gn(e){let t=null;return(r,n)=>Nt(r,e)?r:(t==null&&(t=jt(e)),A().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),n&&(n.valid=!1),null)}function jt(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Lt:return"integer";case Date:return"date";case Ft:return"null";default:return ht(e.value)}case"array":return`array of ${jt(e.value)}`;case"one-of":{const t=e.values.map((r=>jt(r)));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function Nt(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Lt:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case Ft:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((r=>!Nt(r,t.value)));case"one-of":return t.values.some((r=>Nt(e,r)))}}function Jn(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(t,r),s=Pe(t,r);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in e&&S.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=n.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const o=e.aliasOf;if(o){const c=typeof o=="string"?o:o.source,u=typeof o=="string"?null:o.overridable===!0;let l;s.dependsOn=[c],s.get=function(){let f=Z(this,c);if(typeof f=="function"){l||(l=c.split(".").slice(0,-1).join("."));const h=Z(this,l);h&&(f=f.bind(h))}return f},s.readOnly||(s.set=u?function(f){this._override(r,f)}:function(f){Q(this,c,f)})}const i=e.type,a=e.types;if(!s.cast){let c;i?c=Hn(i):a&&(c=Array.isArray(a)?z(kt(a[0])):kt(a)),e.cast=Wn(e.cast,c)}Ur(s,e),e.range&&(s.cast=Un(s.cast,e.range))}}function Bo(e,t,r){const n=Pe(e,r);n.json||(n.json={});let s=n.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function Hn(e){let t=0,r=e;if(Vn(e))return tr(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const n=r;if(Qe(n))return t===0?St(n):ot(St(n),t);if(t===1)return Ln(n);if(t>1)return Fn(n,t);const s=e;return s.from?s.from:E(s)}function Wn(e,t){if(e||t)return e?t?(r,n)=>t(e(r,n),n):e:t}function Kn(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const n in r)if(t[n]){const s=t[n];r[n].forEach((o=>{t[o]=s})),delete t[n]}}}let er=class extends dr{constructor(t,r,n){super(t,r,n)}};er.prototype.type="warning";function rr(e){return!!e&&e.prototype?.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Ct=()=>S.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function le(e,t,r){e&&(!r&&!t.read||t.read?.reader||t.read?.enabled===!1||Qn(e)&&B("read.reader",Yn(e),t))}function Yn(e){const t=e.ndimArray??0;if(t>1)return Xn(e);if(t===1)return fe(e);if("type"in e&&sr(e.type)){const r=e.type.prototype?.itemType?.Type,n=fe(typeof r=="function"?{type:r}:{types:r});return(s,o,i)=>{const a=n(s,o,i);return a&&new e.type(a)}}return Vt(e)}function Vt(e){return"type"in e?Zn(e.type):ts(e.types)}function Zn(e){return e.prototype.read?(t,r,n)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void Ct().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const o=new e;return o.read(t,n),o}:e.fromJSON}function nr(e,t,r,n){return n!==0&&Array.isArray(t)?t.map((s=>nr(e,s,r,n-1))):e(t,void 0,r)}function Xn(e){const t=Vt(e),r=nr.bind(null,t),n=e.ndimArray??0;return(s,o,i)=>{if(s==null)return s;s=r(s,i,n);let a=n,c=s;for(;a>0&&Array.isArray(c);)a--,c=c[0];if(c!==void 0)for(let u=0;u<a;u++)s=[s];return s}}function fe(e){const t=Vt(e);return(r,n,s)=>{if(r==null)return r;if(Array.isArray(r)){const i=[];for(const a of r){const c=t(a,void 0,s);c!==void 0&&i.push(c)}return i}const o=t(r,void 0,s);return o!==void 0?[o]:void 0}}function sr(e){if(!rr(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?Gt(t.Type):or(t.Type))}function Qn(e){return"types"in e?or(e.types):Gt(e.type)}function Gt(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||sr(e))}function or(e){for(const t in e.typeMap)if(!Gt(e.typeMap[t]))return!1;return!0}function ts(e){let t=null;const r=e.errorContext??"type",n=e.validate;return(s,o,i)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void Ct().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=es(e));const c=e.key;if(typeof c!="string")return;const u=s[c],l=u?t[u]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!l){const h=`Type '${u||"unknown"}' is not supported`;return i?.messages&&s&&i.messages.push(new er(`${r}:unsupported`,h,{definition:s,context:i})),void Ct().error(h)}const f=new l;return f.read(s,i),n?n(f):f}}function es(e){const t={};for(const r in e.typeMap){const n=e.typeMap[r],s=x(n.prototype);if(typeof e.key=="function")continue;const o=s[e.key];if(!o)continue;if(o.json?.type&&Array.isArray(o.json.type)&&o.json.type.length===1&&typeof o.json.type[0]=="string"){t[o.json.type[0]]=n;continue}const i=o.json?.write;if(!i?.writer){t[r]=n;continue}const a=i.target,c=typeof a=="string"?a:e.key,u={};i.writer(r,u,c),u[c]&&(t[u[c]]=n)}return t}function rs(e){if(e.json||(e.json={}),de(e.json),pe(e.json),he(e.json),e.json.origins)for(const t in e.json.origins)de(e.json.origins[t]),pe(e.json.origins[t]),he(e.json.origins[t]);return!0}function he(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function de(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function pe(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function ye(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=e?.ndimArray??0;e&&(r===1||"type"in e&&rr(e.type))?t.write.writer=is:r>1?t.write.writer=as(r):t.types?Array.isArray(t.types)?t.write.writer=ss(t.types[0]):t.write.writer=ns(t.types):t.write.writer=q}function ns(e){return(t,r,n,s)=>t?ir(t,e,s)?q(t,r,n,s):void 0:q(t,r,n,s)}function ir(e,t,r){for(const n in t.typeMap)if(e instanceof t.typeMap[n])return!0;if(r?.messages){const n=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new at(`${n}:unsupported`,s,{definition:e,context:r})),S.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function ss(e){return(t,r,n,s)=>!t||!Array.isArray(t)?q(t,r,n,s):q(t.filter((o=>ir(o,e,s))),r,n,s)}function q(e,t,r,n){B(r,it(e,n),t)}function it(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?os(e):e}function os(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function is(e,t,r,n){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map((o=>it(o,n))),typeof s.toArray=="function"&&(s=s.toArray())):s=[it(e,n)],B(r,s,t)}function ar(e,t,r){return r!==0&&Array.isArray(e)?e.map((n=>ar(n,t,r-1))):it(e,t)}function as(e){return(t,r,n,s)=>{let o;if(t===null)o=null;else{o=ar(t,s,e);let i=e,a=o;for(;i>0&&Array.isArray(a);)i--,a=a[0];if(a!==void 0)for(let c=0;c<i;c++)o=[o]}B(n,o,r)}}function Lo(e,t){return Jt(e,"any",t?.origin)}function Fo(e,t){return Jt(e,"read",t?.origin)}function Vo(e,t){return Jt(e,"write",t?.origin)}function Jt(e,t,r){let n=e?.json;if(n?.origins&&r){let s;s=r==="link-chart"?n.origins[r]&&(t==="any"||t in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],s&&(t==="any"||t in s)&&(n=s)}return n}function cs(e){const t=us(e);if(e.json.origins)for(const r in e.json.origins){const n=e.json.origins[r],s=n.types?ls(n):t;le(s,n,!1),n.types&&!n.write&&e.json.write?.enabled&&(n.write={...e.json.write}),ye(s,n)}le(t,e.json,!0),ye(t,e.json)}function us(e){return e.json.types?It(e.json):e.type?cr(e):It(e)}function ls(e){return e.type?cr(e):It(e)}function cr(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!Qe(r);)r=r[0],t++;return{type:r,ndimArray:t}}function It(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function fs(e){rs(e)&&(Kn(e),cs(e))}const gt=new Set,mt=new Set;function hs(e){return t=>{e??="esri.core.Accessor",t.prototype.declaredClass=e,ps(t);const r=[],n=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!gt.has(s.initialize)&&(gt.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!mt.has(s.destroy)&&(mt.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);gt.clear(),mt.clear();const o=class extends t{constructor(...a){if(super(...a),this.constructor===o&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let c=r.length-1;c>=0;c--)r[c].call(this)}}),n.length){let c=!1;const u=this[ke];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!c){this.__accessor__.lifecycle=g.DESTROYING,c=!0,u.call(this);for(let l=0;l<n.length;l++)n[l].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};o.__accessorMetadata__=x(t.prototype),o.prototype.declaredClass=e;const i=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(o,"name",{value:i,configurable:!0}),o}}function ds(e,t){return t.get==null?function(){const r=this.__accessor__,n=r.propertiesByName.get(e);if(n===void 0)return;r.mutable&&ft(n);const s=r.store;return s.has(e)?s.get(e):n.metadata.value}:function(){const r=this.__accessor__,n=r.propertiesByName.get(e);if(n!==void 0)return n.getComputed(r)}}function ps(e){const t=e.prototype,r=x(t),n={};for(const s of Object.getOwnPropertyNames(r)){const o=r[s];fs(o),n[s]={enumerable:!0,configurable:!0,get:ds(s,o),set(i){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&o.readOnly?ge("read-only",s):a.lifecycle===g.CONSTRUCTED&&o.constructOnly?ge("construct-only",s):void a.set(s,i)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:i})}}}Object.defineProperties(e.prototype,n)}const ge=(e,t)=>{S.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var me,_e;function ys(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const _=Symbol("Accessor-Handles"),_t=Symbol("Accessor-Initialized"),U=class U{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:n,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const o=this;class i extends o{constructor(...c){super(...c),this.inherited=null,s&&s.apply(this,c)}}x(i.prototype);for(const a in t){const c=t[a];i.prototype[a]=typeof c=="function"?function(...u){const l=this.inherited;let f;this.inherited=function(...h){if(o.prototype[a])return o.prototype[a].apply(this,h)};try{f=c.apply(this,u)}catch(h){throw this.inherited=l,h}return this.inherited=l,f}:t[a]}for(const a in r){const c=ys(r[a]);Jn(c)(i.prototype,a)}return hs(n)(i)}static freeze(t){return t instanceof U?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof U?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){if(this[me]=null,this[_e]=!1,this.constructor===U)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new Hr(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=this.normalizeCtorArgs?.apply(this,t)??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[_t]=!0}initialize(){}[ke](){this[_]=Or(this[_])}destroy(){this.destroyed||(An(this),this.__accessor__.destroy(),Qr()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[_t]}get destroyed(){return this.__accessor__?.lifecycle===g.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===g.DESTROYING||!1}commitProperty(t){Z(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return Q(this,t,r),this}watch(t,r,n){return Dr(S.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),kn(this,t,r,n)}addHandles(t,r){if(this.destroyed){const n=Array.isArray(t)?t:[t];for(const s of n)s.remove();return}(this[_]??=new Ut).add(t,r)}removeHandles(t){this[_]?.remove(t)}removeAllHandles(){this[_]?.removeAll()}removeHandlesReference(t){this[_]?.removeReference(t)}hasHandles(t){return this[_]?.has(t)===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};me=_,_e=_t;let $e=U;class gs{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=ms(t),this.apiValues=ve(this._apiToJSON),this.jsonValues=ve(this._jsonToAPI),this.read=n=>this.fromJSON(n),this.write=(n,s,o)=>{const i=this.toJSON(n);i!==void 0&&B(o,i,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}}function ms(e){const t={};for(const r in e)t[e[r]]=r;return t}function ve(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function Go(){return function(e,t){return new gs(e,{ignoreUnknown:!0,...t})}}export{bs as $,cn as A,Fr as B,Rt as C,Ks as D,Sr as E,Ps as F,E as G,Er as H,Zs as I,Tr as J,W as K,$t as L,Ls as M,C as N,Ys as O,Js as P,ct as Q,Le as R,kr as S,oo as T,so as U,Oe as V,vo as W,p as X,vt as Y,As as Z,Os as _,hs as a,tn as a$,I as a0,Cs as a1,Ns as a2,Fs as a3,Gs as a4,Dn as a5,Vs as a6,Rs as a7,Pn as a8,ro as a9,No as aA,_n as aB,mn as aC,qs as aD,Fo as aE,ut as aF,Lo as aG,ao as aH,Mr as aI,Vo as aJ,fo as aK,Ss as aL,Ft as aM,yn as aN,Hs as aO,hn as aP,Ds as aQ,Uo as aR,be as aS,ks as aT,ko as aU,Bt as aV,v as aW,ae as aX,Un as aY,Dr as aZ,So as a_,mr as aa,Ut as ab,br as ac,Ms as ad,eo as ae,kt as af,Se as ag,lo as ah,Z as ai,zs as aj,Us as ak,fn as al,Ee as am,Be as an,ws as ao,Ts as ap,Is as aq,xs as ar,qo as as,wo as at,bo as au,jo as av,xe as aw,Kt as ax,gn as ay,Co as az,$e as b,Ro as b0,zo as b1,Ws as b2,Io as b3,vr as b4,Zt as b5,to as b6,Qs as b7,Es as b8,Ao as b9,we as ba,js as bb,Te as c,Mt as d,Bs as e,Yn as f,er as g,qn as h,Go as i,xr as j,yt as k,y as l,Jn as m,yr as n,gs as o,no as p,je as q,vs as r,Mn as s,Mo as t,Or as u,ft as v,Bo as w,Lt as x,os as y,Pe as z};
