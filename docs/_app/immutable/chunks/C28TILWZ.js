import{y as k,H as n}from"./-Rap9rN9.js";import{f as l,s as u,u as c}from"./-1lFHQHv.js";import{i as v}from"./KzTQErDR.js";async function S(e,t,r){const i=l(e),a=t.toJSON();t.validationSet&&(a.validationSet=JSON.stringify(t.validationSet));const d={...a,returnEdits:!0,f:"json"},o=c({...i.query,...d}),s=u(o,{...r,method:"post"}),p=`${i.path}/validateNetworkTopology`,{data:f}=await n(p,s);return v.fromJSON(w(f))}async function F(e,t,r){if(!t.gdbVersion)throw new k("submit-validate-network-topology-job:missing-gdb-version","version is missing");const i=l(e),a=t.toJSON();t.validationSet&&(a.validationSet=JSON.stringify(t.validationSet));const d=u(i.query,{query:c({...a,returnEdits:!0,async:!0,f:"json"}),...r,method:"post"}),o=`${i.path}/validateNetworkTopology`,{data:s}=await n(o,d);return s?s.statusUrl:null}function w(e){return e.serviceEdits&&(e.serviceEdits=e.serviceEdits.map((t=>(t.editedFeatures.spatialReference&&(t.editedFeatures.spatialReference={wkid:t.editedFeatures.spatialReference.wkid,wkt:t.editedFeatures.spatialReference.wkt,wkt2:t.editedFeatures.spatialReference.wkt2,latestWkid:t.editedFeatures.spatialReference.latestWkid,latestVcsWkid:t.editedFeatures.spatialReference.latestVcsWkid,vcsWkid:t.editedFeatures.spatialReference.vcsWkid}),t={layerId:t.id,editedFeatures:t.editedFeatures})))),e}export{w as handleValidateNetworkTopologyResult,F as submitValidateNetworkTopologyJob,S as validateNetworkTopology};
