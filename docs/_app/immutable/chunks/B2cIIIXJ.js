import{i as v,B as N,b as A,a as E,c as T,t as w,d as I,e as R,A as l,f,g as h,h as d,E as K,H as O}from"./p_qY5EvW.js";import{aG as C,av as W,ar as B,v as z}from"./l2HDBFeU.js";function r(e){let t=C(W(e));return{[N]:!0,[v]:!0,get current(){return z(t)},set current(n){B(t,n,!0)}}}r.from=A;r.with=E;r.flatten=T;r.readonly=w;r.isBox=I;r.isWritableBox=R;function F(e){return window.getComputedStyle(e).getPropertyValue("direction")}function P(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?h:f,vertical:d}[t]}function H(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?f:h,vertical:l}[t]}function D(e="ltr",t="horizontal"){return["ltr","rtl"].includes(e)||(e="ltr"),["horizontal","vertical"].includes(t)||(t="horizontal"),{nextKey:P(e,t),prevKey:H(e,t)}}const G=typeof document<"u",V=M();function M(){return G&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function L(e){return e instanceof HTMLElement}function k(e){return e instanceof Element}function $(e){return e instanceof Element||e instanceof SVGElement}function U(e){return e!==null}function j(e){return e instanceof HTMLInputElement&&"select"in e}class J{#t;#e=r(null);constructor(t){this.#t=t}getCandidateNodes(){return this.#t.rootNode.current?this.#t.candidateSelector?Array.from(this.#t.rootNode.current.querySelectorAll(this.#t.candidateSelector)):this.#t.candidateAttr?Array.from(this.#t.rootNode.current.querySelectorAll(`[${this.#t.candidateAttr}]:not([data-disabled])`)):[]:[]}focusFirstCandidate(){const t=this.getCandidateNodes();t.length&&t[0]?.focus()}handleKeydown(t,n,c=!1){const g=this.#t.rootNode.current;if(!g||!t)return;const o=this.getCandidateNodes();if(!o.length)return;const a=o.indexOf(t),p=F(g),{nextKey:y,prevKey:m}=D(p,this.#t.orientation.current),x=this.#t.loop.current,u={[y]:a+1,[m]:a-1,[O]:0,[K]:o.length-1};if(c){const b=y===d?f:d,S=m===l?h:l;u[b]=a+1,u[S]=a-1}let i=u[n.key];if(i===void 0)return;n.preventDefault(),i<0&&x?i=o.length-1:i===o.length&&x&&(i=0);const s=o[i];if(s)return s.focus(),this.#e.current=s.id,this.#t.onCandidateFocus?.(s),s}getTabIndex(t){const n=this.getCandidateNodes(),c=this.#e.current!==null;return t&&!c&&n[0]===t?(this.#e.current=t.id,0):t?.id===this.#e.current?0:-1}setCurrentTabStopId(t){this.#e.current=t}focusCurrentTabStop(){const t=this.#e.current;if(!t)return;const n=this.#t.rootNode.current?.querySelector(`#${t}`);!n||!L(n)||n.focus()}}export{J as R,k as a,j as b,L as c,V as d,U as e,$ as f,G as i};
