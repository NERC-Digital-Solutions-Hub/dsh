import{H as h}from"./BUXna_JK.js";import{h as m}from"./waHvktcX.js";import{e as f}from"./20z1kPdE.js";import{c as y,f as b}from"./VMSlSy0z.js";class ${constructor(e,s,r){this.assetName=e,this.assetMimeType=s,this.parts=r}equals(e){return this===e||this.assetName===e.assetName&&this.assetMimeType===e.assetMimeType&&m(this.parts,e.parts,((s,r)=>s.equals(r)))}isOnService(e){return this.parts.every((s=>s.isOnService(e)))}makeHash(){let e="";for(const s of this.parts)e+=s.partHash;return e}async toBlob(e){const{parts:s}=this;if(s.length===1)return s[0].toBlob(e);const r=await Promise.all(s.map((i=>i.toBlob(e))));return f(e),new Blob(r)}}class w{constructor(e,s){this.partUrl=e,this.partHash=s}equals(e){return this===e||this.partUrl===e.partUrl&&this.partHash===e.partHash}isOnService(e){return this.partUrl.startsWith(`${e.path}/assets/`)}async toBlob(e){const{data:s}=await h(this.partUrl,{responseType:"blob"});return f(e),s}}function B(t){return v(t?.source)}const u=/^(model\/gltf\+json)|(model\/gltf-binary)$/,l=/\.(gltf|glb)/i;function v(t){switch(t?.type){case"client":return Array.isArray(t.files)?t.files.some(n):n(t.files);case"service":return t.assets.some(n);case"loadable":return!0;default:return!1}}function n(t){if(t instanceof File){const{type:e,name:s}=t;return u.test(e)||l.test(s)}return u.test(t.assetMimeType)||l.test(t.assetName)}function M(t,e){if(!t)return!1;const{source:s}=t;return g(s,e)}function U(t,e){if(t===e)return!0;const{source:s}=t,{source:r}=e;if(s===r)return!0;if(s.type==="service"&&r.type==="service"){if(s.assets.length!==r.assets.length)return!1;const i=(a,c)=>a.assetName<c.assetName?-1:a.assetName>c.assetName?1:0,o=[...s.assets].sort(i),p=[...r.assets].sort(i);for(let a=0;a<o.length;++a)if(!o[a].equals(p[a]))return!1;return!0}return!1}function g(t,e){return t.type==="service"&&t.assets.every((s=>s.isOnService(e)))}function q(t,e){return t instanceof File?y(t,e):b(t.assetMimeType,t.assetName,e)}function A(t){switch(t.type){case"client":return Array.isArray(t.files)?t.files:[t.files];case"service":return t.assets;case"loadable":return}}function O(t){return!!t.original}export{A as b,M as f,$ as i,U as m,w as n,B as o,O as v,q as y};
