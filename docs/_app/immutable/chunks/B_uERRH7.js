import{g as h,r as s,m as l,a as u}from"./BoGhUpgK.js";import{H as w}from"./f3N8RNee.js";import{V as N}from"./B5lVMRid.js";import{l as d,r as R}from"./Bz8ODP7-.js";import{I as J}from"./CzvYEThE.js";import{a as O}from"./BO0zSyDw.js";import"./k6TpQ-vv.js";import{v as y}from"./QnN3udRX.js";import{P as g}from"./C8GVJd0n.js";import{L as v,s as x}from"./CHGTeQb_.js";var m;let i=m=class extends d{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,r,o,t){if(t.layer?.spatialReference&&!t.layer.spatialReference.equals(this.geometry.spatialReference)){if(!v(e.spatialReference,t.layer.spatialReference))return void(t?.messages&&t.messages.push(new h("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})));const n=new g;x(e,n,t.layer.spatialReference),r[o]=n.toJSON(t)}else r[o]=e.toJSON(t);delete r[o].spatialReference}clone(){return new m({geometry:O(this.geometry),type:this.type})}};s([l({type:g}),y()],i.prototype,"geometry",void 0),s([R(["web-scene","portal-item"],"geometry")],i.prototype,"writeGeometry",null),s([l({type:["clip","mask","replace"],nonNullable:!0}),y()],i.prototype,"type",void 0),i=m=s([u("esri.layers.support.SceneModification")],i);var a;let p=a=class extends d.JSONSupportMixin(N.ofType(i)){constructor(e){super(e),this.url=null}clone(){return new a({url:this.url,items:this.items.map((e=>e.clone()))})}toJSON(e){return this.toArray().map((r=>r.toJSON(e))).filter((r=>!!r.geometry))}static fromJSON(e,r){const o=new a;for(const t of e)o.add(i.fromJSON(t,r));return o}static async fromUrl(e,r,o){const t={url:J(e),origin:"service"},n=await w(e,{responseType:"json",signal:o?.signal}),S=r.toJSON(),c=[];for(const f of n.data)c.push(i.fromJSON({...f,geometry:{...f.geometry,spatialReference:S}},t));return new a({url:e,items:c})}};s([l({type:String})],p.prototype,"url",void 0),p=a=s([u("esri.layers.support.SceneModifications")],p);export{p as n};
