import{n as h,b as S,_ as a,m as l,a as u,g as w}from"./Aa_nm3Tf.js";import{H as J}from"./BJhaCM43.js";import{O as N}from"./BAwhstd8.js";import{I as O}from"./DzPnzJx5.js";import{a as R}from"./BFGjv385.js";import"./DSdBzmdi.js";import{r as v}from"./LLVnLkr1.js";import{j as y}from"./DTbXJ_Dm.js";import{P as d}from"./CttKhsFI.js";import{J as b,a as x}from"./DkGd4JTu.js";var m;let o=m=class extends h{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,r,i,t){if(t.layer?.spatialReference&&!t.layer.spatialReference.equals(this.geometry.spatialReference)){if(!b(e.spatialReference,t.layer.spatialReference))return void(t?.messages&&t.messages.push(new S("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})));const n=new d;x(e,n,t.layer.spatialReference),r[i]=n.toJSON(t)}else r[i]=e.toJSON(t)}clone(){return new m({geometry:R(this.geometry),type:this.type})}};a([l({type:d}),y()],o.prototype,"geometry",void 0),a([v(["web-scene","portal-item"],"geometry")],o.prototype,"writeGeometry",null),a([l({type:["clip","mask","replace"],nonNullable:!0}),y()],o.prototype,"type",void 0),o=m=a([u("esri.layers.support.SceneModification")],o);var s;let p=s=class extends w(N.ofType(o)){constructor(e){super(e),this.url=null}clone(){return new s({url:this.url,items:this.items.map(e=>e.clone())})}toJSON(e){return this.toArray().map(r=>r.toJSON(e)).filter(r=>!!r.geometry)}static fromJSON(e,r){const i=new s;for(const t of e)i.add(o.fromJSON(t,r));return i}static async fromUrl(e,r,i){const t={url:O(e),origin:"service"},n=await J(e,{responseType:"json",signal:i?.signal}),g=r.toJSON(),c=[];for(const f of n.data)c.push(o.fromJSON({...f,geometry:{spatialReference:g,...f.geometry}},t));return new s({url:e,items:c})}};a([l({type:String})],p.prototype,"url",void 0),p=s=a([u("esri.layers.support.SceneModifications")],p);export{p as n};
