const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./f-FxpFa8.js","./CaNW5Bx0.js","./CEBETtrS.js","./D7IjRheC.js","./BUsxo-Ec.js","./BW0zoJTm.js","./PPVm8Dsz.js","./D0nkGZIM.js","./y1GB1Svy.js","./EmFT8XhJ.js","./CUR0of9e.js","./fk_randw.js","./BSxrG6gF.js","./BVFIxAn9.js","./DS2ZxNQA.js","./AlyPEkJM.js","./PJHcqbvL.js","./bnayRBMH.js","./BYduSOTS.js","./CITwehWS.js"])))=>i.map(i=>d[i]);
import{_ as i,m as a,a as w,e as H,at as M,I as B,H as J,G as L,f as q,n as z,b as T,r as _,d as G,l as R}from"./BW0zoJTm.js";import{z as O,f as b,H as A,s as F}from"./BUsxo-Ec.js";import{s as W,O as K}from"./CVQPxYbx.js";import{I as Q}from"./D0nkGZIM.js";import{e as h,I,O as C,D as k,g as Z,l as X,w as Y}from"./DwerzRSF.js";import{_ as N}from"./PPVm8Dsz.js";import{i as U,s as E}from"./CaNW5Bx0.js";import{b as tt}from"./y1GB1Svy.js";import{s as et}from"./CEBETtrS.js";function _t(t,e,r){return L(t.map((n,s)=>e.apply(r,[n,s])))}async function Et(t,e,r){return(await L(t.map((n,s)=>e.apply(r,[n,s])))).map(n=>n.value)}function v(t){return{ok:!0,value:t}}function $(t){return{ok:!1,error:t}}function rt(t){return t!=null&&t.ok===!0?t.value:null}function nt(t){return t!=null&&t.ok===!1?t.error:null}async function Dt(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return v(await t)}catch(e){return $(e)}}async function St(t){try{return v(await t)}catch(e){return q(e),$(e)}}function jt(t,e){return new d(t,e)}let d=class extends H{get value(){return rt(this._result)}get error(){return nt(this._result)}get finished(){return this._result!=null}constructor(t,e){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=M(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(n=>{this._result=v(n),this._cleanup()},n=>{this._result=$(n),this._cleanup()}),this._abortHandle=B(e,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=J(this._abortHandle),this._abortController=null}};i([a()],d.prototype,"value",null),i([a()],d.prototype,"error",null),i([a()],d.prototype,"finished",null),i([a()],d.prototype,"promise",void 0),i([a()],d.prototype,"_result",void 0),d=i([w("esri.core.asyncUtils.ReactiveTask")],d);async function st(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:r}=await N(async()=>{const{fromItem:n}=await import("./f-FxpFa8.js");return{fromItem:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]),import.meta.url);try{return await r(e)}catch(n){const s=e?.portalItem,o=s?.id||"unset",u=s?.portal?.url||et.portalUrl;throw U.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+u+"', id: '"+o+"')",n),n}}const D={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function g(t,e,r,n=h){const s=new I(C(n)),o=k.fromJSDate(t,{zone:s}),u=r==="decades"||r==="centuries"?"year":x(r);return r==="decades"&&(e*=10),r==="centuries"&&(e*=100),o.plus({[u]:e}).toJSDate()}function Lt(t,e,r="milliseconds"){const n=t.getTime(),s=it(e,r,"milliseconds");return new Date(n+s)}function S(t,e,r=h){const n=new I(C(r)),s=k.fromJSDate(t,{zone:n});if(e==="decades"||e==="centuries"){const u=s.startOf("year"),{year:c}=u,V=c-c%(e==="decades"?10:100);return u.set({year:V}).toJSDate()}const o=x(e);return s.startOf(o).toJSDate()}function it(t,e,r){return t===0?0:t*D[e]/D[r]}function Ot(t,e){return t&&e?t.intersection(e):t||e}function x(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var y,f;let p=(f=class extends z{static get allTime(){return j}static get empty(){return at}static fromArray(e){return new y({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,r){return r.end!=null?new Date(r.end):null}writeEnd(e,r){r.end=e?.getTime()??null}get isAllTime(){return this.equals(y.allTime)}get isEmpty(){return this.equals(y.empty)}readStart(e,r){return r.start!=null?new Date(r.start):null}writeStart(e,r){r.start=e?.getTime()??null}clone(){return new y({end:this.end,start:this.start})}equals(e){if(!e)return!1;const r=this.start?.getTime()??this.start,n=this.end?.getTime()??this.end,s=e.start?.getTime()??e.start,o=e.end?.getTime()??e.end;return r===s&&n===o}expandTo(e,r=h){if(this.isEmpty||this.isAllTime)return this.clone();let n=this.start;n&&(n=S(n,e,r));let s=this.end;if(s){const o=S(s,e,r);s=s.getTime()===o.getTime()?o:g(o,1,e,r)}return new y({start:n,end:s})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return y.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const r=this.start?.getTime()??-1/0,n=this.end?.getTime()??1/0,s=e.start?.getTime()??-1/0,o=e.end?.getTime()??1/0;let u,c;return s>=r&&s<=n?u=s:r>=s&&r<=o&&(u=r),n>=s&&n<=o?c=n:o>=r&&o<=n&&(c=o),u==null||c==null||isNaN(u)||isNaN(c)?y.empty:new y({start:u===-1/0?null:new Date(u),end:c===1/0?null:new Date(c)})}offset(e,r,n=h){if(this.isEmpty||this.isAllTime)return this.clone();const s=new y,{start:o,end:u}=this;return o!=null&&(s.start=g(o,e,r,n)),u!=null&&(s.end=g(u,e,r,n)),s}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return j.clone();const r=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,n=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new y({start:r,end:n})}},y=f,f);i([a({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),i([T("end")],p.prototype,"readEnd",null),i([_("end")],p.prototype,"writeEnd",null),i([a({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),i([a({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),i([a({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),i([T("start")],p.prototype,"readStart",null),i([_("start")],p.prototype,"writeStart",null),p=y=i([w("esri.time.TimeExtent")],p);const j=new p,at=new p({start:void 0,end:void 0});let ot=0,l=class extends Z(W(tt)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new O(-180,-90,180,90,b.WGS84),this.id=Date.now().toString(16)+"-layer-"+ot++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=b.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const e=typeof t=="string"?{url:t}:t;return(await N(async()=>{const{fromUrl:r}=await import("./CITwehWS.js");return{fromUrl:r}},__vite__mapDeps([19,6,1,2,7,4,5,3,8,9,10,12]),import.meta.url)).fromUrl(e)}static fromPortalItem(t){return st(t)}initialize(){this.when().catch(t=>{G(t)||U.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const{parent:t}=this;t&&(this.parent=null,t.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:t}=this;t&&(t.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Q(this.url)}createLayerView(t,e){return Promise.reject(new E("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await A(t,{query:{f:"json"},responseType:"json"})).data;throw new E("layer:no-attribution-data","Layer does not have attribution data")}};i([a({type:String})],l.prototype,"attributionDataUrl",void 0),i([a({readOnly:!0})],l.prototype,"effectiveVisible",null),i([a({type:O})],l.prototype,"fullExtent",void 0),i([a({readOnly:!0})],l.prototype,"hasAttributionData",null),i([a({type:String,clonable:!1})],l.prototype,"id",void 0),i([a({type:Boolean,nonNullable:!0})],l.prototype,"legendEnabled",void 0),i([a({type:["show","hide","hide-children"]})],l.prototype,"listMode",void 0),i([a({type:Number,range:{min:0,max:1},nonNullable:!0})],l.prototype,"opacity",void 0),i([a({clonable:!1})],l.prototype,"parent",void 0),i([a({readOnly:!0})],l.prototype,"parsedUrl",null),i([a({type:Boolean,readOnly:!0})],l.prototype,"persistenceEnabled",void 0),i([a({type:Boolean})],l.prototype,"popupEnabled",void 0),i([a({type:Boolean})],l.prototype,"attributionVisible",void 0),i([a({type:b})],l.prototype,"spatialReference",void 0),i([a({type:String})],l.prototype,"title",void 0),i([a({readOnly:!0,json:{read:!1}})],l.prototype,"type",void 0),i([a()],l.prototype,"url",void 0),i([a({type:p})],l.prototype,"visibilityTimeExtent",void 0),i([a({type:Boolean,nonNullable:!0})],l.prototype,"visible",void 0),l=i([w("esri.layers.Layer")],l);const At=Object.freeze(Object.defineProperty({__proto__:null,get default(){return l}},Symbol.toStringTag,{value:"Module"})),m=new WeakMap;function P(t){return!t.destroyed&&(m.has(t)||t.addHandles([X(()=>{const{parent:e}=t;return!!(e&&e instanceof l)&&(e.type==="catalog-dynamic-group"||P(e))},e=>m.set(t,e),Y),R(()=>m.delete(t))]),m.get(t))}function It(t,e){const r=t.parent,{layer:n}=t;if(n?.type!=="map-image"||!n.sourceJSON||!r)return!1;const s=n.sourceJSON.layers;if(!s)return!1;const o=s.find(c=>t.id===c.id),u=e==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return o?.type===u&&s.find(c=>c.id===r.id)?.type==="Catalog Layer"}function lt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function Ct(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function kt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function Nt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function Ut(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function xt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Pt(t){return t?.type==="subtype-sublayer"}const Vt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function Ht(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function Mt(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function Bt(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function Jt(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function ut(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function qt(t){return lt(t)&&ut(t)}async function zt(t,e){const r=F?.findServerInfo(t);if(r?.currentVersion!=null)return r.owningSystemUrl||null;const n=t.toLowerCase().indexOf("/rest/services");if(n===-1)return null;const s=`${t.slice(0,n)}/rest/info`,o=e!=null?e.signal:null,{data:u}=await A(s,{query:{f:"json"},responseType:"json",signal:o});return u?.owningSystemUrl||null}function ct(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Gt(t){return ct(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function pt(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function Rt(t){return!!pt(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function Ft(t){const e=new K;for(const r of t.allLayers.concat(t.allTables))r.type==="csv"||P(r)||("charts"in r&&e.push(r),r.type==="subtype-group"&&e.push(...r.sublayers));return e}function yt(t,e){return null}function Wt(t){return null}function dt(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function Kt(t,e){!e||!dt(t)||yt(t.url)}export{Rt as $,ct as D,Gt as G,Ft as H,qt as I,yt as K,Ht as L,Bt as M,zt as N,Jt as O,Wt as Q,dt as R,Mt as S,Kt as W,Dt as _,_t as a,l as b,xt as c,jt as d,lt as e,it as f,St as g,Pt as h,Ut as i,P as j,It as k,Ot as l,p as m,Lt as n,g as o,Et as p,Nt as q,D as r,Ct as s,kt as t,At as u,Vt as w};
