import{E as p,r as d,a as _,M as c,Q as g,c as v,f}from"./Bcg-2HKw.js";import"./w-2V2ENZ.js";let o;const R=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,h=globalThis.document?.documentElement;function E(){const s=h?.getAttribute("lang"),e=globalThis.navigator?.language;return R??s??e??"en"}function b(){return o===void 0&&(o=E()),o}const D=/^(?<language>[a-z]{2,3})(?:-[a-z]{3})?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function $(s=b()){return D.exec(s)?.groups}const n=[];function x(s){return n.push(s),p((()=>{n.splice(n.indexOf(s),1)}))}const a=[];function O(s){return a.push(s),p((()=>a.splice(a.indexOf(s),1)))}function m(){const s=E();o!==s&&([...a].forEach((e=>e(s))),o=s,[...n].forEach((e=>e(s))))}globalThis.addEventListener?.("languagechange",m),h&&new MutationObserver((()=>{m()})).observe(h,{attributeFilter:["lang"]});var r;(function(s){s[s.PENDING=0]="PENDING",s[s.RESOLVED=1]="RESOLVED",s[s.REJECTED=2]="REJECTED"})(r||(r={}));class T{constructor(){this._resolver=c(),this._status=r.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=r.RESOLVED,this._cleanUp()}),(()=>{this._status=r.REJECTED,this._cleanUp()})),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===r.RESOLVED}isRejected(){return this._status===r.REJECTED}isFulfilled(){return this._status!==r.PENDING}abort(){this._resolver.reject(g())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=c(),i=[...this._resolvingPromises,e.promise],t=this._allPromise=Promise.all(i);t.then((()=>{this.isFulfilled()||this._allPromise!==t||this._resolver.resolve()}),(u=>{this.isFulfilled()||this._allPromise!==t||v(u)||this._resolver.reject(u)})),e.resolve()}}const P=s=>{let e=class extends s{constructor(...i){super(...i),this._promiseProps=new T,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,t){return this._promiseProps.promise.then((()=>this)).then(i,t)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=d([_("esri.core.Promise")],e),e};let l=class extends P(f){};l=d([_("esri.core.Promise")],l),(function(s){s.EsriPromiseMixin=P})(l||(l={}));export{O as b,x as d,b as i,l as m,$ as s};
