const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Dd2k3djl.js","./2lNp6ocP.js","./Vj4mvAVU.js","./BzZgUCJc.js","./C9_KfL0q.js","./PPVm8Dsz.js","./COT3swUQ.js","./CzOxgXA2.js","./BfdVyFLl.js","./DtwKm7-k.js","./CCpIbVD-.js","./BjBhzReJ.js","./C8hxyIL3.js","./Dk327Tp9.js","./ClIohtAG.js","./C_Nw28A1.js","./sk86Thi9.js","./DM8BboCx.js","./BLib0ZeX.js","./CzWAt4g0.js","./ftSj4mLm.js","./bnayRBMH.js","./DbYkBGj4.js","./gZG02UZC.js","./C_6u-7oR.js","./CG8mvJXA.js","./GQvgDxtD.js","./BUGOoQeR.js","./4IwU-EsI.js","./C_47UTfN.js","./DPdDABkP.js","./ClciE7fF.js","./C0wm8_Yw.js","./C0efyx_Z.js","./BUaeryt7.js","./CciY6SWq.js","./BqpSWifx.js","./CO_HZMKj.js","./CVUrXWRd.js","./D9PQ9y3z.js","./Du-3RRzS.js","./aAAx9MQ4.js","./DVnaEhrL.js","./aQ5IuZRd.js","./D9xQIC-X.js","./CvV1TOOL.js","./CFBR26KZ.js","./CLYjPj8f.js","./B87vTgcy.js","./DMyEwpZ7.js","./NYdGXCME.js","./Dt_ZWlVQ.js","./DJC_YILC.js","./YLUGga6J.js","./CeJsCK_r.js","./BWlX2uQd.js","./BKAEQAE4.js","./aGOP0OYa.js","./Br3UPIyi.js","./Ce7ly0LS.js","./DB_HFzqz.js","./BRC4afRz.js","./BR8EEvDc.js","./t_tu4wIv.js","./NuXSk11s.js","./EuPM2Bn5.js","./CJtY45Hw.js","./mN8laSOl.js","./CkVPG3BZ.js","./DcmXlxzz.js","./27f2e1RQ.js","./CHSyNxB1.js","./TZ9RRHSP.js","./CAvCwia8.js","./D9LglmIz.js","./CWaspPwN.js","./bPZ7UBLU.js","./CMhXfT0w.js","./Dt7gZJTS.js","./CHHlpJJw.js","./KGFHE0pC.js","./C36214zk.js","./CCtesVXp.js","./DqnhNlzn.js"])))=>i.map(i=>d[i]);
import{_ as G}from"./PPVm8Dsz.js";import{aZ as Vt,_ as i,a as c,g as Re,a_ as bs,a$ as ws,q as Le,J as Ti,h as mt,b0 as Is,aC as Ss,m as n,n as I,aK as Fi,b as f,r as g,az as Mr,b1 as Lr,w as xs,$ as Ts,M as $i,o as fr,a6 as Ei,aX as Fs,ai as $s,aY as Es,u as ji,B as js,z as _s,j as fe,i as Os,L as _i,Z as Ms,c as Ls,a3 as Cs}from"./Vj4mvAVU.js";import{bA as As,bB as Rs,aH as Ds,aI as Oi,bC as Mi,aN as Cr,at as mr,au as Ps,aA as Ar,_ as Rr,N as Xe,bD as Ns,G as ks,aw as Li,bE as Gs,A as qs,bF as gr,bG as Vs,bH as Ci,bu as Ai,bI as Ri,F as Us,n as Bs,B as zs,bJ as Qs,bK as Hs,by as Ws,bL as Js,aC as Ft,z as Zs,av as Dr,P as Ks,a1 as Xs,an as Ys}from"./gZG02UZC.js";import{O as Ye,ar as Di,T as eo,z as ct,p as vr,aA as to,H as br,az as ro,f as yt,b8 as io,b7 as so,ba as oo,bb as no,e as Pi,b as it,ai as ao,aj as lo}from"./2lNp6ocP.js";import{l as x,r as Pr,n as uo}from"./C_6u-7oR.js";import{O as X,o as po,i as co,a as yo,U as Ni}from"./C8hxyIL3.js";import{s as $,i as B}from"./C9_KfL0q.js";import{a as v,b as et,e as oe,s as ho,N as fo}from"./BzZgUCJc.js";import{a as S,c as mo,p as go,t as vo}from"./SipYeE6d.js";import{v as wr,w as bo,e as wo,i as ht,g as Io,m as So,x as xo,b as To,R as Fo}from"./C_47UTfN.js";import{s as Ir,o as $o}from"./Y76Vt63c.js";import{R as Nr,m as Ke,N as Eo,_ as jo,B as _o,d as Oo,b as Mo}from"./BjBhzReJ.js";import{d as Lo,a as Co,M as kr,e as Ao}from"./Dk327Tp9.js";import{P as Ro}from"./ftSj4mLm.js";import{t as Gr,j as Do,i as Po,k as Ut,X as qr,m as No,s as $t,M as ki,w as Gi,z as ko,b as Sr,A as gt,n as qi,H as Go,Y as qo,F as Vo,P as Uo,q as Bo,S as zo,R as Qo,v as Ho,O as Wo,o as Jo,N as Zo,d as Ko,L as Xo,E as Yo,D as en,T as tn,C as rn,a as sn,B as on,l as Vr}from"./t_tu4wIv.js";import{g as Vi}from"./CMhXfT0w.js";import{p as nn}from"./CVIfIBiS.js";import{n as an,v as ln,x as Ui}from"./4IwU-EsI.js";import{I as un,V as Ur,F as Et,L as pn,p as dn,Z as cn,b as yn,d as hn,K as Br}from"./COT3swUQ.js";import{s as fn,E as mn,f as gn,t as vn}from"./BLib0ZeX.js";import{o as de}from"./GQvgDxtD.js";import{r as Bt}from"./CG8mvJXA.js";import{o as ft,m as vt,u as bn}from"./DW1fCRVi.js";import{p as Ce}from"./mN8laSOl.js";import{f as wn,V as In,q as jt}from"./CkVPG3BZ.js";import _t from"./sk86Thi9.js";import{S as zr,u as Sn}from"./YLUGga6J.js";import{Z as xn}from"./BjbIDE_h.js";let Tn=class Bi{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(Vt),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const r=new Bi,s=this._originStores[0];s&&s.forEach((o,a)=>{r.set(a,v(o),0)});for(let o=2;o<Vt;o++){const a=this._originStores[o];a&&a.forEach((l,u)=>{e&&e.has(u)||r.set(u,v(l),o)})}return r}get(e,r){const s=r===void 0?this._values:this._originStores[r];return s?s.get(e):void 0}keys(e){const r=e==null?this._values:this._originStores[e];return r?[...r.keys()]:[]}set(e,r,s=7){let o=this._originStores[s];if(o||(o=new Map,this._originStores[s]=o),o.set(e,r),!this._values.has(e)||this._propertyOriginMap.get(e)<=s){const a=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,s),a!==r}return!1}delete(e,r=7){const s=this._originStores[r];if(!s)return;const o=s.get(e);if(s.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===r){this._values.delete(e);for(let a=r-1;a>=0;a--){const l=this._originStores[a];if(l&&l.has(e)){this._values.set(e,l.get(e)),this._propertyOriginMap.set(e,a);break}}}return o}has(e,r){const s=r===void 0?this._values:this._originStores[r];return!!s&&s.has(e)}revert(e,r){for(;r>0&&!this.has(e,r);)--r;const s=this._originStores[r],o=s?.get(e),a=this._values.get(e);return this._values.set(e,o),this._propertyOriginMap.set(e,r),a!==o}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,r){return this.has(e,r)&&this.originOf(e)===r}isBelowOrigin(e,r){return!this.has(e)||this.originOf(e)<r}forEach(e){this._values.forEach(e)}};const zi=t=>{const e=t;let r=class extends e{constructor(...s){super(...s);const o=Re(this),a=o.store,l=new Tn;o.store=l,bs(o,a,l)}read(s,o){ws(this,s,o)}getAtOrigin(s,o){const a=Ot(this),l=Le(o);if(typeof s=="string")return a.get(s,l);const u={};return s.forEach(p=>{u[p]=a.get(p,l)}),u}originOf(s){return Ti(this.originIdOf(s))}originIdOf(s){return Ot(this).originOf(s)}revert(s,o){const a=Ot(this),l=Le(o),u=Re(this);let p;p=typeof s=="string"?s==="*"?a.keys(l):[s]:s,p.forEach(m=>{u.invalidate(m),a.revert(m,l),u.commit(m)})}};return r=i([c("esri.core.ReadOnlyMultiOriginJSONSupport")],r),r};function Ot(t){return Re(t).store}zi(mt);const Fn=t=>{const e=t;let r=class extends e{constructor(...s){super(...s)}clear(s,o="user"){Re(this).clearOrigin(s,Le(o))}write(s,o){return Is(this,s=s||{},o),s}setAtOrigin(s,o,a){Re(this).setAtOrigin(s,o,Le(a))}removeOrigin(s){const o=Qr(this),a=Le(s),l=o.keys(a);for(const u of l)o.originOf(u)===a&&o.set(u,o.get(u,a),7)}updateOrigin(s,o){const a=Qr(this),l=Le(o),u=Ss(this,s);for(let p=l+1;p<Vt;++p)a.delete(s,p);a.set(s,u,l)}toJSON(s){return this.write({},s)}};return r=i([c("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],r),r.prototype.toJSON.isDefaultToJSON=!0,r};function Qr(t){return Re(t).store}const Qi=t=>{const e=Fn(zi(t));let r=class extends e{};return r=i([c("esri.core.MultiOriginJSONSupport")],r),r},$u=Qi(mt);var zt;let me=zt=class extends I{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new zt({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};i([n({type:String,json:{write:!0}})],me.prototype,"expression",void 0),i([n({type:String,json:{write:!0}})],me.prototype,"name",void 0),i([n({type:["boolean","date","number","string"],json:{write:!0}})],me.prototype,"returnType",void 0),i([n({type:String,json:{write:!0}})],me.prototype,"title",void 0),me=zt=i([c("esri.form.ExpressionInfo")],me);const $n=me;let R=class extends I{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};i([n({type:String,json:{write:!0}})],R.prototype,"description",void 0),i([n({type:String,json:{write:!0}})],R.prototype,"label",void 0),i([n()],R.prototype,"type",void 0),i([n({type:String,json:{write:!0}})],R.prototype,"visibilityExpression",void 0),R=i([c("esri.form.elements.Element")],R);let at=class extends x(I){constructor(e){super(e),this.type=null}};i([n()],at.prototype,"type",void 0),at=i([c("esri.form.elements.inputs.attachments.Input")],at);const ye=at,bt=["any","capture","upload"];let be=class extends ye{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};i([n({type:["audio"],readOnly:!0,json:{write:!0}})],be.prototype,"type",void 0),i([n({type:bt,json:{write:!0}})],be.prototype,"inputMethod",void 0),i([n({type:Number,json:{write:!0}})],be.prototype,"maxDuration",void 0),be=i([c("esri.form.elements.inputs.attachments.AudioInput")],be);const Hr=be;let ke=class extends ye{constructor(e){super(e),this.type="document",this.maxFileSize=null}};i([n({type:["document"],readOnly:!0,json:{write:!0}})],ke.prototype,"type",void 0),i([n({type:Number,json:{write:!0}})],ke.prototype,"maxFileSize",void 0),ke=i([c("esri.form.elements.inputs.attachments.DocumentInput")],ke);const Wr=ke;let we=class extends ye{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};i([n({type:["image"],readOnly:!0,json:{write:!0}})],we.prototype,"type",void 0),i([n({type:bt,json:{write:!0}})],we.prototype,"inputMethod",void 0),i([n({type:Number,json:{write:!0}})],we.prototype,"maxImageSize",void 0),we=i([c("esri.form.elements.inputs.attachments.ImageInput")],we);const Jr=we;let Ge=class extends ye{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};i([n({type:["signature"],readOnly:!0,json:{write:!0}})],Ge.prototype,"type",void 0),i([n({type:bt,json:{write:!0}})],Ge.prototype,"inputMethod",void 0),Ge=i([c("esri.form.elements.inputs.attachments.SignatureInput")],Ge);const Zr=Ge;let Ie=class extends ye{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};i([n({type:["video"],readOnly:!0,json:{write:!0}})],Ie.prototype,"type",void 0),i([n({type:bt,json:{write:!0}})],Ie.prototype,"inputMethod",void 0),i([n({type:Number,json:{write:!0}})],Ie.prototype,"maxDuration",void 0),Ie=i([c("esri.form.elements.inputs.attachments.VideoInput")],Ie);const Kr=Ie;function Hi(t){return{nestableTypes:{base:ye,key:"type",typeMap:{audio:Hr,document:Wr,image:Jr,signature:Zr,video:Kr}},allTypes:{base:ye,key:"type",typeMap:{attachment:t,audio:Hr,document:Wr,image:Jr,signature:Zr,video:Kr}}}}function En(t,e,r){return t?t.map(s=>Fi(e.nestableTypes,s)):null}function jn(t,e,r){if(!t)return null;const s=e.nestableTypes.typeMap;return t.filter(o=>s[o.type]).map(o=>s[o.type].fromJSON(o))}function _n(t,e,r){if(!t)return null;const s=e.nestableTypes.typeMap;return t.filter(o=>s[o.type]).map(o=>o.toJSON())}let H=class extends ye{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return En(e,Mt)}readInputs(e,r){return jn(r.inputTypes,Mt)}writeInputs(e,r){r.inputTypes=_n(e,Mt)}};i([n({type:["attachment"],readOnly:!0,json:{write:!0}})],H.prototype,"type",void 0),i([n({type:["any","exact","exactOrNone"],json:{write:!0}})],H.prototype,"attachmentAssociationType",void 0),i([n({json:{write:{isRequired:!0}}})],H.prototype,"inputTypes",void 0),i([Ye("inputTypes")],H.prototype,"castInputs",null),i([f("inputTypes")],H.prototype,"readInputs",null),i([g("inputTypes")],H.prototype,"writeInputs",null),H=i([c("esri.form.elements.inputs.attachments.AttachmentInput")],H);const Mt=Hi(H),On=H;var Qt;const Mn=Hi(On);let D=Qt=class extends R{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new Qt({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};i([n({type:Boolean,json:{write:!0}})],D.prototype,"allowUserRename",void 0),i([n({type:String,json:{write:{isRequired:!0}}})],D.prototype,"attachmentKeyword",void 0),i([n({type:Boolean,json:{write:!0}})],D.prototype,"displayFilename",void 0),i([n({type:String,json:{write:!0}})],D.prototype,"editableExpression",void 0),i([n({type:String,json:{write:!0}})],D.prototype,"filenameExpression",void 0),i([n({types:Mn.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],D.prototype,"input",void 0),i([n({type:Number,json:{write:!0}})],D.prototype,"maxAttachmentCount",void 0),i([n({type:Number,json:{write:!0}})],D.prototype,"minAttachmentCount",void 0),i([n({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],D.prototype,"type",void 0),i([n({type:Boolean,json:{write:!0}})],D.prototype,"useOriginalFilename",void 0),D=Qt=i([c("esri.form.elements.AttachmentElement")],D);const Xr=D;let lt=class extends I{constructor(e){super(e),this.type=null}};i([n()],lt.prototype,"type",void 0),lt=i([c("esri.form.elements.inputs.Input")],lt);const ne=lt;let qe=class extends ne{constructor(e){super(e),this.maxLength=null,this.minLength=0}};i([n({type:Number,json:{write:!0}})],qe.prototype,"maxLength",void 0),i([n({type:Number,json:{write:!0}})],qe.prototype,"minLength",void 0),qe=i([c("esri.form.elements.inputs.TextInput")],qe);const xr=qe;var Ht;let ut=Ht=class extends xr{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new Ht({maxLength:this.maxLength,minLength:this.minLength})}};i([n({type:["barcode-scanner"],json:{read:!1,write:!0}})],ut.prototype,"type",void 0),ut=Ht=i([c("esri.form.elements.inputs.BarcodeScannerInput")],ut);const Ln=ut;var Wt;let Se=Wt=class extends ne{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Wt({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};i([n({type:String,json:{write:!0}})],Se.prototype,"noValueOptionLabel",void 0),i([n({type:Boolean,json:{write:!0}})],Se.prototype,"showNoValueOption",void 0),i([n({type:["combo-box"],json:{read:!1,write:!0}})],Se.prototype,"type",void 0),Se=Wt=i([c("esri.form.elements.inputs.ComboBoxInput")],Se);const Cn=Se;var Jt;function Yr(t){return t??null}function ei(t){return t??null}let Q=Jt=class extends ne{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return Yr(e.max)}writeMax(t,e){e.max=ei(t)}readMin(t,e){return Yr(e.min)}writeMin(t,e){e.min=ei(t)}clone(){return new Jt({max:this.max,min:this.min})}};i([n({type:String,json:{type:String,write:!0}})],Q.prototype,"max",void 0),i([f("max")],Q.prototype,"readMax",null),i([g("max")],Q.prototype,"writeMax",null),i([n({type:String,json:{type:String,write:!0}})],Q.prototype,"min",void 0),i([f("min")],Q.prototype,"readMin",null),i([g("min")],Q.prototype,"writeMin",null),i([n({type:["date-picker"],json:{read:!1,write:!0}})],Q.prototype,"type",void 0),Q=Jt=i([c("esri.form.elements.inputs.DatePickerInput")],Q);const An=Q;var Zt;function Lt(t){return t??null}function Ct(t){return t??null}let C=Zt=class extends ne{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return Lt(e.max)}writeMax(t,e){e.max=Ct(t)}readMin(t,e){return Lt(e.min)}writeMin(t,e){e.min=Ct(t)}readTimeResolution(t,e){return Lt(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=Ct(t)}clone(){return new Zt({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};i([n({type:Boolean,json:{write:!0}})],C.prototype,"includeTimeOffset",void 0),i([n({type:String,json:{type:String,write:!0}})],C.prototype,"max",void 0),i([f("max")],C.prototype,"readMax",null),i([g("max")],C.prototype,"writeMax",null),i([n({type:String,json:{type:String,write:!0}})],C.prototype,"min",void 0),i([f("min")],C.prototype,"readMin",null),i([g("min")],C.prototype,"writeMin",null),i([n({type:String,json:{type:String,write:!0}})],C.prototype,"timeResolution",void 0),i([f("timeResolution")],C.prototype,"readTimeResolution",null),i([g("timeResolution")],C.prototype,"writeTimeResolution",null),i([n({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],C.prototype,"type",void 0),C=Zt=i([c("esri.form.elements.inputs.DateTimeOffsetPickerInput")],C);const Rn=C;var Kt;function ti(t){return t!=null?new Date(t):null}function ri(t){return t?t.getTime():null}let V=Kt=class extends ne{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return ti(e.max)}writeMax(t,e){e.max=ri(t)}readMin(t,e){return ti(e.min)}writeMin(t,e){e.min=ri(t)}clone(){return new Kt({includeTime:this.includeTime,max:this.max,min:this.min})}};i([n({type:Boolean,json:{write:!0}})],V.prototype,"includeTime",void 0),i([n({type:Date,json:{type:Number,write:!0}})],V.prototype,"max",void 0),i([f("max")],V.prototype,"readMax",null),i([g("max")],V.prototype,"writeMax",null),i([n({type:Date,json:{type:Number,write:!0}})],V.prototype,"min",void 0),i([f("min")],V.prototype,"readMin",null),i([g("min")],V.prototype,"writeMin",null),i([n({type:["datetime-picker"],json:{read:!1,write:!0}})],V.prototype,"type",void 0),V=Kt=i([c("esri.form.elements.inputs.DateTimePickerInput")],V);const Dn=V;var Xt;let xe=Xt=class extends ne{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new Xt({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};i([n({type:String,json:{write:!0}})],xe.prototype,"noValueOptionLabel",void 0),i([n({type:Boolean,json:{write:!0}})],xe.prototype,"showNoValueOption",void 0),i([n({type:["radio-buttons"],json:{read:!1,write:!0}})],xe.prototype,"type",void 0),xe=Xt=i([c("esri.form.elements.inputs.RadioButtonsInput")],xe);const Pn=xe;var Yt;let Te=Yt=class extends ne{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Yt({offValue:this.offValue,onValue:this.onValue})}};i([n({type:[String,Number],json:{write:!0}})],Te.prototype,"offValue",void 0),i([n({type:[String,Number],json:{write:!0}})],Te.prototype,"onValue",void 0),i([n({type:["switch"],json:{read:!1,write:!0}})],Te.prototype,"type",void 0),Te=Yt=i([c("esri.form.elements.inputs.SwitchInput")],Te);const Nn=Te;var er;let pt=er=class extends xr{constructor(t){super(t),this.type="text-area"}clone(){return new er({maxLength:this.maxLength,minLength:this.minLength})}};i([n({type:["text-area"],json:{read:!1,write:!0}})],pt.prototype,"type",void 0),pt=er=i([c("esri.form.elements.inputs.TextAreaInput")],pt);const kn=pt;var tr;let dt=tr=class extends xr{constructor(t){super(t),this.type="text-box"}clone(){return new tr({maxLength:this.maxLength,minLength:this.minLength})}};i([n({type:["text-box"],json:{read:!1,write:!0}})],dt.prototype,"type",void 0),dt=tr=i([c("esri.form.elements.inputs.TextBoxInput")],dt);const Gn=dt;var rr;function At(t){return t??null}function Rt(t){return t??null}let P=rr=class extends ne{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return At(e.max)}writeMax(t,e){e.max=Rt(t)}readMin(t,e){return At(e.min)}writeMin(t,e){e.min=Rt(t)}readTimeResolution(t,e){return At(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=Rt(t)}clone(){return new rr({max:this.max,min:this.min,timeResolution:this.timeResolution})}};i([n({type:String,json:{type:String,write:!0}})],P.prototype,"max",void 0),i([f("max")],P.prototype,"readMax",null),i([g("max")],P.prototype,"writeMax",null),i([n({type:String,json:{type:String,write:!0}})],P.prototype,"min",void 0),i([f("min")],P.prototype,"readMin",null),i([g("min")],P.prototype,"writeMin",null),i([n({type:String,json:{type:String,write:!0}})],P.prototype,"timeResolution",void 0),i([f("timeResolution")],P.prototype,"readTimeResolution",null),i([g("timeResolution")],P.prototype,"writeTimeResolution",null),i([n({type:["time-picker"],json:{read:!1,write:!0}})],P.prototype,"type",void 0),P=rr=i([c("esri.form.elements.inputs.TimePickerInput")],P);const qn=P,Vn=Ln,Un=Cn,Bn=An,zn=Rn,Qn=Dn,Hn=Pn,Wn=Nn,Jn=kn,Zn=Gn,Kn=qn,Xn={base:ne,key:"type",typeMap:{"barcode-scanner":Vn,"combo-box":Un,"date-picker":Bn,"datetime-picker":Qn,"datetimeoffset-picker":zn,"radio-buttons":Hn,switch:Wn,"text-area":Jn,"text-box":Zn,"time-picker":Kn}};var ir;let k=ir=class extends R{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new ir({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};i([n({types:bo,json:{read:{reader:wr},write:!0}})],k.prototype,"domain",void 0),i([n({type:Boolean,json:{write:!0}})],k.prototype,"editable",void 0),i([n({type:String,json:{write:!0}})],k.prototype,"editableExpression",void 0),i([n({type:String,json:{write:!0}})],k.prototype,"fieldName",void 0),i([n({type:String,json:{write:!0}})],k.prototype,"hint",void 0),i([n({types:Xn,json:{read:{source:"inputType"},write:{target:"inputType"}}})],k.prototype,"input",void 0),i([n({type:String,json:{write:!0}})],k.prototype,"requiredExpression",void 0),i([n({type:String,json:{read:!1,write:!0}})],k.prototype,"type",void 0),i([n({type:String,json:{write:!0}})],k.prototype,"valueExpression",void 0),k=ir=i([c("esri.form.elements.FieldElement")],k);var sr;let Y=sr=class extends R{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new sr({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:v(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};i([n({type:Number,json:{write:!0}})],Y.prototype,"displayCount",void 0),i([n({type:["list"],json:{write:!0}})],Y.prototype,"displayType",void 0),i([n({type:String,json:{write:!0}})],Y.prototype,"editableExpression",void 0),i([n({type:[As],json:{write:!0}})],Y.prototype,"orderByFields",void 0),i([n({type:Number,json:{write:!0}})],Y.prototype,"relationshipId",void 0),i([n({type:["relationship"],json:{read:!1,write:!0}})],Y.prototype,"type",void 0),Y=sr=i([c("esri.form.elements.RelationshipElement")],Y);const ii=Y;var or;let Fe=or=class extends R{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new or({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};i([n({type:String,json:{write:!0}})],Fe.prototype,"text",void 0),i([n({type:String,json:{write:!0}})],Fe.prototype,"textFormat",void 0),i([n({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Fe.prototype,"type",void 0),Fe=or=i([c("esri.form.elements.TextElement")],Fe);const si=Fe;let $e=class extends x(R){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};i([n({type:[Rs],json:{write:{isRequired:!0}}})],$e.prototype,"associationTypes",void 0),i([n({type:String,json:{write:!0}})],$e.prototype,"editableExpression",void 0),i([n({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],$e.prototype,"type",void 0),$e=i([c("esri.form.elements.UtilityNetworkAssociationsElement")],$e);const oi=$e,Yn=t=>t.type==="field",ea=t=>t.type==="group",ta=t=>t.type==="text";function Wi(t){return{typesWithGroup:{base:R,key:"type",typeMap:{attachment:Xr,field:k,group:t,relationship:ii,text:si,utilityNetworkAssociations:oi}},typesWithoutGroup:{base:R,key:"type",typeMap:{attachment:Xr,field:k,relationship:ii,text:si,utilityNetworkAssociations:oi}}}}function Ji(t,e,r=!0){if(!t)return null;const s=r?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(o=>s[o.type]).map(o=>s[o.type].fromJSON(o))}function Zi(t,e,r=!0){if(!t)return null;const s=r?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(o=>s[o.type]).map(o=>o.toJSON())}function Ki(t,e,r=!0){return t?t.map(s=>Fi(r?e.typesWithGroup:e.typesWithoutGroup,s)):null}var nr;let W=nr=class extends R{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return Ki(t,Dt,!1)}readElements(t,e){return Ji(e.formElements,Dt,!1)}writeElements(t,e){e.formElements=Zi(t,Dt,!1)}clone(){return new nr({description:this.description,elements:v(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};i([n({json:{write:!0}})],W.prototype,"elements",void 0),i([Ye("elements")],W.prototype,"castElements",null),i([f("elements",["formElements"])],W.prototype,"readElements",null),i([g("elements")],W.prototype,"writeElements",null),i([n({type:["collapsed","expanded"],json:{write:!0}})],W.prototype,"initialState",void 0),i([n({type:String,json:{read:!1,write:!0}})],W.prototype,"type",void 0),W=nr=i([c("esri.form.elements.GroupElement")],W);const Dt=Wi(W),ra=W;var ar;const Pt=Wi(ra);let U=ar=class extends I{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return Ki(t,Pt)}readElements(t,e){return Ji(e.formElements,Pt)}writeElements(t,e){e.formElements=Zi(t,Pt)}clone(){return new ar({description:this.description,expressionInfos:v(this.expressionInfos),elements:v(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const r=new Set,{description:s,elements:o,expressionInfos:a,title:l}=this;if(We(r,t,s),We(r,t,l),!o)return[];const u=ia(o,a).map(p=>Ds(r,t,null,p));await Promise.all(u);for(const p of o)Xi(r,{fieldsIndex:t,relationships:e},p);return Array.from(r).sort()}};function Xi(t,e,r){const{fieldsIndex:s}=e;if(!s||s.fields.length!==t.size)switch(We(t,s,r.label),We(t,s,r.description),r.type){case"field":Cr(t,s,r.fieldName);break;case"group":r.elements.forEach(o=>Xi(t,e,o));break;case"relationship":if(e.relationships){const o=e.relationships.find(a=>a.id===r.relationshipId);o&&Cr(t,s,o.keyField)}Oi(t,s,r.orderByFields?.map(o=>o.field));break;case"text":We(t,s,r.text)}}function ia(t,e){if(!e||e.length===0)return[];const r=Yi(t),s=[];for(const o of e)r.has(o.name)&&s.push(o.expression);return s}function Yi(t){const e=new Set;for(const r of t)if(Mr(e,r.visibilityExpression),!ta(r)){if(ea(r))Lr(e,Yi(r.elements));else if(Mr(e,r.editableExpression),Yn(r)){const{requiredExpression:s,valueExpression:o}=r;Lr(e,[s,o])}}return e}function We(t,e,r){Oi(t,e,Mi(r))}i([n({type:String,json:{write:!0}})],U.prototype,"description",void 0),i([n({json:{write:!0}})],U.prototype,"elements",void 0),i([Ye("elements")],U.prototype,"castElements",null),i([f("elements",["formElements"])],U.prototype,"readElements",null),i([g("elements")],U.prototype,"writeElements",null),i([n({type:[$n],json:{write:!0}})],U.prototype,"expressionInfos",void 0),i([n({type:Boolean,json:{default:!1,write:!0}})],U.prototype,"preserveFieldValuesWhenHidden",void 0),i([n({type:String,json:{write:!0}})],U.prototype,"title",void 0),U=ar=i([c("esri.form.FormTemplate")],U);const sa=Symbol("isFeatureGraphicOrigin");var ni;let oa=class extends Ir{get[(ni=sa,mr)](){return this.layer}get[Ps](){return this.layer}get[$o](){return this.layer}constructor(e){super(),this[ni]=!0,this.type="feature",this.layer=e}get id(){return this.layer.id}};function ai(t,e,r){if(t.hasM==null||t.hasZ)for(const s of e)for(const o of s)o.length>2&&(o[2]*=r)}function na(t,e,r){if(!t&&!e||!r)return;const s=Di(r);li(t,r,s),li(e,r,s)}function li(t,e,r){if(t)for(const s of t)aa(s.geometry,e,r)}function aa(t,e,r){if(!t?.spatialReference||eo(t.spatialReference,e))return;const s=Di(t.spatialReference)/r;if(s!==1){if("x"in t)t.z!=null&&(t.z*=s);else if("rings"in t)ai(t,t.rings,s);else if("paths"in t)ai(t,t.paths,s);else if("points"in t&&(t.hasM==null||t.hasZ))for(const o of t.points)o.length>2&&(o[2]*=s)}}let la=0,re=class extends Lo(Co(X)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const r=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,r={}){await this.load(r);const s=await this._connection.invoke("queryFeatures",e?e.toJSON():null,r);Gr(e,this.layer.spatialReference,s);const o=Vi.fromJSON(s);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return o;const a=this.layer.objectIdField;for(const l of o.features){const u=l.attributes[a],p=this._idToClientGeometry.get(u);p!==void 0&&(l.geometry=p)}return o.geometryType=this.layer.geometryType,o}async queryFeaturesJSON(e,r={}){if(this._requiresClientGraphicMapping())throw new $("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const s=await this._connection.invoke("queryFeatures",e?e.toJSON():null,r);return Gr(e,this.layer.spatialReference,s),s}queryFeatureCount(e,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,r))}queryObjectIds(e,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,r))}queryExtent(e,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,r)).then(s=>({count:s.count,extent:ct.fromJSON(s.extent)}))}querySnapping(e,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",e,r))}async queryAttributeBins(e,r={}){return await this.load(),this._connection.invoke("queryAttributeBins",e?.toJSON(),r)}async _applyEdits(e){if(!this._connection)throw new $("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let s=null;const o=[],a=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const l=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[r]!=null?h.attributes[r]:null;if(e.addFeatures&&(s=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const b=l(h);b!=null&&o.push(b)}const u=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(a.push(this._serializeFeature(h)),u&&h.geometry!=null){const b=l(h);b!=null&&u.set(b,h)}}na(s?s.features:null,a,this.layer.spatialReference);const{fullExtent:p,featureEditResults:m}=await this._connection.invoke("applyEdits",{adds:s?s.features:[],updates:a,deletes:o});return this.fullExtent=p,s&&s.finish(m.uidToObjectId),this._updateIdToClientGeometries(u,m),this._createEditsResult(m)}async _prepareClientMapping(e,r){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const s=[];for(const{geometry:o}of e)o==null||o.type!=="mesh"||o.hasExtent||o.loaded||s.push(o.load({signal:r}));s.length&&await Promise.all(s)}_updateIdToClientGeometries(e,r){if(this._idToClientGeometry){if(e)for(const s of r.updateResults){if(!s.success)continue;const o=e.get(s.objectId);o!=null&&this._addIdToClientGeometry(o)}for(const s of r.deleteResults)s.success&&this._idToClientGeometry.delete(s.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const r=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:r?new $("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(e){const r=new Map,s=new Array(e.length);let o=null;for(let l=0;l<e.length;l++){const u=e[l],p=this._serializeFeature(u);o||u.geometry==null||(o=u.geometry.type),s[l]=p,r.set(`${p.uid}`,u)}const a=this;return{features:s,inferredGeometryType:o,finish(l){const u=a.sourceJSON.objectIdField;for(const p in l){const m=l[p],h=r.get(p);h&&(h.attributes||(h.attributes={}),m===-1?delete h.attributes[u]:h.attributes[u]=m,a._addIdToClientGeometry(h))}}}}_addIdToClientGeometry(e){if(!this._idToClientGeometry)return;const r=this.sourceJSON.objectIdField,s=e.attributes?.[r];s!=null&&this._idToClientGeometry.set(s,e.geometry??null)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:r}=e,s=this._geometryForSerialization(e),o=(la++).toString();return s?{uid:o,geometry:s.toJSON(),attributes:r}:{uid:o,attributes:r}}_geometryForSerialization(e){const{geometry:r}=e;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?Ro.fromExtent(r.extent):null:r}async _startWorker(e){this._connection=await wo("MemorySourceWorker",{strategy:et("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:r,spatialReference:s,objectIdField:o,hasM:a,hasZ:l,timeInfo:u,dateFieldsTimeZone:p}=this.layer,m=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",z=>{B.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),z.preventDefault()}));const b={features:h.features,fields:r?.map(z=>z.toJSON()),geometryType:Ar.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&a,hasZ:this._layerOrSourceGeometryType==="mesh"||l,objectIdField:o,spatialReference:m?null:s&&s.toJSON(),timeInfo:u?.toJSON()??null,dateFieldsTimeZone:p},w=await this._connection.invoke("load",b,{signal:e});for(const z of w.warnings)B.getLogger(this.layer).warn("#load()",`${z.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:z});w.featureErrors.length&&B.getLogger(this.layer).warn("#load()",`Encountered ${w.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:w.featureErrors});const T=w.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(T.geometryType=Ar.toJSON(h.inferredGeometryType)),this.sourceJSON=T,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),h.finish(w.assignedObjectIds)}};i([po({Type:Rr,ensureType:xs(Rr)})],re.prototype,"itemType",void 0),i([n()],re.prototype,"type",void 0),i([n({constructOnly:!0})],re.prototype,"layer",void 0),i([n({readOnly:!0})],re.prototype,"_workerGeometryType",null),i([n()],re.prototype,"sourceJSON",void 0),re=i([c("esri.layers.graphics.sources.MemorySource")],re);function ua(t){return"portalItem"in t}const pa=t=>{const e=t;let r=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):ua(this)?this.portalItem?.apiKey:null}set apiKey(s){s!=null?this._override("apiKey",s):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return i([n({type:String})],r.prototype,"apiKey",null),r=i([c("esri.layers.mixins.APIKeyMixin")],r),r},da=t=>{const e=t;let r=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const s=vr(this.url);if(s?.title)return s.title}return this._get("title")||""}set title(s){this._set("title",s)}set url(s){this._set("url",to(s,B.getLogger(this)))}};return i([n()],r.prototype,"title",null),i([n({type:String})],r.prototype,"url",null),r=i([c("esri.layers.mixins.ArcGISService")],r),r},ca=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.customParameters=null}};return i([n({type:Object,json:{write:{overridePolicy:s=>({enabled:!!(s&&Object.keys(s).length>0)})}}})],r.prototype,"customParameters",void 0),r=i([c("esri.layers.mixins.CustomParametersMixin")],r),r},ui={write:{overridePolicy:(t,e,r)=>({enabled:!r||r.filterMode==="scale"})}};let ie=class extends x(I){constructor(e){super(e),this.id=an(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};i([n({type:String,json:{write:!0}})],ie.prototype,"id",void 0),i([n({type:Number,json:ui})],ie.prototype,"maxScale",void 0),i([n({type:Number,json:ui})],ie.prototype,"minScale",void 0),i([n({type:String,json:{write:!0}})],ie.prototype,"title",void 0),i([n({type:String,json:{write:!0}})],ie.prototype,"where",void 0),ie=i([c("esri.layers.support.DisplayFilter")],ie);let ge=class extends x(I){constructor(e){super(e),this.activeFilterId=null,this.filters=new(X.ofType(ie)),this.mode="manual"}writeFilters(e,r,s,o){const a=e.toArray();this.mode==="scale"&&a.sort((l,u)=>{const p=nn(u.minScale,l.minScale),m=l.maxScale-u.maxScale;return p===0?m:p}),r[s]=a.map(l=>l.toJSON(o))}write(e,r){return super.write(e,Do(this,r))}};i([n({type:String,json:{write:{overridePolicy:(t,e,r)=>({enabled:r.filterMode==="manual",isRequired:!0})}}})],ge.prototype,"activeFilterId",void 0),i([n({type:X.ofType(ie),nonNullable:!0,json:{write:!0}})],ge.prototype,"filters",void 0),i([g("filters")],ge.prototype,"writeFilters",null),i([n({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],ge.prototype,"mode",void 0),ge=i([c("esri.layers.support.DisplayFilterInfo")],ge);const ya=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return i([n(ha)],r.prototype,"displayFilterEnabled",void 0),i([n(fa)],r.prototype,"displayFilterInfo",void 0),r=i([c("esri.layers.mixins.DisplayFilteredLayer")],r),r},ha={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:S,writer(t,e,r){oe(r,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},fa={type:ge,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:S},origins:{"web-scene":{write:!1,read:!1}}}},ma=ln(),es=new Map,ts=new Map;async function Vu(t,e,r){if(!t||!r)return!1;if(!e)return!0;const s=new URL(t).host;let o=es.get(s);if(!o){const a=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");o=(await br(a,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return o===e}async function Uu(t,e,r=!1){if(!t||!e)return!0;const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),o=ts.get(s)?.entries();if(o){for(const[a,l]of o)if(l.name===e){const u=!l.stack?.hasForwardEdits();if(!u&&r){const[{deleteForwardEdits:p},{default:m}]=await Promise.all([G(()=>import("./Dd2k3djl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url),G(()=>import("./BfdVyFLl.js"),__vite__mapDeps([8,2,3,4]),import.meta.url)]),h=await p(s,a,new m({sessionId:ma,moment:l.moment}));return h.success&&l.stack?.clearForwardEdits(),h.success}return u}}return!0}function ga(t,e){if(!t)return!1;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=ts.get(r)?.entries();if(s){for(const[o,a]of s)if(a.name===e)return a.lockType==="edit"}return!1}const Tr=new co;function va(t){return Tr.on("apply-edits",new WeakRef(t))}function ba(t){return Tr.on("update-moment",new WeakRef(t))}function Bu(t,e,r=null,s=!1){const o=Ts();return s=e==null||s,Tr.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:r,mayReceiveServiceEdits:s,result:o.promise}),o}const rs=Symbol();function zu(t){return t!=null&&typeof t=="object"&&rs in t}function Pe(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function Nt(t,e,r){const s=new URL(t).host,o=es.get(s),a=l=>!l||l===o;return a(e)&&a(r)||e===r}const wa=t=>{var o;var e;const r=t;let s=(o=class extends r{constructor(...a){super(...a),this[e]=!0,this._applyEditsHandler=l=>{const{serviceUrl:u,layerId:p,gdbVersion:m,mayReceiveServiceEdits:h,result:b}=l,w=u===this.url,T=p!=null&&this.layerId!=null&&p===this.layerId,z=Pe(this),xt=Pe(this)&&Nt(u,m,this.gdbVersion);if(!w||z&&!xt||!T&&!h)return;const vs=b.then(_=>{if(this.lastEditsEventDate=new Date,T&&(_.addedFeatures.length||_.updatedFeatures.length||_.deletedFeatures.length||_.addedAttachments.length||_.updatedAttachments.length||_.deletedAttachments.length))return this.emit("edits",v(_)),_;const Er=_.editedFeatures?.find(({layerId:rt})=>rt===this.layerId);if(Er){const{adds:rt,updates:jr,deletes:_r}=Er.editedFeatures,Or={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:rt?rt.map(({attributes:ae})=>({objectId:this.objectIdField&&ae[this.objectIdField],globalId:this.globalIdField&&ae[this.globalIdField]})):[],deletedFeatures:_r?_r.map(({attributes:ae})=>({objectId:this.objectIdField&&ae[this.objectIdField],globalId:this.globalIdField&&ae[this.globalIdField]})):[],updatedFeatures:jr?jr.map(({current:{attributes:ae}})=>({objectId:this.objectIdField&&ae[this.objectIdField],globalId:this.globalIdField&&ae[this.globalIdField]})):[],editedFeatures:v(_.editedFeatures),exceededTransferLimit:!1,historicMoment:v(_.historicMoment)};return this.emit("edits",Or),Or}const Tt={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:v(_.editedFeatures),exceededTransferLimit:!1,historicMoment:v(_.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(u,m,Tt.historicMoment)&&this.emit("edits",Tt),Tt}).then(_=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(u,m,_.historicMoment)&&(this.historicMoment=_.historicMoment),_));this.emit("apply-edits",{result:vs})},this._updateMomentHandler=l=>{const{serviceUrl:u,gdbVersion:p,moment:m}=l,h=u===this.url,b=Pe(this),w=Pe(this)&&Nt(u,p,this.gdbVersion),T=Pe(this)&&!Nt(u,this.gdbVersion,null);h&&b&&w&&T&&"historicMoment"in this&&this.historicMoment!==m&&(this.historicMoment=m)},this.when().then(()=>{this.addHandles(va(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(ba(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(a,l,u){return"historicMoment"in this&&this.historicMoment!==u&&ga(a,l)}},e=rs,o);return i([n()],s.prototype,"lastEditsEventDate",void 0),s=i([c("esri.layers.mixins.EditBusLayer")],s),s},pi={write:{allowNull:!0}},Ia={type:Po,json:{origins:{"web-map":pi,"portal-item":pi}}},Sa=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return i([n(Ia)],r.prototype,"featureEffect",void 0),r=i([c("esri.layers.mixins.FeatureEffectLayer")],r),r};let Ee=class extends I{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};i([n({type:String,json:{write:!0}})],Ee.prototype,"description",void 0),i([n({type:String,json:{write:!0}})],Ee.prototype,"label",void 0),i([n()],Ee.prototype,"type",void 0),Ee=i([c("esri.tables.elements.AttributeTableElement")],Ee);const De=Ee;let Ve=class extends x(De){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};i([n({type:["auto"],json:{write:!0}})],Ve.prototype,"displayType",void 0),i([n({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Ve.prototype,"type",void 0),Ve=i([c("esri.tables.elements.AttributeTableAttachmentElement")],Ve);const is=Ve;let ve=class extends x(De){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};i([n({type:String,json:{read:!1,write:!1}})],ve.prototype,"description",void 0),i([n({type:String,json:{write:{enabled:!0,isRequired:!0}}})],ve.prototype,"fieldName",void 0),i([n({type:String,json:{read:!1,write:!1}})],ve.prototype,"label",void 0),i([n({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],ve.prototype,"type",void 0),ve=i([c("esri.tables.elements.AttributeTableFieldElement")],ve);const ss=ve;let Ue=class extends x(De){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};i([n({type:Number,json:{type:$i,write:{enabled:!0,isRequired:!0}}})],Ue.prototype,"relationshipId",void 0),i([n({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Ue.prototype,"type",void 0),Ue=i([c("esri.tables.elements.AttributeTableRelationshipElement")],Ue);const os=Ue,ns={base:De,key:"type",typeMap:{attachment:is,field:ss,relationship:os}};function xa(t){return{typesWithGroup:{base:De,key:"type",typeMap:{attachment:is,field:ss,group:t,relationship:os}},typesWithoutGroup:ns}}let Be=class extends x(De){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};i([n({types:[ns],json:{name:"attributeTableElements",write:!0}})],Be.prototype,"elements",void 0),i([n({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Be.prototype,"type",void 0),Be=i([c("esri.tables.elements.AttributeTableGroupElement")],Be);const Ta=Be;let ze=class extends x(I){constructor(e){super(e),this.field=null,this.order=null}};i([n({type:String,json:{write:!0}})],ze.prototype,"field",void 0),i([n({type:["asc","desc"],json:{write:!0}})],ze.prototype,"order",void 0),ze=i([c("esri.tables.support.FieldOrder")],ze);const Fa=ze;var lr;const $a=xa(Ta);let Qe=lr=class extends I{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new lr({elements:v(this.elements),orderByFields:v(this.orderByFields)})}};i([n({types:[$a.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],Qe.prototype,"elements",void 0),i([n({type:[Fa],json:{write:!0}})],Qe.prototype,"orderByFields",void 0),Qe=lr=i([c("esri.tables.AttributeTableTemplate")],Qe);const Ea=Qe,ja={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:S}}},wt={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,r){e[r]=!t}}}},It={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:S}}},_a={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:ro}}},Oa={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:S}}},Ma={value:null,type:mo,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:S}}};function Xu(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const as={write:{enabled:!0,layerContainerTypes:S},read:!0},ur={type:Number,json:{origins:{"web-document":as,"portal-item":{write:{layerContainerTypes:S}}}}},La={...ur,json:{...ur.json,origins:{"web-document":{...as,write:{enabled:!0,layerContainerTypes:S,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,r)=>r&&r.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition?.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?Pr(e.layerDefinition.drawingInfo.transparency):void 0:Pr(e.drawingInfo.transparency)}}},Yu={type:ct,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const r=ct.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(r.spatialReference=yt.fromJSON(e.spatialReference)),r}}}},read:!1}},Ca={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Aa={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:S}}},Ra={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:S}}},ls={json:{write:{ignoreOrigin:!0,layerContainerTypes:S},origins:{"web-map":{read:!1,write:!1}}}},Da={type:Ea,json:{name:"attributeTableInfo",write:!0}};let ee=class extends x(I){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};i([n()],ee.prototype,"creatorField",void 0),i([n()],ee.prototype,"creationDateField",void 0),i([n()],ee.prototype,"editorField",void 0),i([n()],ee.prototype,"editDateField",void 0),i([n()],ee.prototype,"realm",void 0),i([n(ht("dateFieldsTimeReference",!0))],ee.prototype,"timeZone",void 0),ee=i([c("esri.layers.support.EditFieldsInfo")],ee);let J=class extends x(I){constructor(e){super(e)}};i([n({constructOnly:!0,json:{write:!0}})],J.prototype,"name",void 0),i([n({constructOnly:!0,json:{write:!0}})],J.prototype,"fields",void 0),i([n({constructOnly:!0,json:{write:!0}})],J.prototype,"isAscending",void 0),i([n({constructOnly:!0,json:{write:!0}})],J.prototype,"indexType",void 0),i([n({constructOnly:!0,json:{write:!0}})],J.prototype,"isUnique",void 0),i([n({constructOnly:!0,json:{write:!0}})],J.prototype,"description",void 0),J=i([c("esri.layers.support.FeatureIndex")],J);let je=class extends x(I){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};i([n({type:String,json:{read:{source:"shapeAreaFieldName"}}})],je.prototype,"shapeAreaField",void 0),i([n({type:String,json:{read:{source:"shapeLengthFieldName"}}})],je.prototype,"shapeLengthField",void 0),i([n({type:String,json:{read:t=>io.read(t)||so.read(t)}})],je.prototype,"units",void 0),je=i([c("esri.layers.support.GeometryFieldsInfo")],je);var pr;let _e=pr=class extends I{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new X}clone(){return new pr({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};i([n({type:String,json:{write:{isRequired:!0}}})],_e.prototype,"floorField",void 0),i([n({json:{read:!1,write:!1}})],_e.prototype,"viewAllMode",void 0),i([n({json:{read:!1,write:!1}})],_e.prototype,"viewAllLevelIds",void 0),_e=pr=i([c("esri.layers.support.LayerFloorInfo")],_e);function Pa(t){const{nonStandardUrlAllowed:e=!1,separator:r}=t??{},s=v(_a),o=s.json?.write;return typeof o=="object"&&o&&(o.writer=function(a,l,u,p){oo(this,a,r,l,p)}),{...s,set:function(a){if(a==null)return void this._set("url",a);const l=no({layer:this,url:a,nonStandardUrlAllowed:e,logger:B.getLogger(this)});this._set("url",l.url),l.layerId!=null&&this._set("layerId",l.layerId)}}}function Na(t,e){const{separator:r}=e??{},s=un(t.url);return s!=null&&(t.dynamicDataSource!=null?s.path=Ur(s.path,"dynamicLayer"):t.layerId!=null&&(s.path=Ur(s.path,r??"",t.layerId.toString()))),s}const di=new fr({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),ci=new fr({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let N=class extends x(I){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};i([n({json:{read:di.read,write:di.write}})],N.prototype,"cardinality",void 0),i([n({json:{name:"catalogID"}})],N.prototype,"catalogId",void 0),i([n({json:{read:!0,write:!0}})],N.prototype,"composite",void 0),i([n({json:{read:!0,write:!0}})],N.prototype,"id",void 0),i([n({json:{read:!0,write:!0}})],N.prototype,"keyField",void 0),i([n({json:{read:!0,write:!0}})],N.prototype,"keyFieldInRelationshipTable",void 0),i([n({json:{read:!0,write:!0}})],N.prototype,"name",void 0),i([n({json:{read:!0,write:!0}})],N.prototype,"relatedTableId",void 0),i([n({json:{read:!0,write:!0}})],N.prototype,"relationshipTableId",void 0),i([n({json:{read:ci.read,write:ci.write}})],N.prototype,"role",void 0),N=i([c("esri.layers.support.Relationship")],N);const ka=[["binary","application/octet-stream","bin",""]];function sp(t,e){return cs(e.name,t?.supportedFormats??[])!=null}function op(t,e){if(!t)return!1;const r=Ga(e,t.supportedFormats??[]);return r!=null&&t.editFormats.includes(r)}function us(t,e){return $r(Ba(t,e))}function ps(t,e){return $r(cs(t,e))}function np(t,e){return ys(Ua(t,e))}function Ga(t,e){return ps(t.name,e)??us(t.type,e)}function St(t,e,r){return us(t,r)??ps(e,r)}function ds({supportedFormats:t}){return St("model/gltf-binary","glb",t)}function ap(t){const e=ds(t);return e!=null&&t.editFormats.includes(e)}function qa({supportedFormats:t}){return St("model/gltf+json","gltf",t)}function Va(t){if(!t)return null;const e=ds(t),r=qa(t);let s=null;for(const o of t.queryFormats){if(o===e)return o;o===r&&(s=o)}return s}function lp({supportedFormats:t}){return St("application/esri3do-SR_world","wld",t)}function up({supportedFormats:t}){return St("application/esri3do-SR_prj","prj",t)}function Fr(t){return[...ka,...t]}function Ua(t,e){return Fr(e).find(r=>$r(r)===t)}function Ba(t,e){const r=t.toLowerCase();return Fr(e).find(s=>ys(s)===r)}function cs(t,e){const r=t.toLowerCase();return Fr(e).find(s=>za(s).some(o=>r.endsWith(o)))}function $r(t){return t?.[0]}function ys(t){return t?.[1].toLowerCase()}function za(t){return t?.[2].split(",").map(e=>e.toLowerCase())??[]}function pp(t){return t.tables?.find(e=>e.role==="assetMaps")}function d(t,e,r){return!!hs(t,e,r)}function Oe(t,e,r){return hs(t,e,r)}function hs(t,e,r){return t&&t.hasOwnProperty(e)?t[e]:r}const Qa={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Ha(t){const e=t?.supportedSpatialAggregationStatistics?.map(r=>r.toLowerCase());return{envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function tt(t,e){return!!t?.supportedOperationsWithCacheHint?.map(s=>s.toLowerCase())?.includes(e.toLowerCase())}function Wa(t){const e=t?.supportedStatisticTypes?.map(r=>r.toLowerCase());return{count:!!e?.includes("count"),sum:!!e?.includes("sum"),min:!!e?.includes("min"),max:!!e?.includes("max"),avg:!!e?.includes("avg"),var:!!e?.includes("var"),stddev:!!e?.includes("stddev"),percentileContinuous:!!e?.includes("percentile_cont"),percentileDiscrete:!!e?.includes("percentile_disc"),envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function Ja(t){const e=t?.supportedNormalizationTypes?.map(r=>r.toLowerCase());return{field:!!e?.includes("field"),log:!!e?.includes("log"),naturalLog:!!e?.includes("naturallog"),percentOfTotal:!!e?.includes("percentoftotal"),squareRoot:!!e?.includes("squareroot")}}function fs(t,e){return{analytics:Za(t),attachment:Ka(t),data:Xa(t),metadata:Ya(t),operations:el(t.capabilities,t,e),query:tl(t,e),queryAttributeBins:sl(t),queryRelated:rl(t),queryTopFeatures:il(t),editing:ol(t)}}function Za(t){return{supportsCacheHint:tt(t.advancedQueryCapabilities,"queryAnalytics")}}function Ka(t){const e=t.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:tt(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:d(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:d(t,"supportsAttachmentsResizing",!1),supportsTypeWildcard:d(t.advancedQueryCapabilities,"supportsQueryAttachmentWithTypeWildcard",!1)};return e&&Array.isArray(e)&&e.forEach(s=>{const o=Qa[s.name];o&&(r[o]=!!s.isEnabled)}),r}function Xa(t){return{isVersioned:d(t,"isDataVersioned",!1),isBranchVersioned:d(t,"isDataBranchVersioned",!1),supportsAttachment:d(t,"hasAttachments",!1),supportsM:d(t,"hasM",!1),supportsZ:d(t,"hasZ",!1)}}function Ya(t){return{supportsAdvancedFieldProperties:d(t,"supportsFieldDescriptionProperty",!1)}}function el(t,e,r){const s=t?.toLowerCase().split(",").map(w=>w.trim())??[],o=r?vr(r):null,a=s.includes(o?.serverType==="MapServer"?"data":"query"),l=s.includes("editing")&&!e.datesInUnknownTimezone&&e.uniqueIdInfo?.OIDFieldContainsHashValue!==!0;let u=l&&s.includes("create"),p=l&&s.includes("delete"),m=l&&s.includes("update");const h=s.includes("changetracking"),b=e.advancedQueryCapabilities;return l&&!(u||p||m)&&(u=p=m=!0),{supportsCalculate:d(e,"supportsCalculate",!1),supportsTruncate:d(e,"supportsTruncate",!1),supportsValidateSql:d(e,"supportsValidateSql",!1),supportsAdd:u,supportsDelete:p,supportsEditing:l,supportsChangeTracking:h,supportsQuery:a,supportsQueryAnalytics:d(b,"supportsQueryAnalytic",!1),supportsQueryAttachments:d(b,"supportsQueryAttachments",!1),supportsQueryBins:d(b,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryPivot:d(b,"supportsQueryPivot",!1),supportsQueryTopFeatures:d(b,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:d(e,"supportsAttachmentsResizing",!1),supportsSync:s.includes("sync"),supportsUpdate:m,supportsExceedsLimitStatistics:d(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:d(e,"supportsAsyncConvert3D",!1)}}function tl(t,e){const r=t.advancedQueryCapabilities,s=t.ownershipBasedAccessControlForFeatures,o=t.archivingInfo,a=t.currentVersion,l=e?.includes("MapServer"),u=!l||a>=et("mapserver-pbf-version-support"),p=Pi(e),m=new Set((t.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:Oe(t,"maxRecordCount",void 0),maxRecordCountFactor:Oe(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:Oe(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:Oe(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:Ha(r),supportsCacheHint:d(r,"supportsQueryWithCacheHint",!1)||tt(r,"query"),supportsCentroid:d(r,"supportsReturningGeometryCentroid",!1),supportsCentroidOnDegeneratedQuantizedGeometry:p||e==null,supportsCompactGeometry:p,supportsCurrentUser:d(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:d(r,"supportsDefaultSR",!1),supportsDegeneratedQuantizedGeometry:d(r,"supportsDegeneratedQuantizedGeometry",!1),supportsDisjointSpatialRelationship:d(r,"supportsDisjointSpatialRel",!1),supportsDistance:d(r,"supportsQueryWithDistance",!1),supportsDistinct:d(r,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:d(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:u&&m.has("pbf"),supportsFullTextSearch:d(r,"supportsFullTextSearch",!1),supportsGeometryProperties:d(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:d(r,"supportsHavingClause",!1),supportsHistoricMoment:d(o,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:d(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:d(r,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:d(r,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:d(r,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:d(r,"supportsPercentileStatistics",!1),supportsQuantization:d(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:d(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:d(s,"allowAnonymousToQuery",!0),supportsQueryByOthers:d(s,"allowOthersToQuery",!0),supportsQueryGeometry:d(t,"supportsReturningQueryGeometry",!1),supportsResultType:d(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!Va(t.infoFor3D),supportsSpatialAggregationStatistics:d(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:d(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:d(t,"useStandardizedQueries",!1),supportsStatistics:d(r,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:d(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:d(r,"supportsTrueCurve",!1),tileMaxRecordCount:Oe(t,"tileMaxRecordCount",void 0)}}function rl(t){const e=t.advancedQueryCapabilities,r=d(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:d(e,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:tt(e,"queryRelated")}}function il(t){return{supportsCacheHint:tt(t.advancedQueryCapabilities,"queryTopFilter")}}function sl(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:d(e,"supportsDateBin",!1),supportsFixedInterval:d(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:d(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:d(e,"supportsFixedBoundariesBin",!1),supportsStackBy:d(e,"supportsStackBy",!1),supportsSplitBy:d(e,"supportsSplitBy",!1),supportsSnapToData:d(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:d(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:d(e,"supportsFirstDayOfWeek",!1),supportsNormalization:d(e,"supportsNormalization",!1),supportedStatistics:Wa(e),supportedNormalizationTypes:Ja(e)}}function ol(t){const e=t.ownershipBasedAccessControlForFeatures,r=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:d(t,"allowGeometryUpdates",!0),supportsGlobalId:d(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:d(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:d(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:d(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:d(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:d(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:d(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:d(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:d(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:d(r,"supportsAsyncApplyEdits",!1),zDefault:Oe(t,"zDefault",void 0)}}function dp(t){return{operations:{supportsAppend:d(t,"supportsAppend",!1),supportsCoverageQuery:t?.playbackInfo?.klv["0601"]??!1,supportsExportClip:d(t,"supportsExportClip",!1),supportsExportFrameset:d(t,"supportsExportFrameset",!1),supportsMensuration:d(t,"supportsMensuration",!1),supportsPreviews:d(t,"supportsPreviews",!1),supportsUpdate:d(t,"supportsUpdate",!1)}}}let te=class extends x(I){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const r={};for(const s of Object.keys(e))r[s]=wr(e[s]);return r}writeDomains(e,r){if(!e)return;const s={};for(const o of Object.keys(e))e[o]&&(s[o]=e[o]?.toJSON());r.domains=s}};i([n({type:Number,json:{write:!0}})],te.prototype,"code",void 0),i([n({type:Object,json:{write:!0}})],te.prototype,"defaultValues",void 0),i([n({json:{write:!0}})],te.prototype,"domains",void 0),i([f("domains")],te.prototype,"readDomains",null),i([g("domains")],te.prototype,"writeDomains",null),i([n({type:String,json:{write:!0}})],te.prototype,"name",void 0),te=i([c("esri.layers.support.Subtype")],te);const nl=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(X.ofType(J)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=yt.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(s,o){throw new Error("Not implemented")}getField(s){return this.fieldsIndex.get(s)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:s}=this;if(s){const{query:a,operations:l,editing:u}=s;if(!a.supportsQueryByOthers||!a.supportsQueryByAnonymous||l.supportsEditing&&!(u.supportsUpdateByOthers&&u.supportsUpdateByAnonymous&&u.supportsDeleteByOthers&&u.supportsDeleteByAnonymous))return"load"}if(qr(this.serviceDefinitionExpression)||qr(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(No(this))return"load";if(this.hasUpdateItemRestrictions)return s.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const o=this.editFieldsInfo;return(o?.creatorField||o?.editorField)&&s?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(s,o){return fs(o,this.url)}readEditingInfo(s,o){const{editingInfo:a}=o;return a?{lastEditDate:a.lastEditDate!=null?new Date(a.lastEditDate):null}:null}get effectiveCapabilities(){const s=this.capabilities;if(!s)return null;const o=v(s),{operations:a,editing:l}=o;return $t(this)?(this.userHasUpdateItemPrivileges&&(a.supportsQuery=!0),o):this.userHasUpdateItemPrivileges?(a.supportsAdd=a.supportsDelete=a.supportsEditing=a.supportsQuery=a.supportsUpdate=l.supportsDeleteByOthers=l.supportsGeometryUpdate=l.supportsUpdateByOthers=!0,o):(this.userHasFullEditingPrivileges&&a.supportsEditing&&(a.supportsAdd=a.supportsDelete=a.supportsUpdate=l.supportsGeometryUpdate=!0),o)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(s,o){return ki(o)}get hasFullEditingRestrictions(){const s=this.capabilities;if(!s||$t(this))return!1;const{operations:o,editing:a}=s;return o.supportsEditing&&!(o.supportsAdd&&o.supportsDelete&&o.supportsUpdate&&a.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const s=this.capabilities;if(!s)return!1;const{operations:o,editing:a}=s;return $t(this)?!o.supportsQuery:!(o.supportsAdd&&o.supportsDelete&&o.supportsEditing&&o.supportsQuery&&o.supportsUpdate&&a.supportsDeleteByOthers&&a.supportsGeometryUpdate&&a.supportsUpdateByOthers)}readIsTableFromService(s,o){return o.type==="Table"}readMaxScale(s,o){return o.effectiveMaxScale||s||0}readMinScale(s,o){return o.effectiveMinScale||s||0}readObjectIdFieldFromService(s,o){return Gi(o)}get parsedUrl(){return Na(this)}readServiceDefinitionExpression(s,o){return o.definitionQuery||o.definitionExpression}readUniqueIdFields(s,o){return o.uniqueIdInfo?.OIDFieldContainsHashValue?o.uniqueIdInfo.fields:null}readVersion(s,o){return ko(o)}get isUrlHostModified(){const{loaded:s,url:o,_isUrlHostModified:a}=this;if(a)return!0;if(!s||!o||this.originIdOf("url")<7)return!1;const l=this.sourceJSON?.preferredHost;if(!l||!Et(o,`https://${l}`,!0))return!1;for(let u=6;u>=3;u--){const p=this.getAtOrigin("url",Ti(u));if(p)return!Et(o,p,!0)}return!1}applyPreferredHost(s){const{url:o,portalItem:a}=this;!o||Nr(a)}applyHostFromPortalItem(){const{url:s,portalItem:o}=this;if(!s||this.originIdOf("url")===7||!o?.url||!Nr(o)||!fn(o,mn.HOSTED_SERVICE)||Et(s,o.url,!0)||!this._isUrlHostModificationEnabled)return;const a=pn(o.url);this._set("url",dn(s,a)),this._isUrlHostModified=!0}};return i([n({readOnly:!0})],r.prototype,"authenticationTriggerEvent",null),i([n({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],r.prototype,"copyright",void 0),i([n({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],r.prototype,"capabilities",void 0),i([f("service","capabilities")],r.prototype,"readCapabilitiesFromService",null),i([n(ht("dateFieldsTimeReference"))],r.prototype,"dateFieldsTimeZone",void 0),i([n({type:Boolean})],r.prototype,"datesInUnknownTimezone",void 0),i([n({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],r.prototype,"definitionExpression",void 0),i([n({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],r.prototype,"displayField",void 0),i([n({readOnly:!0,type:ee})],r.prototype,"editFieldsInfo",void 0),i([n({readOnly:!0})],r.prototype,"editingInfo",void 0),i([f("editingInfo")],r.prototype,"readEditingInfo",null),i([n({readOnly:!0})],r.prototype,"effectiveCapabilities",null),i([n()],r.prototype,"effectiveEditingEnabled",null),i([n((()=>{const s=v(Ma),o=s.json.origins;return o["web-map"]={read:!1,write:!1},o["portal-item"]={read:!1,write:!1},s})())],r.prototype,"elevationInfo",void 0),i([n()],r.prototype,"fieldsIndex",void 0),i([n({type:_e,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:S}}})],r.prototype,"floorInfo",void 0),i([n({type:ct,json:{origins:{service:{read:{source:"extent"}}}}})],r.prototype,"fullExtent",void 0),i([n()],r.prototype,"gdbVersion",void 0),i([n({readOnly:!0,type:je,json:{read:{source:"geometryProperties"}}})],r.prototype,"geometryFieldsInfo",void 0),i([n({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Ut.read}}}})],r.prototype,"geometryType",void 0),i([n({type:String})],r.prototype,"globalIdField",void 0),i([f("service","globalIdField",["globalIdField","fields"])],r.prototype,"readGlobalIdFieldFromService",null),i([n({readOnly:!0})],r.prototype,"hasFullEditingRestrictions",null),i([n({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasM",void 0),i([n({readOnly:!0})],r.prototype,"hasUpdateItemRestrictions",null),i([n({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasZ",void 0),i([n({readOnly:!0,type:Io})],r.prototype,"heightModelInfo",void 0),i([n({type:Date})],r.prototype,"historicMoment",void 0),i([n({type:X.ofType(J),readOnly:!0})],r.prototype,"indexes",void 0),i([n({readOnly:!0})],r.prototype,"isTable",void 0),i([f("service","isTable",["type"])],r.prototype,"readIsTableFromService",null),i([n({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],r.prototype,"layerId",void 0),i([n(Ra)],r.prototype,"maxScale",void 0),i([f("service","maxScale",["maxScale","effectiveMaxScale"])],r.prototype,"readMaxScale",null),i([n(Aa)],r.prototype,"minScale",void 0),i([f("service","minScale",["minScale","effectiveMinScale"])],r.prototype,"readMinScale",null),i([n({type:String})],r.prototype,"objectIdField",void 0),i([f("service","objectIdField",["objectIdField","fields"])],r.prototype,"readObjectIdFieldFromService",null),i([n({readOnly:!0})],r.prototype,"parsedUrl",null),i([n(ht("preferredTimeReference"))],r.prototype,"preferredTimeZone",void 0),i([n({type:[N],readOnly:!0})],r.prototype,"relationships",void 0),i([n({type:Boolean})],r.prototype,"returnM",void 0),i([n({type:Boolean})],r.prototype,"returnZ",void 0),i([n({readOnly:!0,json:{write:!1}})],r.prototype,"serverGens",void 0),i([n({readOnly:!0})],r.prototype,"serviceDefinitionExpression",void 0),i([f("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],r.prototype,"readServiceDefinitionExpression",null),i([n({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"serviceItemId",void 0),i([n()],r.prototype,"sourceJSON",void 0),i([n({type:yt,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],r.prototype,"spatialReference",void 0),i([n({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],r.prototype,"subtypeField",void 0),i([n({type:[te],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"subtypes",void 0),i([n({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],r.prototype,"trackIdField",void 0),i([n({type:[String],readOnly:!0})],r.prototype,"uniqueIdFields",void 0),i([f("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],r.prototype,"readUniqueIdFields",null),i([n(Pa({nonStandardUrlAllowed:!0}))],r.prototype,"url",void 0),i([n({json:{origins:{service:{read:!0}},read:!1}})],r.prototype,"version",void 0),i([f("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],r.prototype,"readVersion",null),i([n({readOnly:!0})],r.prototype,"isUrlHostModified",null),r=i([c("esri.layers.mixins.FeatureLayerBase")],r),r};let al=class extends Ir{constructor(e){super(),this.type="aggregate",this.featureReductionProvider=e}get id(){return this.featureReductionProvider.id}get[mr](){const e=this.featureReductionProvider.featureReduction;return e&&"popupTemplate"in e?e:null}},le=class extends x(I){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};i([n({type:String,json:{write:!0}})],le.prototype,"expression",void 0),i([n({type:String,json:{write:!0}})],le.prototype,"title",void 0),i([n({type:String,json:{write:!0}})],le.prototype,"returnType",void 0),le=i([c("esri.layers.support.ExpressionInfo")],le);var dr,Ae;let M=(Ae=class extends I{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new dr({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:v(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},dr=Ae,Ae);i([n({type:Boolean,json:{write:!0}})],M.prototype,"isAutoGenerated",void 0),i([n({type:String,json:{write:!0}})],M.prototype,"name",void 0),i([n({type:String,json:{write:!0}})],M.prototype,"alias",void 0),i([n({type:String,json:{write:!0}})],M.prototype,"onStatisticField",void 0),i([n({type:le,json:{write:!0}})],M.prototype,"onStatisticExpression",void 0),i([n({type:String,json:{write:!0}})],M.prototype,"statisticType",void 0),M=dr=i([c("esri.layers.support.AggregateField")],M);let ce=class extends I{constructor(){super(...arguments),this.type=null}};i([n({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],ce.prototype,"type",void 0),ce=i([c("esri.layers.support.FeatureReduction")],ce);var cr;let O=cr=class extends ce{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=de("12px"),this.fields=[],this.renderer=null}writeFields(t,e,r){const s=t.filter(o=>o.statisticType!=="avg_angle").map(o=>o.toJSON());oe(r,s,e)}readRenderer(t,e,r){const s=e.drawingInfo?.renderer;return s?ft(s,e,r)??void 0:Sr(e,r)}clone(){return new cr({fields:v(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:v(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:v(this.popupTemplate),renderer:v(this.renderer),binType:v(this.binType),size:this.size})}};i([Bt({binning:"binning"})],O.prototype,"type",void 0),i([Bt({geohash:"geohash",square:"square"}),n({type:["geohash","square"]})],O.prototype,"binType",void 0),i([n({type:Number,json:{write:!0}})],O.prototype,"fixedBinLevel",void 0),i([n({type:[gt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],O.prototype,"labelingInfo",void 0),i([n(It)],O.prototype,"labelsVisible",void 0),i([n({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],O.prototype,"maxScale",void 0),i([n(wt)],O.prototype,"popupEnabled",void 0),i([n({type:Xe,json:{name:"popupInfo",write:!0}})],O.prototype,"popupTemplate",void 0),i([n({cast:t=>t==="auto"?t:Ei(de(t))})],O.prototype,"size",void 0),i([n({type:[M],json:{write:!0}})],O.prototype,"fields",void 0),i([g("fields")],O.prototype,"writeFields",null),i([n({types:vt,json:{write:{target:"drawingInfo.renderer"}}})],O.prototype,"renderer",void 0),i([f("renderer",["drawingInfo.renderer"])],O.prototype,"readRenderer",null),O=cr=i([c("esri.layers.support.FeatureReductionBinning")],O);var yr;function yi(t){return t.type==="simple"&&!t.visualVariables?.length}let F=yr=class extends I{constructor(t){super(t),this.type="cluster",this.clusterRadius=de("80px"),this.clusterMinSize=de("12px"),this.clusterMaxSize=de("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,r){const s=e.drawingInfo?.renderer;return s?.authoringInfo?.isAutoGenerated?null:s?yi(s)?null:ft(s,e,r)??void 0:Sr(e,r)}readSymbol(t,e,r){const s=e.drawingInfo?.renderer;return s?.authoringInfo?.isAutoGenerated?null:s&&yi(s)?ft(s,e,r)?.symbol:null}writeSymbol(t,e,r,s){const o=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||o){const a=new Ce({symbol:t});e.drawingInfo={renderer:a.write({},s)}}}writeFields(t,e,r){const s=t.filter(o=>o.statisticType!=="avg_angle").map(o=>o.toJSON());oe(r,s,e)}readFields(t,e,r){return t.filter(s=>!s.isAutoGenerated).map(s=>M.fromJSON(s))}clone(){return new yr({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:v(this.labelingInfo),labelsVisible:this.labelsVisible,fields:v(this.fields),maxScale:this.maxScale,renderer:v(this.renderer),symbol:v(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:v(this.popupTemplate)})}};i([n({type:["cluster"],readOnly:!0,json:{write:!0}})],F.prototype,"type",void 0),i([n({cast:t=>t==="auto"?t:Ei(de(t)),json:{write:!0}})],F.prototype,"clusterRadius",void 0),i([n({type:Number,cast:de,json:{write:!0}})],F.prototype,"clusterMinSize",void 0),i([n({type:Number,cast:de,json:{write:!0}})],F.prototype,"clusterMaxSize",void 0),i([n({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],F.prototype,"maxScale",void 0),i([n(wt)],F.prototype,"popupEnabled",void 0),i([n({type:Xe,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],F.prototype,"popupTemplate",void 0),i([n({types:vt,json:{write:{target:"drawingInfo.renderer"}}})],F.prototype,"renderer",void 0),i([f("renderer",["drawingInfo.renderer"])],F.prototype,"readRenderer",null),i([n({types:Ns})],F.prototype,"symbol",void 0),i([f("symbol",["drawingInfo.renderer"])],F.prototype,"readSymbol",null),i([g("symbol")],F.prototype,"writeSymbol",null),i([n({type:[gt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],F.prototype,"labelingInfo",void 0),i([n(It)],F.prototype,"labelsVisible",void 0),i([n({type:[M],json:{write:!0}})],F.prototype,"fields",void 0),i([g("fields")],F.prototype,"writeFields",null),i([f("fields")],F.prototype,"readFields",null),F=yr=i([c("esri.layers.support.FeatureReductionCluster")],F);var hr;let Je=hr=class extends ce{constructor(t){super(t),this.type="selection"}clone(){return new hr}};i([n({type:["selection"]})],Je.prototype,"type",void 0),Je=hr=i([c("esri.layers.support.FeatureReductionSelection")],Je);const hi={key:"type",base:ce,typeMap:{cluster:F,binning:O}},ll={types:{key:"type",base:ce,typeMap:{selection:Je,cluster:F,binning:O}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:hi},"portal-item":{types:hi},"web-scene":{types:{key:"type",base:ce,typeMap:{selection:Je}},name:"layerDefinition.featureReduction",write:{allowNull:!0,layerContainerTypes:S}}}}},ul=()=>B.getLogger("esri.views.2d.layers.support.clusterUtils");et.add("esri-cluster-arcade-enabled",!0);const pl=et("esri-cluster-arcade-enabled"),dl=new Set(["simple-line","simple-fill","picture-fill"]);function fi(t,e){let r=e.clone();if(!cl(r))return r;if(e.symbols.some(s=>dl.has(s.type))&&(r=new Ce({symbol:new ks})),r.authoringInfo||(r.authoringInfo=new wn),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const s=(r.visualVariables||[]).filter(o=>o.valueExpression!=="$view.scale");s.forEach(o=>{o.type==="rotation"?o.field?o.field=he(t,o.field,"avg_angle","number"):o.valueExpression&&(o.field=Ne(t,o.valueExpression,"avg_angle","number"),o.valueExpression=null):o.normalizationField?(o.field=he(t,o.field,"avg_norm","number",o.normalizationField),o.normalizationField=null):o.field?o.field=he(t,o.field,"avg","number"):o.valueExpression&&(o.field=Ne(t,o.valueExpression,"avg","number"),o.valueExpression=null)}),r.visualVariables=s}switch(r.type){case"simple":break;case"pie-chart":for(const s of r.attributes)s.field?s.field=he(t,s.field,"sum","number"):s.valueExpression&&(s.field=Ne(t,s.valueExpression,"sum","number"),s.valueExpression=null);break;case"unique-value":r.field?r.field=he(t,r.field,"mode","string"):r.valueExpression&&(r.field=Ne(t,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=he(t,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=he(t,r.field,"avg","number"):r.valueExpression&&(r.field=Ne(t,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const cl=t=>{const e=r=>ul().error(new $("Unsupported-renderer",r,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const r=t.normalizationType;if(r!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!pl){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function yl(t,e,r){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const s=r,o="field",a=e.toLowerCase()+",norm:"+o+","+s.toLowerCase();return"cluster_avg_"+Ui(a)}}}function Ne(t,e,r,s){const o=Ui(e),a=r==="mode"?`cluster_type_${o}`:r==="sum"?`cluster_sum_${o}`:`cluster_avg_${o}`;return t.some(l=>l.name===a)||t.push(new M({name:a,isAutoGenerated:!0,onStatisticExpression:new le({expression:e,returnType:s}),statisticType:r})),a}function he(t,e,r,s,o){if(e==="cluster_count"||t.some(l=>l.name===e))return e;const a=yl(r,e,o);return t.some(l=>l.name===a)||(r==="avg_norm"?t.push(new M({name:a,isAutoGenerated:!0,onStatisticExpression:new le({expression:`$feature.${e} / $feature.${o}`,returnType:s}),statisticType:"avg"})):t.push(new M({name:a,isAutoGenerated:!0,onStatisticField:e,statisticType:r}))),a}const hl=t=>{const e=t;let r=class extends e{constructor(...s){super(...s),this.aggregateGraphicOrigin=new al(this),this.addHandles(yo(()=>this.renderer,()=>{if(this.featureReduction){const o=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",o)}},Ni))}set featureReduction(s){const o=this._normalizeFeatureReduction(s);this._set("featureReduction",o)}set renderer(s){}_withClusterVariable(s,o,a){const l=s.clone();return"visualVariables"in l&&(l.visualVariables||(l.visualVariables=[]),l.visualVariables.some(u=>u.type==="size")||l.visualVariables.push(new In({field:"cluster_count",stops:[new jt({value:1}),new jt({useMinValue:!0,size:o}),new jt({useMaxValue:!0,size:a})]}))),l}_normalizeFeatureReduction(s){if(s?.type!=="cluster")return s;const o=s.clone(),a=[new M({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],l=(o.fields??[]).filter(w=>!w.isAutoGenerated),u=s.renderer&&!s.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:p,clusterMaxSize:m}=o;if(u){o.fields=[...a,...l];const w=this._withClusterVariable(o.renderer,p,m);return o.effectiveFeatureRenderer=w,o.effectiveClusterRenderer=w,o}if(s.symbol){if(o.fields=[...a,...l],o.renderer=null,!this.renderer)return o.effectiveFeatureRenderer=null,o.effectiveClusterRenderer=null,o;const w=fi(a,this.renderer),T=this._withClusterVariable(w,p,m),z="visualVariables"in T&&T.visualVariables?T.visualVariables:[],xt=new Ce({symbol:s.symbol,visualVariables:z});return o.fields=[...a,...l],o.effectiveFeatureRenderer=T,o.effectiveClusterRenderer=xt,o}if(!this.renderer)return s;const h=fi(a,this.renderer);o.fields=[...a,...l],o.renderer=h;const b=this._withClusterVariable(h,p,m);return o.effectiveFeatureRenderer=b,o.effectiveClusterRenderer=b,o}};return i([n({readOnly:!0,clonable:!1})],r.prototype,"aggregateGraphicOrigin",void 0),i([n(ll)],r.prototype,"featureReduction",null),r=i([c("esri.layers.mixins.FeatureReductionLayer")],r),r},mi={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},gi={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},vi={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},fl={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":mi,"web-map/basemap-base-layers":gi,"web-map/tables":vi,"link-chart/operational-layers":{...mi,LinkChartLayer:!0},"link-chart/basemap-base-layers":gi,"link-chart/tables":vi,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},ml=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(o,a,l){return l?.portalItem?.type==="Group Layer"?void 0:o}writeListMode(o,a,l,u){(u&&u.layerContainerType==="ground"||o&&$s(this,l,{},u))&&(a[l]=o)}writeOperationalLayerType(o,a,l){o&&(a[l]=o)}writeTitle(o,a){a.title=o??"Layer"}readVisibilityTimeExtent(o){return o?Ke.fromArray(o):null}writeVisibilityTimeExtent(o,a,l,u){o&&u.layerContainerType!=="tables"&&(o.isEmpty?u?.messages&&u.messages.push(new $("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):a[l]=o.toArray())}read(o,a){a&&(a.layer=this),Es(this,o,l=>super.read(o,l),a)}write(o,a){if(!this.persistenceEnabled&&!a?.ignorePersistenceEnabled)return null;if(a?.origin){const p=`${a.origin}/${a.layerContainerType||"operational-layers"}`;let h=!!fl[p]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&p==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&p==="web-map/operational-layers"&&(h=!1),!h)return a.messages?.push(new $("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${p}'`,{layer:this})),null}const l=super.write(o,{...a,layer:this}),u=!!a&&!!a.messages&&!!a.messages.filter(p=>p instanceof $&&p.name==="web-document-write:property-required").length;return cn(l?.url)?(a?.messages?.push(new $("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&u?null:l}beforeSave(){}};return i([n({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],r.prototype,"id",void 0),i([f("id",["id"])],r.prototype,"readId",null),i([n(ls)],r.prototype,"listMode",void 0),i([g("listMode")],r.prototype,"writeListMode",null),i([n({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:S,isRequired:!0}}}}})],r.prototype,"operationalLayerType",void 0),i([g("operationalLayerType")],r.prototype,"writeOperationalLayerType",null),i([n(ur)],r.prototype,"opacity",void 0),i([n({type:Boolean,readOnly:!1})],r.prototype,"persistenceEnabled",void 0),i([n({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],r.prototype,"title",void 0),i([g("title"),g(["web-scene"],"title")],r.prototype,"writeTitle",null),i([n({type:Ke,json:{origins:{"web-scene":{write:{layerContainerTypes:S}}}}})],r.prototype,"visibilityTimeExtent",void 0),i([f("visibilityTimeExtent")],r.prototype,"readVisibilityTimeExtent",null),i([g(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[$i,Fs]]}})],r.prototype,"writeVisibilityTimeExtent",null),i([n({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:S}}})],r.prototype,"visible",void 0),r=i([c("esri.layers.mixins.OperationalLayer")],r),r};function gl(t,e,r){if(!t)return null;const s=t.find(a=>!!a.field);if(!s)return null;const o=new qi;return o.read(s,r),[o]}function vl(t,e,r,s){const o=t.find(a=>!!a.field);o&&oe(r,[o.toJSON()],e)}const bl={type:[qi],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:gl},write:{writer:vl}}},wl=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.orderBy=null}};return i([n(bl)],r.prototype,"orderBy",void 0),r=i([c("esri.layers.mixins.OrderedLayer")],r),r},Il=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=ji(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(s){s!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",s))}readPortalItem(s,o,a){if(o.itemId)return new _t({id:o.itemId,portal:a?.portal})}writePortalItem(s,o){s?.id&&(o.itemId=s.id)}async loadFromPortal(s,o){if(this.portalItem?.id)try{const{load:a}=await G(()=>import("./DtwKm7-k.js"),__vite__mapDeps([9,4,3,1,2,5,6,10,11,12,13,14,15,16,17,18,19,20,21]),import.meta.url);return js(o),await a({instance:this,supportedTypes:s.supportedTypes,validateItem:s.validateItem,supportsData:s.supportsData,layerModuleTypeMap:s.layerModuleTypeMap,populateGroupLayer:s.populateGroupLayer},o)}catch(a){throw _s(a)||B.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${a}`),a}}async finishLoadEditablePortalLayer(s){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(s).catch(o=>(fe(o),!0)))}async setUserPrivileges(s,o){if(!ho.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(o);if(this.url)try{const{features:{edit:a,fullEdit:l},content:{updateItem:u}}=await this._fetchUserPrivileges(s,o);this._set("userHasEditingPrivileges",a),this._set("userHasFullEditingPrivileges",l),this._set("userHasUpdateItemPrivileges",u)}catch(a){fe(a)}}async _fetchUserPrivileges(s,o){let a=this.portalItem;if(!s||!a||!a.loaded||a.sourceUrl)return this._fetchFallbackUserPrivileges(o);const l=!it?.findCredential(this.url),u=s===a.id;if(u&&a.portal.user)return this._getUserPrivileges(a,l);let p,m;if(u)p=a.portal.url;else try{p=await Eo(this.url,o)}catch(T){fe(T)}if(!p||!yn(p,a.portal.url))return this._fetchFallbackUserPrivileges(o);try{const T=o!=null?o.signal:null;m=await it?.getCredential(`${p}/sharing`,{prompt:!1,signal:T})}catch(T){fe(T)}const h=!0,b=!1,w=!1;if(!m)return{features:{edit:h,fullEdit:b},content:{updateItem:w}};try{if(u?await a.reload():(a=new _t({id:s,portal:{url:p}}),await a.load(o)),a.portal.user)return this._getUserPrivileges(a,l)}catch(T){fe(T)}return{features:{edit:h,fullEdit:b},content:{updateItem:w}}}_getUserPrivileges(s,o){const a=gn(s);return o&&(a.features.edit=!0),a}async _fetchFallbackUserPrivileges(s){let o=!0;try{o=await this._fetchUserHasEditingPrivileges(s)}catch(a){fe(a)}return{features:{edit:o,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(s){const o=this.url?it?.findCredential(this.url):null;if(!o)return!0;const a=st.credential===o?st.user:await this._fetchEditingUser(s);return st.credential=o,st.user=a,a?.privileges==null||a.privileges.includes("features:user:edit")}async _fetchEditingUser(s){const o=this.portalItem?.portal?.user;if(o)return o;const a=it?.findServerInfo(this.url??"");if(!a?.owningSystemUrl)return null;const l=`${a.owningSystemUrl}/sharing/rest`,u=kr.getDefault();if(u&&u.loaded&&Br(u.restUrl)===Br(l))return u.user;const p=`${l}/community/self`,m=s!=null?s.signal:null,h=await jo(br(p,{authMode:"no-prompt",query:{f:"json"},signal:m}));return h.ok?Ao.fromJSON(h.value.data):null}read(s,o){o&&(o.layer=this),super.read(s,o)}write(s,o){const a=o?.portal,l=this.portalItem?.id&&(this.portalItem.portal||kr.getDefault());return a&&l&&!hn(l.restUrl,a.restUrl)?(o.messages&&o.messages.push(new $("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(s,{...o,layer:this})}};return i([n({type:_t})],r.prototype,"portalItem",null),i([f("web-document","portalItem",["itemId"])],r.prototype,"readPortalItem",null),i([g("web-document","portalItem",{itemId:{type:String}})],r.prototype,"writePortalItem",null),i([n({clonable:!1})],r.prototype,"resourceReferences",void 0),i([n({type:Boolean,readOnly:!0})],r.prototype,"userHasEditingPrivileges",void 0),i([n({type:Boolean,readOnly:!0})],r.prototype,"userHasFullEditingPrivileges",void 0),i([n({type:Boolean,readOnly:!0})],r.prototype,"userHasUpdateItemPrivileges",void 0),r=i([c("esri.layers.mixins.PortalLayer")],r),r},st={credential:null,user:null};let He=class extends mt{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};i([n()],He.prototype,"updating",void 0),i([n()],He.prototype,"status",void 0),He=i([c("esri.layers.support.PublishingInfo")],He);const Sl=Symbol(),xl=t=>{var o;var e;const r=t;let s=(o=class extends r{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const a=this._get("publishingInfo");if(a)return a;const l=new He;return this._checkPublishingStatus(l),l}_checkPublishingStatus(a){let p=0;const m=async b=>{let w;a.updating=!0;try{w=await this.fetchPublishingStatus()}catch{w="unavailable"}w!=="published"&&w!=="unavailable"||(a.status==="publishing"&&this.refresh(),h.remove()),a.status=w,a.updating=!1,h.removed||(p=setTimeout(m,b,b+125))},h={removed:!1,remove(){this.removed=!0,clearTimeout(p)}};this.when().catch(()=>h.remove()),m(250),this.addHandles(h)}},e=Sl,o);return i([n({readOnly:!0,clonable:!1})],s.prototype,"publishingInfo",null),s=i([c("esri.layers.mixins.PublishableLayer")],s),s},pe=new X,Ze=new WeakMap;function Tl(t){$l(t)&&pe.push(new WeakRef(t))}function Fl(t){const e=pe.find(r=>r.deref()===t);e&&pe.remove(e)}function $l(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function ms(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:ms(e,t%e):0}let kt=0,ot=0;function El(){const t=Date.now();let e=!1;for(const r of pe){const s=r.deref();s?s.refreshInterval&&t-(Ze.get(s)??0)+5>=6e4*s.refreshInterval&&(Ze.set(s,t),s.refresh(t)):e=!0}if(e)for(let r=pe.length-1;r>=0;r--)pe.at(r).deref()||pe.removeAt(r)}Os(()=>{const t=Date.now();let e=0;for(const r of pe){const s=r.deref();s&&(e=ms(Math.round(6e4*s.refreshInterval),e),s.refreshInterval?Ze.get(s)||Ze.set(s,t):Ze.delete(s))}if(e!==ot){if(ot=e,clearInterval(kt),ot===0)return void(kt=0);kt=setInterval(El,ot)}},Ni);const bi=.1,jl=t=>{const e=t;let r=class extends e{constructor(...s){super(...s),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=_i(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||Tl(this)},()=>{})}destroy(){Fl(this)}castRefreshInterval(s){return s>=bi?s:s<=0?0:bi}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(s=Date.now()){Ms(this._debounceHasDataChanged()).then(o=>{o&&this._set("refreshTimestamp",s),this.emit("refresh",{dataChanged:o})},o=>{B.getLogger(this).error(o),this.emit("refresh",{dataChanged:!1,error:o})})}async hasDataChanged(){return!0}get test(){}};return i([n({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:S}}}}})],r.prototype,"refreshInterval",void 0),i([Ye("refreshInterval")],r.prototype,"castRefreshInterval",null),i([n({readOnly:!0})],r.prototype,"refreshTimestamp",void 0),i([n({readOnly:!0})],r.prototype,"refreshParameters",null),r=i([c("esri.layers.mixins.RefreshableLayer")],r),r},gs=Ls()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let se=class extends x(I){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return _o(this.value,this.unit,"milliseconds")}};i([Bt(gs,{nonNullable:!0})],se.prototype,"unit",void 0),i([n({type:Number,json:{write:!0},nonNullable:!0})],se.prototype,"value",void 0),se=i([c("esri.time.TimeInterval")],se);function wi(t,e){return se.fromJSON({value:t,unit:e})}let j=class extends x(I){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?Ke.fromArray(r.timeExtent):null}writeFullTimeExtent(e,r){e?.start!=null&&e.end!=null?r.timeExtent=e.toArray():r.timeExtent=null}readInterval(e,r){return r.timeInterval&&r.timeIntervalUnits?wi(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?wi(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(e,r){r.timeInterval=e?.toJSON().value??null,r.timeIntervalUnits=e?.toJSON().unit??null}};i([n({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],j.prototype,"cumulative",void 0),i([n({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],j.prototype,"endField",void 0),i([n({type:Ke,json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"fullTimeExtent",void 0),i([f("fullTimeExtent",["timeExtent"])],j.prototype,"readFullTimeExtent",null),i([g("fullTimeExtent")],j.prototype,"writeFullTimeExtent",null),i([n({type:Boolean,json:{write:!0}})],j.prototype,"hasLiveData",void 0),i([n({type:se,json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"interval",void 0),i([f("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],j.prototype,"readInterval",null),i([g("interval")],j.prototype,"writeInterval",null),i([n({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],j.prototype,"startField",void 0),i([n(ht("timeReference",!0))],j.prototype,"timeZone",void 0),i([n({type:String,json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"trackIdField",void 0),i([n({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],j.prototype,"useTime",void 0),i([n({type:[Date],json:{read:!1}})],j.prototype,"stops",void 0),j=i([c("esri.layers.support.TimeInfo")],j);const _l={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:S}}},Ol=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(s,o){const a=o.timeInfo.exportOptions;if(!a)return null;const l=a.timeOffset,u=gs.fromJSON(a.timeOffsetUnits);return l&&u?new se({value:l,unit:u}):null}set timeInfo(s){Li(s,this.fieldsIndex),this._set("timeInfo",s)}};return i([n({type:Ke,json:{write:!1}})],r.prototype,"timeExtent",void 0),i([n({type:se})],r.prototype,"timeOffset",void 0),i([f("service","timeOffset",["timeInfo.exportOptions"])],r.prototype,"readOffset",null),i([n({value:null,type:j,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],r.prototype,"timeInfo",null),i([n(_l)],r.prototype,"useViewTime",void 0),r=i([c("esri.layers.mixins.TemporalLayer")],r),r};class Ml extends Ir{constructor(e){super(),this.type="track",this.trackInfoProvider=e}get id(){return this.trackInfoProvider.id}get[mr](){return this.trackInfoProvider.trackInfo}}let q=class extends x(I){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};i([n({type:[gt],json:{write:!0}})],q.prototype,"labelingInfo",void 0),i([n(It)],q.prototype,"labelsVisible",void 0),i([n({types:vt,json:{write:!0}})],q.prototype,"renderer",void 0),i([n({type:Boolean,json:{write:!0}})],q.prototype,"visible",void 0),q=i([c("esri.layers.support.TrackPartInfo")],q);let A=class extends x(I){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new q({renderer:new Ce({symbol:zr.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new q({renderer:new Ce({symbol:zr.clone()})}),this.trackLines=new q({renderer:new Ce({symbol:Sn.clone()})}),this.timeField="startTimeField"}writeFields(e,r,s){const o=e.filter(a=>a.statisticType!=="avg_angle").map(a=>a.toJSON());oe(s,o,r)}};i([n({type:Boolean,json:{write:!0}})],A.prototype,"enabled",void 0),i([n({type:[M],json:{write:!0}})],A.prototype,"fields",void 0),i([g("fields")],A.prototype,"writeFields",null),i([n({type:q,json:{write:!0}})],A.prototype,"latestObservations",void 0),i([n({type:se,json:{write:!0}})],A.prototype,"maxDisplayDuration",void 0),i([n({type:Number,json:{write:!0}})],A.prototype,"maxDisplayObservationsPerTrack",void 0),i([n(wt)],A.prototype,"popupEnabled",void 0),i([n({type:Xe,json:{name:"popupInfo",write:!0}})],A.prototype,"popupTemplate",void 0),i([n({type:q,json:{write:!0}})],A.prototype,"previousObservations",void 0),i([n({type:q,json:{write:!0}})],A.prototype,"trackLines",void 0),i([n({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],A.prototype,"timeField",void 0),A=i([c("esri.layers.support.TrackInfo")],A);const Ll=t=>{const e=t;let r=class extends e{constructor(){super(...arguments),this.trackGraphicOrigin=new Ml(this),this.trackInfo=null}};return i([n({readOnly:!0,clonable:!1})],r.prototype,"trackGraphicOrigin",void 0),i([n({type:A})],r.prototype,"trackInfo",void 0),r=i([c("esri.layers.mixins.TrackableLayer")],r),r},Ii=new fr({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let K=class extends x(I){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};i([n({json:{write:!0}})],K.prototype,"name",void 0),i([n({json:{write:!0}})],K.prototype,"description",void 0),i([n({json:{read:Ii.read,write:Ii.write}})],K.prototype,"drawingTool",void 0),i([n({json:{write:!0}})],K.prototype,"prototype",void 0),i([n({json:{write:!0}})],K.prototype,"thumbnail",void 0),K=i([c("esri.layers.support.FeatureTemplate")],K);let Z=class extends x(I){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const r={};for(const s of Object.keys(e))r[s]=wr(e[s]);return r}writeDomains(e,r){const s={};for(const o of Object.keys(e))e[o]&&(s[o]=e[o]?.toJSON());r.domains=s}};i([n({json:{write:!0}})],Z.prototype,"id",void 0),i([n({json:{write:!0}})],Z.prototype,"name",void 0),i([n({json:{write:!0}})],Z.prototype,"domains",void 0),i([f("domains")],Z.prototype,"readDomains",null),i([g("domains")],Z.prototype,"writeDomains",null),i([n({type:[K],json:{write:!0}})],Z.prototype,"templates",void 0),Z=i([c("esri.layers.support.FeatureType")],Z);let ue=class extends x(I){constructor(e){super(e),this.alias=null,this.name=void 0,this.fieldFormat=null}};i([n({type:String,json:{write:!0}})],ue.prototype,"alias",void 0),i([n({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],ue.prototype,"name",void 0),i([n({types:Gs,json:{write:!0}})],ue.prototype,"fieldFormat",void 0),ue=i([c("esri.layers.support.FieldConfiguration")],ue);function Cl(t){const{popupTemplate:e,fieldsIndex:r}=t,s=e?.fieldInfos;if(!s?.length||!r)return;const o=[];for(const a of s){const{fieldName:l,label:u}=a,p=r.get(l);if(!p)continue;const m=u&&u!==p.alias?u:null,h=qs(a,p);(m||h)&&o.push(new ue({name:p.name,alias:m,fieldFormat:h}))}return o.length?o:null}function Al(t){const{fields:e}=t;if(!e?.length)return;const r=[];for(const s of e){const o=gr(s)?Vs(s):null;o&&r.push(new ue({name:s.name,fieldFormat:o}))}return r.length?r:null}function Rl(t,e){const{popupTemplate:r,fieldsIndex:s}=t;if(!r||!s)return;const o=Dl(t,e,r.fieldInfos);if(!o)return;const a=r.clone();return a.fieldInfos=o,a}function Dl(t,e,r){e??=[],r=v(r)??[];let s=!1;const o=new Map;for(const a of e){const l=t.fieldsIndex.get(a.name);l&&o.set(l.name,a)}for(const a of r){const l=t.fieldsIndex.get(a.fieldName);if(!l)continue;const u=o.get(l.name);a.label=u?.alias||l.alias,a.format=gr(l)&&u?.fieldFormat?Ci(u.fieldFormat,l):null,s=!0,o.delete(l.name)}for(const a of o.values()){const l=Pl(t,a);l&&(r.push(l),s=!0)}return s?r:null}function Pl(t,e){const{name:r,alias:s,fieldFormat:o}=e,a=t.fieldsIndex.get(r);if(!a||!s&&!o)return;const l=s||a.alias,u=gr(a)&&o?Ci(o,a):null;return new Ai({fieldName:a.name,label:l,format:u,visible:!1,isEditable:Ri(a,t)})}function Nl(){return{fields:{type:[So],value:null,set:function(t){if(t&&et("big-integer-warning-enabled")){const e=t.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(e.length){const r=e.map(s=>`'${s.name}'`).join(", ");B.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return xn.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){const t=this._userOutFields;if(!t?.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const e of t)this.fieldsIndex?.has(e)||B.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${e} found in outFields`,{layer:this,outFields:t});return Us(this.fieldsIndex,t)}}}}const kl="relationships/",Gl="expression/",ql=/<br\s*\/*>/gi;let L=class extends mt{constructor(t){super(t),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||Oo(()=>Bs()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??G(()=>import("./DbYkBGj4.js"),__vite__mapDeps([22,3,4,12,2,6,13,5,1,11,23,24,25,21,20,26,27,28,29]),import.meta.url).then(t=>this._featureUtils=t)}get calculatedExpressions(){const t=new X;if(!this.expressionsUsedInTitle.length)return t;if(!this._arcadeTask?.value){for(const e of this.expressionsUsedInTitle??[])t.push({name:e.name,invalid:!0});return t}for(const e of this.expressionsUsedInTitle)try{const r=this._arcadeTask.value.arcade.parseScript(e.expression,["$layer","$map","$datastore"]);if(r.isAsync){t.push({name:e.name,invalid:!0});break}t.push({name:e.name,syntax:r,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(r,{vars:{$feature:"any"}})})}catch{t.push({name:e.name,invalid:!0});break}return t}get expressionsUsedInTitle(){let t=this.effectivePopupTemplate?.title??"";return typeof t!="string"?[]:(t=t.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(e=>t.includes(`{expression/${e.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(t=>t.invalid===!0)}get requiredFields(){const t=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const r of this.calculatedExpressions?.toArray()??[])try{const s=this._arcadeTask.value.arcade.extractFieldLiterals(r.syntax);for(const o of s){const a=o.split("."),l=this.fieldsIndex.get(a.at(-1)??"");l&&t.add(l.name)}}catch{}const e=this._extractFieldNames(this.workingTitle);for(const r of e){const s=this.fieldsIndex.get(r);s&&t.add(s.name)}return this.objectIdField!=null&&t.add(this.objectIdField),t}get titleFromDisplayField(){let t="";return this.displayField&&(t=this.fieldsIndex.get(this.displayField)?.name??""),t||(t=this.fieldsIndex.get(this.objectIdField)?.name??""),t?`{${t}}`:""}get workingTitle(){const t=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return t===""||t==null||this.hasBadExpressions||typeof t!="string"?this.titleFromDisplayField:t}async getTitle(t,e,r){const s=e.getObjectId()??e.attributes[t.objectIdField];return(await this.getTitles(t,[e],r)).get(s)??""}async getTitles(t,e,r){const s=new Map,o=r?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);r?.fetchMissingFields&&(e=await this._checkAndReQueryGraphics(t,e));const{fieldInfoMap:l,workingTitle:u}=this,p=u&&l;e.forEach(m=>{const h=m.getObjectId()??m.attributes[t.objectIdField];let b=p?a({attributes:m.attributes,expressionAttributes:null,fieldInfoMap:l,globalAttributes:this._createFormattedAttributes(t,m,o).global,layer:t,text:u}):"";r?.removeHTML&&(b=xo.sanitize(b).replaceAll(ql," ")),s.set(h,b)})}catch{}return s}async _checkAndReQueryGraphics(t,e){const r=e.map(s=>s.getObjectId()??s.attributes[t.objectIdField]).filter(fo);if(r.length!==e.length)return e;if(e.some(s=>!zs(s,this.requiredFields))){const s=t.createQuery();s.where="1=1",s.outFields=[...this.requiredFields],s.objectIds=r;const o=await t.queryFeatures(s);if(o?.features.length===e.length)return o.features}return e}_createFieldInfoMap(t){const e=new Map;if(!t)return e;for(const r of t){if(!r.fieldName)continue;const s=this.fieldsIndex.get(r.fieldName),o=s?.name??r.fieldName;r.fieldName=o,e.set(o.toLowerCase(),r)}return e}_createFormattedAttributes(t,e,r="system"){const s=this.effectivePopupTemplate?.fieldInfos??[],o={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const l=this._arcadeTask.value.Feature.createFromGraphicLikeObject(e.geometry,e.attributes,t,null);for(const u of this.calculatedExpressions)try{o[`expression/${u.name}`]=u.func({vars:{$feature:l}})}catch{}}const a={...e.attributes,...o};return{global:this._featureUtils.formatAttributes({fieldInfos:s,attributes:a,graphic:e,timeZone:r,layer:t,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(t){return Mi(t).filter(e=>!(e.startsWith(kl)||e.startsWith(Gl)))}};i([n({readOnly:!0})],L.prototype,"_arcadeTask",null),i([n()],L.prototype,"_featureUtils",void 0),i([n({readOnly:!0})],L.prototype,"featureUtilsPromise",null),i([n({readOnly:!0})],L.prototype,"calculatedExpressions",null),i([n()],L.prototype,"displayField",void 0),i([n()],L.prototype,"effectivePopupTemplate",void 0),i([n()],L.prototype,"expressionsUsedInTitle",null),i([n()],L.prototype,"fieldsIndex",void 0),i([n()],L.prototype,"fieldInfoMap",null),i([n()],L.prototype,"fields",void 0),i([n()],L.prototype,"objectIdField",void 0),i([n()],L.prototype,"requiredFields",null),L=i([c("esri.layers.support.TitleCreator")],L);const Me=[];function Vl(t,e){if(Pi(t.url??""))return!0;const{wkid:r}=e;for(const s of Me){if((t.version??0)>=s[0])return!0;if(typeof s[1]=="function"&&(s[1]=s[1]()),s[1].has(r))return!1}return!0}Me.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),Me.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Me.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Me.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Me.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);function Ul({displayField:t,editFieldsInfo:e,fields:r,objectIdField:s,title:o},a){if(!r)return null;const l=Hl({editFieldsInfo:e,fields:r,objectIdField:s},a);if(!l.length)return null;const u=Zl({titleBase:o,fields:r,displayField:t}),p=Jl();return new Xe({title:u,content:p,fieldInfos:l})}const Bl=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):Qs(t,e);function zl({fields:t,ignoreFieldTypes:e,sortDisabled:r}){const s=t;return e&&(t=t.filter(o=>!e.includes(o.type))),t===s&&(t=t.slice()),r!==!0&&t.sort(Ql),t}function Ql(t,e){return t.type==="oid"?-1:e.type==="oid"?1:Si(t)?-1:Si(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function Hl(t,e){const r=e?.visibleFieldNames;return zl({fields:t.fields??[],ignoreFieldTypes:e?.ignoreFieldTypes||Kl,sortDisabled:e?.sortDisabled}).map(s=>new Ai({fieldName:s.name,isEditable:Ri(s,t),label:s.alias,format:Wl(s),visible:Bl(s,{...t,visibleFieldNames:r})}))}function Wl(t){switch(t.type){case"small-integer":case"integer":return new Ft({digitSeparator:!0,places:0});case"single":case"double":return new Ft({digitSeparator:!0,places:2});case"string":return Zs(t.name)?new Ft({digitSeparator:!0,places:0}):void 0;default:return}}function Jl(){return[new Ws,new Js]}function Zl(t){const e=Hs(t),{titleBase:r}=t;return e?`${r}: {${e.trim()}}`:r??""}function Si(t){return(t.name&&t.name.toLowerCase())==="name"?!0:t.alias?.toLowerCase()==="name"}const Kl=["geometry","blob","raster","guid","xml"],E="FeatureLayer";function nt(t,e){return new $("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function xi(t){return t&&t instanceof X}const Gt=Nl();function qt(t,e,r){const s=!!r?.writeLayerSchema;return{enabled:s,ignoreOrigin:s}}let y=class extends nl(hl(Sa(xl(wa(ya(go(wl(Ol(Ll(vo(jl(da(ml(Il(Qi(ca(pa(x(Mo))))))))))))))))))){constructor(...t){super(...t),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new oa(this),this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=yt.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=_i(async(e,r,s)=>{const{save:o,saveAs:a}=await G(()=>import("./DPdDABkP.js"),__vite__mapDeps([30,5,3,4,31,32,33,13,2,1,6,16,17,18,19,12,20,21,11,34,10]),import.meta.url);switch(e){case 0:return o(this,r);case 1:return a(this,s,r)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(e).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},t).catch(fe).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(e);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new $("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(e))}).then(()=>Go(this,"load",t));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const t=this._get("_titleCreator");return ji(t),new L({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(t,e){return e=e.layerDefinition||e,fs(e,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,e){return this._readEditingEnabled(e,!1)}readEditingEnabledFromWebMap(t,e,r){return this._readEditingEnabled(e,!0,r)}writeEditingEnabled(t,e){this._writeEditingEnabled(t,e,!1)}writeEditingEnabledToWebMap(t,e,r,s){this._writeEditingEnabled(t,e,!0,s)}get effectiveEditingEnabled(){return qo(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}set fieldConfigurations(t){if(this._hasMemorySource()||(this._override("fieldConfigurations",t),!this.loaded))return;const e=Rl(this,t);e&&this._set("popupTemplate",e)}get fieldConfigurations(){if(!this._hasMemorySource())return this._isOverridden("fieldConfigurations")?this._get("fieldConfigurations"):Cl(this)||null}readIsTable(t,e){return(e=e?.layerDefinition??e).type==="Table"||!e.geometryType}writeIsTable(t,e,r,s){s?.writeLayerSchema&&oe(r,t?"Table":"Feature Layer",e)}readGlobalIdField(t,e){return ki(e.layerDefinition||e)}readObjectIdField(t,e){return Gi(e.layerDefinition||e)}writePopupTemplate(t,e,r,s){t&&(e[r]=t.toJSON({...s,writeFieldFormat:!s?.writeLayerSchema}))}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){Dr(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,e,r){e=e.layerDefinition||e;const s=e.drawingInfo?.renderer;if(s){const o=ft(s,e,r)??void 0;return o||B.getLogger(this).error("Failed to create renderer",{rendererDefinition:e.drawingInfo.renderer,layer:this,context:r}),o}return Sr(e,r)}set source(t){const e=this._get("source");e!==t&&(xi(e)&&this._resetMemorySource(e),xi(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof X?new re({layer:this,items:t}):t:null}readSource(t,e){const r=Vi.fromJSON(e.featureSet);return new re({layer:this,items:r?.features??[]})}readTemplates(t,e){const r=e.editFieldsInfo,s=r?.creatorField,o=r?.editorField;return t=t?.map(a=>K.fromJSON(a)),this._fixTemplates(t,s),this._fixTemplates(t,o),t}readTitle(t,e){const r=e.layerDefinition?.name??e.name,s=e.title||e.layerDefinition?.title;if(r){const o=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?ao(this.url,r):r;let a=r;if(!a&&this.url){const l=vr(this.url);l!=null&&(a=l.title)}return a?(this.sublayerTitleMode==="item-title-and-service-name"&&o&&o!==a&&(a=o+" - "+a),lo(a)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(t,e){return e.title||e.layerDefinition?.name}readTypeIdField(t,e){let r=(e=e.layerDefinition||e).typeIdField;if(r&&e.fields){r=r.toLowerCase();const s=e.fields.find(o=>o.name.toLowerCase()===r);s&&(r=s.name)}return r}readTypes(t,e){t=(e=e.layerDefinition||e).types;const r=e.editFieldsInfo,s=r?.creatorField,o=r?.editorField;return t?.map(a=>(a=Z.fromJSON(a),this._fixTemplates(a.templates,s),this._fixTemplates(a.templates,o),a))}readVisible(t,e){return e.layerDefinition?.defaultVisibility!=null?!!e.layerDefinition.defaultVisibility:e.visibility!=null?!!e.visibility:void 0}async addAttachment(t,e){const r=await Vo(this,t,e,E);return this.lastEditsEventDate=new Date,r}async updateAttachment(t,e,r){const s=await Uo(this,t,e,r,E);return this.lastEditsEventDate=new Date,s}async applyEdits(t,e){return Bo(this,t,e)}async uploadAssets(t,e){return zo(this,t,e)}createFieldConfigurations(){return Al(this)}createPopupTemplate(t){return Ul(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:e}=await Cs(G(()=>import("./CciY6SWq.js"),__vite__mapDeps([35,5,2,3,4,1,6,13,12,28,20,21,36,24,25,37,38,39,40,23,26,19,41,42,43,44,45,46,47,48,49,7,50,11,51,52,53,54,29,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78]),import.meta.url),t);return new e({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:t})}createQuery(){const t=Qo(this);t.dynamicDataSource=this.dynamicDataSource;const e=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=Ks(this.definitionExpression,e);return t.where=r||"1=1",t}async deleteAttachments(t,e){const r=await Ho(this,t,e,E);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(t){return Wo(this,t,E)}async getFeatureTitle(t,e){return this._titleCreator.getTitle(this,t,e)}async getFeatureTitles(t,e){return this._titleCreator.getTitles(this,t,e)}getFeatureType(t){return Jo(this.types,this.typeIdField,t)}getFieldAlias(t){const e=this.getField(t);if(e)return this.getFieldConfiguration(e.name)?.alias||e.alias}getFieldConfiguration(t){return t=t.toLowerCase(),this.fieldConfigurations?.find(e=>e.name.toLowerCase()===t)}getFieldDomain(t,e){return Zo(this,t,e,this.getField(t)?.domain??null)}async queryAttachments(t,e){return Ko(this,t,e,E)}async queryFeatures(t,e){const r=await this.load(),s=await r.source.queryFeatures(To.from(t)??r.createQuery(),e),o=this.graphicOrigin;if(s?.features)for(const a of s.features)a.layer=a.sourceLayer=r,a.origin=o;return s}async queryObjectIds(t,e){return await Xo(this,t,e,E)}async queryFeatureCount(t,e){return Yo(this,t,e,E)}async queryExtent(t,e){return en(this,t,e,E)}async queryRelatedFeatures(t,e){return tn(this,t,e,E)}async queryRelatedFeaturesCount(t,e){return rn(this,t,e,E)}async queryPivot(t,e){const{source:r,capabilities:s}=await this.load();if(!r.queryPivot||!s?.operations?.supportsQueryPivot)throw new $(E,"Layer source does not support queryPivot capability");const o=await G(()=>import("./CHHlpJJw.js").then(l=>l.P),__vite__mapDeps([79,2,3,4,24,25,21,1,5,6,23,12,13,20,26,29,11]),import.meta.url),a=await r.queryPivot(o.default.from(t),e);if(a?.features)for(const l of a.features)l.layer=l.sourceLayer=this;return a}async queryTopFeatures(t,e){const{source:r,capabilities:s}=await this.load();if(!r.queryTopFeatures||!s?.query?.supportsTopFeaturesQuery)throw new $(E,"Layer source does not support queryTopFeatures capability");const o=await G(()=>import("./KGFHE0pC.js"),__vite__mapDeps([80,2,3,4,1,5,6,23,24,12,13,25,21,20,26,29,11]),import.meta.url),a=await r.queryTopFeatures(o.default.from(t),e);if(a?.features)for(const l of a.features)l.layer=l.sourceLayer=this;return a}async queryAttributeBins(t,e){const{source:r,capabilities:s}=await this.load();if(!r.queryAttributeBins)throw new $(E,"Layer source does not support queryAttributeBins capability");sn(t,s,E);const o=await G(()=>import("./C36214zk.js"),__vite__mapDeps([81,2,3,4,24,25,21,1,5,6,23,12,13,20,26,82,19,47,48,49,7,50,83,74,29,11]),import.meta.url),a=await r.queryAttributeBins(o.default.from(t),e);if(a.features)for(const l of a.features)l.layer=l.sourceLayer=this;return a}async queryTopObjectIds(t,e){const{source:r,capabilities:s}=await this.load();if(!r.queryTopObjectIds||!s?.query.supportsTopFeaturesQuery)throw new $(E,"Layer source does not support queryTopObjectIds capability");const o=await G(()=>import("./KGFHE0pC.js"),__vite__mapDeps([80,2,3,4,1,5,6,23,24,12,13,25,21,20,26,29,11]),import.meta.url);return(await r.queryTopObjectIds(o.default.from(t),e)).filter(Xs)}async queryTopFeaturesExtent(t,e){const{source:r,capabilities:s}=await this.load();if(!r.queryTopExtents||!s?.query?.supportsTopFeaturesQuery)throw new $(E,"Layer source does not support queryTopExtents capability");const o=await G(()=>import("./KGFHE0pC.js"),__vite__mapDeps([80,2,3,4,1,5,6,23,24,12,13,25,21,20,26,29,11]),import.meta.url);return r.queryTopExtents(o.default.from(t),e)}async queryTopFeatureCount(t,e){const{source:r,capabilities:s}=await this.load();if(!r.queryTopCount||!s?.query?.supportsTopFeaturesQuery)throw new $(E,"Layer source does not support queryFeatureCount capability");const o=await G(()=>import("./KGFHE0pC.js"),__vite__mapDeps([80,2,3,4,1,5,6,23,24,12,13,25,21,20,26,29,11]),import.meta.url);return r.queryTopCount(o.default.from(t),e)}read(t,e){const r=t.featureCollection;if((r||t.type==="Feature Collection")&&(this.resourceInfo=t),r){const{layers:s,showLegend:o}=r;s?.length===1&&(super.read(s[0],e),o!=null&&super.read({showLegend:o},e))}super.read(t,e),e&&e.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,e){e={...e,origin:e?.origin??void 0,writeLayerSchema:e?.writeLayerSchema??this._hasMemorySource()};const{origin:r,layerContainerType:s,messages:o}=e;if(this.dynamicDataSource)return o?.push(nt(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&s!=="tables")return o?.push(nt(this,`a table source can only be written to tables, not ${s}`)),null;if(this._hasMemorySource())return o?.push(nt(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&s==="tables")return o?.push(nt(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(t,e)}clone(){if(this._hasMemorySource())throw new $(E,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){return!!this.loaded&&(this.source?.type==="memory"||Vl(this,t))}async save(t){return this._debouncedSaveOperations(0,t)}async saveAs(t,e){return this._debouncedSaveOperations(1,e,t)}_readEditingEnabled(t,e,r){let s=t.layerDefinition?.capabilities;return s?this._hasEditingCapability(s):(s=t.capabilities,e&&r?.origin==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(e=>e.trim()).includes("editing")}_writeEditingEnabled(t,e,r,s){if(!t){const o=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";oe("layerDefinition.capabilities",o,e),r&&!s?.writeLayerSchema&&(e.capabilities=o)}}_fetchFirstValidLayerId(t){return br(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{const r=e.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)})}async initLayerProperties(t){return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Dr(this.renderer,this.fieldsIndex),Li(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),vn(this,{origin:"service"})}async hasDataChanged(){return on(this)}async fetchPublishingStatus(){const t=this.source;return t?.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){const t=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||this.fields?.some(e=>e.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,e){t&&t.forEach(r=>{const s=r.prototype?.attributes;s&&e&&delete s[e]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new $("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new $("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(e=>{e.layer=this,e.sourceLayer=this}),this.addHandles([t.on("after-add",e=>{e.item.layer=this,e.item.sourceLayer=this}),t.on("after-remove",e=>{e.item.layer=null,e.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(e=>{e.layer=null,e.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(t){return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}};i([n({clonable:!1,readOnly:!0})],y.prototype,"_titleCreator",null),i([n(Da)],y.prototype,"attributeTableTemplate",void 0),i([f("service","capabilities")],y.prototype,"readCapabilities",null),i([n({json:{origins:{"web-scene":{write:!1}},write:!0}})],y.prototype,"charts",void 0),i([n({readOnly:!0})],y.prototype,"createQueryVersion",null),i([n({json:{read:{source:"layerDefinition.copyrightText"}}})],y.prototype,"copyright",void 0),i([n({json:{read:{source:"layerDefinition.displayField"}}})],y.prototype,"displayField",void 0),i([n({types:Ys,readOnly:!0})],y.prototype,"defaultSymbol",void 0),i([n({type:Fo})],y.prototype,"dynamicDataSource",void 0),i([n({type:Boolean})],y.prototype,"editingEnabled",null),i([f(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],y.prototype,"readEditingEnabled",null),i([f("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],y.prototype,"readEditingEnabledFromWebMap",null),i([g(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],y.prototype,"writeEditingEnabled",null),i([g("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],y.prototype,"writeEditingEnabledToWebMap",null),i([n({readOnly:!0})],y.prototype,"effectiveEditingEnabled",null),i([n({clonable:!1,readOnly:!0})],y.prototype,"featureTitleFields",null),i([n({type:[ue],json:{name:"layerDefinition.fieldConfigurations",write:{overridePolicy(t,e,r){return{enabled:!r?.writeLayerSchema,ignoreOrigin:this.originIdOf(e)===1}}}}})],y.prototype,"fieldConfigurations",null),i([n({...Gt.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:qt}}}}})],y.prototype,"fields",void 0),i([n(Gt.fieldsIndex)],y.prototype,"fieldsIndex",void 0),i([n({type:U,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],y.prototype,"formTemplate",void 0),i([n({json:{read:{source:"layerDefinition.extent"}}})],y.prototype,"fullExtent",void 0),i([n({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:qt,writer(t,e,r){const s=t?Ut.toJSON(t):null;s&&oe(r,s,e)}}}},read:{source:"layerDefinition.geometryType",reader:Ut.read}}})],y.prototype,"geometryType",void 0),i([n({readOnly:!0,clonable:!1})],y.prototype,"graphicOrigin",void 0),i([n({json:{read:{source:"layerDefinition.hasM"}}})],y.prototype,"hasM",void 0),i([n({json:{read:{source:"layerDefinition.hasZ"}}})],y.prototype,"hasZ",void 0),i([n(Ca)],y.prototype,"id",void 0),i([n({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],y.prototype,"infoFor3D",void 0),i([n({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],y.prototype,"isTable",void 0),i([f("service","isTable",["type","geometryType"]),f("isTable",["layerDefinition.type","layerDefinition.geometryType"])],y.prototype,"readIsTable",null),i([g("web-map","isTable")],y.prototype,"writeIsTable",null),i([n(It)],y.prototype,"labelsVisible",void 0),i([n({type:[gt],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:Vr,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:Vr,write:{layerContainerTypes:S}}})],y.prototype,"labelingInfo",void 0),i([n((()=>{const t=v(La);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,r,s){oe(s,uo(e),r)}}},t})())],y.prototype,"opacity",void 0),i([n(Oa)],y.prototype,"legendEnabled",void 0),i([n({type:["show","hide"],json:(()=>{const t=v(ls.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],y.prototype,"listMode",void 0),i([f("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],y.prototype,"readGlobalIdField",null),i([n({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:qt}}}}})],y.prototype,"objectIdField",void 0),i([f("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],y.prototype,"readObjectIdField",null),i([n({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:S}}})],y.prototype,"operationalLayerType",void 0),i([n(Gt.outFields)],y.prototype,"outFields",void 0),i([n({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],y.prototype,"path",void 0),i([n(wt)],y.prototype,"popupEnabled",void 0),i([n({type:Xe,json:{name:"popupInfo",write:!0}})],y.prototype,"popupTemplate",void 0),i([g("popupTemplate")],y.prototype,"writePopupTemplate",null),i([n({readOnly:!0})],y.prototype,"defaultPopupTemplate",null),i([n({types:vt,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:bn,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:S,overridePolicy:(t,e,r)=>({ignoreOrigin:r?.writeLayerSchema,layerContainerTypes:S})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,r)=>({ignoreOrigin:r?.writeLayerSchema,layerContainerTypes:S})}}})],y.prototype,"renderer",null),i([f("service","renderer",["drawingInfo.renderer","defaultSymbol"]),f("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],y.prototype,"readRenderer",null),i([n()],y.prototype,"resourceInfo",void 0),i([n((()=>{const t=v(ja);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],y.prototype,"screenSizePerspectiveEnabled",void 0),i([n({clonable:!1})],y.prototype,"source",null),i([Ye("source")],y.prototype,"castSource",null),i([f("portal-item","source",["featureSet"]),f("web-map","source",["featureSet"])],y.prototype,"readSource",null),i([n({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],y.prototype,"spatialReference",void 0),i([n({type:Number})],y.prototype,"subtypeCode",void 0),i([n({type:[K]})],y.prototype,"templates",void 0),i([f("templates",["editFieldsInfo","creatorField","editorField","templates"])],y.prototype,"readTemplates",null),i([n({type:j})],y.prototype,"timeInfo",void 0),i([n()],y.prototype,"title",void 0),i([f("service","title",["name"]),f("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],y.prototype,"readTitle",null),i([f("web-map","title",["layerDefinition.name","title"])],y.prototype,"readTitleFromWebMap",null),i([n({type:String})],y.prototype,"sublayerTitleMode",void 0),i([n({json:{read:!1}})],y.prototype,"type",void 0),i([n({type:String})],y.prototype,"typeIdField",void 0),i([f("service","typeIdField"),f("typeIdField",["layerDefinition.typeIdField"])],y.prototype,"readTypeIdField",null),i([n({type:[Z]})],y.prototype,"types",void 0),i([f("service","types",["types"]),f("types",["layerDefinition.types"])],y.prototype,"readTypes",null),i([n({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:S}}}}})],y.prototype,"visible",void 0),i([f("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],y.prototype,"readVisible",null),y=i([c("esri.layers.FeatureLayer")],y);const Fp=Object.freeze(Object.defineProperty({__proto__:null,get default(){return y}},Symbol.toStringTag,{value:"Module"}));export{wa as $,np as A,Pa as B,Na as C,Va as D,wl as E,ya as F,hl as G,Sa as H,Ll as I,Ul as J,Da as K,Nl as L,It as M,ur as N,wt as O,ja as P,K as Q,Z as R,Ra as S,Aa as T,La as U,up as V,lp as W,ds as X,us as Y,U as Z,nl as _,Uu as a,L as a0,Ea as a1,j as a2,dp as a3,fs as a4,_e as a5,gl as a6,N as a7,se as a8,op as a9,sp as aa,Je as ab,ce as ac,_l as ad,Xu as ae,Yu as af,k as ag,ha as ah,fa as ai,Ia as aj,ll as ak,bl as al,gs as am,Nt as an,va as ao,ba as ap,Fp as aq,Ga as b,ga as c,Bu as d,ap as e,St as f,ml as g,pp as h,na as i,Il as j,Qi as k,da as l,pa as m,Ma as n,Vu as o,zu as p,jl as q,Oa as r,ca as s,ma as t,Ca as u,Ol as v,Vl as w,$u as x,_a as y,y as z};
