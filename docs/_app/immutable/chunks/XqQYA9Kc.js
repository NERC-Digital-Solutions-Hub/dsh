import{_ as o,m as l,b as m,a as y}from"./Aa_nm3Tf.js";import{s as i}from"./DSdBzmdi.js";import{h as g,e as f}from"./BHwe4xe6.js";import{n as C}from"./BvZ8mO3n.js";const b="not-loaded",w="loading",S="failed",h="loaded",$=s=>{const u=s;let t=class extends u{constructor(...n){super(...n),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const c=this.load.bind(this);this.load=p=>{const _=new Promise((e,a)=>{const d=g(p,a);this.destroyed&&a(new i("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(e,a).finally(()=>{d&&d.remove()})});if(this.loadStatus===b){this._set("loadStatus",w);const e=this._loadController=new AbortController;c({signal:e.signal})}return r(),_}})),this.when(()=>{this._set("loadStatus",h),this._loadController=null},r=>{this.destroyed||(this._set("loadStatus",S),this._set("loadError",r),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=f(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===h}get loadWarnings(){return this._get("loadWarnings")}load(n){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new i("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return o([l({readOnly:!0})],t.prototype,"loaded",null),o([l({readOnly:!0})],t.prototype,"loadError",void 0),o([l({clonable:!1})],t.prototype,"loadStatus",void 0),o([l({type:[m],readOnly:!0})],t.prototype,"loadWarnings",null),t=o([y("esri.core.Loadable")],t),t},O=$(C);function x(s){return!(!s||!s.load)}export{x as m,$ as p,O as u};
