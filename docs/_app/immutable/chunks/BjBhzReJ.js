const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./zPuDwg0M.js","./C9_KfL0q.js","./BzZgUCJc.js","./C_Nw28A1.js","./2lNp6ocP.js","./Vj4mvAVU.js","./PPVm8Dsz.js","./COT3swUQ.js","./Dk327Tp9.js","./sk86Thi9.js","./CCpIbVD-.js","./ClIohtAG.js","./DGNRnva7.js","./BLib0ZeX.js","./CzWAt4g0.js","./C8hxyIL3.js","./ftSj4mLm.js","./bnayRBMH.js","./CA17aTJq.js"])))=>i.map(i=>d[i]);
import{e as D,I as V,v as G,D as H,p as at,s as ot,a as ut,w as lt,O as ct}from"./C8hxyIL3.js";import{u as pt,s as J,c as dt,v as W,l as q}from"./Dk327Tp9.js";import{i as K,s as m}from"./C9_KfL0q.js";import{s as ft}from"./BzZgUCJc.js";import{_ as i,m as o,b as O,r as C,a as j,n as yt,z as ht,$ as mt,k as Q,D as Y,h as gt,aj as wt,F as bt,E as $t,j as vt}from"./Vj4mvAVU.js";import{z as Z,f as S,H as x,Y as _t,b as Tt}from"./2lNp6ocP.js";import{I as Et}from"./COT3swUQ.js";import{_ as X}from"./PPVm8Dsz.js";async function Dt(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:r}=await X(async()=>{const{fromItem:n}=await import("./zPuDwg0M.js");return{fromItem:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url);try{return await r(e)}catch(n){const s=e?.portalItem,a=s?.id||"unset",u=s?.portal?.url||ft.portalUrl;throw K.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+u+"', id: '"+a+"')",n),n}}const I={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function L(t,e,r,n=D){const s=new V(G(n)),a=H.fromJSDate(t,{zone:s}),u=r==="decades"||r==="centuries"?"year":tt(r);return r==="decades"&&(e*=10),r==="centuries"&&(e*=100),a.plus({[u]:e}).toJSDate()}function re(t,e,r="milliseconds"){const n=t.getTime(),s=Lt(e,r,"milliseconds");return new Date(n+s)}function U(t,e,r=D){const n=new V(G(r)),s=H.fromJSDate(t,{zone:n});if(e==="decades"||e==="centuries"){const u=s.startOf("year"),{year:c}=u,h=c-c%(e==="decades"?10:100);return u.set({year:h}).toJSDate()}const a=tt(e);return s.startOf(a).toJSDate()}function Lt(t,e,r){return t===0?0:t*I[e]/I[r]}function ne(t,e){return t&&e?t.intersection(e):t||e}function tt(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var d,b;let p=(b=class extends yt{static get allTime(){return B}static get empty(){return St}static fromArray(e){return new d({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,r){return r.end!=null?new Date(r.end):null}writeEnd(e,r){r.end=e?.getTime()??null}get isAllTime(){return this.equals(d.allTime)}get isEmpty(){return this.equals(d.empty)}readStart(e,r){return r.start!=null?new Date(r.start):null}writeStart(e,r){r.start=e?.getTime()??null}clone(){return new d({end:this.end,start:this.start})}equals(e){if(!e)return!1;const r=this.start?.getTime()??this.start,n=this.end?.getTime()??this.end,s=e.start?.getTime()??e.start,a=e.end?.getTime()??e.end;return r===s&&n===a}expandTo(e,r=D){if(this.isEmpty||this.isAllTime)return this.clone();let n=this.start;n&&(n=U(n,e,r));let s=this.end;if(s){const a=U(s,e,r);s=s.getTime()===a.getTime()?a:L(a,1,e,r)}return new d({start:n,end:s})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return d.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const r=this.start?.getTime()??-1/0,n=this.end?.getTime()??1/0,s=e.start?.getTime()??-1/0,a=e.end?.getTime()??1/0;let u,c;return s>=r&&s<=n?u=s:r>=s&&r<=a&&(u=r),n>=s&&n<=a?c=n:a>=r&&a<=n&&(c=a),u==null||c==null||isNaN(u)||isNaN(c)?d.empty:new d({start:u===-1/0?null:new Date(u),end:c===1/0?null:new Date(c)})}offset(e,r,n=D){if(this.isEmpty||this.isAllTime)return this.clone();const s=new d,{start:a,end:u}=this;return a!=null&&(s.start=L(a,e,r,n)),u!=null&&(s.end=L(u,e,r,n)),s}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return B.clone();const r=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,n=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new d({start:r,end:n})}},d=b,b);i([o({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),i([O("end")],p.prototype,"readEnd",null),i([C("end")],p.prototype,"writeEnd",null),i([o({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),i([o({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),i([o({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),i([O("start")],p.prototype,"readStart",null),i([C("start")],p.prototype,"writeStart",null),p=d=i([j("esri.time.TimeExtent")],p);const B=new p,St=new p({start:void 0,end:void 0});let At=0,l=class extends at(ot(pt)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Z(-180,-90,180,90,S.WGS84),this.id=Date.now().toString(16)+"-layer-"+At++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=S.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const r=typeof e=="string"?{url:e}:e;return(await X(async()=>{const{fromUrl:n}=await import("./CA17aTJq.js");return{fromUrl:n}},__vite__mapDeps([18,6,1,2,7,4,5,3,8,9,10,12]),import.meta.url)).fromUrl(r)}static fromPortalItem(e){return Dt(e)}initialize(){this.when().catch(e=>{ht(e)||K.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Et(this.url)}createLayerView(e,r){return Promise.reject(new m("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await x(e,{query:{f:"json"},responseType:"json"})).data;throw new m("layer:no-attribution-data","Layer does not have attribution data")}};i([o({type:String})],l.prototype,"attributionDataUrl",void 0),i([o({readOnly:!0})],l.prototype,"effectiveVisible",null),i([o({type:Z})],l.prototype,"fullExtent",void 0),i([o({readOnly:!0})],l.prototype,"hasAttributionData",null),i([o({type:String,clonable:!1})],l.prototype,"id",void 0),i([o({type:Boolean,nonNullable:!0})],l.prototype,"legendEnabled",void 0),i([o({type:["show","hide","hide-children"]})],l.prototype,"listMode",void 0),i([o({type:Number,range:{min:0,max:1},nonNullable:!0})],l.prototype,"opacity",void 0),i([o({clonable:!1})],l.prototype,"parent",void 0),i([o({readOnly:!0})],l.prototype,"parsedUrl",null),i([o({type:Boolean,readOnly:!0})],l.prototype,"persistenceEnabled",void 0),i([o({type:Boolean})],l.prototype,"popupEnabled",void 0),i([o({type:Boolean})],l.prototype,"attributionVisible",void 0),i([o({type:S})],l.prototype,"spatialReference",void 0),i([o({type:String})],l.prototype,"title",void 0),i([o({readOnly:!0,json:{read:!1}})],l.prototype,"type",void 0),i([o()],l.prototype,"url",void 0),i([o({type:p})],l.prototype,"visibilityTimeExtent",void 0),i([o({type:Boolean,nonNullable:!0})],l.prototype,"visible",void 0),l=i([j("esri.layers.Layer")],l);const ie=Object.freeze(Object.defineProperty({__proto__:null,get default(){return l}},Symbol.toStringTag,{value:"Module"})),jt={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let E=new WeakMap,et={};function A(t){const e=t||et;if(!E.has(e)){const r=J(),n=r&&jt[r]||dt();E.set(e,new Intl.NumberFormat(n,t))}return E.get(e)}function ae(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function oe(t){const{minimumFractionDigits:e,maximumFractionDigits:r,useGrouping:n}=t;return{minimumFractionDigits:e,maximumFractionDigits:r,useGrouping:n==="auto"?"auto":n==="always"}}function ue(t,e){return Object.is(t,-0)&&(t=0),A(e).format(t)}function le(t,e=q()){if(!t)return null;let r=M.get(e);if(!r){const n=A().formatToParts(12345.6),s=[...A({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(s.map((f,g)=>[f,g])),u=new RegExp(`[${n.find(f=>f.type==="group")?.value}]`,"g"),c=new RegExp(`[${n.find(f=>f.type==="decimal")?.value}]`),h=new RegExp(`[${s.join("")}]`,"g"),_=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,$=/[-\u2212\u2013\u2014\u2015]/g;r=f=>{if((f=f.trim().replaceAll(u,"").replace(c,".").replace(h,it=>String(a.get(it))).replaceAll(_,"").replaceAll($,"-"))==="")return null;const g=Number(f);return isNaN(g)?null:g},M.set(e,r)}return r(t)}W(()=>{E=new WeakMap,et={}});const M=new Map,rt={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function xt(t){return t in rt}function R(t){if(xt(t)){const e=rt[t];return e===!0?t:e}return null}const v=[],w=new Map;function F(t){for(const e of w.keys())nt(t.pattern,e)&&w.delete(e)}function kt(t){return v.includes(t)||(F(t),v.unshift(t)),Q(()=>{const e=v.indexOf(t);e>-1&&(v.splice(e,1),F(t))})}async function ce(t){const e=q();w.has(t)||w.set(t,Ot(t,e));const r=w.get(t);return r&&await Ct.add(r),r}function Nt(t){const e=J(t);return e?R(t)??R(e):null}async function Ot(t,e){const r=[];for(const n of v)if(nt(n.pattern,t))try{return await n.fetchMessageBundle(t,e)}catch(s){r.push(s)}throw r.length?new m("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:r}):new m("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function nt(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}W(()=>{w.clear()});const Ct=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=mt())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function It(t,e,r,n){const s=e.exec(r);if(!s)throw new m("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${e}"`);const a=s[1]?`${s[1]}/`:"",u=s[2],c=Nt(n),h=`${a}${u}.json`,_=c?`${a}${u}_${c}.json`:h;let $;try{$=await P(t(_))}catch(f){if(_===h)throw new m("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{$=await P(t(h))}catch(g){throw new m("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:g})}}return $}async function P(t){if(z.fetchBundleAsset!=null)return z.fetchBundleAsset(t);const e=await x(t,{responseType:"text"});return JSON.parse(e.data)}let Ut=class{constructor({base:e="",pattern:r,location:n=new URL(window.location.href)}){let s;s=typeof n=="string"?a=>new URL(a,new URL(n,window.location.href)).href:n instanceof URL?a=>new URL(a,n).href:n,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,r){return It(this.getAssetUrl,this.matcher,e,r)}};function Bt(t){return new Ut(t)}const z={};kt(Bt({pattern:"esri/",location:_t}));function de(t,e,r){return Y(t.map((n,s)=>e.apply(r,[n,s])))}async function fe(t,e,r){return(await Y(t.map((n,s)=>e.apply(r,[n,s])))).map(n=>n.value)}function k(t){return{ok:!0,value:t}}function N(t){return{ok:!1,error:t}}function Mt(t){return t!=null&&t.ok===!0?t.value:null}function Rt(t){return t!=null&&t.ok===!1?t.error:null}async function ye(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return k(await t)}catch(e){return N(e)}}async function he(t){try{return k(await t)}catch(e){return vt(e),N(e)}}function me(t,e){return new y(t,e)}let y=class extends gt{get value(){return Mt(this._result)}get error(){return Rt(this._result)}get finished(){return this._result!=null}constructor(t,e){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=wt(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(n=>{this._result=k(n),this._cleanup()},n=>{this._result=N(n),this._cleanup()}),this._abortHandle=bt(e,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=$t(this._abortHandle),this._abortController=null}};i([o()],y.prototype,"value",null),i([o()],y.prototype,"error",null),i([o()],y.prototype,"finished",null),i([o()],y.prototype,"promise",void 0),i([o()],y.prototype,"_result",void 0),y=i([j("esri.core.asyncUtils.ReactiveTask")],y);const T=new WeakMap;function st(t){return!t.destroyed&&(T.has(t)||t.addHandles([ut(()=>{const{parent:e}=t;return!!(e&&e instanceof l)&&(e.type==="catalog-dynamic-group"||st(e))},e=>T.set(t,e),lt),Q(()=>T.delete(t))]),T.get(t))}function ge(t,e){const r=t.parent,{layer:n}=t;if(n?.type!=="map-image"||!n.sourceJSON||!r)return!1;const s=n.sourceJSON.layers;if(!s)return!1;const a=s.find(c=>t.id===c.id),u=e==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return a?.type===u&&s.find(c=>c.id===r.id)?.type==="Catalog Layer"}function we(t){return zt(t)||Pt(t)}function Ft(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function be(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function $e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function ve(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function _e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function Pt(t){return t?.type==="scene"}function Te(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Ee(t){return t?.type==="subtype-sublayer"}function zt(t){const e=t?.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function De(t){const e=t?.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const Le={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function Se(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function Ae(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function je(t){return t.type==="integrated-mesh-3dtiles"}function xe(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function ke(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function Vt(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function Ne(t){return Ft(t)&&Vt(t)}function Oe(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const r=t.activeLayer.tileMatrixSets;if(r)return r}return null}async function Ce(t,e){const r=Tt?.findServerInfo(t);if(r?.currentVersion!=null)return r.owningSystemUrl||null;const n=t.toLowerCase().indexOf("/rest/services");if(n===-1)return null;const s=`${t.slice(0,n)}/rest/info`,a=e!=null?e.signal:null,{data:u}=await x(s,{query:{f:"json"},responseType:"json",signal:a});return u?.owningSystemUrl||null}function Gt(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Ie(t){return Gt(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function Ht(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function Ue(t){return!!Ht(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function Be(t){const e=new ct;for(const r of t.allLayers.concat(t.allTables))r.type==="csv"||st(r)||("charts"in r&&e.push(r),r.type==="subtype-group"&&e.push(...r.sublayers));return e}function Jt(t,e){return null}function Me(t){return null}function Wt(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function Re(t,e){!e||!Wt(t)||Jt(t.url)}export{Ue as $,le as A,Lt as B,ve as C,Gt as D,je as E,$e as F,Ie as G,Be as H,Ne as I,Oe as J,Jt as K,Se as L,xe as M,Ce as N,ke as O,ie as P,Me as Q,Wt as R,Ae as S,Re as W,ye as _,de as a,l as b,ue as c,me as d,Te as e,Ft as f,ce as g,Nt as h,he as i,Ee as j,_e as k,ae as l,p as m,st as n,L as o,fe as p,ge as q,I as r,oe as s,De as t,we as u,zt as v,Le as w,ne as x,re as y,be as z};
