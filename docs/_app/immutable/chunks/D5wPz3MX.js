import{t as q}from"./CUKvHaKn.js";import{z as k,bn as J,bi as K,bo as R,aH as Q}from"./DwWpeHsS.js";import{a as X,w as Z}from"./CAYuU9oo.js";const F="http://www.w3.org/",b=`${F}2000/svg`,B=`${F}1999/xlink`;let M=[],j=(e,t)=>{let r={};return Object.keys(e).forEach(o=>{r[o]=e[o]}),t&&Object.keys(t).forEach(o=>{r[o]=t[o]}),r},O=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),U=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},_=(e,t,r)=>{if(t.vnodeSelector!==""){for(let o=r;o<e.length;o++)if(O(e[o],t))return o}return-1},S=(e,t,r,o)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let d=0;d<e.length;d++)if(d!==t){let a=e[d];if(O(a,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${o==="added"?o:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},ee=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},x=[],E=!1,z=e=>{(e.children||[]).forEach(z),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},T=()=>{E=!1,x.forEach(z),x.length=0},I=e=>{x.push(e),E||(E=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(T,{timeout:16}):setTimeout(T,16))},P=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),I(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),I(e))},te=(e,t,r)=>{if(!t)return;let o=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let d=0;d<s;d++){let a=n[d],i=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")L(e,i,!0);else if(a==="classes"){let p=Object.keys(i),f=p.length;for(let l=0;l<f;l++){let c=p[l];i[c]&&e.classList.add(c)}}else if(a==="styles"){let p=Object.keys(i),f=p.length;for(let l=0;l<f;l++){let c=p[l],u=i[c];u&&(U(u),r.styleApplyer(e,c,u))}}else if(a!=="key"&&i!=null){let p=typeof i;p==="function"?(a.lastIndexOf("on",0)===0&&(o&&(i=o(a,i,e,t)),a==="oninput"&&(function(){let f=i;i=function(l){f.apply(this,[l]),l.target["oninput-value"]=l.target.value}})()),e[a]=i):r.namespace===b?a==="href"?e.setAttributeNS(B,a,i):e.setAttribute(a,i):p==="string"&&a!=="value"?a==="innerHTML"?e[a]=q.sanitize(i):C(e)&&a in e?e[a]=i:e.setAttribute(a,i):e[a]=i}}};function C(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let $,re=(e,t,r)=>{if(t)for(let o of t)g(o,e,void 0,r)},D=(e,t,r)=>{re(e,t.children,r),t.text&&(e.textContent=t.text),te(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},g=(e,t,r,o)=>{let n,s=0,d=e.vnodeSelector,a=t.ownerDocument;if(d==="")n=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let i=0;i<=d.length;++i){let p=d.charAt(i);if(i===d.length||p==="."||p==="#"){let f=d.charAt(s-1),l=d.slice(s,i);f==="."?n.classList.add(l):f==="#"?n.id=l:(l==="svg"&&(o=j(o,{namespace:b})),o.namespace!==void 0?n=e.domNode=a.createElementNS(o.namespace,l):(n=e.domNode=e.domNode||a.createElement(l),l==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=i+1}}D(n,e,o)}},L=(e,t,r)=>{t&&t.split(" ").forEach(o=>{o&&e.classList.toggle(o,r)})},oe=(e,t,r,o)=>{if(!r)return;let n=!1,s=Object.keys(r),d=s.length;for(let a=0;a<d;a++){let i=s[a],p=r[i],f=t[i];if(i==="class")f!==p&&(L(e,f,!1),L(e,p,!0));else if(i==="classes"){let l=e.classList,c=Object.keys(p),u=c.length;for(let v=0;v<u;v++){let m=c[v],H=!!p[m];H!==!!f[m]&&(n=!0,H?l.add(m):l.remove(m))}}else if(i==="styles"){let l=Object.keys(p),c=l.length;for(let u=0;u<c;u++){let v=l[u],m=p[v];m!==f[v]&&(n=!0,m?(U(m),o.styleApplyer(e,v,m)):o.styleApplyer(e,v,""))}}else if(p||typeof f!="string"||(p=""),i!=="value"||C(e)){if(p!==f){let l=typeof p;l==="function"&&o.eventHandlerInterceptor||(o.namespace===b?i==="href"?e.setAttributeNS(B,i,p):e.setAttribute(i,p):l==="string"?i==="innerHTML"?e[i]=q.sanitize(p):i==="role"&&p===""?e.removeAttribute(i):C(e)&&i in e?e[i]=p:e.setAttribute(i,p):e[i]!==p&&(e[i]=p),n=!0)}}else{let l=e[i];l!==p&&(e["oninput-value"]?l===e["oninput-value"]:p!==f)&&(e[i]=p,e["oninput-value"]=void 0),p!==f&&(n=!0)}}return n},ne=(e,t,r,o,n)=>{if(r===o)return!1;o=o||M;let s,d=(r=r||M).length,a=o.length,i=0,p=0,f=!1;for(;p<a;){let l=i<d?r[i]:void 0,c=o[p];if(l!==void 0&&O(l,c))f=$(l,c,n)||f,i++;else{let u=_(r,c,i+1);if(u>=0){for(s=i;s<u;s++)P(r[s]),S(r,s,e,"removed");f=$(r[u],c,n)||f,i=u+1}else g(c,t,i<d?r[i].domNode:void 0,n),ee(c),S(o,p,e,"added")}p++}if(d>i)for(s=i;s<d;s++)P(r[s]),S(r,s,e,"removed");return f};$=(e,t,r)=>{let o=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let d=o.ownerDocument.createTextNode(t.text);return o.parentNode.replaceChild(d,o),t.domNode=d,n=!0,n}t.domNode=o}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=j(r,{namespace:b})),e.text!==t.text&&(s=!0,t.text===void 0?o.removeChild(o.firstChild):o.textContent=t.text),t.domNode=o,s=ne(t,o,e.children,t.children,r)||s,s=oe(o,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[o,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(o,t.properties,e.properties),n};let y=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let o=e;e=r,$(o,r,t)},domNode:e.domNode});const ie={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let h=e=>j(ie,e),w={append:(e,t,r)=>(r=h(r),g(t,e,void 0,r),y(t,r)),insertBefore:(e,t,r)=>(r=h(r),g(t,e.parentNode,e,r),y(t,r)),merge:(e,t,r)=>(r=h(r),t.domNode=e,D(e,t,r),y(t,r)),replace:(e,t,r)=>(r=h(r),g(t,e.parentNode,e,r),e.parentNode.removeChild(e),y(t,r))},W,se=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};W=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let le=(e,t)=>{let r=e;return t.forEach(o=>{r=r&&r.children?W(r.children,n=>n.domNode===o):void 0}),r},de=(e,t,r)=>{let o=function(n){r("domEvent",n);let s=t(),d=se(n.currentTarget,s.domNode);d.reverse();let a,i=le(s.getLastRender(),d);return e.scheduleRender(),i&&(a=i.properties[`on${n.type}`].apply(i.properties.bind||this,arguments)),r("domEventProcessed",n),a};return(n,s,d,a)=>o},be=e=>{let t,r,o=h(e),n=o.performanceLogger,s=!0,d=!1,a=[],i=[],p=(l,c,u)=>{let v,m=()=>v;o.eventHandlerInterceptor=de(t,m,n),v=l(c,u(),o),a.push(v),i.push(u)},f=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let l=0;l<a.length;l++){let c=i[l]();n("rendered",void 0),a[l].update(c),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:f,scheduleRender:()=>{r||d||(r=requestAnimationFrame(f))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),d=!0},resume:()=>{d=!1,s=!0,t.scheduleRender()},append:(l,c)=>{p(w.append,l,c)},insertBefore:(l,c)=>{p(w.insertBefore,l,c)},merge:(l,c)=>{p(w.merge,l,c)},replace:(l,c)=>{p(w.replace,l,c)},detach:l=>{for(let c=0;c<i.length;c++)if(i[c]===l)return i.splice(c,1),a.splice(c,1)[0];throw new Error("renderFunction was not found")}},t};const ae=Symbol("widget"),pe=Symbol("widget-test-data"),ce=[],fe={},N=new WeakMap;function ue(e,t){let r=t.children;if(r?.length)for(let n=0;n<r.length;++n)r[n]=ue(e,r[n]);else r=ce;const o=t.vnodeSelector;if(Y(o)){const n=t.properties||fe,s=n.key||o,d={key:s,afterCreate:ve,afterUpdate:me,afterRemoved:V,parentWidget:e,widgetConstructor:o,widgetProperties:{...n,key:s,children:r}};return{vnodeSelector:o.vnodeSelector,properties:d,children:void 0,text:void 0,domNode:null}}return t}function ve(e,t,r,{parentWidget:o,widgetConstructor:n,widgetProperties:s}){const d=new n(s);d.container=e,N.set(e,d),d.afterCreate?.(d,e),o.addHandles(k(()=>V(e))),queueMicrotask(()=>{d[pe].projector?.renderNow()})}function me(e,t,r,{widgetProperties:o}){const n=N.get(e);n&&(n.set(o),n.afterUpdate?.(n,e))}function V(e){const t=N.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),N.delete(e))}function Y(e){return typeof e=="function"&&e[ae]}const A=new Map;function he(){A.clear()}function Ae(e){return A.get(e)}function Se(e,t){A.set(e,t)}function ke(e){A.delete(e)}function xe(...e){const t=R.acquire();for(let o=0;o<e.length;o++){const n=e[o],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const d in n)n[d]&&t.push(d)}const r=t.join(" ");return R.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(o=>{he();for(const n of o)e.get(n.target)?.(n)}),r=(o,n,s)=>(e.set(o,n),t.observe(o,s),k(()=>{t.unobserve(o),e.delete(o)}));return(o,n,s)=>{let d=null;return Q([X(()=>typeof o=="function"?o():o,a=>{d?.remove(),a&&(d=r(a,n,s))},Z),k(()=>d?.remove())])}})();function Ee(e){const t=e?.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function Ce(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Le(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function je(e){return e==="Enter"||e===" "}async function Oe(e,t){await J(K(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}var ge=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},G=function(e,t){for(var r=0,o=e.length;r<o;r++){var n=e[r];Array.isArray(n)?G(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=ge(n)),t.push(n))}},ye=function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return G(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function He(e,t,...r){return typeof e!="function"||Y(e)?ye(e,t??null,...r):e(t,...r)}function Re(...e){return e}export{Ee as L,Re as a,w as b,Se as c,pe as d,Ae as e,Y as f,ue as g,he as h,be as i,Oe as j,Ce as k,je as l,He as n,ke as o,ae as t,xe as v,Le as y};
