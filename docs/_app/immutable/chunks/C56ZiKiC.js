const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Cjxy7bOg.js","./D7vOUhHr.js","./CYgEQTyb.js","./IsMQoFqb.js","./B5jfOAyC.js","./DsnmJJEf.js","./qhGSfr8s.js","./CUmkdNFk.js","./BfrHREwz.js","./DwntN76J.js","./tQNujLrX.js","./CSLnW4Ur.js","./laJq_Y7H.js","../assets/4.BILSy67e.css","./BMtnoABP.js","./Bf7UDgaK.js","./kfWM0w4U.js","./BeCrDXwC.js","./9NK4mNH-.js","./C2VuWuo5.js","./CI01Hkb3.js","./BOgYixzf.js","./CRmjkwBO.js","./lTAiN3XP.js","./CRQLIJ7A.js","./FejmV9CY.js","./DZt59R-p.js","./CsM-FUJG.js","./D_qBkDOT.js","./C2Yj7m4f.js","./DZd6gJy7.js","./zHOwCmV4.js","./CcDRb6az.js","./BsxeN7wM.js","./KcazVFlU.js","./CYsUaMUi.js","./CMu5Z9wQ.js","./BshRjFZ3.js","./BHpM7QVW.js","./C5CzMsLd.js","./BgUj8bze.js","./CDKyemvT.js","./GL_hg1qN.js","./Co_Ejz9j.js","./Djgyfb7-.js","./1qG396Hh.js","./BJ84funn.js","./CGwAYP59.js","./DaKV-rMy.js","./D1vOchNa.js","./BCoRSzuu.js"])))=>i.map(i=>d[i]);
import{_ as P}from"./D7vOUhHr.js";import{k as N,aR as te,H as re,L as oe,r,m as s,z as R,a as I,v as T,av as Y,J as X,u as M,l as se,cv as ie,a2 as J,M as C,c as F,d as V,aE as E,I as ae,cu as K,q as le,E as _,be as ne,aa as ue,bo as pe,cw as de}from"./IsMQoFqb.js";import{a as v,s as f,c as B,Y as Z,i as ce,as as he,a7 as ye,_ as me,ah as ge}from"./B5jfOAyC.js";let $;function fe(e){return $&&!$.destroyed||($=e()),$}var Q;const ve=new oe({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let m=Q=class extends N{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new Q({categories:this.categories?v(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let o=[];this.categories&&(o=this.categories.map((p=>Array.isArray(p)?JSON.stringify(p):p)));let a="";if(this.extent){const p=te(this.extent,re.WGS84);p!=null&&(a=`${p.xmin},${p.ymin},${p.xmax},${p.ymax}`)}let i=this.query;!this.disableExtraQuery&&e.extraQuery&&(i="("+i+")"+e.extraQuery);const n={categories:o,bbox:a,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map((p=>ve.toJSON(p.trim()))).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};r([s()],m.prototype,"categories",void 0),r([s()],m.prototype,"disableExtraQuery",void 0),r([s({type:R})],m.prototype,"extent",void 0),r([s()],m.prototype,"filter",void 0),r([s()],m.prototype,"num",void 0),r([s()],m.prototype,"query",void 0),r([s()],m.prototype,"sortField",void 0),r([s()],m.prototype,"sortOrder",null),r([s()],m.prototype,"start",void 0),m=Q=r([I("esri.portal.PortalQueryParams")],m);var j;let y=j=class extends T{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t&&this.portal?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.portal?.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then((t=>{const o=t.categorySchema||[];return o.some((a=>a.source==="contentCategorySetsGroupQuery.LivingAtlas"))?this._fetchCategorySchemaSet("LivingAtlas",e):o}))}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new f("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new j({sourceJSON:e});return t.read(e),t}queryItems(e,t){let o=Y(m,e);const a=this.portal;return parseFloat(a.currentVersion)>5?(o=o||new m,a.queryPortal(`/content/groups/${this.id}/search`,o,"PortalItem",t)):(o=o?o.clone():new m,o.query="group:"+this.id+(o.query?" "+o.query:""),a.queryItems(o,t))}_fetchCategorySchemaSet(e,t){const o=this.portal;return o.fetchSelf(o.authMode,!0,t).then((a=>{const i=a.contentCategorySetsGroupQuery;if(i){const n=new m({disableExtraQuery:!0,num:1,query:i});return o.queryGroups(n,t)}throw new f("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((a=>{if(a.total){const i=a.results[0],n=new m({num:1,query:`typekeywords:"${e}"`});return i.queryItems(n,t)}throw new f("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((a=>a.total?a.results[0].fetchData("json",t).then((i=>{const n=i?.categorySchema;return n?.length?n:[]})):[]))}};r([s()],y.prototype,"access",void 0),r([s({type:Date})],y.prototype,"created",void 0),r([s()],y.prototype,"description",void 0),r([s()],y.prototype,"id",void 0),r([s()],y.prototype,"isInvitationOnly",void 0),r([s({type:Date})],y.prototype,"modified",void 0),r([s()],y.prototype,"owner",void 0),r([s()],y.prototype,"portal",void 0),r([s()],y.prototype,"snippet",void 0),r([s()],y.prototype,"sortField",void 0),r([s()],y.prototype,"sortOrder",void 0),r([s()],y.prototype,"sourceJSON",void 0),r([s()],y.prototype,"tags",void 0),r([s()],y.prototype,"thumbnail",void 0),r([s({readOnly:!0})],y.prototype,"thumbnailUrl",null),r([s()],y.prototype,"title",void 0),r([s({readOnly:!0})],y.prototype,"url",null),y=j=r([I("esri.portal.PortalGroup")],y);let q=class extends N{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};r([s()],q.prototype,"nextQueryParams",void 0),r([s()],q.prototype,"queryParams",void 0),r([s()],q.prototype,"results",void 0),r([s()],q.prototype,"total",void 0),q=r([I("esri.portal.PortalQueryResult")],q);let b=class extends T{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new f("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};r([s({type:Date})],b.prototype,"created",void 0),r([s()],b.prototype,"id",void 0),r([s()],b.prototype,"portal",void 0),r([s()],b.prototype,"title",void 0),r([s({readOnly:!0})],b.prototype,"url",null),r([s()],b.prototype,"username",void 0),b=r([I("esri.portal.PortalFolder")],b);var A;let c=A=class extends T{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.id}`:null}get url(){const e=this.portal?.restUrl;return e?`${e}/community/users/${this.id}`:null}addItem(e){const t=e&&e.item,o=e?.data,a=e?.folder,i={method:"post"};t&&(i.query=t.createPostQuery(),o!=null&&(typeof o=="string"?i.query.text=o:typeof o=="object"&&(i.query.text=JSON.stringify(o))));let n=this.userContentUrl;return a&&(n+="/"+(typeof a=="string"?a:a.id)),this.portal.request(n+"/addItem",i).then((p=>(t.id=p.id,t.portal=this.portal,t.loaded?t.reload():t.load())))}async deleteItem(e,t=!1){let o=this.userContentUrl;e.ownerFolder&&(o+="/"+e.ownerFolder);const a=t?{permanentDelete:!0}:{};await this.portal.request(o+`/items/${e.id}/delete`,{method:"post",query:a}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const o=this.userContentUrl+"/deleteItems",a=[],i=e.map((n=>n.id));if(i.length){const n={method:"post",query:{items:i.join(","),permanentDelete:t}},p=await this.portal.request(o,n);for(const d of p.results){const h=e.find((D=>d.itemId===D.id)),g=d.success;let U=null;g?(h.id=null,h.portal=null):d.error&&(U=new f("portal:delete-item-failed",d.error.message,d.error)),a.push({item:h,success:g,error:U})}}return a}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then((t=>{let o;return o=t&&t.folders?t.folders.map((a=>{const i=b.fromJSON(a);return i.portal=this.portal,i})):[],o}))}fetchGroups(){return this.portal.request(this.url??"").then((e=>{let t;return t=e&&e.groups?e.groups.map((o=>{const a=y.fromJSON(o);return a.portal=this.portal,a})):[],t}))}async fetchItems(e){e??={};let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:o}=await P(()=>Promise.resolve().then(()=>ee),void 0,import.meta.url),a={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},i=await this.portal.request(t,{query:a});let n;return i?.items?(n=i.items.map((p=>{const d=o.fromJSON(p);return d.portal=this.portal,d})),await Promise.all(n.map((p=>p.load()))),{items:n,nextStart:i.nextStart,total:i.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then((e=>e.tags))}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new y({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new f("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const o=this.userContentUrl,a=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(o+`/items/${e.id}/restore`,{method:"post",query:a})}toJSON(){throw new f("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new A({sourceJSON:e});return t.read(e),t}};r([s()],c.prototype,"access",void 0),r([s({type:Date})],c.prototype,"created",void 0),r([s()],c.prototype,"culture",void 0),r([s()],c.prototype,"description",void 0),r([s()],c.prototype,"email",void 0),r([s()],c.prototype,"favGroupId",void 0),r([s()],c.prototype,"fullName",void 0),r([s()],c.prototype,"id",void 0),r([s({type:Date})],c.prototype,"modified",void 0),r([s()],c.prototype,"orgId",void 0),r([s()],c.prototype,"portal",void 0),r([s()],c.prototype,"preferredView",void 0),r([s()],c.prototype,"privileges",void 0),r([s()],c.prototype,"region",void 0),r([s()],c.prototype,"role",void 0),r([s()],c.prototype,"roleId",void 0),r([s()],c.prototype,"sourceJSON",void 0),r([s()],c.prototype,"thumbnail",void 0),r([s({readOnly:!0})],c.prototype,"thumbnailUrl",null),r([s()],c.prototype,"units",void 0),r([s({readOnly:!0})],c.prototype,"userContentUrl",null),r([s({readOnly:!0})],c.prototype,"url",null),r([s()],c.prototype,"username",void 0),r([s()],c.prototype,"userLicenseTypeId",void 0),r([s()],c.prototype,"userType",void 0),c=A=r([I("esri.portal.PortalUser")],c);var w;let G;const H={PortalGroup:()=>Promise.resolve({default:y}),PortalItem:()=>P(()=>Promise.resolve().then(()=>ee),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:c})};var S;let l=(S=class extends T.JSONSupportMixin(X){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=B.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){z.unregister(this),this.defaultBasemap=M(this.defaultBasemap),this.defaultDevBasemap=M(this.defaultDevBasemap),this.defaultVectorBasemap=M(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=se(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const o of t)B.request.trustedServers.includes(o)||B.request.trustedServers.push(o);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=this.user?.orgId,o=!t||this.canSearchPublic;return this.id&&!o?` AND orgid:${this.id}`:null}get hasAPIKey(){return ie(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const o=t.indexOf("/sharing");t=o>0?t.slice(0,o):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,o=this.thumbnail;return t&&o?this._normalizeSSL(t+"/portals/self/resources/"+o):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let o=null;return t&&(o=c.fromJSON(t),o.portal=this),o}load(t){const o=P(()=>import("./Cjxy7bOg.js").then(a=>a.B),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url).then((({default:a})=>{J(t),G=a})).then((()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t))).then((a=>{if(!this.hasAPIKey&&C){const i=C;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==w.AUTH_MODE_AUTO&&this.authMode!==w.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=i.on("credential-create",we(new WeakRef(this))),z.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=a,this.read(a)}));return this.addResolvingPromise(o),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),o=(await P(async()=>{const{default:a}=await import("./lTAiN3XP.js");return{default:a}},__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,12,13,24,25,26,15,27,28,29,30,31,32,33,34,35,17,36,37,38,39,40,41,42,43,44,20,14,16,45,46,47,48,49,21]),import.meta.url)).default;return t?t.map((a=>new o({id:a.id,url:a.url}))):[]}async fetchBasemaps(t,o){const a=await this._fetchBasemaps(t,o);if(o?.include3d===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(t,o);a.unshift(...i)}return a}async fetchDefault3DBasemap(t){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const o=new m;o.query=this.default3DBasemapQuery,o.disableExtraQuery=!0;const a=(await this.queryItems(o,t)).results.find((i=>i.type==="Web Scene"));return a?new G({portalItem:a}):null}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then((o=>o.categorySchema)):F(t)?Promise.reject(V()):Promise.resolve([])}async fetchClassificationSchema(t){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",t).then((o=>o.classificationSchema)):null}fetchFeaturedGroups(t){const o=this.featuredGroups,a=new m({num:100,sortField:"title"});if(o?.length){const i=[];for(const n of o)i.push(`(title:"${n.title}" AND owner:${n.owner})`);return a.query=i.join(" OR "),this.queryGroups(a,t).then((n=>n.results))}return F(t)?Promise.reject(V()):Promise.resolve([])}fetchRegions(t){const o=this.user?.culture||this.culture||E();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:o}})}fetchSettings(t){const o=this.user?.culture||this.culture||E();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:o}})}static getDefault(){return fe((()=>new w))}queryGroups(t,o){return this.queryPortal("/community/groups",t,"PortalGroup",o)}queryItems(t,o){return this.queryPortal("/search",t,"PortalItem",o)}queryUsers(t,o){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",o)}fetchSelf(t=this.authMode,o=!1,a){const i=this.restUrl+"/portals/self",n={authMode:t,query:{culture:E().toLowerCase()},withCredentials:!0,...a};return n.authMode==="auto"&&(n.authMode="no-prompt"),o&&(n.query.default=!0),this.request(i,n)}queryPortal(t,o,a,i){const n=Y(m,o),p=d=>this.request(this.restUrl+t,{...n.toRequestOptions(this),...i}).then((h=>{const g=n.clone();return g.start=h.nextStart,new q({nextQueryParams:g,queryParams:n,total:h.total,results:w._resultsToTypedArray(d,{portal:this},h,i)})})).then((h=>Promise.all(h.results.map((g=>typeof g.when=="function"?g.when():h))).then((()=>h),(g=>(le(g),h)))));return a&&H[a]?H[a]().then((({default:d})=>(J(i),p(d)))):p()}signIn(){if(this.hasAPIKey)return this.load().then((()=>{if(!this.user)throw new f("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")}));if(this.authMode===w.AUTH_MODE_ANONYMOUS||this.authMode===w.AUTH_MODE_NO_PROMPT&&!C)return Promise.reject(new f("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=o=>Promise.resolve().then((()=>this.loadStatus==="not-loaded"?(o||(this.authMode="immediate"),this.load().then((()=>null))):this.loadStatus==="loading"?this.load().then((()=>this.credential?null:(this.credential=o,this.fetchSelf("immediate")))):this.user&&this.credential===o?null:(this.credential=o,this.fetchSelf("immediate")))).then((a=>{a&&(this.sourceJSON=a,this.read(a))}));return C?C.getCredential(this.restUrl,{prompt:this.authMode!==w.AUTH_MODE_NO_PROMPT}).then((o=>t(o))):t(this.credential)}normalizeUrl(t){const o=this.credential?.token;return this._normalizeSSL(o?t+(t.includes("?")?"&":"?")+"token="+o:t)}requestToTypedArray(t,o,a){return this.request(t,o).then((i=>{const n=w._resultsToTypedArray(a,{portal:this},i);return Promise.all(n.map((p=>typeof p.when=="function"?p.when():i))).then((()=>n),(()=>n))}))}request(t,o={}){const a={f:"json",...o.query},{authMode:i=this.authMode===w.AUTH_MODE_ANONYMOUS||this.authMode===w.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:p=!1,method:d="auto",responseType:h="json",signal:g}=o,U={authMode:i,body:n,cacheBust:p,method:d,query:a,responseType:h,timeout:0,signal:g};return o.withCredentials&&(U.withCredentials=!0),ae(this._normalizeSSL(t),U).then((D=>D.data))}toJSON(){throw new f("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new w({sourceJSON:t})}_getHelperService(t){const o=this.helperServices&&this.helperServices[t];if(!o)throw new f("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return o}async _fetchBasemaps(t,o){const a=new m;a.query=t||(K()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),a.disableExtraQuery=!0;const i=await this.queryGroups(a,o);if(!i.total)return[];const n=i.results[0];a.num=100,a.query='type:"Web Map" -type:"Web Application"',a.sortField=n.sortField||"name",a.sortOrder=n.sortOrder||"desc";const p=await n.queryItems(a,o);return p.total?p.results.filter((d=>d.type==="Web Map")).map((d=>new G({portalItem:d}))):[]}async _fetchBasemaps3D(t,o){const a=t||this.basemapGalleryGroupQuery3D;if(!a)return[];if(K())return[];const i=new m({query:a,disableExtraQuery:!0}),n=await this.queryGroups(i,o);if(!n.total)return[];const p=n.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=p.sortField||"name",i.sortOrder=p.sortOrder||"desc";const d=await p.queryItems(i,o);return d.total?d.results.filter((h=>h.type==="Web Scene")).map((h=>new G({portalItem:h}))):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const o=G.fromJSON(t);return o.portalItem={portal:this},o}return null}static _resultsToTypedArray(t,o,a,i){let n;if(a){const p=i!=null?i.signal:null;n=a.listings||a.notifications||a.userInvitations||a.tags||a.items||a.groups||a.comments||a.provisions||a.results||a.relatedItems||a,(t||o)&&(n=n.map((d=>{const h=Object.assign(t?t.fromJSON(d):d,o);return typeof h.load=="function"&&h.load(p),h})))}else n=[];return n}},w=S,S.AUTH_MODE_ANONYMOUS="anonymous",S.AUTH_MODE_AUTO="auto",S.AUTH_MODE_IMMEDIATE="immediate",S.AUTH_MODE_NO_PROMPT="no-prompt",S);r([s()],l.prototype,"access",void 0),r([s()],l.prototype,"allSSL",void 0),r([s()],l.prototype,"authMode",void 0),r([s()],l.prototype,"authorizedCrossOriginDomains",void 0),r([_("authorizedCrossOriginDomains")],l.prototype,"readAuthorizedCrossOriginDomains",null),r([s()],l.prototype,"basemapGalleryGroupQuery",void 0),r([s({json:{name:"3DBasemapGalleryGroupQuery"}})],l.prototype,"basemapGalleryGroupQuery3D",void 0),r([s()],l.prototype,"bingKey",void 0),r([s()],l.prototype,"canListApps",void 0),r([s()],l.prototype,"canListData",void 0),r([s()],l.prototype,"canListPreProvisionedItems",void 0),r([s()],l.prototype,"canProvisionDirectPurchase",void 0),r([s()],l.prototype,"canSearchPublic",void 0),r([s()],l.prototype,"canShareBingPublic",void 0),r([s()],l.prototype,"canSharePublic",void 0),r([s()],l.prototype,"canSignInArcGIS",void 0),r([s()],l.prototype,"canSignInIDP",void 0),r([s()],l.prototype,"colorSetsGroupQuery",void 0),r([s()],l.prototype,"commentsEnabled",void 0),r([s({type:Date})],l.prototype,"created",void 0),r([s()],l.prototype,"credential",void 0),r([s()],l.prototype,"culture",void 0),r([s()],l.prototype,"currentVersion",void 0),r([s()],l.prototype,"customBaseUrl",void 0),r([s()],l.prototype,"default3DBasemapQuery",void 0),r([s()],l.prototype,"defaultBasemap",void 0),r([_("defaultBasemap")],l.prototype,"readDefaultBasemap",null),r([s()],l.prototype,"defaultDevBasemap",void 0),r([_("defaultDevBasemap")],l.prototype,"readDefaultDevBasemap",null),r([s({type:R})],l.prototype,"defaultExtent",void 0),r([s()],l.prototype,"defaultVectorBasemap",void 0),r([_("defaultVectorBasemap")],l.prototype,"readDefaultVectorBasemap",null),r([s()],l.prototype,"description",void 0),r([s()],l.prototype,"devBasemapGalleryGroupQuery",void 0),r([s()],l.prototype,"eueiEnabled",void 0),r([s({readOnly:!0})],l.prototype,"extraQuery",null),r([s()],l.prototype,"featuredGroups",void 0),r([s()],l.prototype,"featuredItemsGroupQuery",void 0),r([s()],l.prototype,"galleryTemplatesGroupQuery",void 0),r([s()],l.prototype,"layoutGroupQuery",void 0),r([s()],l.prototype,"livingAtlasGroupQuery",void 0),r([s({readOnly:!0})],l.prototype,"hasAPIKey",null),r([s()],l.prototype,"hasCategorySchema",void 0),r([s()],l.prototype,"hasClassificationSchema",void 0),r([s()],l.prototype,"helpBase",void 0),r([s()],l.prototype,"helperServices",void 0),r([s()],l.prototype,"helpMap",void 0),r([s()],l.prototype,"homePageFeaturedContent",void 0),r([s()],l.prototype,"homePageFeaturedContentCount",void 0),r([s()],l.prototype,"httpPort",void 0),r([s()],l.prototype,"httpsPort",void 0),r([s()],l.prototype,"id",void 0),r([s()],l.prototype,"ipCntryCode",void 0),r([s({readOnly:!0})],l.prototype,"isOrganization",null),r([s()],l.prototype,"isPortal",void 0),r([s()],l.prototype,"isReadOnly",void 0),r([s({readOnly:!0})],l.prototype,"itemPageUrl",null),r([s()],l.prototype,"layerTemplatesGroupQuery",void 0),r([s()],l.prototype,"maxTokenExpirationMinutes",void 0),r([s({type:Date})],l.prototype,"modified",void 0),r([s()],l.prototype,"name",void 0),r([s()],l.prototype,"portalHostname",void 0),r([s()],l.prototype,"portalMode",void 0),r([s()],l.prototype,"portalProperties",void 0),r([s()],l.prototype,"region",void 0),r([s()],l.prototype,"recycleBinEnabled",void 0),r([s({readOnly:!0})],l.prototype,"restUrl",null),r([s()],l.prototype,"rotatorPanels",void 0),r([s()],l.prototype,"showHomePageDescription",void 0),r([s()],l.prototype,"sourceJSON",void 0),r([s()],l.prototype,"staticImagesUrl",void 0),r([s({json:{name:"2DStylesGroupQuery"}})],l.prototype,"stylesGroupQuery2d",void 0),r([s({json:{name:"stylesGroupQuery"}})],l.prototype,"stylesGroupQuery3d",void 0),r([s()],l.prototype,"supportsHostedServices",void 0),r([s()],l.prototype,"symbolSetsGroupQuery",void 0),r([s()],l.prototype,"templatesGroupQuery",void 0),r([s()],l.prototype,"thumbnail",void 0),r([s({readOnly:!0})],l.prototype,"thumbnailUrl",null),r([s()],l.prototype,"units",void 0),r([s()],l.prototype,"url",void 0),r([s()],l.prototype,"urlKey",void 0),r([_("urlKey")],l.prototype,"readUrlKey",null),r([s()],l.prototype,"user",void 0),r([_("user")],l.prototype,"readUser",null),r([s()],l.prototype,"use3dBasemaps",void 0),r([s()],l.prototype,"useDefault3dBasemap",void 0),r([s()],l.prototype,"useStandardizedQuery",void 0),r([s()],l.prototype,"useVectorBasemaps",void 0),r([s()],l.prototype,"vectorBasemapGalleryGroupQuery",void 0),l=w=r([I("esri.portal.Portal")],l);const z=new FinalizationRegistry((e=>{e.remove()}));function we(e){const t=C;return()=>{const o=e.deref();o&&t.findCredential(o.restUrl)&&o.signIn().catch((()=>{}))}}let O=class extends N{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:W(e.path,e.portalItem)}:e}set path(e){e!=null&&Z(e)?ce.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return W(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const o=this.cdnUrl;if(o==null)throw new f("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(o,{responseType:e,query:{token:this.portalItem.apiKey,_ts:t?.cacheBust?Date.now():null},signal:t?.signal})}async update(e,t){const{addOrUpdateResources:o}=await P(()=>import("./BCoRSzuu.js"),__vite__mapDeps([50,3,4,5,6,2,7,8,9,10,1,11,12,13]),import.meta.url);return await o(this.portalItem,[{resource:this,content:e,compress:t?.compress,access:t?.access}],"update",t),this}hasPath(){return this.path!=null}};function W(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Z(e)&&(e=he(e,t.itemUrl)),e?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}r([s()],O.prototype,"portalItem",void 0),r([s({type:String,value:null})],O.prototype,"path",null),r([ne("path")],O.prototype,"_castPath",null),r([s({type:String,readOnly:!0})],O.prototype,"url",null),r([s({type:String,readOnly:!0})],O.prototype,"cdnUrl",null),r([s({type:String,readOnly:!0})],O.prototype,"itemRelativeUrl",null),O=r([I("esri.portal.PortalItemResource")],O);let x=class extends N{constructor(e){super(e),this.created=null,this.rating=null}};r([s({type:Date})],x.prototype,"created",void 0),r([s()],x.prototype,"rating",void 0),x=r([I("esri.portal.PortalRating")],x);var k;const Se=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),be=new Set(["KML","GeoJson","CSV"]);let u=k=class extends T.JSONSupportMixin(X){static from(e){return ue(k,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let o=e;return e==="Feature Service"||e==="Feature Collection"?o=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?o=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?o="Scene Layer":e==="Video Service"?o="Video Layer":e==="Scene Package"?o="Scene Layer Package":e==="Stream Service"?o="Feature Layer":e==="Geoprocessing Service"?o=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?o="GeoEnrichment Service":e==="Geocoding Service"?o="Locator":e==="Microsoft Powerpoint"?o="Microsoft PowerPoint":e==="GeoJson"?o="GeoJSON":e==="Globe Service"?o="Globe Layer":e==="Vector Tile Service"?o="Tile Layer":e==="netCDF"?o="NetCDF":e==="Map Service"?o=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e?.toLowerCase().includes("add in")?o=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?o="Big Data File Share":e==="Compact Tile Package"?o="Tile Package (tpkx)":e==="Raster function template"?o="Raster Function Template":e==="OGCFeatureServer"?o="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?o="Instant App":e==="Insights Page"?o="Insights Report":e==="Excalibur Imagery Project"?o="Excalibur Project":e==="3DTiles Service"?o="3D tiles layer":e==="3DTiles Package"&&(o="3D tiles package"),o}readExtent(e){return e&&e.length?new R(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type?.toLowerCase()||"",t=this.typeKeywords||[],o="esri/images/portal/",a="16";let i,n=!1,p=!1,d=!1,h=!1,g=!1,U=!1,D=!1,L=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(p=t.includes("Table"),d=t.includes("Route Layer"),h=t.includes("Markup"),g=t.includes("Spatiotemporal"),U=t.includes("UtilityNetwork"),i=g&&p?"spatiotemporaltable":p?"table":d?"routelayer":h?"markup":g?"spatiotemporal":U?"utilitynetwork":n?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(g=t.includes("Spatiotemporal"),D=t.includes("Relational"),i=g||D?"mapimages":n||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):i=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?i="maps":e==="web scene"?i=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?i="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?i="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?i="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?i="datafiles":e==="360 vr experience"?i="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?i="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?i="addindesktop":e==="pdf"?i="pdf":e==="microsoft word"?i="word":e==="microsoft excel"?i="excel":e==="microsoft powerpoint"?i="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?i="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?i="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?i="layersgray":e==="analysis model"?i="analysismodel":e==="scene package"?i="scenepackage":e==="3dtiles package"?i="3dtileslayerpackage":e==="3dtiles service"?i="3dtileslayer":e==="mobile scene package"?i="mobilescenepackage":e==="tile package"||e==="compact tile package"?i="tilepackage":e==="task file"?i="taskfile":e==="report template"?i="report-template":e==="statistical data collection"?i="statisticaldatacollection":e==="insights workbook"?i="workbook":e==="insights model"?i="insightsmodel":e==="insights page"?i="insightspage":e==="insights theme"?i="insightstheme":e==="hub initiative"?i="hubinitiative":e==="hub page"?i="hubpage":e==="hub site application"?i="hubsite":e==="hub event"?i="hubevent":e==="hub project"?i="hubproject":e==="relational database connection"?i="relationaldatabaseconnection":e==="big data file share"?i="datastorecollection":e==="image collection"?i="imagecollection":e==="desktop style"?i="desktopstyle":e==="style"?i=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?i="dashboard":e==="raster function template"?i="rasterprocessingtemplate":e==="vector tile package"?i="vectortilepackage":e==="ortho mapping project"?i="orthomappingproject":e==="ortho mapping template"?i="orthomappingtemplate":e==="solution"?i="solutions":e==="geopackage"?i="geopackage":e==="deep learning package"?i="deeplearningpackage":e==="real time analytic"?i="realtimeanalytics":e==="reality mapping project"?i="realitymappingproject":e==="big data analytic"?i="bigdataanalytics":e==="feed"?i="feed":e==="excalibur imagery project"?i="excaliburimageryproject":e==="notebook"?i="notebook":e==="storymap"?i="storymap":e==="survey123 add in"?i="survey123addin":e==="mission"?i="mission":e==="mission report"?i="missionreport":e==="mission template"?i="missiontemplate":e==="quickcapture project"?i="quickcaptureproject":e==="pro report"?i="proreport":e==="pro report template"?i="proreporttemplate":e==="urban model"?i="urbanmodel":e==="urban project"?i="urbanproject":e==="web experience"?i="experiencebuilder":e==="web experience template"?i="webexperiencetemplate":e==="experience builder widget"?i="experiencebuilderwidget":e==="experience builder widget package"?i="experiencebuilderwidgetpackage":e==="workflow"?i="workflow":e==="kernel gateway connection"?i="kernelgatewayconnection":e==="insights script"?i="insightsscript":e==="hub initiative template"?i="hubinitiativetemplate":e==="storymap theme"?i="storymaptheme":e==="knowledge graph"?i="knowledgegraph":e==="knowledge graph layer"?i="knowledgegraphlayer":e==="knowledge studio project"?i="knowledgestudio":e==="native application"?i="nativeapp":e==="native application installer"?i="nativeappinstaller":e==="web link chart"?i="linkchart":e==="knowledge graph web investigation"?i="investigation":e==="ogcfeatureserver"?i="features":e==="pro presentation"?i="propresentation":e==="pro project"?i="proproject":e==="insights workbook package"?i="insightsworkbookpackage":e==="apache parquet"?i="apacheparquet":e==="notebook code snippet library"?i="notebookcodesnippets":e==="suitability model"?i="suitabilitymodel":e==="esri classifier definition"?i="classifierdefinition":e==="esri classification schema"?i="classificationschema":e==="insights data engineering workbook"?i="dataengineeringworkbook":e==="insights data engineering model"?i="dataengineeringmodel":e==="deep learning studio project"?i="deeplearningproject":e==="discussion"?i="discussion":e==="allsource project"?i="allsourceproject":e==="api key"?i="apikey":e==="data pipeline"?i="datapipelines":e==="group layer"?(L=t.includes("Map"),i=L?"layergroup2d":"layergroup"):i=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",i?pe(o+i+a+".png"):null}get isLayer(){return this.type!=null&&Se.has(this.type)}get itemCdnUrl(){return de(this.itemUrl)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`)??null:null}get userItemUrl(){const e=this.portal?.restUrl;if(!e)return null;const t=this.owner||this.portal?.user?.id;return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=l.getDefault()),o=t.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{})).then((a=>{this.sourceJSON=a,this.read(a)}));return this.addResolvingPromise(o),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},o=e instanceof x?e.rating:e;return o==null||isNaN(o)||typeof e!="number"||(t.query.rating=o),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new x({rating:o,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:v(this.applicationProxies),avgRating:this.avgRating,categories:v(this.categories),classification:v(this.classification),created:v(this.created),culture:this.culture,description:this.description,extent:v(this.extent),groupCategories:v(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:v(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:v(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:v(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:v(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new k({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){const e=this.toJSON();for(const t of["tags","typeKeywords","categories"])e[t]=e[t]?.join(", ");for(const t of["extent","classification"]){const o=e[t];o&&(e[t]=JSON.stringify(o))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new x(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},k)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const t=e?.data,o={method:"post"};o.query=this.createPostQuery();for(const a in o.query)o.query[a]===null&&(o.query[a]="");return o.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?o.query.text=t:typeof t=="object"&&(o.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,o).then((()=>this.reload()))})):Promise.reject(new f("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new f("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:o}=this;await t.signIn();const{copyResources:a,folder:i,tags:n,title:p}=e||{},d={method:"post",query:{copyPrivateResources:a==="all",folder:typeof i=="string"?i:i?.id,includeResources:!!a,tags:n?.join(","),title:p}},{itemId:h}=await t.request(`${o}/copy`,d);return new k({id:h,portal:t})}updateThumbnail(e){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const t=e.thumbnail,o=e.filename,a={method:"post"};if(typeof t=="string")ye(t)?a.query={data:t}:a.query={url:me(t)},o!=null&&(a.query.filename=o);else{const i=new FormData;o!=null?i.append("file",t,o):i.append("file",t),a.body=i}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,a).then((()=>this.reload()))})):Promise.reject(new f("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:o}=await P(()=>import("./BCoRSzuu.js"),__vite__mapDeps([50,3,4,5,6,2,7,8,9,10,1,11,12,13]),import.meta.url);return o(this,e,t)}async addResource(e,t,o){const{addOrUpdateResources:a}=await P(()=>import("./BCoRSzuu.js"),__vite__mapDeps([50,3,4,5,6,2,7,8,9,10,1,11,12,13]),import.meta.url);return e.portalItem=this,await a(this,[{resource:e,content:t,compress:o?.compress,access:o?.access}],"add",o),e}async removeResource(e,t){const{removeResource:o}=await P(()=>import("./BCoRSzuu.js"),__vite__mapDeps([50,3,4,5,6,2,7,8,9,10,1,11,12,13]),import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new f("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return o(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await P(()=>import("./BCoRSzuu.js"),__vite__mapDeps([50,3,4,5,6,2,7,8,9,10,1,11,12,13]),import.meta.url);return t(this,e)}resourceFromPath(e){return new O({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:v(this.categories),classification:v(this.classification),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:v(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:v(this.typeKeywords),url:this.url};return ge(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new k({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};r([s({type:["private","shared","org","public"]})],u.prototype,"access",void 0),r([s()],u.prototype,"accessInformation",void 0),r([s({type:String})],u.prototype,"apiKey",void 0),r([s({json:{read:{source:"appProxies"}}})],u.prototype,"applicationProxies",void 0),r([s()],u.prototype,"avgRating",void 0),r([s()],u.prototype,"categories",void 0),r([s()],u.prototype,"classification",void 0),r([s({type:Date})],u.prototype,"created",void 0),r([s()],u.prototype,"culture",void 0),r([s()],u.prototype,"description",void 0),r([s({readOnly:!0})],u.prototype,"displayName",null),r([s({type:R})],u.prototype,"extent",void 0),r([_("extent")],u.prototype,"readExtent",null),r([s()],u.prototype,"groupCategories",void 0),r([s({readOnly:!0})],u.prototype,"iconUrl",null),r([s()],u.prototype,"id",void 0),r([s({readOnly:!0})],u.prototype,"isLayer",null),r([s({type:Boolean,readOnly:!0})],u.prototype,"isOrgItem",void 0),r([s()],u.prototype,"itemControl",void 0),r([s({readOnly:!0})],u.prototype,"itemPageUrl",null),r([s({readOnly:!0})],u.prototype,"itemUrl",null),r([s()],u.prototype,"licenseInfo",void 0),r([s({type:Date})],u.prototype,"modified",void 0),r([s()],u.prototype,"name",void 0),r([s()],u.prototype,"numComments",void 0),r([s()],u.prototype,"numRatings",void 0),r([s()],u.prototype,"numViews",void 0),r([s()],u.prototype,"owner",void 0),r([s()],u.prototype,"ownerFolder",void 0),r([s({type:l})],u.prototype,"portal",void 0),r([s()],u.prototype,"screenshots",void 0),r([s()],u.prototype,"size",void 0),r([s()],u.prototype,"snippet",void 0),r([s()],u.prototype,"sourceJSON",void 0),r([s({type:String})],u.prototype,"sourceUrl",void 0),r([s({type:String})],u.prototype,"spatialReference",void 0),r([s()],u.prototype,"tags",void 0),r([s()],u.prototype,"thumbnail",void 0),r([s({readOnly:!0})],u.prototype,"thumbnailUrl",null),r([s()],u.prototype,"title",void 0),r([s()],u.prototype,"type",void 0),r([s()],u.prototype,"typeKeywords",void 0),r([s({type:String,json:{read(e,t){if(be.has(t.type)){const o=this.portal?.restUrl;e||=o&&this.id?`${o}/content/items/${this.id}/data`:null}return e}}})],u.prototype,"url",void 0),r([s({readOnly:!0})],u.prototype,"userItemUrl",null),u=k=r([I("esri.portal.PortalItem")],u);const ee=Object.freeze(Object.defineProperty({__proto__:null,get default(){return u}},Symbol.toStringTag,{value:"Module"}));export{l as C,ee as P,u as k,m as p,c as u};
