import{s as z,N as oe}from"./DUQhet5j.js";import{s as le,i as ae}from"./BbNfuhIx.js";function k(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}const ie=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,ue={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function C(e){const n=e?.match(ie);if(!n)return null;const[,t,r,s]=n;if(!t)return null;let o=null,l=null,i=null;const{devext:c,qaext:f,www:y}=ue;if(r)if(o=t,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:l,portalHostname:i}=c);break;case"qa":({customBaseUrl:l,portalHostname:i}=f);break;default:return null}else({customBaseUrl:l,portalHostname:i}=y);else switch(t.toLowerCase()){case"devext":({customBaseUrl:l,portalHostname:i}=c);break;case"qaext":({customBaseUrl:l,portalHostname:i}=f);break;case"www":({customBaseUrl:l,portalHostname:i}=y);break;default:return null}return{customBaseUrl:l,isPortal:!1,portalHostname:i,urlKey:o}}function it(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function ut(e){const n=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,t=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return n.test(e)?e=e.replace(n,"https://www.arcgis.com"):t.test(e)?e=e.replace(t,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}function ce(e){const n=atob(e),t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t.buffer}function fe(e){const n=new Uint8Array(e);let t="";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return btoa(t)}const pe=()=>ae.getLogger("esri.core.urlUtils"),d=z.request,W="esri/config: esriConfig.request.proxyUrl is not set.",E=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,D=/^\s*http:/i,N=/^\s*https:/i,he=/^\s*file:/i,J=/:\d+$/,me=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,de=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ge=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");class h{constructor(n=""){this.uri=n,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=this.uri.match(de);this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),this.authority!=null&&(t=this.authority.match(ge),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}}const $={},Q=new h(z.applicationUrl);let a=Q;const F=xe();let b=F;const ye=()=>a,we=()=>b;function xe(){const e=a.path,n=e.slice(0,e.lastIndexOf("/")+1);return`${`${a.scheme}://${a.host}${a.port!=null?`:${a.port}`:""}`}${n}`}const $e={setAppUrl:e=>a=e,setAppBaseUrl:e=>b=e,restoreUrls:()=>{a=Q,b=F}};function p(e){if(!e)return null;const n={path:null,query:null},t=new h(e),r=e.indexOf("?");return t.query===null?n.path=e:(n.path=e.slice(0,r),n.query=H(t.query)),t.fragment&&(n.hash=t.fragment,t.query===null&&(n.path=n.path.slice(0,n.path.length-(t.fragment.length+1)))),n}function H(e){const n=e.split("&"),t={};for(const r of n){if(!r)continue;const s=r.indexOf("=");let o,l;s<0?(o=decodeURIComponent(r),l=""):(o=decodeURIComponent(r.slice(0,s)),l=decodeURIComponent(r.slice(s+1)));let i=t[o];typeof i=="string"&&(i=t[o]=[i]),Array.isArray(i)?i.push(l):t[o]=l}return t}function q(e,n){return e?n&&typeof n=="function"?Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(n(t,e[t]))).join("&"):Object.keys(e).map(t=>{const r=e[t];if(r==null)return"";const s=encodeURIComponent(t)+"=",o=n?.[t];return o?s+encodeURIComponent(o(r)):Array.isArray(r)?r.map(l=>k(l)?s+encodeURIComponent(JSON.stringify(l)):s+encodeURIComponent(l)).join("&"):k(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(t=>t).join("&"):""}function _(e=!1){let n,t=d.proxyUrl;if(typeof e=="string"){n=te(e);const r=A(e);r&&(t=r.proxyUrl)}else n=!!e;if(!t)throw pe().warn(W),new le("urlUtils:proxy-not-set",W);return n&&P()&&(t=I(t)),p(t)}function Ue(e,n=!1){const t=A(e);let r,s;if(t){const o=L(t.proxyUrl);r=o.path,s=o.query?H(o.query):null}else if(n){const o=_(e);r=o.path,s=o.query}if(r){const o=p(e);e=r+"?"+o.path;const l=q({...s,...o.query});l&&(e=`${e}?${l}`)}return e}const x={path:"",query:""};function L(e){const n=e.indexOf("?");return n!==-1?(x.path=e.slice(0,n),x.query=e.slice(n+1)):(x.path=e,x.query=null),x}function G(e){return e=(e=R(e=ne(e=L(e).path),!0)).toLowerCase()}function be(e){const n={proxyUrl:e.proxyUrl,urlPrefix:G(e.urlPrefix)},t=d.proxyRules,r=n.urlPrefix;let s=t.length;for(let o=0;o<t.length;o++){const l=t[o].urlPrefix;if(r.startsWith(l)){if(r.length===l.length)return-1;s=o;break}l.startsWith(r)&&(s=o+1)}return t.splice(s,0,n),s}function A(e){const n=d.proxyRules,t=G(e);for(let r=0;r<n.length;r++)if(t.startsWith(n[r].urlPrefix))return n[r]}function Oe(e,n){if(!e||!n)return!1;e=m(e),n=m(n);const t=C(e),r=C(n);return t!=null&&r!=null?t.portalHostname===r.portalHostname:t==null&&r==null&&v(e,n,!0)}function qe(e,n){if(!e||!n)return!1;e=m(e),n=m(n);const t=C(e),r=C(n);return t!=null&&r!=null&&t.portalHostname===r.portalHostname}function Ce(e,n){return e=m(e),n=m(n),R(e)===R(n)}function m(e){const n=(e=U(e)).indexOf("/sharing");return n>0?e.slice(0,n):e.replace(/\/+$/,"")}function ve(e,n=d.interceptors){const t=r=>r instanceof RegExp?r.test(e):typeof r=="string"?e.startsWith(r):r==null;if(n){for(const r of n)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function v(e,n,t=!1){if(!e||!n)return!1;const r=j(e),s=j(n);return!(!t&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function Pe(e){if(typeof e=="string"){if(!g(e))return!0;e=j(e)}if(v(e,a))return!0;const n=d.trustedServers||[];for(let t=0;t<n.length;t++){const r=Re(n[t]);for(let s=0;s<r.length;s++)if(v(e,r[s]))return!0}return!1}function Re(e){return $[e]||(B(e)||u(e)?$[e]=[new h(S(e))]:$[e]=[new h(`http://${e}`),new h(`https://${e}`)]),$[e]}function S(e,n=b,t){return u(e)?t?.preserveProtocolRelative?e:a.scheme==="http"&&a.authority===V(e).slice(2)?`http:${e}`:`https:${e}`:B(e)?e:M(e.startsWith("/")?De(n):n,e)}function Ae(e,n=b,t){if(e==null||!g(e))return e;const r=U(e),s=r.toLowerCase(),o=U(n).toLowerCase().replace(/\/+$/,""),l=t?U(t).toLowerCase().replace(/\/+$/,""):null;if(l&&!o.startsWith(l))return e;const i=(w,se,T)=>(T=w.indexOf(se,T))===-1?w.length:T;let c=i(s,"/",s.indexOf("//")+2),f=-1;for(;s.slice(0,c+1)===o.slice(0,c)+"/"&&(f=c+1,c!==s.length);)c=i(s,"/",c+1);if(f===-1||l&&f<l.length)return e;e=r.slice(f);const y=o.slice(f-1).replaceAll(/[^/]+/g,"").length;if(y>0)for(let w=0;w<y;w++)e=`../${e}`;else e=`./${e}`;return e}function U(e){return e=Ge(e=_e(e=Fe(e=S(e=e.trim()))))}function M(...e){const n=e.filter(oe);if(!n?.length)return;const t=[];if(g(n[0])){const s=n[0],o=s.indexOf("//");o!==-1&&(t.push(s.slice(0,o+1)),We(n[0])&&(t[0]+="/"),n[0]=s.slice(o+2))}else n[0].startsWith("/")&&t.push("");const r=n.reduce((s,o)=>o?s.concat(o.split("/")):s,[]);for(let s=0;s<r.length;s++){const o=r[s];o===".."&&t.length>0&&t[t.length-1]!==".."?t.pop():(!o&&s===r.length-1||o&&(o!=="."||t.length===0))&&t.push(o)}return t.join("/")}function V(e,n=!1){if(e==null||K(e)||X(e))return null;let t=e.indexOf("://");if(t===-1&&u(e))t=2;else{if(t===-1)return null;t+=3}const r=e.indexOf("/",t);return r!==-1&&(e=e.slice(0,r)),n&&(e=R(e,!0)),e}function g(e){return u(e)||B(e)}function K(e){return e!=null&&e.startsWith("blob:")}function X(e){return e!=null&&e.startsWith("data:")}function Y(e){const n=O(e);return n?.isBase64?ce(n.data):null}function Se(e){return fe(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Be=/^data:(.*?)(;base64)?,(.*)$/;function O(e){const n=e.match(Be);if(!n)return null;const[,t,r,s]=n;return{mediaType:t,isBase64:!!r,data:s}}function Te(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function je(e){return(await fetch(e)).blob()}function Z(e){const n=Y(e);if(!n)return null;const t=O(e);return new Blob([n],{type:t.mediaType})}function He(e,n){Ie(e,n)}function Le(e,n){ee(e,n)}function Ie(e,n){const t=Z(e);return!!t&&ee(t,n)}function ee(e,n){if(!e)return!1;const t=document.createElement("a");if(!("download"in t))return!1;const r=URL.createObjectURL(e);return t.download=n,t.href=r,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(r),!0}function u(e){return e!=null&&e.startsWith("/")&&e[1]==="/"}function B(e){return e!=null&&E.test(e)}function te(e){return e!=null&&N.test(e)||a.scheme==="https"&&u(e)}function ke(e){return e!=null&&D.test(e)||a.scheme==="http"&&u(e)}function We(e){return e!=null&&he.test(e)}function ze(e){return u(e)?`http:${e}`:e.replace(N,"http:")}function I(e){return u(e)?`https:${e}`:e.replace(D,"https:")}function Ee(){return a.scheme==="http"}function P(){return a.scheme==="https"}function R(e,n=!1){return u(e)?e.slice(2):(e=e.replace(E,""),n&&e.length>1&&e.startsWith("/")&&e[1]==="/"&&(e=e.slice(2)),e)}function De(e){const n=e.indexOf("//"),t=e.indexOf("/",n+2);return t===-1?e:e.slice(0,t)}function Ne(e){let n=0;if(g(e)){const r=e.indexOf("//");r!==-1&&(n=r+2)}const t=e.lastIndexOf("/");return t<n?e:e.slice(0,t+1)}function Je(e,n){if(!e)return"";const t=p(e).path.replace(/\/+$/,""),r=t.slice(t.lastIndexOf("/")+1);if(!n?.length)return r;const s=new RegExp(`\\.(${n.join("|")})$`,"i");return r.replace(s,"")}function ne(e){return e.endsWith("/")?e:`${e}/`}function Qe(e){return e.replace(/\/+$/,"")}function Fe(e){if(/^https?:\/\//i.test(e)){const n=L(e);e=(e=n.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),n.query&&(e+=`?${n.query}`)}return e}function _e(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Ge(e){const n=d.httpsDomains;if(!ke(e))return e;const t=e.indexOf("/",7);let r;if(r=t===-1?e:e.slice(0,t),r=r.toLowerCase().slice(7),J.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return Ee()&&r===a.authority&&!me.test(e)||(P()&&r===a.authority||n&&n.some(s=>r===s||r.endsWith(`.${s}`))||P()&&!A(e))&&(e=I(e)),e}function Me(e,n,t){if(!(n&&t&&e&&g(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),o=e.indexOf(":",r+2),l=Math.min(s<0?e.length:s,o<0?e.length:o);return e.slice(r+2,l).toLowerCase()!==n.toLowerCase()?e:`${e.slice(0,r+2)}${t}${e.slice(l)}`}function Ve(e,n){const t=new URL(e);return t.host=n,t.port&&!J.test(n)&&(t.port=""),t.toString()}function Ke(e){return new URL(e).host}function j(e){return typeof e=="string"?new h(S(e)):(e.scheme||(e.scheme=a.scheme),e)}function Xe(e){return ot.test(e)}function Ye(e,n){const t=p(e),r=Object.keys(t.query||{});return r.length>0&&n&&n.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),t.path}function Ze(e,n,t){const r=p(e),s=r.query||{};return s[n]=String(t),`${r.path}?${q(s)}`}function et(e,n){if(!n)return e;const t=p(e),r=t.query||{};for(const[o,l]of Object.entries(n))l!=null&&(r[o]=l);const s=q(r);return s?`${t.path}?${s}`:t.path}function tt(e,n){const{path:t,query:r}=p(e);if(!r)return e;delete r[n];const s=q(r);return s?`${t}?${s}`:t}function nt(e){if(e==null)return null;const n=e.match(re);return n?n[2]:null}function rt(e){if(e==null)return null;const n=e.match(re);return n?{path:n[1],extension:n[2]}:{path:e,extension:null}}async function st(e){return typeof e=="string"?O(e)??{data:e}:new Promise((n,t)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>n(O(r.result)),r.onerror=s=>t(s)})}const re=/([^.]*)\.([^/]*)$/,ot=/(^data:image\/svg|\.svg$)/i,ct=Object.freeze(Object.defineProperty({__proto__:null,Url:h,addProxy:Ue,addProxyRule:be,addQueryParameter:Ze,addQueryParameters:et,base64UrlEncode:Se,blobUrlToBlob:je,changeDomain:Me,changeHost:Ve,dataComponents:O,dataToArrayBuffer:Y,dataToBlob:Z,downloadBlobAsFile:Le,downloadDataAsFile:He,ensureTrailingSlash:ne,getAppBaseUrl:we,getAppUrl:ye,getFilename:Je,getHost:Ke,getInterceptor:ve,getOrigin:V,getPathExtension:nt,getProxyRule:A,getProxyUrl:_,hasProtocol:B,hasSameCanonicalArcGISOnlinePortal:qe,hasSameCanonicalPortal:Oe,hasSameOrigin:v,hasSamePortal:Ce,isAbsolute:g,isAppHTTPS:P,isBlobProtocol:K,isDataProtocol:X,isHTTPSProtocol:te,isProtocolRelative:u,isSVG:Xe,isTrustedServer:Pe,join:M,makeAbsolute:S,makeData:Te,makeRelative:Ae,normalize:U,objectToQuery:q,parseData:st,queryToObject:H,removeFile:Ne,removeQueryParameter:tt,removeQueryParameters:Ye,removeTrailingSlash:Qe,splitPathExtension:rt,test:$e,toHTTP:ze,toHTTPS:I,trustedServersUrlCache:$,urlToObject:p},Symbol.toStringTag,{value:"Module"}));export{I as $,q as A,et as B,ne as C,Ce as D,Ye as E,v as F,Ae as G,A as H,p as I,Z as J,U as K,Xe as L,Pe as M,ve as N,ct as O,Ue as P,Ne as R,Ze as S,Oe as T,M as V,H as W,V as X,g as Y,K as Z,S as _,nt as a,ce as b,st as c,X as d,Ve as e,Me as f,ye as g,u as h,je as i,Qe as j,it as k,_ as l,te as m,Y as n,O as o,be as p,Je as q,ut as r,Te as s,k as t,Se as u,Ke as v,we as w,h as x,C as y,rt as z};
