import{r as n,m as l,a as f}from"./B1ITX55D.js";import{V as c}from"./DdhNVO-L.js";import{U as p}from"./BifNJpTd.js";import{a as u}from"./ByNAQ7iQ.js";let r=class extends c{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(u((()=>this._refresh()),p))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let t=0;for(const s of e)s!=null&&(t=this._processCollection(t,s));this.splice(t)}_createNewInstance(e){return new c(e)}_processCollection(e,t){if(!t)return e;const s=this.itemFilterFunction??(o=>!!o);for(const o of t)if(o){if(s(o)){const i=this.indexOf(o,e);i>=0?i!==e&&this.reorder(o,e):this.add(o,e),++e}if(this.getChildrenFunction){const i=this.getChildrenFunction(o);if(Array.isArray(i))for(const h of i)e=this._processCollection(e,h);else e=this._processCollection(e,i)}}return e}};n([l()],r.prototype,"getCollections",void 0),n([l()],r.prototype,"getChildrenFunction",void 0),n([l()],r.prototype,"itemFilterFunction",void 0),r=n([f("esri.core.CollectionFlattener")],r);export{r as l};
