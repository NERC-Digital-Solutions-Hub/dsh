import{c as nt,_ as l,m as p,a as J,n as me}from"./DUlE1Kon.js";import{N as an,h as un}from"./BFGjv385.js";import"./DSdBzmdi.js";import{u as Nt}from"./BEA_VxVb.js";import{l as ln,w as cn}from"./zBqsFMnn.js";import{a1 as pn}from"./DxH_hBwP.js";import{l as hn}from"./BeSfGlfk.js";import{g as fn}from"./CM1PiDdF.js";import{v as At,R as T,P as _,q as x,o as F,_ as Mt,Z as Vt,c as Gt,s as ge,p as lt,H as b,J as dn,j as yn,A as mn}from"./Dv0h64eS.js";import{i as ve,t as zt,n as Dt}from"./CcBSCae6.js";import{b as gn}from"./DSBUT0GZ.js";import{s as ue,f as vn}from"./DJWKYYK3.js";import{r as $n}from"./DchRxFIP.js";import{m as bn,l as wn}from"./bnayRBMH.js";import{q as L,al as U,av as xn,ax as $e,aj as at,ak as et,aw as Nn,au as Mn,am as Ln,X as be,O as we,ay as le}from"./MhViydJc.js";import{n as B,r as wt,l as _n}from"./Cgb6qxNH.js";import{r as Lt,n as d,e as pt,t as K,N as Tn}from"./BCRaCWYj.js";import{s as kn,j as Sn}from"./B95mHHT8.js";import{n as zn}from"./DPb6J-GU.js";import{e as jn}from"./DCfKjjp7.js";import{j as Wt,q as xe,b as Ne,y as Me}from"./e3bVHp0-.js";import{U as jt,j as q,W as Jt,a as Le,J as _e,O as qn,w as Pn,X as En,R as Te,k as ke}from"./BuR0U5oK.js";import{X as On,q as Rn,T as Bn,c as Dn}from"./CFlrkvPE.js";import{E as Hn,b as In,I as Un,U as Ft}from"./DWiZ600T.js";import{x as Se,ap as Zn,w as An,am as Vn,aU as Wn,T as ze,b1 as je,ar as Jn}from"./CQL0hffV.js";import{a as qt}from"./C0_WMv8-.js";import{c as Xn,a as Cn}from"./B-XvkuGZ.js";let xt=class extends nt{constructor(t){super(t),this.enabled=!1}};l([p({type:Boolean,nonNullable:!0})],xt.prototype,"enabled",void 0),xt=l([J("esri.views.interactive.sketch.SketchLabelOptions")],xt);const qe=xt;let ct=class extends nt{constructor(t){super(t),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};l([p({type:String,nonNullable:!0})],ct.prototype,"mode",void 0),ct=l([J("esri.views.interactive.sketch.SketchTooltipElevationOptions")],ct);let w=class extends nt{constructor(t){super(t),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};l([p({type:Boolean,nonNullable:!0})],w.prototype,"area",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"coordinates",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"direction",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"distance",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"elevation",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"header",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"helpMessage",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"orientation",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"radius",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"rotation",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"scale",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"size",void 0),l([p({type:Boolean,nonNullable:!0})],w.prototype,"totalLength",void 0),w=l([J("esri.views.interactive.sketch.SketchTooltipVisibleElements")],w);const Pe=w;let M=class extends nt{constructor(t){super(t),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new ct,this.placement="auto",this.offset=null,this.visibleElements=new Pe,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};l([p({type:Boolean,nonNullable:!0})],M.prototype,"enabled",void 0),l([p()],M.prototype,"forceEnabled",void 0),l([p()],M.prototype,"effectiveEnabled",null),l([p()],M.prototype,"helpMessage",void 0),l([p()],M.prototype,"helpMessageIcon",void 0),l([p({type:Boolean,nonNullable:!0})],M.prototype,"inputEnabled",void 0),l([p({type:ct,nonNullable:!0})],M.prototype,"elevation",void 0),l([p()],M.prototype,"placement",void 0),l([p()],M.prototype,"offset",void 0),l([p({type:Pe,nonNullable:!0})],M.prototype,"visibleElements",void 0),l([p()],M.prototype,"visualVariables",void 0),l([p()],M.prototype,"xyMode",void 0),M=l([J("esri.views.interactive.sketch.SketchTooltipOptions")],M);const Ee=M;let rt=class extends nt{constructor(t){super(t),this.length=null,this.verticalLength=null,this.area=null}};l([p()],rt.prototype,"length",void 0),l([p()],rt.prototype,"verticalLength",void 0),l([p()],rt.prototype,"area",void 0),rt=l([J("esri.views.interactive.sketch.Units")],rt);const _t=rt;let X=class extends nt{constructor(t){super(t),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?"relative-bilateral":"relative";case"absolute":return"absolute"}}get displayUnits(){return this._get("displayUnits")??new _t}set displayUnits(t){this._set("displayUnits",t)}get inputUnits(){return this._get("inputUnits")??new _t}set inputUnits(t){this._set("inputUnits",t)}};l([p({type:String,nonNullable:!0})],X.prototype,"directionMode",void 0),l([p({type:Boolean,nonNullable:!0})],X.prototype,"relativeDirectionIsBilateral",void 0),l([p()],X.prototype,"effectiveDirectionMode",null),l([p({type:_t,nonNullable:!0})],X.prototype,"displayUnits",null),l([p({type:_t,nonNullable:!0})],X.prototype,"inputUnits",null),X=l([J("esri.views.interactive.sketch.SketchValueOptions")],X);const Oe=X;let st=class extends nt{constructor(t){super(t),this.labels=new qe,this.tooltips=new Ee,this.values=new Oe}};l([p({nonNullable:!0,type:qe})],st.prototype,"labels",void 0),l([p({nonNullable:!0,type:Ee})],st.prototype,"tooltips",void 0),l([p({nonNullable:!0,type:Oe})],st.prototype,"values",void 0),st=l([J("esri.views.interactive.sketch.SketchOptions")],st);const Ns=st;function Re(e,t,n){return k(e,t,n)}function k(e=0,t=0,n=0){return Lt(e,t,n)}function Ms(e){return e}function Ls(e){return e}function Y(e,t,n){return Lt(e,t,n)}function it(e){const[t,n,r]=e;return e.length>3?[t,n,r,e[3]]:[t,n,r]}function _s(e){return e[3]=1|((e.length>3?e[3]:void 0)??0),e}function Ts(e){return!!(1&((e.length>3?e[3]:void 0)??0))}function ce(e,t,{coordinateHelper:n,elevationInfo:r},s){return e?Gn(n.vectorToDehydratedPoint(e,Fn),t,r,s):null}function Gn(e,t,n,r=k()){return r[0]=e.x,r[1]=e.y,r[2]=e.z??0,t==null||(t.type==="2d"?r[2]=0:r[2]=Hn(t,e,n,Ft)??0),r}function ks(e,t,n){return n?(ve(n,e[0],e[1],e[2],t),n):zt(e[0],e[1],e[2],t)}function Ss(e,t,{z:n,m:r},s,i){const{spatialReference:o,elevationInfo:a}=s;let u;n==null&&r==null?u=void 0:t==null||t.type==="2d"?u=n??void 0:u=In(t,e,o,Ft,a)??0;const[c,h]=e;return i?ve(i,c,h,u,o):i=zt(c,h,u,o),r!=null&&(i.m=r,i.hasM=!0),i}function zs(e,t,n,r,s=k()){const[i,o]=e;return s[0]=i,s[1]=o,e.length>3&&(s[3]=e[3]??0),n?.type!=="3d"?(s[2]=t.value,s):(s[2]=Un(n,i,o,t.value,r,t.elevationInfo,Ft)??0,s)}const Fn=zt(0,0,0,null);let O=class extends me{constructor(){super(...arguments),this.enabled=!0}};l([p({type:Boolean})],O.prototype,"enabled",void 0),O=l([J("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],O);let m=class extends me{constructor(t){super(t),this.lineSnapper=new O,this.parallelLineSnapper=new O,this.rightAngleSnapper=new O,this.rightAngleTriangleSnapper=new O,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new Nt([255,127,0]),this.orangeTransparent=new Nt([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};l([p({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"lineSnapper",void 0),l([p({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"parallelLineSnapper",void 0),l([p({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"rightAngleSnapper",void 0),l([p({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"rightAngleTriangleSnapper",void 0),l([p({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],m.prototype,"shortLineThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],m.prototype,"distance",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],m.prototype,"pointThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],m.prototype,"intersectionParallelLineThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],m.prototype,"parallelLineThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],m.prototype,"verticalLineThresholdMeters",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"touchSensitivityMultiplier",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],m.prototype,"pointOnLineThreshold",void 0),l([p({type:Nt,nonNullable:!0})],m.prototype,"orange",void 0),l([p({type:Nt,nonNullable:!0})],m.prototype,"orangeTransparent",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"lineHintWidthReference",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"lineHintWidthTarget",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],m.prototype,"lineHintFadedExtensions",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"parallelLineHintWidth",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],m.prototype,"parallelLineHintLength",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],m.prototype,"parallelLineHintOffset",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],m.prototype,"rightAngleHintSize",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],m.prototype,"rightAngleHintOutlineSize",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],m.prototype,"satisfiesConstraintScreenThreshold",void 0),m=l([J("esri.views.interactive.snapping.Settings.Defaults")],m);const qs=new m,Ps=Symbol("grid-placement-graphic");function Kn(e,t){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function Es(e,t){return Math.sqrt(Kn(e,t))}function Os(e,t){t.sort((n,r)=>At(n.targetPoint,e)-At(r.targetPoint,e))}function Rs({parameters:{point:e,distance:t,returnEdge:n,vertexMode:r,coordinateHelper:{spatialReference:s},filter:i},mode:o,returnZ:a,filter:u}){const c=u?.clone()??new gn({where:"1=1"});return c.returnZ=a??o==="3d",i&&(c.geometry=i.geometry,c.distance=i.distance,c.spatialRelationship=i.spatialRelationship,c.where=hn(c.where,i.where),c.timeExtent=fn(c.timeExtent,i.timeExtent),c.objectIds=Yn(c.objectIds,i.objectIds)),{point:zt(e[0],e[1],e[2],s.toJSON()),mode:o,distance:t,returnEdge:n,vertexMode:r,query:c.toJSON()}}function Yn(e,t){return e||t?t?e?Array.from(pn(new Set(e),new Set(t))):t:e:null}function Bs(e,t,n){return{left:ce(e.leftVertex.pos,t,n),right:ce(e.rightVertex.pos,t,n)}}const pe=Symbol("snapping-toggle");function Ds(e,t=()=>{}){const n=ln(()=>({view:e.view,snappingOptions:e.snappingOptions}),({view:r,snappingOptions:s})=>{if(e.removeHandles(pe),!r||!s)return;const i=vn.TOOL,o=[r.on("key-down",a=>{a.key!==ue.toggle||a.repeat||(s.enabledToggled=!0,t())},i),r.on("key-up",a=>{a.key===ue.toggle&&(s.enabledToggled=!1,t())},i),r.on("pointer-move",a=>{const u=a.native.ctrlKey;s.enabledToggled!==u&&(s.enabledToggled=u,t())},i)];e.addHandles(o,pe)},cn);e.addHandles(n)}function Hs(e){return $n(e)&&"utilityNetworks"in e&&!!e.utilityNetworks?.length}function Is(e){return e?.type==="line"}function Ht(e,t){return e[0]*t[1]-e[1]*t[0]}function Qn(e,t,n){const r=at(n,t)/et(n);return Nn(e,n,r)}function Us(e,t,n,r,s=n){return L(tt,r,n),L(Tt,t,s),Qn(ot,Tt,tt),xn(e,s,ot)}function Zs(e,t,n,r){L(tt,t,n);const s=r/$e(tt);return U(e,n,tt,s)}function As(e,t){const n=e.start,r=e.end,s=t.start,i=t.end,o=L(tt,r,n),a=L(Be,i,s),u=Ht(o,a);if(Math.abs(u)<=er)return[];const c=L(Tt,n,s),h=Ht(a,c)/u;return Ht(o,c)/u,h>=0?[U(ot,n,o,h)]:[U(ot,n,o,h)]}function tr(e,t,n){const r=[],s=L(tt,e.end,e.start),i=L(Be,e.start,t),o=et(s),a=2*at(s,i),u=a*a-4*o*(et(i)-n*n);if(u===0){const c=-a/(2*o);r.push(U(ot,e.start,s,c))}else if(u>0){const c=Math.sqrt(u),h=(-a+c)/(2*o);r.push(U(ot,e.start,s,h));const f=(-a-c)/(2*o);r.push(U(Tt,e.start,s,f))}return r}const er=1e-6,tt=B(),Be=B(),Tt=B(),ot=B();function Kt({start:e,end:t,type:n},r,s){const i=[],o=L(ht,t,e),a=L(Pt,e,r),u=et(o),c=2*at(o,a),h=c*c-4*u*(et(a)-s*s);if(h===0){const f=-c/(2*u);(n===0||f>=0)&&i.push(U(B(),e,o,f))}else if(h>0){const f=Math.sqrt(h),v=(-c+f)/(2*u);(n===0||v>=0)&&i.push(U(B(),e,o,v));const g=(-c-f)/(2*u);(n===0||g>=0)&&i.push(U(B(),e,o,g))}return i}function De(e,t){const n=e.start,r=e.end,s=L(ht,r,n),i=F(Ot,-s[1],s[0],0),o=t.start,a=t.end,u=T(Qt,a,o),c=_(u,i),h=F(Je,n[0],n[1],0),f=T(Xe,h,o),v=_(f,i),g=pt();if(Math.abs(c)<g)return[];const $=x(Ce,o,u,v/c);if(t.type===0){const N=T(Xt,$,o);if(_(N,u)<-g)return[]}if(e.type===1){const N=Mn(Pt,$,n);if(at(N,s)<-g)return[]}return[K($)]}function nr(e,t){return sr(kt(te,t[2],e),t)}function He(e,t){return Ve(kt(te,0,e),kt(ur,0,t)).map(([r,s])=>wt(r,s))}function Ie(e,t,n){return Ze(e,kt(te,e[2],t),n)}function Ue(e,t,n,r=d()){const s=L(ht,e,t),i=$e(s);return U(r,t,s,i===0?1:n/i),r[2]=e[2],r}function Ze(e,{start:t,end:n,type:r},s=d()){const i=T(Et,e,t),o=T(Ot,n,t),a=_(i,o)/_(o,o);return x(s,t,o,r===0?Math.max(a,0):a)}const rr=(()=>{const e=d(),t=d(),n=d();return({start:r,end:s},{center:i,radius:o,normal:a,slicePlane:u})=>{const c=jt(i,a,ar);if(y(Jt(c,r),0)&&y(Jt(c,s),0)){Le(a,e,t);const f=($,N)=>(Gt(n,N,i),be($,_(n,e),_(n,t)),$),v=tr({start:f(ht,r),end:f(Pt,s)},_n,o),g=[];for(const[$,N]of v){const S=ge(d(),i);x(S,S,e,$),x(S,S,t,N),u&&!G(u,S)||g.push(S)}return g}const h=d();return _e(c,r,s,h)?!y(lt(h,i),o)||u&&!G(u,h)?[]:[h]:[]}})();function Ae({start:e,end:t,type:n},r,s){const i=[],o=Gt(Et,t,e),a=L(Pt,e,r),u=et(o),c=2*at(o,a),h=c*c-4*u*(et(a)-s*s);if(h===0){const f=-c/(2*u);(n===1||f>=0)&&i.push(x(d(),e,o,f))}else if(h>0){const f=Math.sqrt(h),v=(-c+f)/(2*u);(n===1||v>=0)&&i.push(x(d(),e,o,v));const g=(-c-f)/(2*u);(n===1||g>=0)&&i.push(x(d(),e,o,g))}return i}function Ve(e,t){const n=e.start,r=e.end,s=t.start,i=t.end,o=T(Et,r,n),a=T(Ot,i,s),u=T(Qt,s,n),c=Mt(Je,o,a);if(!y(_(u,c),0))return[];const h=Vt(c);if(y(h,0))return[];const f=Mt(Xe,u,a),v=_(f,c)/h,g=x(Ce,n,o,v);if(e.type===0){const $=T(Xt,g,n);if(_(o,$)<-pt())return[]}if(t.type===0){const $=T(Xt,g,s);if(_(a,$)<-pt())return[]}return[K(g)]}function sr({start:e,end:t,type:n},r){const s=T(Et,r,e),i=T(Ot,t,e),o=Mt(Qt,i,s),a=Vt(o)/Vt(i),u=pt();if(a<u)switch(n){case 1:return[K(r)];case 0:return _(i,s)<-u?[]:[K(r)]}return[]}function Yt(e,t,n,r){const[s,i]=e,[o,a]=n,u=o-s,c=a-i,h=u*u+c*c,f=Math.sqrt(h);if(f>t+r)return[];if(f<Math.abs(t-r))return[];if(y(f,0)&&y(t,r))return[];const v=(t*t-r*r+h)/(2*f),g=Math.sqrt(t*t-v*v),$=g*c/f,N=g*u/f,[S,Q]=Ln(ht,e,n,v/f);return y($,N)?[wt(S,Q)]:[wt(S+$,Q-N),wt(S-$,Q+N)]}function kt(e,t,{start:n,end:r,type:s}){return F(e.start,n[0],n[1],t),F(e.end,r[0],r[1],t),e.type=or[s],e}function We(e,t){return y(e[2],t[2])}function y(e,t){return bn(Math.abs(e-t),0,pt())}function ir(e,t){return t.filter(n=>G(e,n))}function G(e,t){return qn(e,t)}const or={0:1,1:0},ht=B(),Pt=B(),Et=d(),Ot=d(),Qt=d(),Je=d(),Xe=d(),Ce=d(),Xt=d(),ar=q(),te={start:d(),end:d(),type:1},ur={start:d(),end:d(),type:1};class P{intersect(t){return Z(this,t)}closestPoints(t){return[this.closestTo(t)]}}class ft extends P{constructor(t){super(),this.point=t}equals(t){return this===t||E(t)&&b(this.point,t.point)}closestTo(){return it(this.point)}}class ee extends P{constructor(t,n,r){super(),this.start=t,this.end=n,this.lineLike={start:t,end:n,type:r}}equals(t){return this===t||D(t)&&this.lineLike.type===t.lineLike.type&&b(this.start,t.start)&&b(this.end,t.end)}closestTo(t){const n=k();return Ze(t,this.lineLike,n),n}}class Ge extends ee{constructor(t,n){super(t,n,1)}}class lr extends ee{constructor(t,n){super(t,n,0)}}class Fe extends P{constructor(t){super(),this.constraints=t}equals(t){return this===t||Ct(t)&&un(this.constraints,t.constraints,(n,r)=>n.equals(r))}closestTo(t){let n,r=1/0;for(const s of this.constraints){const i=s.closestTo(t),o=At(t,i);o<r&&(r=o,n=i)}return it(n??t)}closestPoints(t){return this.constraints.flatMap(n=>n===this?[]:n.closestPoints(t))}}class cr extends P{constructor(t,n){super(),this.center=t,this.radius=n}equals(t){return this===t||I(t)&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}closestTo(t){const n=k();return Ue(t,this.center,this.radius,n),n}}class ne extends P{constructor(t,n){super(),this.center=t,this.radius=n}equals(t){return this===t||V(t)&&b(this.center,t.center)&&this.radius===t.radius}closestTo(t){const n=k();return Ue(t,this.center,this.radius,n),n[2]=this.center[2],n}asCircle(){return new re(it(this.center),this.radius,Y(0,0,1))}}class re extends P{constructor(t,n,r,s=void 0){super(),this.center=t,this.radius=n,this.normal=r,this.slicePlane=s}equals(t){return this===t||C(t)&&b(this.center,t.center)&&b(this.normal,t.normal)&&this.radius===t.radius}closestTo(t){const{center:n,radius:r}=this;Te(this.getPlane(pr),t,It);const s=T(It,It,n),i=yn(s);if(y(i,0))return it(t);const o=r/Math.sqrt(i),a=k();x(a,n,s,o);const{slicePlane:u}=this;return u&&!G(u,a)?ie(u,this)?.closestTo(t)??it(t):a}getPlane(t=q()){return jt(this.center,this.normal,t)}}const It=d(),pr=q();class hr extends P{constructor(t){super(),this.z=t}equals(t){return this===t||A(t)&&this.z===t.z}closestTo(t){return Y(t[0],t[1],this.z)}getPlane(t=q()){return F(he,0,0,this.z),jt(he,Tn,t)}}const he=d();class se extends P{constructor(t,n,r){super(),this.start=t,this.end=n,this.planeLike={start:t,end:n,type:r}}equals(t){return this===t||H(t)&&this.planeLike.type===t.planeLike.type&&b(this.start,t.start)&&b(this.end,t.end)}closestTo(t){const n=k();return Ie(t,this.planeLike,n),n}closestEndTo(t){const{start:n,end:r}=this.planeLike;return Math.sign(at(L(fr,r,n),L(dr,t,n)))>0?this.end:this.start}getPlane(t=q()){const n=ge(fe,this.end);return n[2]+=1,Pn(this.start,this.end,n,t)}getSlicePlane(t=q()){const{start:n,end:r,type:s}=this.planeLike;if(s===0)return;const i=F(fe,n[0],n[1],0),o=F(de,r[0],r[1],0),a=Gt(de,o,i);return jt(i,a,t),t}}const fr=B(),dr=B(),fe=d(),de=d();class Vs extends se{constructor(t,n){super(t,n,1)}}class Ws extends se{constructor(t,n){super(t,n,0)}}class yr extends P{constructor(t,n){super(),this.sphere=Rn(t,n),this._center=K(t)}equals(t){return this===t||W(t)&&Bn(this.sphere,t.sphere)}closestTo(t){const n=k();return Dn(this.sphere,t,n),n}get center(){return this._center}get radius(){return this.sphere[3]}}class mr extends P{constructor(t,n,r){super(),this.start=t,this.end=n,this.getZ=r,this.planeLike={start:t,end:n,type:0}}equals(t){return this===t||St(t)&&b(this.start,t.start)&&b(this.end,t.end)&&this.getZ===t.getZ}closestTo(t){return xr(this,t)}addIfOnTheGround(t,n){for(const r of n){const s=this.getZ(r[0],r[1])??0;y(r[2],s)&&(r[2]=s,t.push(r))}}}class gr extends P{constructor(t,n,r){super(),this._x=t,this._y=n,this._z=r}equals(t){return this===t||Dr(t)&&this._x===t._x&&this._y===t._y&&this._z===t._z}closestTo([t,n,r]){return Re(this._x??t,this._y??n,this._z??r)}}class vr extends P{constructor(t,n,r,s,i){super(),this._origin=t,this._spatialReference=n,this._distanceMeters=r,this._z=s,this._directionDegrees=i}equals(t){return this===t||Br(t)&&le(this._origin,t._origin)&&this._spatialReference===t._spatialReference&&this._distanceMeters===t._distanceMeters&&this._z===t._z&&this._directionDegrees===t._directionDegrees}closestTo([t,n,r]){return be(ut,t,n),le(ut,this._origin)||this._applyDirectionAndDistance(ut),Re(ut[0],ut[1],this._z??r)}_applyDirectionAndDistance(t){if(this._directionDegrees!=null&&this._distanceMeters!=null)Wt(t,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)br(t,this._origin,this._directionDegrees,t,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:n}=xe($r,this._origin,t,this._spatialReference);Wt(t,this._origin,n??0,this._distanceMeters,this._spatialReference)}}}const ut=[0,0],$r=new Ne;function br(e,t,n,r,s){let{azimuth:i,distance:o}=xe(wr,t,r,s);i??=0;let a=o*Math.cos((i-n)*jn);a=Math.max(0,a),Wt(e,t,n,a,s)}const wr=new Ne;function xr(e,t){const n=k();return Ie(t,e.planeLike,n),n[2]=e.getZ(n[0],n[1])??Ye,n}function Z(e,t){if(Ct(e)){const n=[];for(const r of e.constraints){const s=r.intersect(t);s&&n.push(s)}return oe(n)}if(Ct(t))return Z(t,e);if(St(e))return ye(e,t);if(St(t))return ye(t,e);if(E(e)){const{point:n}=e;if(E(t))return b(n,t.point)?e:void 0;const r=t.closestTo(n);return dn(r,n)?e:void 0}if(D(e)){if(E(t))return Z(t,e);if(D(t))return R(Ve(e.lineLike,t.lineLike));if(A(t))return Nr(e,t);if(H(t))return R(De(t.planeLike,e.lineLike));if(I(t))return R(Ae(e.lineLike,t.center,t.radius));if(C(t))return R(rr(e.lineLike,t));if(V(t))return Mr(e,t);if(W(t))return Lr(e,t)}else if(A(e)){if(E(t)||D(t))return Z(t,e);if(A(t))return _r(e,t);if(H(t))return Tr(e,t);if(I(t))return kr(e,t);if(C(t))return zr(e,t);if(V(t))return Sr(e,t);if(W(t))return jr(e,t)}else if(H(e)){if(E(t)||D(t)||A(t))return Z(t,e);if(H(t))return Ut(He(e.planeLike,t.planeLike));if(I(t))return Ut(Kt(e.planeLike,t.center,t.radius));if(C(t))return Pr(e,t);if(V(t))return qr(e,t);if(W(t))return Er(e,t)}else if(I(e)){if(E(t)||D(t)||A(t)||H(t))return Z(t,e);if(I(t))return Ut(Yt(e.center,e.radius,t.center,t.radius));if(C(t))return void 0;if(V(t))return Or(e,t);if(W(t))return void 0}else if(C(e)){if(E(t)||D(t)||A(t)||H(t)||I(t))return Z(t,e);if(C(t))return void 0;if(V(t))return t.asCircle(),void 0;if(W(t))return void 0}else if(V(e)){if(E(t)||D(t)||A(t)||H(t)||I(t)||C(t))return Z(t,e);if(V(t))return Rr(t,e);if(W(t))return void 0}else if(W(e)){if(E(t)||D(t)||A(t)||H(t)||I(t)||V(t))return Z(t,e);if(W(t))return void 0}}const Nr=(()=>{const e=q();return(t,n)=>{const{start:r,end:s}=t;if(We(r,s)&&y(r[2],n.z))return t;const i=k();return _e(n.getPlane(e),r,s,i)?new ft(i):void 0}})();function Mr({lineLike:e},{center:t,radius:n}){const r=t[2];return R(Ae(e,t,n).filter(s=>y(s[2],r)))}function Lr({lineLike:e},{sphere:t}){return R(On(t,e.start,e.end))}const ie=(()=>{const e=zn(),t=d(),n=d();return(r,s,i)=>{const{normal:o,center:a,radius:u}=s;Le(o,t,n);const c=ke(r),h=u*_(c,t),f=u*_(c,n);kn(e,a[0],a[1],a[2],1);const v=Sn(r,e),g=Math.hypot(h,f),$=y(g,0);if(y(Jt(r,a),0)){if($)return s;if(y(u,0))return!i||G(i,a)?new ft(it(a)):void 0;Mt(t,c,o),mn(t,t);const Bt=new Array,gt=K(a);x(gt,gt,t,u),i&&!G(i,gt)||Bt.push(gt);const vt=K(a);return x(vt,vt,t,-u),i&&!G(i,vt)||Bt.push(vt),R(Bt)}if($)return;const N=-v/g;if(Math.abs(N)>1||y(N,1))return;const S=Math.atan(h/f),Q=wn(N)-S,ae=Math.PI-Q,dt=new Array,yt=d();x(yt,a,t,u*Math.cos(Q)),x(yt,yt,n,u*Math.sin(Q)),dt.push(yt);const mt=d();return x(mt,a,t,u*Math.cos(ae)),x(mt,mt,n,u*Math.sin(ae)),dt.push(mt),R(i?ir(i,dt):dt)}})();function _r(e,t){return y(e.z,t.z)?e:void 0}function Tr({z:e},{planeLike:t}){const[n,r]=t.start,[s,i]=t.end,o=Y(n,r,e),a=Y(s,i,e);return t.type===0?new Ge(o,a):new lr(o,a)}function kr(e,t){const[n,r]=t.center;return new ne(Y(n,r,e.z),t.radius)}function Sr(e,t){return y(t.center[2],e.z)?t:void 0}const zr=(()=>{const e=q();return(t,n)=>ie(t.getPlane(e),n,n.slicePlane)})();function jr(e,{center:t,radius:n}){const r=Math.abs(t[2]-e.z);if(r>n&&!y(r,n))return;const s=Y(t[0],t[1],e.z),i=Math.sqrt(n**2-r**2);return y(i,0)?void 0:new ne(s,i)}const qr=(()=>{const e=q();return(t,{center:n,radius:r})=>{const s=Kt(t.planeLike,n,r),i=n[2];t.getSlicePlane(e);const o=new Array;for(const[a,u]of s){const c=[a,u,i];G(e,c)&&o.push(c)}return R(o)}})(),Pr=(()=>{const e=q(),t=q();return(n,r)=>ie(n.getPlane(e),r,n.getSlicePlane(t))})(),Er=(()=>{const e=q();return(t,{center:n,radius:r})=>{const s=t.getPlane(e),i=En(s,n),o=Math.abs(i);if(o>r&&!y(o,r))return;const a=Math.sqrt(r**2-i**2);if(y(a,0)){const h=k();return Te(s,n,h),new ft(h)}const u=k(),c=K(ke(s));return x(u,n,c,i),new re(u,a,c,t.getSlicePlane())}})();function Or(e,t){const n=we(e.center,t.center);return y(n,0)&&y(e.radius,t.radius)?t:Ke(Yt(e.center,e.radius,t.center,t.radius),t.center[2])}function Rr(e,t){if(!We(e.center,t.center))return;const n=we(e.center,t.center);return y(n,0)&&y(e.radius,t.radius)?e:Ke(Yt(e.center,e.radius,t.center,t.radius),e.center[2])}function ye(e,t){const{planeLike:n,getZ:r}=e,s=new Array;if(E(t))e.addIfOnTheGround(s,nr(n,t.point));else if(D(t))e.addIfOnTheGround(s,De(n,t.lineLike));else if(I(t))for(const[i,o]of Kt(n,t.center,t.radius)){const a=r(i,o);a!=null&&s.push(Lt(i,o,a))}else if(H(t)||St(t))for(const[i,o]of He(n,t.planeLike)){const a=r(i,o)??Ye;s.push(Lt(i,o,a))}return R(s)}function Ut(e){return oe(e.map(([t,n])=>{const r=Y(t,n,0),s=Y(t,n,1);return new Ge(r,s)}))}function R(e){return oe(e.map(t=>t?new ft(t):void 0))}function Ke(e,t){return R(e.map(([n,r])=>[n,r,t]))}function oe(e){if(e.length!==0)return e.length===1?e[0]??void 0:new Fe(e.filter(an))}function Ct(e){return e instanceof Fe}function E(e){return e instanceof ft}function D(e){return e instanceof ee}function A(e){return e instanceof hr}function H(e){return e instanceof se}function I(e){return e instanceof cr}function V(e){return e instanceof ne}function C(e){return e instanceof re}function W(e){return e instanceof yr}function St(e){return e instanceof mr}function Br(e){return e instanceof vr}function Dr(e){return e instanceof gr}const Ye=0;let Rt=class{constructor(t,n){this.isDraped=t,this.domain=n}};class Qe extends Rt{constructor(t,n,r,s,i=3,o=!0,a=!0){super(s,i),this.type=t,this.lineStart=n,this.lineEnd=r,this.fadeLeft=o,this.fadeRight=a}equals(t){return t instanceof Qe&&this.type===t.type&&b(this.lineStart,t.lineStart)&&b(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}get length(){return lt(this.lineStart,this.lineEnd)}}class tn extends Rt{constructor(t,n,r=3){super(n,r),this.intersectionPoint=t}equals(t){return t instanceof tn&&b(this.intersectionPoint,t.intersectionPoint)}}let Xs=class en extends Rt{constructor(t,n,r,s=3){super(r,s),this.lineStart=t,this.lineEnd=n}equals(t){return t instanceof en&&b(this.lineStart,t.lineStart)&&b(this.lineEnd,t.lineEnd)}},Cs=class nn extends Rt{constructor(t,n,r,s,i=3){super(s,i),this.previousVertex=t,this.centerVertex=n,this.nextVertex=r}equals(t){return t instanceof nn&&b(this.previousVertex,t.previousVertex)&&b(this.centerVertex,t.centerVertex)&&b(this.nextVertex,t.nextVertex)}};function Gs(e){return Me(e)||Se(e)}function Fs(e,t,n,...r){return Me(e)?t.apply(void 0,r):e.isWebMercator?n.apply(void 0,r):null}function rn(e){return Zn(e)?An(e)||Se(e)||Vn(e)||Wn(e)?Xn:e:Cn(e)}function Ks(e){return Hr(e)}function Hr(e,t){const{hasZ:n,spatialReference:r}=e,s=rn(r);let i=0;const o=je(s);if(o==null)return null;const a=sn;for(const u of e.paths){if(u.length<2)continue;const c=u.length-1;for(let h=0;h<c;++h){const f=u[h];z[0]=f[0],z[1]=f[1],z[2]=n?f[2]:0;const v=u[h+1];j[0]=v[0],j[1]=v[1],j[2]=n?v[2]:0;const g=a(z,j,r);if(g==null)return null;i+=g.value}}return qt(i,o)}function Ys(e,t){const{spatialReference:n}=e;return ze(n,t.spatialReference)?(z[0]=e.x,z[1]=e.y,z[2]=e.hasZ?e.z:0,j[0]=t.x,j[1]=t.y,j[2]=t.hasZ?t.z:0,sn(z,j,n)):null}function Qs(e,t){const{spatialReference:n}=e;return ze(n,t.spatialReference)?(z[0]=e.x,z[1]=e.y,z[2]=e.hasZ?e.z:0,j[0]=t.x,j[1]=t.y,j[2]=t.hasZ?t.z:0,Ur(z,j,n)):null}function ti(e){return e!=null?Ir(e.hasZ?e.z:0,e.spatialReference):null}function Ir(e,t){const n=Jn(t);return n!=null?qt(e??0,n):null}function sn(e,t,n){const r=on(e,t,n,1);return r!=null?qt(r.horizontal,r.unit):null}function Ur(e,t,n){const r=on(e,t,n,2);return r!=null?qt(r.verticalSigned,r.unit):null}function on(e,t,n,r){const s=rn(n),i=je(s);if(i==null)return null;const o=t[2]-e[2];if(r===2)return{verticalSigned:o,unit:i};if(!Dt(e,n,Zt,s)||!Dt(t,n,$t,s))return null;if(r===0)return{direct:lt($t,Zt),unit:i};if(F(bt,e[0],e[1],t[2]),!Dt(bt,n,bt,s))return null;const a=lt(bt,$t);return r===1?{horizontal:a,unit:i}:{direct:lt($t,Zt),horizontal:a,vertical:Math.abs(o),unit:i}}const z=d(),j=d(),Zt=d(),$t=d(),bt=d();function Zr(e){return e?.type==="graphic"}function ei(e){return e.find(Zr)??null}export{zs as $,Cs as A,Gs as B,Gn as C,Vs as D,Ss as E,cr as F,oe as G,hr as H,qe as I,E as J,Ds as K,mr as L,As as M,Ge as N,Ze as O,Ws as P,Fs as Q,Ir as R,rn as S,sn as T,vr as U,Ys as V,Ks as W,Ee as X,Oe as Y,gr as Z,ks as _,Rt as a,Ts as a0,Qs as a1,Ur as a2,_s as b,Y as c,Ps as d,ft as e,k as f,Ns as g,Rs as h,Es as i,Ms as j,ti as k,Re as l,ce as m,Kn as n,Is as o,qs as p,Bs as q,Us as r,Ls as s,Zs as t,ei as u,tn as v,Qe as w,Hs as x,Os as y,Xs as z};
