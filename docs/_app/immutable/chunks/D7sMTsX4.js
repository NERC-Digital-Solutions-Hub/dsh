const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TlAVPhrn.js","./KcazVFlU.js","./CYsUaMUi.js","./CnopCtV1.js","./DHq0rblm.js","./BzbIPcRT.js","./CfrNlpsM.js","./BfhsIlKo.js","./CVBwMHC0.js","./9Ox5__Nz.js","./DtUpcSZL.js","./Cw1pwOU3.js","./CVNciJfy.js","./D9Z9MdNV.js","./BgvLO-3W.js","./D6KPPgz5.js","./D6hji2n1.js","./Cy_dpZhA.js","./Cr0lIvYi.js","./BPVd6ESQ.js","./DlegnU-m.js","./B7w94aGg.js","./BsbEhHPI.js","./CKzCv7Rf.js","./Cl5k1y0H.js","./BHLr0vjc.js","./wXBmGVea.js","./DHiB1uzW.js","./BqdZpaCH.js","./CZpjcYLA.js","./CyjmmkSk.js","./-XUFDN0u.js","./D2n6zc4S.js","./BR8EEvDc.js","./9YvG7tFv.js","./Bv088Xi1.js","./Caz3HfWH.js","./CF2Ew-E2.js","./Cl5lrJ4c.js","./BV3EA4pz.js","./C4sldz2i.js","./BBxgwA0n.js","./Ab6_LQF8.js","./DQ8jsygj.js","./NdScq7k1.js"])))=>i.map(i=>d[i]);
import{s as C}from"./BfhsIlKo.js";import{t as G,e as k}from"./DHq0rblm.js";import{aK as z,aF as E}from"./DtUpcSZL.js";import{_ as u}from"./D9Z9MdNV.js";import{D as b}from"./9Ox5__Nz.js";let y;async function X(){return y==null&&(y=u(()=>import("./TlAVPhrn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then((e=>new e.WhereClauseCache(500,500)))),y}async function j(e,n){const t=await X(),i=t.get(e,n);if(i==null)throw t.getError(e,n);return i}function ze(e,n){return e||=null,n||=null,e==="1=1"?n??e:n==="1=1"?e??n:e&&n?`(${e}) AND (${n})`:e??n}function Xe(e,n){return e||=null,n||=null,e==="1=1"||n==="1=1"||e===n?e==="1=1"?e:n:e&&n?`(${e}) OR (${n})`:e??n}function je(e,n){return n.length===0?null:`${e} IN (${H(n)})`}function H(e){return e.map((n=>typeof n=="string"?q(n):n)).join(",")}function q(e){return`'${e.replaceAll("'","''")}'`}function He(e){return typeof e=="number"}function qe(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Be(e){return typeof e=="boolean"}function s(e){return typeof e=="string"||e instanceof String}function B(e){return e==null||s(e)}function Qe(e){return Array.isArray(e)}function Ye(e){return e?.declaredClass==="esri.Graphic"}function Je(e){return e instanceof Date}const Q="HH:mm",Y="HH:mm:ss",J="HH:mm:ss.SSS",W=[J,Y,Q,"TT"],Z="yyyy-MM-dd";function T(e){if(!e||!s(e))return null;const n=b.fromFormat(e,Z);return n.isValid?n:null}function w(e){return e&&s(e)?z(W,(n=>{const t=b.fromFormat(e,n);return t.isValid?t:null}))??null:null}function x(e){if(!e||!s(e))return null;const n=b.fromISO(e);return n.isValid?n:null}var f;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(f||(f={}));const A=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function K(e){return e!=null&&A.has(e.type)}function v(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function N(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function S(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const ee=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);E(A,ee);function We(e,n){const t=e?.domain;if(!t||t.type!=="range")return;const i="range"in t?t.range[0]:t.minValue,r="range"in t?t.range[1]:t.maxValue,l=K(e);return v(e)||S(e)||N(e)?{...ne(e,r,i),isInteger:l}:{min:i!=null&&typeof i=="number"?i:null,max:r!=null&&typeof r=="number"?r:null,rawMin:i,rawMax:r,isInteger:l}}function ne(e,n,t){return v(e)?{min:T(t)?.toMillis(),max:T(n)?.toMillis(),rawMin:t,rawMax:n}:S(e)?{min:w(t)?.toMillis(),max:w(n)?.toMillis(),rawMin:t,rawMax:n}:N(e)?{min:x(t)?.toMillis(),max:x(n)?.toMillis(),rawMin:t,rawMax:n}:{max:null,min:null}}function te(e){if(!e)return;const n=e.match(ie);return n?.groups?n.groups.doubleQuoted??n.groups.singleQuoted??n.groups.dotNotation:void 0}const ie=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function Ze(e){return e.match(re)?.[1]?.replace(/\\'/g,"'")??null}const re=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let g;function le(){return g||(g=(async()=>{const[e,n,t]=await Promise.all([u(()=>import("./D6hji2n1.js"),__vite__mapDeps([16,17,13,18,6,7,4,5,8,9,10,11,12,14,19,20,21,22,23,24,15,25,26,27,28,29,30,31,32,33,34,35,36,3,37,38]),import.meta.url),u(()=>import("./BV3EA4pz.js"),__vite__mapDeps([39,4,10,7,40,41,42,43,44]),import.meta.url),u(()=>import("./Cr0lIvYi.js").then(i=>i.ag),__vite__mapDeps([18,6,7,4,5,8,9,10,11,12,13,14,19,20,21,22,23,24,15,25,26,27,28]),import.meta.url)]);return{arcade:e.arcade,arcadeUtils:e,batchExec:n,aiServices:t,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),g}const ae=/^([0-9_])/,oe=/[^a-z0-9_\u0080-\uffff]+/gi;function Ke(e){return e==null?null:e.trim().replaceAll(oe,"_").replace(ae,"F$1")||null}const se=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],ue=["field","normalizationField"];function en(e,n){if(e!=null&&n!=null){for(const t of Array.isArray(e)?e:[e])if(h(se,t,n),"visualVariables"in t&&t.visualVariables)for(const i of t.visualVariables)h(ue,i,n)}}function h(e,n,t){if(e)for(const i of e){const r=G(i,n),l=r&&typeof r!="function"&&t.get(r);l&&k(i,l.name,n)}}function nn(e,n){if(e!=null&&n?.fields?.length)if("startField"in e){const t=n.get(e.startField),i=n.get(e.endField);e.startField=t?.name??null,e.endField=i?.name??null}else{const t=n.get(e.startTimeField),i=n.get(e.endTimeField);e.startTimeField=t?.name??null,e.endTimeField=i?.name??null}}const F=new Set;function $(e,n){return e&&n?(F.clear(),c(F,e,n),Array.from(F).sort()):[]}function c(e,n,t){if(t)if(n?.fields?.length)if(t.includes("*"))for(const{name:i}of n.fields)e.add(i);else for(const i of t)m(e,n,i);else{if(t.includes("*"))return e.clear(),void e.add("*");for(const i of t)i!=null&&e.add(i)}}function m(e,n,t){if(typeof t=="string")if(n){const i=n.get(t);i&&e.add(i.name)}else e.add(t)}function tn(e,n){return n==null||e==null?[]:n.includes("*")?(e.fields??[]).map((t=>t.name)):n}function rn(e,n,t=1){if(!n||!e)return[];if(n.includes("*"))return["*"];const i=$(e,n);return i.length/e.fields.length>=t?["*"]:i}async function o(e,n,t){if(!t)return;let i;const r=te(t);if(r)i=[r];else{const{arcadeUtils:l}=await le();i=l.extractFieldNames(t,n?.fields?.map((a=>a.name)))}for(const l of i)m(e,n,l)}async function _(e,n,t){if(t&&t!=="1=1"){const i=await j(t,n);if(!i.isStandardized)throw new C("fieldUtils:collectFilterFields","Where clause is not standardized",{where:t});c(e,n,i.fieldNames)}}function ln({displayField:e,fields:n}){return e||(n?.length?I(n,"name-or-title")||I(n,"unique-identifier")||I(n,"type-or-category")||fe(n):null)}function fe(e){for(const n of e){if(!n?.name)continue;const t=n.name.toLowerCase();if(t.includes("name")||t.includes("title"))return n.name}return null}function I(e,n){for(const t of e)if(t?.valueType&&t.valueType===n)return t.name;return null}async function an(e,n){if(!n)return;const t=n.elevationInfo?.featureExpressionInfo;return t?t.collectRequiredFields(e,n.fieldsIndex):void 0}function ce(e,n,t){t.onStatisticExpression?o(e,n,t.onStatisticExpression.expression):e.add(t.onStatisticField)}async function on(e,n,t){if(!n||!t||!("fields"in t))return;const i=[],r=t.popupTemplate;i.push(M(e,n,r)),t.fields&&i.push(...t.fields.map((async l=>ce(e,n.fieldsIndex,l)))),await Promise.all(i)}async function sn(e,n){const{fieldsIndex:t,trackInfo:i}=n;if(!n||!i||!t)return;const r=[i.latestObservations.renderer?.collectRequiredFields(e,t),i.previousObservations.renderer?.collectRequiredFields(e,t),i.trackLines.renderer?.collectRequiredFields(e,t)];i.popupTemplate&&r.push(M(e,n,i.popupTemplate));for(const l of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(l)for(const a of l)r.push(O(e,t,a));await Promise.all(r)}async function M(e,n,t){const i=[];t?.expressionInfos&&i.push(...t.expressionInfos.map((l=>o(e,n.fieldsIndex,l.expression))));const r=t?.content;if(Array.isArray(r))for(const l of r)l.type==="expression"&&l.expressionInfo&&i.push(o(e,n.fieldsIndex,l.expressionInfo.expression));await Promise.all(i)}async function un(e,n,t){n&&(n.timeInfo&&t?.timeExtent&&c(e,n.fieldsIndex,[n.timeInfo.startField,n.timeInfo.endField]),n.floorInfo&&c(e,n.fieldsIndex,[n.floorInfo.floorField]),t?.where!=null&&await _(e,n.fieldsIndex,t.where))}async function fn(e,n,t){n&&t&&await Promise.all(t.map((i=>de(e,n,i))))}async function de(e,n,t){n&&t&&(t.valueExpression?await o(e,n.fieldsIndex,t.valueExpression):t.field&&m(e,n.fieldsIndex,t.field))}function cn(e){return e?$(e.fieldsIndex,D(e)):[]}function pe(e){if(!e)return[];const n=e.geometryFieldsInfo;return n?$(e.fieldsIndex,[n.shapeAreaField,n.shapeLengthField]):[]}async function dn(e,n,t){if(!n||!t)return;const i=n.fieldsIndex;await Promise.all(t.filters.map((r=>_(e,i,r.where))))}const me=new Set(["oid","global-id","guid"]),ye=new Set(["oid","global-id"]),ge=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function Fe(e){const n=new Set;L(e).forEach((i=>n.add(i))),pe(e).forEach((i=>n.add(i.toLowerCase())));const t=e&&"infoFor3D"in e?e.infoFor3D:void 0;return t&&(Object.values(t.assetMapFieldRoles).forEach((i=>n.add(i.toLowerCase()))),Object.values(t.transformFieldRoles).forEach((i=>n.add(i.toLowerCase())))),Array.from(n)}function D(e){if(!e)return[];const n="editFieldsInfo"in e&&e.editFieldsInfo;if(!n)return[];const{creationDateField:t,creatorField:i,editDateField:r,editorField:l}=n;return[t,i,r,l].filter(Boolean)}function L(e){return D(e).map((n=>n.toLowerCase()))}function pn(e,n){return e.editable&&!me.has(e.type)&&!L(n).includes(e.name?.toLowerCase()??"")}function mn(e,n){const t=e.name?.toLowerCase()??"";return!(n?.objectIdField!=null&&t===n.objectIdField.toLowerCase()||n?.globalIdField!=null&&t===n.globalIdField.toLowerCase()||Fe(n).includes(t)||ye.has(e.type)||ge.some((i=>i.test(t))))}async function yn(e,n){const{labelingInfo:t,fieldsIndex:i}=n;t?.length&&await Promise.all(t.map((r=>O(e,i,r))))}async function O(e,n,t){if(!t)return;const i=t.getLabelExpression(),r=t.where;if(i.type==="arcade")await o(e,n,i.expression);else{const l=i.expression.match(/{[^}]*}/g);l&&l.forEach((a=>{m(e,n,a.slice(1,-1))}))}await _(e,n,r)}function gn(e){const n=e.defaultValue;return n!==void 0&&R(e,n)?n:e.nullable?null:void 0}function Fn(e){const n=typeof e=="string"?{type:e}:e;return ve(n)?255:n.type==="esriFieldTypeDate"||n.type==="date"?8:void 0}function V(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Ie(e){return e===null||V(e)}function be(e){return e===null||Number.isInteger(e)}function $e(){return!0}function R(e,n){let t;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":t=e.nullable?be:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":t=e.nullable?Ie:V;break;case"string":case"esriFieldTypeString":t=e.nullable?B:s;break;default:t=$e}return arguments.length===1?t:t(n)}const _e=["integer","small-integer","big-integer","long"],Te=["single","double"],we=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],xe=["esriFieldTypeSingle","esriFieldTypeDouble"],U=new Set([..._e,...we]),he=new Set([...Te,...xe]),Ee=E(U,he);function In(e){return e!=null&&U.has(e.type)}function Ae(e){return e!=null&&Ee.has(e.type)}function ve(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function bn(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function $n(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function _n(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function Tn(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function wn(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function xn(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function hn(e,n){return Ne(e,n)===null}var d,p;function En(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Ne(e,n){return e==null||e.nullable&&n===null?null:R(e,n)?Ae(e)&&!Se(e.type,Number(n))?d.OUT_OF_RANGE:null:p.INVALID_TYPE}function Se(e,n){const t=typeof e=="string"?P(e):e;if(!t)return!1;const i=t.min,r=t.max;return t.isInteger?Number.isInteger(n)&&n>=i&&n<=r:n>=i&&n<=r}function P(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Me;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return De;case"esriFieldTypeBigInteger":case"big-integer":return Le;case"esriFieldTypeSingle":case"single":return Oe;case"esriFieldTypeDouble":case"double":return Ve}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(d||(d={})),(function(e){e.INVALID_TYPE="type-validation-error::invalid-type"})(p||(p={}));const Me={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},De={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Le={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Oe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},Ve={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function An(e,n,t){switch(e){case f.INVALID_CODED_VALUE:return`Value ${t} is not in the coded domain - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case f.VALUE_OUT_OF_RANGE:return`Value ${t} is out of the range of valid values - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case p.INVALID_TYPE:return`Value ${t} is not a valid value for the field type - field: ${n.name}, type: ${n.type}, nullable: ${n.nullable}`;case d.OUT_OF_RANGE:{const{min:i,max:r}=P(n.type);return`Value ${t} is out of range for the number type - field: ${n.name}, type: ${n.type}, value range is ${i} to ${r}`}}}function vn(e,n){return!Re(e,n,null)}function Re(e,n,t){if(!e?.attributes||!n)return!0;const i=new Set(Object.keys(e.attributes));let r=!1;for(const l of n)if(!i.has(l)&&(r=!0,t==null))break;return r}function Nn(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some((n=>e.toLowerCase().startsWith(n)))}function Sn(e){const n=e?.match(/{[^}]+}/g);return n?n.map((t=>t.slice(1,-1).split(":")[0].trim())):[]}export{j as A,In as B,cn as C,tn as D,o as E,ve as F,Ze as G,mn as H,nn as I,We as J,on as K,an as L,fn as M,sn as N,dn as O,Nn as P,yn as Q,un as R,Ne as S,Tn as T,An as U,je as V,pn as W,Sn as X,rn as Y,B as Z,hn as _,bn as a,gn as b,$n as c,_n as d,le as e,En as f,Ae as g,xn as h,He as i,Ye as j,vn as k,s as l,qe as m,Fn as n,Qe as o,Ke as p,Je as q,ze as r,m as s,Be as t,Xe as u,ln as v,$ as w,wn as x,en as y,c as z};
