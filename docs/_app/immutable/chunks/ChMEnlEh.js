import{b as m,a as Y,P as Fe,e as S,h as We}from"./DUQhet5j.js";import{s as Z,i as w,e as Ke}from"./BbNfuhIx.js";import{g as Ye,u as Ze}from"./B2reeZpr.js";import{e as Xe,I as h,o as b,q as Qe,S as et,h as tt,j as oe}from"./Ckkezzl2.js";import{h as E,g as Oe,i as p,a as X,f as Ae,y as rt,j as nt,m as st,n as z}from"./D8DYOP_H.js";import{r as ot}from"./Br6uo848.js";function it(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function Cr(t,e){return function(r,n){e(r,n,t)}}function kr(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(f){try{u(n.next(f))}catch(l){i(l)}}function c(f){try{u(n.throw(f))}catch(l){i(l)}}function u(f){f.done?o(f.value):s(f.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function Pr(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var at=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Dr(t){function e(o){t.error=t.hasError?new at(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}const ie=new WeakMap;function ct(t,e,r=!1){const n=`üõë DEPRECATED - ${e}`;if(!r)return void t.warn(n);let s=ie.get(t);s||(s=new Set,ie.set(t,s)),s.has(e)||(s.add(e),t.warn(n))}const C="https://www.esriurl.com/";function Ir(t,e,r,n={}){m("esri-deprecation-warnings")&&O(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${C}${r}/`,`Esri's move to web components: ${C}components-transition-plan/`],replacement:`<${r}></${r}>`,warnOnce:!0,...n})}function Mr(t,e,r,n={}){m("esri-deprecation-warnings")&&O(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${C}${r}/`,`Esri's move to web components: ${C}components-transition-plan/`],replacement:`<${r}></${r}>`,warnOnce:!0,...n})}function zr(t,e,r={}){m("esri-deprecation-warnings")&&O(t,`Module: ${e}`,r)}function ut(t,e,r={}){if(m("esri-deprecation-warnings")){const{moduleName:n}=r;O(t,`Function: ${(n?n+"::":"")+e+"()"}`,r)}}function Br(t,e,r={}){if(m("esri-deprecation-warnings")){const{moduleName:n}=r;O(t,`Property: ${(n?n+"::":"")+e}`,r)}}function Jr(t,e,r={}){m("esri-deprecation-warnings")&&O(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...r})}function O(t,e,r={}){if(m("esri-deprecation-warnings")){const{replacement:n,version:s,see:o,warnOnce:i}=r;let a=e;if(n&&(a+=`
	üõ†Ô∏è Replacement: ${n}`),s&&(a+=`
	‚öôÔ∏è Version: ${s}`),o)if(Array.isArray(o)){a+=`
	üîó See for more details:`;for(const c of o)a+=`
		${c}`}else a+=`
	üîó See ${o} for more details.`;ct(t,a,i)}}function xr(t){const e=[];return function*(){yield*e;let r,n=e.length;for(;!(r=t.next()).done;)for(e.push(r.value),yield r.value;++n<e.length;)yield e[n]}}function Rr(t,e){for(const r of t)if(r!=null&&e(r))return r}function ae(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let Q=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(r=>{e+=r.length}),e}add(e,r){if(ae(e)){const n=this._getOrCreateGroup(r);for(const s of e)ue(s)&&n.push(s)}else ue(e)&&this._getOrCreateGroup(r).push(e);return this}forEach(e,r){if(typeof e=="function")this._groups.forEach(n=>n.forEach(e));else{const n=this._getGroup(e);n&&r&&n.forEach(r)}}has(e){return this._groups.has(T(e))}remove(e){if(typeof e!="string"&&ae(e)){for(const r of e)this.remove(r);return this}return this.has(e)?(ce(this._getGroup(e)),this._groups.delete(T(e)),this):this}removeAll(){return this._groups.forEach(ce),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const r=[];return this._groups.set(T(e),r),r}_getGroup(e){return this._groups.get(T(e))}};function T(t){return t||"_default_"}function ce(t){for(const e of t)e instanceof Q?e.removeAll():e.remove()}function ue(t){return t!=null&&(!!t.remove||t instanceof Q)}const je=Symbol("Accessor-beforeDestroy");function A(t){let e=t.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!r){e=Object.create(e);for(const n in e)e[n]=Y(e[n]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function Ne(t,e){const r=A(t);let n=r[e];return n||(n=r[e]={}),n}function lt(t,e){return E(t,e,pt)}const ft=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function pt(t){return ft.test(t)?"replace":"merge"}let le=class extends ot{constructor(e,r){super(),this.propertyName=e,this.metadata=r,this.trackingTarget=new Oe(this),this.flags=0,this.flags=p.Dirty|(r.nonNullable?p.NonNullable:0)|(r.hasOwnProperty("value")?p.HasDefaultValue:0)|(r.get===void 0?p.DepTrackingInitialized:0)|(r.dependsOn===void 0?p.AutoTracked:0)}destroy(){this.flags&p.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&X(this);const r=e.store,n=this.propertyName,s=this.flags,o=r.get(n);if(s&p.Computing||~s&p.Dirty&&r.has(n))return o;this.flags|=p.Computing;const i=e.host;let a;s&p.AutoTracked?a=Ae(this.trackingTarget,this.metadata.get,i):(rt(i,this),a=this.metadata.get.call(i)),this.flags|=p.DepTrackingInitialized,r.set(n,a,1);const c=r.get(n);return c===o?this.flags&=-2:nt(this.commit,this),this.flags&=-5,c}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&p.Overridden&&(this.flags|=p.Dirty);const e=this._observers;if(e&&e.length>0)for(const r of e)r.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const r=e.slice();for(const n of r)n.onCommitted()}}};const Ur=8;function Se(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function L(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function dt(t){return L(t)}let ht=class Te{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const r=new Te;return this._values.forEach((n,s)=>{e&&e.has(s)||r.set(s,Y(n))}),r}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,r){this._values.set(e,r)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,r){return this.has(e)}isBelowOrigin(e,r){return!this.has(e)}forEach(e){this._values.forEach(e)}};function $(t,e,r){return t!==void 0}function fe(t,e,r,n){return t!==void 0&&(!(r==null&&t.flags&p.NonNullable)||(n.lifecycle,!1))}let yt=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=h.INITIALIZING,this.store=new ht,this.mutable=!0,this._origin=7;const r=this.host.constructor.__accessorMetadata__;for(const n in r){const s=new le(n,r[n]);this.propertiesByName.set(n,s)}this.metadata=r}initialize(){this.lifecycle=h.CONSTRUCTING}constructed(){this.lifecycle=h.CONSTRUCTED}destroy(){this.lifecycle=h.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==h.INITIALIZING}get(e){const r=this.propertiesByName.get(e);if(!$(r))return;if(r.metadata.get)return r.getComputed(this);this.mutable&&X(r);const n=this.store;return n.has(e)?n.get(e):r.metadata.value}originOf(e){const r=this.store.originOf(e);if(r===void 0){const n=this.propertiesByName.get(e);if(n!==void 0&&n.flags&p.HasDefaultValue)return"defaults"}return L(r)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const r=this.propertiesByName.get(e);if($(r))return this.store.has(e)?this.store.get(e):r.metadata.value}internalSet(e,r){const n=this.propertiesByName.get(e);$(n)&&this._internalSet(n,r)}getDependsInfo(e,r,n){const s=this.propertiesByName.get(r);if(!$(s))return"";const o=new Oe,i=Ae(o,()=>s.metadata.get?.call(e));let a=`${n}${e.declaredClass.split(".").pop()}.${r}: ${i}
`;const c=o.accessed??new Set;if(c.size===0)return a;n+="  ";for(const u of c)u instanceof le&&(a+=`${n}${u.propertyName}: undefined
`);return a}setAtOrigin(e,r,n){const s=this.propertiesByName.get(e);if($(s))return this._setAtOrigin(s,r,n)}isOverridden(e){const r=this.propertiesByName.get(e);return r!==void 0&&!!(r.flags&p.Overridden)}clearOrigin(e,r){const n=this.store,s=this.propertiesByName.get(e);if(!$(s))return;const o=n.isAtOrigin(e,r)&&!(s.flags&p.Overridden);n.delete(e,r),o&&s.notifyChange()}clearOverride(e){const r=this.propertiesByName.get(e);r&&r.flags&p.Overridden&&(r.flags&=-3,r.notifyChange())}override(e,r){const n=this.propertiesByName.get(e);if(!fe(n,e,r,this))return;const s=n.metadata.cast;if(s){const o=this._cast(s,r),{valid:i,value:a}=o;if(J.release(o),!i)return;r=a}n.flags|=p.Overridden,this._internalSet(n,r)}set(e,r){const n=this.propertiesByName.get(e);if(!fe(n,e,r,this))return;const s=n.metadata.cast;if(s){const i=this._cast(s,r),{valid:a,value:c}=i;if(J.release(i),!a)return;r=c}const o=n.metadata.set;o?o.call(this.host,r):this._internalSet(n,r)}setDefaultOrigin(e){this._origin=Se(e)}getDefaultOrigin(){return L(this._origin)}notifyChange(e){const r=this.propertiesByName.get(e);r!==void 0&&r.notifyChange()}invalidate(e){const r=this.propertiesByName.get(e);r!==void 0&&r.invalidate()}commit(e){const r=this.propertiesByName.get(e);r!==void 0&&r.commit()}_internalSet(e,r){const n=this.lifecycle!==h.INITIALIZING?this._origin:0;this._setAtOrigin(e,r,n)}_setAtOrigin(e,r,n){const s=this.store,o=e.propertyName;if(s.isAtOrigin(o,n)&&Fe(r,s.get(o))&&~e.flags&p.Overridden)return;const i=s.isBelowOrigin(o,n)||s.isAtOrigin(o,n);i&&e.invalidate(),s.set(o,r,n),i&&e.commit(),st(this.host,e)}_cast(e,r){const n=J.acquire();return n.valid=!0,n.value=r,e&&(n.value=e.call(this.host,r,n)),n}},gt=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const J=new Xe(()=>new gt);function k(t,e,r){if(t&&e)if(typeof e=="object")for(const n of Object.getOwnPropertyNames(e))k(t,n,e[n]);else{if(e.includes(".")){const s=e.split("."),o=s.splice(-1,1)[0];return void k(b(t,s),o,r)}const n=t.__accessor__;n!=null&&mt(e,n),t[e]=r}}function mt(t,e){if(m("esri-unknown-property-errors")&&!_t(t,e))throw new Z("set:unknown-property",vt(t,e))}function _t(t,e){return e.metadata[t]!=null}function vt(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let wt;function $t(){return wt}const _=()=>w.getLogger("esri.core.accessorSupport.ensureTypes");function bt(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(_().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function Ot(t){return t==null?t:!!t}function At(t){return t==null?t:t.toString()}function jt(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function Nt(t){return t==null?t:Math.round(parseFloat(t))}function St(t){return null}function Tt(t,e){return r=>{let n=t(r);return e.step!=null&&(n=Math.round(n/e.step)*e.step),e.min!=null&&(n=Math.max(e.min,n)),e.max!=null&&(n=Math.min(e.max,n)),n}}function Ee(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function P(t,e){return e!=null&&t&&!(e instanceof t)}function Ce(t){return t&&"isCollection"in t}function pe(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function Et(t,e){if(!e?.constructor||!Ce(e.constructor))return U(t,e)?e:new t(e);const r=pe(t.prototype.itemType),n=pe(e.constructor.prototype.itemType);return r?n?r===n?e:r.prototype.isPrototypeOf(n.prototype)?new t(e):(U(t,e),e):new t(e):e}function U(t,e){return!!Ee(e)&&(_().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+B(t)+"'"),!0)}function Ct(t,e){return e==null?e:Ce(t)?Et(t,e):P(t,e)?U(t,e)?e:new t(e):e}function B(t){return t?.prototype?.declaredClass||"unknown"}const kt=new WeakMap;function Pt(t){switch(t){case Number:return e=>jt(e);case ee:return Nt;case Boolean:return Ot;case String:return At;case Date:return bt;case te:return St;default:return Ye(kt,t,()=>Ct.bind(null,t))}}function v(t,e){const r=Pt(t);return arguments.length===1?r:r(e)}function j(t,e,r){return arguments.length===1?j.bind(null,t):e&&(Array.isArray(e)?e.map(n=>t(n,r)):[t(e,r)])}function Dt(t,e){return arguments.length===1?j(r=>v(t,r)):j(r=>v(t,r),e)}function ke(t,e,r){return e!==0&&Array.isArray(r)?r.map(n=>ke(t,e-1,n)):t(r)}function D(t,e,r){if(arguments.length===2)return o=>D(t,e,o);if(!r)return r;r=ke(t,e,r);let n=e,s=r;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(s!==void 0)for(let o=0;o<n;o++)r=[r];return r}function It(t,e,r){return arguments.length===2?D(n=>v(t,n),e):D(n=>v(t,n),e,r)}function Pe(t){return!!Array.isArray(t)&&!t.some(e=>{const r=typeof e;return!(r==="string"||r==="number"||r==="function"&&t.length>1)})}function V(t,e){if(arguments.length===2)return V(t).call(null,e);const r=new Set,n=t.filter(a=>typeof a!="function"),s=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||r.add(a);let o=null,i=null;return(a,c)=>{if(a==null)return a;const u=typeof a,f=u==="string"||u==="number";return f&&(r.has(a)||s.some(l=>u==="string"&&l===String||u==="number"&&l===Number))||u==="object"&&s.some(l=>!P(l,a))?a:(f&&n.length?(o||(o=n.map(l=>typeof l=="string"?`'${l}'`:`${l}`).join(", ")),_().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof a=="object"&&s.length?(i||(i=s.map(l=>B(l)).join(", ")),_().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${i}`)):_().error("Accessor#set",`'${a}' is not a valid value for this property`),c&&(c.valid=!1),null)}}function q(t,e){if(arguments.length===2)return q(t).call(null,e);const r={},n=[],s=[];for(const c in t.typeMap){const u=t.typeMap[c];r[c]=v(u),n.push(B(u)),s.push(c)}const o=()=>`'${n.join("', '")}'`,i=()=>`'${s.join("', '")}'`,a=typeof t.key=="string"?c=>c[t.key]:t.key;return c=>{if(t.base&&!P(t.base,c)||c==null)return c;const u=a(c)||t.defaultKeyValue,f=r[u];if(!f)return _().error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${i()})`),null;if(!P(t.typeMap[u],c))return c;if(typeof t.key=="string"&&!Ee(c)){const l={};for(const d in c)d!==t.key&&(l[d]=c[d]);return f(l)}return f(c)}}class ee{}class te{}const Hr={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function Mt(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function De(t){switch(t.type){case"native":return v(t.value);case"array":return j(De(t.value));case"one-of":return zt(t);default:return null}}function zt(t){let e=null;return(r,n)=>F(r,t)?r:(e==null&&(e=H(t)),_().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),n&&(n.valid=!1),null)}function H(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case ee:return"integer";case Date:return"date";case te:return"null";default:return B(t.value)}case"array":return`array of ${H(t.value)}`;case"one-of":{const e=t.values.map(r=>H(r));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function F(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case ee:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case te:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(r=>!F(r,e.value));case"one-of":return e.values.some(r=>F(t,r))}}function Bt(t={}){return(e,r)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${r}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(e,r),s=Ne(e,r);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in t&&w.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=n.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const o=t.aliasOf;if(o){const c=typeof o=="string"?o:o.source,u=typeof o=="string"?null:o.overridable===!0;let f;s.dependsOn=[c],s.get=function(){let l=b(this,c);if(typeof l=="function"){f||(f=c.split(".").slice(0,-1).join("."));const d=b(this,f);d&&(l=l.bind(d))}return l},s.readOnly||(s.set=u?function(l){this._override(r,l)}:function(l){k(this,c,l)})}const i=t.type,a=t.types;if(!s.cast){let c;i?c=Jt(i):a&&(c=Array.isArray(a)?j(q(a[0])):q(a)),t.cast=xt(t.cast,c)}lt(s,t),t.range&&(s.cast=Tt(s.cast,t.range))}}function Fr(t,e,r){const n=Ne(t,r);n.json||(n.json={});let s=n.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function Jt(t){let e=0,r=t;if(Mt(t))return De(t);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],e++;const n=r;if(Pe(n))return e===0?V(n):D(V(n),e);if(e===1)return Dt(n);if(e>1)return It(n,e);const s=t;return s.from?s.from:v(s)}function xt(t,e){if(t||e)return t?e?(r,n)=>e(t(r,n),n):t:e}function Rt(t){if(t.json&&t.json.origins){const e=t.json.origins,r={"web-document":["web-scene","web-map"]};for(const n in r)if(e[n]){const s=e[n];r[n].forEach(o=>{e[o]=s}),delete e[n]}}}let Ie=class extends Ke{constructor(e,r,n){super(e,r,n)}};Ie.prototype.type="warning";function Me(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function Gt(t,e){return re(t,"any",e?.origin)}function I(t,e){return re(t,"read",e?.origin)}function ze(t,e){return re(t,"write",e?.origin)}function re(t,e,r){let n=t?.json;if(n?.origins&&r){let s;s=r==="link-chart"?n.origins[r]&&(e==="any"||e in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],s&&(e==="any"||e in s)&&(n=s)}return n}const W=()=>w.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function de(t,e,r){t&&(!r&&!e.read||e.read?.reader||e.read?.enabled===!1||qt(t)&&S("read.reader",Lt(t),e))}function Lt(t){const e=t.ndimArray??0;if(e>1)return Vt(t);if(e===1)return he(t);if("type"in t&&Je(t.type)){const r=t.type.prototype?.itemType?.Type,n=he(typeof r=="function"?{type:r}:{types:r});return(s,o,i)=>{const a=n(s,o,i);return a&&new t.type(a)}}return ne(t)}function ne(t){return"type"in t?Ut(t.type):Ht(t.types)}function Ut(t){return t.prototype.read?(e,r,n)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void W().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const o=new t;return o.read(e,n),o}:t.fromJSON}function Be(t,e,r,n){return n!==0&&Array.isArray(e)?e.map(s=>Be(t,s,r,n-1)):t(e,void 0,r)}function Vt(t){const e=ne(t),r=Be.bind(null,e),n=t.ndimArray??0;return(s,o,i)=>{if(s==null)return s;s=r(s,i,n);let a=n,c=s;for(;a>0&&Array.isArray(c);)a--,c=c[0];if(c!==void 0)for(let u=0;u<a;u++)s=[s];return s}}function he(t){const e=ne(t);return(r,n,s)=>{if(r==null)return r;if(Array.isArray(r)){const i=[];for(const a of r){const c=e(a,void 0,s);c!==void 0&&i.push(c)}return i}const o=e(r,void 0,s);return o!==void 0?[o]:void 0}}function Je(t){if(!Me(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?se(e.Type):xe(e.Type))}function qt(t){return"types"in t?xe(t.types):se(t.type)}function se(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Je(t))}function xe(t){for(const e in t.typeMap)if(!se(t.typeMap[e]))return!1;return!0}function Ht(t){let e=null;const r=t.errorContext??"type",n=t.validate;return(s,o,i)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void W().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=Wt(t));const c=t.key;if(typeof c!="string")return;const u=s[Ft(c,e,i)],f=u?e[u]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!f){const d=`Type '${u||"unknown"}' is not supported`;return i?.messages&&s&&i.messages.push(new Ie(`${r}:unsupported`,d,{definition:s,context:i})),void W().error(d)}const l=new f;return l.read(s,i),n?n(l):l}}function Ft(t,e,r){const n=Object.values(e)[0],s=A(n.prototype)[t],o=I(s,r),i=o?.read?.source;return i&&typeof i=="string"?i:t}function Wt(t){const e={};for(const r in t.typeMap){const n=t.typeMap[r],s=A(n.prototype);if(typeof t.key=="function")continue;const o=s[t.key];if(!o)continue;if(o.json?.type&&Array.isArray(o.json.type)&&o.json.type.length===1&&typeof o.json.type[0]=="string"){e[o.json.type[0]]=n;continue}const i=o.json?.write;if(!i?.writer){e[r]=n;continue}const a=i.target,c=typeof a=="string"?a:t.key,u={};i.writer(r,u,c),u[c]&&(e[u[c]]=n)}return e}function Kt(t){if(t.json||(t.json={}),ge(t.json),me(t.json),ye(t.json),t.json.origins)for(const e in t.json.origins)ge(t.json.origins[e]),me(t.json.origins[e]),ye(t.json.origins[e]);return!0}function ye(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function ge(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function me(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function _e(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const r=t?.ndimArray??0;t&&(r===1||"type"in t&&Me(t.type))?e.write.writer=Qt:r>1?e.write.writer=er(r):e.types?Array.isArray(e.types)?e.write.writer=Zt(e.types[0]):e.write.writer=Yt(e.types):e.write.writer=N}function Yt(t){return(e,r,n,s)=>e?Re(e,t,s)?N(e,r,n,s):void 0:N(e,r,n,s)}function Re(t,e,r){for(const n in e.typeMap)if(t instanceof e.typeMap[n])return!0;if(r?.messages){const n=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&t&&r.messages.push(new Z(`${n}:unsupported`,s,{definition:t,context:r})),w.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function Zt(t){return(e,r,n,s)=>!e||!Array.isArray(e)?N(e,r,n,s):N(e.filter(o=>Re(o,t,s)),r,n,s)}function N(t,e,r,n){S(r,M(t,n),e)}function M(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?Xt(t):t}function Xt(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function Qt(t,e,r,n){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(o=>M(o,n)),typeof s.toArray=="function"&&(s=s.toArray())):s=[M(t,n)],S(r,s,e)}function Ge(t,e,r){return r!==0&&Array.isArray(t)?t.map(n=>Ge(n,e,r-1)):M(t,e)}function er(t){return(e,r,n,s)=>{let o;if(e===null)o=null;else{o=Ge(e,s,t);let i=t,a=o;for(;i>0&&Array.isArray(a);)i--,a=a[0];if(a!==void 0)for(let c=0;c<i;c++)o=[o]}S(n,o,r)}}function tr(t){const e=rr(t);if(t.json.origins)for(const r in t.json.origins){const n=t.json.origins[r],s=n.types?nr(n):e;de(s,n,!1),n.types&&!n.write&&t.json.write?.enabled&&(n.write={...t.json.write}),_e(s,n)}de(e,t.json,!0),_e(e,t.json)}function rr(t){return t.json.types?K(t.json):t.type?Le(t):K(t)}function nr(t){return t.type?Le(t):K(t)}function Le(t){if(!t.type)return;let e=0,r=t.type;for(;Array.isArray(r)&&!Pe(r);)r=r[0],e++;return{type:r,ndimArray:e}}function K(t){if(!t.types)return;let e=0,r=t.types;for(;Array.isArray(r);)r=r[0],e++;return{types:r,ndimArray:e}}function sr(t){Kt(t)&&(Rt(t),tr(t))}const x=new Set,R=new Set;function Ue(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,ir(e);const r=[],n=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!x.has(s.initialize)&&(x.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!R.has(s.destroy)&&(R.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);x.clear(),R.clear();const o=class extends e{constructor(...a){if(super(...a),this.constructor===o&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let c=r.length-1;c>=0;c--)r[c].call(this)}}),n.length){let c=!1;const u=this[je];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!c){this.__accessor__.lifecycle=h.DESTROYING,c=!0,u.call(this);for(let f=0;f<n.length;f++)n[f].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};o.__accessorMetadata__=A(e.prototype),o.prototype.declaredClass=t;const i=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(o,"name",{value:i,configurable:!0}),o}}function or(t,e){return e.get==null?function(){const r=this.__accessor__,n=r.propertiesByName.get(t);if(n===void 0)return;r.mutable&&X(n);const s=r.store;return s.has(t)?s.get(t):n.metadata.value}:function(){const r=this.__accessor__,n=r.propertiesByName.get(t);if(n!==void 0)return n.getComputed(r)}}function ir(t){const e=t.prototype,r=A(e),n={};for(const s of Object.getOwnPropertyNames(r)){const o=r[s];sr(o),n[s]={enumerable:!0,configurable:!0,get:or(s,o),set(i){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&o.readOnly?ve("read-only",s):a.lifecycle===h.CONSTRUCTED&&o.constructOnly?ve("construct-only",s):void a.set(s,i)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:i})}}}Object.defineProperties(t.prototype,n)}const ve=(t,e)=>{w.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var we,$e;function ar(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const y=Symbol("Accessor-Handles"),G=Symbol("Accessor-Initialized");var g;let cr=(g=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:n,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const o=this;class i extends o{constructor(...c){super(...c),this.inherited=null,s&&s.apply(this,c)}}A(i.prototype);for(const a in e){const c=e[a];i.prototype[a]=typeof c=="function"?function(...u){const f=this.inherited;let l;this.inherited=function(...d){if(o.prototype[a])return o.prototype[a].apply(this,d)};try{l=c.apply(this,u)}catch(d){throw this.inherited=f,d}return this.inherited=f,l}:e[a]}for(const a in r){const c=ar(r[a]);Bt(c)(i.prototype,a)}return Ue(n)(i)}static freeze(e){return e instanceof g?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof g?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[we]=null,this[$e]=!1,this.constructor===g)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new yt(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),e.length>0&&(r.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,r=e.ctorArgs;e.initialize(),r&&(this.set(r),e.ctorArgs=null),e.constructed(),this.initialize(),this[G]=!0}initialize(){}[je](){this[y]=Ze(this[y])}destroy(){this.destroyed||(Qe(this),this.__accessor__.destroy(),$t()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[G]}get destroyed(){return this.__accessor__?.lifecycle===h.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===h.DESTROYING||!1}commitProperty(e){b(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,r){return k(this,e,r),this}watch(e,r,n){return ut(w.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),et(this,e,r,n)}addHandles(e,r){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const s of n)s.remove();return}(this[y]??=new Q).add(e,r)}removeHandles(e){this[y]?.remove(e)}removeAllHandles(){this[y]?.removeAll()}removeHandlesReference(e){this[y]?.removeReference(e)}hasHandles(e){return this[y]?.has(e)===!0}_override(e,r){r===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,r)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,r){r==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,r)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,r){return this.__accessor__.internalSet(e,r),this}},we=y,$e=G,g),ur=class Ve{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const r=new Ve;return this._values.forEach((n,s)=>{e&&e.has(s)||r.set(s,Y(n.value),n.origin)}),r}get(e,r){r=this._normalizeOrigin(r);const n=this._values.get(e);return r==null||n?.origin===r?n?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);const r=[...this._values.keys()];return e==null?r:r.filter(n=>this._values.get(n)?.origin===e)}set(e,r,n){if((n=this._normalizeOrigin(n))===0){const s=this._values.get(e);if(s?.origin!=null&&s.origin>n)return}this._values.set(e,new lr(r,n))}delete(e,r){(r=this._normalizeOrigin(r))!=null&&this._values.get(e)?.origin!==r||this._values.delete(e)}has(e,r){return(r=this._normalizeOrigin(r))!=null?this._values.get(e)?.origin===r:this._values.has(e)}isAtOrigin(e,r){return r=this._normalizeOrigin(r),this.has(e,r)&&this.originOf(e)===r}isBelowOrigin(e,r){return r=this._normalizeOrigin(r),!this.has(e)||this.originOf(e)<r}forEach(e){this._values.forEach(({value:r},n)=>e(r,n))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},lr=class{constructor(e,r){this.value=e,this.origin=r}};function fr(t,e,r){e.keys().forEach(s=>{r.set(s,e.get(s),0)});const n=t.metadata;Object.keys(n).forEach(s=>{t.internalGet(s)&&r.set(s,t.internalGet(s),0)})}function pr(t,e,r){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const n=t.read.source;if(typeof n=="string"){if(n===e||n.includes(".")&&n.startsWith(e)&&oe(n,r))return!0}else for(const s of n)if(s===e||s.includes(".")&&s.startsWith(e)&&oe(s,r))return!0;return!1}function dr(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function hr(t,e,r,n,s){let o=I(e[r],s);dr(o)&&(t[r]=!0);for(const i of Object.getOwnPropertyNames(e))o=I(e[i],s),pr(o,r,n)&&(t[i]=!0)}function yr(t,e,r,n){const s=r.metadata,o=Gt(s[e],n),i=o?.default;if(i===void 0)return;const a=typeof i=="function"?i.call(t,e,n):i;a!==void 0&&r.set(e,a)}const qe={origin:"service"};function gr(t,e,r=qe){if(!e||typeof e!="object")return;const n=z(t),s=n.metadata,o={};for(const i of Object.getOwnPropertyNames(e))hr(o,s,i,e,r);n.setDefaultOrigin(r.origin);for(const i of Object.getOwnPropertyNames(o)){const a=I(s[i],r).read,c=a?.source;let u;u=c&&typeof c=="string"?tt(e,c):e[i],a?.reader&&(u=a.reader.call(t,u,e,r)),u!==void 0&&n.set(i,u)}if(!r||!r.ignoreDefaults){n.setDefaultOrigin("defaults");for(const i of Object.getOwnPropertyNames(s))o[i]||yr(t,i,n,r)}n.setDefaultOrigin("user")}function Yr(t,e,r,n=qe){const s={...n,messages:[]};r(s),s.messages?.forEach(o=>{o.type!=="warning"||t.loaded?n?.messages&&n.messages.push(o):t.loadWarnings.push(o)})}function mr(t,e,r,n,s){const o={};return e.write?.writer?.call(t,n,o,r,s),o}function He(t,e,r,n,s,o){if(!n?.write)return!1;const i=b(t,r);if(!s&&n.write.overridePolicy){const a=n.write.overridePolicy.call(t,i,r,o??void 0);a!==void 0&&(s=a)}if(s||(s=n.write),!s||s.enabled===!1||s.layerContainerTypes&&o?.layerContainerType&&!s.layerContainerTypes.includes(o.layerContainerType))return!1;if((i===null&&!s.allowNull&&!s.writerEnsuresNonNull||i===void 0)&&s.isRequired){const a=new Z("web-document-write:property-required",`Missing value for required property '${r}' on '${t.declaredClass}'`,{propertyName:r,target:t});return a&&o?.messages?o.messages.push(a):a&&!o&&w.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(i===void 0||i===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(r)===0)&&_r(t,r,o,n,i)||!s.ignoreOrigin&&o?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(r)<Se(o.origin))}function _r(t,e,r,n,s){const o=n.default;if(o===void 0)return!1;if(n.defaultEquals!=null)return n.defaultEquals(s);if(typeof o=="function"){if(Array.isArray(s)){const i=o.call(t,e,r??void 0);return We(i,s)}return!1}return o===s}function Zr(t,e,r,n){const s=z(t),o=s.metadata,i=ze(o[e],n);return!!i&&He(t,s,e,i,r,n)}function vr(t,e,r){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return E(e,t.toJSON(r));const n=z(t),s=n.metadata;for(const o in s){const i=ze(s[o],r);if(!He(t,n,o,i,void 0,r))continue;const a=b(t,o),c=mr(t,i,i.write&&typeof i.write.target=="string"?i.write.target:o,a,r);Object.keys(c).length>0&&(e=E(e,c),r?.resources?.pendingOperations?.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>E(e,c,()=>"replace-arrays"))),r?.writtenProperties&&r.writtenProperties.push({target:t,propName:o,oldOrigin:dt(n.store.originOf(o)),newOrigin:r.origin}))}return e}const wr=t=>{const e=t;let r=class extends e{constructor(...n){super(...n);const s=z(this),o=s.store,i=new ur;s.store=i,fr(s,o,i)}read(n,s){gr(this,n,s)}write(n,s){return vr(this,n??{},s)}toJSON(n){return this.write({},n)}static fromJSON(n,s){return $r.call(this,n,s)}};return r=it([Ue("esri.core.JSONSupport")],r),r.prototype.toJSON.isDefaultToJSON=!0,r};function $r(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(t,e),r}const Xr=wr(cr);class br{constructor(e,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Or(e),this.apiValues=be(this._apiToJSON),this.jsonValues=be(this._jsonToAPI),this.read=n=>this.fromJSON(n),this.write=(n,s,o)=>{const i=this.toJSON(n);i!==void 0&&S(o,i,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const r=this._apiToJSON[e];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}}function Or(t){const e={};for(const r in t)e[t[r]]=r;return e}function be(t){const e=[];for(const r in t)e.push(r);return e.sort(),e}function Qr(){return function(t,e){return new br(t,{ignoreUnknown:!0,...e})}}export{Br as A,Q as B,zr as C,Ur as D,fr as E,gr as F,vr as G,Hr as H,Cr as I,Zr as J,ut as K,kr as L,te as M,Yr as N,Ir as O,Tt as P,ae as Q,Mr as R,q as S,it as _,Ue as a,Ie as b,cr as c,Lt as d,Ct as e,Ne as f,wr as g,xr as h,Qr as i,Fr as j,Pr as k,Dr as l,Bt as m,Xr as n,br as o,L as p,O as q,Se as r,Nt as s,Rr as t,At as u,Jr as v,v as w,ee as x,Xt as y,jt as z};
