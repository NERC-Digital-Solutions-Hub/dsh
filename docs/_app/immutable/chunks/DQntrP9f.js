const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D61Y2h8S.js","./PPVm8Dsz.js","./BJhaCM43.js","./BFGjv385.js","./DzPnzJx5.js","./DSdBzmdi.js","./BHwe4xe6.js","./DC4T6Ptu.js","./n__Nwz3z.js","./Dwqd1w08.js","./bnayRBMH.js","./8d4XiCAe.js","./Aa_nm3Tf.js","./Drf0nZ94.js","./CEYpN6bs.js","./DsdqSOQR.js","./DPysyl42.js","./LLVnLkr1.js","./CEIvA_E-.js","./D1xSXHoa.js","./BP4OB8lT.js","./q_b6UJoq.js","./Cl1y9xCy.js","./Dp7EIoZF.js","./DmoL4uwP.js","./CvJVpgMV.js","./BvZ8mO3n.js","./DCbUWbpl.js","./CH2voQe_.js","./Ci6C1k20.js","./DPJXGPFY.js","./BAwhstd8.js","./BnL9dRiP.js","./Bola1Gyj.js","./DWuFonT6.js","./XqQYA9Kc.js","./BEpFWXkz.js","./BpE1VQlG.js","./D_hPk45Z.js","./Dr6j4QXi.js","./D5lfJVJF.js"])))=>i.map(i=>d[i]);
import{_ as j}from"./PPVm8Dsz.js";import{u as m}from"./CH2voQe_.js";import{a as z}from"./CN9sEZ07.js";import"./BFGjv385.js";import{u,e as _}from"./DPJXGPFY.js";import{_ as E}from"./Dwqd1w08.js";import{i as R}from"./DYtTyGiR.js";import{u as g,S as A}from"./NcLQqnsB.js";import{n as O}from"./DPysyl42.js";import{H as C}from"./BJhaCM43.js";import{e as D}from"./DC4T6Ptu.js";import{S as h,o as p,q as H}from"./Cl1y9xCy.js";const k="picture-fill",$="simple-fill",M="simple-line",x="simple-marker",N="text",P="cim",b=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),w=new D(1e3);function ft(t){const r=t.style;let o=null;if(t)switch(t.type){case x:r!=="cross"&&r!=="x"&&(o=t.color);break;case $:r&&r!=="solid"?r!=="none"&&(o={type:"pattern",x:0,y:0,src:O(`esri/symbols/patterns/${r}.png`),width:5,height:5}):o=t.color;break;case k:o={type:"pattern",src:t.url,width:u(t.width)*t.xscale,height:u(t.height)*t.yscale,x:u(t.xoffset),y:u(t.yoffset)};break;case N:o=t.color;break;case P:o=g(t)}return o}function mt(t,r){const o=t+"-"+r,n=w.get(o);return n!=null?Promise.resolve(n):C(t,{responseType:"image"}).then(l=>{const e=l.data,i=e.naturalWidth,a=e.naturalHeight,s=document.createElement("canvas");s.width=i,s.height=a;const c=s.getContext("2d");c.fillStyle=r,c.fillRect(0,0,i,a),c.globalCompositeOperation="destination-in",c.drawImage(e,0,0);const y=s.toDataURL();return w.put(o,y),y})}function L(t){if(!t)return null;let r=null;switch(t.type){case $:case k:case x:r=L(t.outline);break;case M:{const o=u(t.width);t.style!=null&&t.style!=="none"&&o!==0&&(r={color:t.color,style:I(t.style),width:o,cap:t.cap,join:t.join==="miter"?u(t.miterLimit):t.join},r.dashArray=q(r).join(",")||"none");break}default:r=null}return r}function q(t){if(!t?.style)return[];const{dashArray:r,style:o,width:n}=t;if(typeof r=="string"&&r!=="none")return r.split(",").map(i=>Number(i));const l=n??0,e=b.has(o)?b.get(o).map(i=>i*l):[];if(t.cap!=="butt")for(const[i,a]of e.entries())e[i]=i%2==1?a+l:Math.max(a-l,1);return e}const I=(()=>{const t={};return r=>{if(t[r])return t[r];const o=r.replaceAll("-","");return t[r]=o,o}})(),dt=new m([128,128,128]);function J(t){const r=t.symbolLayers?.at(-1);if(r&&"outline"in r)return r?.outline?.size}function ht(t){if(!t)return 0;if(h(t)){const r=J(t);return r??0}return _(L(t)?.width)}function pt(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(r=>r.type==="object");case"line-3d":return t.symbolLayers.some(r=>r.type==="path");case"polygon-3d":return t.symbolLayers.some(r=>r.type==="object"||r.type==="extrude");default:return!1}}function yt(t){return t.resource?.href??""}function bt(t,r){if(!t)return null;let o=null;return h(t)?o=T(t):p(t)&&(o=t.type==="cim"?g(t):t.color?new m(t.color):null),o?f(o,r):null}function T(t){const r=t.symbolLayers;if(!r)return null;let o=null;return r.forEach(n=>{n.type==="object"&&n.resource?.href||(o=n.type==="water"?n.color:n.material?n.material.color:null)}),o?new m(o):null}function f(t,r){if(r==null||t==null)return t;const o=t.toRgba();return o[3]=o[3]*r,new m(o)}function U(t,r,o){const n=t.symbolLayers;if(!n)return;const l=(e,i=!1)=>{let a=r??e??null;return o?.override!=null&&(!a&&i&&(a=new m([255,255,255])),a&&(a.a=o.override)),f(a,o?.add)};n.forEach(e=>{if(e.type==="water")return void(e.color=f(e.color,o?.add));const i=e.material!=null?e.material.color:null,a=l(i,e.type==="icon"&&e.resource?.href!=null);e.material==null?e.material=new H({color:a}):e.material.color=a,"outline"in e&&e.outline?.color&&o?.add!=null&&(e.outline.color=f(e.outline.color,o.add)),"marker"in e&&e.marker!=null&&(e.marker.color=l(e.marker.color))})}function V(t,r,o){r=r??t.color,o?.override!=null&&r&&(r.a=o.override),r&&(t.color=f(r,o?.add)),"outline"in t&&t.outline?.color&&(t.outline.color=f(t.outline.color,o?.add))}function wt(t,r,o){t&&(r||o!=null)&&(r&&(r=new m(r)),h(t)?U(t,r,o):p(t)&&V(t,r,o))}async function W(t,r){const o=t.symbolLayers;o&&await z(o,async n=>B(n,r))}async function B(t,r){switch(t.type){case"extrude":G(t,r);break;case"icon":case"line":case"text":F(t,r);break;case"path":Q(t,r);break;case"object":await K(t,r)}}function F(t,r){const o=v(r);o!=null&&(t.size=o)}function v(t){for(const r of t)if(typeof r=="number")return r;return null}function G(t,r){const o=r[2];typeof o=="number"&&(t.size=o)}async function K(t,r){const{resourceSize:o,symbolSize:n}=await X(t),l=S(r,o,n);l!=null&&(t.width=d(r[0],n[0],o[0],l),t.depth=d(r[1],n[1],o[1],l),t.height=d(r[2],n[2],o[2],l))}function Q(t,r){const o=S(r,E,[t.width,void 0,t.height]);o!=null&&(t.width=d(r[0],t.width,1,o),t.height=d(r[2],t.height,1,o))}function S(t,r,o){for(let n=0;n<3;n++){const l=t[n];switch(l){case"symbol-value":{const e=o[n];return e!=null?e/r[n]:1}case"proportional":break;default:if(l&&r[n])return l/r[n]}}return null}async function X(t){const{computeObjectLayerResourceSize:r}=await j(()=>import("./D61Y2h8S.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40]),import.meta.url),o=await r(t,10),{width:n,height:l,depth:e}=t,i=[n,e,l];let a=1;for(let s=0;s<3;s++){const c=i[s];if(c!=null){a=c/o[s];break}}for(let s=0;s<3;s++)i[s]==null&&(i[s]=o[s]*a);return{resourceSize:o,symbolSize:i}}function d(t,r,o,n){switch(t){case"proportional":return o*n;case"symbol-value":return r??o;default:return t}}function Y(t,r){const o=v(r);if(o!=null)switch(t.type){case"simple-marker":t.size=o;break;case"picture-marker":{const n=t.width/t.height;n>1?(t.width=o,t.height=o*n):(t.width=o*n,t.height=o);break}case"simple-line":t.width=o;break;case"text":t.font.size=o}}async function gt(t,r){if(t&&r)return h(t)?W(t,r):void(p(t)&&Y(t,r))}function kt(t,r,o){if(t&&r!=null){if(h(t)){const n=t.symbolLayers;n&&n.forEach(l=>{if(l.type==="object")switch(o){case"tilt":l.tilt=(l.tilt??0)+r;break;case"roll":l.roll=(l.roll??0)+r;break;default:l.heading=(l.heading??0)+r}l.type==="icon"&&(l.angle+=r)})}else if(p(t))switch(t.type){case"simple-marker":case"picture-marker":case"text":t.angle+=r;break;case"cim":A(t,r,!0)}}}function $t(t,r){if(!t)return null;const o=t.effects.map(n=>n.toJSON());return R(o)}function xt(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some(r=>r.type==="extrude")}export{xt as A,wt as L,gt as M,kt as N,bt as a,dt as b,yt as d,mt as f,q as g,pt as h,ht as m,$t as q,ft as u,I as w,L as y};
