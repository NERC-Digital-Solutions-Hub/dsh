import{H as o,s as l}from"./Dc40Hn7j.js";import{V as p}from"./C6_pfFWS.js";import"./BBGELVfD.js";import{I as f}from"./CKPuaBYR.js";import{l as y,w as g}from"./DE3--tLW.js";const r=new WeakMap;function s(e){return!e.destroyed&&(r.has(e)||e.addHandles([y((()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||s(t))}),(t=>r.set(e,t)),g),f((()=>r.delete(e)))]),r.get(e))}function $(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function E(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="graphics"}function k(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="map-image"}function C(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="knowledge-graph"&&"layers"in e}function H(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="knowledge-graph-sublayer"}function I(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function P(e){return e?.type==="subtype-sublayer"}const x={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function B(e){const t=e?.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function M(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function U(e){return e?.type==="feature"&&!e.url&&e.source?.type==="memory"}function D(e){const t=e?.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&e?.source?.type==="feature-layer"}async function O(e,t){const n=l?.findServerInfo(e);if(n?.currentVersion!=null)return n.owningSystemUrl||null;const u=e.toLowerCase().indexOf("/rest/services");if(u===-1)return null;const a=`${e.slice(0,u)}/rest/info`,i=t!=null?t.signal:null,{data:c}=await o(a,{query:{f:"json"},responseType:"json",signal:i});return c?.owningSystemUrl||null}function d(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function T(e){return d(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function b(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function V(e){return!!b(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}function q(e){const t=new p;for(const n of e.allLayers.concat(e.allTables))n.type==="csv"||s(n)||("charts"in n&&t.push(n),n.type==="subtype-group"&&t.push(...n.sublayers));return t}function m(e,t){return null}function z(e){return null}function h(e){return!e||e.type==="Feature Service"&&!e.sourceUrl}function A(e,t){!t||!h(e)||m(e.url)}export{q as $,z as A,O as B,T as D,h as G,A as H,V as N,d as P,s as a,C as c,P as g,x as h,B as j,U as k,H as l,E as o,I as p,k as s,$ as u,M as w,D as x,m as z};
