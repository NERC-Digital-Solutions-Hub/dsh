import{l as O,w as P,V as W}from"./DbYAGCI-.js";import{i as v,s as B,b as R}from"./DFCWshoE.js";import{s as g}from"./hffy0Rzx.js";import"./waHvktcX.js";import{L as D,k as S,O as M,b as I,aq as q,K as G,J,g as K,r as c,m as h,a as V}from"./2T-d3wGY.js";import{H as N,ap as Q,a as X}from"./Fcs8KMhh.js";import"./PYsgr6Cv.js";const Y={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let $=new WeakMap,U={};function _(e){const t=e||U;if(!$.has(t)){const n=v(),r=B(n)?.language,s=r&&Y[r]||n;$.set(t,new Intl.NumberFormat(s,e))}return $.get(t)}function $e(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function _e(e,t){return Object.is(e,-0)&&(e=0),_(t).format(e)}function ve(e,t=v()){if(!e)return null;let n=j.get(t);if(!n){const r=_().formatToParts(12345.6),s=[..._({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(s.map(((u,l)=>[u,l]))),o=new RegExp(`[${r.find((u=>u.type==="group"))?.value}]`,"g"),b=new RegExp(`[${r.find((u=>u.type==="decimal"))?.value}]`),p=new RegExp(`[${s.join("")}]`,"g"),m=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,d=/[-\u2212\u2013\u2014\u2015]/g;n=u=>{if((u=u.trim().replaceAll(o,"").replace(b,".").replace(p,(T=>String(a.get(T)))).replaceAll(m,"").replaceAll(d,"-"))==="")return null;const l=Number(u);return isNaN(l)?null:l},j.set(t,n)}return n(e)}R((()=>{$=new WeakMap,U={}}));const j=new Map,H={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Z(e){return e in H}function C(e){if(Z(e)){const t=H[e];return t===!0?e:t}return null}const y=[],f=new Map;function E(e){for(const t of f.keys())z(e.pattern,t)&&f.delete(t)}function ee(e){return y.includes(e)||(E(e),y.unshift(e)),S((()=>{const t=y.indexOf(e);t>-1&&(y.splice(t,1),E(e))}))}async function ke(e){const t=v();f.has(e)||f.set(e,ne(e,t));const n=f.get(e);return n&&await re.add(n),n}function te(e){const t=B(e);return t?C(e)??C(t.language):null}async function ne(e,t){const n=[];for(const r of y)if(z(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){n.push(s)}throw n.length?new g("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:n}):new g("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function z(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}R((()=>{f.clear()}));const re=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=D())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function se(e,t,n,r){const s=t.exec(n);if(!s)throw new g("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${t}"`);const a=s[1]?`${s[1]}/`:"",o=s[2],b=te(r),p=`${a}${o}.json`,m=b?`${a}${o}_${b}.json`:p;let d;try{d=await x(e(m))}catch(u){if(m===p)throw new g("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:u});try{d=await x(e(p))}catch(l){throw new g("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:l})}}return d}async function x(e){if(A.fetchBundleAsset!=null)return A.fetchBundleAsset(e);const t=await N(e,{responseType:"text"});return JSON.parse(t.data)}let ue=class{constructor({base:t="",pattern:n,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?a=>new URL(a,new URL(r,window.location.href)).href:r instanceof URL?a=>new URL(a,r).href:r,this.pattern=typeof n=="string"?new RegExp(`^${n}`):n,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,n){return se(this.getAssetUrl,this.matcher,t,n)}};function ae(e){return new ue(e)}const A={};ee(ae({pattern:"esri/",location:Q}));function je(e,t,n){return M(e.map(((r,s)=>t.apply(n,[r,s]))))}async function Ce(e,t,n){return(await M(e.map(((r,s)=>t.apply(n,[r,s]))))).map((r=>r.value))}function k(e){return{ok:!0,value:e}}function L(e){return{ok:!1,error:e}}function ie(e){return e!=null&&e.ok===!0?e.value:null}function oe(e){return e!=null&&e.ok===!1?e.error:null}async function Ee(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return k(await e)}catch(t){return L(t)}}async function xe(e){try{return k(await e)}catch(t){return K(t),L(t)}}function Ae(e,t){return new i(e,t)}let i=class extends I{get value(){return ie(this._result)}get error(){return oe(this._result)}get finished(){return this._result!=null}constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=q(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:n}=this._abortController;this.promise=e(n),this.promise.then((r=>{this._result=k(r),this._cleanup()}),(r=>{this._result=L(r),this._cleanup()})),this._abortHandle=G(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=J(this._abortHandle),this._abortController=null}};c([h()],i.prototype,"value",null),c([h()],i.prototype,"error",null),c([h()],i.prototype,"finished",null),c([h()],i.prototype,"promise",void 0),c([h()],i.prototype,"_result",void 0),i=c([V("esri.core.asyncUtils.ReactiveTask")],i);const w=new WeakMap;function F(e){return!e.destroyed&&(w.has(e)||e.addHandles([O((()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||F(t))}),(t=>w.set(e,t)),P),S((()=>w.delete(e)))]),w.get(e))}function Be(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function Re(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="graphics"}function Se(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="map-image"}function Me(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="knowledge-graph"&&"layers"in e}function Ne(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="knowledge-graph-sublayer"}function Ue(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function He(e){return e?.type==="subtype-sublayer"}const ze={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function Fe(e){const t=e?.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function Te(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function Oe(e){return e?.type==="feature"&&!e.url&&e.source?.type==="memory"}function Pe(e){const t=e?.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&e?.source?.type==="feature-layer"}async function We(e,t){const n=X?.findServerInfo(e);if(n?.currentVersion!=null)return n.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${e.slice(0,r)}/rest/info`,a=t!=null?t.signal:null,{data:o}=await N(s,{query:{f:"json"},responseType:"json",signal:a});return o?.owningSystemUrl||null}function le(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function De(e){return le(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function ce(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Ie(e){return!!ce(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}function qe(e){const t=new W;for(const n of e.allLayers.concat(e.allTables))n.type==="csv"||F(n)||("charts"in n&&t.push(n),n.type==="subtype-group"&&t.push(...n.sublayers));return t}function fe(e,t){return null}function Ge(e){return null}function pe(e){return!e||e.type==="Feature Service"&&!e.sourceUrl}function Je(e,t){!t||!pe(e)||fe(e.url)}export{qe as $,Ge as A,We as B,De as D,pe as G,Je as H,Ie as N,le as P,Ee as _,je as a,Ue as b,xe as c,Ae as d,F as e,ke as f,He as g,ze as h,$e as i,Fe as j,Oe as k,Ne as l,te as m,Re as n,_e as o,Ce as p,ve as q,Me as r,Se as s,Be as u,Te as w,Pe as x,fe as z};
