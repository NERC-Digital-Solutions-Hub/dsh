import{s as y}from"./k6TpQ-vv.js";import{e as L}from"./BO0zSyDw.js";import{j as S}from"./DBjaQYpy.js";import{j as m,b,g as f,d as C,e as h,i as k,f as x,S as M,u as p,h as D,w as v}from"./NvCg0b_A.js";import{a as j}from"./TzWrp0a3.js";import{m as F,a as T}from"./DVjOipaJ.js";import{u as U}from"./BtaXzzQS.js";import{g as z}from"./CNM-_wGD.js";import{l as u}from"./DwAWIrQ2.js";import{V as d}from"./B5lVMRid.js";import{e as w}from"./aQeO9QTD.js";import{S as E,u as P,c as V}from"./DMxdENwc.js";import{e as W,i as q}from"./GKolV7NZ.js";const A=m.fromSimpleMarkerSymbol(E),B=b.fromSimpleLineSymbol(P),G=f.fromSimpleFillSymbol(V),H=new C({symbolLayers:new d([new h({material:{color:W},edges:new k({size:w(1),color:new u(q)})})])}),J=new b({symbolLayers:new d([new x({material:{color:new u([0,0,0])},size:w(1)})])}),K=new f({symbolLayers:new d([new h({outline:{color:new u([0,0,0]),size:w(1)}})])});function ie(e){if(e==null)return null;switch(e.type){case"mesh":return H;case"point":case"multipoint":return A;case"polyline":return B;case"polygon":case"extent":return G}return null}const g="#useCIMFallbackSymbology()",i={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function N(e,l=i){if(!e)return{symbol:null};const{retainId:s=i.retainId,ignoreDrivers:n=i.ignoreDrivers,hasLabelingContext:r=i.hasLabelingContext,retainCIM:a=i.retainCIM,cimFallbackEnabled:t=i.cimFallbackEnabled}=l;let o=null;if(M(e)||e instanceof p)o=e.clone();else if(e.type==="cim"){const c=e.data?.symbol?.type;switch(c){case"CIMPointSymbol":o=a?e.clone():m.fromCIMSymbol(e);break;case"CIMLineSymbol":t&&(o=J.clone(),l?.logWarning?.(g,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":t&&(o=K.clone(),l?.logWarning?.(g,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!o)return{error:new y("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${c||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof F)o=b.fromSimpleLineSymbol(e);else if(e instanceof U)o=m.fromSimpleMarkerSymbol(e);else if(e instanceof j)o=m.fromPictureMarkerSymbol(e);else if(e instanceof T)o=l.geometryType&&l.geometryType==="mesh"?C.fromSimpleFillSymbol(e):f.fromSimpleFillSymbol(e);else{if(!(e instanceof z))return{error:new y("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=r?D.fromTextSymbol(e):m.fromTextSymbol(e)}return s&&o&&o.type!=="cim"&&(o.id=e.id),!n||o.type==="cim"||o instanceof p||o.symbolLayers.forEach((c=>c.ignoreDrivers=!0)),{symbol:o}}function ae(e,l,s,n){const r=I(e,{},{context:n,isLabelSymbol:!1});r!=null&&L(s,r,l)}function me(e,l,s,n){const r=I(e,{},{context:n,isLabelSymbol:!0});r!=null&&(l[s]=r)}function $(e){return M(e)||e instanceof p}function O(e){return e?.type==="polygon-3d"||e?.type==="line-3d"}function I(e,l,s){if(e==null)return null;const{context:n,isLabelSymbol:r}=s,a=n?.origin,t=n?.messages;if(a==="web-scene"&&!$(e)){const o=N(e,{retainCIM:!0,hasLabelingContext:r});return o.symbol!=null?o.symbol.write(l,n):(t?.push(new y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:n,error:o.error})),null)}return S(n?.layer)&&O(e)?(t?.push(new y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${n?.layer?.declaredClass}'.`,{symbol:e,context:n})),null):(a==="web-map"||a==="portal-item"&&!S(n?.layer))&&$(e)?(t?.push(new y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:n})),null):e.write(l,n)}function ye(e,l){return v(e,null,l)}export{ye as a,ie as d,i as g,ae as i,me as p,N as u};
