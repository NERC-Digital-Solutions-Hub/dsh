import{o as c,ai as m,aj as y,ak as d,k as p,s as _,l as g,al as h}from"./ByNAQ7iQ.js";import{H as b}from"./B1ITX55D.js";import{_ as A}from"./DdhNVO-L.js";import{n as w,e as B}from"./BGHOg2OT.js";import{f as R,A as I}from"./CiEYBVRW.js";import{R as u}from"./BiphejqT.js";function S(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t,a=2,n=a){const o=t.length/2;let r=0,i=0;if(!c(t)||m(t)){for(let s=0;s<o;++s)e[r]=t[i],e[r+1]=t[i+1],r+=a,i+=n;return}const f=y(t);if(d(t))for(let s=0;s<o;++s)e[r]=Math.max(t[i]/f,-1),e[r+1]=Math.max(t[i+1]/f,-1),r+=a,i+=n;else for(let s=0;s<o;++s)e[r]=t[i]/f,e[r+1]=t[i+1]/f,r+=a,i+=n}function j(e,t,a,n){const o=e.typedBuffer,r=e.typedBufferStride,i=n?.count??e.count;let f=(n?.dstIndex??0)*r;for(let s=0;s<i;++s)o[f]=t,o[f+1]=a,f+=r}Object.freeze(Object.defineProperty({__proto__:null,fill:j,normalizeIntegerBuffer:l,normalizeIntegerBufferView:S},Symbol.toStringTag,{value:"Module"}));class E{constructor(t){this._streamDataRequester=t}async loadJSON(t,a){return this._load("json",t,a)}async loadBinary(t,a){return B(t)?(p(a),w(t)):this._load("binary",t,a)}async loadImage(t,a){return this._load("image",t,a)}async _load(t,a,n){if(this._streamDataRequester==null)return(await b(a,{responseType:q[t]})).data;const o=await A(this._streamDataRequester.request(a,t,n));if(o.ok===!0)return o.value;throw g(o.error),new _("glt-loader-request-error",`Request for resource failed: ${o.error}`)}}const q={image:"image",binary:"array-buffer",json:"json","image+type":void 0};function G(e,t){switch(t){case u.TRIANGLES:return T(e);case u.TRIANGLE_STRIP:return N(e);case u.TRIANGLE_FAN:return U(e)}}function T(e){return typeof e=="number"?I(e):h(e)?new Uint16Array(e):e}function N(e){const t=typeof e=="number"?e:e.length;if(t<3)return[];const a=t-2,n=R(3*a);if(typeof e=="number"){let o=0;for(let r=0;r<a;r+=1)r%2==0?(n[o++]=r,n[o++]=r+1,n[o++]=r+2):(n[o++]=r+1,n[o++]=r,n[o++]=r+2)}else{let o=0;for(let r=0;r<a;r+=1)r%2==0?(n[o++]=e[r],n[o++]=e[r+1],n[o++]=e[r+2]):(n[o++]=e[r+1],n[o++]=e[r],n[o++]=e[r+2])}return n}function U(e){const t=typeof e=="number"?e:e.length;if(t<3)return new Uint16Array(0);const a=t-2,n=a<=65536?new Uint16Array(3*a):new Uint32Array(3*a);if(typeof e=="number"){let f=0;for(let s=0;s<a;++s)n[f++]=0,n[f++]=s+1,n[f++]=s+2;return n}const o=e[0];let r=e[1],i=0;for(let f=0;f<a;++f){const s=e[f+2];n[i++]=o,n[i++]=r,n[i++]=s,r=s}return n}export{l as a,S as b,j as l,E as n,G as o};
