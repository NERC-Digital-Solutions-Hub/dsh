import{_ as Z}from"./Dij4so7k.js";import{a as u,i as g,k as z}from"./BFGjv385.js";import{f as R}from"./B6nb1bq7.js";import{f as b}from"./B1sFDdA3.js";import{t as v}from"./-0lrtZYg.js";function W(t){return"declaredClass"in t}function f(t){return"declaredClass"in t}function C(t){return"declaredClass"in t}function j(t,r,n){return t?C(t)?(t.origin!==n&&(t.origin=n),t):new Z({layer:r,sourceLayer:r,origin:n,visible:t.visible,symbol:u(t.symbol),attributes:u(t.attributes),geometry:_(t.geometry)}):null}function _(t){return t==null?null:W(t)?t:b(A(t))}function A(t){const{wkid:r,wkt:n,wkt2:o,latestWkid:l}=t.spatialReference,e={wkid:r,wkt:n,wkt2:o,latestWkid:l};switch(t.type){case"point":{const{x:a,y:s,z:i,m}=t;return{x:a,y:s,z:i,m,spatialReference:e}}case"polygon":{const{rings:a,hasZ:s,hasM:i}=t;return{rings:c(a),hasZ:s,hasM:i,spatialReference:e}}case"polyline":{const{paths:a,hasZ:s,hasM:i}=t;return{paths:c(a),hasZ:s,hasM:i,spatialReference:e}}case"extent":{const{xmin:a,xmax:s,ymin:i,ymax:m,zmin:y,zmax:x,mmin:d,mmax:k,hasZ:w,hasM:M}=t;return{xmin:a,xmax:s,ymin:i,ymax:m,zmin:y,zmax:x,mmin:d,mmax:k,hasZ:w,hasM:M,spatialReference:e}}case"multipoint":{const{points:a,hasZ:s,hasM:i}=t;return{points:p(a)?h(a):a,hasZ:s,hasM:i,spatialReference:e}}default:return}}function c(t){return J(t)?t.map(r=>h(r)):t}function h(t){return t.map(r=>Array.from(r))}function J(t){for(const r of t)if(r.length!==0)return p(r);return!1}function p(t){return t.length>0&&(g(t[0])||z(t[0]))}function q(t,r){if(!t)return null;let n;if(f(t)){if(r==null)return t.clone();if(f(r))return r.copy(t)}return r!=null?(n=r,n.x=t.x,n.y=t.y,n.spatialReference=t.spatialReference,t.hasZ?(n.z=t.z,n.hasZ=t.hasZ):(n.z=void 0,n.hasZ=!1),t.hasM?(n.m=t.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=v(t.x,t.y,t.z,t.spatialReference),t.hasM&&(n.m=t.m,n.hasM=!0)),n}function B(t){const{wkid:r,wkt:n,wkt2:o,latestWkid:l}=t,e={wkid:r,wkt:n,wkt2:o,latestWkid:l};return R.fromJSON(e)}export{j as c,B as k,W as o,_ as u,q as x};
