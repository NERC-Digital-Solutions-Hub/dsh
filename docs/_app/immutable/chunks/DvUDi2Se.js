import{b as m,a as $e,G as Le,Q as xe,e as E}from"./CnfuZz2S.js";import{s as we,i as w,e as Ge}from"./BYatcg2i.js";import{a7 as Ve,e as Je,ac as be,ad as y,h as K,ae as Ae,af as Fe,ag as He,j as We,ah as d,ai as Ke,N as T,u as qe,aj as Ye,ak as Ze}from"./DSvukMJ1.js";function ar(t,e,r,n){var s,o=arguments.length,a=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var i=t.length-1;i>=0;i--)(s=t[i])&&(a=(o<3?s(a):o>3?s(e,r,a):s(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a}function cr(t,e){return function(r,n){e(r,n,t)}}function ur(t,e,r,n){function s(o){return o instanceof r?o:new r((function(a){a(o)}))}return new(r||(r=Promise))((function(o,a){function i(f){try{u(n.next(f))}catch(l){a(l)}}function c(f){try{u(n.throw(f))}catch(l){a(l)}}function u(f){f.done?o(f.value):s(f.value).then(i,c)}u((n=n.apply(t,[])).next())}))}function lr(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}return e}var Qe=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function fr(t){function e(o){t.error=t.hasError?new Qe(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,(function(a){return e(a),s()}))}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function pr(t,e){for(const r of t.values())if(e(r))return!0;return!1}function yr(t,e){for(const r of t.values())if(e(r))return r;return null}function Xe(t,e,r){const n=t.get(e);if(n!==void 0)return n;const s=r();return t.set(e,s),s}function hr(t){const e=new Map;return r=>(e.has(r)||e.set(r,t(r)),e.get(r))}const te=new WeakMap;function et(t,e,r=!1){const n=`ðŸ›‘ DEPRECATED - ${e}`;if(!r)return void t.warn(n);let s=te.get(t);s||(s=new Set,te.set(t,s)),s.has(e)||(s.add(e),t.warn(n))}const C="https://www.esriurl.com/";function dr(t,e,r,n={}){m("esri-deprecation-warnings")&&b(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${C}${r}/`,`Esri's move to web components: ${C}components-transition-plan/`],replacement:`<${r}></${r}>`,warnOnce:!0,...n})}function gr(t,e,r,n={}){m("esri-deprecation-warnings")&&b(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${C}${r}/`,`Esri's move to web components: ${C}components-transition-plan/`],replacement:`<${r}></${r}>`,warnOnce:!0,...n})}function mr(t,e,r={}){m("esri-deprecation-warnings")&&b(t,`Module: ${e}`,r)}function tt(t,e,r={}){if(m("esri-deprecation-warnings")){const{moduleName:n}=r;b(t,`Function: ${(n?n+"::":"")+e+"()"}`,r)}}function _r(t,e,r={}){if(m("esri-deprecation-warnings")){const{moduleName:n}=r;b(t,`Property: ${(n?n+"::":"")+e}`,r)}}function vr(t,e,r={}){m("esri-deprecation-warnings")&&b(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...r})}function b(t,e,r={}){if(m("esri-deprecation-warnings")){const{replacement:n,version:s,see:o,warnOnce:a}=r;let i=e;if(n&&(i+=`
	ðŸ› ï¸ Replacement: ${n}`),s&&(i+=`
	âš™ï¸ Version: ${s}`),o)if(Array.isArray(o)){i+=`
	ðŸ”— See for more details:`;for(const c of o)i+=`
		${c}`}else i+=`
	ðŸ”— See ${o} for more details.`;et(t,i,a)}}function $r(t){const e=[];return function*(){yield*e;for(const r of t)e.push(r),yield r}}function wr(t,e){for(const r of t)if(r!=null&&e(r))return r}function re(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let q=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((r=>{e+=r.length})),e}add(e,r){if(re(e)){const n=this._getOrCreateGroup(r);for(const s of e)se(s)&&n.push(s)}else se(e)&&this._getOrCreateGroup(r).push(e);return this}forEach(e,r){if(typeof e=="function")this._groups.forEach((n=>n.forEach(e)));else{const n=this._getGroup(e);n&&r&&n.forEach(r)}}has(e){return this._groups.has(S(e))}remove(e){if(typeof e!="string"&&re(e)){for(const r of e)this.remove(r);return this}return this.has(e)?(ne(this._getGroup(e)),this._groups.delete(S(e)),this):this}removeAll(){return this._groups.forEach(ne),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const r=[];return this._groups.set(S(e),r),r}_getGroup(e){return this._groups.get(S(e))}};function S(t){return t||"_default_"}function ne(t){for(const e of t)e instanceof q?e.removeAll():e.remove()}function se(t){return t!=null&&(!!t.remove||t instanceof q)}const Oe=Symbol("Accessor-beforeDestroy");function N(t){let e=t.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!r){e=Object.create(e);for(const n in e)e[n]=$e(e[n]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function je(t,e){const r=N(t);let n=r[e];return n||(n=r[e]={}),n}function rt(t,e){return Ve(t,e,st)}const nt=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function st(t){return nt.test(t)?"replace":"merge"}let ot=class{constructor(e,r){this._observers=e,this._observer=r}remove(){Le(this._observers,this._observer)}},it=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return at;this._observers==null&&(this._observers=[]);const r=this._observers;let n=!1,s=!1;const o=r.length;for(let a=0;a<o;++a){const i=r[a];if(i.destroyed)s=!0;else if(i===e){n=!0;break}}return n||(r.push(e),s&&this._removeDestroyedObservers()),new ot(r,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const r=e.length;let n=0;for(let s=0;s<r;++s){for(;s+n<r&&e[s+n].destroyed;)++n;if(n>0){if(!(s+n<r))break;e[s]=e[s+n]}}e.length=r-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const r of e)r.onCommitted();this._observers=null}}};const at=Je();var p;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(p||(p={}));const jr=p.USER+1;function ct(t){switch(t){case"defaults":return p.DEFAULTS;case"service":return p.SERVICE;case"portal-item":return p.PORTAL_ITEM;case"web-scene":return p.WEB_SCENE;case"web-map":return p.WEB_MAP;case"link-chart":return p.LINK_CHART;case"user":return p.USER;default:return null}}function L(t){switch(t){case p.DEFAULTS:return"defaults";case p.SERVICE:return"service";case p.PORTAL_ITEM:return"portal-item";case p.WEB_SCENE:return"web-scene";case p.WEB_MAP:return"web-map";case p.LINK_CHART:return"link-chart";case p.USER:return"user"}}function Er(t){return L(t)}let oe=class extends it{constructor(e,r){super(),this.propertyName=e,this.metadata=r,this.trackingTarget=new be(this),this.flags=0,this.flags=y.Dirty|(r.nonNullable?y.NonNullable:0)|(r.hasOwnProperty("value")?y.HasDefaultValue:0)|(r.get===void 0?y.DepTrackingInitialized:0)|(r.dependsOn===void 0?y.AutoTracked:0)}destroy(){this.flags&y.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&K(this);const r=e.store,n=this.propertyName,s=this.flags,o=r.get(n);if(s&y.Computing||~s&y.Dirty&&r.has(n))return o;this.flags|=y.Computing;const a=e.host;let i;s&y.AutoTracked?i=Ae(this.trackingTarget,this.metadata.get,a):(Fe(a,this),i=this.metadata.get.call(a)),this.flags|=y.DepTrackingInitialized,r.set(n,i,p.COMPUTED);const c=r.get(n);return c===o?this.flags&=-2:He(this.commit,this),this.flags&=-5,c}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&y.Overridden&&(this.flags|=y.Dirty);const e=this._observers;if(e&&e.length>0)for(const r of e)r.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const r=e.slice();for(const n of r)n.onCommitted()}}},ut=class Ee{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const r=new Ee;return this._values.forEach(((n,s)=>{e&&e.has(s)||r.set(s,$e(n))})),r}get(e){return this._values.get(e)}originOf(){return p.USER}keys(){return[...this._values.keys()]}set(e,r){this._values.set(e,r)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,r){return this.has(e)}isBelowOrigin(e,r){return!this.has(e)}forEach(e){this._values.forEach(e)}};function $(t,e,r){return t!==void 0}function ie(t,e,r,n){return t!==void 0&&(!(r==null&&t.flags&y.NonNullable)||(n.lifecycle,!1))}let lt=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=d.INITIALIZING,this.store=new ut,this.mutable=!0,this._origin=p.USER;const r=this.host.constructor.__accessorMetadata__;for(const n in r){const s=new oe(n,r[n]);this.propertiesByName.set(n,s)}this.metadata=r}initialize(){this.lifecycle=d.CONSTRUCTING}constructed(){this.lifecycle=d.CONSTRUCTED}destroy(){this.lifecycle=d.DESTROYED,this.propertiesByName.forEach((e=>e.destroy()))}get initialized(){return this.lifecycle!==d.INITIALIZING}get(e){const r=this.propertiesByName.get(e);if(!$(r))return;if(r.metadata.get)return r.getComputed(this);this.mutable&&K(r);const n=this.store;return n.has(e)?n.get(e):r.metadata.value}originOf(e){const r=this.store.originOf(e);if(r===void 0){const n=this.propertiesByName.get(e);if(n!==void 0&&n.flags&y.HasDefaultValue)return"defaults"}return L(r)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const r=this.propertiesByName.get(e);if($(r))return this.store.has(e)?this.store.get(e):r.metadata.value}internalSet(e,r){const n=this.propertiesByName.get(e);$(n)&&this._internalSet(n,r)}getDependsInfo(e,r,n){const s=this.propertiesByName.get(r);if(!$(s))return"";const o=new be,a=Ae(o,(()=>s.metadata.get?.call(e)));let i=`${n}${e.declaredClass.split(".").pop()}.${r}: ${a}
`;const c=o.accessed??new Set;if(c.size===0)return i;n+="  ";for(const u of c)u instanceof oe&&(i+=`${n}${u.propertyName}: undefined
`);return i}setAtOrigin(e,r,n){const s=this.propertiesByName.get(e);if($(s))return this._setAtOrigin(s,r,n)}isOverridden(e){const r=this.propertiesByName.get(e);return r!==void 0&&!!(r.flags&y.Overridden)}clearOrigin(e,r){const n=this.store,s=this.propertiesByName.get(e);if(!$(s))return;const o=n.isAtOrigin(e,r)&&!(s.flags&y.Overridden);n.delete(e,r),o&&s.notifyChange()}clearOverride(e){const r=this.propertiesByName.get(e);r&&r.flags&y.Overridden&&(r.flags&=-3,r.notifyChange())}override(e,r){const n=this.propertiesByName.get(e);if(!ie(n,e,r,this))return;const s=n.metadata.cast;if(s){const o=this._cast(s,r),{valid:a,value:i}=o;if(B.release(o),!a)return;r=i}n.flags|=y.Overridden,this._internalSet(n,r)}set(e,r){const n=this.propertiesByName.get(e);if(!ie(n,e,r,this))return;const s=n.metadata.cast;if(s){const a=this._cast(s,r),{valid:i,value:c}=a;if(B.release(a),!i)return;r=c}const o=n.metadata.set;o?o.call(this.host,r):this._internalSet(n,r)}setDefaultOrigin(e){this._origin=ct(e)}getDefaultOrigin(){return L(this._origin)}notifyChange(e){const r=this.propertiesByName.get(e);r!==void 0&&r.notifyChange()}invalidate(e){const r=this.propertiesByName.get(e);r!==void 0&&r.invalidate()}commit(e){const r=this.propertiesByName.get(e);r!==void 0&&r.commit()}_internalSet(e,r){const n=this.lifecycle!==d.INITIALIZING?this._origin:p.DEFAULTS;this._setAtOrigin(e,r,n)}_setAtOrigin(e,r,n){const s=this.store,o=e.propertyName;if(s.isAtOrigin(o,n)&&xe(r,s.get(o))&&~e.flags&y.Overridden)return;const a=s.isBelowOrigin(o,n)||s.isAtOrigin(o,n);a&&e.invalidate(),s.set(o,r,n),a&&e.commit(),Ke(this.host,e)}_cast(e,r){const n=B.acquire();return n.valid=!0,n.value=r,e&&(n.value=e.call(this.host,r,n)),n}},ft=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const B=new We(ft);function I(t,e,r){if(t&&e)if(typeof e=="object")for(const n of Object.getOwnPropertyNames(e))I(t,n,e[n]);else{if(e.includes(".")){const s=e.split("."),o=s.splice(-1,1)[0];return void I(T(t,s),o,r)}const n=t.__accessor__;n!=null&&pt(e,n),t[e]=r}}function pt(t,e){if(m("esri-unknown-property-errors")&&!yt(t,e))throw new we("set:unknown-property",ht(t,e))}function yt(t,e){return e.metadata[t]!=null}function ht(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let dt;function gt(){return dt}var ae;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(ae||(ae={}));const _=()=>w.getLogger("esri.core.accessorSupport.ensureTypes");function mt(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(_().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function _t(t){return t==null?t:!!t}function vt(t){return t==null?t:t.toString()}function $t(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function wt(t){return t==null?t:Math.round(parseFloat(t))}function bt(t){return null}function At(t,e){return r=>{let n=t(r);return e.step!=null&&(n=Math.round(n/e.step)*e.step),e.min!=null&&(n=Math.max(e.min,n)),e.max!=null&&(n=Math.min(e.max,n)),n}}function Ne(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function P(t,e){return e!=null&&t&&!(e instanceof t)}function Se(t){return t&&"isCollection"in t}function ce(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function Ot(t,e){if(!e?.constructor||!Se(e.constructor))return x(t,e)?e:new t(e);const r=ce(t.prototype.itemType),n=ce(e.constructor.prototype.itemType);return r?n?r===n?e:r.prototype.isPrototypeOf(n.prototype)?new t(e):(x(t,e),e):new t(e):e}function x(t,e){return!!Ne(e)&&(_().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+D(t)+"'"),!0)}function jt(t,e){return e==null?e:Se(t)?Ot(t,e):P(t,e)?x(t,e)?e:new t(e):e}function D(t){return t?.prototype?.declaredClass||"unknown"}const Et=new WeakMap;function Nt(t){switch(t){case Number:return e=>$t(e);case Y:return wt;case Boolean:return _t;case String:return vt;case Date:return mt;case Z:return bt;default:return Xe(Et,t,(()=>jt.bind(null,t)))}}function v(t,e){const r=Nt(t);return arguments.length===1?r:r(e)}function O(t,e,r){return arguments.length===1?O.bind(null,t):e&&(Array.isArray(e)?e.map((n=>t(n,r))):[t(e,r)])}function St(t,e){return arguments.length===1?O((r=>v(t,r))):O((r=>v(t,r)),e)}function Te(t,e,r){return e!==0&&Array.isArray(r)?r.map((n=>Te(t,e-1,n))):t(r)}function k(t,e,r){if(arguments.length===2)return o=>k(t,e,o);if(!r)return r;r=Te(t,e,r);let n=e,s=r;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(s!==void 0)for(let o=0;o<n;o++)r=[r];return r}function Tt(t,e,r){return arguments.length===2?k((n=>v(t,n)),e):k((n=>v(t,n)),e,r)}function Ce(t){return!!Array.isArray(t)&&!t.some((e=>{const r=typeof e;return!(r==="string"||r==="number"||r==="function"&&t.length>1)}))}function G(t,e){if(arguments.length===2)return G(t).call(null,e);const r=new Set,n=t.filter((i=>typeof i!="function")),s=t.filter((i=>typeof i=="function"));for(const i of t)typeof i!="string"&&typeof i!="number"||r.add(i);let o=null,a=null;return(i,c)=>{if(i==null)return i;const u=typeof i,f=u==="string"||u==="number";return f&&(r.has(i)||s.some((l=>u==="string"&&l===String||u==="number"&&l===Number)))||u==="object"&&s.some((l=>!P(i,l)))?i:(f&&n.length?(o||(o=n.map((l=>typeof l=="string"?`'${l}'`:`${l}`)).join(", ")),_().error("Accessor#set",`'${i}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof i=="object"&&s.length?(a||(a=s.map((l=>D(l))).join(", ")),_().error("Accessor#set",`'${i}' is not a valid value for this property, value must be one of ${a}`)):_().error("Accessor#set",`'${i}' is not a valid value for this property`),c&&(c.valid=!1),null)}}function V(t,e){if(arguments.length===2)return V(t).call(null,e);const r={},n=[],s=[];for(const c in t.typeMap){const u=t.typeMap[c];r[c]=v(u),n.push(D(u)),s.push(c)}const o=()=>`'${n.join("', '")}'`,a=()=>`'${s.join("', '")}'`,i=typeof t.key=="string"?c=>c[t.key]:t.key;return c=>{if(t.base&&!P(t.base,c)||c==null)return c;const u=i(c)||t.defaultKeyValue,f=r[u];if(!f)return _().error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${a()})`),null;if(!P(t.typeMap[u],c))return c;if(typeof t.key=="string"&&!Ne(c)){const l={};for(const h in c)h!==t.key&&(l[h]=c[h]);return f(l)}return f(c)}}class Y{}class Z{}const Cr={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function Ct(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Ie(t){switch(t.type){case"native":return v(t.value);case"array":return O(Ie(t.value));case"one-of":return It(t);default:return null}}function It(t){let e=null;return(r,n)=>F(r,t)?r:(e==null&&(e=J(t)),_().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),n&&(n.valid=!1),null)}function J(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Y:return"integer";case Date:return"date";case Z:return"null";default:return D(t.value)}case"array":return`array of ${J(t.value)}`;case"one-of":{const e=t.values.map((r=>J(r)));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function F(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Y:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case Z:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some((r=>!F(r,e.value)));case"one-of":return e.values.some((r=>F(t,r)))}}function Pt(t={}){return(e,r)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${r}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(e,r),s=je(e,r);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in t&&w.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=n.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const o=t.aliasOf;if(o){const c=typeof o=="string"?o:o.source,u=typeof o=="string"?null:o.overridable===!0;let f;s.dependsOn=[c],s.get=function(){let l=T(this,c);if(typeof l=="function"){f||(f=c.split(".").slice(0,-1).join("."));const h=T(this,f);h&&(l=l.bind(h))}return l},s.readOnly||(s.set=u?function(l){this._override(r,l)}:function(l){I(this,c,l)})}const a=t.type,i=t.types;if(!s.cast){let c;a?c=kt(a):i&&(c=Array.isArray(i)?O(V(i[0])):V(i)),t.cast=Mt(t.cast,c)}rt(s,t),t.range&&(s.cast=At(s.cast,t.range))}}function Ir(t,e,r){const n=je(t,r);n.json||(n.json={});let s=n.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function kt(t){let e=0,r=t;if(Ct(t))return Ie(t);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],e++;const n=r;if(Ce(n))return e===0?G(n):k(G(n),e);if(e===1)return St(n);if(e>1)return Tt(n,e);const s=t;return s.from?s.from:v(s)}function Mt(t,e){if(t||e)return t?e?(r,n)=>e(t(r,n),n):t:e}function Dt(t){if(t.json&&t.json.origins){const e=t.json.origins,r={"web-document":["web-scene","web-map"]};for(const n in r)if(e[n]){const s=e[n];r[n].forEach((o=>{e[o]=s})),delete e[n]}}}let Pe=class extends Ge{constructor(e,r,n){super(e,r,n)}};Pe.prototype.type="warning";function ke(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const H=()=>w.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function ue(t,e,r){t&&(!r&&!e.read||e.read?.reader||e.read?.enabled===!1||zt(t)&&E("read.reader",Bt(t),e))}function Bt(t){const e=t.ndimArray??0;if(e>1)return Ut(t);if(e===1)return le(t);if("type"in t&&De(t.type)){const r=t.type.prototype?.itemType?.Type,n=le(typeof r=="function"?{type:r}:{types:r});return(s,o,a)=>{const i=n(s,o,a);return i&&new t.type(i)}}return Q(t)}function Q(t){return"type"in t?Rt(t.type):Lt(t.types)}function Rt(t){return t.prototype.read?(e,r,n)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void H().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const o=new t;return o.read(e,n),o}:t.fromJSON}function Me(t,e,r,n){return n!==0&&Array.isArray(e)?e.map((s=>Me(t,s,r,n-1))):t(e,void 0,r)}function Ut(t){const e=Q(t),r=Me.bind(null,e),n=t.ndimArray??0;return(s,o,a)=>{if(s==null)return s;s=r(s,a,n);let i=n,c=s;for(;i>0&&Array.isArray(c);)i--,c=c[0];if(c!==void 0)for(let u=0;u<i;u++)s=[s];return s}}function le(t){const e=Q(t);return(r,n,s)=>{if(r==null)return r;if(Array.isArray(r)){const a=[];for(const i of r){const c=e(i,void 0,s);c!==void 0&&a.push(c)}return a}const o=e(r,void 0,s);return o!==void 0?[o]:void 0}}function De(t){if(!ke(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?X(e.Type):Be(e.Type))}function zt(t){return"types"in t?Be(t.types):X(t.type)}function X(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||De(t))}function Be(t){for(const e in t.typeMap)if(!X(t.typeMap[e]))return!1;return!0}function Lt(t){let e=null;const r=t.errorContext??"type",n=t.validate;return(s,o,a)=>{if(s==null)return s;const i=typeof s;if(i!=="object")return void H().error(`Expected JSON value of type 'object' to deserialize, but got '${i}'`);e||(e=xt(t));const c=t.key;if(typeof c!="string")return;const u=s[c],f=u?e[u]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!f){const h=`Type '${u||"unknown"}' is not supported`;return a?.messages&&s&&a.messages.push(new Pe(`${r}:unsupported`,h,{definition:s,context:a})),void H().error(h)}const l=new f;return l.read(s,a),n?n(l):l}}function xt(t){const e={};for(const r in t.typeMap){const n=t.typeMap[r],s=N(n.prototype);if(typeof t.key=="function")continue;const o=s[t.key];if(!o)continue;if(o.json?.type&&Array.isArray(o.json.type)&&o.json.type.length===1&&typeof o.json.type[0]=="string"){e[o.json.type[0]]=n;continue}const a=o.json?.write;if(!a?.writer){e[r]=n;continue}const i=a.target,c=typeof i=="string"?i:t.key,u={};a.writer(r,u,c),u[c]&&(e[u[c]]=n)}return e}function Gt(t){if(t.json||(t.json={}),pe(t.json),ye(t.json),fe(t.json),t.json.origins)for(const e in t.json.origins)pe(t.json.origins[e]),ye(t.json.origins[e]),fe(t.json.origins[e]);return!0}function fe(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function pe(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function ye(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function he(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const r=t?.ndimArray??0;t&&(r===1||"type"in t&&ke(t.type))?e.write.writer=Ht:r>1?e.write.writer=Wt(r):e.types?Array.isArray(e.types)?e.write.writer=Jt(e.types[0]):e.write.writer=Vt(e.types):e.write.writer=j}function Vt(t){return(e,r,n,s)=>e?Re(e,t,s)?j(e,r,n,s):void 0:j(e,r,n,s)}function Re(t,e,r){for(const n in e.typeMap)if(t instanceof e.typeMap[n])return!0;if(r?.messages){const n=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&t&&r.messages.push(new we(`${n}:unsupported`,s,{definition:t,context:r})),w.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function Jt(t){return(e,r,n,s)=>!e||!Array.isArray(e)?j(e,r,n,s):j(e.filter((o=>Re(o,t,s))),r,n,s)}function j(t,e,r,n){E(r,M(t,n),e)}function M(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?Ft(t):t}function Ft(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function Ht(t,e,r,n){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map((o=>M(o,n))),typeof s.toArray=="function"&&(s=s.toArray())):s=[M(t,n)],E(r,s,e)}function Ue(t,e,r){return r!==0&&Array.isArray(t)?t.map((n=>Ue(n,e,r-1))):M(t,e)}function Wt(t){return(e,r,n,s)=>{let o;if(e===null)o=null;else{o=Ue(e,s,t);let a=t,i=o;for(;a>0&&Array.isArray(i);)a--,i=i[0];if(i!==void 0)for(let c=0;c<a;c++)o=[o]}E(n,o,r)}}function kr(t,e){return ee(t,"any",e?.origin)}function Mr(t,e){return ee(t,"read",e?.origin)}function Dr(t,e){return ee(t,"write",e?.origin)}function ee(t,e,r){let n=t?.json;if(n?.origins&&r){let s;s=r==="link-chart"?n.origins[r]&&(e==="any"||e in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],s&&(e==="any"||e in s)&&(n=s)}return n}function Kt(t){const e=qt(t);if(t.json.origins)for(const r in t.json.origins){const n=t.json.origins[r],s=n.types?Yt(n):e;ue(s,n,!1),n.types&&!n.write&&t.json.write?.enabled&&(n.write={...t.json.write}),he(s,n)}ue(e,t.json,!0),he(e,t.json)}function qt(t){return t.json.types?W(t.json):t.type?ze(t):W(t)}function Yt(t){return t.type?ze(t):W(t)}function ze(t){if(!t.type)return;let e=0,r=t.type;for(;Array.isArray(r)&&!Ce(r);)r=r[0],e++;return{type:r,ndimArray:e}}function W(t){if(!t.types)return;let e=0,r=t.types;for(;Array.isArray(r);)r=r[0],e++;return{types:r,ndimArray:e}}function Zt(t){Gt(t)&&(Dt(t),Kt(t))}const R=new Set,U=new Set;function Qt(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,er(e);const r=[],n=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!R.has(s.initialize)&&(R.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!U.has(s.destroy)&&(U.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);R.clear(),U.clear();const o=class extends e{constructor(...i){if(super(...i),this.constructor===o&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let c=r.length-1;c>=0;c--)r[c].call(this)}}),n.length){let c=!1;const u=this[Oe];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!c){this.__accessor__.lifecycle=d.DESTROYING,c=!0,u.call(this);for(let f=0;f<n.length;f++)n[f].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};o.__accessorMetadata__=N(e.prototype),o.prototype.declaredClass=t;const a=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(o,"name",{value:a,configurable:!0}),o}}function Xt(t,e){return e.get==null?function(){const r=this.__accessor__,n=r.propertiesByName.get(t);if(n===void 0)return;r.mutable&&K(n);const s=r.store;return s.has(t)?s.get(t):n.metadata.value}:function(){const r=this.__accessor__,n=r.propertiesByName.get(t);if(n!==void 0)return n.getComputed(r)}}function er(t){const e=t.prototype,r=N(e),n={};for(const s of Object.getOwnPropertyNames(r)){const o=r[s];Zt(o),n[s]={enumerable:!0,configurable:!0,get:Xt(s,o),set(a){const i=this.__accessor__;if(i!==void 0){if(i.mutable)return i.initialized&&o.readOnly?de("read-only",s):i.lifecycle===d.CONSTRUCTED&&o.constructOnly?de("construct-only",s):void i.set(s,a)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:a})}}}Object.defineProperties(t.prototype,n)}const de=(t,e)=>{w.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var ge,me;function tr(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const g=Symbol("Accessor-Handles"),z=Symbol("Accessor-Initialized"),A=class A{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:n,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const o=this;class a extends o{constructor(...c){super(...c),this.inherited=null,s&&s.apply(this,c)}}N(a.prototype);for(const i in e){const c=e[i];a.prototype[i]=typeof c=="function"?function(...u){const f=this.inherited;let l;this.inherited=function(...h){if(o.prototype[i])return o.prototype[i].apply(this,h)};try{l=c.apply(this,u)}catch(h){throw this.inherited=f,h}return this.inherited=f,l}:e[i]}for(const i in r){const c=tr(r[i]);Pt(c)(a.prototype,i)}return Qt(n)(a)}static freeze(e){return e instanceof A?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof A?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[ge]=null,this[me]=!1,this.constructor===A)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new lt(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),e.length>0&&(r.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,r=e.ctorArgs;e.initialize(),r&&(this.set(r),e.ctorArgs=null),e.constructed(),this.initialize(),this[z]=!0}initialize(){}[Oe](){this[g]=qe(this[g])}destroy(){this.destroyed||(Ye(this),this.__accessor__.destroy(),gt()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[z]}get destroyed(){return this.__accessor__?.lifecycle===d.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===d.DESTROYING||!1}commitProperty(e){T(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,r){return I(this,e,r),this}watch(e,r,n){return tt(w.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),Ze(this,e,r,n)}addHandles(e,r){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const s of n)s.remove();return}(this[g]??=new q).add(e,r)}removeHandles(e){this[g]?.remove(e)}removeAllHandles(){this[g]?.removeAll()}removeHandlesReference(e){this[g]?.removeReference(e)}hasHandles(e){return this[g]?.has(e)===!0}_override(e,r){r===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,r)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,r){r==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,r)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,r){return this.__accessor__.internalSet(e,r),this}};ge=g,me=z;let _e=A;class rr{constructor(e,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=nr(e),this.apiValues=ve(this._apiToJSON),this.jsonValues=ve(this._jsonToAPI),this.read=n=>this.fromJSON(n),this.write=(n,s,o)=>{const a=this.toJSON(n);a!==void 0&&E(o,a,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const r=this._apiToJSON[e];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}}function nr(t){const e={};for(const r in t)e[t[r]]=r;return e}function ve(t){const e=[];for(const r in t)e.push(r);return e.sort(),e}function Br(){return function(t,e){return new rr(t,{ignoreUnknown:!0,...e})}}export{b as A,vt as B,$t as C,_r as D,q as E,mr as F,jr as G,cr as H,pr as I,Mr as J,kr as K,Dr as L,Er as M,hr as N,Z as O,At as P,tt as Q,re as R,V as S,gr as T,dr as U,yr as V,Cr as _,Qt as a,_e as b,Pe as c,jt as d,it as e,Xe as f,je as g,wr as h,Br as i,Ir as j,$r as k,p as l,Pt as m,ct as n,rr as o,vr as p,lr as q,ar as r,wt as s,L as t,Bt as u,fr as v,v as w,Y as x,Ft as y,ur as z};
