import{s as E}from"./BbNfuhIx.js";function F(n,t){for(const e of n.values())if(t(e))return!0;return!1}function G(n,t){for(const e of n.values())if(!t(e))return!1;return!0}function H(n,t){for(const e of n.values())if(t(e))return e;return null}function I(n,t,e){const r=n.get(t);if(r!==void 0)return r;const o=e();return n.set(t,o),o}function J(n){const t=new Map;return e=>(t.has(e)||t.set(e,n(e)),t.get(e))}const L={remove:()=>{}};function a(n){return n?{remove(){n&&(n(),n=void 0)}}:L}function T(n){n.forEach(t=>t?.remove())}function K(n){T(n),n.length=0}function Q(n){return a(()=>T(n))}function R(n){return a(()=>n()?.remove())}function V(n){return a(()=>n?.abort())}function W(n){return a(n!=null?()=>n.destroy():void 0)}function S(n){return typeof n=="object"&&!!n&&"remove"in n&&typeof n.remove=="function"}function X(n){S(n)&&n.remove()}function Y(n){return{[Symbol.dispose](){n.remove()}}}function C(n){return{setTimeout:(t,e)=>{const r=n.setTimeout(t,e);return a(()=>n.clearTimeout(r))}}}const k=C(globalThis);function g(n){return q(n)||j(n)}function q(n){return n!=null&&typeof n=="object"&&"on"in n&&typeof n.on=="function"}function j(n){return n!=null&&typeof n=="object"&&"addEventListener"in n&&typeof n.addEventListener=="function"}function x(n,t,e){if(!g(n))throw new TypeError("target is not a Evented or EventTarget object");return j(n)?M(n,t,e):n.on(t,e)}function M(n,t,e,r){if(Array.isArray(t)){const o=t.slice();for(const u of o)n.addEventListener(u,e,r);return a(()=>{for(const u of o)n.removeEventListener(u,e,r)})}return n.addEventListener(t,e,r),a(()=>n.removeEventListener(t,e,r))}function A(n,t,e){if(!g(n))throw new TypeError("target is not a Evented or EventTarget object");if("once"in n)return n.once(t,e);const r=x(n,t,o=>{r.remove(),e.call(n,o)});return r}function Z(n,t){if(n==null)throw new Error(t??"value is None")}function _(n){return n?.destroy(),null}function nn(n){return n?.dispose(),null}function N(n){return n?.remove(),null}function tn(n){return n?.abort(),null}function en(n){return n?.release(),null}function rn(n,t,e){return n!=null&&t!=null?e!=null?e(n,t):n.equals(t):n===t}function on(n,t){let e;return n.some((r,o)=>(e=t(r,o),e!=null)),e??void 0}function l(n="Aborted"){return new E("AbortError",n)}function P(n,t="Aborted"){if(O(n))throw l(t)}function m(n){return n instanceof AbortSignal?n:n?.signal??void 0}function O(n){const t=m(n);return t!=null&&t.aborted}function un(n){if(b(n))throw n}function sn(n){if(!b(n))throw n}function f(n,t){const e=m(n);if(e!=null){if(!e.aborted)return A(e,"abort",()=>t());t()}}function cn(n,t){const e=m(n);if(e!=null)return P(e),A(e,"abort",()=>t(l()))}function an(n,t){return m(t)==null?n:new Promise((e,r)=>{let o=f(t,()=>r(l()));const u=()=>{o=N(o)};n.then(u,u),n.then(e,r)})}function b(n){return n?.name==="AbortError"}async function ln(n){try{return await n}catch(t){if(!b(t))throw t;return}}async function U(n){if(!n)return;if(typeof n.forEach!="function"){const e=Object.keys(n),r=e.map(i=>n[i]),o=await U(r),u={};return e.map((i,s)=>u[i]=o[s]),u}const t=n;return Promise.allSettled(t).then(e=>Array.from(t,(r,o)=>{const u=e[o];return u.status==="fulfilled"?{promise:r,value:u.value}:{promise:r,error:u.reason}}))}async function fn(n){return(await Promise.allSettled(n)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function mn(n){return(await Promise.allSettled(n)).filter(t=>t.status==="rejected").map(t=>t.reason)}function z(n,t=void 0,e){const r=new AbortController;return f(e,()=>r.abort()),new Promise((o,u)=>{let i=setTimeout(()=>{i=0,o(t)},n);f(r,()=>{i&&(clearTimeout(i),u(l()))})})}function vn(n,t,e,r){const o=e&&"abort"in e?e:null;r!=null||o||(r=e);let u=setTimeout(()=>{u=0,o?.abort()},t);const i=()=>r||new E("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return n.then(s=>{if(u===0)throw i();return clearTimeout(u),s},s=>{throw clearTimeout(u),u===0?i():s})}function dn(n,t){const e=new AbortController,r=setTimeout(()=>e.abort(),t);return f(n,()=>{e.abort(),clearTimeout(r)}),{...n,signal:e.signal}}function B(n){return n&&typeof n.then=="function"}function h(n){return B(n)?n:Promise.resolve(n)}function $n(n,t=-1){let e,r,o,u,i=null;const s=(...v)=>{if(e){r=v,u&&u.reject(l()),u=y();const c=u.promise;if(i){const $=i;i=null,$.abort()}return c}if(o=u||y(),u=null,t>0){const c=new AbortController;e=h(n(...v,c.signal));const $=e;z(t).then(()=>{e===$&&(u?c.abort():i=c)})}else e=1,e=h(n(...v));const p=()=>{const c=r;r=o=e=i=null,c!=null&&s(...c)},w=e,d=o;return w.then(p,p),w.then(d.resolve,d.reject),d.promise};return s}function y(){let n,t;const e=new Promise((o,u)=>{n=o,t=u}),r=o=>{n(o)};return r.resolve=o=>n(o),r.reject=o=>t(o),r.timeout=(o,u)=>k.setTimeout(()=>r.reject(u),o),r.promise=e,r}function bn(n,t){t.then(n.resolve,n.reject)}async function pn(n){await Promise.resolve(),P(n)}export{y as $,fn as A,h as B,B as C,bn as D,sn as E,F,m as G,on as H,vn as I,J,Y as K,$n as L,K as M,T as N,pn as O,mn as P,G as Q,k as R,dn as S,z as T,H as U,R as V,a,O as b,l as c,b as d,tn as e,un as f,I as g,cn as h,Z as i,U as j,A as k,N as l,X as m,g as n,x as o,W as p,V as q,nn as r,P as s,Q as t,_ as u,an as v,f as w,rn as x,ln as y,en as z};
