import{t as q}from"./DvKU1K2H.js";import{l as k,aP as J,aM as K,aj as R,ae as Q}from"./DEfw6_ef.js";import"./BsH20_Vs.js";import"./Cg-g7sfq.js";import{l as X,w as Z}from"./CYlsogSb.js";const F="http://www.w3.org/",b=`${F}2000/svg`,B=`${F}1999/xlink`;let H=[],j=(e,t)=>{let r={};return Object.keys(e).forEach(o=>{r[o]=e[o]}),t&&Object.keys(t).forEach(o=>{r[o]=t[o]}),r},O=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),U=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},_=(e,t,r)=>{if(t.vnodeSelector!==""){for(let o=r;o<e.length;o++)if(O(e[o],t))return o}return-1},S=(e,t,r,o)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let a=0;a<e.length;a++)if(a!==t){let d=e[a];if(O(d,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${o==="added"?o:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},ee=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},x=[],E=!1,D=e=>{(e.children||[]).forEach(D),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},T=()=>{E=!1,x.forEach(D),x.length=0},I=e=>{x.push(e),E||(E=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(T,{timeout:16}):setTimeout(T,16))},P=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),I(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),I(e))},te=(e,t,r)=>{if(!t)return;let o=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let a=0;a<s;a++){let d=n[a],i=t[d];if(d==="className")throw new Error('Property "className" is not supported, use "class".');if(d==="class")L(e,i,!0);else if(d==="classes"){let p=Object.keys(i),f=p.length;for(let l=0;l<f;l++){let c=p[l];i[c]&&e.classList.add(c)}}else if(d==="styles"){let p=Object.keys(i),f=p.length;for(let l=0;l<f;l++){let c=p[l],u=i[c];u&&(U(u),r.styleApplyer(e,c,u))}}else if(d!=="key"&&i!=null){let p=typeof i;p==="function"?(d.lastIndexOf("on",0)===0&&(o&&(i=o(d,i,e,t)),d==="oninput"&&(function(){let f=i;i=function(l){f.apply(this,[l]),l.target["oninput-value"]=l.target.value}})()),e[d]=i):r.namespace===b?d==="href"?e.setAttributeNS(B,d,i):e.setAttribute(d,i):p==="string"&&d!=="value"?d==="innerHTML"?e[d]=q.sanitize(i):C(e)&&d in e?e[d]=i:e.setAttribute(d,i):e[d]=i}}};function C(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let $,re=(e,t,r)=>{if(t)for(let o of t)g(o,e,void 0,r)},z=(e,t,r)=>{re(e,t.children,r),t.text&&(e.textContent=t.text),te(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},g=(e,t,r,o)=>{let n,s=0,a=e.vnodeSelector,d=t.ownerDocument;if(a==="")n=e.domNode=d.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let i=0;i<=a.length;++i){let p=a.charAt(i);if(i===a.length||p==="."||p==="#"){let f=a.charAt(s-1),l=a.slice(s,i);f==="."?n.classList.add(l):f==="#"?n.id=l:(l==="svg"&&(o=j(o,{namespace:b})),o.namespace!==void 0?n=e.domNode=d.createElementNS(o.namespace,l):(n=e.domNode=e.domNode||d.createElement(l),l==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=i+1}}z(n,e,o)}},L=(e,t,r)=>{t&&t.split(" ").forEach(o=>{o&&e.classList.toggle(o,r)})},oe=(e,t,r,o)=>{if(!r)return;let n=!1,s=Object.keys(r),a=s.length;for(let d=0;d<a;d++){let i=s[d],p=r[i],f=t[i];if(i==="class")f!==p&&(L(e,f,!1),L(e,p,!0));else if(i==="classes"){let l=e.classList,c=Object.keys(p),u=c.length;for(let m=0;m<u;m++){let v=c[m],M=!!p[v];M!==!!f[v]&&(n=!0,M?l.add(v):l.remove(v))}}else if(i==="styles"){let l=Object.keys(p),c=l.length;for(let u=0;u<c;u++){let m=l[u],v=p[m];v!==f[m]&&(n=!0,v?(U(v),o.styleApplyer(e,m,v)):o.styleApplyer(e,m,""))}}else if(p||typeof f!="string"||(p=""),i!=="value"||C(e)){if(p!==f){let l=typeof p;l==="function"&&o.eventHandlerInterceptor||(o.namespace===b?i==="href"?e.setAttributeNS(B,i,p):e.setAttribute(i,p):l==="string"?i==="innerHTML"?e[i]=q.sanitize(p):i==="role"&&p===""?e.removeAttribute(i):C(e)&&i in e?e[i]=p:e.setAttribute(i,p):e[i]!==p&&(e[i]=p),n=!0)}}else{let l=e[i];l!==p&&(e["oninput-value"]?l===e["oninput-value"]:p!==f)&&(e[i]=p,e["oninput-value"]=void 0),p!==f&&(n=!0)}}return n},ne=(e,t,r,o,n)=>{if(r===o)return!1;o=o||H;let s,a=(r=r||H).length,d=o.length,i=0,p=0,f=!1;for(;p<d;){let l=i<a?r[i]:void 0,c=o[p];if(l!==void 0&&O(l,c))f=$(l,c,n)||f,i++;else{let u=_(r,c,i+1);if(u>=0){for(s=i;s<u;s++)P(r[s]),S(r,s,e,"removed");f=$(r[u],c,n)||f,i=u+1}else g(c,t,i<a?r[i].domNode:void 0,n),ee(c),S(o,p,e,"added")}p++}if(a>i)for(s=i;s<a;s++)P(r[s]),S(r,s,e,"removed");return f};$=(e,t,r)=>{let o=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let a=o.ownerDocument.createTextNode(t.text);return o.parentNode.replaceChild(a,o),t.domNode=a,n=!0,n}t.domNode=o}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=j(r,{namespace:b})),e.text!==t.text&&(s=!0,t.text===void 0?o.removeChild(o.firstChild):o.textContent=t.text),t.domNode=o,s=ne(t,o,e.children,t.children,r)||s,s=oe(o,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[o,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(o,t.properties,e.properties),n};let y=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let o=e;e=r,$(o,r,t)},domNode:e.domNode});const ie={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let h=e=>j(ie,e),w={append:(e,t,r)=>(r=h(r),g(t,e,void 0,r),y(t,r)),insertBefore:(e,t,r)=>(r=h(r),g(t,e.parentNode,e,r),y(t,r)),merge:(e,t,r)=>(r=h(r),t.domNode=e,z(e,t,r),y(t,r)),replace:(e,t,r)=>(r=h(r),g(t,e.parentNode,e,r),e.parentNode.removeChild(e),y(t,r))},W,se=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};W=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let le=(e,t)=>{let r=e;return t.forEach(o=>{r=r&&r.children?W(r.children,n=>n.domNode===o):void 0}),r},ae=(e,t,r)=>{let o=function(n){r("domEvent",n);let s=t(),a=se(n.currentTarget,s.domNode);a.reverse();let d,i=le(s.getLastRender(),a);return e.scheduleRender(),i&&(d=i.properties[`on${n.type}`].apply(i.properties.bind||this,arguments)),r("domEventProcessed",n),d};return(n,s,a,d)=>o},Se=e=>{let t,r,o=h(e),n=o.performanceLogger,s=!0,a=!1,d=[],i=[],p=(l,c,u)=>{let m,v=()=>m;o.eventHandlerInterceptor=ae(t,v,n),m=l(c,u(),o),d.push(m),i.push(u)},f=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let l=0;l<d.length;l++){let c=i[l]();n("rendered",void 0),d[l].update(c),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:f,scheduleRender:()=>{r||a||(r=requestAnimationFrame(f))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),a=!0},resume:()=>{a=!1,s=!0,t.scheduleRender()},append:(l,c)=>{p(w.append,l,c)},insertBefore:(l,c)=>{p(w.insertBefore,l,c)},merge:(l,c)=>{p(w.merge,l,c)},replace:(l,c)=>{p(w.replace,l,c)},detach:l=>{for(let c=0;c<i.length;c++)if(i[c]===l)return i.splice(c,1),d.splice(c,1)[0];throw new Error("renderFunction was not found")}},t};const de=Symbol("widget"),pe=Symbol("widget-test-data"),ce=[],fe={},N=new WeakMap;function ue(e,t){let r=t.children;if(r?.length)for(let n=0;n<r.length;++n)r[n]=ue(e,r[n]);else r=ce;const o=t.vnodeSelector;if(Y(o)){const n=t.properties||fe,s=n.key||o,a={key:s,afterCreate:me,afterUpdate:ve,afterRemoved:V,parentWidget:e,widgetConstructor:o,widgetProperties:{...n,key:s,children:r}};return{vnodeSelector:o.vnodeSelector,properties:a,children:void 0,text:void 0,domNode:null}}return t}function me(e,t,r,{parentWidget:o,widgetConstructor:n,widgetProperties:s}){const a=new n(s);a.container=e,N.set(e,a),a.afterCreate?.(a,e),o.addHandles(k(()=>V(e))),queueMicrotask(()=>{a[pe].projector?.renderNow()})}function ve(e,t,r,{widgetProperties:o}){const n=N.get(e);n&&(n.set(o),n.afterUpdate?.(n,e))}function V(e){const t=N.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),N.delete(e))}function Y(e){return typeof e=="function"&&e[de]}const A=new Map;function he(){A.clear()}function ke(e){return A.get(e)}function xe(e,t){A.set(e,t)}function Ee(e){A.delete(e)}function Ce(...e){const t=R.acquire();for(let o=0;o<e.length;o++){const n=e[o],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const a in n)n[a]&&t.push(a)}const r=t.join(" ");return R.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(o=>{he();for(const n of o)e.get(n.target)?.(n)}),r=(o,n,s)=>(e.set(o,n),t.observe(o,s),k(()=>{t.unobserve(o),e.delete(o)}));return(o,n,s)=>{let a=null;return Q([X(()=>typeof o=="function"?o():o,d=>{a?.remove(),d&&(a=r(d,n,s))},Z),k(()=>a?.remove())])}})();function Le(e){const t=e?.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function je(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Oe(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function Me(e){return e==="Enter"||e===" "}async function Re(e,t){await J(K(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}var ge=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},G=function(e,t){for(var r=0,o=e.length;r<o;r++){var n=e[r];Array.isArray(n)?G(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=ge(n)),t.push(n))}},ye=function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return G(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function He(e,t,...r){return typeof e!="function"||Y(e)?ye(e,t??null,...r):e(t,...r)}function Te(...e){return e}export{Le as L,Te as a,w as b,xe as c,pe as d,ke as e,Y as f,ue as g,he as h,Se as i,Re as j,je as k,Me as l,He as n,Ee as o,de as t,Ce as v,Oe as y};
