import{m as c,z as m,U as d,A as p,l as y}from"./CEBETtrS.js";import{H as _}from"./BUsxo-Ec.js";import{_ as h}from"./BTNr9f9k.js";import{s as A}from"./CaNW5Bx0.js";import{c as b,f as g}from"./BW0zoJTm.js";import{n as w,d as B}from"./D0nkGZIM.js";import{f as $,A as I}from"./DNahHYBu.js";import{_ as u}from"./DQOO6RKE.js";function R(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t,a=2,o=a){const n=t.length/2;let r=0,i=0;if(!c(t)||m(t)){for(let f=0;f<n;++f)e[r]=t[i],e[r+1]=t[i+1],r+=a,i+=o;return}const s=d(t);if(p(t))for(let f=0;f<n;++f)e[r]=Math.max(t[i]/s,-1),e[r+1]=Math.max(t[i+1]/s,-1),r+=a,i+=o;else for(let f=0;f<n;++f)e[r]=t[i]/s,e[r+1]=t[i+1]/s,r+=a,i+=o}function S(e,t,a,o){const n=e.typedBuffer,r=e.typedBufferStride,i=o?.count??e.count;let s=(o?.dstIndex??0)*r;for(let f=0;f<i;++f)n[s]=t,n[s+1]=a,s+=r}Object.freeze(Object.defineProperty({__proto__:null,fill:S,normalizeIntegerBuffer:l,normalizeIntegerBufferView:R},Symbol.toStringTag,{value:"Module"}));class M{constructor(t){this._streamDataRequester=t}async loadJSON(t,a){return this._load(0,t,a)}async loadBinary(t,a){return B(t)?(b(a),w(t)):this._load(1,t,a)}async loadImage(t,a){return this._load(2,t,a)}async _load(t,a,o){if(this._streamDataRequester==null)return(await _(a,{responseType:q[t]})).data;const n=await h(this._streamDataRequester.request(a,t,o));if(n.ok===!0)return n.value;throw g(n.error),new A("glt-loader-request-error",`Request for resource failed: ${n.error}`)}}const q={2:"image",1:"array-buffer",0:"json",3:void 0};function O(e,t){switch(t){case u.TRIANGLES:return T(e);case u.TRIANGLE_STRIP:return N(e);case u.TRIANGLE_FAN:return U(e)}}function T(e){return typeof e=="number"?I(e):y(e)?new Uint16Array(e):e}function N(e){const t=typeof e=="number"?e:e.length;if(t<3)return[];const a=t-2,o=$(3*a);if(typeof e=="number"){let n=0;for(let r=0;r<a;r+=1)r%2==0?(o[n++]=r,o[n++]=r+1,o[n++]=r+2):(o[n++]=r+1,o[n++]=r,o[n++]=r+2)}else{let n=0;for(let r=0;r<a;r+=1)r%2==0?(o[n++]=e[r],o[n++]=e[r+1],o[n++]=e[r+2]):(o[n++]=e[r+1],o[n++]=e[r],o[n++]=e[r+2])}return o}function U(e){const t=typeof e=="number"?e:e.length;if(t<3)return new Uint16Array(0);const a=t-2,o=a<=65536?new Uint16Array(3*a):new Uint32Array(3*a);if(typeof e=="number"){let s=0;for(let f=0;f<a;++f)o[s++]=0,o[s++]=f+1,o[s++]=f+2;return o}const n=e[0];let r=e[1],i=0;for(let s=0;s<a;++s){const f=e[s+2];o[i++]=n,o[i++]=r,o[i++]=f,r=f}return o}export{R as a,S as b,M as l,l as n,O as o};
