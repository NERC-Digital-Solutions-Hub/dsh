import{t as h,s as l,a as f}from"./DHq0rblm.js";const d=/\{([^}]+)\}/g;function c(n){return n??""}function S(n,e){return e?n.replaceAll(d,typeof e=="object"?(t,r)=>c(h(r,e)):(t,r)=>c(e(r))):n}function C(n,e){return n.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,(t=>e?.includes(t)?t:`\\${t}`))}function m(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return e}let a;function b(n){return a??=new DOMParser,a.parseFromString(n||"","text/html").body.innerText||""}function M(n,e){return new RegExp(`{${e}}`,"ig").test(n)}function v(n,...e){let t=n[0];for(let r=0;r<e.length;++r)t+=e[r]+n[r+1];return t}const u={info:0,warn:1,error:2,none:3};var s;let p=(s=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,s._loggers.set(this.module,this);const t=this.module.lastIndexOf(".");t!==-1&&(this._parent=s.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,s._loggers.get(e)||new s({module:e})}_log(e,t,...r){if(this._matchLevel(e)){if(t!=="always"&&!s._throttlingDisabled){const i=_(r),o=this._loggedMessages[e].get(i);if(t==="once"&&o!=null||t==="oncePerTick"&&o&&o>=s._tickCounter)return;this._loggedMessages[e].set(i,s._tickCounter),s._scheduleTickCounterIncrement()}for(const i of l.log.interceptors)if(i(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,t){let r=this;for(;r!=null;){const i=r[e];if(i!=null)return i;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",w)}_matchLevel(e){const t=l.log.level||"warn";return u[this._parentWithMember("level",t)]<=u[e]}static _scheduleTickCounterIncrement(){s._tickCounterScheduled||(s._tickCounterScheduled=!0,Promise.resolve().then((()=>{s._tickCounter++,s._tickCounterScheduled=!1})))}},s._loggers=new Map,s._tickCounter=0,s._tickCounterScheduled=!1,s._throttlingDisabled=!1,s);function w(n,e,...t){console[n](`[${e}]`,...t)}function _(...n){return m(JSON.stringify(n,(t,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}function y(n,e){return n.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((t,r)=>r===""?"$":(h(r,e)??"").toString()))}class k{constructor(e,t,r=void 0){this.name=e,this.details=r,this.message=(t&&y(t,r))??""}toString(){return"["+this.name+"]: "+this.message}}let O=class g extends k{constructor(e,t,r){super(e,t,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&typeof t=="object"&&typeof t.toJSON=="function")return t;try{return f(t)}catch{return"[object]"}})))}}catch(e){throw p.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new g(e.name,e.message,e.details)}};O.prototype.type="error";export{M as a,b as c,k as e,v as f,p as i,m as l,C as o,S as r,O as s};
