const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C-j3slGy.js","./BmgeYasw.js","./DLOQEY_Z.js","./DwWpeHsS.js","./3uLYKulp.js","./NIvIaQ85.js","./D31seSHD.js","./BUpj17sD.js","./BfMV86KQ.js","./PPVm8Dsz.js","./mvO4rAvm.js","./bnayRBMH.js","./fYGx8FTO.js","./Rm5ZOkEP.js","./Dld9CXfg.js","./YliWwaI6.js","./BPVd6ESQ.js","./VgEanFHs.js","./BV8-ngCo.js","./Db91rTNV.js","./Y_0EfhRu.js","./v5xyD8FI.js","./DtTlQQp6.js","./D2feDspf.js","./BdCsrb02.js","./D7DJ3tbO.js","./B5G6HtHO.js","./BiRr0v4Y.js","./BBr4RcYl.js","./BR8EEvDc.js","./91llm6te.js","./CpYXOpIs.js","./DHiB1uzW.js","./8hNj00IL.js","./DFlbJ4P1.js","./BahTgCOP.js","./BT4JRnHr.js","./Ccuhb4eK.js","./ZR-gBf9D.js","./CMW1wfAn.js","./DpFYrSXx.js","./DprYwonO.js","./B5GhfNyB.js","./CgRsZskV.js","./H-XdHQIn.js","./8WtPGj6h.js","./6vsZKnZ9.js","./DdbdneQ1.js","./7VNfS1TG.js","./D-fXJnCB.js","./DP5d1tPL.js","./D-LmNXBe.js","./B0qK9XMn.js","./Dci9kdnZ.js","./CG7ZQ6BV.js"])))=>i.map(i=>d[i]);
import{c0 as Ss,ba as Yi,t as js,e as Fs,s as Qi,n as c,_ as r,m as o,a,o as yi,b as u,a9 as M,c as se,u as He,f as Ke,r as k,bw as Zi,Z as Is,g as he,ah as Ns,ag as eo,R as Ms,aC as to,H as Li,au as zi,bj as Os,P as Ts,b9 as _s,aE as Ls,c1 as zs}from"./DwWpeHsS.js";import{l as V,n as Cs,r as As}from"./v5xyD8FI.js";import{D as di,M as ks,s as Ds,O as b,h as Rs,k as Ps,b as Es,U as qs,f as Ci}from"./BUpj17sD.js";import{a7 as Zt,_ as hi,z as er,at as ro,X as mi,aT as io,m as oo,Y as fi,K as so,bS as no,a$ as Xt,e as lo,b5 as Vs,k as Ws,V as Gs,t as Bs}from"./BfMV86KQ.js";import{_ as pt}from"./PPVm8Dsz.js";import{r as h,u as $}from"./Y_0EfhRu.js";import{y as bi,P as Yt,m as gi,i as Js,r as Us}from"./D2feDspf.js";import{c as D,o as g,e as Ue,d as Hs,n as Ks,l as Xs,m as jt,a as wi}from"./DdbdneQ1.js";import{M as tr}from"./mvO4rAvm.js";import{r as Ys}from"./bnayRBMH.js";let nr;async function Qs(){return nr==null&&(nr=pt(()=>import("./C-j3slGy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url).then(e=>new e.WhereClauseCache(500,500))),nr}async function Zs(e,t){const i=await Qs(),s=i.get(e,t);if(s==null)throw i.getError(e,t);return s}function xa(e,t){return e||=null,t||=null,e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function Sa(e,t){return e||=null,t||=null,e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function ja(e,t){return t.length===0?null:`${e} IN (${en(t)})`}function en(e){return e.map(t=>typeof t=="string"?tn(t):t).join(",")}function tn(e){return`'${e.replaceAll("'","''")}'`}function Fa(e){return typeof e=="number"}function Ia(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Na(e){return typeof e=="boolean"}function Ft(e){return typeof e=="string"||e instanceof String}function rn(e){return e==null||Ft(e)}function Ma(e){return Array.isArray(e)}function Oa(e){return e?.declaredClass==="esri.Graphic"}function Ta(e){return e instanceof Date}const on="HH:mm",sn="HH:mm:ss",nn="HH:mm:ss.SSS",ln=[nn,sn,on,"TT"],an="yyyy-MM-dd";function Ai(e){if(!e||!Ft(e))return null;const t=di.fromFormat(e,an);return t.isValid?t:null}function ki(e){return e&&Ft(e)?Ss(ln,t=>{const i=di.fromFormat(e,t);return i.isValid?i:null})??null:null}function Di(e){if(!e||!Ft(e))return null;const t=di.fromISO(e);return t.isValid?t:null}const ao=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function un(e){return e!=null&&ao.has(e.type)}function uo(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function po(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function co(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const pn=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);Yi(ao,pn);function _a(e,t){const i=e?.domain;if(!i||i.type!=="range")return;const s="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,l=un(e);return uo(e)||co(e)||po(e)?{...cn(e,n,s),isInteger:l}:{min:s!=null&&typeof s=="number"?s:null,max:n!=null&&typeof n=="number"?n:null,rawMin:s,rawMax:n,isInteger:l}}function cn(e,t,i){return uo(e)?{min:Ai(i)?.toMillis(),max:Ai(t)?.toMillis(),rawMin:i,rawMax:t}:co(e)?{min:ki(i)?.toMillis(),max:ki(t)?.toMillis(),rawMin:i,rawMax:t}:po(e)?{min:Di(i)?.toMillis(),max:Di(t)?.toMillis(),rawMin:i,rawMax:t}:{max:null,min:null}}function yn(e){if(!e)return;const t=e.match(dn);return t?.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const dn=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function La(e){return e.match(hn)?.[1]?.replaceAll("\\'","'")??null}const hn=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let lr;function mn(){return lr||(lr=(async()=>{const[e,t,i]=await Promise.all([pt(()=>import("./fYGx8FTO.js"),__vite__mapDeps([12,13,9,14,5,3,6,7,8,10,15,16,17,18,19,20,11,21,22,23,24,25,26,27,28,29,30,31,32,33,4,34,35,36,37,38,39]),import.meta.url),pt(()=>import("./DpFYrSXx.js"),__vite__mapDeps([40,3,41,18,7,8,9,10,19,20,11,21,42,43]),import.meta.url),pt(()=>import("./CpYXOpIs.js").then(s=>s.a),__vite__mapDeps([31,3,6,7,8,9,10,15,5,16,17,18,19,20,11,21,22,23,32,14,33]),import.meta.url)]);return{arcade:e.arcade,arcadeUtils:e,batchExec:t,aiServices:i,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel,Pixel:e.Pixel}})()),lr}const fn=/^([0-9_])/,bn=/[^a-z0-9_\u0080-\uffff]+/gi;function za(e){return e==null?null:e.trim().replaceAll(bn,"_").replace(fn,"F$1")||null}const gn=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],wn=["field","normalizationField"];function Ca(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(Ri(gn,i,t),"visualVariables"in i&&i.visualVariables)for(const s of i.visualVariables)Ri(wn,s,t)}}function Ri(e,t,i){if(e)for(const s of e){const n=js(s,t),l=n&&typeof n!="function"&&i.get(n);l&&Fs(s,l.name,t)}}function Aa(e,t){if(e!=null&&t?.fields?.length)if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=i?.name??null,e.endField=s?.name??null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=i?.name??null,e.endTimeField=s?.name??null}}const ar=new Set;function vi(e,t){return e&&t?(ar.clear(),bt(ar,e,t),Array.from(ar).sort()):[]}function bt(e,t,i){if(i)if(t?.fields?.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)gt(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const s of i)s!=null&&e.add(s)}}function gt(e,t,i){if(typeof i=="string")if(t){const s=t.get(i);s&&e.add(s.name)}else e.add(i)}function ka(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}function Da(e,t,i=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const s=vi(e,t);return s.length/e.fields.length>=i?["*"]:s}async function Me(e,t,i,s){if(!s)return;const n=yn(s);if(n)gt(e,t,n);else{const{arcadeUtils:l}=await mn(),p=l.extractFieldNames(s,i?.partitions??t?.fields?.map(y=>y.name));for(const y of p)gt(e,i?.index??t,y)}}async function $i(e,t,i){if(i&&i!=="1=1"){const s=await Zs(i,t);if(!s.isStandardized)throw new Qi("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});bt(e,t,s.fieldNames)}}function Ra({displayField:e,fields:t}){return e||(t?.length?vn(t):null)}function vn(e){return ur(e,"name-or-title")||ur(e,"unique-identifier")||ur(e,"type-or-category")||$n(e)}function $n(e){for(const t of e){if(!t?.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function ur(e,t){for(const i of e)if(i?.valueType&&i.valueType===t)return i.name;return null}async function Pa(e,t){if(!t)return;const i=t.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function xn(e,t,i){i.onStatisticExpression?Me(e,t,null,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function Ea(e,t,i){if(!t||!i||!("fields"in i))return;const s=[],n=i.popupTemplate;s.push(yo(e,t,n)),i.fields&&s.push(...i.fields.map(async l=>xn(e,t.fieldsIndex,l))),await Promise.all(s)}async function qa(e,t){const{fieldsIndex:i,trackInfo:s}=t;if(!t||!s||!i)return;const n=[s.latestObservations.renderer?.collectRequiredFields(e,i),s.previousObservations.renderer?.collectRequiredFields(e,i),s.trackLines.renderer?.collectRequiredFields(e,i)];s.popupTemplate&&n.push(yo(e,t,s.popupTemplate));for(const l of[s.latestObservations.labelingInfo,s.previousObservations.labelingInfo,s.trackLines.labelingInfo])if(l)for(const p of l)n.push(fo(e,i,p));await Promise.all(n)}async function yo(e,t,i){const s=[];i?.expressionInfos&&s.push(...i.expressionInfos.map(l=>Me(e,t.fieldsIndex,null,l.expression)));const n=i?.content;if(Array.isArray(n))for(const l of n)l.type==="expression"&&l.expressionInfo&&s.push(Me(e,t.fieldsIndex,null,l.expressionInfo.expression));await Promise.all(s)}async function Va(e,t,i){t&&(t.timeInfo&&i?.timeExtent&&bt(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&bt(e,t.fieldsIndex,[t.floorInfo.floorField]),i?.where!=null&&await $i(e,t.fieldsIndex,i.where))}async function Wa(e,t,i){t&&i&&await Promise.all(i.map(s=>Sn(e,t,s)))}async function Sn(e,t,i){t&&i&&(i.valueExpression?await Me(e,t.fieldsIndex,null,i.valueExpression):i.field&&gt(e,t.fieldsIndex,i.field))}function Ga(e){return e?vi(e.fieldsIndex,ho(e)):[]}function jn(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?vi(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function Ba(e,t,i){if(!t||!i)return;const s=t.fieldsIndex;await Promise.all(i.filters.map(n=>$i(e,s,n.where)))}const Fn=new Set(["oid","global-id","guid"]),In=new Set(["oid","global-id"]),Nn=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function Mn(e){const t=new Set;mo(e).forEach(s=>t.add(s)),jn(e).forEach(s=>t.add(s.toLowerCase()));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(s=>t.add(s.toLowerCase())),Object.values(i.transformFieldRoles).forEach(s=>t.add(s.toLowerCase()))),Array.from(t)}function ho(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:s,editDateField:n,editorField:l}=t;return[i,s,n,l].filter(Boolean)}function mo(e){return ho(e).map(t=>t.toLowerCase())}function Ja(e,t){return e.editable&&!Fn.has(e.type)&&!mo(t).includes(e.name?.toLowerCase()??"")}function Ua(e,t){const i=e.name?.toLowerCase()??"";return!(t?.objectIdField!=null&&i===t.objectIdField.toLowerCase()||t?.globalIdField!=null&&i===t.globalIdField.toLowerCase()||Mn(t).includes(i)||In.has(e.type)||Nn.some(s=>s.test(i)))}async function Ha(e,t){const{labelingInfo:i,fieldsIndex:s}=t;i?.length&&await Promise.all(i.map(n=>fo(e,s,n)))}async function fo(e,t,i){if(!i)return;const s=i.getLabelExpression(),n=i.where;if(s.type==="arcade")await Me(e,t,null,s.expression);else{const l=s.expression.match(/{[^}]*}/g);l&&l.forEach(p=>{gt(e,t,p.slice(1,-1))})}await $i(e,t,n)}function Ka(e){const t=e.defaultValue;return t!==void 0&&go(e,t)?t:e.nullable?null:void 0}function Xa(e){const t=typeof e=="string"?{type:e}:e;return Rn(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function bo(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function On(e){return e===null||bo(e)}function Tn(e){return e===null||Number.isInteger(e)}function _n(){return!0}function go(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=e.nullable?Tn:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?On:bo;break;case"string":case"esriFieldTypeString":i=e.nullable?rn:Ft;break;default:i=_n}return arguments.length===1?i:i(t)}const Ln=["integer","small-integer","big-integer","long"],zn=["single","double"],Cn=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],An=["esriFieldTypeSingle","esriFieldTypeDouble"],wo=new Set([...Ln,...Cn]),kn=new Set([...zn,...An]),Dn=Yi(wo,kn);function Ya(e){return e!=null&&wo.has(e.type)}function vo(e){return e!=null&&Dn.has(e.type)}function Rn(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function Pn(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function En(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function qn(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function Vn(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Qa(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function Za(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function eu(e,t){return Wn(e,t)===null}function tu(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Wn(e,t){return e==null||e.nullable&&t===null?null:go(e,t)?vo(e)&&!Gn(e.type,Number(t))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function Gn(e,t){const i=typeof e=="string"?$o(e):e;if(!i)return!1;const s=i.min,n=i.max;return i.isInteger?Number.isInteger(t)&&t>=s&&t<=n:t>=s&&t<=n}function $o(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Bn;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return Jn;case"esriFieldTypeBigInteger":case"big-integer":return Un;case"esriFieldTypeSingle":case"single":return Hn;case"esriFieldTypeDouble":case"double":return Kn}}const Bn={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Jn={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Un={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Tt=(2-2**-23)*2**127,Hn={min:-Tt,max:Tt,isInteger:!1,rawMin:-Tt,rawMax:Tt},Kn={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function ru(e,t,i){switch(e){case"domain-validation-error::invalid-coded-value":return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case"type-validation-error::invalid-type":return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:s,max:n}=$o(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${s} to ${n}`}}}function iu(e,t){return!Xn(e,t,null)}function Xn(e,t,i){if(!e?.attributes||!t)return!0;const s=new Set(Object.keys(e.attributes));let n=!1;for(const l of t)if(!s.has(l)&&(n=!0,i==null))break;return n}function ou(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function Yn(e){const t=e?.match(/{[^}]+}/g);return t?t.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let Lt=class extends c{constructor(t){super(t),this.type=null}};r([o({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],Lt.prototype,"type",void 0),Lt=r([a("esri.popup.content.Content")],Lt);const ne=Lt,_t=new yi({asc:"ascending",desc:"descending"});let Qe=class extends V(c){constructor(t){super(t),this.field=null,this.order="ascending"}};r([o({type:String,json:{write:!0}})],Qe.prototype,"field",void 0),r([o({type:_t.apiValues,json:{type:_t.jsonValues,read:_t.read,write:_t.write}})],Qe.prototype,"order",void 0),Qe=r([a("esri.popup.support.AttachmentsOrderByInfo")],Qe);const Qn=Qe;let J=class extends V(ne){constructor(t){super(t),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};r([o({type:[String],json:{write:!0}})],J.prototype,"attachmentKeywords",void 0),r([o({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],J.prototype,"attachmentTypes",void 0),r([o({type:String,json:{write:!0}})],J.prototype,"description",void 0),r([o({type:["auto","preview","list"],json:{write:!0}})],J.prototype,"displayType",void 0),r([o({type:[Qn],json:{write:!0}})],J.prototype,"orderByFields",void 0),r([o({type:String,json:{write:!0}})],J.prototype,"title",void 0),r([o({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],J.prototype,"type",void 0),J=r([a("esri.popup.content.AttachmentsContent")],J);const wt=J;var cr;let fe=cr=class extends ne{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new cr({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?u(this.outFields):null})}};r([o()],fe.prototype,"creator",void 0),r([o()],fe.prototype,"destroyer",void 0),r([o()],fe.prototype,"outFields",void 0),r([o({type:["custom"],readOnly:!0})],fe.prototype,"type",void 0),fe=cr=r([a("esri.popup.content.CustomContent")],fe);const Zn=fe;var yr;let Oe=yr=class extends c{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new yr({title:this.title,expression:this.expression})}};r([o({type:String,json:{write:!0}})],Oe.prototype,"title",void 0),r([o({type:String,json:{write:!0}})],Oe.prototype,"expression",void 0),r([o({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Oe.prototype,"returnType",void 0),Oe=yr=r([a("esri.popup.ElementExpressionInfo")],Oe);const el=Oe;var dr;let Ze=dr=class extends ne{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){return new dr({expressionInfo:this.expressionInfo?.clone()})}};r([o({type:el,json:{write:!0}})],Ze.prototype,"expressionInfo",void 0),r([o({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Ze.prototype,"type",void 0),Ze=dr=r([a("esri.popup.content.ExpressionContent")],Ze);const rr=Ze;let zt=class extends V(c){constructor(t){super(t),this.type=null}};r([o({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],zt.prototype,"type",void 0),zt=r([a("esri.layers.support.FieldFormat")],zt);const xi=zt,xo="auto";let Y=class extends xi{constructor(t){super(t),this.dateStyle=null,this.hour12=xo,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};r([o({type:["full","long","medium","short"],json:{write:!0}})],Y.prototype,"dateStyle",void 0),r([o({type:["always","auto","never"],nonNullable:!0,json:{default:xo,write:!0}})],Y.prototype,"hour12",void 0),r([o({type:["long","short"],json:{write:!0}})],Y.prototype,"month",void 0),r([o({type:["full","long","medium","short"],json:{write:!0}})],Y.prototype,"timeStyle",void 0),r([o({type:["date-time"]})],Y.prototype,"type",void 0),r([o({type:["numeric"],json:{write:!0}})],Y.prototype,"year",void 0),Y=r([a("esri.layers.support.DateTimeFieldFormat")],Y);const Ne=Y,Pi={min:0,max:20},So=2,jo=0,Fo="decimal",Io="auto";let le=class extends xi{constructor(t){super(t),this.maximumFractionDigits=So,this.minimumFractionDigits=jo,this.style=Fo,this.type="number",this.useGrouping=Io}};r([o({type:M,nonNullable:!0,range:Pi,json:{default:So,write:!0}})],le.prototype,"maximumFractionDigits",void 0),r([o({type:M,nonNullable:!0,range:Pi,json:{default:jo,write:!0}})],le.prototype,"minimumFractionDigits",void 0),r([o({type:["decimal"],nonNullable:!0,json:{default:Fo,write:!0}})],le.prototype,"style",void 0),r([o({type:["number"]})],le.prototype,"type",void 0),r([o({type:["always","auto","never"],nonNullable:!0,json:{default:Io,write:!0}})],le.prototype,"useGrouping",void 0),le=r([a("esri.layers.support.NumberFieldFormat")],le);const Qt=le;let Te=class extends V(c){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};r([h(ks)],Te.prototype,"dateFormat",void 0),r([o({type:Boolean,json:{write:!0}})],Te.prototype,"digitSeparator",void 0),r([o({type:M,json:{write:!0}})],Te.prototype,"places",void 0),Te=r([a("esri.popup.support.FieldInfoFormat")],Te);const Xe=Te,tl={base:xi,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":Ne,number:Qt}};function yu(e,t){const{format:i}=e;return t&&ir(t)?i?No(i,t):Ct(t,{hour12:"always",useGrouping:"always"}):null}function No(e,t){const{dateFormat:i}=e;if(!t)return i?qi(e):Ei(e);if(!ir(t))return;const s={hour12:"always"};switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return Mo(e);case"single":case"double":return Ei(e);case"date":case"timestamp-offset":return i?qi(e):Ct(t,s);case"date-only":return i?rl(e):Ct(t);case"time-only":return i?il(e):Ct(t,s)}}function ir(e){return vo(e)||Pn(e)||En(e)||Vn(e)||qn(e)}function Mo(e){return new Qt({useGrouping:e.digitSeparator?"always":"never"})}function Ei(e){const t=Mo(e),{places:i}=e;return t.minimumFractionDigits=i??0,t.maximumFractionDigits=i??2,t}function qi(e){return new Ne({dateStyle:Oo(e),year:zo(e),month:_o(e),timeStyle:Lo(e),hour12:To(e)})}function rl(e){return new Ne({dateStyle:Oo(e),year:zo(e),month:_o(e)})}function il(e){return new Ne({timeStyle:Lo(e),hour12:To(e)})}function Oo(e){const{dateFormat:t}=e;return t?t.startsWith("short-date")?"short":t.startsWith("day-short-month-year")?"medium":t.startsWith("long-month-day-year")?"long":t.startsWith("long-date")?"full":null:null}function To(e){return e.dateFormat?.endsWith("-24")?"never":"always"}function _o(e){switch(e.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function Lo(e){const{dateFormat:t}=e;return t?t.includes("short-time")?"short":t.includes("long-time")?"medium":null:null}function zo(e){switch(e.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function ol(e,t){const i=e.type==="number",s=e.type==="date-time";if(!t)return i?Vi(e):s?Wi(e):null;if(ir(t))switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return i?Co(e):null;case"single":case"double":return i?Vi(e):null;case"date":case"timestamp-offset":return s?Wi(e):null;case"date-only":return s?sl(e):null;case"time-only":return s?nl(e):null}}function Co(e){return new Xe({digitSeparator:e.useGrouping!=="never"})}function Vi(e){const t=Co(e);return t.places=e.maximumFractionDigits,t}function Wi(e){let t;const i=Ao(e),s=ko(e),n=e.hour12==="never"?"24":null,l=e.year==="numeric"?"year":null,p=Do(e);return i&&s&&n?t=`${i}-${s}-${n}`:i&&s?t=`${i}-${s}`:i?t=i:l&&p?t=`${p}-${l}`:l&&(t=l),t?new Xe({dateFormat:t}):null}function sl(e){let t;const i=Ao(e),s=e.year==="numeric"?"year":null,n=Do(e);return i?t=i:s&&n?t=`${n}-${s}`:s&&(t=s),t?new Xe({dateFormat:t}):null}function nl(e){let t;const i=ko(e),s=e.hour12==="never"?"24":null;return i&&s?t=`short-date-${i}-${s}`:i&&(t=`short-date-${i}`),t?new Xe({dateFormat:t}):null}function Ao(e){switch(e.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function ko(e){return e.timeStyle&&(e.timeStyle==="short"?"short-time":"long-time")}function Do(e){switch(e.month){case"short":return"short-month";case"long":return"long-month";default:return}}function Ct(e,t){if(!ir(e))return;const i=t?.useGrouping??"auto",s=t?.hour12??"auto";switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return new Qt({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:i});case"single":case"double":return new Qt({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:i});case"date":case"timestamp-offset":return new Ne({dateStyle:"short",timeStyle:"short",hour12:s});case"date-only":return new Ne({dateStyle:"short"});case"time-only":return new Ne({timeStyle:"short",hour12:s})}}let R=class extends V(c){constructor(t){super(t),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(t){this._set("fieldFormat",t),this._set("format",t?ol(t):null)}set format(t){this._set("format",t),this._set("fieldFormat",t?No(t):null)}readFormat(t,i){if(!i.fieldFormat)return t?Xe.fromJSON(t):null}clone(){const t=super.clone();return t._set("format",this.format?.clone()),t._set("fieldFormat",this.fieldFormat?.clone()),t}};r([o({value:null,clonable:!1,types:tl,json:{write:{overridePolicy(e,t,i){const{fieldName:s}=this;return{enabled:!!s&&!s.startsWith("expression/")&&!s.startsWith("relationships/")&&!!i?.writeFieldFormat}}}}})],R.prototype,"fieldFormat",null),r([o({type:String,json:{write:!0}})],R.prototype,"fieldName",void 0),r([o({value:null,clonable:!1,type:Xe,json:{write:!0}})],R.prototype,"format",null),r([se("format")],R.prototype,"readFormat",null),r([o({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],R.prototype,"isEditable",void 0),r([o({type:String,json:{write:!0}})],R.prototype,"label",void 0),r([o({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],R.prototype,"statisticType",void 0),r([h(new yi({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],R.prototype,"stringFieldOption",void 0),r([o({type:String,json:{write:!0}})],R.prototype,"tooltip",void 0),r([o({type:Boolean,json:{write:!0}})],R.prototype,"visible",void 0),R=r([a("esri.popup.FieldInfo")],R);const Ro=R;var hr;let ae=hr=class extends ne{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new hr(u({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};r([o({type:Object,json:{write:!0}})],ae.prototype,"attributes",void 0),r([o({type:String,json:{write:!0}})],ae.prototype,"description",void 0),r([o({type:[Ro],json:{write:!0}})],ae.prototype,"fieldInfos",void 0),r([o({type:String,json:{write:!0}})],ae.prototype,"title",void 0),r([o({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ae.prototype,"type",void 0),ae=hr=r([a("esri.popup.content.FieldsContent")],ae);const vt=ae;let be=class extends c{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};r([o({type:String,json:{write:!0}})],be.prototype,"altText",void 0),r([o({type:String,json:{write:!0}})],be.prototype,"caption",void 0),r([o({type:String,json:{write:!0}})],be.prototype,"title",void 0),r([o({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],be.prototype,"type",void 0),be=r([a("esri.popup.content.mixins.MediaInfo")],be);const Si=be;var mr;let ge=mr=class extends He{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new mr({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};r([o()],ge.prototype,"color",void 0),r([o()],ge.prototype,"fieldName",void 0),r([o()],ge.prototype,"tooltip",void 0),r([o()],ge.prototype,"value",void 0),ge=mr=r([a("esri.popup.content.support.ChartMediaInfoValueSeries")],ge);const ll=ge;var fr;let ue=fr=class extends c{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new fr({colors:u(this.colors),fields:u(this.fields),normalizeField:this.normalizeField,series:u(this.series),tooltipField:this.tooltipField})}};r([o({type:[$],json:{type:[[M]],write:!0}})],ue.prototype,"colors",void 0),r([o({type:[String],json:{write:{isRequired:!0}}})],ue.prototype,"fields",void 0),r([o({type:String,json:{write:!0}})],ue.prototype,"normalizeField",void 0),r([o({type:[ll],json:{read:!1}})],ue.prototype,"series",void 0),r([o({type:String,json:{write:!0}})],ue.prototype,"tooltipField",void 0),ue=fr=r([a("esri.popup.content.support.ChartMediaInfoValue")],ue);const al=ue;let et=class extends Si{constructor(t){super(t),this.type=null,this.value=void 0}};r([o({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],et.prototype,"type",void 0),r([o({type:al,json:{write:{isRequired:!0}}})],et.prototype,"value",void 0),et=r([a("esri.popup.content.mixins.ChartMediaInfo")],et);const or=et,sr=Ke()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var br;let At=br=class extends or{constructor(e){super(e),this.type="bar-chart"}clone(){return new br({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};r([o({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:sr.write,isRequired:!0}}})],At.prototype,"type",void 0),At=br=r([a("esri.popup.content.BarChartMediaInfo")],At);const Po=At;var gr;let kt=gr=class extends or{constructor(e){super(e),this.type="column-chart"}clone(){return new gr({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};r([o({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:sr.write,isRequired:!0}}})],kt.prototype,"type",void 0),kt=gr=r([a("esri.popup.content.ColumnChartMediaInfo")],kt);const Eo=kt;var wr;let tt=wr=class extends c{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new wr({linkURL:this.linkURL,sourceURL:this.sourceURL})}};r([o({type:String,json:{write:!0}})],tt.prototype,"linkURL",void 0),r([o({type:String,json:{write:{isRequired:!0}}})],tt.prototype,"sourceURL",void 0),tt=wr=r([a("esri.popup.content.support.ImageMediaInfoValue")],tt);const ul=tt;var vr;let _e=vr=class extends Si{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new vr({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};r([o({type:Number,json:{write:!0}})],_e.prototype,"refreshInterval",void 0),r([o({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],_e.prototype,"type",void 0),r([o({type:ul,json:{write:{isRequired:!0}}})],_e.prototype,"value",void 0),_e=vr=r([a("esri.popup.content.ImageMediaInfo")],_e);const qo=_e;var $r;let Dt=$r=class extends or{constructor(e){super(e),this.type="line-chart"}clone(){return new $r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};r([o({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:sr.write,isRequired:!0}}})],Dt.prototype,"type",void 0),Dt=$r=r([a("esri.popup.content.LineChartMediaInfo")],Dt);const Vo=Dt;var xr;let Rt=xr=class extends or{constructor(e){super(e),this.type="pie-chart"}clone(){return new xr({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};r([o({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:sr.write,isRequired:!0}}})],Rt.prototype,"type",void 0),Rt=xr=r([a("esri.popup.content.PieChartMediaInfo")],Rt);const Wo=Rt,Sr={base:Si,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Po,"column-chart":Eo,"line-chart":Vo,"pie-chart":Wo,image:qo}};var jr;let B=jr=class extends ne{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?qo.fromJSON(t):t.type==="barchart"?Po.fromJSON(t):t.type==="columnchart"?Eo.fromJSON(t):t.type==="linechart"?Vo.fromJSON(t):t.type==="piechart"?Wo.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new jr(u({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};r([o()],B.prototype,"activeMediaInfoIndex",void 0),r([o({type:Object,json:{write:!0}})],B.prototype,"attributes",void 0),r([o({type:String,json:{write:!0}})],B.prototype,"description",void 0),r([o({types:[Sr]})],B.prototype,"mediaInfos",void 0),r([se("mediaInfos")],B.prototype,"readMediaInfos",null),r([k("mediaInfos")],B.prototype,"writeMediaInfos",null),r([o({type:String,json:{write:!0}})],B.prototype,"title",void 0),r([o({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],B.prototype,"type",void 0),B=jr=r([a("esri.popup.content.MediaContent")],B);const $t=B;var Fr;let rt=Fr=class extends c{constructor(e){super(e),this.field=null,this.order=null}clone(){return new Fr({field:this.field,order:this.order})}};r([o({type:String,json:{write:!0}})],rt.prototype,"field",void 0),r([o({type:["asc","desc"],json:{write:!0}})],rt.prototype,"order",void 0),rt=Fr=r([a("esri.popup.support.RelatedRecordsInfoFieldOrder")],rt);const Go=rt;let U=class extends V(ne){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};r([o({type:String,json:{write:!0}})],U.prototype,"description",void 0),r([o({type:Number,json:{type:M,write:!0}})],U.prototype,"displayCount",void 0),r([o({type:["list"],json:{write:{isRequired:!0}}})],U.prototype,"displayType",void 0),r([o({type:[Go],json:{write:!0}})],U.prototype,"orderByFields",void 0),r([o({type:Number,json:{type:M,write:{isRequired:!0}}})],U.prototype,"relationshipId",void 0),r([o({type:String,json:{write:!0}})],U.prototype,"title",void 0),r([o({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],U.prototype,"type",void 0),U=r([a("esri.popup.content.RelationshipContent")],U);const xt=U;var Ir;let it=Ir=class extends ne{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new Ir({text:this.text})}};r([o({type:String,json:{write:!0}})],it.prototype,"text",void 0),r([o({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],it.prototype,"type",void 0),it=Ir=r([a("esri.popup.content.TextContent")],it);const St=it;let Q=class extends V(c){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};r([o({type:String,json:{write:!0}})],Q.prototype,"title",void 0),r([o({type:String,json:{write:!0}})],Q.prototype,"description",void 0),r([o({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Q.prototype,"type",void 0),r([o({type:Number,json:{type:M,write:!0}})],Q.prototype,"associatedNetworkSourceId",void 0),r([o({type:Number,json:{type:M,write:!0}})],Q.prototype,"associatedAssetGroup",void 0),r([o({type:Number,json:{type:M,write:!0}})],Q.prototype,"associatedAssetType",void 0),Q=r([a("esri.popup.support.UtilityNetworkAssociationType")],Q);const pl=Q;let pe=class extends V(ne){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};r([o({type:String,json:{write:!0}})],pe.prototype,"description",void 0),r([o({type:Number,json:{type:M,write:!0}})],pe.prototype,"displayCount",void 0),r([o({type:String,json:{write:!0}})],pe.prototype,"title",void 0),r([o({type:[pl],json:{write:!0}})],pe.prototype,"associationTypes",void 0),r([h({utilityNetworkAssociations:"utility-network-associations"})],pe.prototype,"type",void 0),pe=r([a("esri.popup.content.UtilityNetworkAssociationsContent")],pe);const ji=pe,cl={base:null,key:"type",typeMap:{attachment:wt,media:$t,text:St,expression:rr,field:vt,relationship:xt,utilityNetworkAssociations:ji}},yl={base:null,key:"type",typeMap:{attachment:wt,media:$t,text:St,expression:rr,field:vt,relationship:xt}};var Nr;let we=Nr=class extends c{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Nr({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};r([o({type:String,json:{write:!0}})],we.prototype,"name",void 0),r([o({type:String,json:{write:!0}})],we.prototype,"title",void 0),r([o({type:String,json:{write:!0}})],we.prototype,"expression",void 0),r([o({type:["string","number"],json:{write:!0}})],we.prototype,"returnType",void 0),we=Nr=r([a("esri.popup.ExpressionInfo")],we);const dl=we;var Mr;let ot=Mr=class extends c{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Mr({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};r([o({type:Boolean,json:{write:!0}})],ot.prototype,"returnTopmostRaster",void 0),r([o({type:Boolean,json:{write:!0}})],ot.prototype,"showNoDataRecords",void 0),ot=Mr=r([a("esri.popup.LayerOptions")],ot);const hl=ot;var Or;let st=Or=class extends c{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new Or({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?u(this.orderByFields):null})}};r([o({type:Boolean,json:{write:!0}})],st.prototype,"showRelatedRecords",void 0),r([o({type:[Go],json:{write:!0}})],st.prototype,"orderByFields",void 0),st=Or=r([a("esri.popup.RelatedRecordsInfo")],st);const Gi=st;var Tr;let W=Tr=class extends Ds(He){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Tr({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};r([o()],W.prototype,"active",void 0),r([o()],W.prototype,"className",void 0),r([o()],W.prototype,"disabled",void 0),r([o()],W.prototype,"icon",void 0),r([o()],W.prototype,"id",void 0),r([o()],W.prototype,"indicator",void 0),r([o()],W.prototype,"title",void 0),r([o()],W.prototype,"type",void 0),r([o()],W.prototype,"visible",void 0),W=Tr=r([a("esri.support.actions.ActionBase")],W);const Fi=W;var _r;let Pt=_r=class extends Fi{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new _r({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};r([o()],Pt.prototype,"image",void 0),Pt=_r=r([a("esri.support.actions.ActionButton")],Pt);const ml=Pt;var Lr;let nt=Lr=class extends Fi{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new Lr({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};r([o()],nt.prototype,"image",void 0),r([o()],nt.prototype,"value",void 0),nt=Lr=r([a("esri.support.actions.ActionToggle")],nt);const fl=nt,Ye="relationships/",Bi="expression/",bl=b.ofType({key:"type",defaultKeyValue:"button",base:Fi,typeMap:{button:ml,toggle:fl}}),gl={base:ne,key:"type",typeMap:{media:$t,custom:Zn,text:St,attachments:wt,fields:vt,expression:rr,relationship:xt,utilityNetworkAssociations:ji}},Bo=new Set(["attachments","fields","media","text","expression","relationship"]),wl=new Set([...Bo,"utility-network-associations"]);let w=class extends V(c){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(t=>Zi(gl,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Is(e)?e:(he.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,i):this._readPopupInfo(t)}writeWebSceneContent(e,t,i,s){this._writePopupTemplateContent(e,t,s)}writeWebMapContent(e,t,i,s){this._writePopupTemplateContent(e,t,s)}writeFieldInfos(e,t,i,s){const{content:n}=this,l=Array.isArray(n)?n:null,{writeFieldFormat:p,...y}=s||{};if(e){const d=l?l.filter(m=>m.type==="fields"):[],F=d.length&&d.every(m=>m.fieldInfos?.length);t.fieldInfos=e.filter(Boolean).map(m=>{const I=m.toJSON(y);return F&&(I.visible=!1),I})}if(l)for(const d of l)d.type==="fields"&&this._writeFieldsContent(d,t,y)}writeLayerOptions(e,t,i,s){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,t){t.title=e||""}async collectRequiredFields(e,t,i){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,i,[...s,...this._getContentExpressionInfos(this.content,s)]),bt(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,t){const i=new Set;return await this.collectRequiredFields(i,e,t),[...i].sort()}_writePopupTemplateContent(e,t,i){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(s=>i?.origin==="web-scene"?Bo.has(s.type):wl.has(s.type)).map(s=>s?.toJSON(i)),t.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(t):s.type==="media"?this._writeMediaContent(s,t):s.type==="text"?this._writeTextContent(s,t):s.type==="relationship"&&this._writeRelationshipContent(s,t)})):t.description=e}_writeFieldsContent(e,t,i){const s=e.fieldInfos;if(!Array.isArray(s)||!s.length)return;const n=t.fieldInfos;if(Array.isArray(n))for(const l of s){const p=n.find(y=>y.fieldName?.toLowerCase()===l.fieldName?.toLowerCase());p?p.visible=!0:n.push(l.toJSON(i))}else t.fieldInfos=s.map(l=>l.toJSON(i))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,t){const i=e.orderByFields?.map(n=>this._toFieldOrderJSON(n,e.relationshipId))||[],s=[...t.relatedRecordsInfo?.orderByFields||[],...i];t.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=u(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements(e,t,i){const s={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!t||s.mediaInfos||(n.mediaInfos=t,s.mediaInfos=!0),$t.fromJSON(n)):n.type==="text"?(n.text||!e||s.description||(n.text=e,s.description=!0),St.fromJSON(n)):n.type==="attachments"?wt.fromJSON(n):n.type==="fields"?vt.fromJSON(n):n.type==="expression"?rr.fromJSON(n):n.type==="relationship"?xt.fromJSON(n):n.type==="utilityNetworkAssociations"?ji.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:t,order:i}=e;if(!t?.startsWith(Ye))return null;const s=t.replace(Ye,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),l=s[1];return!Number.isNaN(n)&&l?xt.fromJSON({relationshipId:n,orderByFields:[{field:l,order:i}]}):null}_toFieldOrderJSON(e,t){const{order:i,field:s}=e;return{field:`${Ye}${t}/${s}`,order:i}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];e?n.push(new St({text:e})):n.push(new vt),Array.isArray(t)&&t.length&&n.push($t.fromJSON({mediaInfos:t})),i&&n.push(wt.fromJSON({displayType:"auto"}));const{showRelatedRecords:l,orderByFields:p}=s;return l&&p?.length&&p.forEach(y=>{const d=this._toRelationshipContent(y);d&&n.push(d)}),n.length?n:e}_getContentElementFields(e){const t=e?.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return t==="text"?this._extractFieldNames(e.text):t==="relationship"||t==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:t,title:i,value:s}=e,n=s||{},{fields:l,normalizeField:p,tooltipField:y,sourceURL:d,linkURL:F}=n,m=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(d),...this._extractFieldNames(F),...l??[]];return p&&m.push(p),y&&m.push(y),m}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i,s){s&&await Promise.all(s.map(n=>Me(e,t,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:t,visible:i})=>!(i!==void 0&&!i||!t||t.startsWith(Ye)||t.startsWith(Bi))).map(t=>t.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:s}=e,n=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return Yn(e).filter(t=>!(t.startsWith(Ye)||t.startsWith(Bi)))}};r([o({type:bl})],w.prototype,"actions",void 0),r([o()],w.prototype,"content",void 0),r([Zt("content")],w.prototype,"castContent",null),r([se("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],w.prototype,"readContent",null),r([k("web-scene","content",{popupElements:{type:b.ofType(yl)},showAttachments:{type:Boolean},mediaInfos:{type:b.ofType(Sr)},description:{type:String},relatedRecordsInfo:{type:Gi}})],w.prototype,"writeWebSceneContent",null),r([k("content",{popupElements:{type:b.ofType(cl)},showAttachments:{type:Boolean},mediaInfos:{type:b.ofType(Sr)},description:{type:String},relatedRecordsInfo:{type:Gi}})],w.prototype,"writeWebMapContent",null),r([o({type:[dl],json:{write:!0}})],w.prototype,"expressionInfos",void 0),r([o({type:[Ro]})],w.prototype,"fieldInfos",void 0),r([k("fieldInfos")],w.prototype,"writeFieldInfos",null),r([o({type:hl})],w.prototype,"layerOptions",void 0),r([k("layerOptions")],w.prototype,"writeLayerOptions",null),r([o({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],w.prototype,"lastEditInfoEnabled",void 0),r([o()],w.prototype,"outFields",void 0),r([o()],w.prototype,"overwriteActions",void 0),r([o()],w.prototype,"returnGeometry",void 0),r([o({json:{type:String}})],w.prototype,"title",void 0),r([k("title")],w.prototype,"writeTitle",null),w=r([a("esri.PopupTemplate")],w);const vl=w;function Jo(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Uo(e){return e.points!==void 0}function Ho(e){return e.x!==void 0&&e.y!==void 0}function Ko(e){return e.paths!==void 0||e.curvePaths!==void 0}function Xo(e){return e.rings!==void 0||e.curveRings!==void 0}function Yo(e){return e==null?null:e instanceof ro?e:Ho(e)?hi.fromJSON(e):Ko(e)?bi.fromJSON(e):Xo(e)?Yt.fromJSON(e):Uo(e)?gi.fromJSON(e):Jo(e)?er.fromJSON(e):null}function wu(e){return e?Ho(e)?"esriGeometryPoint":Ko(e)?"esriGeometryPolyline":Xo(e)?"esriGeometryPolygon":Jo(e)?"esriGeometryEnvelope":Uo(e)?"esriGeometryMultipoint":null:null}const $l={esriGeometryPoint:hi,esriGeometryPolyline:bi,esriGeometryPolygon:Yt,esriGeometryEnvelope:er,esriGeometryMultipoint:gi,esriGeometryMultiPatch:Yt};function vu(e){return e&&$l[e]||null}const $u=Ke()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),xu=Ke()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),xl={base:ro,key:"type",typeMap:{extent:er,multipoint:gi,point:hi,polyline:bi,polygon:Yt}};function Su(e){return e.type==="point"}function ju(e){return e.type==="multipoint"}function Fu(e){return e.type==="polygon"}function Iu(e){return e.type==="polyline"}const Qo=Symbol("idFieldsProviderSymbol");function Sl(e){return!!e&&Qo in e}function Ji(e){return Sl(e)?e[Qo]:void 0}const Zo=Symbol("popupProvider");function Nu(e){return typeof e=="object"&&e!==null&&"popupEnabled"in e&&"popupTemplate"in e}function jl(e){return!!e&&Zo in e}function Fl(e){return jl(e)?e[Zo]:null}function Mu(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const i=[];for(const s of t.fieldNames)i.push(e.attributes[s]??null);return JSON.stringify(i)}}}function Ui(e,t){if("uniqueIdFields"in t&&t.uniqueIdFields?.length){if(t.uniqueIdFields.length===1)return e.attributes?.[t.uniqueIdFields[0]];const i=t.uniqueIdFields.map(s=>e.attributes?.[s]);return JSON.stringify(i)}return"objectIdField"in t&&t.objectIdField?e.attributes?.[t.objectIdField]:null}var zr;let A=zr=class extends D{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map(n=>{const l=n.valueExpressionInfo;return l?Me(e,t,null,l.expression):null});await Promise.all(s)}}}clone(){return new zr({data:u(this.data)})}hash(){return Ns(JSON.stringify(this.data)).toString()}};r([o({json:{write:!1}})],A.prototype,"color",void 0),r([o({json:{write:!0}})],A.prototype,"data",void 0),r([se("data",["symbol"])],A.prototype,"readData",null),r([k("data",{})],A.prototype,"writeData",null),r([h({CIMSymbolReference:"cim"},{readOnly:!0})],A.prototype,"type",void 0),A=zr=r([a("esri.symbols.CIMSymbol")],A);let N=class extends c{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,i,s){t||(i[s]=t)}};r([o({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],N.prototype,"enabled",void 0),r([k("enabled")],N.prototype,"writeEnabled",null),r([o({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],N.prototype,"type",void 0),N=r([a("esri.symbols.Symbol3DLayer")],N);function Il(e,t){const i=t.transparency!=null?As(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new $([s[0]||0,s[1]||0,s[2]||0,i]):null}function Nl(e,t){t.color=e.toJSON().slice(0,3);const i=Cs(e.a);i!==0&&(t.transparency=i)}function me(e){return{type:$,nonNullable:e?.nonNullable,json:{type:[M],default:null,read:{source:["color","transparency"],reader:Il},write:{target:{color:{type:[M],isRequired:e?.colorRequiredOnWrite},transparency:{type:M}},writer:Nl}}}}const X={type:Number,cast:g,json:{write:!0}};function Tu(e){return e==="emissive"?0:1}let ve=class extends c{constructor(t){super(t),this.color=new $([0,0,0,1]),this.extensionLength=0,this.size=Ue(1)}clone(){}cloneProperties(){return{color:u(this.color),size:this.size,extensionLength:this.extensionLength}}};r([o({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],ve.prototype,"type",void 0),r([o(me({colorRequiredOnWrite:!0}))],ve.prototype,"color",void 0),r([o({...X,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],ve.prototype,"extensionLength",void 0),r([o(X)],ve.prototype,"size",void 0),ve=r([a("esri.symbols.edges.Edges3D")],ve);const Ii=ve;var Cr;let Et=Cr=class extends Ii{constructor(e){super(e),this.type="sketch"}clone(){return new Cr(this.cloneProperties())}};r([h({sketch:"sketch"},{readOnly:!0})],Et.prototype,"type",void 0),Et=Cr=r([a("esri.symbols.edges.SketchEdges3D")],Et);const Ml=Et;var Ar;let qt=Ar=class extends Ii{constructor(e){super(e),this.type="solid"}clone(){return new Ar(this.cloneProperties())}};r([h({solid:"solid"},{readOnly:!0})],qt.prototype,"type",void 0),qt=Ar=r([a("esri.symbols.edges.SolidEdges3D")],qt);const Ol=qt,es={types:{key:"type",base:Ii,typeMap:{solid:Ol,sketch:Ml}},json:{write:!0}};var kr;let ze=kr=class extends c{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const e={strength:this.strength,source:this.source};return new kr(e)}};r([o({json:{write:!1}})],ze.prototype,"strength",void 0),r([o({json:{write:!1}})],ze.prototype,"source",void 0),ze=kr=r([a("esri.symbols.support.Symbol3DEmissive")],ze);var Dr;let q=Dr=class extends c{constructor(e){super(e),this.color=null,this.emissive=new ze({source:"emissive"})}clone(){const e={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new Dr(e)}};r([o(me())],q.prototype,"color",void 0),r([o({type:ze,json:{write:!1}})],q.prototype,"emissive",void 0),q=Dr=r([a("esri.symbols.support.Symbol3DMaterial")],q);var Rr,Re;let Z=(Re=class extends N{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Rr({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},Rr=Re,Re);r([h({Extrude:"extrude"},{readOnly:!0})],Z.prototype,"type",void 0),r([o({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Z.prototype,"size",void 0),r([o({type:q,json:{write:!0}})],Z.prototype,"material",void 0),r([o({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Z.prototype,"castShadows",void 0),r([o(es)],Z.prototype,"edges",void 0),Z=Rr=r([a("esri.symbols.ExtrudeSymbol3DLayer")],Z);let ct=class extends c{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};r([o({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ct.prototype,"type",void 0),ct=r([a("esri.symbols.patterns.LinePattern3D")],ct);const Tl=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var Pr;const _l=Ke()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Fe=Pr=class extends ct{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Pr(e)}};r([o({type:["style"],json:{write:{isRequired:!0}}})],Fe.prototype,"type",void 0),r([h(_l),o({type:Tl,json:{write:{isRequired:!0}}})],Fe.prototype,"style",void 0),Fe=Pr=r([a("esri.symbols.patterns.LineStylePattern3D")],Fe);let yt=class extends c{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};r([o({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],yt.prototype,"type",void 0),yt=r([a("esri.symbols.patterns.Pattern3D")],yt);const Ll=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Er;let Ce=Er=class extends yt{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new Er({style:this.style})}};r([o({type:["style"],json:{write:{isRequired:!0}}})],Ce.prototype,"type",void 0),r([o({type:Ll,json:{read:!0,write:{isRequired:!0}}})],Ce.prototype,"style",void 0),Ce=Er=r([a("esri.symbols.patterns.StylePattern3D")],Ce);const zl={types:{key:"type",base:yt,typeMap:{style:Ce}},json:{write:!0}},ts={types:{key:"type",base:ct,typeMap:{style:Fe}},json:{write:!0}},dt=new $("white"),Cl=new $([255,255,255,0]);function Al(e){return e.r===0&&e.g===0&&e.b===0}var qr;let ht=qr=class extends q{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new qr(e)}};r([h({multiply:"multiply",replace:"replace",tint:"tint"})],ht.prototype,"colorMixMode",void 0),ht=qr=r([a("esri.symbols.support.Symbol3DFillMaterial")],ht);function Ni(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function kl(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function Dl(e,t,i,s,n,l,p,y,d,F,m,I,ws,vs,$s,xs){return[e,t,i,s,n,l,p,y,d,F,m,I,ws,vs,$s,xs]}const Rl=Ni();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Rl,clone:kl,create:Ni,fromValues:Dl},Symbol.toStringTag,{value:"Module"}));function Pl(e){return e<=eo?new Array(e).fill(0):new Float64Array(e)}function Cu(e){return(Ms(e)?e.byteLength/8:e.length)<=eo?Array.from(e):new Float64Array(e)}function Au(e,t,i){return Array.isArray(e)?e.slice(t,t+i):e.subarray(t,t+i)}function ku(e){return[...e]}function Du(e){const t=Ni();for(let i=0;i<16;++i)t[i]=e[i];return t}function It(e=Wl){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function Mi(e,t,i,s,n,l,p=It()){return p[0]=e,p[1]=t,p[2]=i,p[3]=s,p[4]=n,p[5]=l,p}function Ru(e,t=It()){return El(e,0,e.length/3,t)}function El(e,t,i,s=It()){return rs(s,Vr),ql(s,e,t,i),s}function Pu(e,t=Pl(24)){const[i,s,n,l,p,y]=e;return t[0]=i,t[1]=s,t[2]=n,t[3]=i,t[4]=s,t[5]=y,t[6]=i,t[7]=p,t[8]=n,t[9]=i,t[10]=p,t[11]=y,t[12]=l,t[13]=s,t[14]=n,t[15]=l,t[16]=s,t[17]=y,t[18]=l,t[19]=p,t[20]=n,t[21]=l,t[22]=p,t[23]=y,t}function Eu(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new er(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function qu(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Vu(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function Wu(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function ql(e,t,i=0,s=t.length/3){let n=e[0],l=e[1],p=e[2],y=e[3],d=e[4],F=e[5];for(let m=0;m<s;m++)n=Math.min(n,t[i+3*m]),l=Math.min(l,t[i+3*m+1]),p=Math.min(p,t[i+3*m+2]),y=Math.max(y,t[i+3*m]),d=Math.max(d,t[i+3*m+1]),F=Math.max(F,t[i+3*m+2]);e[0]=n,e[1]=l,e[2]=p,e[3]=y,e[4]=d,e[5]=F}function Gu(e,t,i){const s=t.length;let n=e[0],l=e[1],p=e[2],y=e[3],d=e[4],F=e[5];if(i)for(let m=0;m<s;m++){const I=t[m];n=Math.min(n,I[0]),l=Math.min(l,I[1]),p=Math.min(p,I[2]),y=Math.max(y,I[0]),d=Math.max(d,I[1]),F=Math.max(F,I[2])}else for(let m=0;m<s;m++){const I=t[m];n=Math.min(n,I[0]),l=Math.min(l,I[1]),y=Math.max(y,I[0]),d=Math.max(d,I[1])}e[0]=n,e[1]=l,e[2]=p,e[3]=y,e[4]=d,e[5]=F}function Bu(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function Nt(e){return e[0]>=e[3]?0:e[3]-e[0]}function Mt(e){return e[1]>=e[4]?0:e[4]-e[1]}function Ot(e){return e[2]>=e[5]?0:e[5]-e[2]}function Ju(e){const t=Nt(e),i=Ot(e),s=Mt(e);return Math.sqrt(t*t+i*i+s*s)}function Uu(e,t=[0,0,0]){return t[0]=e[0]+Nt(e)/2,t[1]=e[1]+Mt(e)/2,t[2]=e[2]+Ot(e)/2,t}function Hu(e,t=[0,0,0]){return t[0]=Nt(e),t[1]=Mt(e),t[2]=Ot(e),t}function Ku(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function Vl(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function Xu(e,t){return t==null||Vl(e,t)}function Yu(e,t,i,s,n=e){return n[0]=e[0]+t,n[1]=e[1]+i,n[2]=e[2]+s,n[3]=e[3]+t,n[4]=e[4]+i,n[5]=e[5]+s,n}function Qu(e,t,i=e){const s=e[0]+Nt(e)/2,n=e[1]+Mt(e)/2,l=e[2]+Ot(e)/2;return i[0]=s+(e[0]-s)*t,i[1]=n+(e[1]-n)*t,i[2]=l+(e[2]-l)*t,i[3]=s+(e[3]-s)*t,i[4]=n+(e[4]-n)*t,i[5]=l+(e[5]-l)*t,i}function Zu(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ep(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function tp(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function rs(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function rp(e){return e?rs(e,Vr):It(Vr)}function ip(e,t=Js()){return t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function op(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function sp(e,t,i,s,n){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=s,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function Hi(e){return e.length===6}function np(e){return Nt(e)===0&&Mt(e)===0&&Ot(e)===0}function lp(e,t,i){if(e==null||t==null)return e===t;if(!Hi(e)||!Hi(t))return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}const Vr=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Wl=[0,0,0,0,0,0];It();function ap(e,{isPrimitive:t,width:i,depth:s,height:n}){const l=t?10:1;if(i==null&&n==null&&s==null)return[l*e[0],l*e[1],l*e[2]];const p=Us(i,s,n);let y;for(let d=0;d<3;d++){const F=p[d];if(F!=null){y=F/e[d];break}}for(let d=0;d<3;d++)p[d]==null&&(p[d]=e[d]*y);return p}const Gl=Mi(-.5,-.5,-.5,.5,.5,.5),Bl=Mi(-.5,-.5,0,.5,.5,1),Jl=Mi(-.5,-.5,0,.5,.5,.5);function up(e){switch(e){case"sphere":case"cube":case"diamond":return Gl;case"cylinder":case"cone":case"inverted-cone":return Bl;case"tetrahedron":return Jl;default:return}}const Oi=["butt","square","round"],Ul=[...Oi,"none"],is=["miter","bevel","round"];var Wr;let $e=Wr=class extends c{constructor(e){super(e),this.color=new $([0,0,0,1]),this.size=Ue(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new Wr(e)}};r([o(me({colorRequiredOnWrite:!0}))],$e.prototype,"color",void 0),r([o({...X,json:{write:{isRequired:!0}}})],$e.prototype,"size",void 0),r([o(ts)],$e.prototype,"pattern",void 0),r([o({type:Oi,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],$e.prototype,"patternCap",void 0),$e=Wr=r([a("esri.symbols.support.Symbol3DOutline")],$e);var Vt,Pe;let E=(Pe=class extends N{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Vt(t)}static fromSimpleFillSymbol(t){const i=t.outline&&t.outline.style&&t.outline.style!=="solid"?new Fe({style:t.outline.style}):null,s={size:t.outline?.width??0,color:(t.outline?.color??dt).clone(),pattern:i};return i&&t.outline?.cap&&(s.patternCap=t.outline.cap),new Vt({material:new ht({color:(t.color??Cl).clone()}),pattern:t.style&&t.style!=="solid"?new Ce({style:t.style}):null,outline:s})}},Vt=Pe,Pe);r([h({Fill:"fill"},{readOnly:!0})],E.prototype,"type",void 0),r([o({type:ht,json:{write:!0}})],E.prototype,"material",void 0),r([o(zl)],E.prototype,"pattern",void 0),r([o({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],E.prototype,"castShadows",void 0),r([o({type:$e,json:{write:!0}})],E.prototype,"outline",void 0),r([o(es)],E.prototype,"edges",void 0),E=Vt=r([a("esri.symbols.FillSymbol3DLayer")],E);var Gr;const Hl=Ke()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let xe=Gr=class extends c{constructor(e){super(e)}readHref(e,t,i){return e?mi(e,i):t.dataURI}writeHref(e,t,i,s){e&&(io(e)?t.dataURI=e:(t.href=oo(e,s),fi(t.href)&&(t.href=so(t.href))))}clone(){return new Gr({href:this.href,primitive:this.primitive})}equals(e){return e.primitive===this.primitive&&e.href===this.href}};r([o({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],xe.prototype,"href",void 0),r([se("href")],xe.prototype,"readHref",null),r([k("href",{href:{type:String},dataURI:{type:String}})],xe.prototype,"writeHref",null),r([h(Hl)],xe.prototype,"primitive",void 0),xe=Gr=r([a("esri.symbols.support.IconSymbol3DLayerResource")],xe);const pp="circle";let Wt=class extends V(c){constructor(t){super(t),this.mode="hidden"}equals(t){return this.mode===t.mode}};r([o({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],Wt.prototype,"mode",void 0),Wt=r([a("esri.symbols.support.OccludedVisibility")],Wt);const os=Wt;var Br;let Ae=Br=class extends He{constructor(e){super(e),this.x=0,this.y=0}clone(){return new Br({x:this.x,y:this.y})}equals(e){return e.x===this.x&&e.y===this.y}};r([o({type:Number})],Ae.prototype,"x",void 0),r([o({type:Number})],Ae.prototype,"y",void 0),Ae=Br=r([a("esri.symbols.support.Symbol3DAnchorPosition2D")],Ae);var Jr;let lt=Jr=class extends c{constructor(e){super(e),this.color=new $([0,0,0,1]),this.size=Ue(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new Jr(e)}equals(e){return e.size===this.size&&(this.color==null?e.color==null:this.color.equals(e.color))}};r([o(me({colorRequiredOnWrite:!0}))],lt.prototype,"color",void 0),r([o({...X,json:{write:{isRequired:!0}}})],lt.prototype,"size",void 0),lt=Jr=r([a("esri.symbols.support.Symbol3DIconOutline")],lt);var Le,Ee;let S=(Ee=class extends N{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new Le({anchor:this.anchor,anchorPosition:u(this.anchorPosition),enabled:this.enabled,material:u(this.material),outline:u(this.outline),resource:u(this.resource),angle:this.angle,size:this.size,occludedVisibility:u(this.occludedVisibility)})}static fromSimpleMarkerSymbol(t){const i=t.color||dt,s=Ki(t),n=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||dt).clone()}:null;return new Le({size:t.size,angle:t.angle,resource:{primitive:Xl(()=>he.getLogger(this.prototype),t.style)},material:{color:i},outline:n,anchor:s?"relative":void 0,anchorPosition:s})}static fromPictureMarkerSymbol(t){const i=!t.color||Al(t.color)?dt:t.color,s=Ki(t);return new Le({size:t.width<=t.height?t.height:t.width,angle:t.angle,resource:{href:t.url},material:{color:i.clone()},anchor:s?"relative":void 0,anchorPosition:s})}static fromCIMSymbol(t){return new Le({resource:{href:no({mediaType:"application/json",data:JSON.stringify(t.data)})}})}},Le=Ee,Ee);function Ki(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,s=Xi(e.xoffset),n=Xi(e.yoffset);return(s||n)&&t&&i?{x:-s/t,y:n/i}:null}function Xi(e){return isFinite(e)?e:0}r([o({type:q,json:{write:!0}})],S.prototype,"material",void 0),r([o({type:xe,json:{write:!0}})],S.prototype,"resource",void 0),r([h({Icon:"icon"},{readOnly:!0})],S.prototype,"type",void 0),r([o({...X,json:{write:{isRequired:!0}}})],S.prototype,"size",void 0),r([h({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],S.prototype,"anchor",void 0),r([o({type:Ae,json:{type:[Number],read:{reader:e=>new Ae({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],S.prototype,"anchorPosition",void 0),r([o({type:lt,json:{write:!0}})],S.prototype,"outline",void 0),r([o({type:Number,json:{write:!0,default:0}})],S.prototype,"angle",void 0),r([o({type:os})],S.prototype,"occludedVisibility",void 0),S=Le=r([a("esri.symbols.IconSymbol3DLayer")],S);const Kl={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Xl(e,t){return Kl[t]||(e().warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let ie=class extends V(c){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};r([o({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],ie.prototype,"type",void 0),r([o({type:Hs,json:{default:"begin-end",write:!0}})],ie.prototype,"placement",void 0),r([o({type:Ks,json:{default:"arrow",write:!0}})],ie.prototype,"style",void 0),r([o({type:$,json:{type:[M],default:null,write:!0}})],ie.prototype,"color",void 0),ie=r([a("esri.symbols.LineStyleMarker3D")],ie);var Gt,qe;let z=(qe=class extends N{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Ue(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Gt(t)}static fromSimpleLineSymbol(t){const i={enabled:!0,size:t.width??Ue(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style?new Fe({style:t.style}):null,material:new q({color:(t.color||dt).clone()}),marker:t.marker?new ie({placement:t.marker.placement,style:t.marker.style,color:t.marker.color?.clone()??null}):null};return new Gt(i)}},Gt=qe,qe);r([o({type:q,json:{write:!0}})],z.prototype,"material",void 0),r([h({Line:"line"},{readOnly:!0})],z.prototype,"type",void 0),r([o({type:is,json:{write:!0,default:"miter"}})],z.prototype,"join",void 0),r([o({type:Oi,json:{write:!0,default:"butt"}})],z.prototype,"cap",void 0),r([o({...X,json:{write:{isRequired:!0}}})],z.prototype,"size",void 0),r([o(ts)],z.prototype,"pattern",void 0),r([o({types:{key:"type",base:ie,typeMap:{style:ie}},json:{write:!0}})],z.prototype,"marker",void 0),z=Gt=r([a("esri.symbols.LineSymbol3DLayer")],z);var Ur;const Yl=Ke()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let at=Ur=class extends c{clone(){return new Ur({href:this.href,primitive:this.primitive})}};r([o({type:String,json:{read:lo,write:Xt}})],at.prototype,"href",void 0),r([h(Yl)],at.prototype,"primitive",void 0),at=Ur=r([a("esri.symbols.support.ObjectSymbol3DLayerResource")],at);const dp="sphere";var Hr;let je=Hr=class extends He{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Hr({x:this.x,y:this.y,z:this.z})}};r([o({type:Number})],je.prototype,"x",void 0),r([o({type:Number})],je.prototype,"y",void 0),r([o({type:Number})],je.prototype,"z",void 0),je=Hr=r([a("esri.symbols.support.Symbol3DAnchorPosition3D")],je);var Kr,Ve;let x=(Ve=class extends N{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new Kr({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},Kr=Ve,Ve);r([o({type:q,json:{write:!0}})],x.prototype,"material",void 0),r([o({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],x.prototype,"castShadows",void 0),r([o({type:at,json:{write:!0}})],x.prototype,"resource",void 0),r([h({Object:"object"},{readOnly:!0})],x.prototype,"type",void 0),r([o({type:Number,json:{write:!0}})],x.prototype,"width",void 0),r([o({type:Number,json:{write:!0}})],x.prototype,"height",void 0),r([o({type:Number,json:{write:!0}})],x.prototype,"depth",void 0),r([h({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],x.prototype,"anchor",void 0),r([o({type:je,json:{type:[Number],read:{reader:e=>new je({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],x.prototype,"anchorPosition",void 0),r([o({type:Number,json:{write:!0}})],x.prototype,"heading",void 0),r([o({type:Number,json:{write:!0}})],x.prototype,"tilt",void 0),r([o({type:Number,json:{write:!0}})],x.prototype,"roll",void 0),r([o({readOnly:!0})],x.prototype,"isPrimitive",null),x=Kr=r([a("esri.symbols.ObjectSymbol3DLayer")],x);var Xr,We;let j=(We=class extends N{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,i){return t??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(t,i){return t??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new Xr({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},Xr=We,We);r([o({type:q,json:{write:!0}})],j.prototype,"material",void 0),r([o({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],j.prototype,"castShadows",void 0),r([h({Path:"path"},{readOnly:!0})],j.prototype,"type",void 0),r([o({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],j.prototype,"profile",void 0),r([o({type:is,nonNullable:!0,json:{write:!0,default:"miter"}})],j.prototype,"join",void 0),r([o({type:Ul,nonNullable:!0,json:{write:!0,default:"butt"}})],j.prototype,"cap",void 0),r([o({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],j.prototype,"width",void 0),r([se("width",["width","size","height"])],j.prototype,"readWidth",null),r([o({type:Number,json:{write:!0}})],j.prototype,"height",void 0),r([se("height",["height","size","width"])],j.prototype,"readHeight",null),r([o({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],j.prototype,"anchor",void 0),r([o({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],j.prototype,"profileRotation",void 0),j=Xr=r([a("esri.symbols.PathSymbol3DLayer")],j);const Ql=["none","underline","line-through"],Zl=["normal","italic","oblique"],ea=["normal","lighter","bold","bolder"],ss={type:Number,cast:e=>{const t=to(e);return t===0?1:Ys(t,.1,4)},nonNullable:!0},ta=["left","right","center"],ra=["baseline","top","middle","bottom"],ns={type:ta,nonNullable:!0},ls={type:ra,nonNullable:!0},hp=8;var Yr;let G=Yr=class extends c{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return g(e)}clone(){return new Yr({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};r([o({type:Ql,json:{default:"none",write:!0}})],G.prototype,"decoration",void 0),r([o({type:String,json:{write:!0}})],G.prototype,"family",void 0),r([o({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],G.prototype,"size",void 0),r([Zt("size")],G.prototype,"castSize",null),r([o({type:Zl,json:{default:"normal",write:!0}})],G.prototype,"style",void 0),r([o({type:ea,json:{default:"normal",write:!0}})],G.prototype,"weight",void 0),G=Yr=r([a("esri.symbols.Font")],G);var Qr;let ke=Qr=class extends c{constructor(){super(...arguments),this.color=new $([0,0,0,1]),this.size=0}clone(){const e={color:u(this.color),size:this.size};return new Qr(e)}};r([o(me())],ke.prototype,"color",void 0),r([o(X)],ke.prototype,"size",void 0),ke=Qr=r([a("esri.symbols.support.Symbol3DHalo")],ke);let mt=class extends V(c){constructor(t){super(t),this.color=null}};r([o(me())],mt.prototype,"color",void 0),mt=r([a("esri.symbols.support.Symbol3DTextBackground")],mt);var Bt,Ge;let v=(Ge=class extends N{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,i,s,n){const l={...n,textSymbol3D:!0};i.font=t.write({},l),delete i.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new Bt({enabled:this.enabled,font:u(this.font),halo:u(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:u(this.background),occludedVisibility:u(this.occludedVisibility)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new Bt({font:t.font!=null?t.font.clone():new G,halo:ia(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new q({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new mt({color:t.backgroundColor.clone()}):null})}},Bt=Ge,Ge);function ia(e,t){return e&&t!=null&&t>0?new ke({color:u(e),size:t}):null}r([o({type:G,json:{write:!0}})],v.prototype,"font",null),r([k("font")],v.prototype,"writeFont",null),r([o({type:ke,json:{write:!0}})],v.prototype,"halo",void 0),r([o({...ns,json:{default:"center",write:!0}})],v.prototype,"horizontalAlignment",void 0),r([o({...ss,json:{default:1,write:!0}})],v.prototype,"lineHeight",void 0),r([o({type:q,json:{write:!0}})],v.prototype,"material",void 0),r([o({type:mt,json:{write:!0}})],v.prototype,"background",void 0),r([o(X)],v.prototype,"size",null),r([o({type:String,json:{write:!0}})],v.prototype,"text",void 0),r([h({Text:"text"},{readOnly:!0})],v.prototype,"type",void 0),r([o({...ls,json:{default:"baseline",write:!0}})],v.prototype,"verticalAlignment",void 0),r([o({type:os})],v.prototype,"occludedVisibility",void 0),v=Bt=r([a("esri.symbols.TextSymbol3DLayer")],v);var Zr,Be;let ee=(Be=class extends N{constructor(t){super(t),this.color=ei.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Zr({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},Zr=Be,Be);r([o({type:$,nonNullable:!0,json:{type:[M],write:(e,t,i)=>t[i]=e.toArray(1),default:()=>ei.clone(),defaultEquals:e=>e.toCss(!0)===ei.toCss(!0)}})],ee.prototype,"color",void 0),r([h({Water:"water"},{readOnly:!0})],ee.prototype,"type",void 0),r([o({type:["small","medium","large"],json:{write:!0,default:"medium"}})],ee.prototype,"waterbodySize",void 0),r([o({type:Number,json:{write:!0,default:null}})],ee.prototype,"waveDirection",void 0),r([o({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],ee.prototype,"waveStrength",void 0),ee=Zr=r([a("esri.symbols.WaterSymbol3DLayer")],ee);const ei=new $([0,119,190]);var ti;let oe=ti=class extends He{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new ti({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};r([o({type:String})],oe.prototype,"name",void 0),r([o({type:String})],oe.prototype,"styleUrl",void 0),r([o({type:String})],oe.prototype,"styleName",void 0),r([o({type:tr})],oe.prototype,"portal",void 0),oe=ti=r([a("esri.symbols.support.StyleOrigin")],oe);var ri;let ft=ri=class extends He{constructor(){super(...arguments),this.url=""}clone(){return new ri({url:this.url})}};r([o({type:String})],ft.prototype,"url",void 0),ft=ri=r([a("esri.symbols.support.Thumbnail")],ft);const as={icon:S,object:x,line:z,path:j,fill:E,extrude:Z,text:v,water:ee},oa=b.ofType({base:N,key:"type",typeMap:as,errorContext:"symbol-layer"});let C=class extends D{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,s=i?.type,n=s||b;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&he.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){Rs(t,this._get("symbolLayers"))}readStyleOrigin(t,i,s){if(t.styleUrl&&t.name){const n=mi(t.styleUrl,s);return new oe({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new oe({portal:s?.portal||tr.getDefault(),styleName:t.styleName,name:t.name});s?.messages&&s.messages.push(new Li("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:s,definition:t}))}writeStyleOrigin(t,i,s,n){if(t.styleUrl&&t.name){let l=oo(t.styleUrl,n);fi(l)&&(l=so(l)),i.styleOrigin={styleUrl:l,name:t.name}}else t.styleName&&t.name&&(t.portal&&n?.portal&&!Vs(t.portal.restUrl,n.portal.restUrl)?n?.messages&&n.messages.push(new Li("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof N||t&&as[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};r([o({json:{read:!1,write:!1}})],C.prototype,"color",null),r([o({type:oa,nonNullable:!0,json:{write:!0}}),Zt(Ps)],C.prototype,"symbolLayers",null),r([o({type:oe})],C.prototype,"styleOrigin",void 0),r([se("styleOrigin")],C.prototype,"readStyleOrigin",null),r([k("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],C.prototype,"writeStyleOrigin",null),r([o({type:ft,json:{read:!1}})],C.prototype,"thumbnail",void 0),r([o({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],C.prototype,"type",void 0),C=r([a("esri.symbols.Symbol3D")],C);let De=class extends c{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};r([o({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],De.prototype,"type",void 0),r([o({readOnly:!0})],De.prototype,"visible",void 0),De=r([a("esri.symbols.callouts.Callout3D")],De);var ii;let Jt=ii=class extends c{constructor(e){super(e),this.color=new $("white")}clone(){return new ii({color:u(this.color)})}};r([o(me({colorRequiredOnWrite:!0}))],Jt.prototype,"color",void 0),Jt=ii=r([a("esri.symbols.callouts.LineCallout3DBorder")],Jt);const sa=Jt;var oi;let te=oi=class extends De{constructor(e){super(e),this.type="line",this.color=new $([0,0,0,1]),this.size=Ue(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new oi({color:u(this.color),size:this.size,border:u(this.border)})}};r([h({line:"line"})],te.prototype,"type",void 0),r([o(me({colorRequiredOnWrite:!0}))],te.prototype,"color",void 0),r([o({...X,json:{write:{isRequired:!0}}})],te.prototype,"size",void 0),r([o({type:sa,json:{write:!0}})],te.prototype,"border",void 0),r([o({readOnly:!0})],te.prototype,"visible",null),te=oi=r([a("esri.symbols.callouts.LineCallout3D")],te);function Ti(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function us(e){return!e||!e.supportsCallout||!e.supportsCallout()?!1:!!e.callout?.visible&&!!Ti(e)}function bp(e){return e.type==="point-3d"||e.type==="label-3d"}function gp(e){return e.horizontalAlignment==="center"}const ps={types:{key:"type",base:De,typeMap:{line:te}},json:{write:!0}};var si;let ce=si=class extends c{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new si({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};r([o({...X,json:{write:{isRequired:!0}}})],ce.prototype,"screenLength",void 0),r([o({type:Number,nonNullable:!0,json:{write:!0,default:0}})],ce.prototype,"minWorldLength",void 0),r([o({type:Number,json:{write:!0}})],ce.prototype,"maxWorldLength",void 0),ce=si=r([a("esri.symbols.support.Symbol3DVerticalOffset")],ce);var Ut;const cs=b.ofType({base:null,key:"type",typeMap:{text:v}});let H=Ut=class extends C{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new cs,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return us(this)}hasVisibleVerticalOffset(){return Ti(this)}clone(){return new Ut({styleOrigin:u(this.styleOrigin),symbolLayers:u(this.symbolLayers),thumbnail:u(this.thumbnail),callout:u(this.callout),verticalOffset:u(this.verticalOffset)})}static fromTextSymbol(e){return new Ut({symbolLayers:new b([v.fromTextSymbol(e)])})}};r([o({type:ce,json:{write:!0}})],H.prototype,"verticalOffset",void 0),r([o(ps)],H.prototype,"callout",void 0),r([o({json:{read:!1,write:!1}})],H.prototype,"styleOrigin",void 0),r([o({type:cs})],H.prototype,"symbolLayers",void 0),r([h({LabelSymbol3D:"label-3d"},{readOnly:!0})],H.prototype,"type",void 0),H=Ut=r([a("esri.symbols.LabelSymbol3D")],H);var Ht;const ys=b.ofType({base:null,key:"type",typeMap:{line:z,path:j}}),na=b.ofType({base:null,key:"type",typeMap:{line:z,path:j}});let ye=Ht=class extends C{constructor(e){super(e),this.symbolLayers=new ys,this.type="line-3d"}clone(){return new Ht({styleOrigin:u(this.styleOrigin),symbolLayers:u(this.symbolLayers),thumbnail:u(this.thumbnail)})}static fromSimpleLineSymbol(e){return new Ht({symbolLayers:new b([z.fromSimpleLineSymbol(e)])})}};r([o({type:ys,json:{type:na}})],ye.prototype,"symbolLayers",void 0),r([h({LineSymbol3D:"line-3d"},{readOnly:!0})],ye.prototype,"type",void 0),ye=Ht=r([a("esri.symbols.LineSymbol3D")],ye);var Kt;const ds=b.ofType({base:null,key:"type",typeMap:{fill:E}});let Ie=Kt=class extends C{constructor(e){super(e),this.symbolLayers=new ds,this.type="mesh-3d"}clone(){return new Kt({styleOrigin:u(this.styleOrigin),symbolLayers:u(this.symbolLayers),thumbnail:u(this.thumbnail)})}static fromSimpleFillSymbol(e){return new Kt({symbolLayers:new b([E.fromSimpleFillSymbol(e)])})}};r([o({type:ds})],Ie.prototype,"symbolLayers",void 0),r([h({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Ie.prototype,"type",void 0),Ie=Kt=r([a("esri.symbols.MeshSymbol3D")],Ie);function la(e,t,i){return t.imageData?no({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):hs(t.url,i)}function hs(e,t){if(!fi(e)){const i=ua(t);if(i)return Gs(i,"images",e)}return mi(e,t)}function aa(e,t,i,s){if(io(e)){const n=Ws(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,i&&i.imageData===t.imageData&&i.url&&Xt(i.url,t,"url",s)}else Xt(e,t,"url",s)}const ms={json:{read:{source:["imageData","url"],reader:la},write:{writer(e,t,i,s){aa(e,t,this.source,s)}}}},fs={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const s={};return t.imageData&&(s.imageData=t.imageData),t.contentType&&(s.contentType=t.contentType),t.url&&(s.url=hs(t.url,i)),s}}}};function ua(e){if(!e)return null;const{origin:t,layer:i}=e;if(t!=="service"&&t!=="portal-item")return null;const s=i?.type;return s==="feature"||s==="stream"?i.parsedUrl?.path:s==="map-image"||s==="tile"?e.url?.path:null}var ni;let T=ni=class extends Xs{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,s){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),i!=null&&(n.width=g(i)),s!=null&&(n.height=g(s)),n}clone(){const e=new ni({color:u(this.color),height:this.height,outline:u(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",u(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};r([h({esriPFS:"picture-fill"},{readOnly:!0})],T.prototype,"type",void 0),r([o(ms)],T.prototype,"url",void 0),r([o({type:Number,json:{write:!0}})],T.prototype,"xscale",void 0),r([o({type:Number,json:{write:!0}})],T.prototype,"yscale",void 0),r([o({type:Number,cast:g,json:{write:!0}})],T.prototype,"width",void 0),r([o({type:Number,cast:g,json:{write:!0}})],T.prototype,"height",void 0),r([o({type:Number,cast:g,json:{write:!0}})],T.prototype,"xoffset",void 0),r([o({type:Number,cast:g,json:{write:!0}})],T.prototype,"yoffset",void 0),r([o(fs)],T.prototype,"source",void 0),T=ni=r([a("esri.symbols.PictureFillSymbol")],T);let re=class extends D{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};r([o({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],re.prototype,"angle",void 0),r([o({type:["simple-marker","picture-marker"],readOnly:!0})],re.prototype,"type",void 0),r([o({type:Number,cast:g,json:{write:!0}})],re.prototype,"xoffset",void 0),r([o({type:Number,cast:g,json:{write:!0}})],re.prototype,"yoffset",void 0),r([o({cast:e=>e==="auto"?e:to(g(e)),json:{write:!0}})],re.prototype,"size",void 0),re=r([a("esri.symbols.MarkerSymbol")],re);var li;let _=li=class extends re{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t!=null&&(s.width=g(t)),i!=null&&(s.height=g(i)),s}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new li({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",u(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};r([o({json:{write:!1}})],_.prototype,"color",void 0),r([h({esriPMS:"picture-marker"},{readOnly:!0})],_.prototype,"type",void 0),r([o(ms)],_.prototype,"url",void 0),r([o(fs)],_.prototype,"source",void 0),r([o({type:Number,cast:g,json:{write:!0}})],_.prototype,"height",void 0),r([se("height",["height","size"])],_.prototype,"readHeight",null),r([o({type:Number,cast:g,json:{write:!0}})],_.prototype,"width",void 0),r([o({json:{write:!1}})],_.prototype,"size",void 0),_=li=r([a("esri.symbols.PictureMarkerSymbol")],_);var Se;const bs=b.ofType({base:null,key:"type",typeMap:{icon:S,object:x,text:v}});let K=Se=class extends C{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new bs,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return us(this)}hasVisibleVerticalOffset(){return Ti(this)}clone(){return new Se({verticalOffset:u(this.verticalOffset),callout:u(this.callout),styleOrigin:u(this.styleOrigin),symbolLayers:u(this.symbolLayers),thumbnail:u(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Se({symbolLayers:new b([S.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Se({symbolLayers:new b([S.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){if(e.data?.symbol?.type!=="CIMPointSymbol")return null;const i=e.data.symbol;return new Se(i?.callout?{symbolLayers:new b([S.fromCIMSymbol(e)]),callout:new te({size:.5,color:new $([0,0,0])}),verticalOffset:new ce({screenLength:40})}:{symbolLayers:new b([S.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Se({symbolLayers:new b([v.fromTextSymbol(e)])})}};r([o({type:ce,json:{write:!0}})],K.prototype,"verticalOffset",void 0),r([o(ps)],K.prototype,"callout",void 0),r([o({type:bs,json:{origins:{"web-scene":{write:!0}}}})],K.prototype,"symbolLayers",void 0),r([h({PointSymbol3D:"point-3d"},{readOnly:!0})],K.prototype,"type",void 0),K=Se=r([a("esri.symbols.PointSymbol3D")],K);var ut;const gs=b.ofType({base:null,key:"type",typeMap:{extrude:Z,fill:E,icon:S,line:z,object:x,text:v,water:ee}});let de=ut=class extends C{constructor(e){super(e),this.symbolLayers=new gs,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&zi(he.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&zi(he.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Es(()=>this.symbolLayers,"after-add",({item:t})=>e(t),qs))}clone(){return new ut({styleOrigin:u(this.styleOrigin),symbolLayers:u(this.symbolLayers),thumbnail:u(this.thumbnail)})}static fromJSON(e){const t=new ut;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),s=t.symbolLayers.at(1);!s.enabled||e.symbolLayers?.[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new ut({symbolLayers:new b([E.fromSimpleFillSymbol(e)])})}};r([o({type:gs,json:{write:!0}})],de.prototype,"symbolLayers",void 0),r([h({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],de.prototype,"type",void 0),de=ut=r([a("esri.symbols.PolygonSymbol3D")],de);var ai;const pr=new yi({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let P=ai=class extends re{constructor(...e){super(...e),this.color=new $([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new jt}normalizeCtorArgs(e,t,i,s){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=g(t)),i&&(n.outline=i),s&&(n.color=s),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new ai({angle:this.angle,color:u(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};r([o()],P.prototype,"color",void 0),r([k("color")],P.prototype,"writeColor",null),r([h({esriSMS:"simple-marker"},{readOnly:!0})],P.prototype,"type",void 0),r([o()],P.prototype,"size",void 0),r([o({type:pr.apiValues,json:{read:pr.read,write:pr.write}})],P.prototype,"style",void 0),r([o({type:String,json:{write:!0}})],P.prototype,"path",null),r([o({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":jt}},json:{default:null,write:!0}})],P.prototype,"outline",void 0),P=ai=r([a("esri.symbols.SimpleMarkerSymbol")],P);var ui;let f=ui=class extends D{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new G,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.text=e),t&&(s.font=t),i&&(s.color=i),s}writeLineWidth(e,t,i,s){s&&typeof s!="string"?s.origin:t[i]=e}castLineWidth(e){return g(e)}writeLineHeight(e,t,i,s){s&&typeof s!="string"?s.origin:t[i]=e}clone(){return new ui({angle:this.angle,backgroundColor:u(this.backgroundColor),borderLineColor:u(this.borderLineColor),borderLineSize:this.borderLineSize,color:u(this.color),font:this.font&&this.font.clone(),haloColor:u(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};r([o({type:$,json:{write:!0}})],f.prototype,"backgroundColor",void 0),r([o({type:$,json:{write:!0}})],f.prototype,"borderLineColor",void 0),r([o({type:Number,json:{write:!0},cast:g})],f.prototype,"borderLineSize",void 0),r([o({type:G,json:{write:!0}})],f.prototype,"font",void 0),r([o({...ns,json:{write:!0}})],f.prototype,"horizontalAlignment",void 0),r([o({type:Boolean,json:{write:!0}})],f.prototype,"kerning",void 0),r([o({type:$,json:{write:!0}})],f.prototype,"haloColor",void 0),r([o({type:Number,cast:g,json:{write:!0}})],f.prototype,"haloSize",void 0),r([o({type:Boolean,json:{write:!0}})],f.prototype,"rightToLeft",void 0),r([o({type:Boolean,json:{write:!0}})],f.prototype,"rotated",void 0),r([o({type:String,json:{write:!0}})],f.prototype,"text",void 0),r([h({esriTS:"text"},{readOnly:!0})],f.prototype,"type",void 0),r([o({...ls,json:{write:!0}})],f.prototype,"verticalAlignment",void 0),r([o({type:Number,cast:g,json:{write:!0}})],f.prototype,"xoffset",void 0),r([o({type:Number,cast:g,json:{write:!0}})],f.prototype,"yoffset",void 0),r([o({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],f.prototype,"angle",void 0),r([o({type:Number,json:{write:!0}})],f.prototype,"width",void 0),r([o({type:Number})],f.prototype,"lineWidth",void 0),r([k("lineWidth")],f.prototype,"writeLineWidth",null),r([Zt("lineWidth")],f.prototype,"castLineWidth",null),r([o(ss)],f.prototype,"lineHeight",void 0),r([k("lineHeight")],f.prototype,"writeLineHeight",null),f=ui=r([a("esri.symbols.TextSymbol")],f);var pi;let L=pi=class extends D{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:tr.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?.portal,super.read(e,t)}clone(){return new pi({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol(e)}async fetchCIMSymbol(e){Os(he.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const t=await this._fetchSymbol({...e,acceptedFormats:["cim"]});if(t?.type!=="cim")throw new Qi("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,i=t?this._fetchCacheKey:null;if(t!=null){const p=i&&t.get(i);if(p)return p.clone()}const{resolveWebStyleSymbol:s}=await pt(()=>import("./H-XdHQIn.js"),__vite__mapDeps([44,45,3,8,9,10,46,20,11,21,47,48,49,19,7,50,51,52,53,54]),import.meta.url);Ts(e);const n=s(this,{portal:this.portal},e);n.catch(p=>{he.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",p)});const l=await n;return t?.set(i,l.clone()),l}};r([o({json:{write:!1}})],L.prototype,"color",void 0),r([o({type:String,json:{write:!0}})],L.prototype,"styleName",void 0),r([o({type:tr,json:{write:!1}})],L.prototype,"portal",void 0),r([o({type:String,json:{read:lo,write:Xt}})],L.prototype,"styleUrl",void 0),r([o({type:ft,json:{read:!1}})],L.prototype,"thumbnail",void 0),r([o({type:String,json:{write:!0}})],L.prototype,"name",void 0),r([h({styleSymbolReference:"web-style"},{readOnly:!0})],L.prototype,"type",void 0),r([o()],L.prototype,"_fetchCacheKey",null),L=pi=r([a("esri.symbols.WebStyleSymbol")],L);function wp(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function vp(e){switch(e?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const _i={base:D,key:"type",typeMap:{"simple-fill":wi,"picture-fill":T,"picture-marker":_,"simple-line":jt,"simple-marker":P,text:f,"label-3d":H,"line-3d":ye,"mesh-3d":Ie,"point-3d":K,"polygon-3d":de,"web-style":L,cim:A},errorContext:"symbol"},$p={base:D,key:"type",typeMap:{"picture-marker":_,"simple-marker":P,"point-3d":K,cim:A},errorContext:"symbol"},xp={base:D,key:"type",typeMap:{"simple-line":jt,"line-3d":ye,cim:A},errorContext:"symbol"},Sp={base:D,key:"type",typeMap:{"simple-fill":wi,"picture-fill":T,"polygon-3d":de,cim:A},errorContext:"symbol"},jp={base:D,key:"type",typeMap:{"picture-marker":_,"simple-marker":P,text:f,"web-style":L,cim:A},errorContext:"symbol"},Fp=_s({types:_i}),Ip={base:D,key:"type",typeMap:{"simple-fill":wi,"picture-fill":T,"picture-marker":_,"simple-line":jt,"simple-marker":P,text:f,"line-3d":ye,"mesh-3d":Ie,"point-3d":K,"polygon-3d":de,"web-style":L,cim:A},errorContext:"symbol"},Np={base:D,key:"type",typeMap:{text:f,"label-3d":H},errorContext:"symbol"},Mp={base:D,key:"type",typeMap:{"line-3d":ye,"mesh-3d":Ie,"point-3d":K,"polygon-3d":de,"web-style":L,cim:A},errorContext:"symbol"},Op={base:D,key:"type",typeMap:{"label-3d":H},errorContext:"symbol"},Tp=Zi(_i);var ci;function pa(e){if(!e)return null;const t={};for(const i in e){const s=Yo(e[i]);s&&(t[i]=s)}return Object.keys(t).length!==0?t:null}function ca(e){if(e==null)return null;const t={};for(const i in e){const s=e[i];s&&(t[i]=s.toJSON())}return Object.keys(t).length!==0?t:null}var Je;let O=(Je=class extends V(c){constructor(t){super(t),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:Ls(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&zs(he.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(t){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const i=this._get("attributes");i!==t&&(this._set("attributes",t),this._notifyLayer("attributes",i,t))}set geometry(t){const i=this._get("geometry");i!==t&&(this._set("geometry",t),t?.type!=="mesh"&&this._notifyLayer("geometry",i,t))}set popupTemplate(t){const i=this._get("popupTemplate");i!==t&&(this._set("popupTemplate",t),this._notifyLayer("popupTemplate",i,t))}set symbol(t){const i=this._get("symbol");i!==t&&(this._set("symbol",t),this._notifyLayer("symbol",i,t))}get version(){return this._version}set visible(t){const i=this._get("visible");i!==t&&(this._set("visible",t),this._notifyLayer("visible",i,t))}cloneShallow(){return new ci({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;const i=Fl(this.origin);if(i)return i.popupTemplate??(t?i.defaultPopupTemplate:null)??null;const s=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const n of[s,this.sourceLayer,this.layer])if(n&&typeof n=="object"){if("popupTemplate"in n&&n.popupTemplate)return n.popupTemplate;if(t&&"defaultPopupTemplate"in n&&n.defaultPopupTemplate!=null)return n.defaultPopupTemplate}return null}getAttribute(t){return this.attributes?.[t]}setAttribute(t,i){if(this.attributes){const s=this.getAttribute(t);this.attributes[t]=i,this._notifyLayer("attributes",s,i,t)}else this.attributes={[t]:i}}getObjectId(){const t=Ji(this.origin);if(t)return Ui(this,t);const i=this.sourceLayer??this.layer;return i?Ui(this,i):null}getGlobalId(){const t=Ji(this.origin);if(t?.globalIdField)return this.getAttribute(t.globalIdField);const i=this.sourceLayer??this.layer;return i&&"globalIdField"in i&&i.globalIdField?this.getAttribute(i.globalIdField):null}toJSON(){return{aggregateGeometries:ca(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Bs(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(t={}){const{geometry:i}=this;if(i?.type==="mesh"){const s={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",s,s,t.action)}}_notifyLayer(t,i,s,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const l={graphic:this,property:t,oldValue:i,newValue:s};t==="origin-transform"&&(l.action=n),t==="attributes"&&(l.attributeName=n),this.layer.graphicChanged(l)}_watchMeshGeometryChanges(){this.addHandles([Ci(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:t,origin:i})=>{this._lastMeshTransform.localMatrix===t&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=t,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())}),Ci(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const t=this.geometry;t?.type==="mesh"&&t.vertexSpace.origin?(this._lastMeshTransform.localMatrix=t.transform?.localMatrix,this._lastMeshTransform.origin=t.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(t,i)=>t===i,sync:!0})])}},ci=Je,Je);r([o({value:null,json:{read:pa}})],O.prototype,"aggregateGeometries",null),r([o({value:null})],O.prototype,"attributes",null),r([o({value:null,types:xl,json:{read:Yo}})],O.prototype,"geometry",null),r([o({type:Boolean})],O.prototype,"isAggregate",void 0),r([o({clonable:!1})],O.prototype,"layer",void 0),r([o({clonable:"reference"})],O.prototype,"origin",void 0),r([o({type:vl,value:null})],O.prototype,"popupTemplate",null),r([o({clonable:"reference"})],O.prototype,"sourceLayer",void 0),r([o({value:null,types:_i})],O.prototype,"symbol",null),r([o({clonable:!1,json:{read:!1,write:!1}})],O.prototype,"_version",void 0),r([o({type:Boolean,value:!0})],O.prototype,"visible",null),O=ci=r([a("esri.Graphic")],O);const _p=Object.freeze(Object.defineProperty({__proto__:null,get default(){return O}},Symbol.toStringTag,{value:"Module"}));export{ft as $,yu as A,iu as B,En as C,sp as D,qn as E,vi as F,P as G,_ as H,Pn as I,It as J,lp as K,Vr as L,qu as M,vl as N,op as O,xa as P,Jo as Q,Wn as R,tu as S,Qa as T,Ga as U,ru as V,Rn as W,$u as X,Xa as Y,vp as Z,O as _,ye as a,Ya as a$,oe as a0,Fa as a1,dp as a2,pp as a3,Hu as a4,up as a5,Oa as a6,Na as a7,Ft as a8,Ma as a9,xu as aA,Ne as aB,Xe as aC,ju as aD,Fu as aE,Iu as aF,Su as aG,Me as aH,bt as aI,fl as aJ,ml as aK,Fi as aL,Tp as aM,gt as aN,L as aO,Zs as aP,kl as aQ,te as aR,ce as aS,v as aT,sa as aU,ka as aV,dl as aW,Pu as aX,Ru as aY,Wl as aZ,Sa as a_,Ia as aa,Ta as ab,hp as ac,A as ad,f as ae,wp as af,q as ag,Rl as ah,rp as ai,Gu as aj,rs as ak,Vu as al,$i as am,_i as an,Au as ao,Cu as ap,Pl as aq,Du as ar,ku as as,Zo as at,Qo as au,Ca as av,Aa as aw,Mi as ax,Wu as ay,Eu as az,de as b,Tu as b$,Ip as b0,Op as b1,Np as b2,Nt as b3,Mt as b4,Ot as b5,es as b6,$p as b7,xp as b8,Sp as b9,Go as bA,pl as bB,Yn as bC,jp as bD,tl as bE,ir as bF,Ct as bG,ol as bH,Ja as bI,Ua as bJ,Ra as bK,wt as bL,ep as bM,tp as bN,rn as bO,np as bP,Uu as bQ,Yu as bR,Ku as bS,gp as bT,bp as bU,Bu as bV,ip as bW,Nu as bX,Xu as bY,Ae as bZ,ql as b_,_a as ba,S as bb,x as bc,ap as bd,La as be,H as bf,Fp as bg,Mp as bh,ja as bi,Fl as bj,Ha as bk,Pa as bl,Va as bm,Ea as bn,Wa as bo,qa as bp,Ba as bq,Da as br,G as bs,Qn as bt,Ro as bu,ll as bv,$t as bw,St as bx,vt as by,el as bz,za as c,Ju as c0,El as c1,Qu as c2,Zu as c3,Dl as c4,_p as c5,Ie as d,Ka as e,Yo as f,vo as g,Za as h,E as i,K as j,Ol as k,xl as l,z as m,mn as n,vu as o,Ni as p,eu as q,Ho as r,Ko as s,Hi as t,Uo as u,wu as v,Mu as w,Vn as x,Xo as y,ou as z};
