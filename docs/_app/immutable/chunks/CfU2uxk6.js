import{r as H,n as g}from"./BxwgeB65.js";import{o as h,_ as X,A,P as T,u as L,g as v,H as P,c as s}from"./BizNutXF.js";import"./BkQcsSCB.js";import{r as j,c as f,a as p}from"./CFgsMTgB.js";function rr(r){const n=r[0]*r[0]+r[4]*r[4]+r[8]*r[8],u=r[1]*r[1]+r[5]*r[5]+r[9]*r[9],I=r[2]*r[2]+r[6]*r[6]+r[10]*r[10];return Math.sqrt(Math.max(n,u,I))}function nr(r,n){const u=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),I=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),t=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return h(r,u,I,t),r}function k(r,n,u){Math.abs(r[0])>Math.abs(r[1])?h(n,0,1,0):h(n,1,0,0),X(u,r,n),X(n,u,r),A(u,u),A(n,n)}function x(r=_){return[r[0],r[1],r[2],r[3]]}function ur(r=_[0],n=_[1],u=_[2],I=_[3]){return d(r,n,u,I,j.get())}function w(r,n){return d(n[0],n[1],n[2],n[3],r)}function Ir(r){return r}function d(r,n,u,I,t=x()){return t[0]=r,t[1]=n,t[2]=u,t[3]=I,t}function z(r,n,u){const I=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],t=Math.abs(I-1)>1e-5&&I>1e-12?1/Math.sqrt(I):1;return u[0]=n[0]*t,u[1]=n[1]*t,u[2]=n[2]*t,u[3]=-(u[0]*r[0]+u[1]*r[1]+u[2]*r[2]),u}function G(r,n,u,I=x()){const t=u[0]-n[0],c=u[1]-n[1],o=u[2]-n[2],e=r[0]-n[0],D=r[1]-n[1],O=r[2]-n[2],S=c*O-o*D,$=o*e-t*O,R=t*D-c*e,q=S*S+$*$+R*R,b=Math.abs(q-1)>1e-5&&q>1e-12?1/Math.sqrt(q):1;return I[0]=S*b,I[1]=$*b,I[2]=R*b,I[3]=-(I[0]*r[0]+I[1]*r[1]+I[2]*r[2]),I}function y(r,n,u,I=0,t=Math.floor(u*(1/3)),c=Math.floor(u*(2/3))){if(u<3)return!1;n(M,I);let o=t,e=!1;for(;o<u-1&&!e;)n(a,o),o++,e=!P(M,a);if(!e)return!1;for(o=Math.max(o,c),e=!1;o<u&&!e;)n(E,o),o++,s(U,M,a),A(U,U),s(l,a,E),A(l,l),e=!P(M,E)&&!P(a,E)&&Math.abs(T(U,l))<J;return e?(G(M,a,E,r),!0):(I!==0||t!==1||c!==2)&&y(r,n,u,0,1,2)}function tr(r,n,u=!0){const I=n.length/3;return y(r,((t,c)=>h(t,n[3*c+0],n[3*c+1],n[3*c+2])),u?I-1:I)}const J=.99619469809,M=g(),a=g(),E=g(),U=g(),l=g();function er(r,n,u){return n!==r&&w(r,n),r[3]=-T(r,u),r}function or(r,n){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=-r[3],n}function cr(r,n,u,I){return X(E,n,r),z(u,E,I)}function Nr(r,n,u,I){return m(F(r,n,s(f.get(),u,n),Q,I))}function ir(r,n,u){return n!=null&&m(F(r,n.origin,n.direction,V,u))}function fr(r,n,u){return m(F(r,n.origin,n.vector,i.NONE,u))}function Er(r,n,u){return m(F(r,n.origin,n.vector,i.CLAMP,u))}function ar(r,n){return C(r,n)>=0}function sr(r,n){const u=T(r,n.ray.direction),I=-C(r,n.ray.origin);if(u>-1e-6&&u<1e-6)return I>0;const t=I/u;return u>0?t<n.c1&&(n.c1=t):t>n.c0&&(n.c0=t),n.c0<=n.c1}function Tr(r,n,u){const I=v(f.get(),r,-r[3]),t=K(r,s(f.get(),n,I),f.get());return L(u,t,I),u}function Sr(r,n,u,I){const t=r,c=f.get(),o=f.get();k(t,c,o);const e=s(f.get(),u,n),D=p(c,e),O=p(o,e),S=p(t,e);return h(I,D,O,S)}function K(r,n,u){const I=v(f.get(),r,T(r,n));return s(u,n,I),u}function Mr(r,n){return Math.abs(C(r,n))}function C(r,n){return T(r,n)+r[3]}var N;function m(r){return r===N.INTERSECTS_INSIDE_OUT||r===N.INTERSECTS_OUTSIDE_IN}function F(r,n,u,I,t){const c=T(r,u),o=C(r,n);if(c===0)return o>=0?N.INSIDE:N.OUTSIDE;let e=-o/c;return I&i.CLAMP&&(e=H(e,0,1)),!(I&i.INFINITE_MIN)&&e<0||!(I&i.INFINITE_MAX)&&e>1?o>=0?N.INSIDE:N.OUTSIDE:(L(t,n,v(t,u,e)),o>=0?N.INTERSECTS_INSIDE_OUT:N.INTERSECTS_OUTSIDE_IN)}(function(r){r[r.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",r[r.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",r[r.INSIDE=2]="INSIDE",r[r.OUTSIDE=3]="OUTSIDE"})(N||(N={}));const _=[0,0,1,0];var i;(function(r){r[r.NONE=0]="NONE",r[r.CLAMP=1]="CLAMP",r[r.INFINITE_MIN=4]="INFINITE_MIN",r[r.INFINITE_MAX=8]="INFINITE_MAX"})(i||(i={}));const Q=i.INFINITE_MIN|i.INFINITE_MAX,V=i.INFINITE_MAX;export{tr as A,ur as D,sr as G,Tr as H,Sr as J,or as L,x as M,Ir as O,cr as P,Mr as Q,d as U,C as V,k as a,nr as g,w as h,Nr as k,z as l,rr as m,G as p,ir as q,y as v,Er as w,fr as x,er as y,ar as z};
