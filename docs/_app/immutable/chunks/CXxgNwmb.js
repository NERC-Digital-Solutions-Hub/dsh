const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DsRi2o3o.js","./Cg-g7sfq.js","./BsH20_Vs.js","./-2w9DGWe.js","./CbSHxjnO.js","./DEfw6_ef.js","./PPVm8Dsz.js","./CuDkSQ9K.js","./BvZUr92_.js","./DiDKkOPS.js","./ClNG7cqw.js","./CrVPmpa8.js","./DEofI9xF.js","./H0QphIdm.js","./CYlsogSb.js","./CupCqN7H.js","./Cosuz3XB.js","./5_UtZh6F.js","./DRBpbFTt.js","./FGXSRGVg.js","./v-Ii51UH.js","./bnayRBMH.js","./BXgHj_R5.js","./PH2Saedy.js"])))=>i.map(i=>d[i]);
import{n as j,_ as s,m as o,b as w,r as v,a as S,d as U,l as P}from"./DEfw6_ef.js";import{e as h,I as _,O as A,D as $,g as V,l as J,w as M}from"./CYlsogSb.js";import{_ as O}from"./PPVm8Dsz.js";import{z as I,f as g,H as z}from"./CbSHxjnO.js";import{i as L,s as b}from"./Cg-g7sfq.js";import{s as B}from"./H0QphIdm.js";import{u as k}from"./DiDKkOPS.js";import{I as q}from"./CuDkSQ9K.js";import{s as C}from"./BsH20_Vs.js";async function F(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await O(async()=>{const{fromItem:n}=await import("./DsRi2o3o.js");return{fromItem:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url);try{return await r(t)}catch(n){const i=t?.portalItem,l=i?.id||"unset",u=i?.portal?.url||C.portalUrl;throw L.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+u+"', id: '"+l+"')",n),n}}const T={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function f(e,t,r,n=h){const i=new _(A(n)),l=$.fromJSDate(e,{zone:i}),u=r==="decades"||r==="centuries"?"year":N(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),l.plus({[u]:t}).toJSDate()}function it(e,t,r="milliseconds"){const n=e.getTime(),i=G(t,r,"milliseconds");return new Date(n+i)}function D(e,t,r=h){const n=new _(A(r)),i=$.fromJSDate(e,{zone:n});if(t==="decades"||t==="centuries"){const u=i.startOf("year"),{year:d}=u,x=d-d%(t==="decades"?10:100);return u.set({year:x}).toJSDate()}const l=N(t);return i.startOf(l).toJSDate()}function G(e,t,r){return e===0?0:e*T[t]/T[r]}function st(e,t){return e&&t?e.intersection(t):e||t}function N(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var c,m;let p=(m=class extends j{static get allTime(){return E}static get empty(){return R}static fromArray(t){return new c({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,r){return r.end!=null?new Date(r.end):null}writeEnd(t,r){r.end=t?.getTime()??null}get isAllTime(){return this.equals(c.allTime)}get isEmpty(){return this.equals(c.empty)}readStart(t,r){return r.start!=null?new Date(r.start):null}writeStart(t,r){r.start=t?.getTime()??null}clone(){return new c({end:this.end,start:this.start})}equals(t){if(!t)return!1;const r=this.start?.getTime()??this.start,n=this.end?.getTime()??this.end,i=t.start?.getTime()??t.start,l=t.end?.getTime()??t.end;return r===i&&n===l}expandTo(t,r=h){if(this.isEmpty||this.isAllTime)return this.clone();let n=this.start;n&&(n=D(n,t,r));let i=this.end;if(i){const l=D(i,t,r);i=i.getTime()===l.getTime()?l:f(l,1,t,r)}return new c({start:n,end:i})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return c.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const r=this.start?.getTime()??-1/0,n=this.end?.getTime()??1/0,i=t.start?.getTime()??-1/0,l=t.end?.getTime()??1/0;let u,d;return i>=r&&i<=n?u=i:r>=i&&r<=l&&(u=r),n>=i&&n<=l?d=n:l>=r&&l<=n&&(d=l),u==null||d==null||isNaN(u)||isNaN(d)?c.empty:new c({start:u===-1/0?null:new Date(u),end:d===1/0?null:new Date(d)})}offset(t,r,n=h){if(this.isEmpty||this.isAllTime)return this.clone();const i=new c,{start:l,end:u}=this;return l!=null&&(i.start=f(l,t,r,n)),u!=null&&(i.end=f(u,t,r,n)),i}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return E.clone();const r=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,n=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new c({start:r,end:n})}},c=m,m);s([o({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),s([w("end")],p.prototype,"readEnd",null),s([v("end")],p.prototype,"writeEnd",null),s([o({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),s([o({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),s([o({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),s([w("start")],p.prototype,"readStart",null),s([v("start")],p.prototype,"writeStart",null),p=c=s([S("esri.time.TimeExtent")],p);const E=new p,R=new p({start:void 0,end:void 0});let H=0,a=class extends V(B(k)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new I(-180,-90,180,90,g.WGS84),this.id=Date.now().toString(16)+"-layer-"+H++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=g.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await O(async()=>{const{fromUrl:r}=await import("./PH2Saedy.js");return{fromUrl:r}},__vite__mapDeps([23,6,1,2,7,4,5,3,8,9,10,11,12,13,14,15,17]),import.meta.url)).fromUrl(t)}static fromPortalItem(e){return F(e)}initialize(){this.when().catch(e=>{U(e)||L.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return q(this.url)}createLayerView(e,t){return Promise.reject(new b("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await z(e,{query:{f:"json"},responseType:"json"})).data;throw new b("layer:no-attribution-data","Layer does not have attribution data")}};s([o({type:String})],a.prototype,"attributionDataUrl",void 0),s([o({readOnly:!0})],a.prototype,"effectiveVisible",null),s([o({type:I})],a.prototype,"fullExtent",void 0),s([o({readOnly:!0})],a.prototype,"hasAttributionData",null),s([o({type:String,clonable:!1})],a.prototype,"id",void 0),s([o({type:Boolean,nonNullable:!0})],a.prototype,"legendEnabled",void 0),s([o({type:["show","hide","hide-children"]})],a.prototype,"listMode",void 0),s([o({type:Number,range:{min:0,max:1},nonNullable:!0})],a.prototype,"opacity",void 0),s([o({clonable:!1})],a.prototype,"parent",void 0),s([o({readOnly:!0})],a.prototype,"parsedUrl",null),s([o({type:Boolean,readOnly:!0})],a.prototype,"persistenceEnabled",void 0),s([o({type:Boolean})],a.prototype,"popupEnabled",void 0),s([o({type:Boolean})],a.prototype,"attributionVisible",void 0),s([o({type:g})],a.prototype,"spatialReference",void 0),s([o({type:String})],a.prototype,"title",void 0),s([o({readOnly:!0,json:{read:!1}})],a.prototype,"type",void 0),s([o()],a.prototype,"url",void 0),s([o({type:p})],a.prototype,"visibilityTimeExtent",void 0),s([o({type:Boolean,nonNullable:!0})],a.prototype,"visible",void 0),a=s([S("esri.layers.Layer")],a);const at=Object.freeze(Object.defineProperty({__proto__:null,get default(){return a}},Symbol.toStringTag,{value:"Module"})),y=new WeakMap;function W(e){return!e.destroyed&&(y.has(e)||e.addHandles([J(()=>{const{parent:t}=e;return!!(t&&t instanceof a)&&(t.type==="catalog-dynamic-group"||W(t))},t=>y.set(e,t),M),P(()=>y.delete(e))]),y.get(e))}function ot(e,t){const r=e.parent,{layer:n}=e;if(n?.type!=="map-image"||!n.sourceJSON||!r)return!1;const i=n.sourceJSON.layers;if(!i)return!1;const l=i.find(d=>e.id===d.id),u=t==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return l?.type===u&&i.find(d=>d.id===r.id)?.type==="Catalog Layer"}export{at as L,f as a,a as b,G as c,ot as d,st as g,it as i,p as m,W as o,T as r};
