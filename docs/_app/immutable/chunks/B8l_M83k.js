import{c as E,a as h}from"./CB8wlU_f.js";import{s as c}from"./BYatcg2i.js";import{I as p,R as N}from"./CbAk7Q2g.js";import{C as U}from"./Bstk8l7f.js";import{i as d}from"./DedWa6hQ.js";import{a as D}from"./nDOBqX6c.js";import{S as I,a as S,l as w}from"./DwIAbcbk.js";import{p as O,m as $,i as M,y as R,h as x}from"./Byb_ddQ1.js";const z=["web-gltf","web","cim"];function A(t,e,l){const o=t.name;return o==null?Promise.reject(new c("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?W(o,e,l):M(t,e,l).then((n=>P(n,o,e,R,l)))}function v(t,e){return e.items.find((l=>l.name===t))}async function P(t,e,l,o,n){const a=l?.portal!=null?l.portal:U.getDefault(),m={portal:a,url:p(t.baseUrl)},s=v(e,t.data);if(!s)throw new c("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});const b=n?.acceptedFormats??z,f=o(s,b);if(!f)throw new c("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${e}' does not have an accepted format (one of ${b})`,{symbolName:e});const{url:T,format:_}=f;let i=d(T,m),y=s.thumbnail?.href??null;const u=s.thumbnail?.imageData;E()&&(i=h(i)??"",y=h(y));const j={portal:a,url:p(N(i)),origin:"portal-item"};return O(i,n).then((g=>{const F=_==="cim"?$(g.data):g.data,r=D(F,j);if(r&&I(r)){if(y){const C=d(y,m);r.thumbnail=new S({url:C})}else u&&(r.thumbnail=new S({url:`data:image/png;base64,${u}`}));t.styleUrl?r.styleOrigin=new w({portal:l.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(r.styleOrigin=new w({portal:l.portal,styleName:t.styleName,name:e}))}return r}))}function W(t,e,l){const o=x.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:U.getDefault();return O(o,l).then((a=>{const m=$(a.data);return D(m,{portal:n,url:p(N(o)),origin:"portal-item"})}))}const Q=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:P,getStyleItemFromStyle:v,resolveWebStyleSymbol:A},Symbol.toStringTag,{value:"Module"}));export{z as e,v as g,A as h,P as j,Q as w};
