import{b as _,h as l,c as d,a1 as h,Y as g,ag as m,E as y,e as E,a5 as o,aE as w,i as p,K as q,t as v,aF as F}from"./T9jfipYW.js";function T(t,r,...n){var e=t,s=o,u;_(()=>{s!==(s=r())&&(u&&(w(u),u=null),u=E(()=>s(e,...n)))},y),l&&(e=p)}function k(t){return(r,...n)=>{var e=t(...n),s;if(l)s=p,d();else{var u=e.render().trim(),f=h(u);s=q(f),r.before(s)}const i=e.setup?.(s);g(s,s),typeof i=="function"&&m(i)}}function R(t,r,n){if(t==null)return r(void 0),o;const e=v(()=>t.subscribe(r,n));return e.unsubscribe?()=>e.unsubscribe():e}const c=[];function x(t,r=o){let n=null;const e=new Set;function s(i){if(F(t,i)&&(t=i,n)){const b=!c.length;for(const a of e)a[1](),c.push(a,t);if(b){for(let a=0;a<c.length;a+=2)c[a][0](c[a+1]);c.length=0}}}function u(i){s(i(t))}function f(i,b=o){const a=[i,b];return e.add(a),e.size===1&&(n=r(s,u)||o),i(t),()=>{e.delete(a),e.size===0&&n&&(n(),n=null)}}return{set:s,update:u,subscribe:f}}function z(t){let r;return R(t,n=>r=n)(),r}export{R as a,k as c,z as g,T as s,x as w};
