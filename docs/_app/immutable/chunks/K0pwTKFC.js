import{t as W,s as v,a as pe,L as me}from"./C6k8CR_f.js";const de=/\{([^}]+)\}/g;function M(e){return e??""}function xt(e,t){return t?e.replaceAll(de,typeof t=="object"?(n,r)=>M(W(r,t)):(n,r)=>M(t(r))):e}function Ot(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,(n=>t?.includes(n)?n:`\\${n}`))}function ge(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}let E;function bt(e){return E??=new DOMParser,E.parseFromString(e||"","text/html").body.innerText||""}function Ut(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function Ct(e,...t){let n=e[0];for(let r=0;r<t.length;++r)n+=t[r]+e[r+1];return n}const J={info:0,warn:1,error:2,none:3};var l;let z=(l=class{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,l._loggers.set(this.module,this);const n=this.module.lastIndexOf(".");n!==-1&&(this._parent=l.getLogger(this.module.slice(0,n)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,l._loggers.get(t)||new l({module:t})}_log(t,n,...r){if(this._matchLevel(t)){if(n!=="always"&&!l._throttlingDisabled){const s=we(r),o=this._loggedMessages[t].get(s);if(n==="once"&&o!=null||n==="oncePerTick"&&o&&o>=l._tickCounter)return;this._loggedMessages[t].set(s,l._tickCounter),l._scheduleTickCounterIncrement()}for(const s of v.log.interceptors)if(s(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,n){let r=this;for(;r!=null;){const s=r[t];if(s!=null)return s;r=r.parent}return n}_inheritedWriter(){return this._parentWithMember("writer",ye)}_matchLevel(t){const n=v.log.level||"warn";return J[this._parentWithMember("level",n)]<=J[t]}static _scheduleTickCounterIncrement(){l._tickCounterScheduled||(l._tickCounterScheduled=!0,Promise.resolve().then((()=>{l._tickCounter++,l._tickCounterScheduled=!1})))}},l._loggers=new Map,l._tickCounter=0,l._tickCounterScheduled=!1,l._throttlingDisabled=!1,l);function ye(e,t,...n){console[e](`[${t}]`,...n)}function we(...e){return ge(JSON.stringify(e,(n,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}function $e(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((n,r)=>r===""?"$":(W(r,t)??"").toString()))}let xe=class{constructor(t,n,r=void 0){this.name=t,this.details=r,this.message=(n&&$e(n,r))??""}toString(){return"["+this.name+"]: "+this.message}},Q=class F extends xe{constructor(t,n,r){super(t,n,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((t,n)=>{if(n&&typeof n=="object"&&typeof n.toJSON=="function")return n;try{return pe(n)}catch{return"[object]"}})))}}catch(t){throw z.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new F(t.name,t.message,t.details)}};Q.prototype.type="error";function D(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}const Oe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,be={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function S(e){const t=e?.match(Oe);if(!t)return null;const[,n,r,s]=t;if(!n)return null;let o=null,i=null,c=null;const{devext:f,qaext:h,www:w}=be;if(r)if(o=n,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:i,portalHostname:c}=f);break;case"qa":({customBaseUrl:i,portalHostname:c}=h);break;default:return null}else({customBaseUrl:i,portalHostname:c}=w);else switch(n.toLowerCase()){case"devext":({customBaseUrl:i,portalHostname:c}=f);break;case"qaext":({customBaseUrl:i,portalHostname:c}=h);break;case"www":({customBaseUrl:i,portalHostname:c}=w);break;default:return null}return{customBaseUrl:i,isPortal:!1,portalHostname:c,urlKey:o}}function vt(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function St(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,n=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):n.test(e)?e=e.replace(n,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}function Ue(e){const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}function Ce(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}const Pe=()=>z.getLogger("esri.core.urlUtils"),g=v.request,N="esri/config: esriConfig.request.proxyUrl is not set.",G=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,V=/^\s*http:/i,K=/^\s*https:/i,ve=/^\s*file:/i,X=/:\d+$/,Se=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,qe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Re=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");class m{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let n=this.uri.match(qe);this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),this.authority!=null&&(n=this.authority.match(Re),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}toString(){return this.uri}}const O={},Y=new m(v.applicationUrl);let a=Y;const Z=Ae();let U=Z;const Te=()=>a,ke=()=>U;function Ae(){const e=a.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${a.scheme}://${a.host}${a.port!=null?`:${a.port}`:""}`}${t}`}const _e={setAppUrl:e=>a=e,setAppBaseUrl:e=>U=e,restoreUrls:()=>{a=Y,U=Z}};function p(e){if(!e)return null;const t={path:null,query:null},n=new m(e),r=e.indexOf("?");return n.query===null?t.path=e:(t.path=e.slice(0,r),t.query=B(n.query)),n.fragment&&(t.hash=n.fragment,n.query===null&&(t.path=t.path.slice(0,t.path.length-(n.fragment.length+1)))),t}function B(e){const t=e.split("&"),n={};for(const r of t){if(!r)continue;const s=r.indexOf("=");let o,i;s<0?(o=decodeURIComponent(r),i=""):(o=decodeURIComponent(r.slice(0,s)),i=decodeURIComponent(r.slice(s+1)));let c=n[o];typeof c=="string"&&(c=n[o]=[c]),Array.isArray(c)?c.push(i):n[o]=i}return n}function P(e,t){return e?t&&typeof t=="function"?Object.keys(e).map((n=>encodeURIComponent(n)+"="+encodeURIComponent(t(n,e[n])))).join("&"):Object.keys(e).map((n=>{const r=e[n];if(r==null)return"";const s=encodeURIComponent(n)+"=",o=t?.[n];return o?s+encodeURIComponent(o(r)):Array.isArray(r)?r.map((i=>D(i)?s+encodeURIComponent(JSON.stringify(i)):s+encodeURIComponent(i))).join("&"):D(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)})).filter((n=>n)).join("&"):""}function ee(e=!1){let t,n=g.proxyUrl;if(typeof e=="string"){t=ce(e);const r=k(e);r&&(n=r.proxyUrl)}else t=!!e;if(!n)throw Pe().warn(N),new Q("urlUtils:proxy-not-set",N);return t&&R()&&(n=I(n)),p(n)}function Le(e,t=!1){const n=k(e);let r,s;if(n){const o=H(n.proxyUrl);r=o.path,s=o.query?B(o.query):null}else if(t){const o=ee(e);r=o.path,s=o.query}if(r){const o=p(e);e=r+"?"+o.path;const i=P({...s,...o.query});i&&(e=`${e}?${i}`)}return e}const x={path:"",query:""};function H(e){const t=e.indexOf("?");return t!==-1?(x.path=e.slice(0,t),x.query=e.slice(t+1)):(x.path=e,x.query=null),x}function te(e){return e=(e=T(e=ue(e=H(e).path),!0)).toLowerCase()}function je(e){const t={proxyUrl:e.proxyUrl,urlPrefix:te(e.urlPrefix)},n=g.proxyRules,r=t.urlPrefix;let s=n.length;for(let o=0;o<n.length;o++){const i=n[o].urlPrefix;if(r.indexOf(i)===0){if(r.length===i.length)return-1;s=o;break}i.indexOf(r)===0&&(s=o+1)}return n.splice(s,0,t),s}function k(e){const t=g.proxyRules,n=te(e);for(let r=0;r<t.length;r++)if(n.indexOf(t[r].urlPrefix)===0)return t[r]}function Be(e,t){if(!e||!t)return!1;e=d(e),t=d(t);const n=S(e),r=S(t);return n!=null&&r!=null?n.portalHostname===r.portalHostname:n==null&&r==null&&q(e,t,!0)}function He(e,t){if(!e||!t)return!1;e=d(e),t=d(t);const n=S(e),r=S(t);return n!=null&&r!=null&&n.portalHostname===r.portalHostname}function Ie(e,t){return e=d(e),t=d(t),T(e)===T(t)}function d(e){const t=(e=b(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function Me(e,t=g.interceptors){const n=r=>r instanceof RegExp?r.test(e):typeof r=="string"?e.startsWith(r):r==null;if(t){for(const r of t)if(Array.isArray(r.urls)){if(r.urls.some(n))return r}else if(n(r.urls))return r}return null}function q(e,t,n=!1){if(!e||!t)return!1;const r=j(e),s=j(t);return!(!n&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function Ee(e){if(typeof e=="string"){if(!y(e))return!0;e=j(e)}if(q(e,a))return!0;const t=g.trustedServers||[];for(let n=0;n<t.length;n++){const r=Je(t[n]);for(let s=0;s<r.length;s++)if(q(e,r[s]))return!0}return!1}function Je(e){return O[e]||(_(e)||u(e)?O[e]=[new m(A(e))]:O[e]=[new m(`http://${e}`),new m(`https://${e}`)]),O[e]}function A(e,t=U,n){return u(e)?n?.preserveProtocolRelative?e:a.scheme==="http"&&a.authority===re(e).slice(2)?`http:${e}`:`https:${e}`:_(e)?e:ne(e[0]==="/"?et(t):t,e)}function De(e,t=U,n){if(e==null||!y(e))return e;const r=b(e),s=r.toLowerCase(),o=b(t).toLowerCase().replace(/\/+$/,""),i=n?b(n).toLowerCase().replace(/\/+$/,""):null;if(i&&o.indexOf(i)!==0)return e;const c=($,he,L)=>(L=$.indexOf(he,L))===-1?$.length:L;let f=c(s,"/",s.indexOf("//")+2),h=-1;for(;s.slice(0,f+1)===o.slice(0,f)+"/"&&(h=f+1,f!==s.length);)f=c(s,"/",f+1);if(h===-1||i&&h<i.length)return e;e=r.slice(h);const w=o.slice(h-1).replaceAll(/[^/]+/g,"").length;if(w>0)for(let $=0;$<w;$++)e=`../${e}`;else e=`./${e}`;return e}function b(e){return e=it(e=ot(e=st(e=A(e=e.trim()))))}function ne(...e){const t=e.filter(me);if(!t?.length)return;const n=[];if(y(t[0])){const s=t[0],o=s.indexOf("//");o!==-1&&(n.push(s.slice(0,o+1)),Xe(t[0])&&(n[0]+="/"),t[0]=s.slice(o+2))}else t[0][0]==="/"&&n.push("");const r=t.reduce(((s,o)=>o?s.concat(o.split("/")):s),[]);for(let s=0;s<r.length;s++){const o=r[s];o===".."&&n.length>0&&n[n.length-1]!==".."?n.pop():(!o&&s===r.length-1||o&&(o!=="."||n.length===0))&&n.push(o)}return n.join("/")}function re(e,t=!1){if(e==null||se(e)||oe(e))return null;let n=e.indexOf("://");if(n===-1&&u(e))n=2;else{if(n===-1)return null;n+=3}const r=e.indexOf("/",n);return r!==-1&&(e=e.slice(0,r)),t&&(e=T(e,!0)),e}function y(e){return u(e)||_(e)}function se(e){return e!=null&&e.slice(0,5)==="blob:"}function oe(e){return e!=null&&e.slice(0,5)==="data:"}function ie(e){const t=C(e);return t?.isBase64?Ue(t.data):null}function Ne(e){return Ce(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const We=/^data:(.*?)(;base64)?,(.*)$/;function C(e){const t=e.match(We);if(!t)return null;const[,n,r,s]=t;return{mediaType:n,isBase64:!!r,data:s}}function ze(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function Qe(e){return(await fetch(e)).blob()}function le(e){const t=ie(e);if(!t)return null;const n=C(e);return new Blob([t],{type:n.mediaType})}function Fe(e,t){Ve(e,t)}function Ge(e,t){ae(e,t)}function Ve(e,t){const n=le(e);return!!n&&ae(n,t)}function ae(e,t){if(!e)return!1;const n=document.createElement("a");if(!("download"in n))return!1;const r=URL.createObjectURL(e);return n.download=t,n.href=r,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),!0}function u(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function _(e){return e!=null&&G.test(e)}function ce(e){return e!=null&&K.test(e)||a.scheme==="https"&&u(e)}function Ke(e){return e!=null&&V.test(e)||a.scheme==="http"&&u(e)}function Xe(e){return e!=null&&ve.test(e)}function Ye(e){return u(e)?`http:${e}`:e.replace(K,"http:")}function I(e){return u(e)?`https:${e}`:e.replace(V,"https:")}function Ze(){return a.scheme==="http"}function R(){return a.scheme==="https"}function T(e,t=!1){return u(e)?e.slice(2):(e=e.replace(G,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function et(e){const t=e.indexOf("//"),n=e.indexOf("/",t+2);return n===-1?e:e.slice(0,n)}function tt(e){let t=0;if(y(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const n=e.lastIndexOf("/");return n<t?e:e.slice(0,n+1)}function nt(e,t){if(!e)return"";const n=p(e).path.replace(/\/+$/,""),r=n.slice(n.lastIndexOf("/")+1);if(!t?.length)return r;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return r.replace(s,"")}function ue(e){return e.endsWith("/")?e:`${e}/`}function rt(e){return e.replace(/\/+$/,"")}function st(e){if(/^https?:\/\//i.test(e)){const t=H(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function ot(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function it(e){const t=g.httpsDomains;if(!Ke(e))return e;const n=e.indexOf("/",7);let r;if(r=n===-1?e:e.slice(0,n),r=r.toLowerCase().slice(7),X.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return Ze()&&r===a.authority&&!Se.test(e)||(R()&&r===a.authority||t&&t.some((s=>r===s||r.endsWith(`.${s}`)))||R()&&!k(e))&&(e=I(e)),e}function lt(e,t,n){if(!(t&&n&&e&&y(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),o=e.indexOf(":",r+2),i=Math.min(s<0?e.length:s,o<0?e.length:o);return e.slice(r+2,i).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${n}${e.slice(i)}`}function at(e,t){const n=new URL(e);return n.host=t,n.port&&!X.test(t)&&(n.port=""),n.toString()}function ct(e){return new URL(e).host}function j(e){return typeof e=="string"?new m(A(e)):(e.scheme||(e.scheme=a.scheme),e)}function ut(e){return wt.test(e)}function ft(e,t){const n=p(e),r=Object.keys(n.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function ht(e,t,n){const r=p(e),s=r.query||{};return s[t]=String(n),`${r.path}?${P(s)}`}function pt(e,t){if(!t)return e;const n=p(e),r=n.query||{};for(const[o,i]of Object.entries(t))i!=null&&(r[o]=i);const s=P(r);return s?`${n.path}?${s}`:n.path}function mt(e,t){const{path:n,query:r}=p(e);if(!r)return e;delete r[t];const s=P(r);return s?`${n}?${s}`:n}function dt(e){if(e==null)return null;const t=e.match(fe);return t?t[2]:null}function gt(e){if(e==null)return null;const t=e.match(fe);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function yt(e){return typeof e=="string"?C(e)??{data:e}:new Promise(((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(C(r.result)),r.onerror=s=>n(s)}))}const fe=/([^.]*)\.([^/]*)$/,wt=/(^data:image\/svg|\.svg$)/i,qt=Object.freeze(Object.defineProperty({__proto__:null,Url:m,addProxy:Le,addProxyRule:je,addQueryParameter:ht,addQueryParameters:pt,base64UrlEncode:Ne,blobUrlToBlob:Qe,changeDomain:lt,changeHost:at,dataComponents:C,dataToArrayBuffer:ie,dataToBlob:le,downloadBlobAsFile:Ge,downloadDataAsFile:Fe,ensureTrailingSlash:ue,getAppBaseUrl:ke,getAppUrl:Te,getFilename:nt,getHost:ct,getInterceptor:Me,getOrigin:re,getPathExtension:dt,getProxyRule:k,getProxyUrl:ee,hasProtocol:_,hasSameCanonicalArcGISOnlinePortal:He,hasSameCanonicalPortal:Be,hasSameOrigin:q,hasSamePortal:Ie,isAbsolute:y,isAppHTTPS:R,isBlobProtocol:se,isDataProtocol:oe,isHTTPSProtocol:ce,isProtocolRelative:u,isSVG:ut,isTrustedServer:Ee,join:ne,makeAbsolute:A,makeData:ze,makeRelative:De,normalize:b,objectToQuery:P,parseData:yt,queryToObject:B,removeFile:tt,removeQueryParameter:mt,removeQueryParameters:ft,removeTrailingSlash:rt,splitPathExtension:gt,test:_e,toHTTP:Ye,toHTTPS:I,trustedServersUrlCache:O,urlToObject:p},Symbol.toStringTag,{value:"Module"}));export{I as $,B as A,S as B,ue as C,Ie as D,le as E,q as F,De as G,pt as H,p as I,at as J,b as K,ut as L,Ut as M,Me as N,ht as O,ct as P,lt as Q,tt as R,Te as S,k as T,gt as U,ne as V,dt as W,re as X,y as Y,se as Z,A as _,z as a,ft as a0,Ee as a1,ee as a2,je as a3,xe as a4,Ct as a5,qt as a6,Ue as b,Be as c,Ot as d,ce as e,yt as f,ze as g,oe as h,Qe as i,bt as j,Le as k,ge as l,St as m,ie as n,C as o,u as p,nt as q,xt as r,Q as s,D as t,Ne as u,P as v,vt as w,m as x,rt as y,ke as z};
