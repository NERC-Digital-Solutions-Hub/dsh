import{D as l,_ as O,a as f,E as m,F as M,r as u,p as w,c as d,G as E}from"./ChMEnlEh.js";import{a as S}from"./DUQhet5j.js";import{n as g}from"./D8DYOP_H.js";import{o as J}from"./Ckkezzl2.js";class _{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(l),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new _,t=this._originStores[0];t&&t.forEach((r,s)=>{i.set(s,S(r),0)});for(let r=2;r<l;r++){const s=this._originStores[r];s&&s.forEach((o,n)=>{e&&e.has(n)||i.set(n,S(o),r)})}return i}get(e,i){const t=i===void 0?this._values:this._originStores[i];return t?t.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,t=7){let r=this._originStores[t];if(r||(r=new Map,this._originStores[t]=r),r.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=t){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),s!==i}return!1}delete(e,i=7){const t=this._originStores[i];if(!t)return;const r=t.get(e);if(t.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return r}has(e,i){const t=i===void 0?this._values:this._originStores[i];return!!t&&t.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const t=this._originStores[i],r=t?.get(e),s=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,i),s!==r}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}}const y=a=>{const e=a;let i=class extends e{constructor(...t){super(...t);const r=g(this),s=r.store,o=new _;r.store=o,m(r,s,o)}read(t,r){M(this,t,r)}getAtOrigin(t,r){const s=p(this),o=u(r);if(typeof t=="string")return s.get(t,o);const n={};return t.forEach(h=>{n[h]=s.get(h,o)}),n}originOf(t){return w(this.originIdOf(t))}originIdOf(t){return p(this).originOf(t)}revert(t,r){const s=p(this),o=u(r),n=g(this);let h;h=typeof t=="string"?t==="*"?s.keys(o):[t]:t,h.forEach(c=>{n.invalidate(c),s.revert(c,o),n.commit(c)})}};return i=O([f("esri.core.ReadOnlyMultiOriginJSONSupport")],i),i};function p(a){return g(a).store}y(d);const N=a=>{const e=a;let i=class extends e{constructor(...t){super(...t)}clear(t,r="user"){g(this).clearOrigin(t,u(r))}write(t,r){return E(this,t=t||{},r),t}setAtOrigin(t,r,s){g(this).setAtOrigin(t,r,u(s))}removeOrigin(t){const r=v(this),s=u(t),o=r.keys(s);for(const n of o)r.originOf(n)===s&&r.set(n,r.get(n,s),7)}updateOrigin(t,r){const s=v(this),o=u(r),n=J(this,t);for(let h=o+1;h<l;++h)s.delete(t,h);s.set(t,n,o)}toJSON(t){return this.write({},t)}};return i=O([f("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function v(a){return g(a).store}const k=a=>{const e=N(y(a));let i=class extends e{};return i=O([f("esri.core.MultiOriginJSONSupport")],i),i},D=k(d);export{k as l,D as m};
