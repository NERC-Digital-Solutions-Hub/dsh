import{aG as m,av as A,ar as d,v as i,af as I,aI as N,aJ as p}from"./3T7gpIC7.js";import{i as T,B as R,b as K,a as O,c as C,t as W,d as B,e as M,A as y,f as b,g as E,h as S,E as F,H as P}from"./DOmZ76rk.js";function a(r){let e=m(A(r));return{[R]:!0,[T]:!0,get current(){return i(e)},set current(t){d(e,t,!0)}}}a.from=K;a.with=O;a.flatten=C;a.readonly=W;a.isBox=B;a.isWritableBox=M;class U extends Map{#e=new Map;#t=m(0);#r=m(0);#i=N||-1;constructor(e){if(super(),e){for(var[t,s]of e)super.set(t,s);this.#r.v=super.size}}#s(e){return N===this.#i?m(e):I(e)}has(e){var t=this.#e,s=t.get(e);if(s===void 0){var n=super.get(e);if(n!==void 0)s=this.#s(0),t.set(e,s);else return i(this.#t),!1}return i(s),!0}forEach(e,t){this.#n(),super.forEach(e,t)}get(e){var t=this.#e,s=t.get(e);if(s===void 0){var n=super.get(e);if(n!==void 0)s=this.#s(0),t.set(e,s);else{i(this.#t);return}}return i(s),super.get(e)}set(e,t){var s=this.#e,n=s.get(e),o=super.get(e),u=super.set(e,t),c=this.#t;if(n===void 0)n=this.#s(0),s.set(e,n),d(this.#r,super.size),p(c);else if(o!==t){p(n);var f=c.reactions===null?null:new Set(c.reactions),v=f===null||!n.reactions?.every(g=>f.has(g));v&&p(c)}return u}delete(e){var t=this.#e,s=t.get(e),n=super.delete(e);return s!==void 0&&(t.delete(e),d(this.#r,super.size),d(s,-1),p(this.#t)),n}clear(){if(super.size!==0){super.clear();var e=this.#e;d(this.#r,0);for(var t of e.values())d(t,-1);p(this.#t),e.clear()}}#n(){i(this.#t);var e=this.#e;if(this.#r.v!==e.size){for(var t of super.keys())if(!e.has(t)){var s=this.#s(0);e.set(t,s)}}for([,s]of this.#e)i(s)}keys(){return i(this.#t),super.keys()}values(){return this.#n(),super.values()}entries(){return this.#n(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return i(this.#r),super.size}}function _(r){return window.getComputedStyle(r).getPropertyValue("direction")}function H(r="ltr",e="horizontal"){return{horizontal:r==="rtl"?E:b,vertical:S}[e]}function D(r="ltr",e="horizontal"){return{horizontal:r==="rtl"?b:E,vertical:y}[e]}function G(r="ltr",e="horizontal"){return["ltr","rtl"].includes(r)||(r="ltr"),["horizontal","vertical"].includes(e)||(e="horizontal"),{nextKey:H(r,e),prevKey:D(r,e)}}const L=typeof document<"u",j=q();function q(){return L&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function V(r){return r instanceof HTMLElement}function Q(r){return r instanceof Element}function X(r){return r instanceof Element||r instanceof SVGElement}function Y(r){return r!==null}function Z(r){return r instanceof HTMLInputElement&&"select"in r}class k{#e;#t=a(null);constructor(e){this.#e=e}getCandidateNodes(){return this.#e.rootNode.current?this.#e.candidateSelector?Array.from(this.#e.rootNode.current.querySelectorAll(this.#e.candidateSelector)):this.#e.candidateAttr?Array.from(this.#e.rootNode.current.querySelectorAll(`[${this.#e.candidateAttr}]:not([data-disabled])`)):[]:[]}focusFirstCandidate(){const e=this.getCandidateNodes();e.length&&e[0]?.focus()}handleKeydown(e,t,s=!1){const n=this.#e.rootNode.current;if(!n||!e)return;const o=this.getCandidateNodes();if(!o.length)return;const u=o.indexOf(e),c=_(n),{nextKey:f,prevKey:v}=G(c,this.#e.orientation.current),g=this.#e.loop.current,x={[f]:u+1,[v]:u-1,[P]:0,[F]:o.length-1};if(s){const w=f===S?b:S,z=v===y?E:y;x[w]=u+1,x[z]=u-1}let l=x[t.key];if(l===void 0)return;t.preventDefault(),l<0&&g?l=o.length-1:l===o.length&&g&&(l=0);const h=o[l];if(h)return h.focus(),this.#t.current=h.id,this.#e.onCandidateFocus?.(h),h}getTabIndex(e){const t=this.getCandidateNodes(),s=this.#t.current!==null;return e&&!s&&t[0]===e?(this.#t.current=e.id,0):e?.id===this.#t.current?0:-1}setCurrentTabStopId(e){this.#t.current=e}focusCurrentTabStop(){const e=this.#t.current;if(!e)return;const t=this.#e.rootNode.current?.querySelector(`#${e}`);!t||!V(t)||t.focus()}}export{k as R,U as S,Q as a,Z as b,V as c,j as d,Y as e,X as f,L as i};
