import{A as l,a as f,b as h,c as d,E as N,H as v}from"./CCy6JwwH.js";import{aG as A,ax as E,ar as T,v as w}from"./CRVpP9yN.js";import{i as I,B as R,b as K,a as O,c as C,t as W,d as B,e as z}from"./CLKpSLI2.js";function r(e){let t=A(E(e));return{[R]:!0,[I]:!0,get current(){return w(t)},set current(n){T(t,n,!0)}}}r.from=K;r.with=O;r.flatten=C;r.readonly=W;r.isBox=B;r.isWritableBox=z;function F(e){return window.getComputedStyle(e).getPropertyValue("direction")}function P(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?h:f,vertical:d}[t]}function H(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?f:h,vertical:l}[t]}function D(e="ltr",t="horizontal"){return["ltr","rtl"].includes(e)||(e="ltr"),["horizontal","vertical"].includes(t)||(t="horizontal"),{nextKey:P(e,t),prevKey:H(e,t)}}const G=typeof document<"u",k=M();function M(){return G&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function L(e){return e instanceof HTMLElement}function $(e){return e instanceof Element}function U(e){return e instanceof Element||e instanceof SVGElement}function j(e){return e!==null}function J(e){return e instanceof HTMLInputElement&&"select"in e}class Q{#t;#e=r(null);constructor(t){this.#t=t}getCandidateNodes(){return this.#t.rootNode.current?this.#t.candidateSelector?Array.from(this.#t.rootNode.current.querySelectorAll(this.#t.candidateSelector)):this.#t.candidateAttr?Array.from(this.#t.rootNode.current.querySelectorAll(`[${this.#t.candidateAttr}]:not([data-disabled])`)):[]:[]}focusFirstCandidate(){const t=this.getCandidateNodes();t.length&&t[0]?.focus()}handleKeydown(t,n,c=!1){const m=this.#t.rootNode.current;if(!m||!t)return;const o=this.getCandidateNodes();if(!o.length)return;const a=o.indexOf(t),p=F(m),{nextKey:y,prevKey:g}=D(p,this.#t.orientation.current),x=this.#t.loop.current,u={[y]:a+1,[g]:a-1,[v]:0,[N]:o.length-1};if(c){const b=y===d?f:d,S=g===l?h:l;u[b]=a+1,u[S]=a-1}let i=u[n.key];if(i===void 0)return;n.preventDefault(),i<0&&x?i=o.length-1:i===o.length&&x&&(i=0);const s=o[i];if(s)return s.focus(),this.#e.current=s.id,this.#t.onCandidateFocus?.(s),s}getTabIndex(t){const n=this.getCandidateNodes(),c=this.#e.current!==null;return t&&!c&&n[0]===t?(this.#e.current=t.id,0):t?.id===this.#e.current?0:-1}setCurrentTabStopId(t){this.#e.current=t}focusCurrentTabStop(){const t=this.#e.current;if(!t)return;const n=this.#t.rootNode.current?.querySelector(`#${t}`);!n||!L(n)||n.focus()}}export{Q as R,$ as a,J as b,L as c,k as d,j as e,U as f,G as i};
