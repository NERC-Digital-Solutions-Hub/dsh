const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/COzYCy8P.js","../chunks/Bc_TmxSc.js","../chunks/DOBtub6T.js","../assets/index.CQED0rIl.css","../chunks/4u0wcz6f.js","../chunks/C6pzAkdR.js","../chunks/CHwVPrQX.js","../chunks/DXGw_0Ww.js","../chunks/DHAweUE4.js","../chunks/HTOW8iPe.js","../chunks/CYB2EK_d.js","../chunks/CdDXOJ3Y.js","../chunks/CEIZYuf2.js","../chunks/DYslx7It.js","../chunks/DuIgqnlY.js","../chunks/D-Nm-cDg.js","../chunks/DaQyK3nQ.js","../chunks/Dex61Jy7.js","../chunks/BCXDwddQ.js","../chunks/D1sKJjB8.js","../chunks/CDGqq53N.js","../chunks/BzZgUCJc.js","../chunks/C9_KfL0q.js","../chunks/COT3swUQ.js","../chunks/C3oh_tnt.js","../chunks/PPVm8Dsz.js","../chunks/Cad-p0g1.js","../assets/component-utils.R4SXog4D.css","../chunks/BBnDJw94.js","../chunks/BzQEzIrU.js","../chunks/ByYe5JNT.js","../chunks/NEmuse4e.js","../chunks/B87vTgcy.js","../chunks/bnayRBMH.js","../chunks/CPwmGbun.js","../chunks/CicY3o9G.js","../chunks/Bcsiu1z4.js","../chunks/clW6bTka.js","../chunks/CY1ScL2v.js","../chunks/fh0BQpDQ.js","../chunks/DHehJAQP.js","../chunks/BqBW39kE.js","../chunks/BPKnb2Ep.js","../chunks/Ncy6WYEt.js","../chunks/Bsvdop-J.js","../chunks/DY7bJyoW.js","../chunks/DyeKTZUU.js","../chunks/CZ1cFYIj.js","../chunks/CwswxHzg.js","../chunks/DmK00UBb.js","../chunks/BsJbwhv8.js","../chunks/Cm7AOsqL.js","../chunks/C_1gjxB4.js","../chunks/BNR3I_eR.js","../chunks/Cp_8tW2x.js","../chunks/Dy3IPmu3.js","../chunks/C-nwrPug.js","../chunks/C0wm8_Yw.js","../chunks/B0eu-fbb.js","../chunks/B92oQJPd.js","../chunks/BP3dapwT.js","../chunks/9ka9skRU.js","../chunks/DL5OcIt-.js","../chunks/Cgb6qxNH.js","../chunks/BNEZVyfC.js","../chunks/iGtE-x7J.js","../chunks/BMEoQDn3.js","../chunks/CjvOpC9P.js","../chunks/BaNElx7S.js","../chunks/CaVKkSa6.js","../chunks/BzPGhKjT.js","../chunks/BW5FX2Vq.js","../chunks/B1N-tmtC.js","../chunks/BirX00qr.js","../chunks/y-H9M8xu.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/Bxxl7NsE.js","../chunks/DWdJ8y7A.js","../chunks/DQOO6RKE.js","../chunks/CpKt4gnm.js","../chunks/Bi6C4OG6.js","../chunks/C7e3Z5XT.js","../chunks/D-YQ4CHs.js","../chunks/Bs6xTxvz.js","../chunks/C6j0c8D7.js","../chunks/BnIkuiB_.js","../chunks/BobhZSEo.js","../chunks/DGRj8LLO.js","../chunks/BuFC1hBS.js","../chunks/Di9axRGX.js","../chunks/BcU1P1CV.js","../chunks/BkaRJQOf.js","../chunks/DujhAnCs.js","../chunks/CWMNWfLw.js","../chunks/CmkbQrYx.js","../chunks/EQ54Yfcd.js","../chunks/DuNa-JhG.js","../chunks/3SbGqcbX.js","../chunks/OuCfdC0r.js","../chunks/Cbf23dJy.js","../chunks/CWaspPwN.js","../chunks/vu8FjO6O.js","../chunks/CvbnrAEx.js","../chunks/BJLSrlOq.js","../chunks/2al6WD4b.js","../chunks/CyyW12qt.js","../chunks/Dpaauiqf.js","../chunks/DstbFQD6.js","../chunks/CxKE0Jjq.js","../chunks/BDmhfu3R.js","../chunks/DxjXvSCh.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/DjsBn23O.js","../chunks/DbEENCEu.js","../chunks/Cy-nR8IT.js","../chunks/DX8bWC0d.js","../chunks/DMoBPOW4.js","../chunks/UcZE3skJ.js","../chunks/CaYZrGFV.js","../chunks/B0_dgftV.js","../chunks/ChwpPGxO.js","../chunks/DlHjpvET.js","../chunks/h2nqTh5L.js","../chunks/BBNU7JHv.js","../chunks/DLVnMPmE.js","../chunks/BQBvadb7.js","../chunks/B-5BUh9O.js","../chunks/B8B24qty.js","../chunks/HoNWw-UZ.js","../chunks/DnsAcW94.js"])))=>i.map(i=>d[i]);
import{_ as B}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as ae}from"../chunks/DMa9HWY3.js";import{p as R,f as L,v as s,X as V,aG as S,r as j,a as E,ar as P,n as D,u as le,a8 as Z,c as ee,T as q}from"../chunks/CRVpP9yN.js";import{g as ce}from"../chunks/CaJUWSoK.js";import{f as k,c as T,a as w}from"../chunks/gCR6Jetf.js";import{s as J,r as K,i as pe}from"../chunks/DB5kBrEO.js";import{c as F}from"../chunks/t0KIPAFz.js";import{b as te,e as G}from"../chunks/Dz9uIhWG.js";import{b as re}from"../chunks/uZAc4rZc.js";import{B as ue}from"../chunks/DkYXxzVk.js";import{S as me}from"../chunks/DNJpJ1a7.js";import{S as de}from"../chunks/DF087-I3.js";import"../chunks/69_IOA4Y.js";import{e as fe,i as ge,s as Q}from"../chunks/B8kg81aS.js";import{n as oe}from"../chunks/Drooys_N.js";import"../chunks/BzZgUCJc.js";import"../chunks/YLQ5vOCl.js";import"../chunks/DzkR_YJJ.js";import"../chunks/D_y4h6AR.js";import"../chunks/Cad-p0g1.js";import"../chunks/Bcsiu1z4.js";import"../chunks/B2P5vDMv.js";import{u as z,m as ye,i as he}from"../chunks/CwMvEZwR.js";import{p as se}from"../chunks/D6GRoFuc.js";import{_ as U}from"../chunks/CPwmGbun.js";import{z as ne}from"../chunks/C6j0c8D7.js";import be from"../chunks/CV4TFxLl.js";import{n as ie}from"../chunks/CWuMonRC.js";import{I as W}from"../chunks/2D3lK8hZ.js";var ve=k('<div class="map-sidebar svelte-1gk88h6" role="navigation" aria-label="Map tools"></div>');function _e(t,e){R(e,!0);let o=S("");const r=async i=>{s(o)===i?(P(o,""),e.onToggleItem?.(i,!1)):(P(o,i,!0),e.onToggleItem?.(i,!0))};var n=ve();fe(n,21,()=>e.options,ge,(i,a)=>{var c=T(),l=L(c);{let d=V(()=>`sidebar-button ${s(a).id===s(o)?"active":""}`),h=V(()=>s(a).id===s(o));F(l,()=>ue,(b,v)=>{v(b,{get class(){return s(d)},variant:"ghost",size:"icon",get"aria-label"(){return s(a).label},get"aria-pressed"(){return s(h)},get title(){return s(a).label},onclick:()=>void r(s(a).id),children:($,X)=>{const u=V(()=>s(a).icon);var y=T(),_=L(y);F(_,()=>s(u),(g,x)=>{x(g,{"aria-hidden":"true",class:"sidebar-icon"})}),w($,y)},$$slots:{default:!0}})})}w(i,c)}),j(n),w(t,n),E()}async function we(t){const{view:e,inputLayer:o,polygonId:r,clipLayer:n,targetLayer:i,idField:a,symbol:c}=t,l=await Ce(o,r,a,e);if(!l)return console.warn("clipPolygon: polygon not found for id:",r),null;if(l.type!=="polygon")return console.warn("clipPolygon: input geometry is not a polygon."),null;const d=await Se(n,l,e);if(!d)return console.info("clipPolygon: no geometries in clipLayer intersect the polygon."),null;if(!$e(l,d))return null;const h=xe(d,r,c);return Ae(i,h,e),e&&e.goTo(d).catch(b=>console.warn("goTo failed:",b)),h}function $e(t,e){return t.spatialReference?.wkid!==e.spatialReference?.wkid&&t.spatialReference?.wkt!==e.spatialReference?.wkt?(console.error("clipPolygon: polygon and union clip geometry must be in the same spatial reference."),console.log("polygon SR",t.spatialReference?.toJSON()),console.log("unionClipGeometry SR",e.spatialReference?.toJSON()),!1):!0}function xe(t,e,o){return new U({geometry:t,attributes:{sourceId:e,clipped:!0},symbol:o||{type:"simple-fill",color:[0,0,0,.2],outline:{color:[255,0,0,1],width:1.5}}})}function Ae(t,e,o){o?.map&&!o.map.layers.includes(t)&&o.map.add(t),t.add(e)}async function Ce(t,e,o,r){return t.type==="feature"?Ie(t,e,o,r):t.type==="graphics"?Me(t,e,o):(console.warn("getPolygonGeometryById: unsupported layer type:",t.type),null)}async function Ie(t,e,o,r){const n=o||t.objectIdField||"OBJECTID",i=t.createQuery();i.where=Pe(n,e),i.returnGeometry=!0,i.outFields=["*"],i.num=1,r?.spatialReference&&(i.outSpatialReference=r.spatialReference);const l=(await t.queryFeatures(i)).features[0]?.geometry;return l&&l.type==="polygon"?l:null}function Me(t,e,o){const r=o||"id",i=t.graphics.find(a=>{const l=(a.attributes||{})[r];return l===e||String(l)===String(e)})?.geometry;return i&&i.type==="polygon"?i:null}function Pe(t,e){return typeof e=="number"?`${t} = ${e}`:`${t} = '${String(e).replace(/'/g,"''")}'`}async function Se(t,e,o){const r=await Le(t,e,o);return r.length?Re(e,r):null}async function Le(t,e,o){return t.type==="feature"?Te(t,e,o):t.type==="graphics"?Ge(t,e):(console.warn("getClipGeometries: unsupported layer type:",t.type),[])}async function Te(t,e,o){const r=t.createQuery();return r.geometry=e,r.spatialRelationship="intersects",r.returnGeometry=!0,r.outFields=[],r.num=1e3,o?.spatialReference&&(r.outSpatialReference=o.spatialReference),(await t.queryFeatures(r)).features.map(i=>i.geometry).filter(i=>!!i)}function Ge(t,e){const o=e.extent,r=[];return t.graphics.forEach(n=>{if(!n.geometry)return;const i=n.geometry,a="extent"in i?i.extent:null;(!o||!a||Ee(o,a))&&r.push(i)}),r}function Re(t,e){z(t);const o=ye(e,t);if(!o.length)return null;const r=o.filter(i=>!!i&&i.type==="polygon");if(!r.length)return null;const n=se(r);return!n||n.type!=="polygon"?null:n}function Ee(t,e){return!(t.xmax<e.xmin||t.xmin>e.xmax||t.ymax<e.ymin||t.ymin>e.ymax)}function Fe(t,e){console.log("[merge-clipped-polygons] merging in layer:",t.id,"opts:",e);const o=ke(t);if(o.length<=1)return o;console.log("[merge-clipped-polygons] candidate polygons:",o.length);const r=Oe(o);if(console.log("[merge-clipped-polygons] overlay pieces count:",r.length),!r.length)return[];const n=Ve(r);console.log("[merge-clipped-polygons] groups by layer set:",n.size);const i=qe(n);return console.log("[merge-clipped-polygons] replacing",o.length,"originals with",i.length,"final polygons."),t.graphics.removeMany(o),t.graphics.addMany(i),i}function ke(t,e){return t.graphics.toArray().filter(r=>!(!r.geometry||r.geometry.type!=="polygon"))}function Oe(t){let e=[];for(const o of t)e=Ne(o,e);return e}function Ne(t,e){let r=t.geometry;if(!r)return e;z(r);const n=[];for(const i of e){const a=Be(i,r,t);n.push(...a.pieces),r=a.remaining,r&&z(r)}return r&&n.push({geometry:r,members:[t]}),n}function Be(t,e,o){const r=t.geometry;if(!e)return{pieces:[t],remaining:null};const n=r.extent,i=e.extent;if(!De(n,i))return{pieces:[t],remaining:e};const a=he(r,e);if(!a||a.type!=="polygon")return{pieces:[t],remaining:e};const c=ie(r,e),l=ie(e,r),d=[];c&&c.type==="polygon"&&d.push({geometry:c,members:t.members.slice()}),d.push({geometry:a,members:[...t.members,o]});const h=l&&l.type==="polygon"?l:null;return{pieces:d,remaining:h}}function Ve(t){const e=new Map;for(const o of t){const{key:r,ids:n}=je(o.members);if(n.length===0)continue;let i=e.get(r);i||(i={geometries:[],members:o.members,comboKey:r},e.set(r,i)),i.geometries.push(o.geometry)}return e}function qe(t){const e=[];for(const[,o]of t.entries()){if(!o.geometries.length)continue;const r=se(o.geometries);if(!r||r.type!=="polygon")continue;const n=ze(o.members),i=new U({geometry:r,attributes:n,symbol:{type:"simple-fill",color:[0,0,0,.3],outline:{color:[0,0,0,1],width:1}}});e.push(i)}return e}function je(t){const e=new Set,o=new Set;for(const a of t){const c=a.attributes??{},l=c.layerId,d=c.layerIds,h=c.layerTitle,b=c.layerTitles;l&&e.add(l),Array.isArray(d)&&d.forEach(v=>{v&&e.add(v)}),h&&o.add(h),Array.isArray(b)&&b.forEach(v=>{v&&o.add(v)})}const r=Array.from(e).sort(),n=Array.from(o).sort();return{key:r.join("|"),ids:r,titles:n}}function ze(t){const e={};if(!t.length)return e;const o=t[0].attributes??{};Object.assign(e,o),"sourceId"in o&&(e.sourceId=o.sourceId),"clipped"in o&&(e.clipped=o.clipped);const r=new Set,n=new Set;for(const c of t){const l=c.attributes??{},d=l.layerId,h=l.layerIds,b=l.layerTitle,v=l.layerTitles;d&&r.add(d),Array.isArray(h)&&h.forEach($=>{$&&r.add($)}),b&&n.add(b),Array.isArray(v)&&v.forEach($=>{$&&n.add($)})}const i=Array.from(r).sort(),a=Array.from(n).sort();return e.layerIds=i,e.layerTitles=a,e.layerTitlesCsv=a.join(", "),e}function De(t,e){return!(t.xmax<e.xmin||t.xmin>e.xmax||t.ymax<e.ymin||t.ymin>e.ymax)}function Je(t,e){R(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let o=K(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 18V5"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77"}]];W(t,J({name:"brain"},()=>o,{get iconNode(){return r},children:(n,i)=>{var a=T(),c=L(a);Q(c,()=>e.children??D),w(n,a)},$$slots:{default:!0}})),E()}function Ke(t,e){R(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let o=K(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M3 5h.01"}],["path",{d:"M3 12h.01"}],["path",{d:"M3 19h.01"}],["path",{d:"M8 5h13"}],["path",{d:"M8 12h13"}],["path",{d:"M8 19h13"}]];W(t,J({name:"list"},()=>o,{get iconNode(){return r},children:(n,i)=>{var a=T(),c=L(a);Q(c,()=>e.children??D),w(n,a)},$$slots:{default:!0}})),E()}function Qe(t,e){R(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let o=K(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]];W(t,J({name:"map"},()=>o,{get iconNode(){return r},children:(n,i)=>{var a=T(),c=L(a);Q(c,()=>e.children??D),w(n,a)},$$slots:{default:!0}})),E()}var Ue=k('<arcgis-layer-list></arcgis-layer-list> <div class="basemap-container svelte-1q0t0hd"><arcgis-basemap-gallery></arcgis-basemap-gallery></div>',3),We=k("<arcgis-map></arcgis-map>",2),Xe=k('<div class="layout svelte-1q0t0hd"><!> <!></div>');function Mt(t,e){R(e,!0);let o=S(null),r=S(null),n=S(null),i=S(!1),a=S(null),c=S(!1);const l=[{id:"layers",label:"Layers",icon:Ke},{id:"basemap",label:"Basemap Gallery",icon:Qe},{id:"analysis",label:"Analysis",icon:Je}];ae(async()=>{await B(()=>import("../chunks/COzYCy8P.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120]),import.meta.url),await B(()=>import("../chunks/B0_dgftV.js"),__vite__mapDeps([121,122,2,3,123,12,11,124,7,5,4,1,6,8,9,10,18,19,20,21,22,23,24,25,26,27,125,126,17,51,52,39,53,54,55,42,36,33,127,60,46,128,88,35,37,43,44]),import.meta.url),await B(()=>import("../chunks/B8B24qty.js").then(u=>u.a),__vite__mapDeps([129,18,2,3,19,20,21,22,23,24,25,26,11,27,62,45,39,46,36,33,47,38,35,34,31,37,130,131,127,83,126]),import.meta.url)}),le(()=>{!s(r)||!s(n)||(s(r).view=s(n),s(r).listItemCreatedFunction=u=>{const{item:y}=u;y.layer.type!="group"&&(y.panel={content:"legend",open:!0})})});async function d(){if(P(n,s(o)?.view??null,!0),s(r)&&s(n)&&(s(r).view=s(n)),s(c)||(P(c,!0),!s(n)||!s(n).map))return;const u=new oe({title:"Clipped polygons",listMode:"show"}),y=new oe({listMode:"hide"});s(n).map.add(y),s(n).on("click",async p=>{if(!s(n))return;const m=(await s(n).hitTest(p)).results.find(A=>A.layer===u);if(!m){y.removeAll();return}const M=m.graphic;y.removeAll(),y.add(new U({geometry:M.geometry,symbol:{type:"simple-fill",color:[0,0,0,0],outline:{type:"simple-line",color:[255,255,0,1],width:3}}})),s(n).popup?.open({features:[M],location:p.mapPoint})}),await s(n).when(),s(n).map.add(u);function _(p){const f=[];for(const m of p)m instanceof be?f.push(..._(m.layers.toArray())):m instanceof ne&&f.push(m);return f}function g(p,f=.3){let m=0;for(let I=0;I<p.length;I++)m=p.charCodeAt(I)+((m<<5)-m);const M=m>>0&255,A=m>>8&255,C=m>>16&255;return[M,A,C,f]}const x=s(n).map.findLayerById("19a9760b651-layer-105");console.log("Parcels Layer:",x.title);for(const p of _(s(n).map.layers.toArray())){if(!(p instanceof ne)){console.log(`Skipping non-feature layer: ${p.title}, type: ${p.type}`);continue}if(p.id===x.id){console.log(`Skipping parcels layer itself: ${p.title}`);continue}const f=await we({view:s(n),inputLayer:x,polygonId:4130,idField:"OBJECTID",clipLayer:p,targetLayer:u});if(!f){console.log(`No polygon clipped for layer: ${p.title}`);continue}f.attributes??={},f.attributes.layerTitle=p.title,f.attributes.layerId=p.id,f.attributes.layerTitles=[p.title];const m=p.id;f.symbol={type:"simple-fill",color:g(m,.3),outline:{color:[255,0,0,1],width:2}},console.log("Clipped Polygon:",f)}console.log("Merging clipped polygons in layer:",u.id);const O=Fe(u);for(const p of O){const f=p.attributes.layerTitles.join("; ");p.symbol={type:"simple-fill",color:g(f,.3),outline:{color:[0,0,0,1],width:1}},p.popupTemplate={title:"Clipped region",content:[{type:"custom",creator:m=>{const A=m.graphic.attributes.layerTitles??[],C=document.createElement("table");C.className="esri-widget__table";const I=document.createElement("tbody");return A.forEach(N=>{const H=document.createElement("tr"),Y=document.createElement("td");Y.textContent=N,H.appendChild(Y),I.appendChild(H)}),C.appendChild(I),C}}]}}}function h(u,y){P(i,y,!0),P(a,y?u:null,!0)}var b=Xe(),v=ee(b);{var $=u=>{_e(u,{get options(){return l},onToggleItem:h})};pe(v,u=>{s(n)&&u($)})}var X=Z(v,2);{const u=_=>{var g=T(),x=L(g);F(x,()=>de,(O,p)=>{p(O,{children:(f,m)=>{var M=Ue(),A=L(M);q(()=>G(A,"hidden",s(a)!=="layers")),re(A,N=>P(r,N),()=>s(r));var C=Z(A,2),I=ee(C);te(I,1,"basemap-gallery svelte-1q0t0hd"),q(()=>G(I,"view",s(n))),j(C),q(()=>C.hidden=s(a)!=="basemap"),w(f,M)},$$slots:{default:!0}})}),w(_,g)},y=_=>{var g=We();te(g,1,"relative h-full w-full"),G(g,"item-id","331ba640fe6c4fa5b4c3d025160c2ec5"),G(g,"center","-2.231774828836059,53.46531847221502"),G(g,"zoom","15"),re(g,x=>P(o,x),()=>s(o)),ce("arcgisViewReadyChange",g,d),w(_,g)};F(X,()=>me,(_,g)=>{g(_,{get isOpen(){return s(i)},hideToggleButton:!0,sidebarContent:u,mainContent:y,$$slots:{sidebarContent:!0,mainContent:!0}})})}j(b),w(t,b),E()}export{Mt as component};
