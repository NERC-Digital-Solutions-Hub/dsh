const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CyyQp0Rw.js","../chunks/Aa_nm3Tf.js","../chunks/BFGjv385.js","../chunks/DSdBzmdi.js","../chunks/BHwe4xe6.js","../chunks/Drf0nZ94.js","../chunks/PPVm8Dsz.js","../chunks/BJhaCM43.js","../chunks/DzPnzJx5.js","../chunks/DIGTz9Fo.js","../chunks/D9LecJbg.js","../chunks/BAwhstd8.js","../chunks/CvJVpgMV.js","../chunks/BvZ8mO3n.js","../chunks/BnL9dRiP.js","../chunks/Bola1Gyj.js","../chunks/XqQYA9Kc.js","../chunks/DVdhdsPf.js","../chunks/CN9sEZ07.js","../chunks/PJA-oSZG.js","../chunks/D5lfJVJF.js","../chunks/CLUeyY5c.js","../chunks/DYspwNLv.js","../chunks/8d4XiCAe.js","../chunks/CEYpN6bs.js","../chunks/DsdqSOQR.js","../chunks/DPysyl42.js","../chunks/LLVnLkr1.js","../chunks/CEIvA_E-.js","../chunks/DWuFonT6.js","../chunks/B1tp3gsa.js","../chunks/BEM1Pz9A.js","../chunks/Cp_8tW2x.js","../chunks/BMM7N5Tr.js","../chunks/CH2voQe_.js","../chunks/Ci6C1k20.js","../chunks/bnayRBMH.js","../chunks/BurgD2W6.js","../chunks/Dp7EIoZF.js","../chunks/BEpFWXkz.js","../chunks/Oe6SV2kF.js","../chunks/DTbXJ_Dm.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/OROug527.js","../chunks/VzQSUR_q.js","../chunks/CttKhsFI.js","../chunks/Dwqd1w08.js","../chunks/DkGd4JTu.js","../chunks/Djp3mnm5.js","../chunks/C9j04UTW.js","../chunks/DGlNuEmX.js","../chunks/BVXTGD7H.js","../chunks/hbA2VStE.js","../chunks/B87vTgcy.js","../chunks/CISVLUtc.js","../chunks/DboXEB11.js","../chunks/sd8OvKRi.js","../chunks/D3URTZhC.js","../chunks/B9XxWJav.js","../chunks/DZdu3WtH.js","../chunks/CSxkCvzu.js","../chunks/CxvrsdtE.js","../chunks/CAXXtPBP.js","../chunks/COehenBl.js","../chunks/DdWc1Xci.js","../chunks/CidP4wfb.js","../chunks/CT-_SrKz.js","../chunks/D7w1LsY9.js","../chunks/DmoL4uwP.js","../chunks/UfB07l46.js","../chunks/CVwTD0fV.js","../chunks/Cl1y9xCy.js","../chunks/DCbUWbpl.js","../chunks/DPJXGPFY.js","../chunks/D1xSXHoa.js","../chunks/BP4OB8lT.js","../chunks/q_b6UJoq.js","../chunks/BpE1VQlG.js","../chunks/D_hPk45Z.js","../chunks/Dr6j4QXi.js","../chunks/C5QNfVwX.js","../chunks/CSXZNpHb.js","../chunks/BllPXHwT.js","../chunks/Bu3ymzBu.js","../chunks/DNP4Mrk-.js","../chunks/B6VJd4jK.js","../chunks/B5KrPk5K.js","../chunks/BMOn63c-.js","../chunks/BnallGOr.js","../chunks/BN3hh0nP.js","../chunks/BM-dFimv.js","../chunks/0iR5xiEu.js","../chunks/DARfHPHw.js","../chunks/DYtTyGiR.js","../chunks/B6H5dYHk.js","../chunks/BaSoJgXN.js","../chunks/XRp3Y0qd.js","../chunks/Cn7COTiE.js","../chunks/B-oVuq40.js","../chunks/BDMuHjHc.js","../chunks/Dd6EtX7D.js","../chunks/BeuEN84y.js","../chunks/C_BV7hO8.js","../chunks/Pk78U0OI.js","../chunks/Cia_XQUt.js","../chunks/BJ0i82DL.js","../chunks/DVJDJZ2O.js","../chunks/D_96sC_r.js","../chunks/Bt-D_PUr.js","../chunks/BeBW31UQ.js","../chunks/BGuibFV1.js","../chunks/Cy7Y8tBJ.js","../chunks/B7qw2XRc.js","../chunks/CU-X-jiD.js","../chunks/J_yKMKMe.js","../chunks/CmoZ75GA.js","../chunks/Cbmw3a4J.js","../chunks/BjXQDf3v.js","../chunks/GKolV7NZ.js","../chunks/mHjw48HG.js","../chunks/Cp-gmQeJ.js","../chunks/C5N7d8Fe.js","../chunks/DdnZXuWu.js","../chunks/BQsAu62i.js","../chunks/ddR77hBF.js","../chunks/D8-8il_j.js","../chunks/Dv5qFrOG.js","../chunks/DKQ5QYS4.js","../chunks/Bc3YE6MV.js","../chunks/DhzudQro.js","../chunks/CSbj2krA.js","../chunks/CbdJlJYU.js","../chunks/a6U2fDDK.js","../chunks/4r4xOx61.js","../chunks/EvydjDyp.js","../chunks/DC4T6Ptu.js","../chunks/n__Nwz3z.js","../chunks/BXM5RA-h.js","../chunks/DAY6lgjz.js","../chunks/C7thy5Rd.js","../chunks/CiYWaA66.js","../chunks/1G6XGRRg.js","../chunks/XaXpG9zZ.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/J8-jC6I2.js","../chunks/DWgil3ps.js","../chunks/DPb6J-GU.js","../chunks/BbuEWvu5.js","../chunks/CMyYWUNz.js","../chunks/JwnknRhu.js","../chunks/CWsAkF0s.js","../chunks/DZIgQuAM.js","../chunks/DsELdNZn.js","../chunks/Bpprl1N_.js","../chunks/CJWBCM7C.js","../chunks/BMcz7n5j.js","../chunks/CE41RLyP.js","../chunks/Cxzp0TO-.js","../chunks/DvKU1K2H.js","../chunks/BxCS8W9a.js","../chunks/DhX8NJRU.js","../chunks/Dtwxk0gz.js","../chunks/DYYw9THu.js","../chunks/GPRtIQnB.js","../chunks/CaYZrGFV.js","../chunks/kZyBtB9e.js","../chunks/dS0OAAqK.js","../chunks/CxXLonmD.js","../assets/jsxFactory.CQED0rIl.css","../chunks/BTvTHFto.js","../assets/component-utils.R4SXog4D.css","../chunks/DUzt8ZhE.js","../chunks/Bu-Kmli7.js","../chunks/CFeXz9S-.js","../chunks/E7yhmlS1.js","../chunks/BQBvadb7.js","../chunks/D-YQ4CHs.js","../chunks/Cghe_r9p.js","../chunks/6I2IPugL.js","../chunks/CsOll_1A.js","../chunks/BdO2F3tz.js","../chunks/CvUL6bza.js","../chunks/yWP3lbnK.js","../chunks/Cc5aB4xO.js","../chunks/-zyPTpWw.js","../chunks/DlHjpvET.js","../chunks/BOhPEGe8.js","../chunks/DtjklSP3.js","../chunks/BXstoRzU.js","../chunks/BJUrs1nD.js","../chunks/DBAyvV3n.js","../chunks/BOJU0KJZ.js","../chunks/DQntrP9f.js","../chunks/NcLQqnsB.js","../chunks/Bv4rzOz8.js","../chunks/D1puAYCv.js","../chunks/BiBZEmGZ.js","../chunks/hQDdZedx.js","../chunks/Caulfaw_.js","../chunks/DGLYN9oc.js","../chunks/lwg6SgEd.js","../chunks/DKzVzLpH.js","../chunks/BEQnBRaB.js","../chunks/BvOub3JO.js","../chunks/nOUYOaJI.js","../chunks/DHcUpe3h.js","../chunks/Cp2wq4Lj.js","../chunks/HoHVBmwd.js","../chunks/BiJfJoum.js","../chunks/UPne1sZz.js","../chunks/8WtPGj6h.js","../chunks/CG7ZQ6BV.js","../chunks/BSmSmoA7.js","../chunks/Pl52zQKz.js","../chunks/BvER9tXK.js","../chunks/CBHXIrpN.js","../chunks/n_VqDs8R.js","../chunks/D5J0HRgs.js","../chunks/B023hQBY.js","../chunks/BPTNpVpY.js","../chunks/C2y1nKdd.js","../chunks/Bxxl7NsE.js","../chunks/CaVKkSa6.js","../chunks/CUzevAry.js","../chunks/C8zGwbjb.js","../chunks/CCxYuQPd.js","../chunks/BOAAdPfU.js","../chunks/DV6VugFz.js","../chunks/DHMArc5L.js","../chunks/d0ZPwURW.js","../chunks/D5482jFX.js","../chunks/l80NLc26.js","../chunks/BTFFNXsn.js","../chunks/BndydEtR.js","../chunks/HTOW8iPe.js","../chunks/BjGKGvoc.js","../chunks/DuIgqnlY.js","../chunks/CtioFPKP.js","../chunks/DaQyK3nQ.js","../chunks/BcJu4T66.js","../chunks/Bc7uMo7x.js","../chunks/BO9PY44w.js","../chunks/CxGYwNrO.js","../chunks/Bvmk-rnc.js","../chunks/a2KGoXuK.js","../chunks/Cgb6qxNH.js","../chunks/BQ6kwVi5.js","../chunks/4rLBhf07.js","../chunks/DPG_QtyK.js","../chunks/wFIBN3al.js","../chunks/B1N-tmtC.js","../chunks/DqPESIRO.js","../chunks/CvoKRsgE.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/1mhaIyTX.js","../chunks/DQOO6RKE.js","../chunks/Bi6C4OG6.js"])))=>i.map(i=>d[i]);
import{_ as ye}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as nt,a as it}from"../chunks/B6YlTIbf.js";import{f as R,p as Ie,c as w,n as Pt,r as _,a as Pe,a8 as X,T as Z,v as e,X as G,W as Le,aG as C,av as rt,u as Qe,ar as r,aZ as Ht,a_ as Qt,aM as Yt}from"../chunks/3T7gpIC7.js";import{e as Xt,g as gt}from"../chunks/DgqFJ-YC.js";import{c as j,a as i,f as x,t as ke}from"../chunks/BvFYs0_V.js";import{l as Zt,s as Xe,p as ne,r as ht,i as U}from"../chunks/CHdWU_ZX.js";import{c as z}from"../chunks/D_g7ErcJ.js";import{a as Jt,e as St,b as wt,s as Ze,f as ot}from"../chunks/DjQ7DCT_.js";import{b as at}from"../chunks/Cg4gGIC6.js";import{s as te}from"../chunks/wxxXplOe.js";import{s as At,e as Ye,i as er}from"../chunks/BgyBkIn0.js";import{I as tr,s as rr,e as ar,f as nr,S as It,g as st,h as lt,i as ct}from"../chunks/BTF5xuw3.js";import{c as ut}from"../chunks/Crgn-lcL.js";import{X as or,A as ir,a as sr,b as lr}from"../chunks/Bv5-a4uK.js";import"../chunks/69_IOA4Y.js";import{C as cr}from"../chunks/Drx1NHwJ.js";import{S as yt}from"../chunks/CKik7VWo.js";import{B as ur}from"../chunks/CNqdNmzS.js";import{I as dr}from"../chunks/ObEU_TCx.js";import{H as fr}from"../chunks/BJhaCM43.js";import{c as Ot,S as pr}from"../chunks/Ccmp7OQt.js";import{a as mr,b as vr}from"../chunks/B2X9gLNi.js";import"../chunks/B17Q6ahh.js";import"../chunks/DSdBzmdi.js";import"../chunks/BHwe4xe6.js";import"../chunks/BFGjv385.js";function gr(S){return(mr||vr)+S}function _r(S,t){const s=Zt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const v=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]];tr(S,Xe({name:"command"},()=>s,{get iconNode(){return v},children:(g,b)=>{var a=j(),E=R(a);rr(E,t,"default",{}),i(g,a)},$$slots:{default:!0}}))}var hr=x("<span><!></span>");function wr(S,t){Ie(t,!0);let s=ne(t,"ref",15,null),v=ht(t,["$$slots","$$events","$$legacy","ref","class","children"]);var g=hr();Jt(g,a=>({"data-slot":"command-shortcut",class:a,...v}),[()=>ut("text-muted-foreground ml-auto text-xs tracking-widest",t.class)]);var b=w(g);At(b,()=>t.children??Pt),_(g),at(g,a=>s(a),()=>s()),i(S,g),Pe()}function yr(S,t){Ie(t,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let s=ht(t,["$$slots","$$events","$$legacy"]);const v=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];dr(S,Xe({name:"arrow-left"},()=>s,{get iconNode(){return v},children:(g,b)=>{var a=j(),E=R(a);At(E,()=>t.children??Pt),i(g,a)},$$slots:{default:!0}})),Pe()}function xr(S,t){S.stopPropagation(),t()?.()}var br=x('<button type="button" class="pointer-events-none flex h-4 w-0 items-center justify-center rounded text-muted-foreground opacity-0 transition-[width,margin-left,opacity] group-hover:pointer-events-auto group-hover:ml-1 group-hover:w-4 group-hover:opacity-100"><!></button>'),Cr=x('<div><span class="truncate"> </span> <!></div>');function $t(S,t){Ie(t,!0);let s=ne(t,"onClose",3,null);const v=t.title??t.value;var g=Cr(),b=w(g),a=w(b,!0);_(b);var E=X(b,2);{var D=A=>{var M=br();M.__click=[xr,s];var y=w(M);or(y,{class:"size-3"}),_(M),Z(()=>Ze(M,"aria-label",`Clear ${t.value}`)),i(A,M)};U(E,A=>{s()&&A(D)})}_(g),Z(A=>{wt(g,1,A),Ze(g,"title",v),te(a,t.value)},[()=>St(ut("group inline-flex max-w-[10rem] items-center overflow-hidden rounded border border-border px-1 py-0.5 text-xs font-medium text-muted-foreground transition-all",t.class))]),i(S,g),Pe()}Xt(["click"]);var Ir=x('<!> <span aria-hidden="true" class="h-5 w-px bg-border"></span>',1),Pr=x('<div class="flex h-9 items-center gap-2 border-b pl-2" data-slot="command-input-wrapper"><span class="flex h-full min-w-[1.25rem] shrink-0 items-center justify-center text-muted-foreground"><!></span> <!> <!></div>');function Sr(S,t){Ie(t,!0);let s=ne(t,"ref",15,null),v=ne(t,"value",15,""),g=ne(t,"iconProps",19,()=>({})),b=ne(t,"onCommandClose",3,null),a=ht(t,["$$slots","$$events","$$legacy","ref","class","value","icon","iconProps","commandId","onCommandClose"]);var E=Pr(),D=w(E),A=w(D);{var M=V=>{const H=G(()=>t.icon);var Q=j(),d=R(Q);z(d,()=>e(H),(f,N)=>{N(f,Xe(g))}),i(V,Q)},y=V=>{_r(V,{class:"size-4 opacity-50"})};U(A,V=>{t.icon?V(M):V(y,!1)})}_(D);var O=X(D,2);{var q=V=>{var H=Ir(),Q=R(H);$t(Q,{get value(){return t.commandId},get title(){return t.commandId},get onClose(){return b()}}),Le(2),i(V,H)};U(O,V=>{t.commandId&&V(q)})}var F=X(O,2);{let V=G(()=>ut("flex h-10 flex-1 rounded-md bg-transparent py-3 text-sm outline-hidden placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t.class));z(F,()=>ar,(H,Q)=>{Q(H,Xe({"data-slot":"command-input",get class(){return e(V)}},()=>a,{get ref(){return s()},set ref(d){s(d)},get value(){return v()},set value(d){v(d)}}))})}_(E),i(S,E),Pe()}function Ar(S,t){Ie(t,!0);const s=ne(t,"disabled",3,!1);ur(S,{class:"m-0 flex size-7 shrink-0 items-center justify-center rounded-md border-none bg-transparent p-0 text-muted-foreground opacity-50 shadow-none transition hover:bg-transparent hover:text-accent-foreground focus:outline-none focus-visible:border-transparent focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none active:ring-0 active:outline-none disabled:pointer-events-none disabled:opacity-50 has-[>svg]:px-0",onclick:()=>{s()||t.onPress?.()},"aria-label":"Return to command search",get disabled(){return s()},children:(v,g)=>{{let b=G(()=>`size-4 ${t.class}`.trim());yr(v,{get class(){return e(b)}})}},$$slots:{default:!0}}),Pe()}var Or=x('<div class="flex flex-wrap gap-2 px-2 py-0.5"></div>'),$r=x('<span class="text-xs text-muted-foreground"> </span>'),Rr=x('<div class="flex flex-col gap-0.5"><span class="text-sm leading-tight font-medium"> </span> <!></div> <!>',1),Er=x("<!> <!>",1),Mr=x('<div class="px-4 pb-3"><!></div>'),Vr=x("<!> <!>",1),Lr=x('<div class="px-4 pb-3"><!></div>'),kr=x('<p class="text-sm text-muted-foreground">No panel registered for this command.</p>'),Dr=x('<div class="pr-2 pb-2 pl-2"><!></div>'),Nr=x("<!> <!> <!>",1),Tr=x("<!> <!>",1),Wr=x("<!> <!>",1),Br=x("<div><!></div>");function Ur(S,t){Ie(t,!0);let s=ne(t,"ref",15,null),v=ne(t,"commands",19,()=>[]),g=ne(t,"placeholder",3,"Search commands..."),b=ne(t,"emptyMessage",3,"No commands found."),a=C(null),E=C(null),D=C(null),A=C(null),M=C(null),y=C(null),O=C(rt([])),q=C(""),F=C(!1),V=C(rt(g())),H=C(null),Q=!1,d=C(null),f=!1,N=null,p=null,L=0,I=null;const h=G(()=>{const n=new Map;for(const c of v())n.set(c.id,c);return Array.from(n.values())}),u=G(()=>{const n=new Map;for(const c of e(h)){const o=c.group??null,W=n.get(o);W?W.push(c):n.set(o,[c])}return n});nt(()=>{le()});function l(n,c=!1){c&&(Q=!0),r(q,n,!0)}function m(n=null,c){if(!I||n&&I!==n)return;r(H,null),I.placeholderOverridden&&r(V,g()),(c?.forceReset??(c?.skipReset?!1:I.resetValueOnDetach))&&(l("",!0),I.onInput("")),I.onDetach?.(),I=null}function k(){m(null,{forceReset:!0}),r(H,null),r(V,g()),Q=!1}Qe(()=>{const n=e(H);if(n){if(Q){Q=!1;return}n(e(q))}}),Qe(()=>{e(a)||r(V,g())});function T(){if(p)try{p()}catch(n){console.error("Failed to dispose command session",n)}p=null,r(D,null),r(A,null),k(),r(E,null)}function P(){e(a)&&(T(),r(a,null),r(y,null),r(M,null),l("",!0),r(F,!0))}function K(n){try{t.commandSearchContext.get(n.classType).clear()}catch(c){console.error("Failed to clear global variable",c)}finally{le()}}function B(){e(d)?.blur()}function $(n,c){if(!n.component)return null;const o=n.props;return o?{component:n.component,props:()=>o(c)}:{component:n.component}}function re(n,c){const o=n.createSession?.(c);if(o){p=o.dispose??null,Object.prototype.hasOwnProperty.call(o,"input")?r(D,o.input??null,!0):r(D,null),Object.prototype.hasOwnProperty.call(o,"content")?r(A,o.content??null,!0):r(A,$(n,c),!0);return}p=null,r(D,null),r(A,$(n,c),!0)}function De(n){const c=n.id;return{deactivate:()=>{!e(a)||e(a).id!==c||(P(),le())},isActive:o=>!e(a)||e(a).id!==c?!1:o?e(a).id===o:!0,setIsOpen:(o,W)=>{if(!e(a)||e(a).id!==c)return;if(o){f=!1,r(F,!0);return}const J=W?.preserveActive??!0;pe(J)},setInputSurface:o=>{!e(a)||e(a).id!==c||r(D,o,!0)},setContentSurface:o=>{!e(a)||e(a).id!==c||r(A,o,!0)},getInputValue:()=>e(q),setInputValue:o=>{!e(a)||e(a).id!==c||l(o,!0)},setInputHandler:o=>{if(!(!e(a)||e(a).id!==c)){if(m(null,{skipReset:!0}),r(H,o,!0),!o){Q=!1;return}o(e(q))}},setPlaceholder:o=>{!e(a)||e(a).id!==c||r(V,o,!0)},resetPlaceholder:()=>{!e(a)||e(a).id!==c||r(V,g())},attachInputBinding:o=>{if(!e(a)||e(a).id!==c)return()=>{};m(null,{skipReset:!0});const W=o.placeholder??e(a).inputPlaceholder??g(),J={id:++L,commandId:c,onInput:o.onInput,onDetach:o.onDetach,placeholderOverridden:!!W,resetValueOnDetach:o.resetValueOnDetach??!0};I=J,J.placeholderOverridden&&W&&r(V,W,!0),r(H,Je=>{!I||I.id!==J.id||o.onInput(Je)});const ae=o.resetValueOnAttach??!0,Oe=o.replayInitialValue??!ae;return ae?(l("",!0),o.onInput("")):Oe&&o.onInput(e(q)),()=>{m(J)}}}}function Se(n){const c=e(E);if(!n)return c?{runtime:c}:{};if(!c)return{};const{props:o}=n;return o?{...typeof o=="function"?o(c):o,runtime:c}:{runtime:c}}function Y(n){return`${n.name} ${n.description??""}`.trim()}async function Ae(n){if(e(a)?.id===n.id){P();return}T(),r(y,null),r(M,n.id,!0),r(F,!0),e(d)&&e(d).focus();const c=De(n);r(E,c,!0),r(a,n,!0),re(n,c);try{await n.execute(c)}catch(o){r(y,o instanceof Error?o:new Error("Failed to execute the command."),!0)}finally{r(M,null),l("",!0),le()}}function Fe(n){const c=n.key.toLowerCase();if((n.metaKey||n.ctrlKey)&&c==="p"){if(n.preventDefault(),e(a)){P();return}e(d)&&e(d).focus();return}if(c==="escape"){if(e(a)){n.preventDefault(),P(),B();return}e(F)&&(n.preventDefault(),r(F,!1),B());return}if(!e(a))for(const W of e(h)){if(!W.shortcut)continue;const J=W.shortcut.join(" ").toLowerCase(),ae=[];if(n.metaKey&&ae.push("âŒ˜"),n.ctrlKey&&ae.push("Ctrl"),n.altKey&&ae.push("Alt"),n.shiftKey&&ae.push("Shift"),ae.push(n.key.length===1?n.key.toUpperCase():n.key),ae.join(" ").toLowerCase()===J.toLowerCase()){n.preventDefault(),Ae(W);break}}}function Ne(){r(F,!0)}function pe(n=!1){f=n,r(F,!1)}function me(n){const c=N;if(!c)return;const o=n.target;o&&c.contains(o)||e(F)&&pe(!!e(a))}Qe(()=>{if(!e(F)){if(l("",!0),!e(a)){f=!1;return}if(f){f=!1;return}T(),r(a,null),r(y,null)}});function le(){if(!t.commandSearchContext){r(O,[],!0);return}const n=t.commandSearchContext.getGlobalVariables(),c=[];for(const o of n){const W=o.getId();W&&c.push({displayName:o.displayName,id:W,classType:o.constructor})}r(O,c,!0)}var se=Br();gt("keydown",Ht,Fe),gt("pointerdown",Qt,me);var Te=w(se);z(Te,()=>nr,(n,c)=>{c(n,{children:(o,W)=>{var J=Wr(),ae=R(J);{let Ee=G(()=>e(a)?e(a).inputPlaceholder??e(V):e(V)),ze=G(()=>e(a)?Ar:void 0),qe=G(()=>e(a)?{onPress:P,disabled:e(M)===e(a).id}:void 0),et=G(()=>e(a)?.id),oe=G(()=>e(a)?P:null);Sr(ae,{get placeholder(){return e(Ee)},onfocus:()=>Ne(),get icon(){return e(ze)},get iconProps(){return e(qe)},get commandId(){return e(et)},get onCommandClose(){return e(oe)},get value(){return e(q)},set value(ee){r(q,ee,!0)},get ref(){return e(d)},set ref(ee){r(d,ee,!0)}})}var Oe=X(ae,2);{var Je=Ee=>{var ze=Tr(),qe=R(ze);{var et=de=>{var xe=Or();Ye(xe,21,()=>e(O),ve=>ve.id,(ve,ce)=>{{let Ke=G(()=>`${e(ce).displayName}: ${e(ce).id}`),tt=G(()=>`${e(ce).displayName}: ${e(ce).id}`);$t(ve,{get value(){return e(Ke)},get title(){return e(tt)},onClose:()=>K(e(ce))})}}),_(xe),i(de,xe)};U(qe,de=>{e(O).length&&de(et)})}var oe=X(qe,2);{var ee=de=>{It(de,{children:(xe,ve)=>{var ce=j(),Ke=R(ce);z(Ke,()=>st,(tt,dt)=>{dt(tt,{children:(ge,We)=>{var fe=Er(),Ve=R(fe);z(Ve,()=>lt,($e,ue)=>{ue($e,{children:(_e,be)=>{Le();var he=ke();Z(()=>te(he,b())),i(_e,he)},$$slots:{default:!0}})});var Be=X(Ve,2);Ye(Be,17,()=>Array.from(e(u).entries()),er,($e,ue)=>{var _e=G(()=>Yt(e(ue),2));let be=()=>e(_e)[1];var he=j(),Re=R(he);Ye(Re,17,be,we=>we.id,(we,ie)=>{var Ge=j(),Ue=R(Ge);{let Mt=G(()=>Y(e(ie)));z(Ue,()=>ct,(Vt,Lt)=>{Lt(Vt,{get value(){return e(Mt)},onclick:()=>Ae(e(ie)),children:(kt,ca)=>{var xt=Rr(),ft=R(xt),pt=w(ft),Dt=w(pt,!0);_(pt);var Nt=X(pt,2);{var Tt=Ce=>{var He=$r(),mt=w(He,!0);_(He),Z(()=>te(mt,e(ie).description)),i(Ce,He)};U(Nt,Ce=>{e(ie).description&&Ce(Tt)})}_(ft);var Wt=X(ft,2);{var Bt=Ce=>{yt(Ce,{class:"ml-auto size-4 text-muted-foreground"})},Ut=Ce=>{var He=j(),mt=R(He);{var jt=vt=>{var bt=j(),Ft=R(bt);z(Ft,()=>wr,(zt,qt)=>{qt(zt,{children:(Kt,ua)=>{Le();var Ct=ke();Z(Gt=>te(Ct,Gt),[()=>e(ie).shortcut?.join(" + ")]),i(Kt,Ct)},$$slots:{default:!0}})}),i(vt,bt)};U(mt,vt=>{e(ie).shortcut?.length&&vt(jt)},!0)}i(Ce,He)};U(Wt,Ce=>{e(M)===e(ie).id?Ce(Bt):Ce(Ut,!1)})}Z(()=>te(Dt,e(ie).name)),i(kt,xt)},$$slots:{default:!0}})})}i(we,Ge)}),i($e,he)}),i(ge,fe)},$$slots:{default:!0}})}),i(xe,ce)},$$slots:{default:!0}})},Me=de=>{var xe=Nr(),ve=R(xe);{var ce=ge=>{const We=G(()=>e(D).component);var fe=Mr(),Ve=w(fe);{let Be=G(()=>Se(e(D)));z(Ve,()=>e(We),($e,ue)=>{ue($e,Xe(()=>e(Be)))})}_(fe),i(ge,fe)};U(ve,ge=>{e(D)&&ge(ce)})}var Ke=X(ve,2);{var tt=ge=>{var We=Lr(),fe=w(We);z(fe,()=>ir,(Ve,Be)=>{Be(Ve,{variant:"destructive",children:($e,ue)=>{var _e=Vr(),be=R(_e);z(be,()=>sr,(Re,we)=>{we(Re,{children:(ie,Ge)=>{Le();var Ue=ke();Z(()=>te(Ue,`${e(a).name??""} failed`)),i(ie,Ue)},$$slots:{default:!0}})});var he=X(be,2);z(he,()=>lr,(Re,we)=>{we(Re,{children:(ie,Ge)=>{Le();var Ue=ke();Z(()=>te(Ue,e(y).message)),i(ie,Ue)},$$slots:{default:!0}})}),i($e,_e)},$$slots:{default:!0}})}),_(We),i(ge,We)};U(Ke,ge=>{e(y)&&ge(tt)})}var dt=X(Ke,2);It(dt,{children:(ge,We)=>{var fe=Dr(),Ve=w(fe);{var Be=ue=>{const _e=G(()=>e(A).component);var be=j(),he=R(be);{let Re=G(()=>Se(e(A)));z(he,()=>e(_e),(we,ie)=>{ie(we,Xe(()=>e(Re)))})}i(ue,be)},$e=ue=>{var _e=j(),be=R(_e);z(be,()=>cr,(he,Re)=>{Re(he,{class:"px-0",children:(we,ie)=>{var Ge=kr();i(we,Ge)},$$slots:{default:!0}})}),i(ue,_e)};U(Ve,ue=>{e(A)?ue(Be):ue($e,!1)})}_(fe),i(ge,fe)},$$slots:{default:!0}}),i(de,xe)};U(oe,de=>{e(a)?de(Me,!1):de(ee)})}i(Ee,ze)};U(Oe,Ee=>{e(F)&&Ee(Je)})}i(o,J)},$$slots:{default:!0}})}),_(se),at(se,n=>N=n,()=>N),at(se,n=>s(n),()=>s()),Z(n=>wt(se,1,n),[()=>St(ut("space-y-4",t.class))]),i(S,se),Pe()}class _t{#e=[];constructor(t){this.#e=t}get organisations(){return this.#e}}class Rt{#e=C(null);#t=C(!1);#r=C(null);load=async(t,s)=>{r(this.#t,!0),r(this.#r,null);try{const v=await fr(t,{...s,responseType:"json"});console.log("Esri Request Response:",v,v.data.url),r(this.#e,v.data,!0)}catch(v){r(this.#r,v,!0)}finally{r(this.#t,!1)}};get data(){return e(this.#e)}get isLoading(){return e(this.#t)}get error(){return e(this.#r)}}class Et{colour=null;id=null;getId(){return this.id}setId(t){this.id=t}clear(){this.setId(null)}}class je extends Et{displayName="org";organisations;constructor(t){super(),this.organisations=new Map(t.map(s=>[s.id,s])),t.length>0&&this.setId(t[0].id)}setActiveOrganisation(t){this.setId(t)}getActiveOrganisationId(){return this.id}getActiveOrganisationPortalUrl(){const t=this.organisations.get(this.getActiveOrganisationIdInternal());if(!t)throw new Error("No organisation is currently selected.");return t.portalUrl}getActiveOrganisationEndpoint(){const t=this.organisations.get(this.getActiveOrganisationIdInternal());if(!t)throw new Error("No organisation is currently selected.");return t.endpoint}getActiveOrganisationQueryParams(){const t=this.organisations.get(this.getActiveOrganisationIdInternal());if(!t)throw new Error("No organisation is currently selected.");return t.queryParams||{}}getActiveOrganisationIdInternal(){if(!this.id)throw new Error("No organisation is currently selected.");return this.id}}var jr=x('<div class="error-message svelte-11six79"><p class="text-sm text-red-600"> </p></div>'),Fr=x('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-11six79"> </span></div>'),zr=x('<span class="description-text text-xs text-gray-500 svelte-11six79"> </span>'),qr=x('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-11six79"> </span> <!></div>'),Kr=x('<div class="item-container svelte-11six79"><!> <!></div>');function Gr(S,t){Ie(t,!0);const s=ne(t,"mapView",7),v=ne(t,"runtime",3,null),g=new Rt;let b=C(null),a=C(null),E=C(""),D=C(rt([]));const A=G(()=>{const d=e(D);console.log("Filtering web maps with data:",d);const f=e(E).trim().toLowerCase();return f?d.filter(N=>{const p=N?.title?.toLowerCase()??"",L=N?.description?.toLowerCase()??"";return p.includes(f)||L.includes(f)}):d});nt(async()=>{const d=t.commandSearchContext.get(je);if(!d.getActiveOrganisationId()){console.warn("No active organisation selected in OrganisationCommandService");return}const N=d.getActiveOrganisationPortalUrl(),p=d.getActiveOrganisationEndpoint(),L=d.getActiveOrganisationQueryParams(),I=Object.entries(L).map(([h,u])=>`${h}:"${u}"`).join(" AND ");await g.load(N+p,{query:{q:'type:"Web Map"'+(I?` AND ${I}`:""),num:100,f:"json"}}),r(D,(g.data?.results??[]).map(h=>({id:h.id,title:h.title,description:Ot(h.description),owner:h.owner,tags:h.tags})),!0)});let M=null,y=null,O=t.inputPlaceholder??"Search...";Qe(()=>{const d=v(),f=t.inputPlaceholder??"Search...";if(!d){M?.(),M=null,y=null,O=f,r(E,"");return}if(d===y){f!==O&&(d.setPlaceholder(f),O=f);return}M?.(),M=null,O=f,M=d.attachInputBinding({placeholder:f,onInput:N=>{r(E,N,!0)}}),y=d}),it(()=>{M?.(),M=null,y=null});async function q(d){if(!s()){console.error("MapView is not initialized"),r(a,"MapView is not ready. Please wait and try again.");return}r(b,d,!0),r(a,null);try{console.log(`Loading web map with ID: ${d}`);const f=t.commandSearchContext.get(je);if(!f.getActiveOrganisationId()){console.warn("No active organisation selected in OrganisationCommandService");return}const p=f.getActiveOrganisationPortalUrl(),{default:L}=await ye(async()=>{const{default:l}=await import("../chunks/CyyQp0Rw.js").then(m=>m.W);return{default:l}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166]),import.meta.url),I=new L({portalItem:{id:d,portal:{url:p}}});await I.load(),console.log("Web map loaded successfully"),console.log("Applying web map to MapView",s().ui),s().map=I,console.log("Web map applied to MapView"),await(await ye(()=>import("../chunks/D5lfJVJF.js"),__vite__mapDeps([20,4,2,3]),import.meta.url)).whenOnce(()=>s().ready),console.log("MapView updated with new web map");const u=I.initialViewProperties?.viewpoint?.targetGeometry;u&&(console.log("Navigating to web map initial viewpoint"),await s().goTo(u),console.log("MapView navigated to web map initial viewpoint")),v()?.setIsOpen(!1)}catch(f){console.error("Error loading web map:",f),r(a,f instanceof Error?f.message:"Failed to load web map",!0)}finally{r(b,null)}}var F=Kr(),V=w(F);{var H=d=>{var f=jr(),N=w(f),p=w(N,!0);_(N),_(f),Z(()=>te(p,e(a))),i(d,f)};U(V,d=>{e(a)&&d(H)})}var Q=X(V,2);z(Q,()=>st,(d,f)=>{f(d,{children:(N,p)=>{var L=j(),I=R(L);{var h=l=>{var m=j(),k=R(m);z(k,()=>lt,(T,P)=>{P(T,{children:(K,B)=>{Le();var $=ke("No web maps match your search.");i(K,$)},$$slots:{default:!0}})}),i(l,m)},u=l=>{var m=j(),k=R(m);Ye(k,17,()=>e(A),T=>T.id,(T,P)=>{var K=j(),B=R(K);z(B,()=>ct,($,re)=>{re($,{onclick:()=>q(e(P).id),children:(De,Se)=>{var Y=j(),Ae=R(Y);{var Fe=pe=>{var me=Fr(),le=w(me);yt(le,{class:"size-4"});var se=X(le,2),Te=w(se);_(se),_(me),Z(()=>te(Te,`Loading ${e(P).title??"Untitled web map"??""}...`)),i(pe,me)},Ne=pe=>{var me=qr(),le=w(me),se=w(le,!0);_(le);var Te=X(le,2);{var n=c=>{var o=zr(),W=w(o,!0);_(o),Z(()=>{Ze(o,"title",e(P).description),te(W,e(P).description)}),i(c,o)};U(Te,c=>{e(P).description&&c(n)})}_(me),Z(()=>{Ze(le,"title",e(P).title),te(se,e(P).title??"Untitled web map")}),i(pe,me)};U(Ae,pe=>{e(b)===e(P).id?pe(Fe):pe(Ne,!1)})}i(De,Y)},$$slots:{default:!0}})}),i(T,K)}),i(l,m)};U(I,l=>{e(A).length===0?l(h):l(u,!1)})}i(N,L)},$$slots:{default:!0}})}),_(F),i(S,F),Pe()}var Hr=x('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-1w2u78y"> </span></div>'),Qr=x('<div class="item-container svelte-1w2u78y"><!></div>');function Yr(S,t){Ie(t,!0);const s=ne(t,"runtime",3,null);let v=C(rt([])),g=C("");nt(async()=>{const y=t.commandSearchContext.get(_t)?.organisations;if(!y){console.warn("No organisation configuration found in MapsConfig");return}r(v,y,!0)});let b=null,a=null,E=t.inputPlaceholder??"Search...";Qe(()=>{const y=s(),O=t.inputPlaceholder??"Search...";if(!y){b?.(),b=null,a=null,E=O,r(g,"");return}if(y===a){O!==E&&(y.setPlaceholder(O),E=O);return}b?.(),b=null,E=O,b=y.attachInputBinding({placeholder:O,onInput:q=>{r(g,q,!0)}}),a=y}),it(()=>{b?.(),b=null,a=null});function D(y){t.commandSearchContext.get(je).setActiveOrganisation(y),s()&&s().deactivate()}var A=Qr(),M=w(A);z(M,()=>st,(y,O)=>{O(y,{children:(q,F)=>{var V=j(),H=R(V);{var Q=f=>{var N=j(),p=R(N);z(p,()=>lt,(L,I)=>{I(L,{children:(h,u)=>{Le();var l=ke("No organisations match your search.");i(h,l)},$$slots:{default:!0}})}),i(f,N)},d=f=>{var N=j(),p=R(N);Ye(p,17,()=>e(v),L=>L.name,(L,I)=>{var h=j(),u=R(h);z(u,()=>ct,(l,m)=>{m(l,{onclick:()=>D(e(I).id),children:(k,T)=>{var P=Hr(),K=w(P),B=w(K,!0);_(K),_(P),Z(()=>te(B,e(I).name??"Untitled organisation")),i(k,P)},$$slots:{default:!0}})}),i(L,h)}),i(f,N)};U(H,f=>{e(v).length===0?f(Q):f(d,!1)})}i(q,V)},$$slots:{default:!0}})}),_(A),i(S,A),Pe()}class Xr{services=new Map;globalVariables=new Map;add(t,s){this.services.set(t,s),s instanceof Et&&this.globalVariables.set(t,s)}get(t){const s=this.services.get(t);if(!s)throw new Error(`Service not found for token: ${t.name}`);return s}has(t){return this.services.has(t)}getGlobalVariables(){return Array.from(this.globalVariables.values())}}globalThis.process?.versions?.webcontainer;ye(()=>import("../chunks/BIHI7g3E.js"),[],import.meta.url).then(S=>new S.AsyncLocalStorage).catch(()=>{});var Zr=x('<div class="error-message svelte-1lap2l5"><p class="text-sm text-red-600"> </p></div>'),Jr=x('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-1lap2l5"> </span></div>'),ea=x('<span class="description-text text-xs text-gray-500 svelte-1lap2l5"> </span>'),ta=x('<span class="text-[11px] text-muted-foreground"> </span>'),ra=x('<span class="text-[11px] text-muted-foreground"> <!></span>'),aa=x('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-1lap2l5"> </span> <!> <!> <!></div>'),na=x('<div class="item-container svelte-1lap2l5"><!> <!></div>');function oa(S,t){Ie(t,!0);const s=ne(t,"mapView",7),v=ne(t,"runtime",3,null),g=new Rt;let b=C(null),a=C(null),E=C(""),D=C(rt([]));const A=new Map,M={27700:"OS_Open_Background"},y=G(()=>{const u=e(D),l=e(E).trim().toLowerCase();return l?u.filter(m=>{const k=m?.title?.toLowerCase()??"",T=m?.description?.toLowerCase()??"";return k.includes(l)||T.includes(l)}):u});nt(async()=>{const u=t.commandSearchContext.get(je);if(!u.getActiveOrganisationId()){console.warn("No active organisation selected in OrganisationCommandService");return}const m=u.getActiveOrganisationPortalUrl(),k=u.getActiveOrganisationEndpoint(),P=`type:(${["Feature Layer","Feature Service","Map Service","Image Service"].map($=>`"${$}"`).join(" OR ")})`,K=u.getActiveOrganisationQueryParams(),B=Object.entries(K).map(([$,re])=>`${$}:"${re}"`).join(" AND ");await g.load(m+k,{query:{q:`${P}`+(B?` AND ${B}`:""),num:100,f:"json"}}),r(D,(g.data?.results??[]).map($=>({id:$.id,title:$.title,description:Ot($.description),owner:$.owner,type:$.type,spatialReferenceWkid:$.spatialReference?.wkid??$.spatialReference?.latestWkid})),!0),A.clear();for(const $ of e(D))A.set($.id,$)});let O=null,q=null,F=t.inputPlaceholder??"Search...";Qe(()=>{const u=v(),l=t.inputPlaceholder??"Search...";if(!u){O?.(),O=null,q=null,F=l,r(E,"");return}if(u===q){l!==F&&(u.setPlaceholder(l),F=l);return}O?.(),O=null,F=l,O=u.attachInputBinding({placeholder:l,onInput:m=>{r(E,m,!0)}}),q=u}),it(()=>{O?.(),O=null,q=null});async function V(u){if(!s()||!s().map){console.error("Map or MapView is not initialized"),r(a,"Map is not ready. Please wait and try again.");return}r(b,u,!0),r(a,null);try{console.log(`Loading layer with portal item ID: ${u}`);const l=t.commandSearchContext.get(je);if(!l.getActiveOrganisationId()){console.warn("No active organisation selected in OrganisationCommandService");return}const k=l.getActiveOrganisationPortalUrl(),[{default:T},{default:P}]=await Promise.all([ye(()=>import("../chunks/CLUeyY5c.js").then(re=>re.L),__vite__mapDeps([21,6,1,2,3,4,5,7,8,12,13,22,16,23,24,25,26,27,28]),import.meta.url),ye(()=>import("../chunks/DWuFonT6.js").then(re=>re.P),__vite__mapDeps([29,6,1,2,3,4,5,7,8,16,13,24,23,25,26,27,28]),import.meta.url)]),K=new P({url:k}),B=await T.fromPortalItem({portalItem:{id:u,portal:K}});await B.load();const $=await H(B,u);await N($),s().map.add(B),console.log("Layer added to the map");try{await s().whenLayerView(B),B.fullExtent&&await s().goTo(B.fullExtent)}catch(re){console.warn("Layer view not ready for navigation",re)}v()?.setIsOpen(!1)}catch(l){console.error("Error loading layer:",l),r(a,l instanceof Error?l.message:"Failed to add layer",!0)}finally{r(b,null)}}async function H(u,l){const m=Q(u);if(m)return m;const k=A.get(l);if(k?.spatialReferenceWkid){const{default:P}=await ye(async()=>{const{default:K}=await import("../chunks/DsdqSOQR.js").then(B=>B.ak);return{default:K}},__vite__mapDeps([25,1,2,3,4,5,6,26,7,8,27]),import.meta.url);return new P({wkid:k.spatialReferenceWkid})}const T=u.portalItem?.spatialReference;return T||null}function Q(u){return u?.spatialReference??null}function d(u){if(!u)return;const l=u;return u.wkid??l?.latestWkid??void 0}async function f(u){if(!s()||!s().map)return console.warn("MapView or Map is not available for basemap loading"),null;if(!u)return s().map.basemap;const l=M[u];if(!l)return s().map.basemap;const{default:m}=await ye(async()=>{const{default:k}=await import("../chunks/D9LecJbg.js").then(T=>T.B);return{default:k}},__vite__mapDeps([10,6,1,2,3,4,5,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]),import.meta.url);try{return await m.fromId(l)}catch(k){return console.warn(`Failed to load basemap ${l}`,k),s().map.basemap}}async function N(u){if(!s()||!s().map||!u){console.log("MapView or target spatial reference is not available","mapView:",s(),"target:",u);return}const l=d(u),m=d(s().spatialReference??void 0);if(console.log(`Ensuring map view spatial reference compatibility: target WKID=${l}, current WKID=${m}`),!l||l===m)return;const[{default:k}]=await Promise.all([ye(()=>import("../chunks/DIGTz9Fo.js").then($=>$.M),__vite__mapDeps([9,1,2,3,4,5,10,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]),import.meta.url)]),T=await f(l),P=s().map.layers.toArray(),K=s().map.ground;s().map.removeAll();const B=new k({basemap:T??void 0,ground:K});B.spatialReference=u,B.layers.addMany(P),s().map=B,await s().when()}var p=na(),L=w(p);{var I=u=>{var l=Zr(),m=w(l),k=w(m,!0);_(m),_(l),Z(()=>te(k,e(a))),i(u,l)};U(L,u=>{e(a)&&u(I)})}var h=X(L,2);z(h,()=>st,(u,l)=>{l(u,{children:(m,k)=>{var T=j(),P=R(T);{var K=$=>{var re=j(),De=R(re);z(De,()=>lt,(Se,Y)=>{Y(Se,{children:(Ae,Fe)=>{Le();var Ne=ke("No layers match your search.");i(Ae,Ne)},$$slots:{default:!0}})}),i($,re)},B=$=>{var re=j(),De=R(re);Ye(De,17,()=>e(y),Se=>Se.id,(Se,Y)=>{var Ae=j(),Fe=R(Ae);z(Fe,()=>ct,(Ne,pe)=>{pe(Ne,{onclick:()=>V(e(Y).id),children:(me,le)=>{var se=j(),Te=R(se);{var n=o=>{var W=Jr(),J=w(W);yt(J,{class:"size-4"});var ae=X(J,2),Oe=w(ae);_(ae),_(W),Z(()=>te(Oe,`Loading ${e(Y).title??"Untitled layer"??""}...`)),i(o,W)},c=o=>{var W=aa(),J=w(W),ae=w(J,!0);_(J);var Oe=X(J,2);{var Je=oe=>{var ee=ea(),Me=w(ee,!0);_(ee),Z(()=>{Ze(ee,"title",e(Y).description),te(Me,e(Y).description)}),i(oe,ee)};U(Oe,oe=>{e(Y).description&&oe(Je)})}var Ee=X(Oe,2);{var ze=oe=>{var ee=ta(),Me=w(ee,!0);_(ee),Z(()=>te(Me,e(Y).type??"")),i(oe,ee)};U(Ee,oe=>{e(Y).type&&oe(ze)})}var qe=X(Ee,2);{var et=oe=>{var ee=ra(),Me=w(ee),de=X(Me);{var xe=ve=>{var ce=ke();ce.nodeValue=" (auto aligns view)",i(ve,ce)};U(de,ve=>{M[e(Y).spatialReferenceWkid]&&ve(xe)})}_(ee),Z(()=>te(Me,`WKID ${e(Y).spatialReferenceWkid??""} `)),i(oe,ee)};U(qe,oe=>{e(Y).spatialReferenceWkid&&oe(et)})}_(W),Z(()=>{Ze(J,"title",e(Y).title),te(ae,e(Y).title??"Untitled layer")}),i(o,W)};U(Te,o=>{e(b)===e(Y).id?o(n):o(c,!1)})}i(me,se)},$$slots:{default:!0}})}),i(Se,Ae)}),i($,re)};U(P,$=>{e(y).length===0?$(K):$(B,!1)})}i(m,T)},$$slots:{default:!0}})}),_(p),i(S,p),Pe()}var ia=x("<arcgis-layer-list></arcgis-layer-list>",2),sa=x('<div id="search-slot" class="absolute top-3 left-1/2 z-10 -translate-x-1/2"><!></div>'),la=x("<arcgis-map><!></arcgis-map>",2);function Ta(S,t){Ie(t,!0);const s=new Xr;let v=C(null),g=C(null),b=C(null),a=C(null),E=C(null),D=C(null),A=C(null),M=C(null),y=C(!1);nt(async()=>{const p=await O(),L=new je(p.organisations);s.add(_t,p),s.add(je,L),await F(),r(E,V(),!0),r(D,H(),!0),r(A,Q(),!0),r(M,d(),!0)});async function O(){const p=await fetch(gr("/config/maps/config.json"));if(!p.ok)throw new Error(`Failed to load maps config: ${p.status} ${p.statusText}`);const L=await p.json();return new _t(L.organisations)}async function q(){e(b)&&(r(v,e(b).view,!0),e(a)&&(e(a).view=e(v)))}async function F(){await ye(()=>import("../chunks/kZyBtB9e.js").then(p=>p.a),__vite__mapDeps([167,168,169,160,4,2,3,20,170,171,14,5,1,172,6,11,12,13,8,22,173,174,31,7,26,40,28,19,21,16,23,24,25,27,175,176,177,70,178,179]),import.meta.url),await ye(()=>import("../chunks/6I2IPugL.js"),__vite__mapDeps([180,181,169,160,4,2,3,20,170,182,183,184,185,186,187,188,189,190,171,191,192,168,14,5,1,172,31,12,13,7,6,8,26,176,193,74,11,21,22,16,23,24,25,27,28,69,194,34,35,36,18,19,47,94,95,49,50,195,144,145,136,137,72,38,73,15,29,39,75,76,77,78,79,80,196,147,148,197,117,118,119,198,199,200,201,99,202,98,203,204,205,133,134,135,112,113,114,115,67,68,70,55,46,56,71,109,116,122,138,57,139,140,61,141,142,143,146,111,120,121,123,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,179]),import.meta.url),await ye(()=>import("../chunks/BTFFNXsn.js"),__vite__mapDeps([234,181,169,160,4,2,3,20,170,182,183,235,186,188,236,191,171,190,237,238,239,240,198,168,14,5,1,172,241,6,52,53,39,54,36,28,24,27,23,25,26,7,8,55,46,47,56,34,35,57,11,12,13,37,86,87,31,242,67,68,69,38,70,22,71,72,73,74,15,29,16,75,76,77,78,79,80,48,243,244,174,40,245,18,19,21,246,9,10,17,30,32,33,41,42,43,44,45,49,50,51,106,61,173,104,84,66,247,197,248,249,64,65,224,250,251,252,253,254,255,256,223,257,258,229,259,233,178,0,58,59,60,62,63,81,82,83,85,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,105,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,161,162,163,164,165,166]),import.meta.url)}it(()=>{r(E,null),r(D,null),r(A,null),r(M,null)});function V(){const p={id:"add-web-map",name:"Add web map",description:"Fetch and display web maps.",group:"Maps",shortcut:["Ctrl","M"],inputPlaceholder:"Search web maps...",execute:async L=>{},component:Gr,props:L=>({commandSearchContext:s,mapView:e(v),inputPlaceholder:p.inputPlaceholder})};return p}function H(){const p={id:"add-layer",name:"Add layers",description:"Fetch and display layers.",group:"Maps",shortcut:["Ctrl","L"],execute:async L=>{},component:oa,props:L=>({commandSearchContext:s,mapView:e(v),inputPlaceholder:p.inputPlaceholder})};return p}function Q(){return{id:"add-organisation",name:"Add organisation",description:"Find and add an organisation to filter items by.",group:"Maps",shortcut:["Ctrl","O"],inputPlaceholder:"Search organisations...",component:Yr,execute:async p=>{},props:p=>({commandSearchContext:s,inputPlaceholder:"Search organisations..."})}}function d(){return{id:"clear-map",name:"Clear map",description:"Clear all layers and reset the map view.",shortcut:["Ctrl","C"],execute:async p=>{e(v)&&e(v).map?.layers.removeAll(),p.deactivate()}}}var f=j(),N=R(f);{const p=I=>{var h=ia();ot(h,"listItemCreatedFunction",u=>{const{item:l}=u;l.layer.type!="group"&&(l.panel={content:"legend",open:!0})}),at(h,u=>r(a,u),()=>e(a)),i(I,h)},L=I=>{var h=la();wt(h,1,"relative h-full w-full"),ot(h,"basemap","gray"),ot(h,"center","-2.231774828836059,53.46531847221502"),ot(h,"zoom","15");var u=w(h);{var l=m=>{var k=sa(),T=w(k);{let P=G(()=>[e(A),e(E),e(D),e(M)]);Ur(T,{class:"w-full max-w-md",get commandSearchContext(){return s},get commands(){return e(P)},get ref(){return e(g)},set ref(K){r(g,K,!0)}})}_(k),i(m,k)};U(u,m=>{e(E)&&e(D)&&e(A)&&e(M)&&m(l)})}_(h),at(h,m=>r(b,m),()=>e(b)),gt("arcgisViewReadyChange",h,q),i(I,h)};z(N,()=>pr,(I,h)=>{h(I,{get isOpen(){return e(y)},onToggle:()=>r(y,!e(y)),sidebarContent:p,mainContent:L,$$slots:{sidebarContent:!0,mainContent:!0}})})}i(S,f),Pe()}export{Ta as component};
