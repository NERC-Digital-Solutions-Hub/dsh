const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DpAKiq6K.js","../chunks/BW0zoJTm.js","../chunks/CEBETtrS.js","../chunks/CaNW5Bx0.js","../chunks/PPVm8Dsz.js","../chunks/BUsxo-Ec.js","../chunks/D0nkGZIM.js","../chunks/BEZFO2vt.js","../chunks/CjBjO1Km.js","../chunks/CVQPxYbx.js","../chunks/DwerzRSF.js","../chunks/y1GB1Svy.js","../chunks/AlyPEkJM.js","../chunks/DFYTeVXP.js","../chunks/Cn9cIaVC.js","../chunks/BTNr9f9k.js","../chunks/EmFT8XhJ.js","../chunks/jYVHtrPb.js","../chunks/Cp_8tW2x.js","../chunks/BAWfW4Tu.js","../chunks/CumW50Sh.js","../chunks/Ci6C1k20.js","../chunks/bnayRBMH.js","../chunks/TJ-VhDZ5.js","../chunks/B0gOzRRh.js","../chunks/TW8D_o5j.js","../chunks/Oe6SV2kF.js","../chunks/B_yBz6pZ.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/CW6Redn4.js","../chunks/BnQsZfR4.js","../chunks/BYduSOTS.js","../chunks/PJHcqbvL.js","../chunks/DS2ZxNQA.js","../chunks/Djp3mnm5.js","../chunks/DjNaDsmS.js","../chunks/C-w03I0l.js","../chunks/D9kT-sgB.js","../chunks/Bu0s_rAF.js","../chunks/B87vTgcy.js","../chunks/C3_gy5al.js","../chunks/CfBiQUdY.js","../chunks/BABeDC_w.js","../chunks/XEmGDYB_.js","../chunks/BVFIxAn9.js","../chunks/CAO_3SU9.js","../chunks/0N6-HNAU.js","../chunks/CglP3OMz.js","../chunks/DCBLidga.js","../chunks/B934cuUn.js","../chunks/C1gSvD9v.js","../chunks/PWd9QCpP.js","../chunks/BwN_j92a.js","../chunks/Bde99gqs.js","../chunks/C7fxqwFZ.js","../chunks/CVwTD0fV.js","../chunks/9eAP65Ji.js","../chunks/mOc398RU.js","../chunks/DPJXGPFY.js","../chunks/B8cN3yAo.js","../chunks/BIj_QgNJ.js","../chunks/q_b6UJoq.js","../chunks/CYI1luaL.js","../chunks/DTEZVyiP.js","../chunks/BCTmL8G8.js","../chunks/DhMSIuCj.js","../chunks/CSXZNpHb.js","../chunks/xXH_AyYh.js","../chunks/CTnd5cvu.js","../chunks/CHAiFIco.js","../chunks/Dj-cqQsY.js","../chunks/B128_oTY.js","../chunks/6Jo1niE7.js","../chunks/DjNuiUVf.js","../chunks/CpqG7TFG.js","../chunks/D_dxbuU-.js","../chunks/jQbrml54.js","../chunks/uHWM1awI.js","../chunks/CYEJx0Wq.js","../chunks/BteoTDFn.js","../chunks/B7Ex7sMf.js","../chunks/DocBEfKB.js","../chunks/B2jVc7id.js","../chunks/Da4sQo3R.js","../chunks/CAGdFHZB.js","../chunks/DzvuCIKa.js","../chunks/Bu0Dv00G.js","../chunks/Bo5l4fk8.js","../chunks/48RKFPo7.js","../chunks/TEMnSu_8.js","../chunks/Ch4klalT.js","../chunks/CQmZIYPi.js","../chunks/DsEHuRPb.js","../chunks/BARRAGjD.js","../chunks/DwIB5gq4.js","../chunks/BjGHVp5Q.js","../chunks/lEIzcqu9.js","../chunks/CtIxBnU3.js","../chunks/gJDQstGQ.js","../chunks/Cl8hT7Dy.js","../chunks/hngUoOdp.js","../chunks/BlT3hoGo.js","../chunks/DZpEp5b3.js","../chunks/GKolV7NZ.js","../chunks/PiqJyY-Z.js","../chunks/CWQ4Sji6.js","../chunks/Cc8znHts.js","../chunks/C9Yzh9th.js","../chunks/CMFr2xVw.js","../chunks/B8kDL1f4.js","../chunks/Bo-exx2O.js","../chunks/BFHafdW6.js","../chunks/D5cGnOsZ.js","../chunks/CCtOv0E5.js","../chunks/DhzudQro.js","../chunks/Qzt__3Yd.js","../chunks/mx71iuXv.js","../chunks/E5yhiq2t.js","../chunks/B2om5830.js","../chunks/CrUuvTSr.js","../chunks/DNQVkPqp.js","../chunks/WCLBMBm-.js","../chunks/BveQ3Yw2.js","../chunks/EGFv0f86.js","../chunks/BDRaqLVR.js","../chunks/BlaSF0Se.js","../chunks/mBdPBegd.js","../chunks/Cu3emot3.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/DS8kW6UP.js","../chunks/1BM1gK8E.js","../chunks/DPb6J-GU.js","../chunks/BxTLSXBH.js","../chunks/BGyY2giR.js","../chunks/D28RTRrm.js","../chunks/C65Zrur8.js","../chunks/DwnB9djr.js","../chunks/CUTkbj50.js","../chunks/DE7psHTV.js","../chunks/Fla_WrMr.js","../chunks/CVRs03iK.js","../chunks/g8mGjH5g.js","../chunks/D1UBzOg5.js","../chunks/DvKU1K2H.js","../chunks/C8HgMPMV.js","../chunks/BqUxlKJa.js","../chunks/CzWdKr8p.js","../chunks/C2FvnhIN.js","../chunks/B0DG5wVw.js","../chunks/CaYZrGFV.js","../chunks/BRIeeldl.js","../chunks/B-myf1ZS.js","../chunks/B45SJMf_.js","../assets/jsxFactory.CQED0rIl.css","../chunks/2dBEZGc-.js","../assets/component-utils.R4SXog4D.css","../chunks/BqXNu7b5.js","../chunks/Ba6e521d.js","../chunks/DER5P13g.js","../chunks/Byx8h0ay.js","../chunks/BQBvadb7.js","../chunks/D-YQ4CHs.js","../chunks/BpMm_bKu.js","../chunks/DN8pD2EM.js","../chunks/GCVPM2bX.js","../chunks/3vzEJNVc.js","../chunks/C1a7zHTx.js","../chunks/BWEUlARE.js","../chunks/Cba5hWeF.js","../chunks/06ySslQQ.js","../chunks/DlHjpvET.js","../chunks/Dp15eoVC.js","../chunks/DtjklSP3.js","../chunks/Bl9gULnU.js","../chunks/upW12MZ5.js","../chunks/DGnEEsyW.js","../chunks/-tLY_6gf.js","../chunks/DhDrCS8X.js","../chunks/s7y6ZYeW.js","../chunks/COsUduS5.js","../chunks/fxczVhmx.js","../chunks/tfsDxZdG.js","../chunks/D6zlzagn.js","../chunks/Caulfaw_.js","../chunks/DCTsuy_4.js","../chunks/CnyFIUVt.js","../chunks/DKzVzLpH.js","../chunks/BEQnBRaB.js","../chunks/BvOub3JO.js","../chunks/e98d0pcw.js","../chunks/CUjVhFqY.js","../chunks/CXu_ESHL.js","../chunks/DRPDV87L.js","../chunks/DUN1HABK.js","../chunks/Pg2iTJw5.js","../chunks/8WtPGj6h.js","../chunks/CG7ZQ6BV.js","../chunks/BeVzuV2m.js","../chunks/Cef1xHaC.js","../chunks/BvER9tXK.js","../chunks/B9Dt7Ynm.js","../chunks/COg86Xge.js","../chunks/DWpwVUOd.js","../chunks/DeOh5xmU.js","../chunks/B3KWAeZ2.js","../chunks/C34EDYhX.js","../chunks/Bxxl7NsE.js","../chunks/CaVKkSa6.js","../chunks/CUzevAry.js","../chunks/C8zGwbjb.js","../chunks/DOU46fny.js","../chunks/CxntQxa8.js","../chunks/B21jgz5M.js","../chunks/CHMqct6U.js","../chunks/DJfmhI_b.js","../chunks/CqSK9vE_.js","../chunks/teoI27Zt.js","../chunks/BgIfDPrD.js","../chunks/Bl0cSKE5.js","../chunks/HTOW8iPe.js","../chunks/BzyQLkBI.js","../chunks/DuIgqnlY.js","../chunks/CbvgmFLt.js","../chunks/DaQyK3nQ.js","../chunks/CZyMpCUL.js","../chunks/7808le4B.js","../chunks/DqwAHjQA.js","../chunks/CFxQi9ff.js","../chunks/CRNKQexD.js","../chunks/DfDynnwy.js","../chunks/Cgb6qxNH.js","../chunks/_r5V6nso.js","../chunks/TQki0tx9.js","../chunks/Bb7XCc95.js","../chunks/BrT4CCe6.js","../chunks/B1N-tmtC.js","../chunks/CEtlHNOR.js","../chunks/BZKeGk9D.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/BpZHOvkG.js","../chunks/DQOO6RKE.js","../chunks/Bi6C4OG6.js"])))=>i.map(i=>d[i]);
import{_ as Pe}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as ot,a as lt}from"../chunks/B12Xl85d.js";import{f as b,p as Re,c as h,n as It,r as _,a as Ee,a7 as oe,T as ae,v as e,a8 as Z,W as Fe,aG as P,av as Ye,u as He,ar as r,aX as Ht,aY as Qt,aK as Yt}from"../chunks/l2HDBFeU.js";import{e as Xt,g as ht}from"../chunks/7Q11sfri.js";import{c as L,a as o,f as x,t as Be}from"../chunks/D3mgKXxP.js";import{l as Jt,s as Xe,p as ue,r as xt,i as W}from"../chunks/amrQSy0T.js";import{c as Y}from"../chunks/BULd4hFL.js";import{a as Zt,e as St,b as st,s as Je,f as it}from"../chunks/B2XAts-z.js";import{b as at}from"../chunks/CPWKExeQ.js";import{s as le}from"../chunks/CPxvWa6q.js";import{s as At,e as Qe,i as er}from"../chunks/Dv6QOWAw.js";import{I as tr,s as rr,e as ar,f as nr,S as yt,g as ct,h as ut,i as dt}from"../chunks/xE6fRQiE.js";import{c as ft}from"../chunks/DzE4wJgV.js";import{X as or,A as ir,a as sr,b as lr}from"../chunks/De6S0tni.js";import"../chunks/69_IOA4Y.js";import{C as cr}from"../chunks/Cgb8ZoOw.js";import{S as nt,a as ur}from"../chunks/DqC0T5S3.js";import{B as dr}from"../chunks/Cycc-Qfx.js";import{I as fr}from"../chunks/D9YRtp1B.js";import{H as mr}from"../chunks/BUsxo-Ec.js";import{c as Ot,S as pr}from"../chunks/Kx36ldNz.js";import{a as vr,b as gr}from"../chunks/DO8-Np38.js";import"../chunks/B17Q6ahh.js";import{S as _r}from"../chunks/p_qY5EvW.js";import"../chunks/DhMSIuCj.js";import"../chunks/CaNW5Bx0.js";import"../chunks/BW0zoJTm.js";import"../chunks/CEBETtrS.js";function hr(O){return(vr||gr)+O}function yr(O,t){const i=Jt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const y=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]];tr(O,Xe({name:"command"},()=>i,{get iconNode(){return y},children:(d,I)=>{var n=L(),E=b(n);rr(E,t,"default",{}),o(d,n)},$$slots:{default:!0}}))}var wr=x("<span><!></span>");function xr(O,t){Re(t,!0);let i=ue(t,"ref",15,null),y=xt(t,["$$slots","$$events","$$legacy","ref","class","children"]);var d=wr();Zt(d,n=>({"data-slot":"command-shortcut",class:n,...y}),[()=>ft("text-muted-foreground ml-auto text-xs tracking-widest",t.class)]);var I=h(d);At(I,()=>t.children??It),_(d),at(d,n=>i(n),()=>i()),o(O,d),Ee()}function br(O,t){Re(t,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let i=xt(t,["$$slots","$$events","$$legacy"]);const y=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];fr(O,Xe({name:"arrow-left"},()=>i,{get iconNode(){return y},children:(d,I)=>{var n=L(),E=b(n);At(E,()=>t.children??It),o(d,n)},$$slots:{default:!0}})),Ee()}function Cr(O,t){O.stopPropagation(),t()?.()}var Pr=x('<button type="button" class="pointer-events-none flex h-4 w-0 items-center justify-center rounded text-muted-foreground opacity-0 transition-[width,margin-left,opacity] group-hover:pointer-events-auto group-hover:ml-1 group-hover:w-4 group-hover:opacity-100"><!></button>'),Ir=x('<div><span class="truncate"> </span> <!></div>');function $t(O,t){Re(t,!0);let i=ue(t,"onClose",3,null);const y=t.title??t.value;var d=Ir(),I=h(d),n=h(I,!0);_(I);var E=oe(I,2);{var S=$=>{var R=Pr();R.__click=[Cr,i];var C=h(R);or(C,{class:"size-3"}),_(R),ae(()=>Je(R,"aria-label",`Clear ${t.value}`)),o($,R)};W(E,$=>{i()&&$(S)})}_(d),ae($=>{st(d,1,$),Je(d,"title",y),le(n,t.value)},[()=>St(ft("group inline-flex max-w-[10rem] items-center overflow-hidden rounded border border-border px-1 py-0.5 text-xs font-medium text-muted-foreground transition-all",t.class))]),o(O,d),Ee()}Xt(["click"]);var Sr=x('<!> <span aria-hidden="true" class="h-5 w-px bg-border"></span>',1),Ar=x('<div class="flex h-9 items-center gap-2 border-b pl-2" data-slot="command-input-wrapper"><span class="flex h-full min-w-[1.25rem] shrink-0 items-center justify-center text-muted-foreground"><!></span> <!> <!></div>');function Or(O,t){Re(t,!0);let i=ue(t,"ref",15,null),y=ue(t,"value",15,""),d=ue(t,"iconProps",19,()=>({})),I=ue(t,"onCommandClose",3,null),n=xt(t,["$$slots","$$events","$$legacy","ref","class","value","icon","iconProps","commandId","onCommandClose"]);var E=Ar(),S=h(E),$=h(S);{var R=A=>{const ee=Z(()=>t.icon);var te=L(),f=b(te);Y(f,()=>e(ee),(m,k)=>{k(m,Xe(d))}),o(A,te)},C=A=>{yr(A,{class:"size-4 opacity-50"})};W($,A=>{t.icon?A(R):A(C,!1)})}_(S);var j=oe(S,2);{var B=A=>{var ee=Sr(),te=b(ee);$t(te,{get value(){return t.commandId},get title(){return t.commandId},get onClose(){return I()}}),Fe(2),o(A,ee)};W(j,A=>{t.commandId&&A(B)})}var q=oe(j,2);{let A=Z(()=>ft("flex h-10 flex-1 rounded-md bg-transparent py-3 text-sm outline-hidden placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t.class));Y(q,()=>ar,(ee,te)=>{te(ee,Xe({"data-slot":"command-input",get class(){return e(A)}},()=>n,{get ref(){return i()},set ref(f){i(f)},get value(){return y()},set value(f){y(f)}}))})}_(E),o(O,E),Ee()}function $r(O,t){Re(t,!0);const i=ue(t,"disabled",3,!1);dr(O,{class:"m-0 flex size-7 shrink-0 items-center justify-center rounded-md border-none bg-transparent p-0 text-muted-foreground opacity-50 shadow-none transition hover:bg-transparent hover:text-accent-foreground focus:outline-none focus-visible:border-transparent focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none active:ring-0 active:outline-none disabled:pointer-events-none disabled:opacity-50 has-[>svg]:px-0",onclick:()=>{i()||t.onPress?.()},"aria-label":"Return to command search",get disabled(){return i()},children:(y,d)=>{{let I=Z(()=>`size-4 ${t.class}`.trim());br(y,{get class(){return e(I)}})}},$$slots:{default:!0}}),Ee()}var Rr=x('<div class="flex flex-wrap gap-2 px-2 py-0.5"></div>'),Er=x('<span class="text-xs text-muted-foreground"> </span>'),Mr=x('<div class="flex flex-col gap-0.5"><span class="text-sm leading-tight font-medium"> </span> <!></div> <!>',1),Vr=x("<!> <!>",1),Lr=x('<div class="px-4 pb-3"><!></div>'),kr=x("<!> <!>",1),Dr=x('<div class="px-4 pb-3"><!></div>'),Nr=x('<p class="text-sm text-muted-foreground">No panel registered for this command.</p>'),Tr=x('<div class="pr-2 pb-2 pl-2"><!></div>'),Wr=x("<!> <!> <!>",1),jr=x("<!> <!>",1),Fr=x("<!> <!>",1),Br=x("<div><!></div>");function Ur(O,t){Re(t,!0);let i=ue(t,"ref",15,null),y=ue(t,"commands",19,()=>[]),d=ue(t,"placeholder",3,"Search commands..."),I=ue(t,"emptyMessage",3,"No commands found."),n=P(null),E=P(null),S=P(null),$=P(null),R=P(null),C=P(null),j=P(Ye([])),B=P(""),q=P(!1),A=P(Ye(d())),ee=P(null),te=!1,f=P(null),m=!1,k=null,p=null,D=0,w=null;const v=Z(()=>{const a=new Map;for(const u of y())a.set(u.id,u);return Array.from(a.values())}),re=Z(()=>{const a=new Map;for(const u of e(v)){const s=u.group??null,g=a.get(s);g?g.push(u):a.set(s,[u])}return a});ot(()=>{We()});function U(a,u=!1){u&&(te=!0),r(B,a,!0)}function X(a=null,u){if(!w||a&&w!==a)return;r(ee,null),w.placeholderOverridden&&r(A,d()),(u?.forceReset??(u?.skipReset?!1:w.resetValueOnDetach))&&(U("",!0),w.onInput("")),w.onDetach?.(),w=null}function ve(){X(null,{forceReset:!0}),r(ee,null),r(A,d()),te=!1}He(()=>{const a=e(ee);if(a){if(te){te=!1;return}a(e(B))}}),He(()=>{e(n)||r(A,d())});function l(){if(p)try{p()}catch(a){console.error("Failed to dispose command session",a)}p=null,r(S,null),r($,null),ve(),r(E,null)}function c(){e(n)&&(l(),r(n,null),r(C,null),r(R,null),U("",!0),r(q,!0))}function M(a){try{t.commandSearchContext.get(a.classType).clear()}catch(u){console.error("Failed to clear global variable",u)}finally{We()}}function z(){e(f)?.blur()}function ie(a,u){if(!a.component)return null;const s=a.props;return s?{component:a.component,props:()=>s(u)}:{component:a.component}}function G(a,u){const s=a.createSession?.(u);if(s){p=s.dispose??null,Object.prototype.hasOwnProperty.call(s,"input")?r(S,s.input??null,!0):r(S,null),Object.prototype.hasOwnProperty.call(s,"content")?r($,s.content??null,!0):r($,ie(a,u),!0);return}p=null,r(S,null),r($,ie(a,u),!0)}function J(a){const u=a.id;return{deactivate:()=>{!e(n)||e(n).id!==u||(c(),We())},isActive:s=>!e(n)||e(n).id!==u?!1:s?e(n).id===s:!0,setIsOpen:(s,g)=>{if(!e(n)||e(n).id!==u)return;if(s){m=!1,r(q,!0);return}const K=g?.preserveActive??!0;Me(K)},setInputSurface:s=>{!e(n)||e(n).id!==u||r(S,s,!0)},setContentSurface:s=>{!e(n)||e(n).id!==u||r($,s,!0)},getInputValue:()=>e(B),setInputValue:s=>{!e(n)||e(n).id!==u||U(s,!0)},setInputHandler:s=>{if(!(!e(n)||e(n).id!==u)){if(X(null,{skipReset:!0}),r(ee,s,!0),!s){te=!1;return}s(e(B))}},setPlaceholder:s=>{!e(n)||e(n).id!==u||r(A,s,!0)},resetPlaceholder:()=>{!e(n)||e(n).id!==u||r(A,d())},attachInputBinding:s=>{if(!e(n)||e(n).id!==u)return()=>{};X(null,{skipReset:!0});const g=s.placeholder??e(n).inputPlaceholder??d(),K={id:++D,commandId:u,onInput:s.onInput,onDetach:s.onDetach,placeholderOverridden:!!g,resetValueOnDetach:s.resetValueOnDetach??!0};w=K,K.placeholderOverridden&&g&&r(A,g,!0),r(ee,Le=>{!w||w.id!==K.id||s.onInput(Le)});const Q=s.resetValueOnAttach??!0,_e=s.replayInitialValue??!Q;return Q?(U("",!0),s.onInput("")):_e&&s.onInput(e(B)),()=>{X(K)}}}}function F(a){const u=e(E);if(!a)return u?{runtime:u}:{};if(!u)return{};const{props:s}=a;return s?{...typeof s=="function"?s(u):s,runtime:u}:{runtime:u}}function N(a){return`${a.name} ${a.description??""}`.trim()}async function H(a){if(e(n)?.id===a.id){c();return}l(),r(C,null),r(R,a.id,!0),r(q,!0),e(f)&&e(f).focus();const u=J(a);r(E,u,!0),r(n,a,!0),G(a,u);try{await a.execute(u)}catch(s){r(C,s instanceof Error?s:new Error("Failed to execute the command."),!0)}finally{r(R,null),U("",!0),We()}}function Te(a){const u=a.key.toLowerCase();if((a.metaKey||a.ctrlKey)&&u==="p"){if(a.preventDefault(),e(n)){c();return}e(f)&&e(f).focus();return}if(u==="escape"){if(e(n)){a.preventDefault(),c(),z();return}e(q)&&(a.preventDefault(),r(q,!1),z());return}if(!e(n))for(const g of e(v)){if(!g.shortcut)continue;const K=g.shortcut.join(" ").toLowerCase(),Q=[];if(a.metaKey&&Q.push("âŒ˜"),a.ctrlKey&&Q.push("Ctrl"),a.altKey&&Q.push("Alt"),a.shiftKey&&Q.push("Shift"),Q.push(a.key.length===1?a.key.toUpperCase():a.key),Q.join(" ").toLowerCase()===K.toLowerCase()){a.preventDefault(),H(g);break}}}function Ze(){r(q,!0)}function Me(a=!1){m=a,r(q,!1)}function et(a){const u=k;if(!u)return;const s=a.target;s&&u.contains(s)||e(q)&&Me(!!e(n))}He(()=>{if(!e(q)){if(U("",!0),!e(n)){m=!1;return}if(m){m=!1;return}l(),r(n,null),r(C,null)}});function We(){if(!t.commandSearchContext){r(j,[],!0);return}const a=t.commandSearchContext.getGlobalVariables(),u=[];for(const s of a){const g=s.getId();g&&u.push({displayName:s.displayName,id:g,classType:s.constructor})}r(j,u,!0)}var Ve=Br();ht("keydown",Ht,Te),ht("pointerdown",Qt,et);var we=h(Ve);Y(we,()=>nr,(a,u)=>{u(a,{children:(s,g)=>{var K=Fr(),Q=b(K);{let ke=Z(()=>e(n)?e(n).inputPlaceholder??e(A):e(A)),Ie=Z(()=>e(n)?$r:void 0),Se=Z(()=>e(n)?{onPress:c,disabled:e(R)===e(n).id}:void 0),je=Z(()=>e(n)?.id),tt=Z(()=>e(n)?c:null);Or(Q,{get placeholder(){return e(ke)},onfocus:()=>Ze(),get icon(){return e(Ie)},get iconProps(){return e(Se)},get commandId(){return e(je)},get onCommandClose(){return e(tt)},get value(){return e(B)},set value(Ue){r(B,Ue,!0)},get ref(){return e(f)},set ref(Ue){r(f,Ue,!0)}})}var _e=oe(Q,2);{var Le=ke=>{var Ie=jr(),Se=b(Ie);{var je=ce=>{var de=Rr();Qe(de,21,()=>e(j),he=>he.id,(he,fe)=>{{let xe=Z(()=>`${e(fe).displayName}: ${e(fe).id}`),Ae=Z(()=>`${e(fe).displayName}: ${e(fe).id}`);$t(he,{get value(){return e(xe)},get title(){return e(Ae)},onClose:()=>M(e(fe))})}}),_(de),o(ce,de)};W(Se,ce=>{e(j).length&&ce(je)})}var tt=oe(Se,2);{var Ue=ce=>{yt(ce,{children:(de,he)=>{var fe=L(),xe=b(fe);Y(xe,()=>ct,(Ae,rt)=>{rt(Ae,{children:(ge,De)=>{var me=Vr(),Oe=b(me);Y(Oe,()=>ut,(be,V)=>{V(be,{children:(T,ne)=>{Fe();var ye=Be();ae(()=>le(ye,I())),o(T,ye)},$$slots:{default:!0}})});var Ne=oe(Oe,2);Qe(Ne,17,()=>Array.from(e(re).entries()),er,(be,V)=>{var T=Z(()=>Yt(e(V),2));let ne=()=>e(T)[1];var ye=L(),Ce=b(ye);Qe(Ce,17,ne,pe=>pe.id,(pe,se)=>{var Ke=L(),ze=b(Ke);{let Mt=Z(()=>N(e(se)));Y(ze,()=>dt,(Vt,Lt)=>{Lt(Vt,{get value(){return e(Mt)},onclick:()=>H(e(se)),children:(kt,pa)=>{var bt=Mr(),pt=b(bt),vt=h(pt),Dt=h(vt,!0);_(vt);var Nt=oe(vt,2);{var Tt=$e=>{var Ge=Er(),gt=h(Ge,!0);_(Ge),ae(()=>le(gt,e(se).description)),o($e,Ge)};W(Nt,$e=>{e(se).description&&$e(Tt)})}_(pt);var Wt=oe(pt,2);{var jt=$e=>{nt($e,{class:"ml-auto size-4 text-muted-foreground"})},Ft=$e=>{var Ge=L(),gt=b(Ge);{var Bt=_t=>{var Ct=L(),Ut=b(Ct);Y(Ut,()=>xr,(zt,qt)=>{qt(zt,{children:(Kt,va)=>{Fe();var Pt=Be();ae(Gt=>le(Pt,Gt),[()=>e(se).shortcut?.join(" + ")]),o(Kt,Pt)},$$slots:{default:!0}})}),o(_t,Ct)};W(gt,_t=>{e(se).shortcut?.length&&_t(Bt)},!0)}o($e,Ge)};W(Wt,$e=>{e(R)===e(se).id?$e(jt):$e(Ft,!1)})}ae(()=>le(Dt,e(se).name)),o(kt,bt)},$$slots:{default:!0}})})}o(pe,Ke)}),o(be,ye)}),o(ge,me)},$$slots:{default:!0}})}),o(de,fe)},$$slots:{default:!0}})},mt=ce=>{var de=Wr(),he=b(de);{var fe=ge=>{const De=Z(()=>e(S).component);var me=Lr(),Oe=h(me);{let Ne=Z(()=>F(e(S)));Y(Oe,()=>e(De),(be,V)=>{V(be,Xe(()=>e(Ne)))})}_(me),o(ge,me)};W(he,ge=>{e(S)&&ge(fe)})}var xe=oe(he,2);{var Ae=ge=>{var De=Dr(),me=h(De);Y(me,()=>ir,(Oe,Ne)=>{Ne(Oe,{variant:"destructive",children:(be,V)=>{var T=kr(),ne=b(T);Y(ne,()=>sr,(Ce,pe)=>{pe(Ce,{children:(se,Ke)=>{Fe();var ze=Be();ae(()=>le(ze,`${e(n).name??""} failed`)),o(se,ze)},$$slots:{default:!0}})});var ye=oe(ne,2);Y(ye,()=>lr,(Ce,pe)=>{pe(Ce,{children:(se,Ke)=>{Fe();var ze=Be();ae(()=>le(ze,e(C).message)),o(se,ze)},$$slots:{default:!0}})}),o(be,T)},$$slots:{default:!0}})}),_(De),o(ge,De)};W(xe,ge=>{e(C)&&ge(Ae)})}var rt=oe(xe,2);yt(rt,{children:(ge,De)=>{var me=Tr(),Oe=h(me);{var Ne=V=>{const T=Z(()=>e($).component);var ne=L(),ye=b(ne);{let Ce=Z(()=>F(e($)));Y(ye,()=>e(T),(pe,se)=>{se(pe,Xe(()=>e(Ce)))})}o(V,ne)},be=V=>{var T=L(),ne=b(T);Y(ne,()=>cr,(ye,Ce)=>{Ce(ye,{class:"px-0",children:(pe,se)=>{var Ke=Nr();o(pe,Ke)},$$slots:{default:!0}})}),o(V,T)};W(Oe,V=>{e($)?V(Ne):V(be,!1)})}_(me),o(ge,me)},$$slots:{default:!0}}),o(ce,de)};W(tt,ce=>{e(n)?ce(mt,!1):ce(Ue)})}o(ke,Ie)};W(_e,ke=>{e(q)&&ke(Le)})}o(s,K)},$$slots:{default:!0}})}),_(Ve),at(Ve,a=>k=a,()=>k),at(Ve,a=>i(a),()=>i()),ae(a=>st(Ve,1,a),[()=>St(ft("space-y-4",t.class))]),o(O,Ve),Ee()}class wt{#e=[];constructor(t){this.#e=t}get organisations(){return this.#e}}class Rt{#e=P(null);#t=P(!1);#r=P(null);load=async(t,i)=>{r(this.#t,!0),r(this.#r,null);try{const y=await mr(t,{...i,responseType:"json"});console.log("Esri Request Response:",y,y.data.url),r(this.#e,y.data,!0)}catch(y){r(this.#r,y,!0)}finally{r(this.#t,!1)}};get data(){return e(this.#e)}get isLoading(){return e(this.#t)}get error(){return e(this.#r)}}class Et{colour=null;id=null;getId(){return this.id}setId(t){this.id=t}clear(){this.setId(null)}}class qe extends Et{displayName="org";organisations;constructor(t){super(),this.organisations=new Map(t.map(i=>[i.id,i])),t.length>0&&this.setId(t[0].id)}setActiveOrganisation(t){this.setId(t)}getActiveOrganisationId(){return this.id}getActiveOrganisationPortalUrl(){const t=this.organisations.get(this.getActiveOrganisationIdInternal());if(!t)throw new Error("No organisation is currently selected.");return t.portalUrl}getActiveOrganisationEndpoint(){const t=this.organisations.get(this.getActiveOrganisationIdInternal());if(!t)throw new Error("No organisation is currently selected.");return t.endpoint}getActiveOrganisationQueryParams(){const t=this.organisations.get(this.getActiveOrganisationIdInternal());if(!t)throw new Error("No organisation is currently selected.");return t.queryParams||{}}getActiveOrganisationIdInternal(){if(!this.id)throw new Error("No organisation is currently selected.");return this.id}}var zr=x('<div class="error-message svelte-11six79"><p class="text-sm text-red-600"> </p></div>'),qr=x('<div class="flex items-center justify-center p-4"><!></div>'),Kr=x('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-11six79"> </span></div>'),Gr=x('<span class="description-text text-xs text-gray-500 svelte-11six79"> </span>'),Hr=x('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-11six79"> </span> <!></div>'),Qr=x('<div class="item-container svelte-11six79"><!></div>');function Yr(O,t){Re(t,!0);const i=ue(t,"mapView",7),y=ue(t,"runtime",3,null),d=new Rt;let I=P(null),n=P(null),E=P(""),S=P(Ye([]));const $=Z(()=>{const f=e(S);console.log("Filtering web maps with data:",f);const m=e(E).trim().toLowerCase();return m?f.filter(k=>{const p=k?.title?.toLowerCase()??"",D=k?.description?.toLowerCase()??"";return p.includes(m)||D.includes(m)}):f});ot(async()=>{const f=t.commandSearchContext.get(qe);if(!f.getActiveOrganisationId()){console.warn("No active organisation selected in OrganisationCommandService");return}const k=f.getActiveOrganisationPortalUrl(),p=f.getActiveOrganisationEndpoint(),D=f.getActiveOrganisationQueryParams(),w=Object.entries(D).map(([v,re])=>`${v}:"${re}"`).join(" AND ");try{await d.load(k+p,{query:{q:'type:"Web Map"'+(w?` AND ${w}`:""),num:100,f:"json"}}),r(S,(d.data?.results??[]).map(v=>({id:v.id,title:v.title,description:Ot(v.description),owner:v.owner,tags:v.tags})),!0)}catch(v){console.error("Error fetching web maps:",v),r(n,v instanceof Error?v.message:"Failed to fetch web maps",!0)}});let R=null,C=null,j=t.inputPlaceholder??"Search...";He(()=>{const f=y(),m=t.inputPlaceholder??"Search...";if(!f){R?.(),R=null,C=null,j=m,r(E,"");return}if(f===C){m!==j&&(f.setPlaceholder(m),j=m);return}R?.(),R=null,j=m,R=f.attachInputBinding({placeholder:m,onInput:k=>{r(E,k,!0)}}),C=f}),lt(()=>{R?.(),R=null,C=null});async function B(f){if(!i()){console.error("MapView is not initialized"),r(n,"MapView is not ready. Please wait and try again.");return}r(I,f,!0),r(n,null);try{console.log(`Loading web map with ID: ${f}`);const m=t.commandSearchContext.get(qe);if(!m.getActiveOrganisationId()){console.warn("No active organisation selected in OrganisationCommandService");return}const p=m.getActiveOrganisationPortalUrl(),{default:D}=await Pe(async()=>{const{default:U}=await import("../chunks/DpAKiq6K.js").then(X=>X.W);return{default:U}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151]),import.meta.url),w=new D({portalItem:{id:f,portal:{url:p}}});await w.load(),console.log("Web map loaded successfully"),console.log("Applying web map to MapView",i().ui),i().map=w,console.log("Web map applied to MapView"),await(await Pe(()=>import("../chunks/DwerzRSF.js").then(U=>U.m),__vite__mapDeps([10,1,2,3,11,4,5,6]),import.meta.url)).whenOnce(()=>i().ready),console.log("MapView updated with new web map");const re=w.initialViewProperties?.viewpoint?.targetGeometry;re&&(console.log("Navigating to web map initial viewpoint"),await i().goTo(re),console.log("MapView navigated to web map initial viewpoint")),y()?.setIsOpen(!1)}catch(m){console.error("Error loading web map:",m),r(n,m instanceof Error?m.message:"Failed to load web map",!0)}finally{r(I,null)}}var q=Qr(),A=h(q);{var ee=f=>{var m=zr(),k=h(m),p=h(k);_(k),_(m),ae(()=>le(p,`${d.error.message??""}. ${d.error?.details?.httpStatus===0?"Reason: CORS Error. See console for more information.":""}`)),o(f,m)},te=f=>{var m=L(),k=b(m);{var p=w=>{var v=qr(),re=h(v);nt(re,{class:"size-5"}),_(v),o(w,v)},D=w=>{var v=L(),re=b(v);Y(re,()=>ct,(U,X)=>{X(U,{children:(ve,l)=>{var c=L(),M=b(c);{var z=G=>{var J=L(),F=b(J);Y(F,()=>ut,(N,H)=>{H(N,{children:(Te,Ze)=>{Fe();var Me=Be("No web maps match your search.");o(Te,Me)},$$slots:{default:!0}})}),o(G,J)},ie=G=>{var J=L(),F=b(J);Qe(F,17,()=>e($),N=>N.id,(N,H)=>{var Te=L(),Ze=b(Te);Y(Ze,()=>dt,(Me,et)=>{et(Me,{onclick:()=>B(e(H).id),children:(We,Ve)=>{var we=L(),a=b(we);{var u=g=>{var K=Kr(),Q=h(K);nt(Q,{class:"size-4"});var _e=oe(Q,2),Le=h(_e);_(_e),_(K),ae(()=>le(Le,`Loading ${e(H).title??"Untitled web map"??""}...`)),o(g,K)},s=g=>{var K=Hr(),Q=h(K),_e=h(Q,!0);_(Q);var Le=oe(Q,2);{var ke=Ie=>{var Se=Gr(),je=h(Se,!0);_(Se),ae(()=>{Je(Se,"title",e(H).description),le(je,e(H).description)}),o(Ie,Se)};W(Le,Ie=>{e(H).description&&Ie(ke)})}_(K),ae(()=>{Je(Q,"title",e(H).title),le(_e,e(H).title??"Untitled web map")}),o(g,K)};W(a,g=>{e(I)===e(H).id?g(u):g(s,!1)})}o(We,we)},$$slots:{default:!0}})}),o(N,Te)}),o(G,J)};W(M,G=>{e($).length===0?G(z):G(ie,!1)})}o(ve,c)},$$slots:{default:!0}})}),o(w,v)};W(k,w=>{d.isLoading?w(p):w(D,!1)},!0)}o(f,m)};W(A,f=>{d.error?f(ee):f(te,!1)})}_(q),o(O,q),Ee()}var Xr=x('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-1w2u78y"> </span></div>'),Jr=x('<div class="item-container svelte-1w2u78y"><!></div>');function Zr(O,t){Re(t,!0);const i=ue(t,"runtime",3,null);let y=P(Ye([])),d=P("");ot(async()=>{const C=t.commandSearchContext.get(wt)?.organisations;if(!C){console.warn("No organisation configuration found in MapsConfig");return}r(y,C,!0)});let I=null,n=null,E=t.inputPlaceholder??"Search...";He(()=>{const C=i(),j=t.inputPlaceholder??"Search...";if(!C){I?.(),I=null,n=null,E=j,r(d,"");return}if(C===n){j!==E&&(C.setPlaceholder(j),E=j);return}I?.(),I=null,E=j,I=C.attachInputBinding({placeholder:j,onInput:B=>{r(d,B,!0)}}),n=C}),lt(()=>{I?.(),I=null,n=null});function S(C){t.commandSearchContext.get(qe).setActiveOrganisation(C),i()&&i().deactivate()}var $=Jr(),R=h($);Y(R,()=>ct,(C,j)=>{j(C,{children:(B,q)=>{var A=L(),ee=b(A);{var te=m=>{var k=L(),p=b(k);Y(p,()=>ut,(D,w)=>{w(D,{children:(v,re)=>{Fe();var U=Be("No organisations match your search.");o(v,U)},$$slots:{default:!0}})}),o(m,k)},f=m=>{var k=L(),p=b(k);Qe(p,17,()=>e(y),D=>D.name,(D,w)=>{var v=L(),re=b(v);Y(re,()=>dt,(U,X)=>{X(U,{onclick:()=>S(e(w).id),children:(ve,l)=>{var c=Xr(),M=h(c),z=h(M,!0);_(M),_(c),ae(()=>le(z,e(w).name??"Untitled organisation")),o(ve,c)},$$slots:{default:!0}})}),o(D,v)}),o(m,k)};W(ee,m=>{e(y).length===0?m(te):m(f,!1)})}o(B,A)},$$slots:{default:!0}})}),_($),o(O,$),Ee()}class ea{services=new Map;globalVariables=new Map;add(t,i){this.services.set(t,i),i instanceof Et&&this.globalVariables.set(t,i)}get(t){const i=this.services.get(t);if(!i)throw new Error(`Service not found for token: ${t.name}`);return i}has(t){return this.services.has(t)}getGlobalVariables(){return Array.from(this.globalVariables.values())}}globalThis.process?.versions?.webcontainer;Pe(()=>import("../chunks/BIHI7g3E.js"),[],import.meta.url).then(O=>new O.AsyncLocalStorage).catch(()=>{});var ta=x('<div class="error-message svelte-1lap2l5"><p class="text-sm text-red-600"> </p></div>'),ra=x('<div class="flex items-center justify-center p-4"><!></div>'),aa=x('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-1lap2l5"> </span></div>'),na=x('<div class="flex items-center gap-2"><!></div>'),oa=x('<span class="description-text text-xs text-gray-500 svelte-1lap2l5"> </span>'),ia=x('<span class="text-[11px] text-muted-foreground"> </span>'),sa=x('<span class="text-[11px] text-muted-foreground"> <!></span>'),la=x('<!> <div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-1lap2l5"> </span> <!> <!> <!></div>',1),ca=x('<div class="item-container svelte-1lap2l5"><!></div>');function ua(O,t){Re(t,!0);const i=ue(t,"mapView",7),y=ue(t,"runtime",3,null),d=new Rt;let I=P(null),n=P(null),E=P(""),S=P(Ye(new _r)),$=P(Ye([]));const R=new Map,C={27700:"OS_Open_Background"},j=Z(()=>{const l=e($),c=e(E).trim().toLowerCase();return c?l.filter(M=>{const z=M?.title?.toLowerCase()??"",ie=M?.description?.toLowerCase()??"";return z.includes(c)||ie.includes(c)}):l});ot(async()=>{const l=t.commandSearchContext.get(qe);if(!l.getActiveOrganisationId()){console.warn("No active organisation selected in OrganisationCommandService");return}const M=l.getActiveOrganisationPortalUrl(),z=l.getActiveOrganisationEndpoint(),G=`type:(${["Feature Layer","Feature Service","Map Service","Image Service"].map(N=>`"${N}"`).join(" OR ")})`,J=l.getActiveOrganisationQueryParams(),F=Object.entries(J).map(([N,H])=>`${N}:"${H}"`).join(" AND ");await d.load(M+z,{query:{q:`${G}`+(F?` AND ${F}`:""),num:100,f:"json"}}),r($,(d.data?.results??[]).map(N=>({id:N.id,title:N.title,description:Ot(N.description),owner:N.owner,type:N.type,spatialReferenceWkid:N.spatialReference?.wkid??N.spatialReference?.latestWkid})),!0),R.clear();for(const N of e($))R.set(N.id,N)});let B=null,q=null,A=t.inputPlaceholder??"Search...";He(()=>{const l=y(),c=t.inputPlaceholder??"Search...";if(!l){B?.(),B=null,q=null,A=c,r(E,"");return}if(l===q){c!==A&&(l.setPlaceholder(c),A=c);return}B?.(),B=null,A=c,B=l.attachInputBinding({placeholder:c,onInput:M=>{r(E,M,!0)}}),q=l}),lt(()=>{B?.(),B=null,q=null});async function ee(l){e(S).has(l)?te(l):await m(l)}function te(l){const c=e(S).get(l);!c||!i()||!i().map||(i().map.remove(c),e(S).delete(l),r(S,e(S),!0),console.log(`Layer removed from the map: ${l}`))}function f(l){for(const c of i()?.map?.allLayers??[])if(c.portalItem?.id===l)return!0;return!1}async function m(l){if(!i()||!i().map){console.error("Map or MapView is not initialized"),r(n,"Map is not ready. Please wait and try again.");return}r(I,l,!0),r(n,null);try{console.log(`Loading layer with portal item ID: ${l}`);const c=t.commandSearchContext.get(qe);if(!c.getActiveOrganisationId()){console.warn("No active organisation selected in OrganisationCommandService");return}const z=c.getActiveOrganisationPortalUrl(),[{default:ie},{default:G}]=await Promise.all([Pe(()=>import("../chunks/BTNr9f9k.js").then(H=>H.u),__vite__mapDeps([15,1,2,3,5,4,6,9,10,11,12]),import.meta.url),Pe(()=>import("../chunks/y1GB1Svy.js").then(H=>H.P),__vite__mapDeps([11,4,1,2,3,5,6]),import.meta.url)]),J=new G({url:z}),F=await ie.fromPortalItem({portalItem:{id:l,portal:J}});await F.load();const N=await k(F,l);await v(N),i().map.add(F),e(S).set(l,F),r(S,e(S),!0),console.log("Layer added to the map");try{await i().whenLayerView(F),F.fullExtent&&await i().goTo(F.fullExtent)}catch(H){console.warn("Layer view not ready for navigation",H)}}catch(c){console.error("Error loading layer:",c),r(n,c instanceof Error?c.message:"Failed to add layer",!0)}finally{r(I,null)}}async function k(l,c){const M=p(l);if(M)return M;const z=R.get(c);if(z?.spatialReferenceWkid){const{default:G}=await Pe(async()=>{const{default:J}=await import("../chunks/BUsxo-Ec.js").then(F=>F.bc);return{default:J}},__vite__mapDeps([5,1,2,3,4,6]),import.meta.url);return new G({wkid:z.spatialReferenceWkid})}const ie=l.portalItem?.spatialReference;return ie||null}function p(l){return l?.spatialReference??null}function D(l){if(!l)return;const c=l;return l.wkid??c?.latestWkid??void 0}async function w(l){if(!i()||!i().map)return console.warn("MapView or Map is not available for basemap loading"),null;if(!l)return i().map.basemap;const c=C[l];if(!c)return i().map.basemap;const{default:M}=await Pe(async()=>{const{default:z}=await import("../chunks/CjBjO1Km.js").then(ie=>ie.B);return{default:z}},__vite__mapDeps([8,4,1,2,3,5,6,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url);try{return await M.fromId(c)}catch(z){return console.warn(`Failed to load basemap ${c}`,z),i().map.basemap}}async function v(l){if(!i()||!i().map||!l){console.log("MapView or target spatial reference is not available","mapView:",i(),"target:",l);return}const c=D(l),M=D(i().spatialReference??void 0);if(console.log(`Ensuring map view spatial reference compatibility: target WKID=${c}, current WKID=${M}`),!c||c===M)return;const[{default:z}]=await Promise.all([Pe(()=>import("../chunks/BEZFO2vt.js").then(N=>N.M),__vite__mapDeps([7,1,2,3,8,4,5,6,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37]),import.meta.url)]),ie=await w(c),G=i().map.layers.toArray(),J=i().map.ground;i().map.removeAll();const F=new z({basemap:ie??void 0,ground:J});F.spatialReference=l,F.layers.addMany(G),i().map=F,await i().when()}var re=ca(),U=h(re);{var X=l=>{var c=ta(),M=h(c),z=h(M);_(M),_(c),ae(()=>le(z,`${d.error.message??""}. ${d.error?.details?.httpStatus===0?"Reason: CORS Error. See console for more information.":""}`)),o(l,c)},ve=l=>{var c=L(),M=b(c);{var z=G=>{var J=ra(),F=h(J);nt(F,{class:"size-5"}),_(J),o(G,J)},ie=G=>{var J=L(),F=b(J);Y(F,()=>ct,(N,H)=>{H(N,{children:(Te,Ze)=>{var Me=L(),et=b(Me);{var We=we=>{var a=L(),u=b(a);Y(u,()=>ut,(s,g)=>{g(s,{children:(K,Q)=>{Fe();var _e=Be("No layers match your search.");o(K,_e)},$$slots:{default:!0}})}),o(we,a)},Ve=we=>{var a=L(),u=b(a);Qe(u,17,()=>e(j),s=>s.id,(s,g)=>{var K=L(),Q=b(K);{let _e=Z(()=>e(S).has(e(g).id)?"layer-selected":"");Y(Q,()=>dt,(Le,ke)=>{ke(Le,{onclick:()=>ee(e(g).id),get class(){return e(_e)},children:(Ie,Se)=>{var je=L(),tt=b(je);{var Ue=ce=>{var de=aa(),he=h(de);nt(he,{class:"size-4"});var fe=oe(he,2),xe=h(fe);_(fe),_(de),ae(()=>le(xe,`Loading ${e(g).title??"Untitled layer"??""}...`)),o(ce,de)},mt=ce=>{var de=la(),he=b(de);{var fe=V=>{var T=na(),ne=h(T);ur(ne,{}),_(T),o(V,T)};W(he,V=>{f(e(g).id)&&V(fe)})}var xe=oe(he,2),Ae=h(xe),rt=h(Ae,!0);_(Ae);var ge=oe(Ae,2);{var De=V=>{var T=oa(),ne=h(T,!0);_(T),ae(()=>{Je(T,"title",e(g).description),le(ne,e(g).description)}),o(V,T)};W(ge,V=>{e(g).description&&V(De)})}var me=oe(ge,2);{var Oe=V=>{var T=ia(),ne=h(T,!0);_(T),ae(()=>le(ne,e(g).type??"")),o(V,T)};W(me,V=>{e(g).type&&V(Oe)})}var Ne=oe(me,2);{var be=V=>{var T=sa(),ne=h(T),ye=oe(ne);{var Ce=pe=>{var se=Be();se.nodeValue=" (auto aligns view)",o(pe,se)};W(ye,pe=>{C[e(g).spatialReferenceWkid]&&pe(Ce)})}_(T),ae(()=>le(ne,`WKID ${e(g).spatialReferenceWkid??""} `)),o(V,T)};W(Ne,V=>{e(g).spatialReferenceWkid&&V(be)})}_(xe),ae(()=>{Je(Ae,"title",e(g).title),le(rt,e(g).title??"Untitled layer")}),o(ce,de)};W(tt,ce=>{e(I)===e(g).id?ce(Ue):ce(mt,!1)})}o(Ie,je)},$$slots:{default:!0}})})}o(s,K)}),o(we,a)};W(et,we=>{e(j).length===0?we(We):we(Ve,!1)})}o(Te,Me)},$$slots:{default:!0}})}),o(G,J)};W(M,G=>{d.isLoading?G(z):G(ie,!1)},!0)}o(l,c)};W(U,l=>{d.error?l(X):l(ve,!1)})}_(re),o(O,re),Ee()}var da=x("<arcgis-layer-list><arcgis-legend></arcgis-legend></arcgis-layer-list>",2),fa=x('<div id="search-slot" class="absolute top-3 left-1/2 z-10 -translate-x-1/2"><!></div>'),ma=x("<arcgis-map><!></arcgis-map>",2);function qa(O,t){Re(t,!0);const i=new ea;let y=P(null),d=P(null),I=P(null),n=P(null),E=P(null),S=P(null),$=P(null),R=P(null),C=P(!1);ot(async()=>{const p=await j(),D=new qe(p.organisations);i.add(wt,p),i.add(qe,D),await q(),r(E,A(),!0),r(S,ee(),!0),r($,te(),!0),r(R,f(),!0)});async function j(){const p=await fetch(hr("/config/maps/config.json"));if(!p.ok)throw new Error(`Failed to load maps config: ${p.status} ${p.statusText}`);const D=await p.json();return new wt(D.organisations)}async function B(){e(I)&&(r(y,e(I).view,!0),e(n)&&(e(n).view=e(y)))}async function q(){await Pe(()=>import("../chunks/BRIeeldl.js").then(p=>p.a),__vite__mapDeps([152,153,154,145,1,2,3,10,11,4,5,6,155,156,12,157,9,158,159,17,26,15,160,161,162,54,25,55,24,20,21,22,163,164]),import.meta.url),await Pe(()=>import("../chunks/DN8pD2EM.js"),__vite__mapDeps([165,166,154,145,1,2,3,10,11,4,5,6,155,167,168,169,170,171,172,173,174,175,156,176,177,153,12,157,17,161,178,59,9,15,55,179,20,21,22,33,79,80,35,36,180,129,130,121,122,57,24,58,13,25,60,61,62,63,64,65,181,132,133,182,102,103,104,183,184,185,186,84,187,83,188,189,190,118,119,120,97,98,99,100,53,54,41,32,42,56,94,101,107,123,43,124,125,47,126,127,128,131,96,105,106,108,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,164]),import.meta.url),await Pe(()=>import("../chunks/BgIfDPrD.js"),__vite__mapDeps([219,166,154,145,1,2,3,10,11,4,5,6,155,167,168,220,171,173,221,176,156,175,222,223,224,225,183,153,12,157,226,38,39,25,40,22,41,32,33,42,20,21,43,9,23,71,72,17,227,53,54,55,24,56,57,58,59,13,60,61,62,63,64,65,34,228,229,159,26,230,15,231,7,8,14,16,18,19,27,28,29,30,31,35,36,37,91,47,158,89,69,52,232,182,233,234,50,51,209,235,236,237,238,239,240,241,208,242,243,214,244,218,163,0,44,45,46,48,49,66,67,68,70,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,90,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,146,147,148,149,150,151]),import.meta.url)}lt(()=>{r(E,null),r(S,null),r($,null),r(R,null)});function A(){const p={id:"add-web-map",name:"Add web map",description:"Fetch and display web maps.",group:"Maps",shortcut:["Ctrl","M"],inputPlaceholder:"Search web maps...",execute:async D=>{},component:Yr,props:D=>({commandSearchContext:i,mapView:e(y),inputPlaceholder:p.inputPlaceholder})};return p}function ee(){const p={id:"add-layer",name:"Add layers",description:"Fetch and display layers.",group:"Maps",shortcut:["Ctrl","L"],execute:async D=>{},component:ua,props:D=>({commandSearchContext:i,mapView:e(y),inputPlaceholder:p.inputPlaceholder})};return p}function te(){return{id:"add-organisation",name:"Add organisation",description:"Find and add an organisation to filter items by.",group:"Maps",shortcut:["Ctrl","O"],inputPlaceholder:"Search organisations...",component:Zr,execute:async p=>{},props:p=>({commandSearchContext:i,inputPlaceholder:"Search organisations..."})}}function f(){return{id:"clear-map",name:"Clear map",description:"Clear all layers and reset the map view.",shortcut:["Ctrl","C"],execute:async p=>{e(y)&&e(y).map&&(e(y).map.layers.removeAll(),e(y).map.basemap="gray"),p.deactivate()}}}var m=L(),k=b(m);{const p=w=>{yt(w,{class:"h-full",children:(v,re)=>{var U=da();st(U,1,"mx-2 min-h-20"),it(U,"listItemCreatedFunction",X=>{const{item:ve}=X;ve.layer.type!="group"&&(ve.panel={content:"legend",open:!0})}),at(U,X=>r(n,X),()=>e(n)),o(v,U)},$$slots:{default:!0}})},D=w=>{var v=ma();st(v,1,"relative h-full w-full"),it(v,"basemap","gray"),it(v,"center","-2.231774828836059,53.46531847221502"),it(v,"zoom","15");var re=h(v);{var U=X=>{var ve=fa(),l=h(ve);{let c=Z(()=>[e($),e(E),e(S),e(R)]);Ur(l,{class:"w-full max-w-md",get commandSearchContext(){return i},get commands(){return e(c)},get ref(){return e(d)},set ref(M){r(d,M,!0)}})}_(ve),o(X,ve)};W(re,X=>{e(E)&&e(S)&&e($)&&e(R)&&X(U)})}_(v),at(v,X=>r(I,X),()=>e(I)),ht("arcgisViewReadyChange",v,B),o(w,v)};Y(k,()=>pr,(w,v)=>{v(w,{get isOpen(){return e(C)},onToggle:()=>r(C,!e(C)),sidebarContent:p,mainContent:D,$$slots:{sidebarContent:!0,mainContent:!0}})})}o(O,m),Ee()}export{qa as component};
