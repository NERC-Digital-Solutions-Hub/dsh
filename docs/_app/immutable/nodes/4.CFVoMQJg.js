const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/C3JU2Cqc.js","../chunks/Bc_TmxSc.js","../chunks/DOBtub6T.js","../assets/index.CQED0rIl.css","../chunks/4u0wcz6f.js","../chunks/C6pzAkdR.js","../chunks/CHwVPrQX.js","../chunks/DXGw_0Ww.js","../chunks/DHAweUE4.js","../chunks/HTOW8iPe.js","../chunks/CYB2EK_d.js","../chunks/CdDXOJ3Y.js","../chunks/CEIZYuf2.js","../chunks/DYslx7It.js","../chunks/DuIgqnlY.js","../chunks/D-Nm-cDg.js","../chunks/DaQyK3nQ.js","../chunks/Dex61Jy7.js","../chunks/1-A6SStS.js","../chunks/CAYuU9oo.js","../chunks/DwWpeHsS.js","../chunks/CeRhhlE3.js","../chunks/PPVm8Dsz.js","../chunks/CFn2K6-l.js","../assets/component-utils.R4SXog4D.css","../chunks/ZvSBfRuU.js","../chunks/C7VrMIJq.js","../chunks/BV6LrWRH.js","../chunks/v5xyD8FI.js","../chunks/B87vTgcy.js","../chunks/bnayRBMH.js","../chunks/6W6J17CP.js","../chunks/Y_0EfhRu.js","../chunks/DFoMxmW4.js","../chunks/DdbdneQ1.js","../chunks/CUKvHaKn.js","../chunks/GnozomzB.js","../chunks/C0r3nPFU.js","../chunks/D5wfNCSS.js","../chunks/CBhtnfFj.js","../chunks/Ck0Sc68b.js","../chunks/C1b-UyR1.js","../chunks/B9nrdN3I.js","../chunks/B2_jlIup.js","../chunks/D5wPz3MX.js","../chunks/CMGougg5.js","../chunks/CiTezgDL.js","../chunks/BF96_MCH.js","../chunks/C4qJhnT8.js","../chunks/DZE8-7HP.js","../chunks/2dXtPFpf.js","../chunks/Cp_8tW2x.js","../chunks/C_U3EkfM.js","../chunks/B2QrCEfK.js","../chunks/C0wm8_Yw.js","../chunks/D84DRQGh.js","../chunks/CamG5LcL.js","../chunks/BeG5PTJh.js","../chunks/D1_xF1l_.js","../chunks/Cd9GdU_L.js","../chunks/Cgb6qxNH.js","../chunks/B-m5Sl5o.js","../chunks/DCOPP4zh.js","../chunks/BrbL6HZH.js","../chunks/C3R-oROr.js","../chunks/HYjb2XVQ.js","../chunks/CaVKkSa6.js","../chunks/CI7YD90n.js","../chunks/YTLdojGG.js","../chunks/B1N-tmtC.js","../chunks/M9csEe_9.js","../chunks/CtljFrUl.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/Bxxl7NsE.js","../chunks/DNogqiqR.js","../chunks/DQOO6RKE.js","../chunks/C80X2pXx.js","../chunks/Bi6C4OG6.js","../chunks/C7e3Z5XT.js","../chunks/D-YQ4CHs.js","../chunks/BZsETsOI.js","../chunks/BBV24j_2.js","../chunks/BAIa4HHN.js","../chunks/DYIbcMrs.js","../chunks/BfLeziQE.js","../chunks/BeiFfq_I.js","../chunks/B4oxan5h.js","../chunks/_Wu26JHk.js","../chunks/CIbyfs1t.js","../chunks/DfYjIaZP.js","../chunks/gul0yLcR.js","../chunks/Bt7d_ltN.js","../chunks/C_hZxtZf.js","../chunks/Iaw-yPgv.js","../chunks/C4m88JEB.js","../chunks/B_YI4KXt.js","../chunks/CF39WpqH.js","../chunks/BAzr6Eo0.js","../chunks/BOi-zD_D.js","../chunks/B36ip4uz.js","../chunks/C7XcR_qA.js","../chunks/DlemiWd4.js","../chunks/BmgeYasw.js","../chunks/DLOQEY_Z.js","../chunks/DRAy6pQp.js","../chunks/TaFUw3Kk.js","../chunks/BQME-Dbz.js","../chunks/CGdpgIRD.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/C7Pxb65r.js","../chunks/BVgVoZ7V.js","../chunks/CHhbm2AT.js","../chunks/U5R98psz.js","../chunks/UusjRatb.js","../chunks/BTOnRfOV.js","../chunks/CaYZrGFV.js","../chunks/DQbFm6XI.js","../chunks/ChwpPGxO.js","../chunks/DlHjpvET.js","../chunks/h2nqTh5L.js","../chunks/CO5JJ6fr.js","../chunks/BtzHoEh5.js","../chunks/BQBvadb7.js","../chunks/DopMZQPn.js","../chunks/BI8Qvcwk.js","../chunks/Dsw-3r6y.js","../chunks/DnvC2qI8.js"])))=>i.map(i=>d[i]);
import{_ as fe}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as Ve}from"../chunks/BW702uPa.js";import{p as Pe,a9 as W,a7 as F,t as o,a6 as re,a5 as pe,V as Ee,a as Ie,u as De,c as ce,r as de,R as ne}from"../chunks/BjFLI01z.js";import{e as We}from"../chunks/B8uMhNXG.js";import{f as J,t as Fe,a as z,d as Ge}from"../chunks/DAMOoDui.js";import{i as he}from"../chunks/Ck_Twk2V.js";import{c as be}from"../chunks/BM3AUTZE.js";import{b as we,d as K}from"../chunks/BAHAaU2i.js";import{b as ve}from"../chunks/hODufui9.js";import{B as Ne}from"../chunks/C1ksMhv9.js";import{S as Me}from"../chunks/Bf7h3GQg.js";import{A as xe,a as ze,L as Re,M as Ue,S as ke}from"../chunks/BO_Ifhts.js";import"../chunks/69_IOA4Y.js";import{v as _e,d as Ce,e as me,f as Oe,h as Le,i as Ze,a as $e,g as je,m as qe,c as Ye,M as Ke,L as Je,b as He,B as Qe}from"../chunks/BfLQty9N.js";import"../chunks/BsgmZ9YD.js";import{_ as ae}from"../chunks/6W6J17CP.js";import{z as ye}from"../chunks/BBV24j_2.js";import"../chunks/DwWpeHsS.js";import"../chunks/D4VJcUD0.js";import"../chunks/CjH7Rf0r.js";import"../chunks/C9bC63rm.js";import"../chunks/CeRhhlE3.js";import"../chunks/DFoMxmW4.js";import"../chunks/IyXX-m-G.js";import"../chunks/CCxKV4CJ.js";import"../chunks/DmDvrl5M.js";import Xe from"../chunks/CmSii9G0.js";import{n as et}from"../chunks/y635C_uJ.js";import"../chunks/C39vTPtT.js";import{m as Te,p as tt}from"../chunks/BKFC_AMf.js";import{b as nt}from"../chunks/CEAfPW0z.js";async function ot(u){const{view:n,input:a,clipLayer:i,targetLayer:f,symbol:p,clipLayerValueField:w,bufferDistance:v,bufferUnit:_,sourceIds:E}=u;if(v<=0)return console.warn("clipPoints: bufferDistance must be greater than zero."),null;const h=a instanceof ae?a.geometry:a;if(!h)return console.warn("clipPoints: no input geometry provided."),null;if(h.type!=="polygon")return console.warn("clipPoints: input geometry is not a polygon."),null;const C=h;if(i instanceof ye){const P=i.geometryType;if(P!=="point"&&P!=="multipoint")return console.error("clipPoints: clipLayer must be point or multipoint."),null}const m=[],D=i.title||i.id||"clip-layer";if(w){const P=await it(i,C,w,v,_,n);if(!P.length)return console.info("clipPoints: no buffered geometries in clipLayer intersect the polygon for any value."),null;for(const{geometry:T,value:V}of P){if(!_e(C,T)){console.error("clipPoints: spatial reference mismatch for clip value:",V);continue}const U=Ce(T,{clippedByPoints:!0,sourceIds:E,layerTitle:D,valueField:w,value:V,bufferDistance:v,bufferUnit:_},p);me(f,U,n),m.push(U)}return m.length?(n&&n.goTo(m.map(T=>T.geometry)).catch(T=>console.warn("goTo failed:",T)),m):null}const L=await rt(i,C,v,_,n);if(!L)return console.info("clipPoints: no buffered geometries in clipLayer intersect the polygon."),null;if(!_e(C,L))return null;const I=Ce(L,{clippedByPoints:!0,sourceIds:E,bufferDistance:v,bufferUnit:_},p);return me(f,I,n),n&&n.goTo(L).catch(P=>console.warn("goTo failed:",P)),m.push(I),m}async function rt(u,n,a,i,f){const p=await Ze(u,n,f);if(!p.length)return null;let w;try{w=Te(p,[a],i?{unit:i}:void 0)}catch(_){return console.error("getUnionBufferedClipGeometryFromLayer: buffer failed",_),null}const v=w.filter(_=>!!_&&_.type==="polygon");return v.length?Le(n,v):null}async function it(u,n,a,i,f,p){const w=await Oe(u,n,a,p);if(!w.length)return[];const v=new Map;for(const h of w){const C=h.value==null?"__NULL__":String(h.value);let m=v.get(C);m||(m={value:h.value,geometries:[]},v.set(C,m)),m.geometries.push(h.geometry)}const _=[],E=[i];for(const h of v.values()){let C;try{C=Te(h.geometries,E,f?{unit:f}:void 0)}catch(L){console.error("getGroupedBufferedClipGeometriesFromLayer: buffer failed for value:",h.value,L);continue}const m=C.filter(L=>!!L&&L.type==="polygon");if(!m.length)continue;const D=Le(n,m);D&&_.push({geometry:D,value:h.value})}return _}async function Be(u){const{view:n,input:a,targetLayer:i,bufferDistance:f,bufferUnit:p,symbol:w,sourceIds:v}=u;if(f<=0)return console.warn("createPolygonBuffer: bufferDistance must be greater than zero."),null;const _=a instanceof ae?a.geometry:a;if(!_)return console.warn("createPolygonBuffer: no input geometry provided."),null;if(_.type!=="polygon")return console.warn("createPolygonBuffer: input geometry is not a polygon."),null;const E=_,h=tt(E,f,p?{unit:p}:void 0);if(!h||h.type!=="polygon")return console.warn("createPolygonBuffer: buffer operation returned no polygon."),null;const C=et(h,E);let m;C&&C.type==="polygon"?m=C:(console.warn("createPolygonBuffer: difference operation returned no polygon; using outer buffer instead."),m=h);const D=new ae({geometry:m,attributes:{polygonBuffer:!0,sourceIds:v,bufferDistance:f,bufferUnit:p},symbol:w||{type:"simple-fill",color:[0,255,255,.1],outline:{color:[0,255,255,1],width:2}}});return me(i,D,n),n&&n.goTo(m).catch(L=>console.warn("goTo failed:",L)),D}class Ae{id;constructor(n){this.id=n}}class k extends Ae{weight;buffers;constructor(n,a,i){super(n),this.weight=a,this.buffers=i}}class se extends Ae{fieldName;constructor(n,a){super(n),this.fieldName=a}}class ie extends se{fieldValues;constructor(n,a,i){super(n,a),this.fieldValues=i}}class Se extends se{weight;constructor(n,a,i){super(n,a),this.weight=i}}let oe=null;async function at(){return oe||(oe={analysisSettings:(await(await fetch(`${nt}/config/apps/ai-where-to-build/config.json`)).json()).analysisSettings.map(i=>st(i))},oe)}function st(u){if("fieldValues"in u)return new ie(u.id,u.fieldName,u.fieldValues);if("fieldName"in u&&!("fieldValues"in u)){const p=u.weight??1;return new Se(u.id,u.fieldName,p)}const n=u,a=n.weight??1,i=n.buffers??[];return new k(n.id,a,i)}var lt=J(`<p>This is the Analysis Tab component. This is where the user and initiate analysis for a polygon or
	area (e.g. Ward).</p> <!>`,1);function ut(u,n){Pe(n,!0);let a=F(null),i=F(null),f=F(null),p=F(null),w=F(null);const v="UK Wards (Boundary Fully Clipped) (2022)";Ve(async()=>{W(p,$e(n.mapView,"Analysis Results Layer"),!0),await _(),E()});async function _(){if(!n.mapView)throw new Error("[analysis-tab] MapView is not initialized");W(a,new xe,!0),W(i,new ze(o(a),new Re(n.mapView)),!0),W(f,new Ue(n.mapView,o(i),new Set([v])),!0),console.log("[analysis-tab] Initialized stores",o(a).layerId),await o(i).refreshLayerView(),await o(i).refreshAreas()}function E(){if(!o(a)){console.warn("[analysis-tab] AreaSelectionStore not initialized yet");return}const r=n.mapView.map?.allLayers.find(t=>t.title===v);r?(o(a).setLayerId(r.uid),console.log(`[analysis-tab] Set default area layer to ID: ${r.uid}`)):console.warn("[analysis-tab] Default area layer not found on the map")}function h(r){const t=[];for(const e of r)e instanceof Xe?t.push(...h(e.layers.toArray())):e instanceof ye&&t.push(e);return t}function C(r,t=.3){let e=0;for(let c=0;c<r.length;c++)e=r.charCodeAt(c)+((e<<5)-e);const l=e>>0&255,y=e>>8&255,g=e>>16&255;return[l,y,g,t]}function m(r,t=.3,e=[255,0,0,1],l=2){return{type:"simple-fill",color:C(r,t),outline:{color:e,width:l}}}function D(){return{title:"Clipped region",content:[{type:"custom",creator:r=>{const e=r.graphic.attributes??{},l=e.layerTitles??[],y=e.layerValues??[],g=e.layerWeights??[],c=e.bufferInfos??[],d=[];l.forEach((B,A)=>{const te=y[A]??"",b=g[A];d.push({layer:B,value:te,weight:b!=null&&b!==""?String(b):"",isBuffer:c[A]?"Yes":"No",bufferDistance:c[A]&&c[A].distance!=null?`${c[A].distance} ${c[A].unit??""}`.trim():""})});const s=d.some(B=>B.value&&B.value.trim()!==""),S=d.some(B=>B.weight&&B.weight.trim()!==""),X=d.some(B=>B.isBuffer&&B.isBuffer.trim()!==""),Z=d.some(B=>B.bufferDistance&&B.bufferDistance.trim()!==""),G=document.createElement("table");G.className="esri-widget__table";const M=document.createElement("tbody"),N=document.createElement("tr"),ee=document.createElement("th");ee.textContent="Layer",N.appendChild(ee);let $,j,q,Y;return ee.style.whiteSpace="nowrap",ee.style.wordBreak="normal",s&&($=document.createElement("th"),$.textContent="Value",$.style.whiteSpace="nowrap",$.style.wordBreak="normal",N.appendChild($)),S&&(j=document.createElement("th"),j.textContent="Weight",j.style.whiteSpace="nowrap",j.style.wordBreak="normal",N.appendChild(j)),X&&(q=document.createElement("th"),q.textContent="Is buffer",q.style.whiteSpace="nowrap",q.style.wordBreak="normal",N.appendChild(q)),Z&&(Y=document.createElement("th"),Y.textContent="Buffer distance",Y.style.whiteSpace="nowrap",Y.style.wordBreak="normal",N.appendChild(Y)),M.appendChild(N),d.forEach(B=>{const A=document.createElement("tr"),te=document.createElement("td");if(te.textContent=B.layer,A.appendChild(te),s){const b=document.createElement("td");b.textContent=B.value,A.appendChild(b)}if(S){const b=document.createElement("td");b.textContent=B.weight,b.style.whiteSpace="nowrap",b.style.wordBreak="normal",A.appendChild(b)}if(X){const b=document.createElement("td");b.textContent=B.isBuffer,b.style.whiteSpace="nowrap",b.style.wordBreak="normal",A.appendChild(b)}if(Z){const b=document.createElement("td");b.textContent=B.bufferDistance,b.style.whiteSpace="nowrap",b.style.wordBreak="normal",A.appendChild(b)}M.appendChild(A)}),G.appendChild(M),G}}]}}function L(){return!n.mapView||!n.mapView.map?(console.warn("[analysis-tab] MapView not initialized yet"),!1):!o(a)||!o(i)||!o(f)?(console.warn("[analysis-tab] Stores not initialized yet"),!1):o(p)?!0:(console.warn("[analysis-tab] Graphic layer not initialized yet"),!1)}function I(){const r=n.mapView.map.findLayerById("19a9760b651-layer-105");return r&&console.log("Parcels Layer:",r.title),r}async function P(r,t,e){const l=await Ye({view:n.mapView,input:r,clipLayer:t,clipLayerValueField:e instanceof se?e.fieldName:void 0,targetLayer:o(p)});if(!l||l.length===0){console.log(`No polygon clipped for layer: ${t.title}`);return}console.log(`Clipped ${l.length} polygons from layer: ${t.title}`);const y=e instanceof k||e instanceof Se?e.weight:void 0;for(const g of l){g.attributes.layerTitle=t.title,g.attributes.layerId=t.id,g.attributes.weight=y,g.attributes.layerTitles=[t.title],g.symbol=m(t.id,.3,[255,0,0,1],2);const c=g.attributes.value;g.attributes.weight=y||T(c,e);const d=e instanceof k?e.buffers:V(c,e);for(const s of d)if(s.distance>0){const S=await Be({view:n.mapView,input:g,targetLayer:o(p),bufferDistance:s.distance,bufferUnit:s.unit});S&&(S.attributes={...g.attributes,polygonBuffer:!0,bufferDistance:s.distance,bufferUnit:s.unit,weight:s.weight},S.symbol=m(`${t.id}-buffer-${s.distance}-${s.unit}`,.2,[0,0,255,1],1))}}}function T(r,t){if(!(t instanceof ie))return;const e=t.fieldValues.find(l=>l.value===r);if(e)return e.weight}function V(r,t){if(!(t instanceof ie))return[];const e=t.fieldValues.find(l=>l.value===r);return e?e.buffers||[]:[]}function R(r){return r instanceof k?r.buffers?.[0]??null:r instanceof ie?r.fieldValues.find(e=>e.buffers&&e.buffers.length)?.buffers?.[0]??null:null}async function U(r,t,e){console.log(`Processing point layer: ${t.title}`);const l=e instanceof se?e.fieldName:void 0,y=R(e),g=y?.distance??1,c=y?.unit,d=await ot({view:n.mapView,input:r,clipLayer:t,clipLayerValueField:l,bufferDistance:g,bufferUnit:c,targetLayer:o(p)});if(!d||d.length===0){console.log(`No polygon clipped for layer: ${t.title}`);return}console.log(`Clipped ${d.length} polygons from layer: ${t.title}`);for(const s of d){s.attributes??={};const S=s.attributes.value;s.attributes.layerTitle=t.title,s.attributes.layerId=t.id,s.attributes.layerTitles=[t.title],s.attributes.layerValues=S!=null?[String(S)]:s.attributes.layerValues??[],s.attributes.weight=e instanceof k?e.weight:T(S,e),s.symbol=m(t.id,.3,[255,0,0,1],2);const X=e instanceof k?e.buffers:V(S,e);for(const Z of X){const{distance:G,unit:M}=Z;if(!G||G<=0||y&&y.distance===G&&y.unit===M)continue;const N=await Be({view:n.mapView,input:s,targetLayer:o(p),bufferDistance:G,bufferUnit:M});N&&(N.attributes={...s.attributes,polygonBuffer:!0,bufferDistance:G,bufferUnit:M,weight:Z.weight},N.symbol=m(`${t.id}-buffer-${G}-${M??"sr"}`,.2,[0,0,255,1],1))}console.log("Clipped Polygon:",d)}}function le(r){for(const t of r){const e=typeof t.attributes.totalWeight=="number"?t.attributes.totalWeight:0,l=Math.max(-1,Math.min(1,e));let y;if(l<=0){const g=l+1;y=[Math.round(255*g),0,0,.5]}else{const g=l;y=[Math.round(255*(1-g)),Math.round(255*g),0,.5]}t.symbol={type:"simple-fill",color:y,outline:{color:[0,0,0,1],width:1}},t.popupTemplate=D()}}async function ue(){if(!L())return;const r=O();if(r.length===0){console.warn("[analysis-tab] No area selected for analysis");return}if(o(w)===`analyzed-${r.join("-")}`){console.log("[analysis-tab] Analysis already performed for the selected area(s)");return}const t=I();if(!t){console.warn("[analysis-tab] Parcels layer not found");return}const e=await je(t,r,"OBJECTID",n.mapView);if(!e){console.warn("[analysis-tab] Unable to retrieve polygon for selected parcel IDs");return}const l=await at();console.log("AI Where to Build Config:",l);const y=h(n.mapView.map.layers.toArray());for(const c of l.analysisSettings){const d=y.find(s=>s instanceof ye&&s.portalItem?.id===c.id);if(!d){console.log(`Layer for setting ID ${c.id} not found on the map`);continue}if(d.id===t.id){console.log(`Skipping parcels layer itself: ${d.title}`);continue}d.geometryType==="polygon"?await P(e,d,c):(d.geometryType==="point"||d.geometryType==="multipoint")&&await U(e,d,c)}console.log("Merging clipped polygons in layer:",o(p).id),ge(e,o(p));const g=qe(o(p));H(g),le(g),o(a)?.clearSelectedAreas(),await o(i)?.refreshAreas(),o(i)?.clearSelections(),W(w,`analyzed-${r.join("-")}`)}function ge(r,t){const e=new ae({geometry:r.clone(),attributes:{layerTitle:"Base Weight",layerId:"base-weight-layer",layerTitles:["Base Weight"],layerValues:["base"],value:"base",weight:0,clipped:!1,baseWeight:!0},symbol:{type:"simple-fill",color:[128,128,128,.1],outline:{color:[128,128,128,.5],width:1}}});t.add(e)}function H(r){for(const t of r){const e=t.attributes.memberLayerTitles??[],l=t.attributes.memberLayerWeights??[],y=new Map;for(let c=0;c<e.length;c++){const d=e[c],s=l[c];if(s==null||isNaN(s))continue;const S=y.get(d)??Number.POSITIVE_INFINITY;s<S&&y.set(d,s)}const g=Array.from(y.values()).reduce((c,d)=>c+d,0);if(y.values().find(c=>c<=-1)){t.attributes.totalWeight=-1;continue}t.attributes.totalWeight=g}}function O(){return!o(i)||!o(a)?[]:Array.from(o(a).selectedAreaIds)}var x=lt(),Q=re(pe(x),2);Ne(Q,{onclick:ue,children:(r,t)=>{Ee();var e=Fe("Analyze");z(r,e)},$$slots:{default:!0}}),z(u,x),Ie()}var ft=J("<div><!></div>"),ct=J('<arcgis-layer-list></arcgis-layer-list> <div class="basemap-container svelte-1q0t0hd"><arcgis-basemap-gallery></arcgis-basemap-gallery></div> <!>',3),dt=J("<arcgis-map></arcgis-map>",2),pt=J('<div class="layout svelte-1q0t0hd"><!> <!></div>');function jt(u,n){Pe(n,!0);let a=F(null),i=F(null),f=F(null),p=F(!1),w=F(null),v=F(!1);const _=[{id:"layers",label:"Layers",icon:Je},{id:"basemap",label:"Basemap Gallery",icon:He},{id:"analysis",label:"Analysis",icon:Qe}];Ve(async()=>{await fe(()=>import("../chunks/C3JU2Cqc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117]),import.meta.url),await fe(()=>import("../chunks/DQbFm6XI.js"),__vite__mapDeps([118,119,2,3,120,12,11,121,7,5,4,1,6,8,9,10,18,19,20,21,22,23,24,122,123,17,48,49,36,50,51,52,39,33,30,124,57,43,125,85,32,34,40,41]),import.meta.url),await fe(()=>import("../chunks/BI8Qvcwk.js").then(I=>I.a),__vite__mapDeps([126,18,2,3,19,20,21,22,23,11,24,59,42,36,43,33,30,44,35,32,31,28,34,127,128,124,80,123]),import.meta.url)}),De(()=>{!o(i)||!o(f)||(o(i).view=o(f),o(i).listItemCreatedFunction=I=>{const{item:P}=I;P.layer.type!="group"&&(P.panel={content:"legend",open:!0})})});async function E(){W(f,o(a)?.view??null,!0),o(i)&&o(f)&&(o(i).view=o(f)),!o(v)&&(W(v,!0),!(!o(f)||!o(f).map)&&await o(f).when())}function h(I,P){W(p,P,!0),W(w,P?I:null,!0)}var C=pt(),m=ce(C);{var D=I=>{Ke(I,{get options(){return _},onToggleItem:h})};he(m,I=>{o(f)&&I(D)})}var L=re(m,2);{const I=T=>{var V=Ge(),R=pe(V);be(R,()=>ke,(U,le)=>{le(U,{children:(ue,ge)=>{var H=ct(),O=pe(H);ne(()=>K(O,"hidden",o(w)!=="layers")),ve(O,e=>W(i,e),()=>o(i));var x=re(O,2),Q=ce(x);we(Q,1,"basemap-gallery svelte-1q0t0hd"),ne(()=>K(Q,"view",o(f))),de(x);var r=re(x,2);{var t=e=>{var l=ft(),y=ce(l);ut(y,{get mapView(){return o(f)}}),de(l),ne(()=>l.hidden=o(w)!=="analysis"),z(e,l)};he(r,e=>{o(f)&&e(t)})}ne(()=>x.hidden=o(w)!=="basemap"),z(ue,H)},$$slots:{default:!0}})}),z(T,V)},P=T=>{var V=dt();we(V,1,"relative h-full w-full"),K(V,"item-id","331ba640fe6c4fa5b4c3d025160c2ec5"),K(V,"center","-2.231774828836059,53.46531847221502"),K(V,"zoom","15"),ve(V,R=>W(a,R),()=>o(a)),We("arcgisViewReadyChange",V,E),z(T,V)};be(L,()=>Me,(T,V)=>{V(T,{get isOpen(){return o(p)},hideToggleButton:!0,sidebarContent:I,mainContent:P,$$slots:{sidebarContent:!0,mainContent:!0}})})}de(C),z(u,C),Ie()}export{jt as component};
