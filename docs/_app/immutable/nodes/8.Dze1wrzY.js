const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/h5rW6lAS.js","../chunks/DwWpeHsS.js","../chunks/BiKLiV0b.js","../chunks/PPVm8Dsz.js","../chunks/BfMV86KQ.js","../chunks/BUpj17sD.js","../chunks/mvO4rAvm.js","../chunks/BFkxbxSE.js","../chunks/Db91rTNV.js","../chunks/CNI1bPWi.js","../chunks/Cp_8tW2x.js","../chunks/BW9c9SrU.js","../chunks/Y_0EfhRu.js","../chunks/bnayRBMH.js","../chunks/JSgpbLKx.js","../chunks/v5xyD8FI.js","../chunks/BT4JRnHr.js","../chunks/D2feDspf.js","../chunks/CPLN7muT.js","../chunks/C0wm8_Yw.js","../chunks/C0Q15jgo.js","../chunks/idjzkL-p.js","../chunks/D7TN9t_q.js","../chunks/Dm66KbFf.js","../chunks/CH2_fMSn.js","../chunks/DP-0fjQN.js","../chunks/8JOOWlUE.js","../chunks/DmtPipHG.js","../chunks/B87vTgcy.js","../chunks/CbKIfN8e.js","../chunks/DdbdneQ1.js","../chunks/BV8-ngCo.js","../chunks/BxzdRo61.js","../chunks/BdDvN8O6.js","../chunks/DYAvFwNf.js","../chunks/BVzLLi1N.js","../chunks/BawRJkAp.js","../chunks/DOBtub6T.js","../assets/index.CQED0rIl.css","../chunks/in6aGWsR.js","../chunks/CgRsZskV.js","../chunks/B5GhfNyB.js","../chunks/Cgb6qxNH.js","../chunks/D30EvcMW.js","../chunks/E6bx-lsJ.js","../chunks/jrtQMiTD.js","../chunks/8hNj00IL.js","../chunks/BauKPgXA.js","../chunks/CaVKkSa6.js","../chunks/CT-uuzXp.js","../chunks/fFYBqOqn.js","../chunks/B1N-tmtC.js","../chunks/DEfNR1C0.js","../chunks/CtljFrUl.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/Bxxl7NsE.js","../chunks/DNogqiqR.js","../chunks/DQOO6RKE.js","../chunks/j00zX3Hz.js","../chunks/Bi6C4OG6.js","../chunks/C7e3Z5XT.js","../chunks/D-YQ4CHs.js","../chunks/COf4WTrX.js","../chunks/O7sg2ysZ.js","../chunks/rIJyvhvt.js","../chunks/Dc261vxq.js","../chunks/CC5XFA8H.js","../chunks/D-fXJnCB.js","../chunks/B4oxan5h.js","../chunks/CEhj4l8G.js","../chunks/D_bKRBrk.js","../chunks/BvwLokzg.js","../chunks/6vsZKnZ9.js","../chunks/7VNfS1TG.js","../chunks/DP5d1tPL.js","../chunks/D-LmNXBe.js","../chunks/B0qK9XMn.js","../chunks/Dci9kdnZ.js","../chunks/CF39WpqH.js","../chunks/BAzr6Eo0.js","../chunks/FTzM2Tyd.js","../chunks/C61-NiK_.js","../chunks/BWeyrF54.js","../chunks/Cx8JFOfk.js","../chunks/BmgeYasw.js","../chunks/DLOQEY_Z.js","../chunks/91llm6te.js","../chunks/D31seSHD.js","../chunks/DH0im0Cr.js","../chunks/NIvIaQ85.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/Bdg0_NLM.js","../chunks/ShBCB_ow.js","../chunks/Df_x8s9w.js","../chunks/O7OdySC2.js","../chunks/UusjRatb.js","../chunks/BTOnRfOV.js","../chunks/CaYZrGFV.js"])))=>i.map(i=>d[i]);
import{_ as Rn}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as sn,a as rs}from"../chunks/dDAaEPZG.js";import{Q as al,E as ol,b9 as sl,ba as ll,y as cl,m as Br,bb as ul,bc as dl,bd as fl,W as ns,at as hl,A as vl,n as Oe,aa as B,t as i,a7 as O,a8 as ie,a9 as vt,u as lt,p as fe,a5 as C,a as he,c as W,r as U,a6 as Y,R as ft,b6 as gl,b7 as _o,b8 as ml,V as rt,o as is,aJ as Ii,aE as pl}from"../chunks/BDDTUZ88.js";import{p as tr,d as V,a as v,f as J,t as ct,e as Vn}from"../chunks/Cwt5lIb3.js";import{p as K,i as te,r as Le,s as We,l as Jr}from"../chunks/C31JG7LH.js";import{c as ae}from"../chunks/D1jCOcTt.js";import{b as sr}from"../chunks/BSKGGa8Q.js";import{b as yl,s as Mt}from"../chunks/XAXmKrrN.js";import{a as Ft,e as on,f as yr,b as cr,s as Tt,S as bl,C as wl,h as _l}from"../chunks/BElPz1eq.js";import{a as _a,C as xl}from"../chunks/BUPFkqTZ.js";import{C as xa}from"../chunks/COC1fdeC.js";import{s as xe,e as er,i as Er}from"../chunks/DPcECag8.js";import{o as Or,e as as,f as qn}from"../chunks/DNyUMNTX.js";import{c as wn,B as Kt,b as Sl}from"../chunks/B2ZqdCVZ.js";import{C as ln,h as lr,l as hr,x as Pi,j as cn,k as Wr,w as zr,m as rr,b as Ce,n as $t,P as kl,D as Cl,H as os,S as br,I as Sa,y as Ai}from"../chunks/BgQyHJ5O.js";import{I as ur,T as Il}from"../chunks/BEmBV25U.js";import{i as Pl,I as kr,e as Al,D as Tl,c as Dl,d as El,X as Ol,f as Ml,g as Fl,a as Rl,b as Nl,C as Ll,M as Bl}from"../chunks/BYWmIEgx.js";import{I as Qr,s as Xr,S as zl}from"../chunks/Dmx1ecyr.js";import{S as jl,C as Vl,d as ql}from"../chunks/C2gg0Q-7.js";import{c as Kl,g as Hl}from"../chunks/Cpj98o6Y.js";import"../chunks/VL7BTIHT.js";import{b as xo}from"../chunks/Cr4YsEDZ.js";import"../chunks/B17Q6ahh.js";import"../chunks/69_IOA4Y.js";import{j as pi,s as Ul,i as Gl,k as Wl,a as Yl,b as Jl,c as Ql,d as Xl}from"../chunks/DzbG3iOB.js";import{b as Zl}from"../chunks/COf4WTrX.js";import $l from"../chunks/CNI1bPWi.js";import{C as So}from"../chunks/DwWpeHsS.js";import{bU as ec}from"../chunks/BfMV86KQ.js";import{h as Nn}from"../chunks/CmF_qWqf.js";import{c as Wt}from"../chunks/PDByQl4c.js";import{R as ka,b as tc,P as rc,C as ss}from"../chunks/CCP5sRbe.js";import{S as Ti,h as Ca,d as nc,n as Di}from"../chunks/6LWBdmYz.js";import{i as ls}from"../chunks/CFXDRgrQ.js";import{b as Tr,M as ic,L as cs,A as ac,a as oc,S as sc}from"../chunks/tFvfzUak.js";import{b as ko}from"../chunks/Db91rTNV.js";import"../chunks/D0U14gq-.js";import{a as lc}from"../chunks/BUpj17sD.js";import{C as cc,a as Co,S as uc}from"../chunks/6eoOfjnb.js";import{z as Io}from"../chunks/O7sg2ysZ.js";import"../chunks/bnayRBMH.js";import"../chunks/CEhj4l8G.js";import"../chunks/D_bKRBrk.js";import"../chunks/CbKIfN8e.js";import"../chunks/BV8-ngCo.js";import"../chunks/6vsZKnZ9.js";import{j as Po}from"../chunks/Cx8JFOfk.js";import{p as Ao}from"../chunks/BvwLokzg.js";import{a as To,m as Do}from"../chunks/DdbdneQ1.js";import{u as li}from"../chunks/Y_0EfhRu.js";const dc=()=>performance.now(),Lr={tick:u=>requestAnimationFrame(u),now:()=>dc(),tasks:new Set};function us(){const u=Lr.now();Lr.tasks.forEach(e=>{e.c(u)||(Lr.tasks.delete(e),e.f())}),Lr.tasks.size!==0&&Lr.tick(us)}function fc(u){let e;return Lr.tasks.size===0&&Lr.tick(us),{promise:new Promise(n=>{Lr.tasks.add(e={c:u,f:n})}),abort(){Lr.tasks.delete(e)}}}function ci(u,e){ns(()=>{u.dispatchEvent(new CustomEvent(e))})}function hc(u){if(u==="float")return"cssFloat";if(u==="offset")return"cssOffset";if(u.startsWith("--"))return u;const e=u.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Eo(u){const e={},n=u.split(";");for(const a of n){const[s,f]=a.split(":");if(!s||f===void 0)break;const d=hc(s.trim());e[d]=f.trim()}return e}const vc=u=>u;function yi(u,e,n,a){var s=(u&dl)!==0,f=(u&fl)!==0,d=s&&f,g=(u&ul)!==0,y=d?"both":s?"in":"out",p,w=e.inert,D=e.style.overflow,k,S;function _(){return ns(()=>p??=n()(e,a?.()??{},{direction:y}))}var E={is_global:g,in(){if(e.inert=w,!s){S?.abort(),S?.reset?.();return}f||k?.abort(),ci(e,"introstart"),k=ha(e,_(),S,1,()=>{ci(e,"introend"),k?.abort(),k=p=void 0,e.style.overflow=D})},out(H){if(!f){H?.(),p=void 0;return}e.inert=!0,ci(e,"outrostart"),S=ha(e,_(),k,0,()=>{ci(e,"outroend"),H?.()})},stop:()=>{k?.abort(),S?.abort()}},N=al;if((N.transitions??=[]).push(E),s&&yl){var T=g;if(!T){for(var M=N.parent;M&&(M.f&ol)!==0;)for(;(M=M.parent)&&(M.f&sl)===0;);T=!M||(M.f&ll)!==0}T&&cl(()=>{Br(()=>E.in())})}}function ha(u,e,n,a,s){var f=a===1;if(hl(e)){var d,g=!1;return vl(()=>{if(!g){var N=e({direction:f?"in":"out"});d=ha(u,N,n,a,s)}}),{abort:()=>{g=!0,d?.abort()},deactivate:()=>d.deactivate(),reset:()=>d.reset(),t:()=>d.t()}}if(n?.deactivate(),!e?.duration)return s(),{abort:Oe,deactivate:Oe,reset:Oe,t:()=>a};const{delay:y=0,css:p,tick:w,easing:D=vc}=e;var k=[];if(f&&n===void 0&&(w&&w(0,1),p)){var S=Eo(p(0,1));k.push(S,S)}var _=()=>1-a,E=u.animate(k,{duration:y,fill:"forwards"});return E.onfinish=()=>{E.cancel();var N=n?.t()??1-a;n?.abort();var T=a-N,M=e.duration*Math.abs(T),H=[];if(M>0){var Z=!1;if(p)for(var re=Math.ceil(M/16.666666666666668),Q=0;Q<=re;Q+=1){var le=N+T*D(Q/re),De=Eo(p(le,1-le));H.push(De),Z||=De.overflow==="hidden"}Z&&(u.style.overflow="hidden"),_=()=>{var Me=E.currentTime;return N+T*D(Me/M)},w&&fc(()=>{if(E.playState!=="running")return!1;var Me=_();return w(Me,1-Me),!0})}E=u.animate(H,{duration:M,fill:"forwards"}),E.onfinish=()=>{_=()=>a,w?.(a,1-a),s()}},{abort:()=>{E&&(E.cancel(),E.effect=null,E.onfinish=Oe)},deactivate:()=>{s=Oe},reset:()=>{a===0&&w?.(1,0)},t:()=>_()}}const yn=cn({component:"accordion",parts:["root","trigger","content","item","header"]}),ds=new ln("Accordion.Root"),Ei=new ln("Accordion.Item");class fs{opts;rovingFocusGroup;attachment;constructor(e){this.opts=e,this.rovingFocusGroup=new ka({rootNode:this.opts.ref,candidateAttr:yn.trigger,loop:this.opts.loop,orientation:this.opts.orientation}),this.attachment=lr(this.opts.ref)}#e=B(()=>({id:this.opts.id.current,"data-orientation":this.opts.orientation.current,"data-disabled":hr(this.opts.disabled.current),[yn.root]:"",...this.attachment}));get props(){return i(this.#e)}set props(e){O(this.#e,e)}}class gc extends fs{opts;isMulti=!1;constructor(e){super(e),this.opts=e,this.includesItem=this.includesItem.bind(this),this.toggleItem=this.toggleItem.bind(this)}includesItem(e){return this.opts.value.current===e}toggleItem(e){this.opts.value.current=this.includesItem(e)?"":e}}class mc extends fs{#e;isMulti=!0;constructor(e){super(e),this.#e=e.value,this.includesItem=this.includesItem.bind(this),this.toggleItem=this.toggleItem.bind(this)}includesItem(e){return this.#e.current.includes(e)}toggleItem(e){this.#e.current=this.includesItem(e)?this.#e.current.filter(n=>n!==e):[...this.#e.current,e]}}class pc{static create(e){const{type:n,...a}=e,s=n==="single"?new gc(a):new mc(a);return ds.set(s)}}class Ia{static create(e){return Ei.set(new Ia({...e,rootState:ds.get()}))}opts;root;#e=B(()=>this.root.includesItem(this.opts.value.current));get isActive(){return i(this.#e)}set isActive(e){O(this.#e,e)}#t=B(()=>this.opts.disabled.current||this.root.opts.disabled.current);get isDisabled(){return i(this.#t)}set isDisabled(e){O(this.#t,e)}attachment;constructor(e){this.opts=e,this.root=e.rootState,this.updateValue=this.updateValue.bind(this),this.attachment=lr(this.opts.ref)}updateValue(){this.root.toggleItem(this.opts.value.current)}#r=B(()=>({id:this.opts.id.current,"data-state":Pi(this.isActive),"data-disabled":hr(this.isDisabled),"data-orientation":this.root.opts.orientation.current,[yn.item]:"",...this.attachment}));get props(){return i(this.#r)}set props(e){O(this.#r,e)}}class Pa{opts;itemState;#e;#t=B(()=>this.opts.disabled.current||this.itemState.opts.disabled.current||this.#e.opts.disabled.current);attachment;constructor(e,n){this.opts=e,this.itemState=n,this.#e=n.root,this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this),this.attachment=lr(this.opts.ref)}static create(e){return new Pa(e,Ei.get())}onclick(e){if(i(this.#t)||e.button!==0){e.preventDefault();return}this.itemState.updateValue()}onkeydown(e){if(!i(this.#t)){if(e.key===Ti||e.key===Ca){e.preventDefault(),this.itemState.updateValue();return}this.#e.rovingFocusGroup.handleKeydown(this.opts.ref.current,e)}}#r=B(()=>({id:this.opts.id.current,disabled:i(this.#t),"aria-expanded":Wr(this.itemState.isActive),"aria-disabled":Wr(i(this.#t)),"data-disabled":hr(i(this.#t)),"data-state":Pi(this.itemState.isActive),"data-orientation":this.#e.opts.orientation.current,[yn.trigger]:"",tabindex:0,onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return i(this.#r)}set props(e){O(this.#r,e)}}class Aa{opts;item;attachment;#e=void 0;#t=!1;#r=ie(vt({width:0,height:0}));#n=B(()=>this.opts.hiddenUntilFound.current?this.item.isActive:this.opts.forceMount.current||this.item.isActive);get open(){return i(this.#n)}set open(e){O(this.#n,e)}constructor(e,n){this.opts=e,this.item=n,this.#t=this.item.isActive,this.attachment=lr(this.opts.ref),lt(()=>{const a=requestAnimationFrame(()=>{this.#t=!1});return()=>cancelAnimationFrame(a)}),zr.pre([()=>this.opts.ref.current,()=>this.opts.hiddenUntilFound.current],([a,s])=>!a||!s?void 0:Or(a,"beforematch",()=>{this.item.isActive||requestAnimationFrame(()=>{this.item.updateValue()})})),zr([()=>this.open,()=>this.opts.ref.current],this.#i)}static create(e){return new Aa(e,Ei.get())}#i=([e,n])=>{n&&nc(()=>{const a=this.opts.ref.current;if(!a)return;this.#e??={transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";const s=a.getBoundingClientRect();O(this.#r,{width:s.width,height:s.height},!0),!this.#t&&this.#e&&(a.style.transitionDuration=this.#e.transitionDuration,a.style.animationName=this.#e.animationName)})};#a=B(()=>({open:this.item.isActive}));get snippetProps(){return i(this.#a)}set snippetProps(e){O(this.#a,e)}#o=B(()=>({id:this.opts.id.current,"data-state":Pi(this.item.isActive),"data-disabled":hr(this.item.isDisabled),"data-orientation":this.item.root.opts.orientation.current,[yn.content]:"",style:{"--bits-accordion-content-height":`${i(this.#r).height}px`,"--bits-accordion-content-width":`${i(this.#r).width}px`},hidden:this.opts.hiddenUntilFound.current&&!this.item.isActive?"until-found":void 0,...this.attachment}));get props(){return i(this.#o)}set props(e){O(this.#o,e)}}class Ta{opts;item;attachment;constructor(e,n){this.opts=e,this.item=n,this.attachment=lr(this.opts.ref)}static create(e){return new Ta(e,Ei.get())}#e=B(()=>({id:this.opts.id.current,role:"heading","aria-level":this.opts.level.current,"data-heading-level":this.opts.level.current,"data-state":Pi(this.item.isActive),"data-orientation":this.item.root.opts.orientation.current,[yn.header]:"",...this.attachment}));get props(){return i(this.#e)}set props(e){O(this.#e,e)}}var yc=J("<div><!></div>");function bc(u,e){const n=tr();fe(e,!0);let a=K(e,"disabled",3,!1),s=K(e,"value",15),f=K(e,"ref",15,null),d=K(e,"id",19,()=>rr(n)),g=K(e,"onValueChange",3,Di),y=K(e,"loop",3,!0),p=K(e,"orientation",3,"vertical"),w=Le(e,["$$slots","$$events","$$legacy","disabled","children","child","type","value","ref","id","onValueChange","loop","orientation"]);function D(){s()===void 0&&s(e.type==="single"?"":[])}D(),zr.pre(()=>s(),()=>{D()});const k=pc.create({type:e.type,value:Ce(()=>s(),M=>{s(M),g()(M)}),id:Ce(()=>d()),disabled:Ce(()=>a()),loop:Ce(()=>y()),orientation:Ce(()=>p()),ref:Ce(()=>f(),M=>f(M))}),S=B(()=>$t(w,k.props));var _=V(),E=C(_);{var N=M=>{var H=V(),Z=C(H);xe(Z,()=>e.child,()=>({props:i(S)})),v(M,H)},T=M=>{var H=yc();Ft(H,()=>({...i(S)}));var Z=W(H);xe(Z,()=>e.children??Oe),U(H),v(M,H)};te(E,M=>{e.child?M(N):M(T,!1)})}v(u,_),he()}var wc=J("<div><!></div>");function _c(u,e){const n=tr();fe(e,!0);const a=rr(n);let s=K(e,"id",3,a),f=K(e,"disabled",3,!1),d=K(e,"value",3,a),g=K(e,"ref",15,null),y=Le(e,["$$slots","$$events","$$legacy","id","disabled","value","children","child","ref"]);const p=Ia.create({value:Ce(()=>d()),disabled:Ce(()=>f()),id:Ce(()=>s()),ref:Ce(()=>g(),E=>g(E))}),w=B(()=>$t(y,p.props));var D=V(),k=C(D);{var S=E=>{var N=V(),T=C(N);xe(T,()=>e.child,()=>({props:i(w)})),v(E,N)},_=E=>{var N=wc();Ft(N,()=>({...i(w)}));var T=W(N);xe(T,()=>e.children??Oe),U(N),v(E,N)};te(k,E=>{e.child?E(S):E(_,!1)})}v(u,D),he()}var xc=J("<div><!></div>");function Sc(u,e){const n=tr();fe(e,!0);let a=K(e,"id",19,()=>rr(n)),s=K(e,"level",3,2),f=K(e,"ref",15,null),d=Le(e,["$$slots","$$events","$$legacy","id","level","children","child","ref"]);const g=Ta.create({id:Ce(()=>a()),level:Ce(()=>s()),ref:Ce(()=>f(),S=>f(S))}),y=B(()=>$t(d,g.props));var p=V(),w=C(p);{var D=S=>{var _=V(),E=C(_);xe(E,()=>e.child,()=>({props:i(y)})),v(S,_)},k=S=>{var _=xc();Ft(_,()=>({...i(y)}));var E=W(_);xe(E,()=>e.children??Oe),U(_),v(S,_)};te(w,S=>{e.child?S(D):S(k,!1)})}v(u,p),he()}var kc=J("<button><!></button>");function Cc(u,e){const n=tr();fe(e,!0);let a=K(e,"disabled",3,!1),s=K(e,"ref",15,null),f=K(e,"id",19,()=>rr(n)),d=Le(e,["$$slots","$$events","$$legacy","disabled","ref","id","children","child"]);const g=Pa.create({disabled:Ce(()=>a()),id:Ce(()=>f()),ref:Ce(()=>s(),S=>s(S))}),y=B(()=>$t(d,g.props));var p=V(),w=C(p);{var D=S=>{var _=V(),E=C(_);xe(E,()=>e.child,()=>({props:i(y)})),v(S,_)},k=S=>{var _=kc();Ft(_,()=>({type:"button",...i(y)}));var E=W(_);xe(E,()=>e.children??Oe),U(_),v(S,_)};te(w,S=>{e.child?S(D):S(k,!1)})}v(u,p),he()}var Ic=J("<div><!></div>");function Pc(u,e){const n=tr();fe(e,!0);let a=K(e,"ref",15,null),s=K(e,"id",19,()=>rr(n)),f=K(e,"forceMount",3,!1),d=K(e,"hiddenUntilFound",3,!1),g=Le(e,["$$slots","$$events","$$legacy","child","ref","id","forceMount","children","hiddenUntilFound"]);const y=Aa.create({forceMount:Ce(()=>f()),id:Ce(()=>s()),ref:Ce(()=>a(),p=>a(p)),hiddenUntilFound:Ce(()=>d())});kl(u,{forceMount:!0,get open(){return y.open},get ref(){return y.opts.ref},presence:(w,D)=>{let k=()=>D?.().present;const S=B(()=>$t(g,y.props,d()&&!k()?{}:{hidden:d()?!k():f()?void 0:!k()}));var _=V(),E=C(_);{var N=M=>{var H=V(),Z=C(H);{let re=B(()=>({props:i(S),...y.snippetProps}));xe(Z,()=>e.child,()=>i(re))}v(M,H)},T=M=>{var H=Ic();Ft(H,()=>({...i(S)}));var Z=W(H);xe(Z,()=>e.children??Oe),U(H),v(M,H)};te(E,M=>{e.child?M(N):M(T,!1)})}v(w,_)},$$slots:{presence:!0}}),he()}var Ac=J("<button><!></button>");function Tc(u,e){const n=tr();fe(e,!0);let a=K(e,"id",19,()=>rr(n)),s=K(e,"ref",15,null),f=K(e,"disabled",3,!1),d=Le(e,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const g=Pl.create({id:Ce(()=>a()),ref:Ce(()=>s(),S=>s(S)),disabled:Ce(()=>!!f())}),y=B(()=>$t(d,g.props));var p=V(),w=C(p);{var D=S=>{var _=V(),E=C(_);xe(E,()=>e.child,()=>({props:i(y)})),v(S,_)},k=S=>{var _=Ac();Ft(_,()=>({...i(y)}));var E=W(_);xe(E,()=>e.children??Oe),U(_),v(S,_)};te(w,S=>{e.child?S(D):S(k,!1)})}v(u,p),he()}const Dc=cn({component:"avatar",parts:["root","image","fallback"]}),Ec=new ln("Avatar.Root");class Da{static create(e){return Ec.set(new Da(e))}opts;domContext;attachment;constructor(e){this.opts=e,this.domContext=new Cl(this.opts.ref),this.loadImage=this.loadImage.bind(this),this.attachment=lr(this.opts.ref)}loadImage(e,n,a){if(this.opts.loadingStatus.current==="loaded")return;let s;const f=new Image;return f.src=e,n!==void 0&&(f.crossOrigin=n),a&&(f.referrerPolicy=a),this.opts.loadingStatus.current="loading",f.onload=()=>{s=this.domContext.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},f.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{s&&this.domContext.clearTimeout(s)}}#e=B(()=>({id:this.opts.id.current,[Dc.root]:"","data-status":this.opts.loadingStatus.current,...this.attachment}));get props(){return i(this.#e)}set props(e){O(this.#e,e)}}var Oc=J("<div><!></div>");function Mc(u,e){const n=tr();fe(e,!0);let a=K(e,"delayMs",3,0),s=K(e,"loadingStatus",15,"loading"),f=K(e,"id",19,()=>rr(n)),d=K(e,"ref",15,null),g=Le(e,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const y=Da.create({delayMs:Ce(()=>a()),loadingStatus:Ce(()=>s(),_=>{s()!==_&&(s(_),e.onLoadingStatusChange?.(_))}),id:Ce(()=>f()),ref:Ce(()=>d(),_=>d(_))}),p=B(()=>$t(g,y.props));var w=V(),D=C(w);{var k=_=>{var E=V(),N=C(E);xe(N,()=>e.child,()=>({props:i(p)})),v(_,E)},S=_=>{var E=Oc();Ft(E,()=>({...i(p)}));var N=W(E);xe(N,()=>e.children??Oe),U(E),v(_,E)};te(D,_=>{e.child?_(k):_(S,!1)})}v(u,w),he()}const Fc=cn({component:"checkbox",parts:["root","group","group-label","input"]}),Rc=new ln("Checkbox.Group"),hs=new ln("Checkbox.Root");class Ea{static create(e,n=null){return hs.set(new Ea(e,n))}opts;group;#e=B(()=>this.group&&this.group.opts.name.current?this.group.opts.name.current:this.opts.name.current);get trueName(){return i(this.#e)}set trueName(e){O(this.#e,e)}#t=B(()=>this.group&&this.group.opts.required.current?!0:this.opts.required.current);get trueRequired(){return i(this.#t)}set trueRequired(e){O(this.#t,e)}#r=B(()=>this.group&&this.group.opts.disabled.current?!0:this.opts.disabled.current);get trueDisabled(){return i(this.#r)}set trueDisabled(e){O(this.#r,e)}#n=B(()=>this.group&&this.group.opts.readonly.current?!0:this.opts.readonly.current);get trueReadonly(){return i(this.#n)}set trueReadonly(e){O(this.#n,e)}attachment;constructor(e,n){this.opts=e,this.group=n,this.attachment=lr(this.opts.ref),this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),zr.pre([()=>pi(this.group?.opts.value.current),()=>this.opts.value.current],([a,s])=>{!a||!s||(this.opts.checked.current=a.includes(s))}),zr.pre(()=>this.opts.checked.current,a=>{this.group&&(a?this.group?.addValue(this.opts.value.current):this.group?.removeValue(this.opts.value.current))})}onkeydown(e){this.trueDisabled||this.trueReadonly||(e.key===Ca&&e.preventDefault(),e.key===Ti&&(e.preventDefault(),this.#i()))}#i(){this.opts.indeterminate.current?(this.opts.indeterminate.current=!1,this.opts.checked.current=!0):this.opts.checked.current=!this.opts.checked.current}onclick(e){if(!(this.trueDisabled||this.trueReadonly)){if(this.opts.type.current==="submit"){this.#i();return}e.preventDefault(),this.#i()}}#a=B(()=>({checked:this.opts.checked.current,indeterminate:this.opts.indeterminate.current}));get snippetProps(){return i(this.#a)}set snippetProps(e){O(this.#a,e)}#o=B(()=>({id:this.opts.id.current,role:"checkbox",type:this.opts.type.current,disabled:this.trueDisabled,"aria-checked":os(this.opts.checked.current,this.opts.indeterminate.current),"aria-required":Wr(this.trueRequired),"aria-readonly":Wr(this.trueReadonly),"data-disabled":hr(this.trueDisabled),"data-readonly":hr(this.trueReadonly),"data-state":Nc(this.opts.checked.current,this.opts.indeterminate.current),[Fc.root]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return i(this.#o)}set props(e){O(this.#o,e)}}class Oa{static create(){return new Oa(hs.get())}root;#e=B(()=>this.root.group?!!(this.root.opts.value.current!==void 0&&this.root.group.opts.value.current.includes(this.root.opts.value.current)):this.root.opts.checked.current);get trueChecked(){return i(this.#e)}set trueChecked(e){O(this.#e,e)}#t=B(()=>!!this.root.trueName);get shouldRender(){return i(this.#t)}set shouldRender(e){O(this.#t,e)}constructor(e){this.root=e,this.onfocus=this.onfocus.bind(this)}onfocus(e){tc(this.root.opts.ref.current)&&this.root.opts.ref.current.focus()}#r=B(()=>({type:"checkbox",checked:this.root.opts.checked.current===!0,disabled:this.root.trueDisabled,required:this.root.trueRequired,name:this.root.trueName,value:this.root.opts.value.current,readonly:this.root.trueReadonly,onfocus:this.onfocus}));get props(){return i(this.#r)}set props(e){O(this.#r,e)}}function Nc(u,e){return e?"indeterminate":u?"checked":"unchecked"}var Lc=J("<input/>"),Bc=J("<input/>");function vs(u,e){fe(e,!0);let n=K(e,"value",15),a=Le(e,["$$slots","$$events","$$legacy","value"]);const s=B(()=>$t(a,{"aria-hidden":"true",tabindex:-1,style:Ul}));var f=V(),d=C(f);{var g=p=>{var w=Lc();Ft(w,()=>({...i(s),value:n()}),void 0,void 0,void 0,!0),v(p,w)},y=p=>{var w=Bc();Ft(w,()=>({...i(s)}),void 0,void 0,void 0,!0),Gl(w,n),v(p,w)};te(d,p=>{i(s).type==="checkbox"?p(g):p(y,!1)})}v(u,f),he()}function zc(u,e){fe(e,!1);const n=Oa.create();ls();var a=V(),s=C(a);{var f=d=>{vs(d,We(()=>n.props))};te(s,d=>{n.shouldRender&&d(f)})}v(u,a),he()}var jc=J("<button><!></button>"),Vc=J("<!> <!>",1);function gs(u,e){const n=tr();fe(e,!0);let a=K(e,"checked",15,!1),s=K(e,"ref",15,null),f=K(e,"disabled",3,!1),d=K(e,"required",3,!1),g=K(e,"name",3,void 0),y=K(e,"value",3,"on"),p=K(e,"id",19,()=>rr(n)),w=K(e,"indeterminate",15,!1),D=K(e,"type",3,"button"),k=Le(e,["$$slots","$$events","$$legacy","checked","ref","onCheckedChange","children","disabled","required","name","value","id","indeterminate","onIndeterminateChange","child","type","readonly"]);const S=Rc.getOr(null);S&&y()&&(S.opts.value.current.includes(y())?a(!0):a(!1)),zr.pre(()=>y(),()=>{S&&y()&&(S.opts.value.current.includes(y())?a(!0):a(!1))});const _=Ea.create({checked:Ce(()=>a(),re=>{a(re),e.onCheckedChange?.(re)}),disabled:Ce(()=>f()??!1),required:Ce(()=>d()),name:Ce(()=>g()),value:Ce(()=>y()),id:Ce(()=>p()),ref:Ce(()=>s(),re=>s(re)),indeterminate:Ce(()=>w(),re=>{w(re),e.onIndeterminateChange?.(re)}),type:Ce(()=>D()),readonly:Ce(()=>!!e.readonly)},S),E=B(()=>$t({...k},_.props));var N=Vc(),T=C(N);{var M=re=>{var Q=V(),le=C(Q);{let De=B(()=>({props:i(E),..._.snippetProps}));xe(le,()=>e.child,()=>i(De))}v(re,Q)},H=re=>{var Q=jc();Ft(Q,()=>({...i(E)}));var le=W(Q);xe(le,()=>e.children??Oe,()=>_.snippetProps),U(Q),v(re,Q)};te(T,re=>{e.child?re(M):re(H,!1)})}var Z=Y(T,2);zc(Z,{}),v(u,N),he()}var qc=J("<div><!></div>");function Kc(u,e){const n=tr();fe(e,!0);let a=K(e,"id",19,()=>rr(n)),s=K(e,"ref",15,null),f=K(e,"forceMount",3,!1),d=Le(e,["$$slots","$$events","$$legacy","id","ref","forceMount","children","child"]);const g=Wl.create({id:Ce(()=>a()),ref:Ce(()=>s(),k=>s(k)),forceMount:Ce(()=>f())}),y=B(()=>$t(d,g.props));var p=V(),w=C(p);{var D=k=>{var S=V(),_=C(S);{var E=T=>{var M=V(),H=C(M);xe(H,()=>e.child,()=>({props:i(y)})),v(T,M)},N=T=>{var M=qc();Ft(M,()=>({...i(y)}));var H=W(M);xe(H,()=>e.children??Oe),U(M),v(T,M)};te(_,T=>{e.child?T(E):T(N,!1)})}v(k,S)};te(w,k=>{g.shouldRender&&k(D)})}v(u,p),he()}const Hc=cn({component:"label",parts:["root"]});class Ma{static create(e){return new Ma(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=lr(this.opts.ref),this.onmousedown=this.onmousedown.bind(this)}onmousedown(e){e.detail>1&&e.preventDefault()}#e=B(()=>({id:this.opts.id.current,[Hc.root]:"",onmousedown:this.onmousedown,...this.attachment}));get props(){return i(this.#e)}set props(e){O(this.#e,e)}}var Uc=J("<label><!></label>");function Gc(u,e){const n=tr();fe(e,!0);let a=K(e,"id",19,()=>rr(n)),s=K(e,"ref",15,null),f=Le(e,["$$slots","$$events","$$legacy","children","child","id","ref","for"]);const d=Ma.create({id:Ce(()=>a()),ref:Ce(()=>s(),k=>s(k))}),g=B(()=>$t(f,d.props,{for:e.for}));var y=V(),p=C(y);{var w=k=>{var S=V(),_=C(S);xe(_,()=>e.child,()=>({props:i(g)})),v(k,S)},D=k=>{var S=Uc();Ft(S,()=>({...i(g),for:e.for}));var _=W(S);xe(_,()=>e.children??Oe),U(S),v(k,S)};te(p,k=>{e.child?k(w):k(D,!1)})}v(u,y),he()}const va=cn({component:"radio-group",parts:["root","item"]}),Fa=new ln("RadioGroup.Root");class Ra{static create(e){return Fa.set(new Ra(e))}opts;#e=B(()=>this.opts.value.current!=="");get hasValue(){return i(this.#e)}set hasValue(e){O(this.#e,e)}rovingFocusGroup;attachment;constructor(e){this.opts=e,this.attachment=lr(this.opts.ref),this.rovingFocusGroup=new ka({rootNode:this.opts.ref,candidateAttr:va.item,loop:this.opts.loop,orientation:this.opts.orientation})}isChecked(e){return this.opts.value.current===e}setValue(e){this.opts.value.current=e}#t=B(()=>({id:this.opts.id.current,role:"radiogroup","aria-required":Wr(this.opts.required.current),"aria-disabled":Wr(this.opts.disabled.current),"aria-readonly":this.opts.readonly.current?"true":void 0,"data-disabled":hr(this.opts.disabled.current),"data-readonly":hr(this.opts.readonly.current),"data-orientation":this.opts.orientation.current,[va.root]:"",...this.attachment}));get props(){return i(this.#t)}set props(e){O(this.#t,e)}}class Na{static create(e){return new Na(e,Fa.get())}opts;root;attachment;#e=B(()=>this.root.opts.value.current===this.opts.value.current);get checked(){return i(this.#e)}set checked(e){O(this.#e,e)}#t=B(()=>this.opts.disabled.current||this.root.opts.disabled.current);#r=B(()=>this.root.opts.readonly.current);#n=B(()=>this.root.isChecked(this.opts.value.current));#i=ie(-1);constructor(e,n){this.opts=e,this.root=n,this.attachment=lr(this.opts.ref),this.opts.value.current===this.root.opts.value.current?(this.root.rovingFocusGroup.setCurrentTabStopId(this.opts.id.current),O(this.#i,0)):this.root.opts.value.current||O(this.#i,0),lt(()=>{O(this.#i,this.root.rovingFocusGroup.getTabIndex(this.opts.ref.current),!0)}),zr([()=>this.opts.value.current,()=>this.root.opts.value.current],()=>{this.opts.value.current===this.root.opts.value.current&&(this.root.rovingFocusGroup.setCurrentTabStopId(this.opts.id.current),O(this.#i,0))}),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this),this.onfocus=this.onfocus.bind(this)}onclick(e){this.opts.disabled.current||i(this.#r)||this.root.setValue(this.opts.value.current)}onfocus(e){!this.root.hasValue||i(this.#r)||this.root.setValue(this.opts.value.current)}onkeydown(e){if(!i(this.#t)){if(e.key===Ti){e.preventDefault(),i(this.#r)||this.root.setValue(this.opts.value.current);return}this.root.rovingFocusGroup.handleKeydown(this.opts.ref.current,e,!0)}}#a=B(()=>({checked:i(this.#n)}));get snippetProps(){return i(this.#a)}set snippetProps(e){O(this.#a,e)}#o=B(()=>({id:this.opts.id.current,disabled:i(this.#t)?!0:void 0,"data-value":this.opts.value.current,"data-orientation":this.root.opts.orientation.current,"data-disabled":hr(i(this.#t)),"data-readonly":hr(i(this.#r)),"data-state":i(this.#n)?"checked":"unchecked","aria-checked":os(i(this.#n),!1),[va.item]:"",type:"button",role:"radio",tabindex:i(this.#i),onkeydown:this.onkeydown,onfocus:this.onfocus,onclick:this.onclick,...this.attachment}));get props(){return i(this.#o)}set props(e){O(this.#o,e)}}class La{static create(){return new La(Fa.get())}root;#e=B(()=>this.root.opts.name.current!==void 0);get shouldRender(){return i(this.#e)}set shouldRender(e){O(this.#e,e)}constructor(e){this.root=e,this.onfocus=this.onfocus.bind(this)}onfocus(e){this.root.rovingFocusGroup.focusCurrentTabStop()}#t=B(()=>({name:this.root.opts.name.current,value:this.root.opts.value.current,required:this.root.opts.required.current,disabled:this.root.opts.disabled.current,onfocus:this.onfocus}));get props(){return i(this.#t)}set props(e){O(this.#t,e)}}function Wc(u,e){fe(e,!1);const n=La.create();ls();var a=V(),s=C(a);{var f=d=>{vs(d,We(()=>n.props))};te(s,d=>{n.shouldRender&&d(f)})}v(u,a),he()}var Yc=J("<div><!></div>"),Jc=J("<!> <!>",1);function Qc(u,e){const n=tr();fe(e,!0);let a=K(e,"disabled",3,!1),s=K(e,"value",15,""),f=K(e,"ref",15,null),d=K(e,"orientation",3,"vertical"),g=K(e,"loop",3,!0),y=K(e,"name",3,void 0),p=K(e,"required",3,!1),w=K(e,"readonly",3,!1),D=K(e,"id",19,()=>rr(n)),k=K(e,"onValueChange",3,Di),S=Le(e,["$$slots","$$events","$$legacy","disabled","children","child","value","ref","orientation","loop","name","required","readonly","id","onValueChange"]);const _=Ra.create({orientation:Ce(()=>d()),disabled:Ce(()=>a()),loop:Ce(()=>g()),name:Ce(()=>y()),required:Ce(()=>p()),readonly:Ce(()=>w()),id:Ce(()=>D()),value:Ce(()=>s(),re=>{re!==s()&&(s(re),k()?.(re))}),ref:Ce(()=>f(),re=>f(re))}),E=B(()=>$t(S,_.props));var N=Jc(),T=C(N);{var M=re=>{var Q=V(),le=C(Q);xe(le,()=>e.child,()=>({props:i(E)})),v(re,Q)},H=re=>{var Q=Yc();Ft(Q,()=>({...i(E)}));var le=W(Q);xe(le,()=>e.children??Oe),U(Q),v(re,Q)};te(T,re=>{e.child?re(M):re(H,!1)})}var Z=Y(T,2);Wc(Z,{}),v(u,N),he()}var Xc=J("<button><!></button>");function Zc(u,e){const n=tr();fe(e,!0);let a=K(e,"id",19,()=>rr(n)),s=K(e,"disabled",3,!1),f=K(e,"ref",15,null),d=Le(e,["$$slots","$$events","$$legacy","id","children","child","value","disabled","ref"]);const g=Na.create({value:Ce(()=>e.value),disabled:Ce(()=>s()??!1),id:Ce(()=>a()),ref:Ce(()=>f(),S=>f(S))}),y=B(()=>$t(d,g.props));var p=V(),w=C(p);{var D=S=>{var _=V(),E=C(_);{let N=B(()=>({props:i(y),...g.snippetProps}));xe(E,()=>e.child,()=>i(N))}v(S,_)},k=S=>{var _=Xc();Ft(_,()=>({...i(y)}));var E=W(_);xe(E,()=>e.children??Oe,()=>g.snippetProps),U(_),v(S,_)};te(w,S=>{e.child?S(D):S(k,!1)})}v(u,p),he()}const Ln=cn({component:"tabs",parts:["root","list","trigger","content"]}),Oi=new ln("Tabs.Root");class Ba{static create(e){return Oi.set(new Ba(e))}opts;attachment;rovingFocusGroup;#e=ie(vt([]));get triggerIds(){return i(this.#e)}set triggerIds(e){O(this.#e,e,!0)}valueToTriggerId=new br;valueToContentId=new br;constructor(e){this.opts=e,this.attachment=lr(e.ref),this.rovingFocusGroup=new ka({candidateAttr:Ln.trigger,rootNode:this.opts.ref,loop:this.opts.loop,orientation:this.opts.orientation})}registerTrigger(e,n){return this.triggerIds.push(e),this.valueToTriggerId.set(n,e),()=>{this.triggerIds=this.triggerIds.filter(a=>a!==e),this.valueToTriggerId.delete(n)}}registerContent(e,n){return this.valueToContentId.set(n,e),()=>{this.valueToContentId.delete(n)}}setValue(e){this.opts.value.current=e}#t=B(()=>({id:this.opts.id.current,"data-orientation":this.opts.orientation.current,[Ln.root]:"",...this.attachment}));get props(){return i(this.#t)}set props(e){O(this.#t,e)}}class za{static create(e){return new za(e,Oi.get())}opts;root;attachment;#e=B(()=>this.root.opts.disabled.current);constructor(e,n){this.opts=e,this.root=n,this.attachment=lr(e.ref)}#t=B(()=>({id:this.opts.id.current,role:"tablist","aria-orientation":this.root.opts.orientation.current,"data-orientation":this.root.opts.orientation.current,[Ln.list]:"","data-disabled":hr(i(this.#e)),...this.attachment}));get props(){return i(this.#t)}set props(e){O(this.#t,e)}}class ja{static create(e){return new ja(e,Oi.get())}opts;root;attachment;#e=ie(0);#t=B(()=>this.root.opts.value.current===this.opts.value.current);#r=B(()=>this.opts.disabled.current||this.root.opts.disabled.current);#n=B(()=>this.root.valueToContentId.get(this.opts.value.current));constructor(e,n){this.opts=e,this.root=n,this.attachment=lr(e.ref),zr([()=>this.opts.id.current,()=>this.opts.value.current],([a,s])=>this.root.registerTrigger(a,s)),lt(()=>{this.root.triggerIds.length,i(this.#t)||!this.root.opts.value.current?O(this.#e,0):O(this.#e,-1)}),this.onfocus=this.onfocus.bind(this),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}#i(){this.root.opts.value.current!==this.opts.value.current&&this.root.setValue(this.opts.value.current)}onfocus(e){this.root.opts.activationMode.current!=="automatic"||i(this.#r)||this.#i()}onclick(e){i(this.#r)||this.#i()}onkeydown(e){if(!i(this.#r)){if(e.key===Ti||e.key===Ca){e.preventDefault(),this.#i();return}this.root.rovingFocusGroup.handleKeydown(this.opts.ref.current,e)}}#a=B(()=>({id:this.opts.id.current,role:"tab","data-state":ms(i(this.#t)),"data-value":this.opts.value.current,"data-orientation":this.root.opts.orientation.current,"data-disabled":hr(i(this.#r)),"aria-selected":Wr(i(this.#t)),"aria-controls":i(this.#n),[Ln.trigger]:"",disabled:Sa(i(this.#r)),tabindex:i(this.#e),onclick:this.onclick,onfocus:this.onfocus,onkeydown:this.onkeydown,...this.attachment}));get props(){return i(this.#a)}set props(e){O(this.#a,e)}}class Va{static create(e){return new Va(e,Oi.get())}opts;root;attachment;#e=B(()=>this.root.opts.value.current===this.opts.value.current);#t=B(()=>this.root.valueToTriggerId.get(this.opts.value.current));constructor(e,n){this.opts=e,this.root=n,this.attachment=lr(e.ref),zr([()=>this.opts.id.current,()=>this.opts.value.current],([a,s])=>this.root.registerContent(a,s))}#r=B(()=>({id:this.opts.id.current,role:"tabpanel",hidden:Sa(!i(this.#e)),tabindex:0,"data-value":this.opts.value.current,"data-state":ms(i(this.#e)),"aria-labelledby":i(this.#t),"data-orientation":this.root.opts.orientation.current,[Ln.content]:"",...this.attachment}));get props(){return i(this.#r)}set props(e){O(this.#r,e)}}function ms(u){return u?"active":"inactive"}var $c=J("<div><!></div>");function eu(u,e){const n=tr();fe(e,!0);let a=K(e,"id",19,()=>rr(n)),s=K(e,"ref",15,null),f=K(e,"value",15,""),d=K(e,"onValueChange",3,Di),g=K(e,"orientation",3,"horizontal"),y=K(e,"loop",3,!0),p=K(e,"activationMode",3,"automatic"),w=K(e,"disabled",3,!1),D=Le(e,["$$slots","$$events","$$legacy","id","ref","value","onValueChange","orientation","loop","activationMode","disabled","children","child"]);const k=Ba.create({id:Ce(()=>a()),value:Ce(()=>f(),M=>{f(M),d()(M)}),orientation:Ce(()=>g()),loop:Ce(()=>y()),activationMode:Ce(()=>p()),disabled:Ce(()=>w()),ref:Ce(()=>s(),M=>s(M))}),S=B(()=>$t(D,k.props));var _=V(),E=C(_);{var N=M=>{var H=V(),Z=C(H);xe(Z,()=>e.child,()=>({props:i(S)})),v(M,H)},T=M=>{var H=$c();Ft(H,()=>({...i(S)}));var Z=W(H);xe(Z,()=>e.children??Oe),U(H),v(M,H)};te(E,M=>{e.child?M(N):M(T,!1)})}v(u,_),he()}var tu=J("<div><!></div>");function ru(u,e){const n=tr();fe(e,!0);let a=K(e,"id",19,()=>rr(n)),s=K(e,"ref",15,null),f=Le(e,["$$slots","$$events","$$legacy","children","child","id","ref","value"]);const d=Va.create({value:Ce(()=>e.value),id:Ce(()=>a()),ref:Ce(()=>s(),k=>s(k))}),g=B(()=>$t(f,d.props));var y=V(),p=C(y);{var w=k=>{var S=V(),_=C(S);xe(_,()=>e.child,()=>({props:i(g)})),v(k,S)},D=k=>{var S=tu();Ft(S,()=>({...i(g)}));var _=W(S);xe(_,()=>e.children??Oe),U(S),v(k,S)};te(p,k=>{e.child?k(w):k(D,!1)})}v(u,y),he()}var nu=J("<div><!></div>");function iu(u,e){const n=tr();fe(e,!0);let a=K(e,"id",19,()=>rr(n)),s=K(e,"ref",15,null),f=Le(e,["$$slots","$$events","$$legacy","child","children","id","ref"]);const d=za.create({id:Ce(()=>a()),ref:Ce(()=>s(),k=>s(k))}),g=B(()=>$t(f,d.props));var y=V(),p=C(y);{var w=k=>{var S=V(),_=C(S);xe(_,()=>e.child,()=>({props:i(g)})),v(k,S)},D=k=>{var S=nu();Ft(S,()=>({...i(g)}));var _=W(S);xe(_,()=>e.children??Oe),U(S),v(k,S)};te(p,k=>{e.child?k(w):k(D,!1)})}v(u,y),he()}var au=J("<button><!></button>");function ou(u,e){const n=tr();fe(e,!0);let a=K(e,"disabled",3,!1),s=K(e,"id",19,()=>rr(n)),f=K(e,"type",3,"button"),d=K(e,"ref",15,null),g=Le(e,["$$slots","$$events","$$legacy","child","children","disabled","id","type","value","ref"]);const y=ja.create({id:Ce(()=>s()),disabled:Ce(()=>a()??!1),value:Ce(()=>e.value),ref:Ce(()=>d(),_=>d(_))}),p=B(()=>$t(g,y.props,{type:f()}));var w=V(),D=C(w);{var k=_=>{var E=V(),N=C(E);xe(N,()=>e.child,()=>({props:i(p)})),v(_,E)},S=_=>{var E=au();Ft(E,()=>({...i(p)}));var N=W(E);xe(N,()=>e.children??Oe),U(E),v(_,E)};te(D,_=>{e.child?_(k):_(S,!1)})}v(u,w),he()}const su=cn({component:"toggle",parts:["root"]});class qa{static create(e){return new qa(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=lr(this.opts.ref),this.onclick=this.onclick.bind(this)}onclick(e){this.opts.disabled.current||(this.opts.pressed.current=!this.opts.pressed.current)}#e=B(()=>({pressed:this.opts.pressed.current}));get snippetProps(){return i(this.#e)}set snippetProps(e){O(this.#e,e)}#t=B(()=>({[su.root]:"",id:this.opts.id.current,"data-disabled":hr(this.opts.disabled.current),"aria-pressed":Wr(this.opts.pressed.current),"data-state":lu(this.opts.pressed.current),disabled:Sa(this.opts.disabled.current),onclick:this.onclick,...this.attachment}));get props(){return i(this.#t)}set props(e){O(this.#t,e)}}function lu(u){return u?"on":"off"}var cu=J("<button><!></button>");function uu(u,e){const n=tr();fe(e,!0);let a=K(e,"ref",15,null),s=K(e,"id",19,()=>rr(n)),f=K(e,"pressed",15,!1),d=K(e,"onPressedChange",3,Di),g=K(e,"disabled",3,!1),y=K(e,"type",3,"button"),p=Le(e,["$$slots","$$events","$$legacy","ref","id","pressed","onPressedChange","disabled","type","children","child"]);const w=qa.create({pressed:Ce(()=>f(),N=>{f(N),d()(N)}),disabled:Ce(()=>g()??!1),id:Ce(()=>s()),ref:Ce(()=>a(),N=>a(N))}),D=B(()=>$t(p,w.props,{type:y()}));var k=V(),S=C(k);{var _=N=>{var T=V(),M=C(T);{let H=B(()=>({props:i(D),...w.snippetProps}));xe(M,()=>e.child,()=>i(H))}v(N,T)},E=N=>{var T=cu();Ft(T,()=>({...i(D)}));var M=W(T);xe(M,()=>e.children??Oe,()=>w.snippetProps),U(T),v(N,T)};te(S,N=>{e.child?N(_):N(E,!1)})}v(u,k),he()}function du(u,e){const n=Jr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const a=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]];Qr(u,We({name:"circle-check-big"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);Xr(g,e,"default",{}),v(s,d)},$$slots:{default:!0}}))}function fu(u,e){const n=Jr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const a=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}],["path",{d:"m9 14 2 2 4-4"}]];Qr(u,We({name:"clipboard-check"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);Xr(g,e,"default",{}),v(s,d)},$$slots:{default:!0}}))}function hu(u,e){const n=Jr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const a=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}]];Qr(u,We({name:"clipboard"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);Xr(g,e,"default",{}),v(s,d)},$$slots:{default:!0}}))}function vu(u,e){const n=Jr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const a=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];Qr(u,We({name:"download"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);Xr(g,e,"default",{}),v(s,d)},$$slots:{default:!0}}))}function gu(u,e){const n=Jr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const a=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}],["path",{d:"m2 2 20 20"}]];Qr(u,We({name:"eye-off"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);Xr(g,e,"default",{}),v(s,d)},$$slots:{default:!0}}))}function Oo(u,e){const n=Jr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const a=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];Qr(u,We({name:"eye"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);Xr(g,e,"default",{}),v(s,d)},$$slots:{default:!0}}))}function mu(u,e){const n=Jr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const a=[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]];Qr(u,We({name:"loader"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);Xr(g,e,"default",{}),v(s,d)},$$slots:{default:!0}}))}function pu(u,e){const n=Jr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const a=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Qr(u,We({name:"trash"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);Xr(g,e,"default",{}),v(s,d)},$$slots:{default:!0}}))}var yu=J('<div class="w-full flex-shrink-0"><!></div>');function bu(u,e){var n=yu(),a=W(n);{var s=f=>{var d=V(),g=C(d);xe(g,()=>e.children),v(f,d)};te(a,f=>{e.children&&f(s)})}U(n),v(u,n)}var wu=J('<div class="w-full flex-shrink-0"><!></div>');function _u(u,e){var n=wu(),a=W(n);{var s=f=>{var d=V(),g=C(d);xe(g,()=>e.children),v(f,d)};te(a,f=>{e.children&&f(s)})}U(n),v(u,n)}function xu(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M12 17V3"}],["path",{d:"m6 11 6 6 6-6"}],["path",{d:"M19 21H5"}]];ur(u,We({name:"arrow-down-to-line"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function Su(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]];ur(u,We({name:"arrow-down"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function ku(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M20 6 9 17l-5-5"}]];ur(u,We({name:"check"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function Cu(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"m18 15-6-6-6 6"}]];ur(u,We({name:"chevron-up"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function Iu(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"12",cy:"12",r:"10"}]];ur(u,We({name:"circle"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function Pu(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];ur(u,We({name:"database"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function Au(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];ur(u,We({name:"layers"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function Tu(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"}]];ur(u,We({name:"maximize"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function Du(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3"}]];ur(u,We({name:"minimize"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function ps(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M5 12h14"}]];ur(u,We({name:"minus"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function ys(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];ur(u,We({name:"plus"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function Eu(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];ur(u,We({name:"send"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function Ou(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"}],["circle",{cx:"12",cy:"12",r:"3"}]];ur(u,We({name:"settings"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}function bs(u,e){fe(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Le(e,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];ur(u,We({name:"trash-2"},()=>n,{get iconNode(){return a},children:(s,f)=>{var d=V(),g=C(d);xe(g,()=>e.children??Oe),v(s,d)},$$slots:{default:!0}})),he()}var Mu=J('<p class="text-sm font-medium"> </p>'),Fu=J('<div class="pointer-events-none fixed z-50 transition-opacity duration-200"><!></div>');function Ru(u,e){fe(e,!0);let n=ie(null),a=ie(vt({x:0,y:0})),s=0;const f=p=>{O(a,{x:p.clientX,y:p.clientY},!0)};lt(()=>(document.addEventListener("mousemove",f),()=>{document.removeEventListener("mousemove",f)})),lt(()=>{const p=e.areaSelectionInteractionStore.currentHoveredArea?.id,w=++s;if(!p){O(n,null);return}(async()=>{const D=await e.areaSelectionInteractionStore.getAreaNamesById([p]);w===s&&e.areaSelectionInteractionStore.currentHoveredArea?.id===p&&O(n,D[0]??null,!0)})()});var d=V(),g=C(d);{var y=p=>{var w=Fu(),D=W(w);ae(D,()=>_a,(k,S)=>{S(k,{class:"max-w-xs border !py-2 shadow-lg",children:(_,E)=>{var N=V(),T=C(N);ae(T,()=>xa,(M,H)=>{H(M,{class:"!px-3 !py-0",children:(Z,re)=>{var Q=Mu(),le=W(Q,!0);U(Q),ft(()=>Mt(le,i(n))),v(Z,Q)},$$slots:{default:!0}})}),v(_,N)},$$slots:{default:!0}})}),U(w),ft(()=>on(w,`left: ${i(a).x+10}px; top: ${i(a).y-10}px;`)),v(p,w)};te(g,p=>{i(n)&&p(y)})}v(u,d),he()}const Nu=Array(12).fill(0);var Lu=J('<div class="sonner-loading-bar"></div>'),Bu=J('<div><div class="sonner-spinner"></div></div>');function zu(u,e){fe(e,!0);var n=Bu(),a=W(n);er(a,23,()=>Nu,(s,f)=>`spinner-bar-${f}`,(s,f)=>{var d=Lu();v(s,d)}),U(a),U(n),ft(s=>{cr(n,1,s),Tt(n,"data-visible",e.visible)},[()=>yr(["sonner-loading-wrapper",e.class].filter(Boolean).join(" "))]),v(u,n),he()}function Nr(...u){return u.filter(Boolean).join(" ")}const ju=typeof document<"u",Vu=typeof window<"u"?window:void 0;function qu(u){let e=u.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}let Ku=class{#e;#t;constructor(e={}){const{window:n=Vu,document:a=n?.document}=e;n!==void 0&&(this.#e=a,this.#t=Ai(s=>{const f=Or(n,"focusin",s),d=Or(n,"focusout",s);return()=>{f(),d()}}))}get current(){return this.#t?.(),this.#e?qu(this.#e):null}};new Ku;class Hu{#e;#t;constructor(e){this.#e=e,this.#t=Symbol(e)}get key(){return this.#t}exists(){return gl(this.#t)}get(){const e=_o(this.#t);if(e===void 0)throw new Error(`Context "${this.#e}" not found`);return e}getOr(e){const n=_o(this.#t);return n===void 0?e:n}set(e){return ml(this.#t,e)}}const Uu=new Hu("<Toaster/>");let Mo=0;class Gu{#e=ie(vt([]));get toasts(){return i(this.#e)}set toasts(e){O(this.#e,e,!0)}#t=ie(vt([]));get heights(){return i(this.#t)}set heights(e){O(this.#t,e,!0)}#r=e=>{const n=this.toasts.findIndex(a=>a.id===e);return n===-1?null:n};addToast=e=>{ju&&this.toasts.unshift(e)};updateToast=({id:e,data:n,type:a,message:s})=>{const f=this.toasts.findIndex(g=>g.id===e),d=this.toasts[f];this.toasts[f]={...d,...n,id:e,title:s,type:a,updated:!0}};create=e=>{const{message:n,...a}=e,s=typeof e?.id=="number"||e.id&&e.id?.length>0?e.id:Mo++,f=e.dismissable===void 0?!0:e.dismissable,d=e.type===void 0?"default":e.type;return Br(()=>{this.toasts.find(y=>y.id===s)?this.updateToast({id:s,data:e,type:d,message:n,dismissable:f}):this.addToast({...a,id:s,title:n,dismissable:f,type:d})}),s};dismiss=e=>(Br(()=>{if(e===void 0){this.toasts=this.toasts.map(a=>({...a,dismiss:!0}));return}const n=this.toasts.findIndex(a=>a.id===e);this.toasts[n]&&(this.toasts[n]={...this.toasts[n],dismiss:!0})}),e);remove=e=>{if(e===void 0){this.toasts=[];return}const n=this.#r(e);if(n!==null)return this.toasts.splice(n,1),e};message=(e,n)=>this.create({...n,type:"default",message:e});error=(e,n)=>this.create({...n,type:"error",message:e});success=(e,n)=>this.create({...n,type:"success",message:e});info=(e,n)=>this.create({...n,type:"info",message:e});warning=(e,n)=>this.create({...n,type:"warning",message:e});loading=(e,n)=>this.create({...n,type:"loading",message:e});promise=(e,n)=>{if(!n)return;let a;n.loading!==void 0&&(a=this.create({...n,promise:e,type:"loading",message:typeof n.loading=="string"?n.loading:n.loading()}));const s=e instanceof Promise?e:e();let f=a!==void 0;return s.then(d=>{if(typeof d=="object"&&d&&"ok"in d&&typeof d.ok=="boolean"&&!d.ok){f=!1;const g=Wu(d);this.create({id:a,type:"error",message:g})}else if(n.success!==void 0){f=!1;const g=typeof n.success=="function"?n.success(d):n.success;this.create({id:a,type:"success",message:g})}}).catch(d=>{if(n.error!==void 0){f=!1;const g=typeof n.error=="function"?n.error(d):n.error;this.create({id:a,type:"error",message:g})}}).finally(()=>{f&&(this.dismiss(a),a=void 0),n.finally?.()}),a};custom=(e,n)=>{const a=n?.id||Mo++;return this.create({component:e,id:a,...n}),a};removeHeight=e=>{this.heights=this.heights.filter(n=>n.toastId!==e)};setHeight=e=>{const n=this.#r(e.toastId);if(n===null){this.heights.push(e);return}this.heights[n]=e};reset=()=>{this.toasts=[],this.heights=[]}}function Wu(u){return u&&typeof u=="object"&&"status"in u?`HTTP error! Status: ${u.status}`:`Error! ${u}`}const At=new Gu;function Yu(u,e){return At.create({message:u,...e})}class Ju{#e=B(()=>At.toasts.filter(e=>!e.dismiss));get toasts(){return i(this.#e)}}const Qu=Yu,Bn=Object.assign(Qu,{success:At.success,info:At.info,warning:At.warning,error:At.error,custom:At.custom,message:At.message,promise:At.promise,dismiss:At.dismiss,loading:At.loading,getActiveToasts:()=>At.toasts.filter(u=>!u.dismiss)});function bi(u){return u.label!==void 0}function Xu(){let u=ie(vt(typeof document<"u"?document.hidden:!1));return lt(()=>Or(document,"visibilitychange",()=>{O(u,document.hidden,!0)})),{get current(){return i(u)}}}const Fo=4e3,Zu=14,$u=45,ed=200,td=.05,rd={toast:"",title:"",description:"",loader:"",closeButton:"",cancelButton:"",actionButton:"",action:"",warning:"",error:"",success:"",default:"",info:"",loading:""};function nd(u){const[e,n]=u.split("-"),a=[];return e&&a.push(e),n&&a.push(n),a}function Ro(u){return 1/(1.5+Math.abs(u)/20)}var id=J("<div><!></div>"),ad=(u,e,n,a,s)=>{i(e)||!i(n)||(a(),s.toast.onDismiss?.(s.toast))},od=J('<button data-close-button=""><!></button>'),sd=J('<div data-icon=""><!> <!></div>'),ld=J('<div data-description=""><!></div>'),cd=(u,e,n,a)=>{bi(e.toast.cancel)&&i(n)&&(e.toast.cancel?.onClick?.(u),a())},ud=J('<button data-button="" data-cancel=""> </button>'),dd=(u,e,n)=>{bi(e.toast.action)&&(e.toast.action?.onClick(u),!u.defaultPrevented&&n())},fd=J('<button data-button=""> </button>'),hd=J('<!> <div data-content=""><div data-title=""><!></div> <!></div> <!> <!>',1),vd=J('<li data-sonner-toast=""><!> <!></li>');function gd(u,e){fe(e,!0);const n=Ae=>{var Re=V(),Xe=C(Re);{var tt=Ue=>{var Pt=id(),kt=W(Pt);xe(kt,()=>e.loadingIcon),U(Pt),ft(qt=>{cr(Pt,1,qt),Tt(Pt,"data-visible",i(Q)==="loading")},[()=>yr(Nr(i(Se)?.loader,e.toast?.classes?.loader,"sonner-loader"))]),v(Ue,Pt)},ut=Ue=>{{let Pt=B(()=>Nr(i(Se)?.loader,e.toast.classes?.loader)),kt=B(()=>i(Q)==="loading");zu(Ue,{get class(){return i(Pt)},get visible(){return i(kt)}})}};te(Xe,Ue=>{e.loadingIcon?Ue(tt):Ue(ut,!1)})}v(Ae,Re)};let a=K(e,"cancelButtonStyle",3,""),s=K(e,"actionButtonStyle",3,""),f=K(e,"descriptionClass",3,""),d=K(e,"unstyled",3,!1),g=K(e,"defaultRichColors",3,!1);const y={...rd};let p=ie(!1),w=ie(!1),D=ie(!1),k=ie(!1),S=ie(!1),_=ie(0),E=ie(0),N=e.toast.duration||e.duration||Fo,T=ie(void 0),M=ie(null),H=ie(null);const Z=B(()=>e.index===0),re=B(()=>e.index+1<=e.visibleToasts),Q=B(()=>e.toast.type),le=B(()=>e.toast.dismissable!==!1),De=B(()=>e.toast.class||""),Me=B(()=>e.toast.descriptionClass||""),ne=B(()=>At.heights.findIndex(Ae=>Ae.toastId===e.toast.id)||0),ce=B(()=>e.toast.closeButton??e.closeButton),ke=B(()=>e.toast.duration??e.duration??Fo);let pe=null;const Be=B(()=>e.position.split("-")),Ze=B(()=>At.heights.reduce((Ae,Re,Xe)=>Xe>=i(ne)?Ae:Ae+Re.height,0)),Ve=Xu(),Te=B(()=>e.toast.invert||e.invert),ze=B(()=>i(Q)==="loading"),Se=B(()=>({...y,...e.classes})),je=B(()=>e.toast.title),qe=B(()=>e.toast.description);let Je=ie(0),Qe=ie(0);const ve=B(()=>Math.round(i(ne)*Zu+i(Ze)));lt(()=>{i(je),i(qe);let Ae;e.expanded||e.expandByDefault?Ae=1:Ae=1-e.index*td;const Re=Br(()=>i(T));if(Re===void 0)return;Re.style.setProperty("height","auto");const Xe=Re.offsetHeight,tt=Re.getBoundingClientRect().height,ut=Math.round(tt/Ae+Number.EPSILON&100)/100;Re.style.removeProperty("height");let Ue;Math.abs(ut-Xe)<1?Ue=ut:Ue=Xe,O(E,Ue,!0),Br(()=>{At.setHeight({toastId:e.toast.id,height:Ue})})});function Ne(){O(w,!0),O(_,i(ve),!0),At.removeHeight(e.toast.id),setTimeout(()=>{At.remove(e.toast.id)},ed)}let $e;const Pe=B(()=>e.toast.promise&&i(Q)==="loading"||e.toast.duration===Number.POSITIVE_INFINITY);function ht(){O(Je,new Date().getTime(),!0),$e=setTimeout(()=>{e.toast.onAutoClose?.(e.toast),Ne()},N)}function oe(){if(i(Qe)<i(Je)){const Ae=new Date().getTime()-i(Je);N=N-Ae}O(Qe,new Date().getTime(),!0)}lt(()=>{e.toast.updated&&(clearTimeout($e),N=i(ke),ht())}),lt(()=>(i(Pe)||(e.expanded||e.interacting||Ve.current?oe():ht()),()=>clearTimeout($e))),sn(()=>{O(p,!0);const Ae=i(T)?.getBoundingClientRect().height;return O(E,Ae,!0),At.setHeight({toastId:e.toast.id,height:Ae}),()=>{At.removeHeight(e.toast.id)}}),lt(()=>{e.toast.delete&&Br(()=>{Ne(),e.toast.onDismiss?.(e.toast)})});const nt=Ae=>{if(i(ze))return;O(_,i(ve),!0);const Re=Ae.target;Re.setPointerCapture(Ae.pointerId),Re.tagName!=="BUTTON"&&(O(D,!0),pe={x:Ae.clientX,y:Ae.clientY})},et=()=>{if(i(k)||!i(le))return;pe=null;const Ae=Number(i(T)?.style.getPropertyValue("--swipe-amount-x").replace("px","")||0),Re=Number(i(T)?.style.getPropertyValue("--swipe-amount-y").replace("px","")||0),Xe=new Date().getTime()-0,tt=i(M)==="x"?Ae:Re,ut=Math.abs(tt)/Xe;if(Math.abs(tt)>=$u||ut>.11){O(_,i(ve),!0),e.toast.onDismiss?.(e.toast),i(M)==="x"?O(H,Ae>0?"right":"left",!0):O(H,Re>0?"down":"up",!0),Ne(),O(k,!0);return}else i(T)?.style.setProperty("--swipe-amount-x","0px"),i(T)?.style.setProperty("--swipe-amount-y","0px");O(S,!1),O(D,!1),O(M,null)},Ie=Ae=>{if(!pe||!i(le)||(window.getSelection()?.toString().length??-1)>0)return;const Xe=Ae.clientY-pe.y,tt=Ae.clientX-pe.x,ut=e.swipeDirections??nd(e.position);!i(M)&&(Math.abs(tt)>1||Math.abs(Xe)>1)&&O(M,Math.abs(tt)>Math.abs(Xe)?"x":"y",!0);let Ue={x:0,y:0};if(i(M)==="y"){if(ut.includes("top")||ut.includes("bottom"))if(ut.includes("top")&&Xe<0||ut.includes("bottom")&&Xe>0)Ue.y=Xe;else{const Pt=Xe*Ro(Xe);Ue.y=Math.abs(Pt)<Math.abs(Xe)?Pt:Xe}}else if(i(M)==="x"&&(ut.includes("left")||ut.includes("right")))if(ut.includes("left")&&tt<0||ut.includes("right")&&tt>0)Ue.x=tt;else{const Pt=tt*Ro(tt);Ue.x=Math.abs(Pt)<Math.abs(tt)?Pt:tt}(Math.abs(Ue.x)>0||Math.abs(Ue.y)>0)&&O(S,!0),i(T)?.style.setProperty("--swipe-amount-x",`${Ue.x}px`),i(T)?.style.setProperty("--swipe-amount-y",`${Ue.y}px`)},He=()=>{O(D,!1),O(M,null),pe=null},Ye=B(()=>e.toast.icon?e.toast.icon:i(Q)==="success"?e.successIcon:i(Q)==="error"?e.errorIcon:i(Q)==="warning"?e.warningIcon:i(Q)==="info"?e.infoIcon:i(Q)==="loading"?e.loadingIcon:null);var Fe=vd();Tt(Fe,"tabindex",0);let it;Fe.__pointermove=Ie,Fe.__pointerup=et,Fe.__pointerdown=nt;var Vt=W(Fe);{var Dt=Ae=>{var Re=od();Re.__click=[ad,ze,le,Ne,e];var Xe=W(Re);xe(Xe,()=>e.closeIcon??Oe),U(Re),ft(tt=>{Tt(Re,"aria-label",e.closeButtonAriaLabel),Tt(Re,"data-disabled",i(ze)),cr(Re,1,tt)},[()=>yr(Nr(i(Se)?.closeButton,e.toast?.classes?.closeButton))]),v(Ae,Re)};te(Vt,Ae=>{i(ce)&&!e.toast.component&&i(Q)!=="loading"&&e.closeIcon!==null&&Ae(Dt)})}var Ot=Y(Vt,2);{var mt=Ae=>{const Re=B(()=>e.toast.component);var Xe=V(),tt=C(Xe);ae(tt,()=>i(Re),(ut,Ue)=>{Ue(ut,We(()=>e.toast.componentProps,{closeToast:Ne}))}),v(Ae,Xe)},at=Ae=>{var Re=hd(),Xe=C(Re);{var tt=$=>{var de=sd(),Ge=W(de);{var pt=xt=>{var Lt=V(),Qt=C(Lt);{var Bt=Yt=>{var Jt=V(),vr=C(Jt);ae(vr,()=>e.toast.icon,(Mr,Cr)=>{Cr(Mr,{})}),v(Yt,Jt)},zt=Yt=>{n(Yt)};te(Qt,Yt=>{e.toast.icon?Yt(Bt):Yt(zt,!1)})}v(xt,Lt)};te(Ge,xt=>{(e.toast.promise||i(Q)==="loading")&&xt(pt)})}var se=Y(Ge,2);{var Ke=xt=>{var Lt=V(),Qt=C(Lt);{var Bt=Yt=>{var Jt=V(),vr=C(Jt);ae(vr,()=>e.toast.icon,(Mr,Cr)=>{Cr(Mr,{})}),v(Yt,Jt)},zt=Yt=>{var Jt=V(),vr=C(Jt);{var Mr=It=>{var Rt=V(),_n=C(Rt);xe(_n,()=>e.successIcon??Oe),v(It,Rt)},Cr=It=>{var Rt=V(),_n=C(Rt);{var un=wr=>{var Zr=V(),gr=C(Zr);xe(gr,()=>e.errorIcon??Oe),v(wr,Zr)},dn=wr=>{var Zr=V(),gr=C(Zr);{var jr=_r=>{var $r=V(),mr=C($r);xe(mr,()=>e.warningIcon??Oe),v(_r,$r)},Ir=_r=>{var $r=V(),mr=C($r);{var Kn=xr=>{var xn=V(),Sn=C(xn);xe(Sn,()=>e.infoIcon??Oe),v(xr,xn)};te(mr,xr=>{i(Q)==="info"&&xr(Kn)},!0)}v(_r,$r)};te(gr,_r=>{i(Q)==="warning"?_r(jr):_r(Ir,!1)},!0)}v(wr,Zr)};te(_n,wr=>{i(Q)==="error"?wr(un):wr(dn,!1)},!0)}v(It,Rt)};te(vr,It=>{i(Q)==="success"?It(Mr):It(Cr,!1)},!0)}v(Yt,Jt)};te(Qt,Yt=>{e.toast.icon?Yt(Bt):Yt(zt,!1)})}v(xt,Lt)};te(se,xt=>{e.toast.type!=="loading"&&xt(Ke)})}U(de),ft(xt=>cr(de,1,xt),[()=>yr(Nr(i(Se)?.icon,e.toast?.classes?.icon))]),v($,de)};te(Xe,$=>{(i(Q)||e.toast.icon||e.toast.promise)&&e.toast.icon!==null&&(i(Ye)!==null||e.toast.icon)&&$(tt)})}var ut=Y(Xe,2),Ue=W(ut),Pt=W(Ue);{var kt=$=>{var de=V(),Ge=C(de);{var pt=Ke=>{const xt=B(()=>e.toast.title);var Lt=V(),Qt=C(Lt);ae(Qt,()=>i(xt),(Bt,zt)=>{zt(Bt,We(()=>e.toast.componentProps))}),v(Ke,Lt)},se=Ke=>{var xt=ct();ft(()=>Mt(xt,e.toast.title)),v(Ke,xt)};te(Ge,Ke=>{typeof e.toast.title!="string"?Ke(pt):Ke(se,!1)})}v($,de)};te(Pt,$=>{e.toast.title&&$(kt)})}U(Ue);var qt=Y(Ue,2);{var wt=$=>{var de=ld(),Ge=W(de);{var pt=Ke=>{const xt=B(()=>e.toast.description);var Lt=V(),Qt=C(Lt);ae(Qt,()=>i(xt),(Bt,zt)=>{zt(Bt,We(()=>e.toast.componentProps))}),v(Ke,Lt)},se=Ke=>{var xt=ct();ft(()=>Mt(xt,e.toast.description)),v(Ke,xt)};te(Ge,Ke=>{typeof e.toast.description!="string"?Ke(pt):Ke(se,!1)})}U(de),ft(Ke=>cr(de,1,Ke),[()=>yr(Nr(f(),i(Me),i(Se)?.description,e.toast.classes?.description))]),v($,de)};te(qt,$=>{e.toast.description&&$(wt)})}U(ut);var yt=Y(ut,2);{var _t=$=>{var de=V(),Ge=C(de);{var pt=Ke=>{var xt=V(),Lt=C(xt);ae(Lt,()=>e.toast.cancel,(Qt,Bt)=>{Bt(Qt,{})}),v(Ke,xt)},se=Ke=>{var xt=V(),Lt=C(xt);{var Qt=Bt=>{var zt=ud();zt.__click=[cd,e,le,Ne];var Yt=W(zt,!0);U(zt),ft(Jt=>{on(zt,e.toast.cancelButtonStyle??a()),cr(zt,1,Jt),Mt(Yt,e.toast.cancel.label)},[()=>yr(Nr(i(Se)?.cancelButton,e.toast?.classes?.cancelButton))]),v(Bt,zt)};te(Lt,Bt=>{bi(e.toast.cancel)&&Bt(Qt)},!0)}v(Ke,xt)};te(Ge,Ke=>{typeof e.toast.cancel=="function"?Ke(pt):Ke(se,!1)})}v($,de)};te(yt,$=>{e.toast.cancel&&$(_t)})}var Ct=Y(yt,2);{var be=$=>{var de=V(),Ge=C(de);{var pt=Ke=>{var xt=V(),Lt=C(xt);ae(Lt,()=>e.toast.action,(Qt,Bt)=>{Bt(Qt,{})}),v(Ke,xt)},se=Ke=>{var xt=V(),Lt=C(xt);{var Qt=Bt=>{var zt=fd();zt.__click=[dd,e,Ne];var Yt=W(zt,!0);U(zt),ft(Jt=>{on(zt,e.toast.actionButtonStyle??s()),cr(zt,1,Jt),Mt(Yt,e.toast.action.label)},[()=>yr(Nr(i(Se)?.actionButton,e.toast?.classes?.actionButton))]),v(Bt,zt)};te(Lt,Bt=>{bi(e.toast.action)&&Bt(Qt)},!0)}v(Ke,xt)};te(Ge,Ke=>{typeof e.toast.action=="function"?Ke(pt):Ke(se,!1)})}v($,de)};te(Ct,$=>{e.toast.action&&$(be)})}ft($=>cr(Ue,1,$),[()=>yr(Nr(i(Se)?.title,e.toast?.classes?.title))]),v(Ae,Re)};te(Ot,Ae=>{e.toast.component?Ae(mt):Ae(at,!1)})}U(Fe),sr(Fe,Ae=>O(T,Ae),()=>i(T)),ft((Ae,Re,Xe,tt)=>{cr(Fe,1,Ae),Tt(Fe,"data-rich-colors",e.toast.richColors??g()),Tt(Fe,"data-styled",!(e.toast.component||e.toast.unstyled||d())),Tt(Fe,"data-mounted",i(p)),Tt(Fe,"data-promise",Re),Tt(Fe,"data-swiped",i(S)),Tt(Fe,"data-removed",i(w)),Tt(Fe,"data-visible",i(re)),Tt(Fe,"data-y-position",i(Be)[0]),Tt(Fe,"data-x-position",i(Be)[1]),Tt(Fe,"data-index",e.index),Tt(Fe,"data-front",i(Z)),Tt(Fe,"data-swiping",i(D)),Tt(Fe,"data-dismissable",i(le)),Tt(Fe,"data-type",i(Q)),Tt(Fe,"data-invert",i(Te)),Tt(Fe,"data-swipe-out",i(k)),Tt(Fe,"data-swipe-direction",i(H)),Tt(Fe,"data-expanded",Xe),it=on(Fe,`${e.style} ${e.toast.style}`,it,tt)},[()=>yr(Nr(e.class,i(De),i(Se)?.toast,e.toast?.classes?.toast,i(Se)?.[i(Q)],e.toast?.classes?.[i(Q)])),()=>!!e.toast.promise,()=>!!(e.expanded||e.expandByDefault&&i(p)),()=>({"--index":e.index,"--toasts-before":e.index,"--z-index":At.toasts.length-e.index,"--offset":`${i(w)?i(_):i(ve)}px`,"--initial-height":e.expandByDefault?"auto":`${i(E)}px`})]),as("dragend",Fe,He),v(u,Fe),he()}qn(["pointermove","pointerup","pointerdown","click"]);var md=Vn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-success-icon=""><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg>');function pd(u){var e=md();v(u,e)}var yd=Vn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-error-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>');function bd(u){var e=yd();v(u,e)}var wd=Vn('<svg viewBox="0 0 64 64" fill="currentColor" height="20" width="20" data-sonner-warning-icon="" xmlns="http://www.w3.org/2000/svg"><path d="M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"></path><path d="M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"></path></svg>');function _d(u){var e=wd();v(u,e)}var xd=Vn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-info-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd"></path></svg>');function Sd(u){var e=xd();v(u,e)}var kd=Vn('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-sonner-close-icon=""><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>');function Cd(u){var e=kd();v(u,e)}const Id=3,ws="24px",_s="16px",Pd=4e3,Ad=356,Td=14,oa="dark",ui="light";function Dd(u,e){const n={};return[u,e].forEach((a,s)=>{const f=s===1,d=f?"--mobile-offset":"--offset",g=f?_s:ws;function y(p){["top","right","bottom","left"].forEach(w=>{n[`${d}-${w}`]=typeof p=="number"?`${p}px`:p})}typeof a=="number"||typeof a=="string"?y(a):typeof a=="object"?["top","right","bottom","left"].forEach(p=>{const w=a[p];w===void 0?n[`${d}-${p}`]=g:n[`${d}-${p}`]=typeof w=="number"?`${w}px`:w}):y(g)}),n}var Ed=J("<ol></ol>"),Od=J('<section aria-live="polite" aria-relevant="additions text" aria-atomic="false" class="svelte-nbs0zk"><!></section>');function Md(u,e){fe(e,!0);function n(ve){return ve!=="system"?ve:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oa:ui}let a=K(e,"invert",3,!1),s=K(e,"position",3,"bottom-right"),f=K(e,"hotkey",19,()=>["altKey","KeyT"]),d=K(e,"expand",3,!1),g=K(e,"closeButton",3,!1),y=K(e,"offset",3,ws),p=K(e,"mobileOffset",3,_s),w=K(e,"theme",3,"light"),D=K(e,"richColors",3,!1),k=K(e,"duration",3,Pd),S=K(e,"visibleToasts",3,Id),_=K(e,"toastOptions",19,()=>({})),E=K(e,"dir",7,"auto"),N=K(e,"gap",3,Td),T=K(e,"containerAriaLabel",3,"Notifications"),M=K(e,"closeButtonAriaLabel",3,"Close toast"),H=Le(e,["$$slots","$$events","$$legacy","invert","position","hotkey","expand","closeButton","offset","mobileOffset","theme","richColors","duration","visibleToasts","toastOptions","dir","gap","loadingIcon","successIcon","errorIcon","warningIcon","closeIcon","infoIcon","containerAriaLabel","class","closeButtonAriaLabel","onblur","onfocus","onmouseenter","onmousemove","onmouseleave","ondragend","onpointerdown","onpointerup"]);function Z(){if(E()!=="auto")return E();if(typeof window>"u"||typeof document>"u")return"ltr";const ve=document.documentElement.getAttribute("dir");return ve==="auto"||!ve?(Br(()=>E(window.getComputedStyle(document.documentElement).direction??"ltr")),E()):(Br(()=>E(ve)),ve)}const re=B(()=>Array.from(new Set([s(),...At.toasts.filter(ve=>ve.position).map(ve=>ve.position)].filter(Boolean))));let Q=ie(!1),le=ie(!1),De=ie(vt(n(w()))),Me=ie(void 0),ne=ie(null),ce=ie(!1);const ke=B(()=>f().join("+").replace(/Key/g,"").replace(/Digit/g,""));lt(()=>{At.toasts.length<=1&&O(Q,!1)}),lt(()=>{const ve=At.toasts.filter(Ne=>Ne.dismiss&&!Ne.delete);if(ve.length>0){const Ne=At.toasts.map($e=>ve.find(ht=>ht.id===$e.id)?{...$e,delete:!0}:$e);At.toasts=Ne}}),lt(()=>()=>{i(Me)&&i(ne)&&(i(ne).focus({preventScroll:!0}),O(ne,null),O(ce,!1))}),sn(()=>(At.reset(),Or(document,"keydown",Ne=>{f().every(Pe=>Ne[Pe]||Ne.code===Pe)&&(O(Q,!0),i(Me)?.focus()),Ne.code==="Escape"&&(document.activeElement===i(Me)||i(Me)?.contains(document.activeElement))&&O(Q,!1)}))),lt(()=>{if(w()!=="system"&&O(De,w()),typeof window<"u"){w()==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O(De,oa):O(De,ui));const ve=window.matchMedia("(prefers-color-scheme: dark)"),Ne=({matches:$e})=>{O(De,$e?oa:ui,!0)};"addEventListener"in ve?ve.addEventListener("change",Ne):ve.addListener(Ne)}});const pe=ve=>{e.onblur?.(ve),i(ce)&&!ve.currentTarget.contains(ve.relatedTarget)&&(O(ce,!1),i(ne)&&(i(ne).focus({preventScroll:!0}),O(ne,null)))},Be=ve=>{e.onfocus?.(ve),!(ve.target instanceof HTMLElement&&ve.target.dataset.dismissable==="false")&&(i(ce)||(O(ce,!0),O(ne,ve.relatedTarget,!0)))},Ze=ve=>{e.onpointerdown?.(ve),!(ve.target instanceof HTMLElement&&ve.target.dataset.dismissable==="false")&&O(le,!0)},Ve=ve=>{e.onmouseenter?.(ve),O(Q,!0)},Te=ve=>{e.onmouseleave?.(ve),i(le)||O(Q,!1)},ze=ve=>{e.onmousemove?.(ve),O(Q,!0)},Se=ve=>{e.ondragend?.(ve),O(Q,!1)},je=ve=>{e.onpointerup?.(ve),O(le,!1)};Uu.set(new Ju);var qe=Od();Tt(qe,"tabindex",-1);var Je=W(qe);{var Qe=ve=>{var Ne=V(),$e=C(Ne);er($e,18,()=>i(re),Pe=>Pe,(Pe,ht,oe,nt)=>{const et=B(()=>{const[Ye,Fe]=ht.split("-");return{y:Ye,x:Fe}}),Ie=B(()=>Dd(y(),p()));var He=Ed();Ft(He,(Ye,Fe)=>({tabindex:-1,dir:Ye,class:e.class,"data-sonner-toaster":!0,"data-sonner-theme":i(De),"data-y-position":i(et).y,"data-x-position":i(et).x,style:e.style,onblur:pe,onfocus:Be,onmouseenter:Ve,onmousemove:ze,onmouseleave:Te,ondragend:Se,onpointerdown:Ze,onpointerup:je,...H,[bl]:Fe}),[Z,()=>({"--front-toast-height":`${At.heights[0]?.height}px`,"--width":`${Ad}px`,"--gap":`${N()}px`,"--offset-top":i(Ie)["--offset-top"],"--offset-right":i(Ie)["--offset-right"],"--offset-bottom":i(Ie)["--offset-bottom"],"--offset-left":i(Ie)["--offset-left"],"--mobile-offset-top":i(Ie)["--mobile-offset-top"],"--mobile-offset-right":i(Ie)["--mobile-offset-right"],"--mobile-offset-bottom":i(Ie)["--mobile-offset-bottom"],"--mobile-offset-left":i(Ie)["--mobile-offset-left"]})],void 0,"svelte-nbs0zk"),er(He,23,()=>At.toasts.filter(Ye=>!Ye.position&&i(oe)===0||Ye.position===ht),Ye=>Ye.id,(Ye,Fe,it,Vt)=>{{const Dt=yt=>{var _t=V(),Ct=C(_t);{var be=de=>{var Ge=V(),pt=C(Ge);xe(pt,()=>e.successIcon??Oe),v(de,Ge)},$=de=>{var Ge=V(),pt=C(Ge);{var se=Ke=>{pd(Ke)};te(pt,Ke=>{e.successIcon!==null&&Ke(se)},!0)}v(de,Ge)};te(Ct,de=>{e.successIcon?de(be):de($,!1)})}v(yt,_t)},Ot=yt=>{var _t=V(),Ct=C(_t);{var be=de=>{var Ge=V(),pt=C(Ge);xe(pt,()=>e.errorIcon??Oe),v(de,Ge)},$=de=>{var Ge=V(),pt=C(Ge);{var se=Ke=>{bd(Ke)};te(pt,Ke=>{e.errorIcon!==null&&Ke(se)},!0)}v(de,Ge)};te(Ct,de=>{e.errorIcon?de(be):de($,!1)})}v(yt,_t)},mt=yt=>{var _t=V(),Ct=C(_t);{var be=de=>{var Ge=V(),pt=C(Ge);xe(pt,()=>e.warningIcon??Oe),v(de,Ge)},$=de=>{var Ge=V(),pt=C(Ge);{var se=Ke=>{_d(Ke)};te(pt,Ke=>{e.warningIcon!==null&&Ke(se)},!0)}v(de,Ge)};te(Ct,de=>{e.warningIcon?de(be):de($,!1)})}v(yt,_t)},at=yt=>{var _t=V(),Ct=C(_t);{var be=de=>{var Ge=V(),pt=C(Ge);xe(pt,()=>e.infoIcon??Oe),v(de,Ge)},$=de=>{var Ge=V(),pt=C(Ge);{var se=Ke=>{Sd(Ke)};te(pt,Ke=>{e.infoIcon!==null&&Ke(se)},!0)}v(de,Ge)};te(Ct,de=>{e.infoIcon?de(be):de($,!1)})}v(yt,_t)},Ae=yt=>{var _t=V(),Ct=C(_t);{var be=de=>{var Ge=V(),pt=C(Ge);xe(pt,()=>e.closeIcon??Oe),v(de,Ge)},$=de=>{var Ge=V(),pt=C(Ge);{var se=Ke=>{Cd(Ke)};te(pt,Ke=>{e.closeIcon!==null&&Ke(se)},!0)}v(de,Ge)};te(Ct,de=>{e.closeIcon?de(be):de($,!1)})}v(yt,_t)};let Re=B(()=>_()?.duration??k()),Xe=B(()=>_()?.class??""),tt=B(()=>_()?.descriptionClass||""),ut=B(()=>_()?.style??""),Ue=B(()=>_().classes||{}),Pt=B(()=>_().unstyled??!1),kt=B(()=>_()?.cancelButtonStyle??""),qt=B(()=>_()?.actionButtonStyle??""),wt=B(()=>_()?.closeButtonAriaLabel??M());gd(Ye,{get index(){return i(it)},get toast(){return i(Fe)},get defaultRichColors(){return D()},get duration(){return i(Re)},get class(){return i(Xe)},get descriptionClass(){return i(tt)},get invert(){return a()},get visibleToasts(){return S()},get closeButton(){return g()},get interacting(){return i(le)},get position(){return ht},get style(){return i(ut)},get classes(){return i(Ue)},get unstyled(){return i(Pt)},get cancelButtonStyle(){return i(kt)},get actionButtonStyle(){return i(qt)},get closeButtonAriaLabel(){return i(wt)},get expandByDefault(){return d()},get expanded(){return i(Q)},get loadingIcon(){return e.loadingIcon},successIcon:Dt,errorIcon:Ot,warningIcon:mt,infoIcon:at,closeIcon:Ae,$$slots:{successIcon:!0,errorIcon:!0,warningIcon:!0,infoIcon:!0,closeIcon:!0}})}}),U(He),sr(He,Ye=>O(Me,Ye),()=>i(Me)),ft(()=>He.dir=He.dir),v(Pe,He)}),v(ve,Ne)};te(Je,ve=>{At.toasts.length>0&&ve(Qe)})}U(qe),ft(()=>Tt(qe,"aria-label",`${T()??""} ${i(ke)??""}`)),v(u,qe),he()}function Fd(u,e){fe(e,!0);async function n(a,s){const f=await e.areaSelectionInteractionStore.getAreaNamesById([a]);if(!f||f.length===0||!f[0])return;const d=`Area ${s}: ${f[0]}`;Bn.success(d)}lt(()=>{e.areaSelectionInteractionStore.lastAddedArea&&n(e.areaSelectionInteractionStore.lastAddedArea.id,"added")}),lt(()=>{e.areaSelectionInteractionStore.lastRemovedArea&&n(e.areaSelectionInteractionStore.lastRemovedArea.id,"removed")}),he()}var Rd=J("<div><!></div>");function No(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","variant","children"]);var s=Rd();Ft(s,()=>({...a,class:"group/chat-bubble flex max-w-[80%] flex-row place-items-end gap-2 data-[variant='sent']:place-self-end","data-variant":e.variant}));var f=W(s);xe(f,()=>e.children??Oe),U(s),sr(s,d=>n(d),()=>n()),v(u,s),he()}var Nd=J('<span class="inline-block size-(--loading-dots-size) rounded-full bg-primary svelte-k2x6sv"></span>'),Ld=J('<div class="inline-flex items-center gap-1 svelte-k2x6sv"></div>');function Bd(u,e){let n=K(e,"size",3,4);var a=Ld();let s;er(a,20,()=>({length:3}),Er,(f,d)=>{var g=Nd();v(f,g)}),U(a),ft(f=>s=on(a,"",s,f),[()=>({"--loading-dots-size":`${n()??""}px`})]),v(u,a)}var zd=J('<div class="flex size-full place-items-center justify-center"><!></div>'),jd=J("<div><!></div>");function sa(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=K(e,"typing",3,!1),s=Le(e,["$$slots","$$events","$$legacy","ref","typing","class","children"]);var f=jd();Ft(f,p=>({...s,class:p}),[()=>wn("order-2 rounded-lg bg-secondary p-4 text-sm group-data-[variant='received']/chat-bubble:rounded-bl-none group-data-[variant='sent']/chat-bubble:order-1 group-data-[variant='sent']/chat-bubble:rounded-br-none group-data-[variant='sent']/chat-bubble:bg-primary group-data-[variant='sent']/chat-bubble:text-primary-foreground",e.class)]);var d=W(f);{var g=p=>{var w=zd(),D=W(w);Bd(D,{}),U(w),v(p,w)},y=p=>{var w=V(),D=C(w);xe(D,()=>e.children??Oe),v(p,w)};te(d,p=>{a()?p(g):p(y,!1)})}U(f),sr(f,p=>n(p),()=>n()),v(u,f),he()}function Vd(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{let d=B(()=>wn("relative flex size-8 shrink-0 overflow-hidden rounded-full",e.class));ae(f,()=>Mc,(g,y)=>{y(g,We({"data-slot":"avatar",get class(){return i(d)}},()=>a,{get ref(){return n()},set ref(p){n(p)}}))})}v(u,s),he()}function Lo(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);{let s=B(()=>wn("order-1 group-data-[variant='sent']/chat-bubble:order-2",e.class));Vd(u,We({get class(){return i(s)}},()=>a,{get ref(){return n()},set ref(f){n(f)}}))}he()}function xs(u){const e=u-1;return e*e*e+1}function Bo(u,{delay:e=0,duration:n=400,easing:a=xs,axis:s="y"}={}){const f=getComputedStyle(u),d=+f.opacity,g=s==="y"?"height":"width",y=parseFloat(f[g]),p=s==="y"?["top","bottom"]:["left","right"],w=p.map(T=>`${T[0].toUpperCase()}${T.slice(1)}`),D=parseFloat(f[`padding${w[0]}`]),k=parseFloat(f[`padding${w[1]}`]),S=parseFloat(f[`margin${w[0]}`]),_=parseFloat(f[`margin${w[1]}`]),E=parseFloat(f[`border${w[0]}Width`]),N=parseFloat(f[`border${w[1]}Width`]);return{delay:e,duration:n,easing:a,css:T=>`overflow: hidden;opacity: ${Math.min(T*20,1)*d};${g}: ${T*y}px;padding-${p[0]}: ${T*D}px;padding-${p[1]}: ${T*k}px;margin-${p[0]}: ${T*S}px;margin-${p[1]}: ${T*_}px;border-${p[0]}-width: ${T*E}px;border-${p[1]}-width: ${T*N}px;min-${g}: 0`}}function zo(u,{delay:e=0,duration:n=400,easing:a=xs,start:s=0,opacity:f=0}={}){const d=getComputedStyle(u),g=+d.opacity,y=d.transform==="none"?"":d.transform,p=1-s,w=g*(1-f);return{delay:e,duration:n,easing:a,css:(D,k)=>`
			transform: ${y} scale(${1-p*k});
			opacity: ${g-w*k}
		`}}class qd{#e=ie();#t=ie(0);#r=ie(!1);lastScrollHeight=0;set ref(e){if(O(this.#e,e,!0),!i(this.#e))return;this.lastScrollHeight=i(this.#e).scrollHeight,i(this.#e).scrollTo(0,i(this.#t)?i(this.#t):i(this.#e).scrollHeight),i(this.#e).addEventListener("scroll",()=>{i(this.#e)&&(O(this.#t,i(this.#e).scrollTop,!0),this.disableAutoScroll())}),window.addEventListener("resize",()=>{this.scrollToBottom(!0)}),new MutationObserver(()=>{i(this.#e)&&(i(this.#e).scrollHeight!==this.lastScrollHeight&&this.scrollToBottom(!0),this.lastScrollHeight=i(this.#e).scrollHeight)}).observe(i(this.#e),{childList:!0,subtree:!0})}get ref(){return i(this.#e)}get scrollY(){return i(this.#t)}get isAtBottom(){return i(this.#e)?i(this.#t)+i(this.#e).offsetHeight>=i(this.#e).scrollHeight:!0}disableAutoScroll(){this.isAtBottom?O(this.#r,!1):O(this.#r,!0)}scrollToBottom(e=!1){i(this.#e)&&(e&&i(this.#r)||i(this.#e).scrollTo(0,i(this.#e).scrollHeight))}}var Kd=J("<div><!></div>"),Hd=J('<div class="relative"><div><!></div> <!></div>');function Ud(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","children","class"]),s=ie(!1);const f=new qd;sn(()=>{O(s,!0)});var d=Hd(),g=W(d);Ft(g,D=>({...a,class:D}),[()=>wn("no-scrollbar flex h-full w-full flex-col gap-4 overflow-y-auto p-4",e.class,{"scroll-smooth":i(s)})]);var y=W(g);xe(y,()=>e.children??Oe),U(g),sr(g,D=>n(D),()=>n()),sr(g,D=>f.ref=D,()=>f?.ref);var p=Y(g,2);{var w=D=>{var k=Kd(),S=W(k);Kt(S,{onclick:()=>f.scrollToBottom(),variant:"outline",size:"icon",class:"absolute bottom-2 left-1/2 inline-flex -translate-x-1/2 transform rounded-full shadow-md",children:(_,E)=>{Su(_,{})},$$slots:{default:!0}}),U(k),yi(1,k,()=>zo,()=>({start:.85,duration:100,delay:250})),yi(2,k,()=>zo,()=>({start:.85,duration:100})),v(D,k)};te(p,D=>{f.isAtBottom||D(w)})}U(d),v(u,d),he()}var Gd=J(`<p class="break-words whitespace-pre-wrap"> </p> <div class="w-full text-xs group-data-[variant='sent']/chat-bubble:text-end"> </div>`,1),Wd=J("<!> <!>",1),Yd=J('<p class="break-words whitespace-pre-wrap"> </p>'),Jd=J("<!> <!>",1),Qd=J("<!> <!>",1),Xd=J('<div class="chat-container h-full w-full border border-border svelte-1b8k5e4"><div class="message-wrapper svelte-1b8k5e4"><!></div> <div class="input-wrapper svelte-1b8k5e4"><form class="flex shrink-0 items-center gap-2 border-t border-border bg-background p-2"><!> <!></form></div></div>');function Zd(u,e){fe(e,!0);const n=1,a=2,s="Sorry, I encountered an error processing your request.",f="How can I help?";let d=ie(""),g=ie(!1),y=ie(""),p=ie(null),w=ie(null),D=ie(null);const k=vt([{senderId:n,message:f,sentAt:S(new Date)}]);lt(()=>{if(i(w)&&i(D)){const ne=i(w),ce=i(D),ke=()=>{const Be=ne.offsetHeight;ce.style.paddingBottom=`${Be}px`};ke();const pe=new ResizeObserver(ke);return pe.observe(ne),()=>{pe.disconnect()}}}),lt(()=>{k.length,i(y),i(p)&&setTimeout(()=>{const ne=i(p)?.querySelector('[data-slot="scroll-area-viewport"]');ne&&(ne.scrollTop=ne.scrollHeight)},0)});function S(ne){const ce=ne.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),ke=ne.getHours()>=12?"PM":"AM";return`${ce} ${ke}`}function _(ne,ce){return{message:ne,senderId:ce,sentAt:S(new Date)}}function E(ne,ce){k.push(_(ne,ce))}function N(){O(g,!1),O(y,"")}function T(ne){O(y,i(y)+ne)}async function M(ne){if(ne.preventDefault(),!i(d).trim()||i(g))return;const ce=i(d).trim();O(d,""),E(ce,a),O(g,!0),O(y,"");try{await e.aiUprnChatbotService.chatStream(ce,T)&&i(y)?E(i(y),n):E(s,n)}catch(ke){console.error("Chat error:",ke),E(s,n)}finally{N()}}var H=Xd(),Z=W(H),re=W(Z);zl(re,{class:"h-full w-full",get ref(){return i(p)},set ref(ne){O(p,ne,!0)},children:(ne,ce)=>{var ke=V(),pe=C(ke);ae(pe,()=>Ud,(Be,Ze)=>{Ze(Be,{children:(Ve,Te)=>{var ze=Qd(),Se=C(ze);er(Se,16,()=>k,Je=>Je,(Je,Qe)=>{var ve=V(),Ne=C(ve);{let $e=B(()=>Qe.senderId===a?"sent":"received");ae(Ne,()=>No,(Pe,ht)=>{ht(Pe,{get variant(){return i($e)},children:(oe,nt)=>{var et=Wd(),Ie=C(et);ae(Ie,()=>Lo,(Ye,Fe)=>{Fe(Ye,{})});var He=Y(Ie,2);ae(He,()=>sa,(Ye,Fe)=>{Fe(Ye,{class:"flex flex-col gap-1",children:(it,Vt)=>{var Dt=Gd(),Ot=C(Dt),mt=W(Ot,!0);U(Ot);var at=Y(Ot,2),Ae=W(at,!0);U(at),ft(()=>{Mt(mt,Qe.message),Mt(Ae,Qe.sentAt)}),v(it,Dt)},$$slots:{default:!0}})}),v(oe,et)},$$slots:{default:!0}})})}v(Je,ve)});var je=Y(Se,2);{var qe=Je=>{var Qe=V(),ve=C(Qe);ae(ve,()=>No,(Ne,$e)=>{$e(Ne,{variant:"received",children:(Pe,ht)=>{var oe=Jd(),nt=C(oe);ae(nt,()=>Lo,(Ie,He)=>{He(Ie,{})});var et=Y(nt,2);ae(et,()=>sa,(Ie,He)=>{He(Ie,{class:"flex flex-col gap-1",children:(Ye,Fe)=>{var it=V(),Vt=C(it);{var Dt=mt=>{var at=Yd(),Ae=W(at,!0);U(at),ft(()=>Mt(Ae,i(y))),v(mt,at)},Ot=mt=>{var at=V(),Ae=C(at);ae(Ae,()=>sa,(Re,Xe)=>{Xe(Re,{typing:!0})}),v(mt,at)};te(Vt,mt=>{i(y)?mt(Dt):mt(Ot,!1)})}v(Ye,it)},$$slots:{default:!0}})}),v(Pe,oe)},$$slots:{default:!0}})}),v(Je,Qe)};te(je,Je=>{i(g)&&Je(qe)})}v(Ve,ze)},$$slots:{default:!0}})}),v(ne,ke)},$$slots:{default:!0}}),U(Z),sr(Z,ne=>O(D,ne),()=>i(D));var Q=Y(Z,2),le=W(Q),De=W(le);kr(De,{class:"rounded-full",placeholder:"Type a message...",get disabled(){return i(g)},get value(){return i(d)},set value(ne){O(d,ne,!0)}});var Me=Y(De,2);{let ne=B(()=>i(d).trim()===""||i(g));Kt(Me,{type:"submit",variant:"default",size:"icon",class:"shrink-0 rounded-full",get disabled(){return i(ne)},children:(ce,ke)=>{Eu(ce,{})},$$slots:{default:!0}})}U(le),sr(le,ne=>O(w,ne),()=>i(w)),U(Q),U(H),as("submit",le,M),v(u,H),he()}const Sr=Object.freeze({Pending:"pending",InProgress:"in-progress",Completed:"completed",Failed:"failed"}),di=Object.freeze({Submitted:"SUBMITTED",Queued:"QUEUED",Processing:"IN_PROGRESS",Completed:"COMPLETED",Error:"ERROR"}),$d=Object.freeze({Success:"success",Error:"error"});var vi={exports:{}},ef=vi.exports,jo;function tf(){return jo||(jo=1,(function(u,e){(function(n,a){u.exports=a()})(ef,function(){var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(o[c]=l[c])})(t,r)},a=function(){return(a=Object.assign||function(t){for(var r,o=1,l=arguments.length;o<l;o++)for(var c in r=arguments[o])Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c]);return t}).apply(this,arguments)};function s(t,r,o){for(var l,c=0,h=r.length;c<h;c++)!l&&c in r||((l=l||Array.prototype.slice.call(r,0,c))[c]=r[c]);return t.concat(l||Array.prototype.slice.call(r))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Kl,d=Object.keys,g=Array.isArray;function y(t,r){return typeof r!="object"||d(r).forEach(function(o){t[o]=r[o]}),t}typeof Promise>"u"||f.Promise||(f.Promise=Promise);var p=Object.getPrototypeOf,w={}.hasOwnProperty;function D(t,r){return w.call(t,r)}function k(t,r){typeof r=="function"&&(r=r(p(t))),(typeof Reflect>"u"?d:Reflect.ownKeys)(r).forEach(function(o){_(t,o,r[o])})}var S=Object.defineProperty;function _(t,r,o,l){S(t,r,y(o&&D(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},l))}function E(t){return{from:function(r){return t.prototype=Object.create(r.prototype),_(t.prototype,"constructor",t),{extend:k.bind(null,t.prototype)}}}}var N=Object.getOwnPropertyDescriptor,T=[].slice;function M(t,r,o){return T.call(t,r,o)}function H(t,r){return r(t)}function Z(t){if(!t)throw new Error("Assertion Failed")}function re(t){f.setImmediate?setImmediate(t):setTimeout(t,0)}function Q(t,r){if(typeof r=="string"&&D(t,r))return t[r];if(!r)return t;if(typeof r!="string"){for(var o=[],l=0,c=r.length;l<c;++l){var h=Q(t,r[l]);o.push(h)}return o}var m=r.indexOf(".");if(m!==-1){var b=t[r.substr(0,m)];return b==null?void 0:Q(b,r.substr(m+1))}}function le(t,r,o){if(t&&r!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof r!="string"&&"length"in r){Z(typeof o!="string"&&"length"in o);for(var l=0,c=r.length;l<c;++l)le(t,r[l],o[l])}else{var h,m,b=r.indexOf(".");b!==-1?(h=r.substr(0,b),(m=r.substr(b+1))===""?o===void 0?g(t)&&!isNaN(parseInt(h))?t.splice(h,1):delete t[h]:t[h]=o:le(b=!(b=t[h])||!D(t,h)?t[h]={}:b,m,o)):o===void 0?g(t)&&!isNaN(parseInt(r))?t.splice(r,1):delete t[r]:t[r]=o}}function De(t){var r,o={};for(r in t)D(t,r)&&(o[r]=t[r]);return o}var Me=[].concat;function ne(t){return Me.apply([],t)}var ut="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ne([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(r){return r+t+"Array"})}))).filter(function(t){return f[t]}),ce=new Set(ut.map(function(t){return f[t]})),ke=null;function pe(t){return ke=new WeakMap,t=(function r(o){if(!o||typeof o!="object")return o;var l=ke.get(o);if(l)return l;if(g(o)){l=[],ke.set(o,l);for(var c=0,h=o.length;c<h;++c)l.push(r(o[c]))}else if(ce.has(o.constructor))l=o;else{var m,b=p(o);for(m in l=b===Object.prototype?{}:Object.create(b),ke.set(o,l),o)D(o,m)&&(l[m]=r(o[m]))}return l})(t),ke=null,t}var Be={}.toString;function Ze(t){return Be.call(t).slice(8,-1)}var Ve=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Te=typeof Ve=="symbol"?function(t){var r;return t!=null&&(r=t[Ve])&&r.apply(t)}:function(){return null};function ze(t,r){return r=t.indexOf(r),0<=r&&t.splice(r,1),0<=r}var Se={};function je(t){var r,o,l,c;if(arguments.length===1){if(g(t))return t.slice();if(this===Se&&typeof t=="string")return[t];if(c=Te(t)){for(o=[];!(l=c.next()).done;)o.push(l.value);return o}if(t==null)return[t];if(typeof(r=t.length)!="number")return[t];for(o=new Array(r);r--;)o[r]=t[r];return o}for(r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return o}var qe=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},tt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],pr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(tt),Je={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Qe(t,r){this.name=t,this.message=r}function ve(t,r){return t+". Errors: "+Object.keys(r).map(function(o){return r[o].toString()}).filter(function(o,l,c){return c.indexOf(o)===l}).join(`
`)}function Ne(t,r,o,l){this.failures=r,this.failedKeys=l,this.successCount=o,this.message=ve(t,r)}function $e(t,r){this.name="BulkError",this.failures=Object.keys(r).map(function(o){return r[o]}),this.failuresByPos=r,this.message=ve(t,this.failures)}E(Qe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(Ne).from(Qe),E($e).from(Qe);var Pe=pr.reduce(function(t,r){return t[r]=r+"Error",t},{}),ht=Qe,oe=pr.reduce(function(t,r){var o=r+"Error";function l(c,h){this.name=o,c?typeof c=="string"?(this.message="".concat(c).concat(h?`
 `+h:""),this.inner=h||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Je[r]||o,this.inner=null)}return E(l).from(ht),t[r]=l,t},{});oe.Syntax=SyntaxError,oe.Type=TypeError,oe.Range=RangeError;var nt=tt.reduce(function(t,r){return t[r+"Error"]=oe[r],t},{}),et=pr.reduce(function(t,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(t[r+"Error"]=oe[r]),t},{});function Ie(){}function He(t){return t}function Ye(t,r){return t==null||t===He?r:function(o){return r(t(o))}}function Fe(t,r){return function(){t.apply(this,arguments),r.apply(this,arguments)}}function it(t,r){return t===Ie?r:function(){var o=t.apply(this,arguments);o!==void 0&&(arguments[0]=o);var l=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var h=r.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?Fe(l,this.onsuccess):l),c&&(this.onerror=this.onerror?Fe(c,this.onerror):c),h!==void 0?h:o}}function Vt(t,r){return t===Ie?r:function(){t.apply(this,arguments);var o=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?Fe(o,this.onsuccess):o),l&&(this.onerror=this.onerror?Fe(l,this.onerror):l)}}function Dt(t,r){return t===Ie?r:function(o){var l=t.apply(this,arguments);y(o,l);var c=this.onsuccess,h=this.onerror;return this.onsuccess=null,this.onerror=null,o=r.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?Fe(c,this.onsuccess):c),h&&(this.onerror=this.onerror?Fe(h,this.onerror):h),l===void 0?o===void 0?void 0:o:y(l,o)}}function Ot(t,r){return t===Ie?r:function(){return r.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function mt(t,r){return t===Ie?r:function(){var o=t.apply(this,arguments);if(o&&typeof o.then=="function"){for(var l=this,c=arguments.length,h=new Array(c);c--;)h[c]=arguments[c];return o.then(function(){return r.apply(l,h)})}return r.apply(this,arguments)}}et.ModifyError=Ne,et.DexieError=Qe,et.BulkError=$e;var at=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ae(t){at=t}var Re={},Xe=100,ut=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,p(t),t];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,p(r),t]})(),tt=ut[0],pr=ut[1],ut=ut[2],pr=pr&&pr.then,Ue=tt&&tt.constructor,Pt=!!ut,kt=function(t,r){de.push([t,r]),wt&&(queueMicrotask(Yt),wt=!1)},qt=!0,wt=!0,yt=[],_t=[],Ct=He,be={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ie,pgp:!1,env:{},finalize:Ie},$=be,de=[],Ge=0,pt=[];function se(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=$;if(typeof t!="function"){if(t!==Re)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Lt(this,this._value))}this._state=null,this._value=null,++r.ref,(function o(l,c){try{c(function(h){if(l._state===null){if(h===l)throw new TypeError("A promise cannot be resolved with itself.");var m=l._lib&&Jt();h&&typeof h.then=="function"?o(l,function(b,I){h instanceof se?h._then(b,I):h.then(b,I)}):(l._state=!0,l._value=h,Qt(l)),m&&vr()}},Lt.bind(null,l))}catch(h){Lt(l,h)}})(this,t)}var Ke={get:function(){var t=$,r=wr;function o(l,c){var h=this,m=!t.global&&(t!==$||r!==wr),b=m&&!Ir(),I=new se(function(P,L){Bt(h,new xt(xn(l,t,m,b),xn(c,t,m,b),P,L,t))});return this._consoleTask&&(I._consoleTask=this._consoleTask),I}return o.prototype=Re,o},set:function(t){_(this,"then",t&&t.prototype===Re?Ke:{get:function(){return t},set:Ke.set})}};function xt(t,r,o,l,c){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof r=="function"?r:null,this.resolve=o,this.reject=l,this.psd=c}function Lt(t,r){var o,l;_t.push(r),t._state===null&&(o=t._lib&&Jt(),r=Ct(r),t._state=!1,t._value=r,l=t,yt.some(function(c){return c._value===l._value})||yt.push(l),Qt(t),o&&vr())}function Qt(t){var r=t._listeners;t._listeners=[];for(var o=0,l=r.length;o<l;++o)Bt(t,r[o]);var c=t._PSD;--c.ref||c.finalize(),Ge===0&&(++Ge,kt(function(){--Ge==0&&Mr()},[]))}function Bt(t,r){if(t._state!==null){var o=t._state?r.onFulfilled:r.onRejected;if(o===null)return(t._state?r.resolve:r.reject)(t._value);++r.psd.ref,++Ge,kt(zt,[o,t,r])}else t._listeners.push(r)}function zt(t,r,o){try{var l,c=r._value;!r._state&&_t.length&&(_t=[]),l=at&&r._consoleTask?r._consoleTask.run(function(){return t(c)}):t(c),r._state||_t.indexOf(c)!==-1||(function(h){for(var m=yt.length;m;)if(yt[--m]._value===h._value)return yt.splice(m,1)})(r),o.resolve(l)}catch(h){o.reject(h)}finally{--Ge==0&&Mr(),--o.psd.ref||o.psd.finalize()}}function Yt(){xr(be,function(){Jt()&&vr()})}function Jt(){var t=qt;return wt=qt=!1,t}function vr(){var t,r,o;do for(;0<de.length;)for(t=de,de=[],o=t.length,r=0;r<o;++r){var l=t[r];l[0].apply(null,l[1])}while(0<de.length);wt=qt=!0}function Mr(){var t=yt;yt=[],t.forEach(function(l){l._PSD.onunhandled.call(null,l._value,l)});for(var r=pt.slice(0),o=r.length;o;)r[--o]()}function Cr(t){return new se(Re,!1,t)}function It(t,r){var o=$;return function(){var l=Jt(),c=$;try{return mr(o,!0),t.apply(this,arguments)}catch(h){r&&r(h)}finally{mr(c,!1),l&&vr()}}}k(se.prototype,{then:Ke,_then:function(t,r){Bt(this,new xt(null,null,t,r,$))},catch:function(t){if(arguments.length===1)return this.then(null,t);var r=t,o=arguments[1];return typeof r=="function"?this.then(null,function(l){return(l instanceof r?o:Cr)(l)}):this.then(null,function(l){return(l&&l.name===r?o:Cr)(l)})},finally:function(t){return this.then(function(r){return se.resolve(t()).then(function(){return r})},function(r){return se.resolve(t()).then(function(){return Cr(r)})})},timeout:function(t,r){var o=this;return t<1/0?new se(function(l,c){var h=setTimeout(function(){return c(new oe.Timeout(r))},t);o.then(l,c).finally(clearTimeout.bind(null,h))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&_(se.prototype,Symbol.toStringTag,"Dexie.Promise"),be.env=Kn(),k(se,{all:function(){var t=je.apply(null,arguments).map(_r);return new se(function(r,o){t.length===0&&r([]);var l=t.length;t.forEach(function(c,h){return se.resolve(c).then(function(m){t[h]=m,--l||r(t)},o)})})},resolve:function(t){return t instanceof se?t:t&&typeof t.then=="function"?new se(function(r,o){t.then(r,o)}):new se(Re,!0,t)},reject:Cr,race:function(){var t=je.apply(null,arguments).map(_r);return new se(function(r,o){t.map(function(l){return se.resolve(l).then(r,o)})})},PSD:{get:function(){return $},set:function(t){return $=t}},totalEchoes:{get:function(){return wr}},newPSD:gr,usePSD:xr,scheduler:{get:function(){return kt},set:function(t){kt=t}},rejectionMapper:{get:function(){return Ct},set:function(t){Ct=t}},follow:function(t,r){return new se(function(o,l){return gr(function(c,h){var m=$;m.unhandleds=[],m.onunhandled=h,m.finalize=Fe(function(){var b,I=this;b=function(){I.unhandleds.length===0?c():h(I.unhandleds[0])},pt.push(function P(){b(),pt.splice(pt.indexOf(P),1)}),++Ge,kt(function(){--Ge==0&&Mr()},[])},m.finalize),t()},r,o,l)})}}),Ue&&(Ue.allSettled&&_(se,"allSettled",function(){var t=je.apply(null,arguments).map(_r);return new se(function(r){t.length===0&&r([]);var o=t.length,l=new Array(o);t.forEach(function(c,h){return se.resolve(c).then(function(m){return l[h]={status:"fulfilled",value:m}},function(m){return l[h]={status:"rejected",reason:m}}).then(function(){return--o||r(l)})})})}),Ue.any&&typeof AggregateError<"u"&&_(se,"any",function(){var t=je.apply(null,arguments).map(_r);return new se(function(r,o){t.length===0&&o(new AggregateError([]));var l=t.length,c=new Array(l);t.forEach(function(h,m){return se.resolve(h).then(function(b){return r(b)},function(b){c[m]=b,--l||o(new AggregateError(c))})})})}),Ue.withResolvers&&(se.withResolvers=Ue.withResolvers));var Rt={awaits:0,echoes:0,id:0},_n=0,un=[],dn=0,wr=0,Zr=0;function gr(t,r,o,l){var c=$,h=Object.create(c);return h.parent=c,h.ref=0,h.global=!1,h.id=++Zr,be.env,h.env=Pt?{Promise:se,PromiseProp:{value:se,configurable:!0,writable:!0},all:se.all,race:se.race,allSettled:se.allSettled,any:se.any,resolve:se.resolve,reject:se.reject}:{},r&&y(h,r),++c.ref,h.finalize=function(){--this.parent.ref||this.parent.finalize()},l=xr(h,t,o,l),h.ref===0&&h.finalize(),l}function jr(){return Rt.id||(Rt.id=++_n),++Rt.awaits,Rt.echoes+=Xe,Rt.id}function Ir(){return!!Rt.awaits&&(--Rt.awaits==0&&(Rt.id=0),Rt.echoes=Rt.awaits*Xe,!0)}function _r(t){return Rt.echoes&&t&&t.constructor===Ue?(jr(),t.then(function(r){return Ir(),r},function(r){return Ir(),Ht(r)})):t}function $r(){var t=un[un.length-1];un.pop(),mr(t,!1)}function mr(t,r){var o,l=$;(r?!Rt.echoes||dn++&&t===$:!dn||--dn&&t===$)||queueMicrotask(r?(function(c){++wr,Rt.echoes&&--Rt.echoes!=0||(Rt.echoes=Rt.awaits=Rt.id=0),un.push($),mr(c,!0)}).bind(null,t):$r),t!==$&&($=t,l===be&&(be.env=Kn()),Pt&&(o=be.env.Promise,r=t.env,(l.global||t.global)&&(Object.defineProperty(f,"Promise",r.PromiseProp),o.all=r.all,o.race=r.race,o.resolve=r.resolve,o.reject=r.reject,r.allSettled&&(o.allSettled=r.allSettled),r.any&&(o.any=r.any))))}function Kn(){var t=f.Promise;return Pt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function xr(t,r,o,l,c){var h=$;try{return mr(t,!0),r(o,l,c)}finally{mr(h,!1)}}function xn(t,r,o,l){return typeof t!="function"?t:function(){var c=$;o&&jr(),mr(r,!0);try{return t.apply(this,arguments)}finally{mr(c,!1),l&&queueMicrotask(Ir)}}}function Sn(t){Promise===Ue&&Rt.echoes===0?dn===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+pr).indexOf("[native code]")===-1&&(jr=Ir=Ie);var Ht=se.reject,en="",Fr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ua="String expected.",fn=[],Hn="__dbnames",Fi="readonly",Ri="readwrite";function tn(t,r){return t?r?function(){return t.apply(this,arguments)&&r.apply(this,arguments)}:t:r}var Ga={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Un(t){return typeof t!="string"||/\./.test(t)?function(r){return r}:function(r){return r[t]===void 0&&t in r&&delete(r=pe(r))[t],r}}function Wa(){throw oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function bt(t,r){try{var o=Ya(t),l=Ya(r);if(o!==l)return o==="Array"?1:l==="Array"?-1:o==="binary"?1:l==="binary"?-1:o==="string"?1:l==="string"?-1:o==="Date"?1:l!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return r<t?1:t<r?-1:0;case"binary":return(function(c,h){for(var m=c.length,b=h.length,I=m<b?m:b,P=0;P<I;++P)if(c[P]!==h[P])return c[P]<h[P]?-1:1;return m===b?0:m<b?-1:1})(Ja(t),Ja(r));case"Array":return(function(c,h){for(var m=c.length,b=h.length,I=m<b?m:b,P=0;P<I;++P){var L=bt(c[P],h[P]);if(L!==0)return L}return m===b?0:m<b?-1:1})(t,r)}}catch{}return NaN}function Ya(t){var r=typeof t;return r!="object"?r:ArrayBuffer.isView(t)?"binary":(t=Ze(t),t==="ArrayBuffer"?"binary":t)}function Ja(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Gn(t,r,o){var l=t.schema.yProps;return l?(r&&0<o.numFailures&&(r=r.filter(function(c,h){return!o.failures[h]})),Promise.all(l.map(function(c){return c=c.updatesTable,r?t.db.table(c).where("k").anyOf(r).delete():t.db.table(c).clear()})).then(function(){return o})):o}var kn=(Qa.prototype.execute=function(t){var r=this["@@propmod"];if(r.add!==void 0){var o=r.add;if(g(o))return s(s([],g(t)?t:[],!0),o).sort();if(typeof o=="number")return(Number(t)||0)+o;if(typeof o=="bigint")try{return BigInt(t)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(r.remove!==void 0){var l=r.remove;if(g(l))return g(t)?t.filter(function(c){return!l.includes(c)}).sort():[];if(typeof l=="number")return Number(t)-l;if(typeof l=="bigint")try{return BigInt(t)-l}catch{return BigInt(0)-l}throw new TypeError("Invalid subtrahend ".concat(l))}return o=(o=r.replacePrefix)===null||o===void 0?void 0:o[0],o&&typeof t=="string"&&t.startsWith(o)?r.replacePrefix[1]+t.substring(o.length):t},Qa);function Qa(t){this["@@propmod"]=t}function Xa(t,r){for(var o=d(r),l=o.length,c=!1,h=0;h<l;++h){var m=o[h],b=r[m],I=Q(t,m);b instanceof kn?(le(t,m,b.execute(I)),c=!0):I!==b&&(le(t,m,b),c=!0)}return c}var Za=(Et.prototype._trans=function(t,r,o){var l=this._tx||$.trans,c=this.name,h=at&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function m(P,L,x){if(!x.schema[c])throw new oe.NotFound("Table "+c+" not part of transaction");return r(x.idbtrans,x)}var b=Jt();try{var I=l&&l.db._novip===this.db._novip?l===$.trans?l._promise(t,m,o):gr(function(){return l._promise(t,m,o)},{trans:l,transless:$.transless||$}):(function P(L,x,j,A){if(L.idbdb&&(L._state.openComplete||$.letThrough||L._vip)){var F=L._createTransaction(x,j,L._dbSchema);try{F.create(),L._state.PR1398_maxLoop=3}catch(R){return R.name===Pe.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return P(L,x,j,A)})):Ht(R)}return F._promise(x,function(R,z){return gr(function(){return $.trans=F,A(R,z,F)})}).then(function(R){if(x==="readwrite")try{F.idbtrans.commit()}catch{}return x==="readonly"?R:F._completion.then(function(){return R})})}if(L._state.openComplete)return Ht(new oe.DatabaseClosed(L._state.dbOpenError));if(!L._state.isBeingOpened){if(!L._state.autoOpen)return Ht(new oe.DatabaseClosed);L.open().catch(Ie)}return L._state.dbReadyPromise.then(function(){return P(L,x,j,A)})})(this.db,t,[this.name],m);return h&&(I._consoleTask=h,I=I.catch(function(P){return console.trace(P),Ht(P)})),I}finally{b&&vr()}},Et.prototype.get=function(t,r){var o=this;return t&&t.constructor===Object?this.where(t).first(r):t==null?Ht(new oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(l){return o.core.get({trans:l,key:t}).then(function(c){return o.hook.reading.fire(c)})}).then(r)},Et.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(g(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var r=d(t);if(r.length===1)return this.where(r[0]).equals(t[r[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(b){if(b.compound&&r.every(function(P){return 0<=b.keyPath.indexOf(P)})){for(var I=0;I<r.length;++I)if(r.indexOf(b.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(b,I){return b.keyPath.length-I.keyPath.length})[0];if(o&&this.db._maxKey!==en){var h=o.keyPath.slice(0,r.length);return this.where(h).equals(h.map(function(I){return t[I]}))}!o&&at&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var l=this.schema.idxByName;function c(b,I){return bt(b,I)===0}var m=r.reduce(function(x,I){var P=x[0],L=x[1],x=l[I],j=t[I];return[P||x,P||!x?tn(L,x&&x.multi?function(A){return A=Q(A,I),g(A)&&A.some(function(F){return c(j,F)})}:function(A){return c(j,Q(A,I))}):L]},[null,null]),h=m[0],m=m[1];return h?this.where(h.name).equals(t[h.keyPath]).filter(m):o?this.filter(m):this.where(r).equals("")},Et.prototype.filter=function(t){return this.toCollection().and(t)},Et.prototype.count=function(t){return this.toCollection().count(t)},Et.prototype.offset=function(t){return this.toCollection().offset(t)},Et.prototype.limit=function(t){return this.toCollection().limit(t)},Et.prototype.each=function(t){return this.toCollection().each(t)},Et.prototype.toArray=function(t){return this.toCollection().toArray(t)},Et.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Et.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,g(t)?"[".concat(t.join("+"),"]"):t))},Et.prototype.reverse=function(){return this.toCollection().reverse()},Et.prototype.mapToClass=function(t){var r,o=this.db,l=this.name;function c(){return r!==null&&r.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof Wa&&((function(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function L(){this.constructor=I}n(I,P),I.prototype=P===null?Object.create(P):(L.prototype=P.prototype,new L)})(c,r=t),Object.defineProperty(c.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),c.prototype.table=function(){return l},t=c);for(var h=new Set,m=t.prototype;m;m=p(m))Object.getOwnPropertyNames(m).forEach(function(I){return h.add(I)});function b(I){if(!I)return I;var P,L=Object.create(t.prototype);for(P in I)if(!h.has(P))try{L[P]=I[P]}catch{}return L}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=b,this.hook("reading",b),t},Et.prototype.defineClass=function(){return this.mapToClass(function(t){y(this,t)})},Et.prototype.add=function(t,r){var o=this,l=this.schema.primKey,c=l.auto,h=l.keyPath,m=t;return h&&c&&(m=Un(h)(t)),this._trans("readwrite",function(b){return o.core.mutate({trans:b,type:"add",keys:r!=null?[r]:null,values:[m]})}).then(function(b){return b.numFailures?se.reject(b.failures[0]):b.lastResult}).then(function(b){if(h)try{le(t,h,b)}catch{}return b})},Et.prototype.upsert=function(t,r){var o=this,l=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return o.core.get({trans:c,key:t}).then(function(h){var m=h??{};return Xa(m,r),l&&le(m,l,t),o.core.mutate({trans:c,type:"put",values:[m],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[r]}}).then(function(b){return b.numFailures?se.reject(b.failures[0]):!!h})})})},Et.prototype.update=function(t,r){return typeof t!="object"||g(t)?this.where(":id").equals(t).modify(r):(t=Q(t,this.schema.primKey.keyPath),t===void 0?Ht(new oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(r))},Et.prototype.put=function(t,r){var o=this,l=this.schema.primKey,c=l.auto,h=l.keyPath,m=t;return h&&c&&(m=Un(h)(t)),this._trans("readwrite",function(b){return o.core.mutate({trans:b,type:"put",values:[m],keys:r!=null?[r]:null})}).then(function(b){return b.numFailures?se.reject(b.failures[0]):b.lastResult}).then(function(b){if(h)try{le(t,h,b)}catch{}return b})},Et.prototype.delete=function(t){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"delete",keys:[t]}).then(function(l){return Gn(r,[t],l)}).then(function(l){return l.numFailures?se.reject(l.failures[0]):void 0})})},Et.prototype.clear=function(){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"deleteRange",range:Ga}).then(function(o){return Gn(t,null,o)})}).then(function(r){return r.numFailures?se.reject(r.failures[0]):void 0})},Et.prototype.bulkGet=function(t){var r=this;return this._trans("readonly",function(o){return r.core.getMany({keys:t,trans:o}).then(function(l){return l.map(function(c){return r.hook.reading.fire(c)})})})},Et.prototype.bulkAdd=function(t,r,o){var l=this,c=Array.isArray(r)?r:void 0,h=(o=o||(c?void 0:r))?o.allKeys:void 0;return this._trans("readwrite",function(m){var P=l.schema.primKey,b=P.auto,P=P.keyPath;if(P&&c)throw new oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var I=t.length,P=P&&b?t.map(Un(P)):t;return l.core.mutate({trans:m,type:"add",keys:c,values:P,wantResults:h}).then(function(F){var x=F.numFailures,j=F.results,A=F.lastResult,F=F.failures;if(x===0)return h?j:A;throw new $e("".concat(l.name,".bulkAdd(): ").concat(x," of ").concat(I," operations failed"),F)})})},Et.prototype.bulkPut=function(t,r,o){var l=this,c=Array.isArray(r)?r:void 0,h=(o=o||(c?void 0:r))?o.allKeys:void 0;return this._trans("readwrite",function(m){var P=l.schema.primKey,b=P.auto,P=P.keyPath;if(P&&c)throw new oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var I=t.length,P=P&&b?t.map(Un(P)):t;return l.core.mutate({trans:m,type:"put",keys:c,values:P,wantResults:h}).then(function(F){var x=F.numFailures,j=F.results,A=F.lastResult,F=F.failures;if(x===0)return h?j:A;throw new $e("".concat(l.name,".bulkPut(): ").concat(x," of ").concat(I," operations failed"),F)})})},Et.prototype.bulkUpdate=function(t){var r=this,o=this.core,l=t.map(function(m){return m.key}),c=t.map(function(m){return m.changes}),h=[];return this._trans("readwrite",function(m){return o.getMany({trans:m,keys:l,cache:"clone"}).then(function(b){var I=[],P=[];t.forEach(function(x,j){var A=x.key,F=x.changes,R=b[j];if(R){for(var z=0,q=Object.keys(F);z<q.length;z++){var G=q[z],X=F[G];if(G===r.schema.primKey.keyPath){if(bt(X,A)!==0)throw new oe.Constraint("Cannot update primary key in bulkUpdate()")}else le(R,G,X)}h.push(j),I.push(A),P.push(R)}});var L=I.length;return o.mutate({trans:m,type:"put",keys:I,values:P,updates:{keys:l,changeSpecs:c}}).then(function(x){var j=x.numFailures,A=x.failures;if(j===0)return L;for(var F=0,R=Object.keys(A);F<R.length;F++){var z,q=R[F],G=h[Number(q)];G!=null&&(z=A[q],delete A[q],A[G]=z)}throw new $e("".concat(r.name,".bulkUpdate(): ").concat(j," of ").concat(L," operations failed"),A)})})})},Et.prototype.bulkDelete=function(t){var r=this,o=t.length;return this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"delete",keys:t}).then(function(c){return Gn(r,t,c)})}).then(function(m){var c=m.numFailures,h=m.lastResult,m=m.failures;if(c===0)return h;throw new $e("".concat(r.name,".bulkDelete(): ").concat(c," of ").concat(o," operations failed"),m)})},Et);function Et(){}function Cn(t){function r(m,b){if(b){for(var I=arguments.length,P=new Array(I-1);--I;)P[I-1]=arguments[I];return o[m].subscribe.apply(null,P),t}if(typeof m=="string")return o[m]}var o={};r.addEventType=h;for(var l=1,c=arguments.length;l<c;++l)h(arguments[l]);return r;function h(m,b,I){if(typeof m!="object"){var P;b=b||Ot;var L={subscribers:[],fire:I=I||Ie,subscribe:function(x){L.subscribers.indexOf(x)===-1&&(L.subscribers.push(x),L.fire=b(L.fire,x))},unsubscribe:function(x){L.subscribers=L.subscribers.filter(function(j){return j!==x}),L.fire=L.subscribers.reduce(b,I)}};return o[m]=r[m]=L}d(P=m).forEach(function(x){var j=P[x];if(g(j))h(x,P[x][0],P[x][1]);else{if(j!=="asap")throw new oe.InvalidArgument("Invalid event config");var A=h(x,He,function(){for(var F=arguments.length,R=new Array(F);F--;)R[F]=arguments[F];A.subscribers.forEach(function(z){re(function(){z.apply(null,R)})})})}})}}function In(t,r){return E(r).from({prototype:t}),r}function hn(t,r){return!(t.filter||t.algorithm||t.or)&&(r?t.justLimit:!t.replayFilter)}function Ni(t,r){t.filter=tn(t.filter,r)}function Li(t,r,o){var l=t.replayFilter;t.replayFilter=l?function(){return tn(l(),r())}:r,t.justLimit=o&&!l}function Wn(t,r){if(t.isPrimKey)return r.primaryKey;var o=r.getIndexByKeyPath(t.index);if(!o)throw new oe.Schema("KeyPath "+t.index+" on object store "+r.name+" is not indexed");return o}function $a(t,r,o){var l=Wn(t,r.schema);return r.openCursor({trans:o,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:l,range:t.range}})}function Yn(t,r,o,l){var c=t.replayFilter?tn(t.filter,t.replayFilter()):t.filter;if(t.or){var h={},m=function(b,I,P){var L,x;c&&!c(I,P,function(j){return I.stop(j)},function(j){return I.fail(j)})||((x=""+(L=I.primaryKey))=="[object ArrayBuffer]"&&(x=""+new Uint8Array(L)),D(h,x)||(h[x]=!0,r(b,I,P)))};return Promise.all([t.or._iterate(m,o),eo($a(t,l,o),t.algorithm,m,!t.keysOnly&&t.valueMapper)])}return eo($a(t,l,o),tn(t.algorithm,c),r,!t.keysOnly&&t.valueMapper)}function eo(t,r,o,l){var c=It(l?function(h,m,b){return o(l(h),m,b)}:o);return t.then(function(h){if(h)return h.start(function(){var m=function(){return h.continue()};r&&!r(h,function(b){return m=b},function(b){h.stop(b),m=Ie},function(b){h.fail(b),m=Ie})||c(h.value,h,function(b){return m=b}),m()})})}var zs=(St.prototype._read=function(t,r){var o=this._ctx;return o.error?o.table._trans(null,Ht.bind(null,o.error)):o.table._trans("readonly",t).then(r)},St.prototype._write=function(t){var r=this._ctx;return r.error?r.table._trans(null,Ht.bind(null,r.error)):r.table._trans("readwrite",t,"locked")},St.prototype._addAlgorithm=function(t){var r=this._ctx;r.algorithm=tn(r.algorithm,t)},St.prototype._iterate=function(t,r){return Yn(this._ctx,t,r,this._ctx.table.core)},St.prototype.clone=function(t){var r=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&y(o,t),r._ctx=o,r},St.prototype.raw=function(){return this._ctx.valueMapper=null,this},St.prototype.each=function(t){var r=this._ctx;return this._read(function(o){return Yn(r,t,o,r.table.core)})},St.prototype.count=function(t){var r=this;return this._read(function(o){var l=r._ctx,c=l.table.core;if(hn(l,!0))return c.count({trans:o,query:{index:Wn(l,c.schema),range:l.range}}).then(function(m){return Math.min(m,l.limit)});var h=0;return Yn(l,function(){return++h,!1},o,c).then(function(){return h})}).then(t)},St.prototype.sortBy=function(t,r){var o=t.split(".").reverse(),l=o[0],c=o.length-1;function h(I,P){return P?h(I[o[P]],P-1):I[l]}var m=this._ctx.dir==="next"?1:-1;function b(I,P){return bt(h(I,c),h(P,c))*m}return this.toArray(function(I){return I.sort(b)}).then(r)},St.prototype.toArray=function(t){var r=this;return this._read(function(o){var l=r._ctx;if(l.dir==="next"&&hn(l,!0)&&0<l.limit){var c=l.valueMapper,h=Wn(l,l.table.core.schema);return l.table.core.query({trans:o,limit:l.limit,values:!0,query:{index:h,range:l.range}}).then(function(b){return b=b.result,c?b.map(c):b})}var m=[];return Yn(l,function(b){return m.push(b)},o,l.table.core).then(function(){return m})},t)},St.prototype.offset=function(t){var r=this._ctx;return t<=0||(r.offset+=t,hn(r)?Li(r,function(){var o=t;return function(l,c){return o===0||(o===1?--o:c(function(){l.advance(o),o=0}),!1)}}):Li(r,function(){var o=t;return function(){return--o<0}})),this},St.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Li(this._ctx,function(){var r=t;return function(o,l,c){return--r<=0&&l(c),0<=r}},!0),this},St.prototype.until=function(t,r){return Ni(this._ctx,function(o,l,c){return!t(o.value)||(l(c),r)}),this},St.prototype.first=function(t){return this.limit(1).toArray(function(r){return r[0]}).then(t)},St.prototype.last=function(t){return this.reverse().first(t)},St.prototype.filter=function(t){var r;return Ni(this._ctx,function(o){return t(o.value)}),(r=this._ctx).isMatch=tn(r.isMatch,t),this},St.prototype.and=function(t){return this.filter(t)},St.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},St.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},St.prototype.desc=function(){return this.reverse()},St.prototype.eachKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(o,l){t(l.key,l)})},St.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},St.prototype.eachPrimaryKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(o,l){t(l.primaryKey,l)})},St.prototype.keys=function(t){var r=this._ctx;r.keysOnly=!r.isMatch;var o=[];return this.each(function(l,c){o.push(c.key)}).then(function(){return o}).then(t)},St.prototype.primaryKeys=function(t){var r=this._ctx;if(r.dir==="next"&&hn(r,!0)&&0<r.limit)return this._read(function(l){var c=Wn(r,r.table.core.schema);return r.table.core.query({trans:l,values:!1,limit:r.limit,query:{index:c,range:r.range}})}).then(function(l){return l.result}).then(t);r.keysOnly=!r.isMatch;var o=[];return this.each(function(l,c){o.push(c.primaryKey)}).then(function(){return o}).then(t)},St.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},St.prototype.firstKey=function(t){return this.limit(1).keys(function(r){return r[0]}).then(t)},St.prototype.lastKey=function(t){return this.reverse().firstKey(t)},St.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var r={};return Ni(this._ctx,function(c){var l=c.primaryKey.toString(),c=D(r,l);return r[l]=!0,!c}),this},St.prototype.modify=function(t){var r=this,o=this._ctx;return this._write(function(l){var c=typeof t=="function"?t:function(R){return Xa(R,t)},h=o.table.core,P=h.schema.primaryKey,m=P.outbound,b=P.extractKey,I=200,P=r.db._options.modifyChunkSize;P&&(I=typeof P=="object"?P[h.name]||P["*"]||200:P);function L(R,G){var q=G.failures,G=G.numFailures;j+=R-G;for(var X=0,ee=d(q);X<ee.length;X++){var ge=ee[X];x.push(q[ge])}}var x=[],j=0,A=[],F=t===to;return r.clone().primaryKeys().then(function(R){function z(G){var X=Math.min(I,R.length-G),ee=R.slice(G,G+X);return(F?Promise.resolve([]):h.getMany({trans:l,keys:ee,cache:"immutable"})).then(function(ge){var we=[],ue=[],me=m?[]:null,_e=F?ee:[];if(!F)for(var ye=0;ye<X;++ye){var Ee=ge[ye],st={value:pe(Ee),primKey:R[G+ye]};c.call(st,st.value,st)!==!1&&(st.value==null?_e.push(R[G+ye]):m||bt(b(Ee),b(st.value))===0?(ue.push(st.value),m&&me.push(R[G+ye])):(_e.push(R[G+ye]),we.push(st.value)))}return Promise.resolve(0<we.length&&h.mutate({trans:l,type:"add",values:we}).then(function(dt){for(var gt in dt.failures)_e.splice(parseInt(gt),1);L(we.length,dt)})).then(function(){return(0<ue.length||q&&typeof t=="object")&&h.mutate({trans:l,type:"put",keys:me,values:ue,criteria:q,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<G}).then(function(dt){return L(ue.length,dt)})}).then(function(){return(0<_e.length||q&&F)&&h.mutate({trans:l,type:"delete",keys:_e,criteria:q,isAdditionalChunk:0<G}).then(function(dt){return Gn(o.table,_e,dt)}).then(function(dt){return L(_e.length,dt)})}).then(function(){return R.length>G+X&&z(G+I)})})}var q=hn(o)&&o.limit===1/0&&(typeof t!="function"||F)&&{index:o.index,range:o.range};return z(0).then(function(){if(0<x.length)throw new Ne("Error modifying one or more objects",x,j,A);return R.length})})})},St.prototype.delete=function(){var t=this._ctx,r=t.range;return!hn(t)||t.table.schema.yProps||!t.isPrimKey&&r.type!==3?this.modify(to):this._write(function(o){var l=t.table.core.schema.primaryKey,c=r;return t.table.core.count({trans:o,query:{index:l,range:c}}).then(function(h){return t.table.core.mutate({trans:o,type:"deleteRange",range:c}).then(function(I){var b=I.failures,I=I.numFailures;if(I)throw new Ne("Could not delete some values",Object.keys(b).map(function(P){return b[P]}),h-I);return h-I})})})},St);function St(){}var to=function(t,r){return r.value=null};function js(t,r){return t<r?-1:t===r?0:1}function Vs(t,r){return r<t?-1:t===r?0:1}function dr(t,r,o){return t=t instanceof no?new t.Collection(t):t,t._ctx.error=new(o||TypeError)(r),t}function vn(t){return new t.Collection(t,function(){return ro("")}).limit(0)}function Jn(t,r,o,l){var c,h,m,b,I,P,L,x=o.length;if(!o.every(function(F){return typeof F=="string"}))return dr(t,Ua);function j(F){c=F==="next"?function(z){return z.toUpperCase()}:function(z){return z.toLowerCase()},h=F==="next"?function(z){return z.toLowerCase()}:function(z){return z.toUpperCase()},m=F==="next"?js:Vs;var R=o.map(function(z){return{lower:h(z),upper:c(z)}}).sort(function(z,q){return m(z.lower,q.lower)});b=R.map(function(z){return z.upper}),I=R.map(function(z){return z.lower}),L=(P=F)==="next"?"":l}j("next"),t=new t.Collection(t,function(){return Vr(b[0],I[x-1]+l)}),t._ondirectionchange=function(F){j(F)};var A=0;return t._addAlgorithm(function(F,R,z){var q=F.key;if(typeof q!="string")return!1;var G=h(q);if(r(G,I,A))return!0;for(var X=null,ee=A;ee<x;++ee){var ge=(function(we,ue,me,_e,ye,Ee){for(var st=Math.min(we.length,_e.length),dt=-1,gt=0;gt<st;++gt){var fr=ue[gt];if(fr!==_e[gt])return ye(we[gt],me[gt])<0?we.substr(0,gt)+me[gt]+me.substr(gt+1):ye(we[gt],_e[gt])<0?we.substr(0,gt)+_e[gt]+me.substr(gt+1):0<=dt?we.substr(0,dt)+ue[dt]+me.substr(dt+1):null;ye(we[gt],fr)<0&&(dt=gt)}return st<_e.length&&Ee==="next"?we+me.substr(we.length):st<we.length&&Ee==="prev"?we.substr(0,me.length):dt<0?null:we.substr(0,dt)+_e[dt]+me.substr(dt+1)})(q,G,b[ee],I[ee],m,P);ge===null&&X===null?A=ee+1:(X===null||0<m(X,ge))&&(X=ge)}return R(X!==null?function(){F.continue(X+L)}:z),!1}),t}function Vr(t,r,o,l){return{type:2,lower:t,upper:r,lowerOpen:o,upperOpen:l}}function ro(t){return{type:1,lower:t,upper:t}}var no=(Object.defineProperty(Xt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Xt.prototype.between=function(t,r,o,l){o=o!==!1,l=l===!0;try{return 0<this._cmp(t,r)||this._cmp(t,r)===0&&(o||l)&&(!o||!l)?vn(this):new this.Collection(this,function(){return Vr(t,r,!o,!l)})}catch{return dr(this,Fr)}},Xt.prototype.equals=function(t){return t==null?dr(this,Fr):new this.Collection(this,function(){return ro(t)})},Xt.prototype.above=function(t){return t==null?dr(this,Fr):new this.Collection(this,function(){return Vr(t,void 0,!0)})},Xt.prototype.aboveOrEqual=function(t){return t==null?dr(this,Fr):new this.Collection(this,function(){return Vr(t,void 0,!1)})},Xt.prototype.below=function(t){return t==null?dr(this,Fr):new this.Collection(this,function(){return Vr(void 0,t,!1,!0)})},Xt.prototype.belowOrEqual=function(t){return t==null?dr(this,Fr):new this.Collection(this,function(){return Vr(void 0,t)})},Xt.prototype.startsWith=function(t){return typeof t!="string"?dr(this,Ua):this.between(t,t+en,!0,!0)},Xt.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Jn(this,function(r,o){return r.indexOf(o[0])===0},[t],en)},Xt.prototype.equalsIgnoreCase=function(t){return Jn(this,function(r,o){return r===o[0]},[t],"")},Xt.prototype.anyOfIgnoreCase=function(){var t=je.apply(Se,arguments);return t.length===0?vn(this):Jn(this,function(r,o){return o.indexOf(r)!==-1},t,"")},Xt.prototype.startsWithAnyOfIgnoreCase=function(){var t=je.apply(Se,arguments);return t.length===0?vn(this):Jn(this,function(r,o){return o.some(function(l){return r.indexOf(l)===0})},t,en)},Xt.prototype.anyOf=function(){var t=this,r=je.apply(Se,arguments),o=this._cmp;try{r.sort(o)}catch{return dr(this,Fr)}if(r.length===0)return vn(this);var l=new this.Collection(this,function(){return Vr(r[0],r[r.length-1])});l._ondirectionchange=function(h){o=h==="next"?t._ascending:t._descending,r.sort(o)};var c=0;return l._addAlgorithm(function(h,m,b){for(var I=h.key;0<o(I,r[c]);)if(++c===r.length)return m(b),!1;return o(I,r[c])===0||(m(function(){h.continue(r[c])}),!1)}),l},Xt.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Xt.prototype.noneOf=function(){var t=je.apply(Se,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return dr(this,Fr)}var r=t.reduce(function(o,l){return o?o.concat([[o[o.length-1][1],l]]):[[-1/0,l]]},null);return r.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},Xt.prototype.inAnyRange=function(q,r){var o=this,l=this._cmp,c=this._ascending,h=this._descending,m=this._min,b=this._max;if(q.length===0)return vn(this);if(!q.every(function(G){return G[0]!==void 0&&G[1]!==void 0&&c(G[0],G[1])<=0}))return dr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",oe.InvalidArgument);var I=!r||r.includeLowers!==!1,P=r&&r.includeUppers===!0,L,x=c;function j(G,X){return x(G[0],X[0])}try{(L=q.reduce(function(G,X){for(var ee=0,ge=G.length;ee<ge;++ee){var we=G[ee];if(l(X[0],we[1])<0&&0<l(X[1],we[0])){we[0]=m(we[0],X[0]),we[1]=b(we[1],X[1]);break}}return ee===ge&&G.push(X),G},[])).sort(j)}catch{return dr(this,Fr)}var A=0,F=P?function(G){return 0<c(G,L[A][1])}:function(G){return 0<=c(G,L[A][1])},R=I?function(G){return 0<h(G,L[A][0])}:function(G){return 0<=h(G,L[A][0])},z=F,q=new this.Collection(this,function(){return Vr(L[0][0],L[L.length-1][1],!I,!P)});return q._ondirectionchange=function(G){x=G==="next"?(z=F,c):(z=R,h),L.sort(j)},q._addAlgorithm(function(G,X,ee){for(var ge,we=G.key;z(we);)if(++A===L.length)return X(ee),!1;return!F(ge=we)&&!R(ge)||(o._cmp(we,L[A][1])===0||o._cmp(we,L[A][0])===0||X(function(){x===c?G.continue(L[A][0]):G.continue(L[A][1])}),!1)}),q},Xt.prototype.startsWithAnyOf=function(){var t=je.apply(Se,arguments);return t.every(function(r){return typeof r=="string"})?t.length===0?vn(this):this.inAnyRange(t.map(function(r){return[r,r+en]})):dr(this,"startsWithAnyOf() only works with strings")},Xt);function Xt(){}function Pr(t){return It(function(r){return Pn(r),t(r.target.error),!1})}function Pn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var An="storagemutated",Bi="x-storagemutated-1",qr=Cn(null,An),qs=(Ar.prototype._lock=function(){return Z(!$.global),++this._reculock,this._reculock!==1||$.global||($.lockOwnerFor=this),this},Ar.prototype._unlock=function(){if(Z(!$.global),--this._reculock==0)for($.global||($.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{xr(t[1],t[0])}catch{}}return this},Ar.prototype._locked=function(){return this._reculock&&$.lockOwnerFor!==this},Ar.prototype.create=function(t){var r=this;if(!this.mode)return this;var o=this.db.idbdb,l=this.db._state.dbOpenError;if(Z(!this.idbtrans),!t&&!o)switch(l&&l.name){case"DatabaseClosedError":throw new oe.DatabaseClosed(l);case"MissingAPIError":throw new oe.MissingAPI(l.message,l);default:throw new oe.OpenFailed(l)}if(!this.active)throw new oe.TransactionInactive;return Z(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=It(function(c){Pn(c),r._reject(t.error)}),t.onabort=It(function(c){Pn(c),r.active&&r._reject(new oe.Abort(t.error)),r.active=!1,r.on("abort").fire(c)}),t.oncomplete=It(function(){r.active=!1,r._resolve(),"mutatedParts"in t&&qr.storagemutated.fire(t.mutatedParts)}),this},Ar.prototype._promise=function(t,r,o){var l=this;if(t==="readwrite"&&this.mode!=="readwrite")return Ht(new oe.ReadOnly("Transaction is readonly"));if(!this.active)return Ht(new oe.TransactionInactive);if(this._locked())return new se(function(h,m){l._blockedFuncs.push([function(){l._promise(t,r,o).then(h,m)},$])});if(o)return gr(function(){var h=new se(function(m,b){l._lock();var I=r(m,b,l);I&&I.then&&I.then(m,b)});return h.finally(function(){return l._unlock()}),h._lib=!0,h});var c=new se(function(h,m){var b=r(h,m,l);b&&b.then&&b.then(h,m)});return c._lib=!0,c},Ar.prototype._root=function(){return this.parent?this.parent._root():this},Ar.prototype.waitFor=function(t){var r,o=this._root(),l=se.resolve(t);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return l}):(o._waitingFor=l,o._waitingQueue=[],r=o.idbtrans.objectStore(o.storeNames[0]),(function h(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(r.get(-1/0).onsuccess=h)})());var c=o._waitingFor;return new se(function(h,m){l.then(function(b){return o._waitingQueue.push(It(h.bind(null,b)))},function(b){return o._waitingQueue.push(It(m.bind(null,b)))}).finally(function(){o._waitingFor===c&&(o._waitingFor=null)})})},Ar.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new oe.Abort))},Ar.prototype.table=function(t){var r=this._memoizedTables||(this._memoizedTables={});if(D(r,t))return r[t];var o=this.schema[t];if(!o)throw new oe.NotFound("Table "+t+" not part of transaction");return o=new this.db.Table(t,o,this),o.core=this.db.core.table(t),r[t]=o},Ar);function Ar(){}function zi(t,r,o,l,c,h,m,b){return{name:t,keyPath:r,unique:o,multi:l,auto:c,compound:h,src:(o&&!m?"&":"")+(l?"*":"")+(c?"++":"")+io(r),type:b}}function io(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function ji(t,r,o){return{name:t,primKey:r,indexes:o,mappedClass:null,idxByName:(l=function(c){return[c.name,c]},o.reduce(function(c,h,m){return m=l(h,m),m&&(c[m[0]]=m[1]),c},{}))};var l}var Tn=function(t){try{return t.only([[]]),Tn=function(){return[[]]},[[]]}catch{return Tn=function(){return en},en}};function Vi(t){return t==null?function(){}:typeof t=="string"?(r=t).split(".").length===1?function(o){return o[r]}:function(o){return Q(o,r)}:function(o){return Q(o,t)};var r}function ao(t){return[].slice.call(t)}var Ks=0;function Dn(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Hs(t,r,I){function l(z){if(z.type===3)return null;if(z.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var A=z.lower,F=z.upper,R=z.lowerOpen,z=z.upperOpen;return A===void 0?F===void 0?null:r.upperBound(F,!!z):F===void 0?r.lowerBound(A,!!R):r.bound(A,F,!!R,!!z)}function c(j){var A,F=j.name;return{name:F,schema:j,mutate:function(R){var z=R.trans,q=R.type,G=R.keys,X=R.values,ee=R.range;return new Promise(function(ge,we){ge=It(ge);var ue=z.objectStore(F),me=ue.keyPath==null,_e=q==="put"||q==="add";if(!_e&&q!=="delete"&&q!=="deleteRange")throw new Error("Invalid operation type: "+q);var ye,Ee=(G||X||{length:1}).length;if(G&&X&&G.length!==X.length)throw new Error("Given keys array must have same length as given values array.");if(Ee===0)return ge({numFailures:0,failures:{},results:[],lastResult:void 0});function st(or){++fr,Pn(or)}var dt=[],gt=[],fr=0;if(q==="deleteRange"){if(ee.type===4)return ge({numFailures:fr,failures:gt,results:[],lastResult:void 0});ee.type===3?dt.push(ye=ue.clear()):dt.push(ye=ue.delete(l(ee)))}else{var me=_e?me?[X,G]:[X,null]:[G,null],ot=me[0],ir=me[1];if(_e)for(var ar=0;ar<Ee;++ar)dt.push(ye=ir&&ir[ar]!==void 0?ue[q](ot[ar],ir[ar]):ue[q](ot[ar])),ye.onerror=st;else for(ar=0;ar<Ee;++ar)dt.push(ye=ue[q](ot[ar])),ye.onerror=st}function si(or){or=or.target.result,dt.forEach(function(an,aa){return an.error!=null&&(gt[aa]=an.error)}),ge({numFailures:fr,failures:gt,results:q==="delete"?G:dt.map(function(an){return an.result}),lastResult:or})}ye.onerror=function(or){st(or),si(or)},ye.onsuccess=si})},getMany:function(R){var z=R.trans,q=R.keys;return new Promise(function(G,X){G=It(G);for(var ee,ge=z.objectStore(F),we=q.length,ue=new Array(we),me=0,_e=0,ye=function(dt){dt=dt.target,ue[dt._pos]=dt.result,++_e===me&&G(ue)},Ee=Pr(X),st=0;st<we;++st)q[st]!=null&&((ee=ge.get(q[st]))._pos=st,ee.onsuccess=ye,ee.onerror=Ee,++me);me===0&&G(ue)})},get:function(R){var z=R.trans,q=R.key;return new Promise(function(G,X){G=It(G);var ee=z.objectStore(F).get(q);ee.onsuccess=function(ge){return G(ge.target.result)},ee.onerror=Pr(X)})},query:(A=P,function(R){return new Promise(function(z,q){z=It(z);var G,X,ee,me=R.trans,ge=R.values,we=R.limit,ye=R.query,ue=we===1/0?void 0:we,_e=ye.index,ye=ye.range,me=me.objectStore(F),_e=_e.isPrimaryKey?me:me.index(_e.name),ye=l(ye);if(we===0)return z({result:[]});A?((ue=ge?_e.getAll(ye,ue):_e.getAllKeys(ye,ue)).onsuccess=function(Ee){return z({result:Ee.target.result})},ue.onerror=Pr(q)):(G=0,X=!ge&&"openKeyCursor"in _e?_e.openKeyCursor(ye):_e.openCursor(ye),ee=[],X.onsuccess=function(Ee){var st=X.result;return st?(ee.push(ge?st.value:st.primaryKey),++G===we?z({result:ee}):void st.continue()):z({result:ee})},X.onerror=Pr(q))})}),openCursor:function(R){var z=R.trans,q=R.values,G=R.query,X=R.reverse,ee=R.unique;return new Promise(function(ge,we){ge=It(ge);var _e=G.index,ue=G.range,me=z.objectStore(F),me=_e.isPrimaryKey?me:me.index(_e.name),_e=X?ee?"prevunique":"prev":ee?"nextunique":"next",ye=!q&&"openKeyCursor"in me?me.openKeyCursor(l(ue),_e):me.openCursor(l(ue),_e);ye.onerror=Pr(we),ye.onsuccess=It(function(Ee){var st,dt,gt,fr,ot=ye.result;ot?(ot.___id=++Ks,ot.done=!1,st=ot.continue.bind(ot),dt=(dt=ot.continuePrimaryKey)&&dt.bind(ot),gt=ot.advance.bind(ot),fr=function(){throw new Error("Cursor not stopped")},ot.trans=z,ot.stop=ot.continue=ot.continuePrimaryKey=ot.advance=function(){throw new Error("Cursor not started")},ot.fail=It(we),ot.next=function(){var ir=this,ar=1;return this.start(function(){return ar--?ir.continue():ir.stop()}).then(function(){return ir})},ot.start=function(ir){function ar(){if(ye.result)try{ir()}catch(or){ot.fail(or)}else ot.done=!0,ot.start=function(){throw new Error("Cursor behind last entry")},ot.stop()}var si=new Promise(function(or,an){or=It(or),ye.onerror=Pr(an),ot.fail=an,ot.stop=function(aa){ot.stop=ot.continue=ot.continuePrimaryKey=ot.advance=fr,or(aa)}});return ye.onsuccess=It(function(or){ye.onsuccess=ar,ar()}),ot.continue=st,ot.continuePrimaryKey=dt,ot.advance=gt,ar(),si},ge(ot)):ge(null)},we)})},count:function(R){var z=R.query,q=R.trans,G=z.index,X=z.range;return new Promise(function(ee,ge){var we=q.objectStore(F),ue=G.isPrimaryKey?we:we.index(G.name),we=l(X),ue=we?ue.count(we):ue.count();ue.onsuccess=It(function(me){return ee(me.target.result)}),ue.onerror=Pr(ge)})}}}var h,m,b,L=(m=I,b=ao((h=t).objectStoreNames),{schema:{name:h.name,tables:b.map(function(j){return m.objectStore(j)}).map(function(j){var A=j.keyPath,z=j.autoIncrement,F=g(A),R={},z={name:j.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:A==null,compound:F,keyPath:A,autoIncrement:z,unique:!0,extractKey:Vi(A)},indexes:ao(j.indexNames).map(function(q){return j.index(q)}).map(function(ee){var G=ee.name,X=ee.unique,ge=ee.multiEntry,ee=ee.keyPath,ge={name:G,compound:g(ee),keyPath:ee,unique:X,multiEntry:ge,extractKey:Vi(ee)};return R[Dn(ee)]=ge}),getIndexByKeyPath:function(q){return R[Dn(q)]}};return R[":id"]=z.primaryKey,A!=null&&(R[Dn(A)]=z.primaryKey),z})},hasGetAll:0<b.length&&"getAll"in m.objectStore(b[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),I=L.schema,P=L.hasGetAll,L=I.tables.map(c),x={};return L.forEach(function(j){return x[j.name]=j}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(j){if(!x[j])throw new Error("Table '".concat(j,"' not found"));return x[j]},MIN_KEY:-1/0,MAX_KEY:Tn(r),schema:I}}function Us(t,r,o,l){var c=o.IDBKeyRange;return o.indexedDB,{dbcore:(l=Hs(r,c,l),t.dbcore.reduce(function(h,m){return m=m.create,a(a({},h),m(h))},l))}}function Qn(t,l){var o=l.db,l=Us(t._middlewares,o,t._deps,l);t.core=l.dbcore,t.tables.forEach(function(c){var h=c.name;t.core.schema.tables.some(function(m){return m.name===h})&&(c.core=t.core.table(h),t[h]instanceof t.Table&&(t[h].core=c.core))})}function Xn(t,r,o,l){o.forEach(function(c){var h=l[c];r.forEach(function(m){var b=(function I(P,L){return N(P,L)||(P=p(P))&&I(P,L)})(m,c);(!b||"value"in b&&b.value===void 0)&&(m===t.Transaction.prototype||m instanceof t.Transaction?_(m,c,{get:function(){return this.table(c)},set:function(I){S(this,c,{value:I,writable:!0,configurable:!0,enumerable:!0})}}):m[c]=new t.Table(c,h))})})}function qi(t,r){r.forEach(function(o){for(var l in o)o[l]instanceof t.Table&&delete o[l]})}function Gs(t,r){return t._cfg.version-r._cfg.version}function Ws(t,r,o,l){var c=t._dbSchema;o.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=ji("$meta",so("")[0],[]),t._storeNames.push("$meta"));var h=t._createTransaction("readwrite",t._storeNames,c);h.create(o),h._completion.catch(l);var m=h._reject.bind(h),b=$.transless||$;gr(function(){return $.trans=h,$.transless=b,r!==0?(Qn(t,o),P=r,((I=h).storeNames.includes("$meta")?I.table("$meta").get("version").then(function(L){return L??P}):se.resolve(P)).then(function(L){return j=L,A=h,F=o,R=[],L=(x=t)._versions,z=x._dbSchema=$n(0,x.idbdb,F),(L=L.filter(function(q){return q._cfg.version>=j})).length!==0?(L.forEach(function(q){R.push(function(){var G=z,X=q._cfg.dbschema;ei(x,G,F),ei(x,X,F),z=x._dbSchema=X;var ee=Ki(G,X);ee.add.forEach(function(_e){Hi(F,_e[0],_e[1].primKey,_e[1].indexes)}),ee.change.forEach(function(_e){if(_e.recreate)throw new oe.Upgrade("Not yet support for changing primary key");var ye=F.objectStore(_e.name);_e.add.forEach(function(Ee){return Zn(ye,Ee)}),_e.change.forEach(function(Ee){ye.deleteIndex(Ee.name),Zn(ye,Ee)}),_e.del.forEach(function(Ee){return ye.deleteIndex(Ee)})});var ge=q._cfg.contentUpgrade;if(ge&&q._cfg.version>j){Qn(x,F),A._memoizedTables={};var we=De(X);ee.del.forEach(function(_e){we[_e]=G[_e]}),qi(x,[x.Transaction.prototype]),Xn(x,[x.Transaction.prototype],d(we),we),A.schema=we;var ue,me=qe(ge);return me&&jr(),ee=se.follow(function(){var _e;(ue=ge(A))&&me&&(_e=Ir.bind(null,null),ue.then(_e,_e))}),ue&&typeof ue.then=="function"?se.resolve(ue):ee.then(function(){return ue})}}),R.push(function(G){var X,ee,ge=q._cfg.dbschema;X=ge,ee=G,[].slice.call(ee.db.objectStoreNames).forEach(function(we){return X[we]==null&&ee.db.deleteObjectStore(we)}),qi(x,[x.Transaction.prototype]),Xn(x,[x.Transaction.prototype],x._storeNames,x._dbSchema),A.schema=x._dbSchema}),R.push(function(G){x.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(x.idbdb.version/10)===q._cfg.version?(x.idbdb.deleteObjectStore("$meta"),delete x._dbSchema.$meta,x._storeNames=x._storeNames.filter(function(X){return X!=="$meta"})):G.objectStore("$meta").put(q._cfg.version,"version"))})}),(function q(){return R.length?se.resolve(R.shift()(A.idbtrans)).then(q):se.resolve()})().then(function(){oo(z,F)})):se.resolve();var x,j,A,F,R,z}).catch(m)):(d(c).forEach(function(L){Hi(o,L,c[L].primKey,c[L].indexes)}),Qn(t,o),void se.follow(function(){return t.on.populate.fire(h)}).catch(m));var I,P})}function Ys(t,r){oo(t._dbSchema,r),r.db.version%10!=0||r.objectStoreNames.contains("$meta")||r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var o=$n(0,t.idbdb,r);ei(t,t._dbSchema,r);for(var l=0,c=Ki(o,t._dbSchema).change;l<c.length;l++){var h=(function(m){if(m.change.length||m.recreate)return console.warn("Unable to patch indexes of table ".concat(m.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=r.objectStore(m.name);m.add.forEach(function(I){at&&console.debug("Dexie upgrade patch: Creating missing index ".concat(m.name,".").concat(I.src)),Zn(b,I)})})(c[l]);if(typeof h=="object")return h.value}}function Ki(t,r){var o,l={del:[],add:[],change:[]};for(o in t)r[o]||l.del.push(o);for(o in r){var c=t[o],h=r[o];if(c){var m={name:o,def:h,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(h.primKey.keyPath||"")||c.primKey.auto!==h.primKey.auto)m.recreate=!0,l.change.push(m);else{var b=c.idxByName,I=h.idxByName,P=void 0;for(P in b)I[P]||m.del.push(P);for(P in I){var L=b[P],x=I[P];L?L.src!==x.src&&m.change.push(x):m.add.push(x)}(0<m.del.length||0<m.add.length||0<m.change.length)&&l.change.push(m)}}else l.add.push([o,h])}return l}function Hi(t,r,o,l){var c=t.db.createObjectStore(r,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return l.forEach(function(h){return Zn(c,h)}),c}function oo(t,r){d(t).forEach(function(o){r.db.objectStoreNames.contains(o)||(at&&console.debug("Dexie: Creating missing table",o),Hi(r,o,t[o].primKey,t[o].indexes))})}function Zn(t,r){t.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function $n(t,r,o){var l={};return M(r.objectStoreNames,0).forEach(function(c){for(var h=o.objectStore(c),m=zi(io(P=h.keyPath),P||"",!0,!1,!!h.autoIncrement,P&&typeof P!="string",!0),b=[],I=0;I<h.indexNames.length;++I){var L=h.index(h.indexNames[I]),P=L.keyPath,L=zi(L.name,P,!!L.unique,!!L.multiEntry,!1,P&&typeof P!="string",!1);b.push(L)}l[c]=ji(c,m,b)}),l}function ei(t,r,o){for(var l=o.db.objectStoreNames,c=0;c<l.length;++c){var h=l[c],m=o.objectStore(h);t._hasGetAll="getAll"in m;for(var b=0;b<m.indexNames.length;++b){var I=m.indexNames[b],P=m.index(I).keyPath,L=typeof P=="string"?P:"["+M(P).join("+")+"]";!r[h]||(P=r[h].idxByName[L])&&(P.name=I,delete r[h].idxByName[L],r[h].idxByName[I]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function so(t){return t.split(",").map(function(r,o){var h=r.split(":"),l=(c=h[1])===null||c===void 0?void 0:c.trim(),c=(r=h[0].trim()).replace(/([&*]|\+\+)/g,""),h=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return zi(c,h||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),g(h),o===0,l)})}var Js=(gn.prototype._createTableSchema=ji,gn.prototype._parseIndexSyntax=so,gn.prototype._parseStoresSpec=function(t,r){var o=this;d(t).forEach(function(l){if(t[l]!==null){var c=o._parseIndexSyntax(t[l]),h=c.shift();if(!h)throw new oe.Schema("Invalid schema for table "+l+": "+t[l]);if(h.unique=!0,h.multi)throw new oe.Schema("Primary key cannot be multiEntry*");c.forEach(function(m){if(m.auto)throw new oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!m.keyPath)throw new oe.Schema("Index must have a name and cannot be an empty string")}),c=o._createTableSchema(l,h,c),r[l]=c}})},gn.prototype.stores=function(o){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,o):o;var o=r._versions,l={},c={};return o.forEach(function(h){y(l,h._cfg.storesSource),c=h._cfg.dbschema={},h._parseStoresSpec(l,c)}),r._dbSchema=c,qi(r,[r._allTables,r,r.Transaction.prototype]),Xn(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],d(c),c),r._storeNames=d(c),this},gn.prototype.upgrade=function(t){return this._cfg.contentUpgrade=mt(this._cfg.contentUpgrade||Ie,t),this},gn);function gn(){}function Ui(t,r){var o=t._dbNamesDB;return o||(o=t._dbNamesDB=new Rr(Hn,{addons:[],indexedDB:t,IDBKeyRange:r})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function Gi(t){return t&&typeof t.databases=="function"}function Wi(t){return gr(function(){return $.letThrough=!0,t()})}function Yi(t){return!("from"in t)}var nr=function(t,r){if(!this){var o=new nr;return t&&"d"in t&&y(o,t),o}y(this,arguments.length?{d:1,from:t,to:1<arguments.length?r:t}:{d:0})};function En(t,r,o){var l=bt(r,o);if(!isNaN(l)){if(0<l)throw RangeError();if(Yi(t))return y(t,{from:r,to:o,d:1});var c=t.l,l=t.r;if(bt(o,t.from)<0)return c?En(c,r,o):t.l={from:r,to:o,d:1,l:null,r:null},co(t);if(0<bt(r,t.to))return l?En(l,r,o):t.r={from:r,to:o,d:1,l:null,r:null},co(t);bt(r,t.from)<0&&(t.from=r,t.l=null,t.d=l?l.d+1:1),0<bt(o,t.to)&&(t.to=o,t.r=null,t.d=t.l?t.l.d+1:1),o=!t.r,c&&!t.l&&On(t,c),l&&o&&On(t,l)}}function On(t,r){Yi(r)||(function o(l,I){var h=I.from,m=I.to,b=I.l,I=I.r;En(l,h,m),b&&o(l,b),I&&o(l,I)})(t,r)}function lo(t,r){var o=ti(r),l=o.next();if(l.done)return!1;for(var c=l.value,h=ti(t),m=h.next(c.from),b=m.value;!l.done&&!m.done;){if(bt(b.from,c.to)<=0&&0<=bt(b.to,c.from))return!0;bt(c.from,b.from)<0?c=(l=o.next(b.from)).value:b=(m=h.next(c.from)).value}return!1}function ti(t){var r=Yi(t)?null:{s:0,n:t};return{next:function(o){for(var l=0<arguments.length;r;)switch(r.s){case 0:if(r.s=1,l)for(;r.n.l&&bt(o,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!l||bt(o,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function co(t){var r,o,l=(((r=t.r)===null||r===void 0?void 0:r.d)||0)-(((o=t.l)===null||o===void 0?void 0:o.d)||0),c=1<l?"r":l<-1?"l":"";c&&(r=c=="r"?"l":"r",o=a({},t),l=t[c],t.from=l.from,t.to=l.to,t[c]=l[c],o[c]=l[r],(t[r]=o).d=uo(o)),t.d=uo(t)}function uo(o){var r=o.r,o=o.l;return(r?o?Math.max(r.d,o.d):r.d:o?o.d:0)+1}function ri(t,r){return d(r).forEach(function(o){t[o]?On(t[o],r[o]):t[o]=(function l(c){var h,m,b={};for(h in c)D(c,h)&&(m=c[h],b[h]=!m||typeof m!="object"||ce.has(m.constructor)?m:l(m));return b})(r[o])}),t}function Ji(t,r){return t.all||r.all||Object.keys(t).some(function(o){return r[o]&&lo(r[o],t[o])})}k(nr.prototype,((pr={add:function(t){return On(this,t),this},addKey:function(t){return En(this,t,t),this},addKeys:function(t){var r=this;return t.forEach(function(o){return En(r,o,o)}),this},hasKey:function(t){var r=ti(this).next(t).value;return r&&bt(r.from,t)<=0&&0<=bt(r.to,t)}})[Ve]=function(){return ti(this)},pr));var rn={},Qi={},Xi=!1;function ni(t){ri(Qi,t),Xi||(Xi=!0,setTimeout(function(){Xi=!1,Zi(Qi,!(Qi={}))},0))}function Zi(t,r){r===void 0&&(r=!1);var o=new Set;if(t.all)for(var l=0,c=Object.values(rn);l<c.length;l++)fo(m=c[l],t,o,r);else for(var h in t){var m,b=/^idb\:\/\/(.*)\/(.*)\//.exec(h);b&&(h=b[1],b=b[2],(m=rn["idb://".concat(h,"/").concat(b)])&&fo(m,t,o,r))}o.forEach(function(I){return I()})}function fo(t,r,o,l){for(var c=[],h=0,m=Object.entries(t.queries.query);h<m.length;h++){for(var b=m[h],I=b[0],P=[],L=0,x=b[1];L<x.length;L++){var j=x[L];Ji(r,j.obsSet)?j.subscribers.forEach(function(z){return o.add(z)}):l&&P.push(j)}l&&c.push([I,P])}if(l)for(var A=0,F=c;A<F.length;A++){var R=F[A],I=R[0],P=R[1];t.queries.query[I]=P}}function Qs(t){var r=t._state,o=t._deps.indexedDB;if(r.isBeingOpened||t.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?Ht(r.dbOpenError):t});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var l=r.openCanceller,c=Math.round(10*t.verno),h=!1;function m(){if(r.openCanceller!==l)throw new oe.DatabaseClosed("db.open() was cancelled")}function b(){return new se(function(j,A){if(m(),!o)throw new oe.MissingAPI;var F=t.name,R=r.autoSchema||!c?o.open(F):o.open(F,c);if(!R)throw new oe.MissingAPI;R.onerror=Pr(A),R.onblocked=It(t._fireOnBlocked),R.onupgradeneeded=It(function(z){var q;L=R.transaction,r.autoSchema&&!t._options.allowEmptyDB?(R.onerror=Pn,L.abort(),R.result.close(),(q=o.deleteDatabase(F)).onsuccess=q.onerror=It(function(){A(new oe.NoSuchDatabase("Database ".concat(F," doesnt exist")))})):(L.onerror=Pr(A),z=z.oldVersion>Math.pow(2,62)?0:z.oldVersion,x=z<1,t.idbdb=R.result,h&&Ys(t,L),Ws(t,z/10,L,A))},A),R.onsuccess=It(function(){L=null;var z,q,G,X,ee,ge=t.idbdb=R.result,we=M(ge.objectStoreNames);if(0<we.length)try{var ue=ge.transaction((X=we).length===1?X[0]:X,"readonly");if(r.autoSchema)q=ge,G=ue,(z=t).verno=q.version/10,G=z._dbSchema=$n(0,q,G),z._storeNames=M(q.objectStoreNames,0),Xn(z,[z._allTables],d(G),G);else if(ei(t,t._dbSchema,ue),((ee=Ki($n(0,(ee=t).idbdb,ue),ee._dbSchema)).add.length||ee.change.some(function(me){return me.add.length||me.change.length}))&&!h)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ge.close(),c=ge.version+1,h=!0,j(b());Qn(t,ue)}catch{}fn.push(t),ge.onversionchange=It(function(me){r.vcFired=!0,t.on("versionchange").fire(me)}),ge.onclose=It(function(){t.close({disableAutoOpen:!1})}),x&&(ee=t._deps,ue=F,ge=ee.indexedDB,ee=ee.IDBKeyRange,Gi(ge)||ue===Hn||Ui(ge,ee).put({name:ue}).catch(Ie)),j()},A)}).catch(function(j){switch(j?.name){case"UnknownError":if(0<r.PR1398_maxLoop)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(0<c)return c=0,b()}return se.reject(j)})}var I,P=r.dbReadyResolve,L=null,x=!1;return se.race([l,(typeof navigator>"u"?se.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(j){function A(){return indexedDB.databases().finally(j)}I=setInterval(A,100),A()}).finally(function(){return clearInterval(I)}):Promise.resolve()).then(b)]).then(function(){return m(),r.onReadyBeingFired=[],se.resolve(Wi(function(){return t.on.ready.fire(t.vip)})).then(function j(){if(0<r.onReadyBeingFired.length){var A=r.onReadyBeingFired.reduce(mt,Ie);return r.onReadyBeingFired=[],se.resolve(Wi(function(){return A(t.vip)})).then(j)}})}).finally(function(){r.openCanceller===l&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(j){r.dbOpenError=j;try{L&&L.abort()}catch{}return l===r.openCanceller&&t._close(),Ht(j)}).finally(function(){r.openComplete=!0,P()}).then(function(){var j;return x&&(j={},t.tables.forEach(function(A){A.schema.indexes.forEach(function(F){F.name&&(j["idb://".concat(t.name,"/").concat(A.name,"/").concat(F.name)]=new nr(-1/0,[[[]]]))}),j["idb://".concat(t.name,"/").concat(A.name,"/")]=j["idb://".concat(t.name,"/").concat(A.name,"/:dels")]=new nr(-1/0,[[[]]])}),qr(An).fire(j),Zi(j,!0)),t})}function $i(t){function r(h){return t.next(h)}var o=c(r),l=c(function(h){return t.throw(h)});function c(h){return function(I){var b=h(I),I=b.value;return b.done?I:I&&typeof I.then=="function"?I.then(o,l):g(I)?Promise.all(I).then(o,l):o(I)}}return c(r)()}function ii(t,r,o){for(var l=g(t)?t.slice():[t],c=0;c<o;++c)l.push(r);return l}var Xs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return a(a({},t),{table:function(r){var o=t.table(r),l=o.schema,c={},h=[];function m(x,j,A){var F=Dn(x),R=c[F]=c[F]||[],z=x==null?0:typeof x=="string"?1:x.length,q=0<j,q=a(a({},A),{name:q?"".concat(F,"(virtual-from:").concat(A.name,")"):A.name,lowLevelIndex:A,isVirtual:q,keyTail:j,keyLength:z,extractKey:Vi(x),unique:!q&&A.unique});return R.push(q),q.isPrimaryKey||h.push(q),1<z&&m(z===2?x[0]:x.slice(0,z-1),j+1,A),R.sort(function(G,X){return G.keyTail-X.keyTail}),q}r=m(l.primaryKey.keyPath,0,l.primaryKey),c[":id"]=[r];for(var b=0,I=l.indexes;b<I.length;b++){var P=I[b];m(P.keyPath,0,P)}function L(x){var j,A=x.query.index;return A.isVirtual?a(a({},x),{query:{index:A.lowLevelIndex,range:(j=x.query.range,A=A.keyTail,{type:j.type===1?2:j.type,lower:ii(j.lower,j.lowerOpen?t.MAX_KEY:t.MIN_KEY,A),lowerOpen:!0,upper:ii(j.upper,j.upperOpen?t.MIN_KEY:t.MAX_KEY,A),upperOpen:!0})}}):x}return a(a({},o),{schema:a(a({},l),{primaryKey:r,indexes:h,getIndexByKeyPath:function(x){return(x=c[Dn(x)])&&x[0]}}),count:function(x){return o.count(L(x))},query:function(x){return o.query(L(x))},openCursor:function(x){var j=x.query.index,A=j.keyTail,F=j.isVirtual,R=j.keyLength;return F?o.openCursor(L(x)).then(function(q){return q&&z(q)}):o.openCursor(x);function z(q){return Object.create(q,{continue:{value:function(G){G!=null?q.continue(ii(G,x.reverse?t.MAX_KEY:t.MIN_KEY,A)):x.unique?q.continue(q.key.slice(0,R).concat(x.reverse?t.MIN_KEY:t.MAX_KEY,A)):q.continue()}},continuePrimaryKey:{value:function(G,X){q.continuePrimaryKey(ii(G,t.MAX_KEY,A),X)}},primaryKey:{get:function(){return q.primaryKey}},key:{get:function(){var G=q.key;return R===1?G[0]:G.slice(0,R)}},value:{get:function(){return q.value}}})}}})}})}};function ea(t,r,o,l){return o=o||{},l=l||"",d(t).forEach(function(c){var h,m,b;D(r,c)?(h=t[c],m=r[c],typeof h=="object"&&typeof m=="object"&&h&&m?(b=Ze(h))!==Ze(m)?o[l+c]=r[c]:b==="Object"?ea(h,m,o,l+c+"."):h!==m&&(o[l+c]=r[c]):h!==m&&(o[l+c]=r[c])):o[l+c]=void 0}),d(r).forEach(function(c){D(t,c)||(o[l+c]=r[c])}),o}function ta(t,r){return r.type==="delete"?r.keys:r.keys||r.values.map(t.extractKey)}var Zs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return a(a({},t),{table:function(r){var o=t.table(r),l=o.schema.primaryKey;return a(a({},o),{mutate:function(c){var h=$.trans,m=h.table(r).hook,b=m.deleting,I=m.creating,P=m.updating;switch(c.type){case"add":if(I.fire===Ie)break;return h._promise("readwrite",function(){return L(c)},!0);case"put":if(I.fire===Ie&&P.fire===Ie)break;return h._promise("readwrite",function(){return L(c)},!0);case"delete":if(b.fire===Ie)break;return h._promise("readwrite",function(){return L(c)},!0);case"deleteRange":if(b.fire===Ie)break;return h._promise("readwrite",function(){return(function x(j,A,F){return o.query({trans:j,values:!1,query:{index:l,range:A},limit:F}).then(function(R){var z=R.result;return L({type:"delete",keys:z,trans:j}).then(function(q){return 0<q.numFailures?Promise.reject(q.failures[0]):z.length<F?{failures:[],numFailures:0,lastResult:void 0}:x(j,a(a({},A),{lower:z[z.length-1],lowerOpen:!0}),F)})})})(c.trans,c.range,1e4)},!0)}return o.mutate(c);function L(x){var j,A,F,R=$.trans,z=x.keys||ta(l,x);if(!z)throw new Error("Keys missing");return(x=x.type==="add"||x.type==="put"?a(a({},x),{keys:z}):a({},x)).type!=="delete"&&(x.values=s([],x.values)),x.keys&&(x.keys=s([],x.keys)),j=o,F=z,((A=x).type==="add"?Promise.resolve([]):j.getMany({trans:A.trans,keys:F,cache:"immutable"})).then(function(q){var G=z.map(function(X,ee){var ge,we,ue,me=q[ee],_e={onerror:null,onsuccess:null};return x.type==="delete"?b.fire.call(_e,X,me,R):x.type==="add"||me===void 0?(ge=I.fire.call(_e,X,x.values[ee],R),X==null&&ge!=null&&(x.keys[ee]=X=ge,l.outbound||le(x.values[ee],l.keyPath,X))):(ge=ea(me,x.values[ee]),(we=P.fire.call(_e,ge,X,me,R))&&(ue=x.values[ee],Object.keys(we).forEach(function(ye){D(ue,ye)?ue[ye]=we[ye]:le(ue,ye,we[ye])}))),_e});return o.mutate(x).then(function(X){for(var ee=X.failures,ge=X.results,we=X.numFailures,X=X.lastResult,ue=0;ue<z.length;++ue){var me=(ge||z)[ue],_e=G[ue];me==null?_e.onerror&&_e.onerror(ee[ue]):_e.onsuccess&&_e.onsuccess(x.type==="put"&&q[ue]?x.values[ue]:me)}return{failures:ee,results:ge,numFailures:we,lastResult:X}}).catch(function(X){return G.forEach(function(ee){return ee.onerror&&ee.onerror(X)}),Promise.reject(X)})})}}})}})}};function ho(t,r,o){try{if(!r||r.keys.length<t.length)return null;for(var l=[],c=0,h=0;c<r.keys.length&&h<t.length;++c)bt(r.keys[c],t[h])===0&&(l.push(o?pe(r.values[c]):r.values[c]),++h);return l.length===t.length?l:null}catch{return null}}var $s={stack:"dbcore",level:-1,create:function(t){return{table:function(r){var o=t.table(r);return a(a({},o),{getMany:function(l){if(!l.cache)return o.getMany(l);var c=ho(l.keys,l.trans._cache,l.cache==="clone");return c?se.resolve(c):o.getMany(l).then(function(h){return l.trans._cache={keys:l.keys,values:l.cache==="clone"?pe(h):h},h})},mutate:function(l){return l.type!=="add"&&(l.trans._cache=null),o.mutate(l)}})}}}};function vo(t,r){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function go(t,r){switch(t){case"query":return r.values&&!r.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var el={stack:"dbcore",level:0,name:"Observability",create:function(t){var r=t.schema.name,o=new nr(t.MIN_KEY,t.MAX_KEY);return a(a({},t),{transaction:function(l,c,h){if($.subscr&&c!=="readonly")throw new oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($.querier));return t.transaction(l,c,h)},table:function(l){var c=t.table(l),h=c.schema,m=h.primaryKey,x=h.indexes,b=m.extractKey,I=m.outbound,P=m.autoIncrement&&x.filter(function(A){return A.compound&&A.keyPath.includes(m.keyPath)}),L=a(a({},c),{mutate:function(A){function F(ye){return ye="idb://".concat(r,"/").concat(l,"/").concat(ye),X[ye]||(X[ye]=new nr)}var R,z,q,G=A.trans,X=A.mutatedParts||(A.mutatedParts={}),ee=F(""),ge=F(":dels"),we=A.type,_e=A.type==="deleteRange"?[A.range]:A.type==="delete"?[A.keys]:A.values.length<50?[ta(m,A).filter(function(ye){return ye}),A.values]:[],ue=_e[0],me=_e[1],_e=A.trans._cache;return g(ue)?(ee.addKeys(ue),(_e=we==="delete"||ue.length===me.length?ho(ue,_e):null)||ge.addKeys(ue),(_e||me)&&(R=F,z=_e,q=me,h.indexes.forEach(function(ye){var Ee=R(ye.name||"");function st(gt){return gt!=null?ye.extractKey(gt):null}function dt(gt){return ye.multiEntry&&g(gt)?gt.forEach(function(fr){return Ee.addKey(fr)}):Ee.addKey(gt)}(z||q).forEach(function(gt,ir){var ot=z&&st(z[ir]),ir=q&&st(q[ir]);bt(ot,ir)!==0&&(ot!=null&&dt(ot),ir!=null&&dt(ir))})}))):ue?(me={from:(me=ue.lower)!==null&&me!==void 0?me:t.MIN_KEY,to:(me=ue.upper)!==null&&me!==void 0?me:t.MAX_KEY},ge.add(me),ee.add(me)):(ee.add(o),ge.add(o),h.indexes.forEach(function(ye){return F(ye.name).add(o)})),c.mutate(A).then(function(ye){return!ue||A.type!=="add"&&A.type!=="put"||(ee.addKeys(ye.results),P&&P.forEach(function(Ee){for(var st=A.values.map(function(ot){return Ee.extractKey(ot)}),dt=Ee.keyPath.findIndex(function(ot){return ot===m.keyPath}),gt=0,fr=ye.results.length;gt<fr;++gt)st[gt][dt]=ye.results[gt];F(Ee.name).addKeys(st)})),G.mutatedParts=ri(G.mutatedParts||{},X),ye})}}),x=function(F){var R=F.query,F=R.index,R=R.range;return[F,new nr((F=R.lower)!==null&&F!==void 0?F:t.MIN_KEY,(R=R.upper)!==null&&R!==void 0?R:t.MAX_KEY)]},j={get:function(A){return[m,new nr(A.key)]},getMany:function(A){return[m,new nr().addKeys(A.keys)]},count:x,query:x,openCursor:x};return d(j).forEach(function(A){L[A]=function(F){var R=$.subscr,z=!!R,q=vo($,c)&&go(A,F)?F.obsSet={}:R;if(z){var G=function(me){return me="idb://".concat(r,"/").concat(l,"/").concat(me),q[me]||(q[me]=new nr)},X=G(""),ee=G(":dels"),R=j[A](F),z=R[0],R=R[1];if((A==="query"&&z.isPrimaryKey&&!F.values?ee:G(z.name||"")).add(R),!z.isPrimaryKey){if(A!=="count"){var ge=A==="query"&&I&&F.values&&c.query(a(a({},F),{values:!1}));return c[A].apply(this,arguments).then(function(me){if(A==="query"){if(I&&F.values)return ge.then(function(st){return st=st.result,X.addKeys(st),me});var _e=F.values?me.result.map(b):me.result;(F.values?X:ee).addKeys(_e)}else if(A==="openCursor"){var ye=me,Ee=F.values;return ye&&Object.create(ye,{key:{get:function(){return ee.addKey(ye.primaryKey),ye.key}},primaryKey:{get:function(){var st=ye.primaryKey;return ee.addKey(st),st}},value:{get:function(){return Ee&&X.addKey(ye.primaryKey),ye.value}}})}return me})}ee.add(o)}}return c[A].apply(this,arguments)}}),L}})}};function mo(t,r,o){if(o.numFailures===0)return r;if(r.type==="deleteRange")return null;var l=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return o.numFailures===l?null:(r=a({},r),g(r.keys)&&(r.keys=r.keys.filter(function(c,h){return!(h in o.failures)})),"values"in r&&g(r.values)&&(r.values=r.values.filter(function(c,h){return!(h in o.failures)})),r)}function ra(t,r){return o=t,((l=r).lower===void 0||(l.lowerOpen?0<bt(o,l.lower):0<=bt(o,l.lower)))&&(t=t,(r=r).upper===void 0||(r.upperOpen?bt(t,r.upper)<0:bt(t,r.upper)<=0));var o,l}function po(t,r,j,l,c,h){if(!j||j.length===0)return t;var m=r.query.index,b=m.multiEntry,I=r.query.range,P=l.schema.primaryKey.extractKey,L=m.extractKey,x=(m.lowLevelIndex||m).extractKey,j=j.reduce(function(A,F){var R=A,z=[];if(F.type==="add"||F.type==="put")for(var q=new nr,G=F.values.length-1;0<=G;--G){var X,ee=F.values[G],ge=P(ee);q.hasKey(ge)||(X=L(ee),(b&&g(X)?X.some(function(ye){return ra(ye,I)}):ra(X,I))&&(q.addKey(ge),z.push(ee)))}switch(F.type){case"add":var we=new nr().addKeys(r.values?A.map(function(Ee){return P(Ee)}):A),R=A.concat(r.values?z.filter(function(Ee){return Ee=P(Ee),!we.hasKey(Ee)&&(we.addKey(Ee),!0)}):z.map(function(Ee){return P(Ee)}).filter(function(Ee){return!we.hasKey(Ee)&&(we.addKey(Ee),!0)}));break;case"put":var ue=new nr().addKeys(F.values.map(function(Ee){return P(Ee)}));R=A.filter(function(Ee){return!ue.hasKey(r.values?P(Ee):Ee)}).concat(r.values?z:z.map(function(Ee){return P(Ee)}));break;case"delete":var me=new nr().addKeys(F.keys);R=A.filter(function(Ee){return!me.hasKey(r.values?P(Ee):Ee)});break;case"deleteRange":var _e=F.range;R=A.filter(function(Ee){return!ra(P(Ee),_e)})}return R},t);return j===t?t:(j.sort(function(A,F){return bt(x(A),x(F))||bt(P(A),P(F))}),r.limit&&r.limit<1/0&&(j.length>r.limit?j.length=r.limit:t.length===r.limit&&j.length<r.limit&&(c.dirty=!0)),h?Object.freeze(j):j)}function yo(t,r){return bt(t.lower,r.lower)===0&&bt(t.upper,r.upper)===0&&!!t.lowerOpen==!!r.lowerOpen&&!!t.upperOpen==!!r.upperOpen}function tl(t,r){return(function(o,l,c,h){if(o===void 0)return l!==void 0?-1:0;if(l===void 0)return 1;if((l=bt(o,l))===0){if(c&&h)return 0;if(c)return 1;if(h)return-1}return l})(t.lower,r.lower,t.lowerOpen,r.lowerOpen)<=0&&0<=(function(o,l,c,h){if(o===void 0)return l!==void 0?1:0;if(l===void 0)return-1;if((l=bt(o,l))===0){if(c&&h)return 0;if(c)return-1;if(h)return 1}return l})(t.upper,r.upper,t.upperOpen,r.upperOpen)}function rl(t,r,o,l){t.subscribers.add(o),l.addEventListener("abort",function(){var c,h;t.subscribers.delete(o),t.subscribers.size===0&&(c=t,h=r,setTimeout(function(){c.subscribers.size===0&&ze(h,c)},3e3))})}var nl={stack:"dbcore",level:0,name:"Cache",create:function(t){var r=t.schema.name;return a(a({},t),{transaction:function(o,l,c){var h,m,b=t.transaction(o,l,c);return l==="readwrite"&&(m=(h=new AbortController).signal,c=function(I){return function(){if(h.abort(),l==="readwrite"){for(var P=new Set,L=0,x=o;L<x.length;L++){var j=x[L],A=rn["idb://".concat(r,"/").concat(j)];if(A){var F=t.table(j),R=A.optimisticOps.filter(function(Ee){return Ee.trans===b});if(b._explicit&&I&&b.mutatedParts)for(var z=0,q=Object.values(A.queries.query);z<q.length;z++)for(var G=0,X=(we=q[z]).slice();G<X.length;G++)Ji((ue=X[G]).obsSet,b.mutatedParts)&&(ze(we,ue),ue.subscribers.forEach(function(Ee){return P.add(Ee)}));else if(0<R.length){A.optimisticOps=A.optimisticOps.filter(function(Ee){return Ee.trans!==b});for(var ee=0,ge=Object.values(A.queries.query);ee<ge.length;ee++)for(var we,ue,me,_e=0,ye=(we=ge[ee]).slice();_e<ye.length;_e++)(ue=ye[_e]).res!=null&&b.mutatedParts&&(I&&!ue.dirty?(me=Object.isFrozen(ue.res),me=po(ue.res,ue.req,R,F,ue,me),ue.dirty?(ze(we,ue),ue.subscribers.forEach(function(Ee){return P.add(Ee)})):me!==ue.res&&(ue.res=me,ue.promise=se.resolve({result:me}))):(ue.dirty&&ze(we,ue),ue.subscribers.forEach(function(Ee){return P.add(Ee)})))}}}P.forEach(function(Ee){return Ee()})}}},b.addEventListener("abort",c(!1),{signal:m}),b.addEventListener("error",c(!1),{signal:m}),b.addEventListener("complete",c(!0),{signal:m})),b},table:function(o){var l=t.table(o),c=l.schema.primaryKey;return a(a({},l),{mutate:function(h){var m=$.trans;if(c.outbound||m.db._options.cache==="disabled"||m.explicit||m.idbtrans.mode!=="readwrite")return l.mutate(h);var b=rn["idb://".concat(r,"/").concat(o)];return b?(m=l.mutate(h),h.type!=="add"&&h.type!=="put"||!(50<=h.values.length||ta(c,h).some(function(I){return I==null}))?(b.optimisticOps.push(h),h.mutatedParts&&ni(h.mutatedParts),m.then(function(I){0<I.numFailures&&(ze(b.optimisticOps,h),(I=mo(0,h,I))&&b.optimisticOps.push(I),h.mutatedParts&&ni(h.mutatedParts))}),m.catch(function(){ze(b.optimisticOps,h),h.mutatedParts&&ni(h.mutatedParts)})):m.then(function(I){var P=mo(0,a(a({},h),{values:h.values.map(function(L,x){var j;return I.failures[x]?L:(L=(j=c.keyPath)!==null&&j!==void 0&&j.includes(".")?pe(L):a({},L),le(L,c.keyPath,I.results[x]),L)})}),I);b.optimisticOps.push(P),queueMicrotask(function(){return h.mutatedParts&&ni(h.mutatedParts)})}),m):l.mutate(h)},query:function(h){if(!vo($,l)||!go("query",h))return l.query(h);var m=((P=$.trans)===null||P===void 0?void 0:P.db._options.cache)==="immutable",x=$,b=x.requery,I=x.signal,P=(function(F,R,z,q){var G=rn["idb://".concat(F,"/").concat(R)];if(!G)return[];if(!(R=G.queries[z]))return[null,!1,G,null];var X=R[(q.query?q.query.index.name:null)||""];if(!X)return[null,!1,G,null];switch(z){case"query":var ee=X.find(function(ge){return ge.req.limit===q.limit&&ge.req.values===q.values&&yo(ge.req.query.range,q.query.range)});return ee?[ee,!0,G,X]:[X.find(function(ge){return("limit"in ge.req?ge.req.limit:1/0)>=q.limit&&(!q.values||ge.req.values)&&tl(ge.req.query.range,q.query.range)}),!1,G,X];case"count":return ee=X.find(function(ge){return yo(ge.req.query.range,q.query.range)}),[ee,!!ee,G,X]}})(r,o,"query",h),L=P[0],x=P[1],j=P[2],A=P[3];return L&&x?L.obsSet=h.obsSet:(x=l.query(h).then(function(F){var R=F.result;if(L&&(L.res=R),m){for(var z=0,q=R.length;z<q;++z)Object.freeze(R[z]);Object.freeze(R)}else F.result=pe(R);return F}).catch(function(F){return A&&L&&ze(A,L),Promise.reject(F)}),L={obsSet:h.obsSet,promise:x,subscribers:new Set,type:"query",req:h,dirty:!1},A?A.push(L):(A=[L],(j=j||(rn["idb://".concat(r,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[h.query.index.name||""]=A)),rl(L,A,b,I),L.promise.then(function(F){return{result:po(F.result,h,j?.optimisticOps,l,L,m)}})}})}})}};function ai(t,r){return new Proxy(t,{get:function(o,l,c){return l==="db"?r:Reflect.get(o,l,c)}})}var Rr=(Ut.prototype.version=function(t){if(isNaN(t)||t<.1)throw new oe.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var r=this._versions,o=r.filter(function(l){return l._cfg.version===t})[0];return o||(o=new this.Version(t),r.push(o),r.sort(Gs),o.stores({}),this._state.autoSchema=!1,o)},Ut.prototype._whenReady=function(t){var r=this;return this.idbdb&&(this._state.openComplete||$.letThrough||this._vip)?t():new se(function(o,l){if(r._state.openComplete)return l(new oe.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return void l(new oe.DatabaseClosed);r.open().catch(Ie)}r._state.dbReadyPromise.then(o,l)}).then(t)},Ut.prototype.use=function(t){var r=t.stack,o=t.create,l=t.level,c=t.name;return c&&this.unuse({stack:r,name:c}),t=this._middlewares[r]||(this._middlewares[r]=[]),t.push({stack:r,create:o,level:l??10,name:c}),t.sort(function(h,m){return h.level-m.level}),this},Ut.prototype.unuse=function(t){var r=t.stack,o=t.name,l=t.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(c){return l?c.create!==l:!!o&&c.name!==o})),this},Ut.prototype.open=function(){var t=this;return xr(be,function(){return Qs(t)})},Ut.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,r=fn.indexOf(this);if(0<=r&&fn.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new se(function(o){t.dbReadyResolve=o}),t.openCanceller=new se(function(o,l){t.cancelOpen=l}))},Ut.prototype.close=function(o){var r=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;r?(o.isBeingOpened&&o.cancelOpen(new oe.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new oe.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},Ut.prototype.delete=function(t){var r=this;t===void 0&&(t={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",l=this._state;return new se(function(c,h){function m(){r.close(t);var b=r._deps.indexedDB.deleteDatabase(r.name);b.onsuccess=It(function(){var I,P,L;I=r._deps,P=r.name,L=I.indexedDB,I=I.IDBKeyRange,Gi(L)||P===Hn||Ui(L,I).delete(P).catch(Ie),c()}),b.onerror=Pr(h),b.onblocked=r._fireOnBlocked}if(o)throw new oe.InvalidArgument("Invalid closeOptions argument to db.delete()");l.isBeingOpened?l.dbReadyPromise.then(m):m()})},Ut.prototype.backendDB=function(){return this.idbdb},Ut.prototype.isOpen=function(){return this.idbdb!==null},Ut.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},Ut.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ut.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ut.prototype,"tables",{get:function(){var t=this;return d(this._allTables).map(function(r){return t._allTables[r]})},enumerable:!1,configurable:!0}),Ut.prototype.transaction=function(){var t=(function(r,o,l){var c=arguments.length;if(c<2)throw new oe.InvalidArgument("Too few arguments");for(var h=new Array(c-1);--c;)h[c-1]=arguments[c];return l=h.pop(),[r,ne(h),l]}).apply(this,arguments);return this._transaction.apply(this,t)},Ut.prototype._transaction=function(t,r,o){var l=this,c=$.trans;c&&c.db===this&&t.indexOf("!")===-1||(c=null);var h,m,b=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(m=r.map(function(P){if(P=P instanceof l.Table?P.name:P,typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),t=="r"||t===Fi)h=Fi;else{if(t!="rw"&&t!=Ri)throw new oe.InvalidArgument("Invalid transaction mode: "+t);h=Ri}if(c){if(c.mode===Fi&&h===Ri){if(!b)throw new oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&m.forEach(function(P){if(c&&c.storeNames.indexOf(P)===-1){if(!b)throw new oe.SubTransaction("Table "+P+" not included in parent transaction.");c=null}}),b&&c&&!c.active&&(c=null)}}catch(P){return c?c._promise(null,function(L,x){x(P)}):Ht(P)}var I=(function P(L,x,j,A,F){return se.resolve().then(function(){var R=$.transless||$,z=L._createTransaction(x,j,L._dbSchema,A);if(z.explicit=!0,R={trans:z,transless:R},A)z.idbtrans=A.idbtrans;else try{z.create(),z.idbtrans._explicit=!0,L._state.PR1398_maxLoop=3}catch(X){return X.name===Pe.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return P(L,x,j,null,F)})):Ht(X)}var q,G=qe(F);return G&&jr(),R=se.follow(function(){var X;(q=F.call(z,z))&&(G?(X=Ir.bind(null,null),q.then(X,X)):typeof q.next=="function"&&typeof q.throw=="function"&&(q=$i(q)))},R),(q&&typeof q.then=="function"?se.resolve(q).then(function(X){return z.active?X:Ht(new oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):R.then(function(){return q})).then(function(X){return A&&z._resolve(),z._completion.then(function(){return X})}).catch(function(X){return z._reject(X),Ht(X)})})}).bind(null,this,h,m,c,o);return c?c._promise(h,I,"lock"):$.trans?xr($.transless,function(){return l._whenReady(I)}):this._whenReady(I)},Ut.prototype.table=function(t){if(!D(this._allTables,t))throw new oe.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},Ut);function Ut(t,r){var o=this;this._middlewares={},this.verno=0;var l=Ut.dependencies;this._options=r=a({addons:Ut.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},l=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,h,m,b,I,P={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ie,dbReadyPromise:null,cancelOpen:Ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};P.dbReadyPromise=new se(function(x){P.dbReadyResolve=x}),P.openCanceller=new se(function(x,j){P.cancelOpen=j}),this._state=P,this.name=t,this.on=Cn(this,"populate","blocked","versionchange","close",{ready:[mt,Ie]}),this.once=function(x,j){var A=function(){for(var F=[],R=0;R<arguments.length;R++)F[R]=arguments[R];o.on(x).unsubscribe(A),j.apply(o,F)};return o.on(x,A)},this.on.ready.subscribe=H(this.on.ready.subscribe,function(x){return function(j,A){Ut.vip(function(){var F,R=o._state;R.openComplete?(R.dbOpenError||se.resolve().then(j),A&&x(j)):R.onReadyBeingFired?(R.onReadyBeingFired.push(j),A&&x(j)):(x(j),F=o,A||x(function z(){F.on.ready.unsubscribe(j),F.on.ready.unsubscribe(z)}))})}}),this.Collection=(c=this,In(zs.prototype,function(q,z){this.db=c;var A=Ga,F=null;if(z)try{A=z()}catch(G){F=G}var R=q._ctx,z=R.table,q=z.hook.reading.fire;this._ctx={table:z,index:R.index,isPrimKey:!R.index||z.schema.primKey.keyPath&&R.index===z.schema.primKey.name,range:A,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:F,or:R.or,valueMapper:q!==He?q:null}})),this.Table=(h=this,In(Za.prototype,function(x,j,A){this.db=h,this._tx=A,this.name=x,this.schema=j,this.hook=h._allTables[x]?h._allTables[x].hook:Cn(null,{creating:[it,Ie],reading:[Ye,He],updating:[Dt,Ie],deleting:[Vt,Ie]})})),this.Transaction=(m=this,In(qs.prototype,function(x,j,A,F,R){var z=this;x!=="readonly"&&j.forEach(function(q){q=(q=A[q])===null||q===void 0?void 0:q.yProps,q&&(j=j.concat(q.map(function(G){return G.updatesTable})))}),this.db=m,this.mode=x,this.storeNames=j,this.schema=A,this.chromeTransactionDurability=F,this.idbtrans=null,this.on=Cn(this,"complete","error","abort"),this.parent=R||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new se(function(q,G){z._resolve=q,z._reject=G}),this._completion.then(function(){z.active=!1,z.on.complete.fire()},function(q){var G=z.active;return z.active=!1,z.on.error.fire(q),z.parent?z.parent._reject(q):G&&z.idbtrans&&z.idbtrans.abort(),Ht(q)})})),this.Version=(b=this,In(Js.prototype,function(x){this.db=b,this._cfg={version:x,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(I=this,In(no.prototype,function(x,j,A){if(this.db=I,this._ctx={table:x,index:j===":id"?null:j,or:A},this._cmp=this._ascending=bt,this._descending=function(F,R){return bt(R,F)},this._max=function(F,R){return 0<bt(F,R)?F:R},this._min=function(F,R){return bt(F,R)<0?F:R},this._IDBKeyRange=I._deps.IDBKeyRange,!this._IDBKeyRange)throw new oe.MissingAPI})),this.on("versionchange",function(x){0<x.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(x){!x.newVersion||x.newVersion<x.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(x.oldVersion/10))}),this._maxKey=Tn(r.IDBKeyRange),this._createTransaction=function(x,j,A,F){return new o.Transaction(x,j,A,o._options.chromeTransactionDurability,F)},this._fireOnBlocked=function(x){o.on("blocked").fire(x),fn.filter(function(j){return j.name===o.name&&j!==o&&!j._state.vcFired}).map(function(j){return j.on("versionchange").fire(x)})},this.use($s),this.use(nl),this.use(el),this.use(Xs),this.use(Zs);var L=new Proxy(this,{get:function(x,j,A){if(j==="_vip")return!0;if(j==="table")return function(R){return ai(o.table(R),L)};var F=Reflect.get(x,j,A);return F instanceof Za?ai(F,L):j==="tables"?F.map(function(R){return ai(R,L)}):j==="_createTransaction"?function(){return ai(F.apply(this,arguments),L)}:F}});this.vip=L,l.forEach(function(x){return x(o)})}var oi,pr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",il=(na.prototype.subscribe=function(t,r,o){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:r,complete:o})},na.prototype[pr]=function(){return this},na);function na(t){this._subscribe=t}try{oi={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{oi={indexedDB:null,IDBKeyRange:null}}function bo(t){var r,o=!1,l=new il(function(c){var h=qe(t),m,b=!1,I={},P={},L={get closed(){return b},unsubscribe:function(){b||(b=!0,m&&m.abort(),x&&qr.storagemutated.unsubscribe(A))}};c.start&&c.start(L);var x=!1,j=function(){return Sn(F)},A=function(R){ri(I,R),Ji(P,I)&&j()},F=function(){var R,z,q;!b&&oi.indexedDB&&(I={},R={},m&&m.abort(),m=new AbortController,q=(function(G){var X=Jt();try{h&&jr();var ee=gr(t,G);return ee=h?ee.finally(Ir):ee}finally{X&&vr()}})(z={subscr:R,signal:m.signal,requery:j,querier:t,trans:null}),Promise.resolve(q).then(function(G){o=!0,r=G,b||z.signal.aborted||(I={},(function(X){for(var ee in X)if(D(X,ee))return;return 1})(P=R)||x||(qr(An,A),x=!0),Sn(function(){return!b&&c.next&&c.next(G)}))},function(G){o=!1,["DatabaseClosedError","AbortError"].includes(G?.name)||b||Sn(function(){b||c.error&&c.error(G)})}))};return setTimeout(j,0),L});return l.hasValue=function(){return o},l.getValue=function(){return r},l}var nn=Rr;function ia(t){var r=Kr;try{Kr=!0,qr.storagemutated.fire(t),Zi(t,!0)}finally{Kr=r}}k(nn,a(a({},et),{delete:function(t){return new nn(t,{addons:[]}).delete()},exists:function(t){return new nn(t,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return r=nn.dependencies,o=r.indexedDB,r=r.IDBKeyRange,(Gi(o)?Promise.resolve(o.databases()).then(function(l){return l.map(function(c){return c.name}).filter(function(c){return c!==Hn})}):Ui(o,r).toCollection().primaryKeys()).then(t)}catch{return Ht(new oe.MissingAPI)}var r,o},defineClass:function(){return function(t){y(this,t)}},ignoreTransaction:function(t){return $.trans?xr($.transless,t):t()},vip:Wi,async:function(t){return function(){try{var r=$i(t.apply(this,arguments));return r&&typeof r.then=="function"?r:se.resolve(r)}catch(o){return Ht(o)}}},spawn:function(t,r,o){try{var l=$i(t.apply(o,r||[]));return l&&typeof l.then=="function"?l:se.resolve(l)}catch(c){return Ht(c)}},currentTransaction:{get:function(){return $.trans||null}},waitFor:function(t,r){return r=se.resolve(typeof t=="function"?nn.ignoreTransaction(t):t).timeout(r||6e4),$.trans?$.trans.waitFor(r):r},Promise:se,debug:{get:function(){return at},set:function(t){Ae(t)}},derive:E,extend:y,props:k,override:H,Events:Cn,on:qr,liveQuery:bo,extendObservabilitySet:ri,getByKeyPath:Q,setByKeyPath:le,delByKeyPath:function(t,r){typeof r=="string"?le(t,r,void 0):"length"in r&&[].map.call(r,function(o){le(t,o,void 0)})},shallowClone:De,deepClone:pe,getObjectDiff:ea,cmp:bt,asap:re,minKey:-1/0,addons:[],connections:fn,errnames:Pe,dependencies:oi,cache:rn,semVer:"4.2.1",version:"4.2.1".split(".").map(function(t){return parseInt(t)}).reduce(function(t,r,o){return t+r/Math.pow(10,2*o)})})),nn.maxKey=Tn(nn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(qr(An,function(t){Kr||(t=new CustomEvent(Bi,{detail:t}),Kr=!0,dispatchEvent(t),Kr=!1)}),addEventListener(Bi,function(t){t=t.detail,Kr||ia(t)}));var mn,Kr=!1,wo=function(){};return typeof BroadcastChannel<"u"&&((wo=function(){(mn=new BroadcastChannel(Bi)).onmessage=function(t){return t.data&&ia(t.data)}})(),typeof mn.unref=="function"&&mn.unref(),qr(An,function(t){Kr||mn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Rr.disableBfCache&&t.persisted){at&&console.debug("Dexie: handling persisted pagehide"),mn?.close();for(var r=0,o=fn;r<o.length;r++)o[r].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!Rr.disableBfCache&&t.persisted&&(at&&console.debug("Dexie: handling persisted pageshow"),wo(),ia({all:new nr(-1/0,[[]])}))})),se.rejectionMapper=function(t,r){return!t||t instanceof Qe||t instanceof TypeError||t instanceof SyntaxError||!t.name||!nt[t.name]?t:(r=new nt[t.name](r||t.message,t),"stack"in t&&_(r,"stack",{get:function(){return this.inner.stack}}),r)},Ae(at),a(Rr,Object.freeze({__proto__:null,Dexie:Rr,liveQuery:bo,Entity:Wa,cmp:bt,PropModification:kn,replacePrefix:function(t,r){return new kn({replacePrefix:[t,r]})},add:function(t){return new kn({add:t})},remove:function(t){return new kn({remove:t})},default:Rr,RangeSet:nr,mergeRanges:On,rangesOverlap:lo}),{default:Rr}),Rr})})(vi)),vi.exports}var rf=tf();const ga=Hl(rf),Vo=Symbol.for("Dexie"),wi=globalThis[Vo]||(globalThis[Vo]=ga);if(ga.semVer!==wi.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ga.semVer} and ${wi.semVer}`);const{liveQuery:ym,mergeRanges:bm,rangesOverlap:wm,RangeSet:_m,cmp:xm,Entity:Sm,PropModification:km,replacePrefix:Cm,add:Im,remove:Pm,DexieYProvider:Am}=wi,zn="current";class nf extends wi{uprnSelections;areaSelections;dataSelections;userDownloads;constructor(){super("app-db2"),this.version(2).stores({uprnSelections:"&id",areaSelections:"++id, layerId, *areaIds",dataSelections:"++id, layerId, *fields",userDownloads:"++id, &localId, createdAt"}),this.on("populate",async e=>{if(console.log("[db] Populating database with initial data"),await e.table("uprnSelections").get(zn)){console.log("[db] Initial UPRN selection already exists");return}await e.table("uprnSelections").add({id:"current",areas:null,data:[]}),console.log("[db] Initial UPRN selection created")})}}const Yr=new nf,Ss=async()=>await Yr.uprnSelections.get(zn),Mn=async u=>{let e=await Ss();e||(e={id:zn,areas:null,data:[]},await Yr.uprnSelections.add(e)),console.log("[db] Updating UPRN selection with patch:",u,"current:",e),await Yr.uprnSelections.update(zn,u)},af=async()=>{await Yr.uprnSelections.put({id:zn,areas:null,data:[]})},of=async(u,e,n)=>await Yr.userDownloads.add({localId:u,areaSelection:e,dataSelections:n,status:Sr.Pending,createdAt:Date.now()}),sf=async(u,e,n,a)=>{const s={};e!==void 0&&(s.externalId=e),n!==void 0&&(s.areaSelection=n),a!==void 0&&(s.dataSelections=a),Object.keys(s).length!==0&&await Yr.userDownloads.where("localId").equals(u).modify(s)},lf=async()=>await Yr.userDownloads.orderBy("createdAt").reverse().toArray(),cf=async u=>await Yr.userDownloads.where("localId").equals(u).delete();class uf{#e=ie(vt(new br));constructor(){this.#t()}addDownload(e){console.log("[downloads-store] Adding download:",e),i(this.#e).set(e.localId,e),of(e.localId,e.areaSelection,e.dataSelections)}updateDownloadStatus(e){console.log("[downloads-store] Updating download status:",e),i(this.#e).set(e.localId,{...e}),sf(e.localId,e.externalId,e.areaSelection,e.dataSelections)}removeDownload(e){i(this.#e).delete(e),cf(e)}getDownloads(){return Array.from(i(this.#e).values())}async#t(){const e=await lf();!e||e.length===0||(console.log("Loaded downloads from DB:",e),e.forEach(n=>{i(this.#e).set(n.localId,{localId:n.localId,status:Sr.Pending,areaSelection:n.areaSelection,dataSelections:n.dataSelections})}))}}const pn=new uf;var df=J('<div class="data-item svelte-5fx6pg"><span class="data-name svelte-5fx6pg"> </span> <div class="data-actions svelte-5fx6pg"><!></div></div>');function ma(u,e){const n=K(e,"title",3,"");_a(u,{class:"data-item-card",children:(a,s)=>{var f=df(),d=W(f),g=W(d,!0);U(d);var y=Y(d,2),p=W(y);xe(p,()=>e.children??Oe),U(y),U(f),ft(()=>{Tt(d,"title",n()),Mt(g,n())}),v(a,f)},$$slots:{default:!0}})}var ff=J("<!> <!> <!> <!>",1),hf=J('<ul class="selected-list svelte-1vh7kre"></ul> <p class="count svelte-1vh7kre"> </p>',1),vf=J('<p class="no-selection svelte-1vh7kre">No downloads in queue</p>'),gf=J('<div class="section svelte-1vh7kre"><h4 class="svelte-1vh7kre">Download Queue</h4> <!></div>');function mf(u,e){fe(e,!0);let n=ie(vt(new Set));const a=B(()=>pn.getDownloads()),s={completed:{color:"#059669",text:"Completed",icon:du},"in-progress":{color:"#2563eb",text:"In Progress",icon:mu},failed:{color:"#dc2626",text:"Failed",icon:Vl},pending:{color:"#6b7280",text:"Pending",icon:jl}};sn(()=>{const N=setInterval(()=>{f()},5e3);return()=>{clearInterval(N)}}),lt(()=>{if(!i(a)||i(a).length<=0||!e.uprnDownloadService)return;(async()=>{for(const T of i(a)){if(T.externalId||T.status!==Sr.Pending)continue;const M={exports:{areaSelectionLayer:{remoteId:T.areaSelection.layerId,areas:T.areaSelection.areaFieldInfos.map(Z=>Z.code)},dataSelectionLayers:T.dataSelections.map(Z=>({remoteId:Z.layerId,fields:Z.fields.filter(re=>!e.fieldsToHide||!e.fieldsToHide.has(re))}))}};console.log("[downloads-menu] Submitting download request:",M);const H=await e.uprnDownloadService.requestJob(M);if(!H||H.type===$d.Error){console.error("[downloads-menu] Failed to submit download request.",H),T.status=Sr.Failed,pn.updateDownloadStatus(T);continue}T.externalId=H.guid,T.status=Sr.InProgress,pn.updateDownloadStatus(T)}})()});async function f(){if(i(a).length<=0||!e.uprnDownloadService)return;const N={jobs:i(a).filter(M=>M.externalId&&M.status!==Sr.Completed&&M.status!==Sr.Failed).map(M=>M.externalId)};if(N.jobs.length===0)return;console.log("[downloads-menu] Checking job statuses for downloads:",N);const T=await e.uprnDownloadService.requestJobStatuses(N);if(!T){console.error("[downloads-menu] Failed to get job statuses.",T);return}for(const M of T.jobs){const H=i(a).find(Z=>Z.externalId===M.guid);if(!H){console.warn("[downloads-menu] Received job status for unknown download:",M.guid);continue}switch(M.status.type){case di.Submitted:case di.Processing:H.status=Sr.InProgress;break;case di.Completed:H.status=Sr.Completed;break;case di.Error:H.status=Sr.Failed;break;default:console.warn("[downloads-menu] Unknown job status type:",M.status.type);break}pn.updateDownloadStatus(H)}}function d(N){pn.removeDownload(N)}async function g(N){try{await navigator.clipboard.writeText(N),O(n,new Set(i(n)).add(N),!0),Bn.success("URL copied to clipboard"),setTimeout(()=>{const T=new Set(i(n));T.delete(N),O(n,T,!0)},2e3)}catch(T){console.error("Failed to copy URL:",T),Bn.error("Failed to copy URL to clipboard")}}function y(N){return s[N]?.color??s.pending.color}function p(N){return s[N]?.text??s.pending.text}function w(N){return s[N]?.icon??s.pending.icon}function D(N){return e.uprnDownloadService.getDownloadUrl(N)}var k=gf(),S=Y(W(k),2);{var _=N=>{var T=hf(),M=C(T);er(M,21,()=>i(a),Er,(re,Q)=>{{let le=B(()=>i(Q).externalId?i(Q).externalId:"Pending...");ma(re,{get title(){return i(le)},children:(De,Me)=>{var ne=ff(),ce=C(ne);{let Te=B(()=>y(i(Q).status)),ze=B(()=>p(i(Q).status));Kt(ce,{variant:"ghost",size:"sm",class:"download-status-btn",get style(){return`color: ${i(Te)??""}`},get title(){return i(ze)},disabled:!0,children:(Se,je)=>{const qe=B(()=>w(i(Q).status));var Je=V(),Qe=C(Je);{let ve=B(()=>i(Q).status==="in-progress"?"spinning":"");ae(Qe,()=>i(qe),(Ne,$e)=>{$e(Ne,{size:14,get class(){return i(ve)}})})}v(Se,Je)},$$slots:{default:!0}})}var ke=Y(ce,2);{var pe=Te=>{Kt(Te,{variant:"ghost",size:"sm",class:"download-clipboard-btn",onclick:()=>g(D(i(Q).externalId)),title:"Copy URL to clipboard",children:(ze,Se)=>{var je=V(),qe=C(je);{var Je=ve=>{fu(ve,{size:14})},Qe=ve=>{hu(ve,{size:14})};te(qe,ve=>{i(n).has(D(i(Q).externalId))?ve(Je):ve(Qe,!1)})}v(ze,je)},$$slots:{default:!0}})};te(ke,Te=>{i(Q).externalId&&Te(pe)})}var Be=Y(ke,2);{var Ze=Te=>{Kt(Te,{variant:"ghost",size:"sm",class:"download-action-btn",onclick:()=>window.open(D(i(Q).externalId),"_blank"),title:"Open download",children:(ze,Se)=>{vu(ze,{})},$$slots:{default:!0}})};te(Be,Te=>{i(Q).externalId&&i(Q).status==="completed"&&Te(Ze)})}var Ve=Y(Be,2);Kt(Ve,{variant:"ghost",size:"sm",class:"download-remove-btn",onclick:()=>d(i(Q).localId),title:"Remove from queue",children:(Te,ze)=>{rt();var Se=ct("");v(Te,Se)},$$slots:{default:!0}}),v(De,ne)},$$slots:{default:!0}})}}),U(M);var H=Y(M,2),Z=W(H);U(H),ft(()=>Mt(Z,`${i(a).length??""} download(s) in queue`)),v(N,T)},E=N=>{var T=vf();v(N,T)};te(S,N=>{i(a).length>0?N(_):N(E,!1)})}U(k),v(u,k),he()}function pf(u,e){fe(e,!0);{let n=B(()=>wn("size-7 border-1 border-destructive",e.class));Kt(u,{onclick:()=>e.clear(),variant:"ghost",get class(){return i(n)},title:"Clear all selections",children:(a,s)=>{pu(a,{class:"text-destructive"})},$$slots:{default:!0}})}he()}class yf{#e=ie(vt(new br));get dataSelections(){return i(this.#e)}set dataSelections(e){O(this.#e,e,!0)}addSelection(e){this.dataSelections.set(e.layerId,e)}updateSelection(e,n){const a=this.dataSelections.get(e);if(!a){console.warn(`[data-selection-store] no existing selection for layerId ${e}`);return}a.selectedFieldIds=new Tr(n),this.dataSelections.set(e,{...a})}addOrUpdateSelection(e,n){const a=this.dataSelections.get(e);if(a)a.selectedFieldIds=new Tr(n),this.dataSelections.set(e,{...a});else{const s={layerId:e,selectedFieldIds:new Tr(n)};this.dataSelections.set(e,s)}}removeSelection(e){console.log(`[data-selection-store] Removing selection for layerId: ${e}`),this.dataSelections.delete(e)}getSelection(e){return this.dataSelections.get(e)}getAllSelections(){return Array.from(this.dataSelections.values())}clearSelections(){console.log("[data-selection-store] Clearing all selections"),this.dataSelections.clear(),console.log("[data-selection-store] selections cleared.")}cleanup(){this.dataSelections.clear()}}var bf=J('<div class="export-footer svelte-tx6b2m"><div class="export-footer__left svelte-tx6b2m"><p class="text-sm text-muted-foreground svelte-tx6b2m">Click "Export" to begin the download.</p></div> <div class="export-footer__right svelte-tx6b2m"><!> <!></div></div>');function wf(u,e){fe(e,!0);function n(){if(e.areaSelectionInteractionStore.selectionViewState?.areaHandles.size<=0){Bn.error("Please select at least one area to export.");return}if(e.dataSelectionStore.getAllSelections().length<=0){Bn.error("Please select at least one data layer to export.");return}console.log("Starting export..."),(async()=>{const y=await e.areaSelectionInteractionStore.getAreaCodesById(e.areaSelectionInteractionStore.selectionViewState.areaHandles.keys().toArray()),p=e.areaSelectionInteractionStore.selectionViewState.areaHandles.entries().map(([S,_],E)=>({id:S,code:y[E]})).toArray(),w={layerId:e.areaSelectionInteractionStore.selectionViewState.layerView?.layer.id||"",areaFieldInfos:p},D=e.dataSelectionStore.getAllSelections().map(S=>({layerId:S.layerId,fields:Array.from(S.selectedFieldIds)})),k=crypto.randomUUID();pn.addDownload({localId:k,status:Sr.Pending,areaSelection:w,dataSelections:D}),e.onExportSuccess?.()})()}var a=bf(),s=Y(W(a),2),f=W(s);pf(f,{class:"mr-4",get clear(){return e.clearSelections}});var d=Y(f,2);Kt(d,{onclick:n,title:"Export",children:(g,y)=>{rt();var p=ct("Export");v(g,p)},$$slots:{default:!0}}),U(s),U(a),v(u,a),he()}class _f{#e=ie(null);get ActiveLayer(){return i(this.#e)}set ActiveLayer(e){O(this.#e,e,!0)}}class xf{#e=ie(!1);get isLoaded(){return i(this.#e)}set isLoaded(e){O(this.#e,e,!0)}#t=ie(null);get data(){return i(this.#t)}set data(e){O(this.#t,e,!0)}#r=B(()=>{const e=new br;function n(a){e.set(a.id,a),a.type==="group"&&a.layers.forEach(f=>{n(f)})}return this.data&&this.data.layers.forEach(a=>{n(a)}),e});get dataLookup(){return i(this.#r)}set dataLookup(e){O(this.#r,e)}#n=ie(!1);get loading(){return i(this.#n)}set loading(e){O(this.#n,e,!0)}#i=ie(null);get error(){return i(this.#i)}set error(e){O(this.#i,e,!0)}async initializeAsync(e){if(!this.data){this.loading=!0,this.error=null;try{const{portalUrl:n,itemId:a,proxy:s}=e;await this.configurePortalAsync(n,s),await this.loadwebmapAsync(a)}catch(n){console.error("Error initializing webmap:",n),this.error=n.message}finally{this.loading=!1}}}async configurePortalAsync(e,n){if(!e||(So.portalUrl=e,console.log(So),!n))return;const{addProxyRule:a}=ec;console.log("Adding proxy rule for portal traffic"),a({urlPrefix:n?.urlPrefix,proxyUrl:n?.proxyUrl})}async loadwebmapAsync(e){if(this.data)return;const n=new $l({id:e}),a=new Zl({portalItem:n});this.data=a,await this.data.when(),this.data.loaded&&(this.isLoaded=!0)}clear(){this.data=null,this.loading=!1,this.error=null}clearError(){this.error=null}getWebmap(){return this.data}}const Sf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-funnel-icon lucide-funnel"><path d="M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"/></svg>',kf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-funnel-x-icon lucide-funnel-x"><path d="M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473"/><path d="m16.5 3.5 5 5"/><path d="m21.5 3.5-5 5"/></svg>';function Cf(u,e){u.stopPropagation(),e.onFilterClicked?.(e.layerId)}var If=J('<button title="Filter"><!></button>');function Pf(u,e){fe(e,!0);let n=ie(vt(e.hasFiltersApplied?.(e.layerId)??!1));lt(()=>{O(n,e.hasFiltersApplied?.(e.layerId)??!1,!0)});const a=B(()=>i(n)?Sf:kf);var s=If();let f;s.__click=[Cf,e];var d=W(s);Nn(d,()=>i(a)),U(s),ft(g=>{f=cr(s,1,"filter-btn svelte-1075mfp",null,f,g),Tt(s,"aria-pressed",i(n))},[()=>({active:i(n)})]),v(u,s),he()}qn(["click"]);var Af=J('<ul class="selected-list"></ul> <p class="count svelte-1kiikpe"> </p>',1),Tf=J('<p class="no-selection svelte-1kiikpe">No areas selected</p>'),Df=J("<!> <!>",1),Ef=J('<ul></ul> <p class="count svelte-1kiikpe"> </p>',1),Of=J('<p class="no-selection svelte-1kiikpe">No data selected</p>'),Mf=J('<h2 class="svelte-1kiikpe">Export Options</h2> <div class="section svelte-1kiikpe"><h3 class="svelte-1kiikpe"> </h3> <h4 class="svelte-1kiikpe">Selected Areas</h4> <!></div> <div class="section svelte-1kiikpe"><h4 class="svelte-1kiikpe">Selected Data</h4> <!></div>',1);function Ff(u,e){fe(e,!0);const n=K(e,"fieldFilterMenuStore",7);let a=ie(vt([]));lt(()=>{if(!e.areaSelectionInteractionStore){O(a,[],!0);return}if(!e.areaSelectionInteractionStore.selectionViewState?.areaHandles.size){O(a,[],!0);return}(async()=>{const Z=await e.areaSelectionInteractionStore.getAreaNamesById(e.areaSelectionInteractionStore.selectionViewState.areaHandles.keys().toArray()),re=e.areaSelectionInteractionStore.selectionViewState.areaHandles.entries().toArray().map(([le,De])=>({id:le,handle:De})),Q=[];for(let le=0;le<Z.length;le++)Q.push({name:Z[le]||"Unknown Area",HighlightAreaInfo:re[le]});O(a,Q,!0)})()});function s(H){const Z=i(a).findIndex(re=>re.name===H);Z!==-1&&e.areaSelectionInteractionStore.removeSelectedArea(i(a)[Z]?.HighlightAreaInfo.id)}function f(H){console.log("[export-menu] Removing data selection for layerId:",H),e.dataSelectionStore.removeSelection(H),console.log("[export-menu] Current SelectedData:",pi(e.dataSelectionStore.getAllSelections()))}function d(H){if(n().ActiveLayer?.id===H){n().ActiveLayer=null;return}const Z=e.webMapStore.dataLookup.get(H);if(!Z){console.warn(`[export-menu] Layer with ID ${H} not found in web map store.`);return}n().ActiveLayer=Z}function g(H){const Z=e.dataSelectionStore.getSelection(H);return!(!Z||!Z.selectedFieldIds||Z.selectedFieldIds.size===0||Z.selectedFieldIds.size===e.webMapStore.dataLookup.get(H)?.fields?.length)}var y=Mf(),p=Y(C(y),2),w=W(p),D=W(w,!0);U(w);var k=Y(w,4);{var S=H=>{var Z=Af(),re=C(Z);er(re,21,()=>i(a),Er,(De,Me)=>{ma(De,{get title(){return i(Me).name},children:(ne,ce)=>{Kt(ne,{variant:"ghost",size:"sm",class:"area-remove-btn",title:"Remove area",onclick:()=>s(i(Me).name),children:(ke,pe)=>{rt();var Be=ct("");v(ke,Be)},$$slots:{default:!0}})},$$slots:{default:!0}})}),U(re);var Q=Y(re,2),le=W(Q);U(Q),ft(()=>Mt(le,`${i(a).length??""} area(s) selected`)),v(H,Z)},_=H=>{var Z=Tf();v(H,Z)};te(k,H=>{i(a).length>0?H(S):H(_,!1)})}U(p);var E=Y(p,2),N=Y(W(E),2);{var T=H=>{var Z=Ef(),re=C(Z);er(re,21,()=>e.dataSelectionStore.getAllSelections(),Er,(De,Me)=>{{let ne=B(()=>e.webMapStore.dataLookup.get(i(Me).layerId)?.title??"");ma(De,{get title(){return i(ne)},children:(ce,ke)=>{var pe=Df(),Be=C(pe);{var Ze=Te=>{Pf(Te,{get layerId(){return i(Me).layerId},onFilterClicked:d,hasFiltersApplied:g})};te(Be,Te=>{e.dataSelectionTreeviewConfig?.getItemConfig(i(Me).layerId)?.showFields&&Te(Ze)})}var Ve=Y(Be,2);Kt(Ve,{variant:"ghost",size:"sm",class:"data-remove-btn",title:"Remove data selection",onclick:()=>f(i(Me).layerId),children:(Te,ze)=>{rt();var Se=ct("");v(Te,Se)},$$slots:{default:!0}}),v(ce,pe)},$$slots:{default:!0}})}}),U(re);var Q=Y(re,2),le=W(Q);U(Q),ft(De=>Mt(le,`${De??""} data layer(s) selected`),[()=>e.dataSelectionStore.getAllSelections().length]),v(H,Z)},M=H=>{var Z=Of();v(H,Z)};te(N,H=>{e.dataSelectionStore.getAllSelections().length>0?H(T):H(M,!1)})}U(E),ft(()=>Mt(D,e.areaSelectionInteractionStore.selectionViewState?.layerView?.layer?e.areaSelectionInteractionStore.selectionViewState?.layerView?.layer.title:"No Area Layer Selected")),v(u,y),he()}const Rf=`<?xml version="1.0" encoding="utf-8"?>
\r<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="800px" height="800px" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\r
  <title>information-circle</title>\r
  <g id="Layer_2" data-name="Layer 2">\r
    <g id="invisible_box" data-name="invisible box">\r
      <rect width="48" height="48" fill="none"/>\r
    </g>\r
    <g id="icons_Q2" data-name="icons Q2">\r
      <path d="M24,2A22,22,0,1,0,46,24,21.9,21.9,0,0,0,24,2Zm0,40A18,18,0,1,1,42,24,18.1,18.1,0,0,1,24,42Z"/>\r
      <path d="M24,20a2,2,0,0,0-2,2V34a2,2,0,0,0,4,0V22A2,2,0,0,0,24,20Z"/>\r
      <circle cx="24" cy="14" r="2"/>\r
    </g>\r
  </g>\r
</svg>`;var Nf=J('<div data-slot="checkbox-indicator" class="text-current transition-none"><!></div>');function Ur(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=K(e,"checked",15,!1),s=K(e,"indeterminate",15,!1),f=Le(e,["$$slots","$$events","$$legacy","ref","checked","indeterminate","class"]);var d=V(),g=C(d);{const y=(w,D)=>{let k=()=>D?.().checked,S=()=>D?.().indeterminate;var _=Nf(),E=W(_);{var N=M=>{ku(M,{class:"size-3.5"})},T=M=>{var H=V(),Z=C(H);{var re=Q=>{ps(Q,{class:"size-3.5"})};te(Z,Q=>{S()&&Q(re)},!0)}v(M,H)};te(E,M=>{k()?M(N):M(T,!1)})}U(_),v(w,_)};let p=B(()=>Wt("border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive shadow-xs peer flex size-4 shrink-0 items-center justify-center rounded-[4px] border outline-none transition-shadow focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e.class));ae(g,()=>gs,(w,D)=>{D(w,We({"data-slot":"checkbox",get class(){return i(p)}},()=>f,{get ref(){return n()},set ref(k){n(k)},get checked(){return a()},set checked(k){a(k)},get indeterminate(){return s()},set indeterminate(k){s(k)},children:y,$$slots:{default:!0}}))})}v(u,d),he()}function _i(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{let d=B(()=>Wt("text-lg font-semibold leading-none",e.class));ae(f,()=>Al,(g,y)=>{y(g,We({"data-slot":"dialog-title",get class(){return i(d)}},()=>a,{get ref(){return n()},set ref(p){n(p)}}))})}v(u,s),he()}var Lf=J("<div><!></div>");function xi(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=Lf();Ft(s,d=>({"data-slot":"dialog-header",class:d,...a}),[()=>Wt("flex flex-col gap-2 text-center sm:text-start",e.class)]);var f=W(s);xe(f,()=>e.children??Oe),U(s),sr(s,d=>n(d),()=>n()),v(u,s),he()}function Bf(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{let d=B(()=>Wt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e.class));ae(f,()=>Tl,(g,y)=>{y(g,We({"data-slot":"dialog-overlay",get class(){return i(d)}},()=>a,{get ref(){return n()},set ref(p){n(p)}}))})}v(u,s),he()}var zf=J('<!> <span class="sr-only">Close</span>',1),jf=J("<!> <!>",1),Vf=J("<!> <!>",1);function Si(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=K(e,"showCloseButton",3,!0),s=Le(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children","showCloseButton"]);var f=V(),d=C(f);ae(d,()=>Kf,(g,y)=>{y(g,We(()=>e.portalProps,{children:(p,w)=>{var D=Vf(),k=C(D);ae(k,()=>Bf,(_,E)=>{E(_,{})});var S=Y(k,2);{let _=B(()=>Wt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed start-[50%] top-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e.class));ae(S,()=>Dl,(E,N)=>{N(E,We({"data-slot":"dialog-content",get class(){return i(_)}},()=>s,{get ref(){return n()},set ref(T){n(T)},children:(T,M)=>{var H=jf(),Z=C(H);xe(Z,()=>e.children??Oe);var re=Y(Z,2);{var Q=le=>{var De=V(),Me=C(De);ae(Me,()=>El,(ne,ce)=>{ce(ne,{class:"ring-offset-background focus:ring-ring rounded-xs focus:outline-hidden absolute end-4 top-4 opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",children:(ke,pe)=>{var Be=zf(),Ze=C(Be);Ol(Ze,{}),rt(2),v(ke,Be)},$$slots:{default:!0}})}),v(le,De)};te(re,le=>{a()&&le(Q)})}v(T,H)},$$slots:{default:!0}}))})}v(p,D)},$$slots:{default:!0}}))}),v(u,f),he()}function ki(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{let d=B(()=>Wt("text-muted-foreground text-sm",e.class));ae(f,()=>Ml,(g,y)=>{y(g,We({"data-slot":"dialog-description",get class(){return i(d)}},()=>a,{get ref(){return n()},set ref(p){n(p)}}))})}v(u,s),he()}function qf(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref"]);var s=V(),f=C(s);ae(f,()=>Tc,(d,g)=>{g(d,We({"data-slot":"dialog-trigger"},()=>a,{get ref(){return n()},set ref(y){n(y)}}))}),v(u,s),he()}const Ci=Fl,Kf=rc;function Hf(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{let d=B(()=>Wt("bg-border -mx-1 h-px",e.class));ae(f,()=>Kc,(g,y)=>{y(g,We({"data-slot":"command-separator",get class(){return i(d)}},()=>a,{get ref(){return n()},set ref(p){n(p)}}))})}v(u,s),he()}var Uf=J("<!> <!>",1),Gf=(u,e,n)=>e(i(n).name),Wf=J('<div class="info-icon-container svelte-1hl7txa"><!></div>'),Yf=J('<div class="field-content-wrapper svelte-1hl7txa"><!> <button class="field-content svelte-1hl7txa" tabindex="0"><div class="field-name-container svelte-1hl7txa"><span class="field-name svelte-1hl7txa"> </span> <!></div></button></div>'),Jf=J('<div class="master-checkbox-container svelte-1hl7txa"><!> <span class="master-checkbox-label svelte-1hl7txa">Select All Fields</span></div> <!> <!>',1),Qf=J("<!> <!>",1),Xf=J("<!> <!>",1),Zf=J('<!> <div class="card-content min-h-0 flex-1 svelte-1hl7txa"><!></div>',1);function $f(u,e){fe(e,!0);const n=K(e,"fieldFilterMenuStore",7);let a=ie(null),s=ie(vt(new Tr)),f=B(()=>n().ActiveLayer!==null),d=B(()=>{if(!i(a)||!i(a).fields)return{checked:!1,indeterminate:!1};const _=i(a).fields.length,E=i(s)?.size||0;return E===0?{checked:!1,indeterminate:!1}:E===_?{checked:!0,indeterminate:!1}:{checked:!1,indeterminate:!0}});lt(()=>{const _=n().ActiveLayer;if(!_){O(a,null),O(s,new Tr,!0);return}O(a,_,!0);const E=e.dataSelectionStore.getSelection(_.id);E?.selectedFieldIds?O(s,new Tr([...E.selectedFieldIds]),!0):O(s,new Tr,!0)});function g(_){_||(y(),n().ActiveLayer=null)}function y(){if(!i(a))return;let _=e.dataSelectionStore.getSelection(i(a).id);if(_){if((_.selectedFieldIds===void 0||_.selectedFieldIds===null)&&(_.selectedFieldIds=new Tr),i(s).size===0){e.dataSelectionStore.removeSelection(i(a).id);return}_.selectedFieldIds.clear(),i(s).forEach(E=>{_.selectedFieldIds?.add(E)})}}function p(_){i(a)&&(i(s).has(_)?i(s).delete(_):i(s).add(_))}function w(){if(!i(a)?.fields)return;(i(s)?.size||0)===0?i(a).fields.forEach(E=>{i(s).add(E.name)}):i(s).clear()}function D(){if(!i(a)?.fields)return[];const _=i(a).fields.filter(E=>!e.fieldsToHide.has(E.name.toLowerCase()));return console.log("Filtered fields to show:",_,e.fieldsToHide,i(a).fields),_}var k=V(),S=C(k);ae(S,()=>Ci,(_,E)=>{E(_,{get open(){return i(f)},onOpenChange:g,children:(N,T)=>{var M=V(),H=C(M);ae(H,()=>Si,(Z,re)=>{re(Z,{class:"flex max-h-[80vh] flex-col sm:max-w-[700px]",children:(Q,le)=>{var De=Zf(),Me=C(De);ae(Me,()=>xi,(ke,pe)=>{pe(ke,{children:(Be,Ze)=>{var Ve=Uf(),Te=C(Ve);ae(Te,()=>_i,(Se,je)=>{je(Se,{children:(qe,Je)=>{rt();var Qe=ct("Select Fields");v(qe,Qe)},$$slots:{default:!0}})});var ze=Y(Te,2);ae(ze,()=>ki,(Se,je)=>{je(Se,{children:(qe,Je)=>{rt();var Qe=ct("Choose fields to include in your data selection.");v(qe,Qe)},$$slots:{default:!0}})}),v(Be,Ve)},$$slots:{default:!0}})});var ne=Y(Me,2),ce=W(ne);ae(ce,()=>Yl,(ke,pe)=>{pe(ke,{children:(Be,Ze)=>{var Ve=Xf(),Te=C(Ve);ae(Te,()=>Rl,(Se,je)=>{je(Se,{placeholder:"Search for fields..."})});var ze=Y(Te,2);ae(ze,()=>Jl,(Se,je)=>{je(Se,{children:(qe,Je)=>{var Qe=Qf(),ve=C(Qe);ae(ve,()=>Ql,($e,Pe)=>{Pe($e,{children:(ht,oe)=>{rt();var nt=ct("No results found.");v(ht,nt)},$$slots:{default:!0}})});var Ne=Y(ve,2);ae(Ne,()=>Nl,($e,Pe)=>{Pe($e,{heading:"Fields",children:(ht,oe)=>{var nt=Jf(),et=C(nt),Ie=W(et);Ur(Ie,{get checked(){return i(d).checked},get indeterminate(){return i(d).indeterminate},onCheckedChange:w}),rt(2),U(et);var He=Y(et,2);ae(He,()=>Hf,(Fe,it)=>{it(Fe,{})});var Ye=Y(He,2);er(Ye,17,D,Er,(Fe,it)=>{var Vt=V(),Dt=C(Vt);ae(Dt,()=>Xl,(Ot,mt)=>{mt(Ot,{class:"field-item",onselect:()=>p(i(it).name),children:(at,Ae)=>{var Re=Yf(),Xe=W(Re);{let wt=B(()=>i(s)?.has(i(it).name)??!1);Ur(Xe,{class:"field-checkbox",get checked(){return i(wt)},onCheckedChange:()=>p(i(it).name)})}var tt=Y(Xe,2);tt.__click=[Gf,p,it];var ut=W(tt),Ue=W(ut),Pt=W(Ue,!0);U(Ue);var kt=Y(Ue,2);{var qt=wt=>{var yt=Wf(),_t=W(yt);Nn(_t,()=>Rf),U(yt),ft(()=>Tt(yt,"title",i(it).description)),v(wt,yt)};te(kt,wt=>{i(it).description&&wt(qt)})}U(ut),U(tt),U(Re),ft(()=>Mt(Pt,i(it).alias||i(it).name)),v(at,Re)},$$slots:{default:!0}})}),v(Fe,Vt)}),v(ht,nt)},$$slots:{default:!0}})}),v(qe,Qe)},$$slots:{default:!0}})}),v(Be,Ve)},$$slots:{default:!0}})}),U(ne),v(Q,De)},$$slots:{default:!0}})}),v(N,M)},$$slots:{default:!0}})}),v(u,k),he()}qn(["click"]);var eh=J("<div><!></div>");function ks(u,e){fe(e,!0);var n=eh(),a=W(n);xe(a,()=>e.children??Oe),U(n),ft(s=>cr(n,1,s),[()=>yr(wn("flex flex-col",e.class))]),v(u,n),he()}class Cs{id;name;children;parent;constructor(e,n,a=[],s=null){this.id=e,this.name=n,this.children=a,this.parent=s}}class jt extends Cs{layer;constructor(e,n,a,s=[],f=null){super(e,n,s,f),this.layer=a}}class bn extends jt{featureLayer;field;constructor(e,n,a,s,f=[],d=null){super(e,n,a,f,d),this.field=s,this.featureLayer=a}}var Nt=(u=>(u.Inactive="inactive",u.Indeterminate="indeterminate",u.Active="active",u))(Nt||{}),Gr=(u=>(u.Hidden="hidden",u.Suspended="suspended",u.Visible="visible",u))(Gr||{}),Dr=(u=>(u.None="none",u.GroupLayer="group-layer",u.FeatureLayer="feature-layer",u.TileLayer="tile-layer",u.Field="field",u))(Dr||{});class Is{#e=ie(!1);get initialized(){return i(this.#e)}set initialized(e){O(this.#e,e,!0)}#t=null;#r=null;#n=ie(vt([]));#i=B(()=>{const e=new br;return this.#x(i(this.#n),e),e});#a=ie(vt(new br));#o=ie(vt(new br));#s=ie(vt(new br));#l=ie(vt(new br));#f=ie(vt(new br));#h=null;initialize(e,n,a,s,f){if(this.initialized)throw new Error("TreeviewStore is already initialized.");if(this.initialized=!0,!n)throw new Error("TreeviewStore requires a valid TreeviewConfigStore to initialize.");if(this.#t=n,s)for(const d of s)i(this.#f).set(d.id,d);if(f&&(this.#h=f),!e)throw new Error("TreeviewStore requires a valid array of layers to initialize.");this.#r=a,this.#p(e),O(this.#n,this.#y(e),!0)}getNodeById(e){return this.#d(),i(this.#i).get(e)}getNodes(){return this.#d(),i(this.#n)}getVisibleNodes(){this.#d();const e=[];for(const[n,a]of i(this.#a)){if(!a)continue;const s=i(this.#i).get(n);s&&e.push(s)}return e}getNonHiddenNodes(){return this.#d(),this.#c(i(this.#n))}clearSelections(){for(const e of i(this.#a).keys()){i(this.#a).set(e,!1);const n=i(this.#i).get(e);n&&n instanceof jt&&(n.layer.visible=!1)}i(this.#l).clear()}#c(e){this.#d();const n=[];for(const a of e){const s=this.#v(a.id);if(!(s&&s.isHidden)&&(n.push(a),a.children?.length)){const f=this.#c(a.children);n.push(...f)}}return n}getVisibilityState(e){return this.#d(),i(this.#a).get(e)??!1}setVisibilityState(e,n){this.#d();const a=i(this.#i).get(e);if(!a)throw new Error(`Tree node not found for ID: ${e}`);if(!(a instanceof jt))throw new Error(`Tree node is not a layer node: ${e}`);const s=this.#v(e);if(s?.disableVisibilityToggle||(i(this.#a).set(e,n),a.layer.visible=n,this.updateDrawState(a,n),a instanceof bn&&(a.featureLayer.displayField=n?a.field.name:"",n&&this.#h&&(console.log("[TreeviewStore] Applying custom renderer for field:",a.field.name),this.#h.applyCustomRenderer(a.featureLayer,a.field.name))),this.#u(a,n),!s||s.isHidden)||(s.visibilityDependencyIds?.length&&this.#g(a,n),!s.visibilityGroupId))return;const f=s.visibilityGroupId;let d=i(this.#l).get(f);d||(d=[],i(this.#l).set(f,d));const g=this.#m(f);if(!g)throw new Error(`Visibility group config not found for group ID: ${f}`);if(!n){const p=d.indexOf(e);d.splice(p,1);return}const y=p=>{i(this.#a).set(p,!1);const w=i(this.#i).get(p);if(w&&w instanceof jt){w.layer.visible=!1,this.updateDrawState(w,!1),this.#u(w,!1);const k=this.#v(p);k&&k.visibilityDependencyIds?.length&&this.#g(w,!1)}const D=d.indexOf(p);D>=0&&d.splice(D,1)};for(;d.length>=g.maxVisibleLayers;){const p=d[0];y(p)}d.push(e),this.#u(a,n),s.visibilityDependencyIds?.length&&this.#g(a,n)}async updateDrawState(e,n){if(!this.#r)return;if(!n){i(this.#o).delete(e.id),i(this.#s).get(e.id)?.remove(),i(this.#s).delete(e.id);return}if(!(e instanceof jt)||!(e.layer instanceof ko))return;const a=await this.#r.getLayerView(e.layer);if(!a)return;this.setInitialDrawState(e,a);const s=lc(()=>a.suspended,(f,d)=>{d&&!f?i(this.#o).set(e.id,Gr.Visible):!d&&f&&i(this.#o).set(e.id,Gr.Suspended)});i(this.#s).set(e.id,s)}getNodeDrawState(e){return this.#d(),i(this.#o).get(e)??Gr.Hidden}setInitialDrawState(e,n){!(e instanceof jt)||!(e.layer instanceof ko)||n&&(n.suspended?i(this.#o).set(e.id,Gr.Suspended):i(this.#o).set(e.id,Gr.Visible))}clearDrawStateHandles(){for(const e of i(this.#s).values())e.remove();i(this.#s).clear()}cleanup(){this.initialized=!1,i(this.#a).clear(),i(this.#l).clear(),i(this.#f).clear(),O(this.#n,[],!0),i(this.#i).clear(),i(this.#o).clear(),this.clearDrawStateHandles()}#u(e,n){const a=e.parent;if(a){if(!(a instanceof jt)){this.#u(a,n);return}i(this.#a).set(a.id,n),a.layer.visible=n,this.#u(a,n)}}#g(e,n){const a=this.#v(e.id);if(a&&a.visibilityDependencyIds?.length)for(const s of a.visibilityDependencyIds){const f=i(this.#i).get(s);f&&f instanceof jt&&(i(this.#a).set(s,n),f.layer.visible=n,this.#u(f,n))}}#m(e){if(e&&this.#t)return this.#t.getVisibilityGroupConfig(e)}#p(e){this.#t&&this.#t.resolveInheritance(e)}#y(e){const n=e.map(a=>this.#w(a,void 0));return this.#b([...n])}#v(e){if(e&&this.#t)return this.#t.getItemConfig(e)}#b(e){e.reverse();for(const n of e)n.children?.length&&this.#b(n.children);return e}#w(e,n){const a=this.#v(e.id);if(a&&a.customConverterId){if(!i(this.#f).has(a.customConverterId))throw new Error(`Custom converter not found: ${a.customConverterId}`);const f=i(this.#f).get(a.customConverterId);if(!f)throw new Error(`Custom converter not found: ${a.customConverterId}`);return f.layerToNode(e,n??null)}const s=new jt(e.id,e.title,e,[],n);if(e.visible=a?.disableVisibilityToggle?e.visible:a?.isHidden?!1:a?.isVisibleOnInit??!1,i(this.#a).set(e.id,e.visible),this.updateDrawState(s,e.visible),this.#P(e)&&a?.showFields){const f=e;f.loaded||console.warn(`Layer not loaded: ${e.id}`);for(const d of f.fields??[]){const g=this.#S(d,s);s.children.push(g)}}if(this.#I(e)){const f=e;return s.children=f.layers.toArray().map(d=>this.#w(d,s)),s}if(this.#k(e)){const f=e;if(f.sublayers&&f.sublayers.length>0){const d=f.sublayers;s.children=d.toArray().map(this.#_)}}return s}#S(e,n){const a=this.#C(n.id,e.name),s=new bn(a,e.alias||e.name,n.layer,e,[],n),f=this.#v(a);return i(this.#a).set(a,f?.isVisibleOnInit??!1),s}#k(e){return e.type==="map-image"||e.type==="wms"}#_(e){const n=new jt(e.uid,e.title,e);return e.sublayers?.length&&(n.children=e.sublayers.toArray().map(this.#_)),n}#x(e,n){for(const a of e)n.set(a.id,a),a.children?.length&&this.#x(a.children,n)}#C(e,n){return`${e}-${n}`}#I(e){return e.type==="group"}#P(e){return e.type==="feature"}#d(){if(!this.initialized)throw new Error("TreeviewStore is not initialized. Call initialize() first.")}}const qo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m8.023 1.023-8 4.5 8 4.5 8-4.5zm-5.96 4.5 5.96-3.352 5.96 3.352-5.96 3.353zm13.96 3-8 4.5-8-4.5 1.02-.573 6.98 3.926 6.98-3.926zm-8 6.353 6.98-3.926 1.02.573-7.914 4.452a.18.18 0 0 1-.171 0L.023 11.523l1.02-.573z"/><path fill="none" d="M0 0h16v16H0z"/></svg>',Ko='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.793 14.8A9.2 9.2 0 0 1 0 14.089l2.133-12.6a10.3 10.3 0 0 0 2.018.44 4.2 4.2 0 0 0-.143.991 12 12 0 0 1-1.073-.18l-1.81 10.697a9.5 9.5 0 0 0 2.668.363 11 11 0 0 0 3.888-.748 12.8 12.8 0 0 1 4.526-.852 8.3 8.3 0 0 1 2.489.376l-1.72-10.163a8 8 0 0 0-1.065-.278 4 4 0 0 0-.399-1.07 8.4 8.4 0 0 1 2.355.623L16 14.29a6.6 6.6 0 0 0-3.793-1.089c-3.665 0-4.749 1.6-8.414 1.6zM8 0a2.893 2.893 0 0 1 3 2.999V7l-3 3-3-3V2.999A2.893 2.893 0 0 1 8 0M6 2.999v3.587l2 2 2-2V2.999A1.893 1.893 0 0 0 8 1a1.893 1.893 0 0 0-2 1.999M8 1.75A1.25 1.25 0 1 0 9.25 3 1.25 1.25 0 0 0 8 1.75"/><path fill="none" d="M0 0h16v16H0z"/></svg>',th='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 14.09 1.2 7h1.014l-1.09 6.437a9.5 9.5 0 0 0 2.669.363 11 11 0 0 0 3.888-.748 12.8 12.8 0 0 1 4.526-.852 8.3 8.3 0 0 1 2.489.376l-1.72-10.163a7.2 7.2 0 0 0-2.27-.399 5.9 5.9 0 0 0-2.367.434q-.165.06-.339.12V1.506a6.9 6.9 0 0 1 2.706-.493 8.2 8.2 0 0 1 3.161.674L16 14.29a6.6 6.6 0 0 0-3.793-1.089c-3.665 0-4.749 1.6-8.414 1.6A9.2 9.2 0 0 1 0 14.089zM4 11V7h4V4h4v7zm4-2.5a.954.954 0 0 1-.995 1.062h-.002L7 10h1zm3 1.5v-.487A2.96 2.96 0 0 1 9.5 10zM9 7h2V5H9zm0 1v1h.5a2.7 2.7 0 0 0 1.5-.721V8zm-4 2h1v-.5c0-.574.312-.889.93-.936l.068-.005L7 8.5a1.2 1.2 0 0 1 .119-.5H5zM2 6V1h5v5zm1.564-2.19a1.6 1.6 0 0 1 .442-.756.9.9 0 0 1 .74-.179A2.2 2.2 0 0 1 5.182 2H3v2.34a.56.56 0 0 0 .336-.09 1 1 0 0 0 .228-.44M6 2.56a1.26 1.26 0 0 0-.297.609 1 1 0 0 1-.279.544.87.87 0 0 1-.756.161l-.05-.009a2 2 0 0 0-.11.276A1.85 1.85 0 0 1 3.992 5H6z"/><path fill="none" d="M0 0h16v16H0z"/></svg>',rh='<path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>',nh='<path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>',ih='<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14,2 14,8 20,8"/>',Ps=(u,e,n,a)=>e?ah(u,n):n?a?rh:nh:ih,ah=(u,e)=>{switch(u.type){case"group":return qo;case"feature":return Ko;case"tile":return th;default:return e?qo:Ko}};function oh(u){const e=u-1;return e*e*e+1}var sh=J('<div class="relative ml-4 w-full"><div class="tree-guide-line svelte-tfs16z"></div> <div class="tree-children svelte-tfs16z"></div></div>'),lh=J('<div class="w-full"><!> <!></div>');function As(u,e){const n=K(e,"isOpen",3,!1),a=K(e,"childNodes",3,null),s=K(e,"duration",3,300);var f=lh(),d=W(f);xe(d,()=>e.content??Oe);var g=Y(d,2);{var y=p=>{var w=sh(),D=Y(W(w),2);er(D,21,()=>a()??[],k=>k.id,(k,S)=>{var _=V(),E=C(_);xe(E,()=>e.childNode??Oe,()=>i(S)),v(k,_)}),U(D),U(w),yi(1,D,()=>Bo,()=>({duration:s(),easing:oh})),yi(2,D,()=>Bo,()=>({duration:s()})),v(p,w)};te(g,p=>{n()&&a()&&p(y)})}U(f),v(u,f)}const ch=Il({base:"hover:bg-muted hover:text-muted-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium outline-none transition-[color,box-shadow] focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",variants:{variant:{default:"bg-transparent",outline:"border-input shadow-xs hover:bg-accent hover:text-accent-foreground border bg-transparent"},size:{default:"h-9 min-w-9 px-2",sm:"h-8 min-w-8 px-1.5",lg:"h-10 min-w-10 px-2.5"}},defaultVariants:{variant:"default",size:"default"}});function uh(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=K(e,"pressed",15,!1),s=K(e,"size",3,"default"),f=K(e,"variant",3,"default"),d=Le(e,["$$slots","$$events","$$legacy","ref","pressed","class","size","variant"]);var g=V(),y=C(g);{let p=B(()=>Wt(ch({variant:f(),size:s()}),e.class));ae(y,()=>uu,(w,D)=>{D(w,We({"data-slot":"toggle",get class(){return i(p)}},()=>d,{get ref(){return n()},set ref(k){n(k)},get pressed(){return a()},set pressed(k){a(k)}}))})}v(u,g),he()}function Ts(u,e){{let n=B(()=>e.isOpen?"rotate-90":"rotate-0");cc(u,{get class(){return`h-4 w-4 text-muted-foreground transition-transform duration-200 ease-in-out ${i(n)??""}`}})}}const pa="mb-1 cursor-pointer rounded-md border border-border p-2 text-left",ya="transition-all duration-150 hover:border-border/50 hover:bg-gray-100 hover:shadow-sm",dh="transition-colors hover:bg-blue-500",ba="text-sm font-normal",wa="bg-card",Ds="bg-accent text-accent-foreground",fh="!h-auto !min-h-9 !whitespace-normal data-[state=on]:!bg-accent data-[state=on]:!text-accent-foreground data-[state=on]:hover:!bg-accent data-[state=on]:hover:!text-accent-foreground";function hh(u={}){const{enhancedHover:e=!1,includeFont:n=!1,pressed:a=!1}=u;let s=pa;return e?s+=" "+ya:s+=" "+dh,n&&(s+=" "+ba),a?s+=" "+Ds:s+=" "+wa,s}var vh=J('<div class="flex w-full !items-center !justify-between gap-2"><div class="pointer-events-none !flex min-w-0 flex-1 !items-center gap-1"><span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div>'),gh=J('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><!> <span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function Ho(u,e){const n=`calc(100% - ${e.depth*1}rem)`,a=`${pa} ${ya} ${fh} ${wa} ${ba}`,s=`${pa} ${ya} ${ba}`;var f=V(),d=C(f);{var g=p=>{uh(p,{get pressed(){return e.pressed},get class(){return a},variant:"outline",get style(){return`width: ${n};`},get onPressedChange(){return e.onclick},children:(w,D)=>{var k=vh(),S=W(k),_=W(S),E=W(_);Nn(E,()=>e.icon),U(_);var N=Y(_,2),T=W(N,!0);U(N),U(S);var M=Y(S,2);xe(M,()=>e.children??Oe),U(k),ft(()=>Mt(T,e.name)),v(w,k)},$$slots:{default:!0}})},y=p=>{var w=gh();w.__click=function(...H){e.onclick?.apply(this,H)};var D=W(w),k=W(D),S=W(k);Ts(S,{get isOpen(){return e.isOpen}});var _=Y(S,2),E=W(_);Nn(E,()=>e.icon),U(_);var N=Y(_,2),T=W(N,!0);U(N),U(k);var M=Y(k,2);xe(M,()=>e.children??Oe),U(D),U(w),ft(()=>{cr(w,1,`${s} ${e.pressed?Ds:wa}`),on(w,`width: ${n};`),Mt(T,e.name)}),v(p,w)};te(d,p=>{e.isTogglable?p(g):p(y,!1)})}v(u,f)}qn(["click"]);function Es(u,e){fe(e,!0);const n=E=>{var N=V(),T=C(N);{var M=H=>{var Z=V(),re=C(Z);{var Q=De=>{Ho(De,{isTogglable:!1,get pressed(){return i(p)},get icon(){return i(w)},get name(){return e.node.name},get depth(){return s()},onclick:_,get isOpen(){return i(y)}})},le=De=>{Ho(De,{isTogglable:!0,get pressed(){return i(p)},get icon(){return i(w)},get name(){return e.node.name},get depth(){return s()},onclick:S,get isOpen(){return i(y)}})};te(re,De=>{d?De(Q):De(le,!1)})}v(H,Z)};te(T,H=>{e.treeviewConfigStore.getItemConfig(e.node.id)?.isHidden||H(M)})}v(E,N)},a=(E,N=Oe)=>{var T=V(),M=C(T);{var H=Z=>{{let re=B(()=>s()+1);Es(Z,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return N()},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get getNodeVisibility(){return e.getNodeVisibility},get depth(){return i(re)},get useLayerTypeIcon(){return f()}})}};te(M,Z=>{d&&i(y)&&!e.treeviewConfigStore.getItemConfig(N().id)?.isHidden&&Z(H)})}v(E,T)},s=K(e,"depth",3,0),f=K(e,"useLayerTypeIcon",3,!1),d=!!(e.node.children&&e.node.children.length),g=!d;let y=ie(!1),p=ie(!1),w=ie("");function D(){return!e.node.children||!e.getNodeVisibility?!1:e.node.children.some(E=>{const N=e.getNodeVisibility(E.id);return N!==void 0?N:E instanceof jt?E.layer.visible:!1})}lt(()=>{if(!(!e.node||!(e.node instanceof jt))){if(d)O(p,D(),!0);else{const E=e.getNodeVisibility?e.getNodeVisibility(e.node.id):void 0;O(p,E!==void 0?E:e.node.layer.visible,!0)}O(w,Ps(e.node.layer,f(),d,i(y)),!0)}});function k(){!g||!e.onNodeVisibilityChange||d||(O(p,!i(p)),e.onNodeVisibilityChange(e.node,i(p)))}function S(){d||k(),e.onNodeClick?.(e.node)}function _(){O(y,!i(y)),e.onNodeClick?.(e.node)}{let E=B(()=>d?e.node.children:null);As(u,{get isOpen(){return i(y)},get content(){return n},get childNodes(){return i(E)},get childNode(){return a}})}he()}function mh(u,e){fe(e,!0);const n=new Is;function a(){n.clearSelections()}lt(()=>{!e.webMap||n.initialized||n.initialize(e.webMap.layers.toArray(),e.treeviewConfigStore,null)}),lt(()=>{n.initialized&&!n.getVisibleNodes().length&&e.areaSelectionStore.layerId&&n.setVisibilityState(e.areaSelectionStore.layerId,!0)}),lt(()=>{if(!n.initialized||!n.getVisibleNodes().length)return;const y=n.getVisibleNodes().find(p=>p instanceof jt&&p.layer instanceof Io);if(!y||!(y instanceof jt)){console.warn("Visible node is not a FeatureLayer");return}if(!y.layer||!(y.layer instanceof Io)){console.warn("Visible node layer is not a FeatureLayer",y.layer.type);return}e.areaSelectionStore.setLayerId(y.id)});var s={clearSelections:a},f=V(),d=C(f);{var g=y=>{var p=V(),w=C(p);ae(w,()=>ks,(D,k)=>{k(D,{children:(S,_)=>{var E=V(),N=C(E);er(N,17,()=>n.getNodes(),T=>T.id,(T,M)=>{Es(T,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return i(M)},onNodeClick:()=>{},onNodeVisibilityChange:(H,Z)=>n.setVisibilityState(H.id,Z),getNodeVisibility:H=>n.getVisibilityState(H),depth:0,useLayerTypeIcon:!0})}),v(S,E)},$$slots:{default:!0}})}),v(y,p)};te(d,y=>{n.initialized&&y(g)})}return v(u,f),he(s)}class ph{configStore;constructor(e){this.configStore=e}}class yh extends ph{id="aliasPath";layerToNode(e,n){const a=new jt(e.id,e.title,e,[],n),s=this.configStore.getItemConfig(e.id);if(this.#r(e)&&s?.showFields){const f=e;f.loaded||console.warn(`Layer not loaded: ${e.id}`);const d=new Map;for(const g of f.fields??[]){const y=this.configStore.getItemConfig(this.#t(e.id,g.name));!y||y.isHidden||this.#e(g,a,d)}a.children.sort((g,y)=>g.children.length>0&&y.children.length===0?1:g.children.length===0&&y.children.length>0?-1:0)}return a}#e(e,n,a=new Map){const s=this.#t(n.id,e.name),d=ql(e.alias||"")?.split("|").map(k=>k.trim()).filter(Boolean)??[];if(d.length===0){const k=new bn(s,e.alias||e.name,n.layer,e,[],n);return n.children.push(k),k}const g=d.slice(0,-1),y=d[d.length-1];let p=n;const w=(k,S)=>{k.children??=[],k.children.includes(S)||k.children.push(S)};for(let k=0;k<g.length;k++){const S=g[k],_=d.slice(0,k+1).join("::"),E=`${n.id}::${_}`;let N=a.get(E);N||(N=new Cs(E,S,[],p),a.set(E,N),w(p,N)),p=N}const D=new bn(s,y||e.name,n.layer,e,[],p);return w(p,D),D}#t(e,n){return`${e}-${n}`}#r(e){return e.type==="feature"}}function bh(u){switch(u.type){case"group":return Dr.GroupLayer;case"feature":return Dr.FeatureLayer;case"tile":return Dr.TileLayer;default:throw new Error(`Unsupported layer type: ${u.type}`)}}class Uo{#e=[];#t=new Map;#r=[];#n=new Map;#i=[];#a=new Map;#o=new Set;constructor(e){if(!e)throw new Error("TreeviewConfigStore requires a valid configuration object.");this.#e=e.items??[],this.#t=new Map(this.#e.map(n=>[n.id,n])),this.#r=e.visibilityGroups??[],this.#n=new Map(this.#r.map(n=>[n.id,n])),this.#i=e.inheritanceGroups??[],this.#a=new Map(this.#i.map(n=>[n.id,n])),e.fieldsToHide&&(this.#o=new Set(e.fieldsToHide.map(n=>n.trim().toLowerCase())))}getItemConfig(e){return this.#t.get(e)}getVisibilityGroupConfig(e){return this.#n.get(e)}getInheritanceGroupConfig(e){return this.#a.get(e)}resolveInheritance(e){if(!(e.length===0||!this.#e||this.#e.length===0))for(const n of e){const a=this.getItemConfig(n.id);this.#s(n,a)}}#s(e,n){const a=this.#l(e,n);if(this.#y(e)&&a.showFields){const s=e;s.loaded||console.warn(`Layer not loaded: ${e.id}`);for(const f of s.fields??[])this.#f(this.#m(e.id,f.name),f.alias||f.name,a)}if(this.#p(e)){const s=e;for(const f of s.layers.toArray())this.#s(f,a)}}#l(e,n){const a=this.#h(e.id,n);return a.type===Dr.None&&(a.type=bh(e)),a}#f(e,n,a){const s=this.#h(e,a);return s.type===Dr.None&&(s.type=Dr.Field),this.#o.has(n.trim().toLowerCase())&&(s.isHidden=!0),s}#h(e,n){let a=this.getItemConfig(e);const s=a?.inheritanceGroupId?this.getInheritanceGroupConfig(a.inheritanceGroupId):this.getInheritanceGroupConfig(n?.inheritanceGroupId??"");return a={id:e,type:Dr.None,isDownloadable:this.#c(s,"isDownloadable",a,n,!0),isVisibleOnInit:this.#c(s,"isVisibleOnInit",a,n,!1),isHidden:this.#c(s,"isHidden",a,n,!1),disableVisibilityToggle:this.#c(s,"disableVisibilityToggle",a,n,!1),isOpenOnInit:this.#c(s,"isOpenOnInit",a,n,!1),showFields:this.#c(s,"showFields",a,n,!1),visibilityDependencyIds:this.#c(s,"visibilityDependencyIds",a,n,[]),visibilityGroupId:this.#c(s,"visibilityGroupId",a,n,void 0),customConverterId:this.#c(s,"customConverterId",a,n,void 0),inheritanceGroupId:this.#c(s,"inheritanceGroupId",a,n,void 0)},this.#g(a),this.#u(a),a}#c(e,n,a,s,f){const d=a?.[n];return d!==void 0?d:e?.inheritedProperties.includes(n)&&s?s[n]??f:f}#u(e){if(this.#t.has(e.id))throw new Error(`Item with id ${e.id} already exists.`);this.#e.push(e),this.#t.set(e.id,e)}#g(e){this.#t.has(e.id)&&(this.#e=this.#e.filter(n=>n.id!==e.id),this.#t.delete(e.id))}#m(e,n){return`${e}-${n}`}#p(e){return e.type==="group"}#y(e){return e.type==="feature"}}var wh=J("<button><!></button>");function Go(u,e){fe(e,!0);let n=K(e,"checked",15,!1),a=K(e,"indeterminate",11,!1),s=K(e,"disabled",3,!1),f=Le(e,["$$slots","$$events","$$legacy","checked","indeterminate","class","onCheckedChange","disabled"]);function d(){s()||(n(!n()),e.onCheckedChange?.(n()))}function g(S){s()||(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),S.stopPropagation(),d())}var y=wh(),p=S=>{S.stopPropagation(),d()};Ft(y,S=>({type:"button",class:"visibility-btn",onclick:p,onkeydown:g,disabled:s(),"aria-pressed":n(),role:"switch","aria-label":n()?"Hide layer":"Show layer",title:n()&&!a()?"Visible":a()?"Zoom in/out to view layer":"Not visible",...f,[wl]:S}),[()=>({visible:n(),indeterminate:a()})],void 0,"svelte-mzs82z");var w=W(y);{var D=S=>{Oo(S,{class:"size-4"})},k=S=>{var _=V(),E=C(_);{var N=M=>{Oo(M,{class:"size-4"})},T=M=>{gu(M,{class:"size-4"})};te(E,M=>{a()?M(N):M(T,!1)},!0)}v(S,_)};te(w,S=>{n()?S(D):S(k,!1)})}U(y),v(u,y),he()}var _h=J('<div data-slot="checkbox-indicator" class="text-current transition-none"><!></div>');function xh(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=K(e,"checked",11,!1),s=K(e,"indeterminate",11,!1),f=Le(e,["$$slots","$$events","$$legacy","ref","checked","indeterminate","class"]),d=ie(vt(a())),g=ie(vt(s()));lt(()=>{O(d,a())}),lt(()=>{O(g,s())});var y=V(),p=C(y);{const w=(k,S)=>{let _=()=>S?.().checked,E=()=>S?.().indeterminate;var N=_h(),T=W(N);{var M=Z=>{xu(Z,{class:"size-3.5"})},H=Z=>{var re=V(),Q=C(re);{var le=De=>{ps(De,{class:"size-3.5"})};te(Q,De=>{E()&&De(le)},!0)}v(Z,re)};te(T,Z=>{_()?Z(M):Z(H,!1)})}U(N),v(k,N)};let D=B(()=>Wt("peer flex size-4 shrink-0 items-center justify-center rounded-[4px] border border-input shadow-xs transition-shadow outline-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[state=checked]:border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:bg-input/30 dark:aria-invalid:ring-destructive/40 dark:data-[state=checked]:bg-primary",e.class));ae(p,()=>gs,(k,S)=>{S(k,We({"data-slot":"checkbox",get class(){return i(D)}},()=>f,{get ref(){return n()},set ref(_){n(_)},get checked(){return i(d)},set checked(_){O(d,_,!0)},get indeterminate(){return i(g)},set indeterminate(_){O(g,_,!0)},children:w,$$slots:{default:!0}}))})}v(u,y),he()}var Sh=J("<div><!></div>");function Wo(u,e){fe(e,!0);let n=B(()=>e.getDownloadState?.(e.node)??Nt.Inactive),a=B(()=>i(n)===Nt.Active),s=B(()=>i(n)===Nt.Indeterminate);function f(y){y.stopPropagation();const p=i(n)===Nt.Active?Nt.Inactive:Nt.Active;e.onDownloadStateChanged?.(e.node,p)}var d=Sh(),g=W(d);xh(g,{get checked(){return i(a)},get indeterminate(){return i(s)},onclick:f,title:"Download"}),U(d),v(u,d),he()}var kh=J('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><!> <span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function Yo(u,e){fe(e,!0);const n=K(e,"isFolder",3,!1),a=K(e,"isOpen",3,!1),s=`calc(100% - ${e.depth*1}rem)`;var f=kh();f.__click=function(...E){e.onclick?.apply(this,E)};var d=W(f),g=W(d),y=W(g);{var p=E=>{Ts(E,{get isOpen(){return a()}})};te(y,E=>{n()&&E(p)})}var w=Y(y,2),D=W(w);Nn(D,()=>e.icon),U(w);var k=Y(w,2),S=W(k,!0);U(k),U(g);var _=Y(g,2);xe(_,()=>e.children??Oe),U(d),U(f),ft(E=>{cr(f,1,E),on(f,`width: ${s};`),Mt(S,e.name)},[()=>yr(hh({enhancedHover:!0,includeFont:!0}))]),v(u,f),he()}qn(["click"]);var Ch=J('<div class="flex items-center gap-2"><!> <!></div>'),Ih=J('<div class="flex items-center gap-2"><!> <!></div>');function Os(u,e){fe(e,!0);const n=M=>{var H=V(),Z=C(H);{var re=Q=>{var le=V(),De=C(le);{var Me=ce=>{Yo(ce,{get icon(){return i(k)},get name(){return e.node.name},get depth(){return f()},onclick:T,get isFolder(){return g},get isOpen(){return i(w)},children:pe=>{var Be=Ch(),Ze=W(Be);{var Ve=Se=>{Wo(Se,{get node(){return e.node},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState}})};te(Ze,Se=>{e.isDownloadable&&Se(Ve)})}var Te=Y(Ze,2);{var ze=Se=>{{let je=B(()=>e.getNodeDrawState?.(e.node.id)===Gr.Suspended);Go(Se,{get checked(){return i(D)},get indeterminate(){return i(je)},onCheckedChange:E})}};te(Te,Se=>{y&&Se(ze)})}U(Be),v(pe,Be)},$$slots:{default:!0}})},ne=ce=>{Yo(ce,{get icon(){return i(k)},get name(){return e.node.name},get depth(){return f()},onclick:N,get isFolder(){return g},children:pe=>{var Be=Ih(),Ze=W(Be);{var Ve=Se=>{Wo(Se,{get node(){return e.node},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState}})};te(Ze,Se=>{e.isDownloadable&&Se(Ve)})}var Te=Y(Ze,2);{var ze=Se=>{{let je=B(()=>e.getNodeDrawState?.(e.node.id)===Gr.Suspended);Go(Se,{get checked(){return i(D)},get indeterminate(){return i(je)},onCheckedChange:E})}};te(Te,Se=>{y&&Se(ze)})}U(Be),v(pe,Be)},$$slots:{default:!0}})};te(De,ce=>{g?ce(Me):ce(ne,!1)})}v(Q,le)};te(Z,Q=>{s()?.getItemConfig(e.node.id)?.isHidden||Q(re)})}v(M,H)},a=(M,H=Oe)=>{var Z=V(),re=C(Z);{var Q=le=>{{let De=B(()=>s()?.getItemConfig(H().id)?.isDownloadable??!0),Me=B(()=>f()+1);Os(le,{get treeviewConfigStore(){return s()},get node(){return H()},get isDownloadable(){return i(De)},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState},get onFilterClicked(){return e.onFilterClicked},get hasFiltersApplied(){return e.hasFiltersApplied},get getNodeVisibility(){return e.getNodeVisibility},get getNodeDrawState(){return e.getNodeDrawState},get depth(){return i(Me)},get useLayerTypeIcon(){return d()}})}};te(re,le=>{g&&i(w)&&!s()?.getItemConfig(H().id)?.isHidden&&le(Q)})}v(M,Z)},s=K(e,"treeviewConfigStore",3,null),f=K(e,"depth",3,0),d=K(e,"useLayerTypeIcon",3,!1),g=!!(e.node.children&&e.node.children.length),y=!g;let p=!1,w=ie(!1),D=ie(!1),k=ie(""),S=ie(!1),_=ie(!1);lt(()=>{p||(O(w,s()?.getItemConfig(e.node.id)?.isOpenOnInit??!1,!0),p=!0)}),lt(()=>{if(!e.node)return;const M=e.getNodeVisibility?e.getNodeVisibility(e.node.id):!1;O(D,M??!1,!0),e.node instanceof jt&&O(k,Ps(e.node.layer,d(),g,i(w)),!0)}),lt(()=>{if(!(e.node instanceof jt))return;const M=(e.getDownloadState?.(e.node)===Nt.Active&&e.node.layer.type==="feature")??!1;M&&!i(S)?(O(S,!0),O(_,!1)):!M&&i(S)&&(O(_,!0),setTimeout(()=>{O(S,!1),O(_,!1)},180))});function E(){!y||!e.onNodeVisibilityChange||(O(D,!i(D)),e.onNodeVisibilityChange(e.node,i(D)))}function N(){e.onNodeClick?.(e.node)}function T(){O(w,!i(w)),e.onNodeClick?.(e.node)}{let M=B(()=>g?e.node.children:null);As(u,{get isOpen(){return i(w)},get content(){return n},get childNodes(){return i(M)},get childNode(){return a}})}he()}class Ph{#e;#t;constructor(e,n){this.#e=e,this.#t=n}updateSelection(e,n){if(!this.#t.getItemConfig(e.id)?.isHidden){if(!(e instanceof jt)){this.updateChildrenSelection(e,n);return}if(e instanceof bn){this.updateFieldSelection(e,n);return}this.updateLayerSelection(e,n)}}getSelectionState(e){if(!(e instanceof jt))return this.determineSelectionStateFromChildren(e);if(this.isGroupLayer(e))return this.determineSelectionStateFromChildren(e);let n;return e instanceof bn?(n=this.#e.getSelection(e.featureLayer.id),n&&n.selectedFieldIds.has(e.field.name)?Nt.Active:Nt.Inactive):(n=this.#e.getSelection(e.id),n?this.isFeatureLayer(e)&&e.children&&e.children.length>0?this.determineSelectionStateFromChildren(e):Nt.Active:Nt.Inactive)}updateLayerSelection(e,n){let a=this.#e.getSelection(e.id);switch(n){case Nt.Active:!a&&!this.isGroupLayer(e)&&(a=this.createAndAddDataSelection(e.id));for(const s of e.children||[])this.updateSelection(s,n);break;case Nt.Inactive:a&&!this.isGroupLayer(e)&&this.#e.removeSelection(e.id),this.updateChildrenSelection(e,n);break}}updateFieldSelection(e,n){let a=this.#e.getSelection(e.featureLayer.id);switch(n){case Nt.Active:a||(a=this.createAndAddDataSelection(e.featureLayer.id)),this.#e.addOrUpdateSelection(e.featureLayer.id,[...a.selectedFieldIds,e.field.name]);break;case Nt.Inactive:{if(!a)break;const s=new Tr(a.selectedFieldIds);s.delete(e.field.name),this.#e.addOrUpdateSelection(e.featureLayer.id,[...s]),s.size===0&&this.#e.removeSelection(a.layerId);break}}}updateChildrenSelection(e,n){for(const a of e.children||[])this.updateSelection(a,n)}determineSelectionStateFromChildren(e){let n=0,a=0;for(const s of e.children||[]){if(this.#t.getItemConfig(s.id)?.isHidden)continue;a++;const d=this.getSelectionState(s);if(d===Nt.Active||this.isFeatureLayer(s)&&d!==Nt.Inactive)n++;else if(d===Nt.Indeterminate)return Nt.Indeterminate}return n===0?Nt.Inactive:n===a?Nt.Active:Nt.Indeterminate}createAndAddDataSelection(e){const n={layerId:e,selectedFieldIds:new Tr};return this.#e.addSelection(n),n}isGroupLayer(e){return e instanceof jt&&e.layer.type==="group"}isFeatureLayer(e){return e instanceof jt&&e.layer.type==="feature"}}function Ah(u,e){fe(e,!0);const n=K(e,"fieldFilterMenuStore",7);function a(){s.clearSelections()}const s=new Is,f=new Ph(e.dataSelectionStore,e.treeviewConfigStore);lt(()=>{if(!e.webMap||s.initialized)return;(async()=>{await e.webMap.when(),await d(e.webMap.layers.toArray());const M=new yh(e.treeviewConfigStore);s.initialize(e.webMap.layers.toArray(),e.treeviewConfigStore,e.layerViewProvider,[M],e.customRendererService)})()});async function d(T){for(const M of T)M.type==="feature"&&!M.loaded&&await M.load(),M.type==="group"&&await d(M.layers.toArray())}function g(T,M){console.log(`[tree-view] onNodeVisibilityChange: Setting visibility of node ${T.id} to ${M}`),s.setVisibilityState(T.id,M)}function y(T){return s.getNodeDrawState(T)}function p(T,M){f.updateSelection(T,M)}function w(T){return f.getSelectionState(T)}function D(T){if(n().ActiveLayer?.uid===T){n().ActiveLayer=null;return}const H=s.getNodeById(T);!H||!(H instanceof jt)||(n().ActiveLayer=H.layer)}function k(T){const M=e.dataSelectionStore.getSelection(T);if(!M?.selectedFieldIds)return!1;const H=s.getNodeById(T);if(!H||!(H instanceof jt))return!1;const Z=H.layer.fields?.length||0,re=M?.selectedFieldIds.size||0;return re>0&&re!==Z}var S={clearSelections:a},_=V(),E=C(_);{var N=T=>{var M=V(),H=C(M);ae(H,()=>ks,(Z,re)=>{re(Z,{children:(Q,le)=>{var De=V(),Me=C(De);er(Me,17,()=>s.getNodes(),ne=>ne.id,(ne,ce)=>{{let ke=B(()=>e.treeviewConfigStore.getItemConfig(i(ce).id)?.isDownloadable??!0);Os(ne,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return i(ce)},get isDownloadable(){return i(ke)},onNodeClick:()=>{},onNodeVisibilityChange:g,getNodeVisibility:pe=>s.getVisibilityState(pe),onDownloadStateChanged:p,getDownloadState:w,onFilterClicked:D,hasFiltersApplied:k,getNodeDrawState:y,depth:0,useLayerTypeIcon:!0})}}),v(Q,De)},$$slots:{default:!0}})}),v(T,M)};te(E,T=>{s.initialized&&T(N)})}return v(u,_),he(S)}var Th=J('<div class="map-view svelte-1c4amku"></div>');function Dh(u,e){fe(e,!0);const n=K(e,"mapView",7);let a=ie(null),s=null;const f="streets-vector";let d,g;function y(){if(!n())throw new Error("MapView is not initialized");return new cs(n())}sn(async()=>{await p(),await k()});async function p(){if(!g){const[{default:T},{default:M},{default:H},{default:Z}]=await Promise.all([Rn(()=>import("../chunks/h5rW6lAS.js").then(re=>re.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),Rn(()=>import("../chunks/DP-0fjQN.js").then(re=>re.a2),__vite__mapDeps([25,1,3,26,27,15,28,13,4,29,5,6,12,17,30,31,8,14,32,22,33,34,35,16,36,37,38,39,40,0,2,7,9,10,11,18,19,20,21,23,24,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url),Rn(()=>import("../chunks/COf4WTrX.js").then(re=>re.W),__vite__mapDeps([63,1,3,4,0,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29,30,31,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,46,47,97,98,99]),import.meta.url),Rn(()=>import("../chunks/O7sg2ysZ.js").then(re=>re.aq),__vite__mapDeps([64,3,1,29,15,5,4,6,12,13,17,30,65,66,67,16,68,31,8,69,70,22,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,9]),import.meta.url)]);d=T,g=M}}async function w(){return new d({basemap:f})}async function D(){if(e.webMap)try{if(await p(),await k(),!n()){console.error("MapView is not initialized");return}n().container=s,n().popupEnabled=!1,n().map=e.webMap,console.log("[uprn-map-view] MapView updated with new webMap"),await e.areaSelectionInteractionStore.refreshLayerView(),await e.areaSelectionInteractionStore.refreshAreas()}catch(T){console.error("Error updating MapView with new webMap:",T)}}async function k(){if(!s){console.error("Map container element was not found");return}try{n().container=s,n().popupEnabled=!1,n().map=e.webMap??void 0,n().ui.move("zoom","top-right"),await n().when(),console.log("[uprn-map-view] Map loaded successfully")}catch(T){console.error("Error loading map:",T),await S()}}async function S(){try{const T=await w();n().container=s,n().popupEnabled=!1,n().map=T,await n().when(),console.log("[uprn-map-view] Fallback map loaded")}catch(T){console.error("Error loading fallback map:",T)}}lt(()=>{e.webMap&&D()}),lt(()=>{n()&&(i(a)?i(a).updateInteractableLayers(e.interactableLayers):O(a,new ic(n(),e.areaSelectionInteractionStore,e.interactableLayers),!0))});function _(){i(a)&&i(a).cleanup(),n()&&n().destroy()}rs(()=>{_()});var E={getLayerViewProvider:y},N=Th();return sr(N,T=>s=T,()=>s),v(u,N),he(E)}function Ms(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=K(e,"value",15,""),s=Le(e,["$$slots","$$events","$$legacy","ref","value","class"]);var f=V(),d=C(f);{let g=B(()=>Wt("flex flex-col gap-2",e.class));ae(d,()=>eu,(y,p)=>{p(y,We({"data-slot":"tabs",get class(){return i(g)}},()=>s,{get ref(){return n()},set ref(w){n(w)},get value(){return a()},set value(w){a(w)}}))})}v(u,f),he()}function la(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{let d=B(()=>Wt("flex-1 outline-none",e.class));ae(f,()=>ru,(g,y)=>{y(g,We({"data-slot":"tabs-content",get class(){return i(d)}},()=>a,{get ref(){return n()},set ref(p){n(p)}}))})}v(u,s),he()}function Fs(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{let d=B(()=>Wt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e.class));ae(f,()=>iu,(g,y)=>{y(g,We({"data-slot":"tabs-list",get class(){return i(d)}},()=>a,{get ref(){return n()},set ref(p){n(p)}}))})}v(u,s),he()}function gi(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{let d=B(()=>Wt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 whitespace-nowrap rounded-md border border-transparent px-2 py-1 text-sm font-medium transition-[color,box-shadow] focus-visible:outline-1 focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",e.class));ae(f,()=>ou,(g,y)=>{y(g,We({"data-slot":"tabs-trigger",get class(){return i(d)}},()=>a,{get ref(){return n()},set ref(p){n(p)}}))})}v(u,s),he()}var Eh=J('<div class="min-w-0 space-y-2 overflow-hidden p-4"><!></div>'),Oh=J('<div class="flex min-h-0 flex-1 flex-col"><!></div>');function fi(u,e){var n=Oh(),a=W(n);ae(a,()=>xa,(s,f)=>{f(s,{class:"card-content flex min-h-0 flex-1 flex-col overflow-hidden p-0",children:(d,g)=>{var y=Eh(),p=W(y);xe(p,()=>e.children??Oe),U(y),v(d,y)},$$slots:{default:!0}})}),U(n),v(u,n)}var Mh=J("<!> <!>",1),Fh=J('<div class="tab-list-wrapper flex-shrink-0 svelte-op5eza"><!></div> <!>',1);function Rh(u,e){fe(e,!0);const n=K(e,"triggers",19,()=>[]);var a=V(),s=C(a);ae(s,()=>Ms,(f,d)=>{d(f,{get value(){return e.value},get onValueChange(){return e.onValueChange},class:"flex h-full w-full flex-col",children:(g,y)=>{var p=Fh(),w=C(p),D=W(w);ae(D,()=>Fs,(S,_)=>{_(S,{class:"tab-list",children:(E,N)=>{var T=V(),M=C(T);er(M,17,n,Er,(H,Z,re,Q)=>{let le=()=>i(Z).value,De=()=>i(Z).label;var Me=Mh(),ne=C(Me);ae(ne,()=>gi,(pe,Be)=>{Be(pe,{get value(){return le()},class:"tab-trigger",children:(Ze,Ve)=>{rt();var Te=ct();ft(()=>Mt(Te,De())),v(Ze,Te)},$$slots:{default:!0}})});var ce=Y(ne,2);{var ke=pe=>{Ll(pe,{class:"separator"})};te(ce,pe=>{le()!==n()[n().length-1]?.value&&pe(ke)})}v(H,Me)}),v(E,T)},$$slots:{default:!0}})}),U(w);var k=Y(w,2);xe(k,()=>e.children??Oe),v(g,p)},$$slots:{default:!0}})}),v(u,a),he()}const Rs=typeof window<"u"?window:void 0;function Nh(u){let e=u.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}let Lh=class{#e;#t;constructor(e={}){const{window:n=Rs,document:a=n?.document}=e;n!==void 0&&(this.#e=a,this.#t=Ai(s=>{const f=Or(n,"focusin",s),d=Or(n,"focusout",s);return()=>{f(),d()}}))}get current(){return this.#t?.(),this.#e?Nh(this.#e):null}};new Lh;function Bh(u,e){switch(u){case"post":lt(e);break;case"pre":is(e);break}}function Ns(u,e,n,a={}){const{lazy:s=!1}=a;let f=!s,d=Array.isArray(u)?[]:void 0;Bh(e,()=>{const g=Array.isArray(u)?u.map(p=>p()):u();if(!f){f=!0,d=g;return}const y=Br(()=>n(g,d));return d=g,y})}function Ka(u,e,n){Ns(u,"post",e,n)}function zh(u,e,n){Ns(u,"pre",e,n)}Ka.pre=zh;function jh(u,e){switch(u){case"local":return e.localStorage;case"session":return e.sessionStorage}}class Ls{#e;#t;#r;#n;#i;#a=ie(0);constructor(e,n,a={}){const{storage:s="local",serializer:f={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:d=!0,window:g=Rs}=a;if(this.#e=n,this.#t=e,this.#r=f,g===void 0)return;const y=jh(s,g);this.#n=y;const p=y.getItem(e);p!==null?this.#e=this.#s(p):this.#l(n),d&&s==="local"&&(this.#i=Ai(()=>Or(g,"storage",this.#o)))}get current(){this.#i?.(),i(this.#a);const e=this.#s(this.#n?.getItem(this.#t))??this.#e,n=new WeakMap,a=s=>{if(s===null||s?.constructor.name==="Date"||typeof s!="object")return s;let f=n.get(s);return f||(f=new Proxy(s,{get:(d,g)=>(i(this.#a),a(Reflect.get(d,g))),set:(d,g,y)=>(O(this.#a,i(this.#a)+1),Reflect.set(d,g,y),this.#l(e),!0)}),n.set(s,f)),f};return a(e)}set current(e){this.#l(e),O(this.#a,i(this.#a)+1)}#o=e=>{e.key!==this.#t||e.newValue===null||(this.#e=this.#s(e.newValue),O(this.#a,i(this.#a)+1))};#s(e){try{return this.#r.deserialize(e)}catch(n){console.error(`Error when parsing "${e}" from persisted store "${this.#t}"`,n);return}}#l(e){try{e!=null&&this.#n?.setItem(this.#t,this.#r.serialize(e))}catch(n){console.error(`Error when writing value from persisted store "${this.#t}" to ${this.#n}`,n)}}}function Jo(u){return u.filter(e=>e.length>0)}const Bs={getItem:u=>null,setItem:(u,e)=>{}},Mi=typeof document<"u";function Vh(u){return typeof u=="function"}function qh(u){return u!==null&&typeof u=="object"}const jn=Symbol("box"),Ha=Symbol("is-writable");function Kh(u){return qh(u)&&jn in u}function Hh(u){return Gt.isBox(u)&&Ha in u}function Gt(u){let e=ie(vt(u));return{[jn]:!0,[Ha]:!0,get current(){return i(e)},set current(n){O(e,n,!0)}}}function Uh(u,e){const n=B(u);return e?{[jn]:!0,[Ha]:!0,get current(){return i(n)},set current(a){e(a)}}:{[jn]:!0,get current(){return u()}}}function Gh(u){return Gt.isBox(u)?u:Vh(u)?Gt.with(u):Gt(u)}function Wh(u){return Object.entries(u).reduce((e,[n,a])=>Gt.isBox(a)?(Gt.isWritableBox(a)?Object.defineProperty(e,n,{get(){return a.current},set(s){a.current=s}}):Object.defineProperty(e,n,{get(){return a.current}}),e):Object.assign(e,{[n]:a}),{})}function Yh(u){return Gt.isWritableBox(u)?{[jn]:!0,get current(){return u.current}}:u}Gt.from=Gh;Gt.with=Uh;Gt.flatten=Wh;Gt.readonly=Yh;Gt.isBox=Kh;Gt.isWritableBox=Hh;function Jh(u,e){const n=RegExp(u,"g");return a=>{if(typeof a!="string")throw new TypeError(`expected an argument of type string, but got ${typeof a}`);return a.match(n)?a.replace(n,e):a}}const Qh=Jh(/[A-Z]/,u=>`-${u.toLowerCase()}`);function Xh(u){if(!u||typeof u!="object"||Array.isArray(u))throw new TypeError(`expected an argument of type object, but got ${typeof u}`);return Object.keys(u).map(e=>`${Qh(e)}: ${u[e]};`).join(`
`)}function Zh(u={}){return Xh(u).replace(`
`," ")}const $h={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};Zh($h);const ev=typeof window<"u"?window:void 0;function tv(u){let e=u.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}class rv{#e;#t;constructor(e={}){const{window:n=ev,document:a=n?.document}=e;n!==void 0&&(this.#e=a,this.#t=Ai(s=>{const f=Or(n,"focusin",s),d=Or(n,"focusout",s);return()=>{f(),d()}}))}get current(){return this.#t?.(),this.#e?tv(this.#e):null}}new rv;const ca=Gt("mode-watcher-mode"),ua=Gt("mode-watcher-theme"),nv=["dark","light","system"];function Qo(u){return typeof u!="string"?!1:nv.includes(u)}class iv{#e="system";#t=Mi?localStorage:Bs;#r=this.#t.getItem(ca.current);#n=Qo(this.#r)?this.#r:this.#e;#i=ie(vt(this.#a()));#a(e=this.#n){return new Ls(ca.current,e,{serializer:{serialize:n=>n,deserialize:n=>Qo(n)?n:this.#e}})}constructor(){Ii(()=>Ka.pre(()=>ca.current,(e,n)=>{const a=i(this.#i).current;O(this.#i,this.#a(a),!0),n&&localStorage.removeItem(n)}))}get current(){return i(this.#i).current}set current(e){i(this.#i).current=e}}class av{#e=void 0;#t=!0;#r=ie(vt(this.#e));#n=typeof window<"u"&&typeof window.matchMedia=="function"?new Bl("prefers-color-scheme: light"):{current:!1};query(){Mi&&O(this.#r,this.#n.current?"light":"dark",!0)}tracking(e){this.#t=e}constructor(){Ii(()=>{is(()=>{this.#t&&this.query()})}),this.query=this.query.bind(this),this.tracking=this.tracking.bind(this)}get current(){return i(this.#r)}}const Xo=new iv,ov=new av;class sv{#e=Mi?localStorage:Bs;#t=this.#e.getItem(ua.current);#r=this.#t===null||this.#t===void 0?"":this.#t;#n=ie(vt(this.#i()));#i(e=this.#r){return new Ls(ua.current,e,{serializer:{serialize:n=>typeof n!="string"?"":n,deserialize:n=>n}})}constructor(){Ii(()=>Ka.pre(()=>ua.current,(e,n)=>{const a=i(this.#n).current;O(this.#n,this.#i(a),!0),n&&localStorage.removeItem(n)}))}get current(){return i(this.#n).current}set current(e){i(this.#n).current=e}}new sv;let Zo,$o,es=!1,Fn=null;function lv(){return Fn||(Fn=document.createElement("style"),Fn.appendChild(document.createTextNode(`* {
		-webkit-transition: none !important;
		-moz-transition: none !important;
		-o-transition: none !important;
		-ms-transition: none !important;
		transition: none !important;
	}`)),Fn)}function cv(u,e=!1){if(typeof document>"u")return;if(!es){es=!0,u();return}if(typeof window<"u"&&window.__vitest_worker__){u();return}clearTimeout(Zo),clearTimeout($o);const a=lv(),s=()=>document.head.appendChild(a),f=()=>{a.parentNode&&document.head.removeChild(a)};function d(){u(),window.requestAnimationFrame(f)}if(typeof window.requestAnimationFrame<"u"){s(),e?d():window.requestAnimationFrame(()=>{d()});return}s(),Zo=window.setTimeout(()=>{u(),$o=window.setTimeout(f,16)},16)}const hi=Gt(void 0),uv=Gt(!0),dv=Gt(!1),fv=Gt([]),hv=Gt([]);function vv(){const u=B(()=>{if(!Mi)return;const e=Xo.current==="system"?ov.current:Xo.current,n=Jo(fv.current),a=Jo(hv.current);function s(){const f=document.documentElement,d=document.querySelector('meta[name="theme-color"]');e==="light"?(n.length&&f.classList.remove(...n),a.length&&f.classList.add(...a),f.style.colorScheme="light",d&&hi.current&&d.setAttribute("content",hi.current.light)):(a.length&&f.classList.remove(...a),n.length&&f.classList.add(...n),f.style.colorScheme="dark",d&&hi.current&&d.setAttribute("content",hi.current.dark))}return uv.current?cv(s,dv.current):s(),e});return{get current(){return i(u)}}}const gv=vv();function mv(u,e){fe(e,!0);let n=Le(e,["$$slots","$$events","$$legacy"]);Md(u,We({get theme(){return gv.current},class:"toaster group",style:"--normal-bg: var(--color-popover); --normal-text: var(--color-popover-foreground); --normal-border: var(--color-border);"},()=>n)),he()}const pv=[{value:"define-areas",label:"Define Areas"},{value:"select-data",label:"Select Data"},{value:"export",label:"Export"},{value:"downloads",label:"Download"}];class yv{#e;constructor(e){if(!e)throw new Error("UprnDownloadService endpoints configuration is required");if(!e.baseUrl||!e.healthRoute||!e.requestJobRoute||!e.requestJobStatusesRoute||!e.getAreaSelectionLimitsRoute||!e.fetchDownloadRoute)throw new Error("UprnDownloadService endpoints configuration is incomplete");this.#e=e}async getHealth(){try{const e=`${this.#e.baseUrl}${this.#e.healthRoute}`,n=await fetch(e);return n.ok?(await n.json()).status==="ok":!1}catch(e){return console.error("Health check failed:",e),!1}}async requestJob(e){try{console.log("[uprn-download-service] requesting job with request:",e);const n=`${this.#e.baseUrl}${this.#e.requestJobRoute}`,a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){console.error("Failed to request job:",a.statusText,"request:",JSON.stringify(e));return}return await a.json()}catch(n){console.error("Error requesting job:",n);return}}async requestJobStatuses(e){try{const n=`${this.#e.baseUrl}${this.#e.requestJobStatusesRoute}`,a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){console.error("Failed to get job statuses:",a.statusText);return}return await a.json()}catch(n){console.error("Error getting job statuses:",n);return}}async getSelectionAreaLimits(){try{const e=`${this.#e.baseUrl}${this.#e.getAreaSelectionLimitsRoute}`,n=await fetch(e);if(!n.ok){console.error("Failed to get area selection limits:",n.statusText);return}return await n.json()}catch(e){console.error("Error getting selection area limits:",e);return}}getDownloadUrl(e){const n=this.#e.baseUrl.replace(/\/+$/,""),a=this.#e.fetchDownloadRoute.replace(/\/+$/,"");return`${n}${a}/${encodeURIComponent(e)}`}}class bv{#e;constructor(e){this.#e=e}async getHealth(){try{const e=`${this.#e.baseUrl}${this.#e.healthRoute}`,n=await fetch(e);return n.ok?(await n.json()).status==="ok":!1}catch(e){return console.error("Health check failed:",e),!1}}async chat(e){try{const n=`${this.#e.baseUrl}${this.#e.chatRoute}`,s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(!s.ok){console.error("Failed to send chat query:",s.statusText);return}return await s.json()}catch(n){console.error("Error sending chat query:",n);return}}async chatStream(e,n){try{const a=`${this.#e.baseUrl}${this.#e.chatStreamRoute}`,f=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(!f.ok)return console.error("Failed to start chat stream:",f.statusText),!1;const d=f.body?.getReader();if(!d)return console.error("No response body reader available"),!1;const g=new TextDecoder;let y=!1;for(;!y;){const{value:p,done:w}=await d.read();if(y=w,p){const D=g.decode(p,{stream:!y});n(D)}}return!0}catch(a){return console.error("Error during chat stream:",a),!1}}}const wv=Object.freeze({lod00World:{lod:0,scale:591657527591555e-6},lod01World:{lod:1,scale:295828763795777e-6},lod02World:{lod:2,scale:147914381897889e-6},lod03Continent:{lod:3,scale:73957190948944e-6},lod04Continent:{lod:4,scale:36978595474472e-6},lod05Countries:{lod:5,scale:18489297737236e-6},lod06Country:{lod:6,scale:9244648868618e-6},lod07StatesProvinces:{lod:7,scale:4622324434309e-6},lod08Counties:{lod:8,scale:2311162217155e-6},lod09Counties:{lod:9,scale:1155581108577e-6},lod10Country:{lod:10,scale:577790.554289},lod11MetropolitanArea:{lod:11,scale:288895.277144},lod12Cities:{lod:12,scale:144447.638572},lod13City:{lod:13,scale:72223.819286},lod14Town:{lod:14,scale:36111.909643},lod15Neighborhood:{lod:15,scale:18055.954822},lod16Streets:{lod:16,scale:9027.977411},lod17CityBlock:{lod:17,scale:4513.988705},lod18Buildings:{lod:18,scale:2256.994353},lod19Building:{lod:19,scale:1128.497176},lod20Houses:{lod:20,scale:564.248588},lod21Houses:{lod:21,scale:282.124294},lod22Houses:{lod:22,scale:141.062147},lod23HouseProperty:{lod:23,scale:70.5310735}});class _v{#e=null;#t=!1;async init(e){this.#t||(await this.#r(e),this.#t=!0)}async#r(e){const a=await(await fetch(e)).json();this.#e=a}doesFieldHaveCustomRenderer(e,n){this.#l();const a=this.#e.FeatureLayers.find(d=>d.Name===e.title);if(!a)return!1;const s=this.#e.Fields.find(d=>d.FeatureLayerId===a.Id&&d.Name===n);return s?!!this.#e.CustomRenderers_Fields.find(d=>d.FieldId===s.Id):!1}getAllFieldsWithCustomRenderers(e){this.#l();const n=this.#e.FeatureLayers.find(f=>f.Name===e.title);if(!n)return[];const a=this.#e.Fields.filter(f=>f.FeatureLayerId===n.Id),s=[];for(const f of a)this.#e.CustomRenderers_Fields.some(g=>g.FieldId===f.Id)&&s.push(f.Name);return s}async applyCustomRenderer(e,n){this.#l();const a=this.#e.FeatureLayers.find(w=>w.Name===e.title);if(!a)return;const s=this.#e.Fields.find(w=>w.FeatureLayerId===a.Id&&w.Name===n);if(!s){console.warn(`[custom-renderer-service] could not find the field ${n} for feature layer id ${a.Id}`);return}const f=this.#e.CustomRenderers_Fields.find(w=>w.FieldId===s.Id);if(!f){console.warn(`[custom-renderer-service] could not find a custom renderer field for field ${n} in feature layer id ${a.Id}`);return}const d=this.#e.CustomRenderers.find(w=>w.Id===f.CustomRendererId);if(!d)throw new Error(`Could not find a custom renderer with the id ${f.CustomRendererId}`);const g=await this.getRendererClassBreaks(d.ClassBreaksGroupId.toString()),y=await this.getRendererSymbols(d.SymbolsId.toString()),p=this.#i(d.CustomRendererType,y,g,[],n);e.renderer=p,this.setCustomOutlines(e,d.LodsGroupId)}async setCustomOutlines(e,n){const a=this.#e.CustomRenderers_Lods.filter(d=>d.GroupId===n).sort((d,g)=>d.Lod-g.Lod);if(a.length===0){console.warn(`No LODs found for LODs group id ${n}`);return}const s=[],f=Object.values(wv);a.forEach(d=>{const g=d.OutlineWidth,y=d.Lod,p=this.#n(f,y)-1;s.push({size:g,value:f[p].scale})}),(e.renderer instanceof Po||e.renderer instanceof Ao)&&this.#s(e.renderer,s)}async getRendererClassBreaks(e){const n=parseInt(e,10),a=this.#e.CustomRenderers_ClassBreaks.filter(s=>s.GroupId===n).sort((s,f)=>s.Order-f.Order);if(a.length===0)throw new Error(`Could not find a group with the id ${e}`);return a}async getRendererSymbols(e){const n=parseInt(e,10),a=this.#e.CustomRenderers_Symbols.find(d=>d.Id===n);if(!a)throw new Error(`Could not find a symbol with the id ${e}`);const s=this.#e.CustomRenderers_Symbols_Appearances.filter(d=>d.SymbolsId===n).sort((d,g)=>d.Order-g.Order);return{...a,Appearances:s}}#n(e,n){const a=e.findIndex(s=>s.lod===n);return a===-1?0:a<23?a+1:a}#i(e,n,a,s,f){switch(e){case 1:return this.#o(n,s);case 2:return this.#a(f,n,a,s);default:throw new Error(`Unknown renderer type: ${e}`)}}#a(e,n,a,s){const f="ClassMinValue",d="ClassMaxValue",g="SymbolColor",y="OutlineColor",p="OutlineWidth",w=n.Appearances.length,D=new Po({field:e});for(let k=0;k<w;k++){const S=a[k][f],_=a[k][d],E=n.Appearances[k][g],N=n.Appearances[k][y],T=n.Appearances[k][p];D.addClassBreakInfo({minValue:S,maxValue:_,symbol:new To({color:li.fromHex(E),outline:new Do({color:li.fromHex(N),width:T})})})}return this.#s(D,s),D}#o(e,n){const a="SymbolColor",s="OutlineColor",f="OutlineWidth",d=e.Appearances[0][a],g=e.Appearances[0][s],y=e.Appearances[0][f],p=new Ao({symbol:new To({color:li.fromHex(d),outline:new Do({color:li.fromHex(g),width:y})})});return this.#s(p,n),p}#s(e,n){e.visualVariables=[{type:"size",target:"outline",valueExpression:"$view.scale",stops:n}]}#l(){if(!this.#t)throw new Error("CustomRendererService is not initialized");if(!this.#e)throw new Error("Data is not loaded")}}var xv=J('<div class="flex w-full items-center justify-between"><div class="font-medium">Chat</div> <div class="flex gap-1"><!> <!></div></div>'),Sv=J("<!> <!>",1),kv=J("<div><!></div>");function Cv(u,e){fe(e,!0);const n=K(e,"isOpenedOnInit",3,!1);let a=ie(!1),s=ie(vt(n())),f=ie(!1),d=ie(void 0),g="300px",y="45px";lt(()=>{i(a)||!i(d)||(i(s)&&(i(d).style.height=g),O(a,!0))});function p(){i(d)&&(O(s,!i(s)),O(f,!1),i(s)?(y=i(d).style.height,i(d).style.height=g):i(d).style.height=y)}function w(){i(d)&&(O(f,!i(f)),i(f)?(g=i(d).style.height,i(d).style.height="100%"):i(d).style.height=g)}var D=kv(),k=W(D);ae(k,()=>_a,(S,_)=>{_(S,{class:"h-full w-full gap-0 rounded-none py-0 pt-0 pb-0",children:(E,N)=>{var T=Sv(),M=C(T);ae(M,()=>xl,(re,Q)=>{Q(re,{class:"pt-2",children:(le,De)=>{var Me=xv(),ne=Y(W(Me),2),ce=W(ne);{var ke=Be=>{Kt(Be,{class:"size-6 border-1 bg-background hover:bg-accent focus-visible:border-ring",onclick:w,children:(Ze,Ve)=>{var Te=V(),ze=C(Te);{var Se=qe=>{Du(qe,{class:"text-primary"})},je=qe=>{Tu(qe,{class:"text-primary"})};te(ze,qe=>{i(f)?qe(Se):qe(je,!1)})}v(Ze,Te)},$$slots:{default:!0}})};te(ce,Be=>{i(s)&&Be(ke)})}var pe=Y(ce,2);Kt(pe,{class:"size-6 border-1 bg-background hover:bg-accent focus-visible:border-ring",onclick:p,children:(Be,Ze)=>{var Ve=V(),Te=C(Ve);{var ze=je=>{Cu(je,{class:"text-primary"})},Se=je=>{ss(je,{class:"text-primary"})};te(Te,je=>{i(s)?je(Se,!1):je(ze)})}v(Be,Ve)},$$slots:{default:!0}}),U(ne),U(Me),v(le,Me)},$$slots:{default:!0}})});var H=Y(M,2);{var Z=re=>{var Q=V(),le=C(Q);ae(le,()=>xa,(De,Me)=>{Me(De,{class:"h-full min-h-[10px] w-full p-0",children:(ne,ce)=>{var ke=V(),pe=C(ke);xe(pe,()=>e.children??Oe),v(ne,ke)},$$slots:{default:!0}})}),v(re,Q)};te(H,re=>{i(s)&&re(Z)})}v(E,T)},$$slots:{default:!0}})}),U(D),sr(D,S=>O(d,S),()=>i(d)),v(u,D),he()}class Iv{#e;#t;#r=ie(!1);#n=B(()=>this.#e.exportSnapshot());#i=B(()=>{const e=new br;for(const[n,a]of this.#t.dataSelections)e.set(n,{layerId:a.layerId,selectedFieldIds:a.selectedFieldIds});return e});constructor(e,n){this.#e=e,this.#t=n,Ii(()=>{lt(()=>{console.log("[selection-tracking-store] Detected area selection change"),(async()=>{if(!i(this.#r)){console.log("[selection-tracking-store] Initial load not complete, skipping area selection effect");return}if(i(this.#n)){if(!i(this.#n).layerId){await Mn({areas:null});return}if(!i(this.#n).selectedAreaIds.size){await Mn({areas:null});return}await Mn({areas:i(this.#n)}),console.log("[selection-tracking-store] Area selection updated:",pi(i(this.#n)))}})()}),lt(()=>{console.log("[selection-tracking-store] Detected data selection change"),(async()=>{if(!i(this.#r)){console.log("[selection-tracking-store] Initial load not complete, skipping data selection effect");return}if(!i(this.#i)||i(this.#i).size===0){console.log("[selection-tracking-store] No data selections, clearing in database"),await Mn({data:[]});return}await Mn({data:i(this.#i).values().toArray()}),console.log("[selection-tracking-store] Data selection updated:",pi(i(this.#i)))})()})})}async loadSelections(){const e=await Ss();if(!e){console.log("[selection-tracking-store] No existing selection found in database"),O(this.#r,!0);return}console.log("[selection-tracking-store] Loaded selection from database:",e),e.areas&&(this.#e.setLayerId(e.areas.layerId),console.log("[selection-tracking-store] (loadSelections) Restoring selected area IDs:",Array.from(e.areas.selectedAreaIds),"layer ID:",this.#e.layerId),this.#e.addSelectedAreas(Array.from(e.areas.selectedAreaIds))),e.data.forEach(n=>{this.#t.addSelection(n)}),O(this.#r,!0)}}function Pv(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=K(e,"value",15,""),s=Le(e,["$$slots","$$events","$$legacy","ref","class","value"]);var f=V(),d=C(f);{let g=B(()=>Wt("grid gap-3",e.class));ae(d,()=>Qc,(y,p)=>{p(y,We({"data-slot":"radio-group",get class(){return i(g)}},()=>s,{get ref(){return n()},set ref(w){n(w)},get value(){return a()},set value(w){a(w)}}))})}v(u,f),he()}var Av=J('<div data-slot="radio-group-indicator" class="relative flex items-center justify-center"><!></div>');function Tv(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{const d=(y,p)=>{let w=()=>p?.().checked;var D=Av(),k=W(D);{var S=_=>{Iu(_,{class:"fill-primary absolute start-1/2 top-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})};te(k,_=>{w()&&_(S)})}U(D),v(y,D)};let g=B(()=>Wt("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 shadow-xs aspect-square size-4 shrink-0 rounded-full border outline-none transition-[color,box-shadow] focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e.class));ae(f,()=>Zc,(y,p)=>{p(y,We({"data-slot":"radio-group-item",get class(){return i(g)}},()=>a,{get ref(){return n()},set ref(w){n(w)},children:d,$$slots:{default:!0}}))})}v(u,s),he()}function Zt(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{let d=B(()=>Wt("flex select-none items-center gap-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-50 group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50",e.class));ae(f,()=>Gc,(g,y)=>{y(g,We({"data-slot":"label",get class(){return i(d)}},()=>a,{get ref(){return n()},set ref(p){n(p)}}))})}v(u,s),he()}class mi{#e=ie();get value(){return i(this.#e)}set value(e){O(this.#e,e,!0)}#t=ie(!1);get isLoading(){return i(this.#t)}set isLoading(e){O(this.#t,e,!0)}#r=ie(null);get error(){return i(this.#r)}set error(e){O(this.#r,e,!0)}constructor(e){this.value=e}async loadFromUrl(e){this.isLoading=!0,this.error=null;try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to load configuration from ${e}: ${n.statusText}`);this.value=await n.json()}catch(n){throw this.error=n,n}finally{this.isLoading=!1}}async loadFromFile(e){this.isLoading=!0,this.error=null;try{const n=await e.text();this.value=JSON.parse(n)}catch(n){throw this.error=n,n}finally{this.isLoading=!1}}}class Dv{uprnDownloadApiConfig=new mi;uprnChatbotApiConfig=new mi;#e=ie(vt([]));get mapsConfig(){return i(this.#e)}set mapsConfig(e){O(this.#e,e,!0)}#t=ie(vt([]));get mainSidebarSizes(){return i(this.#t)}set mainSidebarSizes(e){O(this.#t,e,!0)}constructor(e){this.mainSidebarSizes=e.mainSidebarSizes??[],this.#r(e)}async#r(e){await Promise.all([this.#n(this.uprnDownloadApiConfig,e.uprnDownloadApiConfig),this.#n(this.uprnChatbotApiConfig,e.aiUprnChatbotApiConfig),this.#i(e.mapsConfig)])}async#n(e,n){try{await e.loadFromUrl(n.path)}catch(a){console.error(`Failed to load config from ${n.path}`,a)}}async#i(e){this.mapsConfig=e.map(()=>new mi),await Promise.all(e.map((n,a)=>this.#n(this.mapsConfig[a],n)))}}let da=ie(void 0);const Hr={get instance(){return i(da)},async load(u){const e=await fetch(u);if(!e.ok)throw new Error(`Failed to load UPRN config from ${u}`);const n=await e.json();return O(da,new Dv(n),!0),i(da)}};var Ev=J('<p class="text-sm text-red-500"> </p>'),Ov=J('<div class="grid grid-cols-4 items-center gap-4"><!> <!></div>'),Mv=J('<div class="grid gap-2 py-2"><!> <div class="flex justify-end"><!></div></div>'),Fv=J('<div class="space-y-4 rounded-md border p-4"><h3 class="text-lg font-medium"> </h3> <div class="flex items-end gap-2"><div class="grid w-full items-center gap-1.5"><!> <!></div> <!></div> <div class="flex items-end gap-2"><div class="grid w-full items-center gap-1.5"><!> <!></div> <!></div> <!> <!></div>');function fa(u,e){fe(e,!0);let n=K(e,"manager",7),a=ie(""),s=ie(void 0),f=ie(void 0);lt(()=>{n().value&&O(f,{...n().value},!0)});function d(){i(f)&&(n().value=i(f))}async function g(){i(a)&&await n().loadFromUrl(i(a))}async function y(){const ne=i(s)?.files?.[0];ne&&await n().loadFromFile(ne)}var p=Fv(),w=W(p),D=W(w,!0);U(w);var k=Y(w,2),S=W(k),_=W(S);Zt(_,{get for(){return`url-${e.title??""}`},children:(ne,ce)=>{rt();var ke=ct("Load from URL");v(ne,ke)},$$slots:{default:!0}});var E=Y(_,2);kr(E,{type:"url",get id(){return`url-${e.title??""}`},placeholder:"https://...",get value(){return i(a)},set value(ne){O(a,ne,!0)}}),U(S);var N=Y(S,2);Kt(N,{onclick:g,get disabled(){return n().isLoading},variant:"secondary",children:(ne,ce)=>{rt();var ke=ct("Load");v(ne,ke)},$$slots:{default:!0}}),U(k);var T=Y(k,2),M=W(T),H=W(M);Zt(H,{get for(){return`file-${e.title??""}`},children:(ne,ce)=>{rt();var ke=ct("Load from File");v(ne,ke)},$$slots:{default:!0}});var Z=Y(H,2);sr(kr(Z,{type:"file",get id(){return`file-${e.title??""}`}}),ne=>O(s,ne,!0),()=>i(s)),U(M);var re=Y(M,2);Kt(re,{onclick:y,get disabled(){return n().isLoading},variant:"secondary",children:(ne,ce)=>{rt();var ke=ct("Load");v(ne,ke)},$$slots:{default:!0}}),U(T);var Q=Y(T,2);{var le=ne=>{var ce=Ev(),ke=W(ce,!0);U(ce),ft(()=>Mt(ke,n().error.message)),v(ne,ce)};te(Q,ne=>{n().error&&ne(le)})}var De=Y(Q,2);{var Me=ne=>{var ce=Mv(),ke=W(ce);er(ke,17,()=>e.fields,Er,(Ze,Ve)=>{var Te=Ov(),ze=W(Te);{let je=B(()=>e.title),qe=B(()=>String(i(Ve).key));Zt(ze,{get for(){return`${i(je)??""}-${i(qe)??""}`},class:"text-right",children:(Je,Qe)=>{rt();var ve=ct();ft(()=>Mt(ve,i(Ve).label)),v(Je,ve)},$$slots:{default:!0}})}var Se=Y(ze,2);{let je=B(()=>e.title),qe=B(()=>String(i(Ve).key));kr(Se,{get id(){return`${i(je)??""}-${i(qe)??""}`},get value(){return i(f)[i(Ve).key]},oninput:Je=>{i(f)&&(i(f)[i(Ve).key]=Je.currentTarget.value)},class:"col-span-3"})}U(Te),v(Ze,Te)});var pe=Y(ke,2),Be=W(pe);Kt(Be,{onclick:d,children:(Ze,Ve)=>{rt();var Te=ct("Save Changes");v(Ze,Te)},$$slots:{default:!0}}),U(pe),U(ce),v(ne,ce)};te(De,ne=>{i(f)&&ne(Me)})}U(p),ft(()=>Mt(D,e.title)),v(u,p),he()}function Rv(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=K(e,"value",15),s=Le(e,["$$slots","$$events","$$legacy","ref","value"]);var f=V(),d=C(f);ae(d,()=>bc,(g,y)=>{y(g,We({"data-slot":"accordion"},()=>s,{get ref(){return n()},set ref(p){n(p)},get value(){return a()},set value(p){a(p)}}))}),v(u,f),he()}var Nv=J("<div><!></div>");function Lv(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=V(),f=C(s);ae(f,()=>Pc,(d,g)=>{g(d,We({"data-slot":"accordion-content",class:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"},()=>a,{get ref(){return n()},set ref(y){n(y)},children:(y,p)=>{var w=Nv(),D=W(w);xe(D,()=>e.children??Oe),U(w),ft(k=>cr(w,1,k),[()=>yr(Wt("pb-4 pt-0",e.class))]),v(y,w)},$$slots:{default:!0}}))}),v(u,s),he()}function Bv(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=Le(e,["$$slots","$$events","$$legacy","ref","class"]);var s=V(),f=C(s);{let d=B(()=>Wt("border-b last:border-b-0",e.class));ae(f,()=>_c,(g,y)=>{y(g,We({"data-slot":"accordion-item",get class(){return i(d)}},()=>a,{get ref(){return n()},set ref(p){n(p)}}))})}v(u,s),he()}var zv=J("<!> <!>",1);function jv(u,e){fe(e,!0);let n=K(e,"ref",15,null),a=K(e,"level",3,3),s=Le(e,["$$slots","$$events","$$legacy","ref","class","level","children"]);var f=V(),d=C(f);ae(d,()=>Sc,(g,y)=>{y(g,{get level(){return a()},class:"flex",children:(p,w)=>{var D=V(),k=C(D);{let S=B(()=>Wt("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium outline-none transition-all hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e.class));ae(k,()=>Cc,(_,E)=>{E(_,We({"data-slot":"accordion-trigger",get class(){return i(S)}},()=>s,{get ref(){return n()},set ref(N){n(N)},children:(N,T)=>{var M=zv(),H=C(M);xe(H,()=>e.children??Oe);var Z=Y(H,2);ss(Z,{class:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"}),v(N,M)},$$slots:{default:!0}}))})}v(p,D)},$$slots:{default:!0}})}),v(u,f),he()}var Vv=J("<!> Add Node",1),qv=J('<div class="flex w-full items-center justify-between pr-4"><span> <span class="text-xs text-muted-foreground"> </span></span></div>'),Kv=J("<option> </option>"),Hv=J("<!> Remove Node",1),Uv=J('<div class="grid gap-4 rounded-md border bg-muted/10 p-4"><div class="grid grid-cols-1 gap-4 md:grid-cols-2"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <select class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50"></select></div></div> <div class="grid grid-cols-1 gap-4 md:grid-cols-2"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div></div> <div class="grid grid-cols-2 gap-4 md:grid-cols-3"><div class="flex items-center space-x-2"><!> <!></div> <div class="flex items-center space-x-2"><!> <!></div> <div class="flex items-center space-x-2"><!> <!></div> <div class="flex items-center space-x-2"><!> <!></div> <div class="flex items-center space-x-2"><!> <!></div> <div class="flex items-center space-x-2"><!> <!></div></div> <div class="flex justify-end pt-2"><!></div></div>'),Gv=J("<!> <!>",1),Wv=J('<div class="space-y-4"><div class="flex items-center justify-between"><h4 class="font-medium">Nodes</h4> <!></div> <!></div>');function ts(u,e){fe(e,!0);let n=K(e,"config",7);function a(){n().items||(n().items=[]),n().items.push({id:`node-${Date.now()}`,type:Dr.GroupLayer})}function s(p){n().items?.splice(p,1)}var f=Wv(),d=W(f),g=Y(W(d),2);Kt(g,{size:"sm",variant:"outline",onclick:a,children:(p,w)=>{var D=Vv(),k=C(D);ys(k,{class:"mr-2 h-4 w-4"}),rt(),v(p,D)},$$slots:{default:!0}}),U(d);var y=Y(d,2);ae(y,()=>Rv,(p,w)=>{w(p,{type:"multiple",class:"w-full",children:(D,k)=>{var S=V(),_=C(S);er(_,17,()=>n().items||[],Er,(E,N,T)=>{var M=V(),H=C(M);{let Z=B(()=>i(N).id||`item-${T}`);ae(H,()=>Bv,(re,Q)=>{Q(re,{get value(){return i(Z)},children:(le,De)=>{var Me=Gv(),ne=C(Me);ae(ne,()=>jv,(ke,pe)=>{pe(ke,{class:"hover:no-underline",children:(Be,Ze)=>{var Ve=qv(),Te=W(Ve),ze=W(Te),Se=Y(ze),je=W(Se);U(Se),U(Te),U(Ve),ft(()=>{Mt(ze,`${i(N).id||"New Node"} `),Mt(je,`(${i(N).type??""})`)}),v(Be,Ve)},$$slots:{default:!0}})});var ce=Y(ne,2);ae(ce,()=>Lv,(ke,pe)=>{pe(ke,{children:(Be,Ze)=>{var Ve=Uv(),Te=W(Ve),ze=W(Te),Se=W(ze);Zt(Se,{children:(be,$)=>{rt();var de=ct("Name");v(be,de)},$$slots:{default:!0}});var je=Y(Se,2);kr(je,{placeholder:"Config Name",get value(){return i(N).__name},set value(be){i(N).__name=be}}),U(ze);var qe=Y(ze,2),Je=W(qe);Zt(Je,{children:(be,$)=>{rt();var de=ct("ID");v(be,de)},$$slots:{default:!0}});var Qe=Y(Je,2);kr(Qe,{placeholder:"Layer ID",get value(){return i(N).id},set value(be){i(N).id=be}}),U(qe);var ve=Y(qe,2),Ne=W(ve);Zt(Ne,{children:(be,$)=>{rt();var de=ct("Type");v(be,de)},$$slots:{default:!0}});var $e=Y(Ne,2);er($e,21,()=>Object.values(Dr),Er,(be,$)=>{var de=Kv(),Ge=W(de,!0);U(de);var pt={};ft(()=>{Mt(Ge,i($)),pt!==(pt=i($))&&(de.value=(de.__value=i($))??"")}),v(be,de)}),U($e),U(ve),U(Te);var Pe=Y(Te,2),ht=W(Pe),oe=W(ht);Zt(oe,{children:(be,$)=>{rt();var de=ct("Visibility Group ID");v(be,de)},$$slots:{default:!0}});var nt=Y(oe,2);kr(nt,{get value(){return i(N).visibilityGroupId},set value(be){i(N).visibilityGroupId=be}}),U(ht);var et=Y(ht,2),Ie=W(et);Zt(Ie,{children:(be,$)=>{rt();var de=ct("Inheritance Group ID");v(be,de)},$$slots:{default:!0}});var He=Y(Ie,2);kr(He,{get value(){return i(N).inheritanceGroupId},set value(be){i(N).inheritanceGroupId=be}}),U(et),U(Pe);var Ye=Y(Pe,2),Fe=W(Ye),it=W(Fe);{let be=B(()=>i(N).isDownloadable??!1);Ur(it,{id:`download-${T}`,get checked(){return i(be)},onCheckedChange:$=>i(N).isDownloadable=$})}var Vt=Y(it,2);Zt(Vt,{for:`download-${T}`,children:(be,$)=>{rt();var de=ct("Downloadable");v(be,de)},$$slots:{default:!0}}),U(Fe);var Dt=Y(Fe,2),Ot=W(Dt);{let be=B(()=>i(N).isVisibleOnInit??!1);Ur(Ot,{id:`visible-${T}`,get checked(){return i(be)},onCheckedChange:$=>i(N).isVisibleOnInit=$})}var mt=Y(Ot,2);Zt(mt,{for:`visible-${T}`,children:(be,$)=>{rt();var de=ct("Visible Init");v(be,de)},$$slots:{default:!0}}),U(Dt);var at=Y(Dt,2),Ae=W(at);{let be=B(()=>i(N).isHidden??!1);Ur(Ae,{id:`hidden-${T}`,get checked(){return i(be)},onCheckedChange:$=>i(N).isHidden=$})}var Re=Y(Ae,2);Zt(Re,{for:`hidden-${T}`,children:(be,$)=>{rt();var de=ct("Hidden");v(be,de)},$$slots:{default:!0}}),U(at);var Xe=Y(at,2),tt=W(Xe);{let be=B(()=>i(N).disableVisibilityToggle??!1);Ur(tt,{id:`disable-toggle-${T}`,get checked(){return i(be)},onCheckedChange:$=>i(N).disableVisibilityToggle=$})}var ut=Y(tt,2);Zt(ut,{for:`disable-toggle-${T}`,children:(be,$)=>{rt();var de=ct("Lock Visibility");v(be,de)},$$slots:{default:!0}}),U(Xe);var Ue=Y(Xe,2),Pt=W(Ue);{let be=B(()=>i(N).isOpenOnInit??!1);Ur(Pt,{id:`open-${T}`,get checked(){return i(be)},onCheckedChange:$=>i(N).isOpenOnInit=$})}var kt=Y(Pt,2);Zt(kt,{for:`open-${T}`,children:(be,$)=>{rt();var de=ct("Open Init");v(be,de)},$$slots:{default:!0}}),U(Ue);var qt=Y(Ue,2),wt=W(qt);{let be=B(()=>i(N).showFields??!1);Ur(wt,{id:`show-fields-${T}`,get checked(){return i(be)},onCheckedChange:$=>i(N).showFields=$})}var yt=Y(wt,2);Zt(yt,{for:`show-fields-${T}`,children:(be,$)=>{rt();var de=ct("Show Fields");v(be,de)},$$slots:{default:!0}}),U(qt),U(Ye);var _t=Y(Ye,2),Ct=W(_t);Kt(Ct,{variant:"destructive",size:"sm",onclick:()=>s(T),children:(be,$)=>{var de=Hv(),Ge=C(de);bs(Ge,{class:"mr-2 h-4 w-4"}),rt(),v(be,de)},$$slots:{default:!0}}),U(_t),U(Ve),_l($e,()=>i(N).type,be=>i(N).type=be),v(Be,Ve)},$$slots:{default:!0}})}),v(le,Me)},$$slots:{default:!0}})})}v(E,M)}),v(D,S)},$$slots:{default:!0}})}),U(f),v(u,f),he()}var Yv=J("<!> Edit Area Treeview",1),Jv=J("<!> Edit Data Treeview",1),Qv=J("<!> <!>",1),Xv=J("<!> <!>",1),Zv=J("<!> <!>",1),$v=J("<!> <!>",1),eg=J('<div class="grid w-full items-center gap-1.5"><!> <!></div> <div class="grid w-full items-center gap-1.5"><!> <!></div> <div class="grid w-full items-center gap-1.5"><!> <!></div> <div class="flex gap-2 pt-2"><!> <!></div> <!> <!>',1),tg=J('<div class="p-4 text-center text-muted-foreground">No configuration loaded. Load from URL or File above.</div>'),rg=J('<div class="space-y-4"><!></div>');function ng(u,e){fe(e,!0);let n=K(e,"manager",7),a=ie(!1),s=ie(!1);function f(){n().value&&!n().value.areaTreeview&&(n().value.areaTreeview={items:[]}),O(a,!0)}function d(){n().value&&!n().value.dataTreeview&&(n().value.dataTreeview={items:[]}),O(s,!0)}var g=rg(),y=W(g);{var p=D=>{var k=eg(),S=C(k),_=W(S);Zt(_,{children:(ce,ke)=>{rt();var pe=ct("Title");v(ce,pe)},$$slots:{default:!0}});var E=Y(_,2);kr(E,{placeholder:"Map Title",get value(){return n().value.title},set value(ce){n().value.title=ce}}),U(S);var N=Y(S,2),T=W(N);Zt(T,{children:(ce,ke)=>{rt();var pe=ct("Portal URL");v(ce,pe)},$$slots:{default:!0}});var M=Y(T,2);kr(M,{placeholder:"https://www.arcgis.com",get value(){return n().value.portalUrl},set value(ce){n().value.portalUrl=ce}}),U(N);var H=Y(N,2),Z=W(H);Zt(Z,{children:(ce,ke)=>{rt();var pe=ct("Item ID");v(ce,pe)},$$slots:{default:!0}});var re=Y(Z,2);kr(re,{placeholder:"Portal Item ID",get value(){return n().value.portalItemId},set value(ce){n().value.portalItemId=ce}}),U(H);var Q=Y(H,2),le=W(Q);Kt(le,{variant:"outline",class:"flex-1",onclick:f,children:(ce,ke)=>{var pe=Yv(),Be=C(pe);Au(Be,{class:"mr-2 h-4 w-4"}),rt(),v(ce,pe)},$$slots:{default:!0}});var De=Y(le,2);Kt(De,{variant:"outline",class:"flex-1",onclick:d,children:(ce,ke)=>{var pe=Jv(),Be=C(pe);Pu(Be,{class:"mr-2 h-4 w-4"}),rt(),v(ce,pe)},$$slots:{default:!0}}),U(Q);var Me=Y(Q,2);ae(Me,()=>Ci,(ce,ke)=>{ke(ce,{get open(){return i(a)},set open(pe){O(a,pe,!0)},children:(pe,Be)=>{var Ze=V(),Ve=C(Ze);ae(Ve,()=>Si,(Te,ze)=>{ze(Te,{class:"max-h-[90vh] max-w-4xl overflow-y-auto",children:(Se,je)=>{var qe=Xv(),Je=C(qe);ae(Je,()=>xi,(Ne,$e)=>{$e(Ne,{children:(Pe,ht)=>{var oe=Qv(),nt=C(oe);ae(nt,()=>_i,(Ie,He)=>{He(Ie,{children:(Ye,Fe)=>{rt();var it=ct("Area Treeview Configuration");v(Ye,it)},$$slots:{default:!0}})});var et=Y(nt,2);ae(et,()=>ki,(Ie,He)=>{He(Ie,{children:(Ye,Fe)=>{rt();var it=ct("Configure the layer structure for area selection.");v(Ye,it)},$$slots:{default:!0}})}),v(Pe,oe)},$$slots:{default:!0}})});var Qe=Y(Je,2);{var ve=Ne=>{ts(Ne,{get config(){return n().value.areaTreeview}})};te(Qe,Ne=>{n().value.areaTreeview&&Ne(ve)})}v(Se,qe)},$$slots:{default:!0}})}),v(pe,Ze)},$$slots:{default:!0}})});var ne=Y(Me,2);ae(ne,()=>Ci,(ce,ke)=>{ke(ce,{get open(){return i(s)},set open(pe){O(s,pe,!0)},children:(pe,Be)=>{var Ze=V(),Ve=C(Ze);ae(Ve,()=>Si,(Te,ze)=>{ze(Te,{class:"max-h-[90vh] max-w-4xl overflow-y-auto",children:(Se,je)=>{var qe=$v(),Je=C(qe);ae(Je,()=>xi,(Ne,$e)=>{$e(Ne,{children:(Pe,ht)=>{var oe=Zv(),nt=C(oe);ae(nt,()=>_i,(Ie,He)=>{He(Ie,{children:(Ye,Fe)=>{rt();var it=ct("Data Treeview Configuration");v(Ye,it)},$$slots:{default:!0}})});var et=Y(nt,2);ae(et,()=>ki,(Ie,He)=>{He(Ie,{children:(Ye,Fe)=>{rt();var it=ct("Configure the layer structure for data selection.");v(Ye,it)},$$slots:{default:!0}})}),v(Pe,oe)},$$slots:{default:!0}})});var Qe=Y(Je,2);{var ve=Ne=>{ts(Ne,{get config(){return n().value.dataTreeview}})};te(Qe,Ne=>{n().value.dataTreeview&&Ne(ve)})}v(Se,qe)},$$slots:{default:!0}})}),v(pe,Ze)},$$slots:{default:!0}})}),v(D,k)},w=D=>{var k=tg();v(D,k)};te(y,D=>{n().value?D(p):D(w,!1)})}U(g),v(u,g),he()}var ig=J("<!> <!>",1),ag=J("<!> <!> <!>",1),og=J("<!> Add Map",1),sg=J('<div class="space-y-2 rounded-md border p-4"><div class="flex items-center justify-between"><div class="flex items-center space-x-2"><!> <!></div> <!></div> <!> <!></div>'),lg=J('<div class="space-y-4"><div class="flex items-center justify-between"><h3 class="text-lg font-medium">Available Maps</h3> <!></div> <!> <div class="flex justify-end"><!></div></div>'),cg=J("<!> <!> <!> <!>",1),ug=J("<!> <!>",1),dg=J("<!> <!>",1);function fg(u,e){fe(e,!0);let n=ie(-1),a=B(()=>Hr.instance);function s(){}function f(){i(n)!==-1&&e.onSelectMap(i(n))}function d(){i(a)&&i(a).mapsConfig.push(new mi)}function g(w){i(a)&&(i(a).mapsConfig.splice(w,1),i(n)===w?O(n,-1):i(n)>w&&pl(n,-1))}var y=V(),p=C(y);ae(p,()=>Ci,(w,D)=>{D(w,{children:(k,S)=>{var _=dg(),E=C(_);{let T=B(()=>Wt(Sl({variant:"outline"}),e.buttonClass));ae(E,()=>qf,(M,H)=>{H(M,{onclick:s,get class(){return i(T)},children:(Z,re)=>{Ou(Z,{})},$$slots:{default:!0}})})}var N=Y(E,2);ae(N,()=>Si,(T,M)=>{M(T,{class:"max-h-[80vh] overflow-y-auto sm:max-w-[600px]",children:(H,Z)=>{var re=ug(),Q=C(re);ae(Q,()=>xi,(Me,ne)=>{ne(Me,{children:(ce,ke)=>{var pe=ig(),Be=C(pe);ae(Be,()=>_i,(Ve,Te)=>{Te(Ve,{children:(ze,Se)=>{rt();var je=ct("Configuration");v(ze,je)},$$slots:{default:!0}})});var Ze=Y(Be,2);ae(Ze,()=>ki,(Ve,Te)=>{Te(Ve,{children:(ze,Se)=>{rt();var je=ct("Manage application settings and configurations.");v(ze,je)},$$slots:{default:!0}})}),v(ce,pe)},$$slots:{default:!0}})});var le=Y(Q,2);{var De=Me=>{var ne=V(),ce=C(ne);ae(ce,()=>Ms,(ke,pe)=>{pe(ke,{value:"maps",class:"w-full",children:(Be,Ze)=>{var Ve=cg(),Te=C(Ve);ae(Te,()=>Fs,(qe,Je)=>{Je(qe,{class:"grid w-full grid-cols-3",children:(Qe,ve)=>{var Ne=ag(),$e=C(Ne);ae($e,()=>gi,(oe,nt)=>{nt(oe,{value:"maps",children:(et,Ie)=>{rt();var He=ct("Maps");v(et,He)},$$slots:{default:!0}})});var Pe=Y($e,2);ae(Pe,()=>gi,(oe,nt)=>{nt(oe,{value:"download",children:(et,Ie)=>{rt();var He=ct("Download API");v(et,He)},$$slots:{default:!0}})});var ht=Y(Pe,2);ae(ht,()=>gi,(oe,nt)=>{nt(oe,{value:"chatbot",children:(et,Ie)=>{rt();var He=ct("Chatbot API");v(et,He)},$$slots:{default:!0}})}),v(Qe,Ne)},$$slots:{default:!0}})});var ze=Y(Te,2);ae(ze,()=>la,(qe,Je)=>{Je(qe,{value:"maps",class:"space-y-4",children:(Qe,ve)=>{var Ne=lg(),$e=W(Ne),Pe=Y(W($e),2);Kt(Pe,{variant:"outline",size:"sm",onclick:d,children:(et,Ie)=>{var He=og(),Ye=C(He);ys(Ye,{class:"mr-2 h-4 w-4"}),rt(),v(et,He)},$$slots:{default:!0}}),U($e);var ht=Y($e,2);{let et=B(()=>i(n).toString());ae(ht,()=>Pv,(Ie,He)=>{He(Ie,{get value(){return i(et)},onValueChange:Ye=>O(n,parseInt(Ye),!0),children:(Ye,Fe)=>{var it=V(),Vt=C(it);er(Vt,17,()=>i(a).mapsConfig,Er,(Dt,Ot,mt)=>{var at=sg(),Ae=W(at),Re=W(Ae),Xe=W(Re);{let kt=B(()=>mt.toString());ae(Xe,()=>Tv,(qt,wt)=>{wt(qt,{get value(){return i(kt)},id:`map-${mt}`})})}var tt=Y(Xe,2);Zt(tt,{for:`map-${mt}`,children:(kt,qt)=>{rt();var wt=ct();ft(()=>Mt(wt,i(Ot).value?.title||`Map ${mt+1} (Not Loaded)`)),v(kt,wt)},$$slots:{default:!0}}),U(Re);var ut=Y(Re,2);Kt(ut,{variant:"ghost",size:"icon",onclick:()=>g(mt),class:"text-red-500 hover:text-red-700",children:(kt,qt)=>{bs(kt,{class:"h-4 w-4"})},$$slots:{default:!0}}),U(Ae);var Ue=Y(Ae,2);fa(Ue,{get manager(){return i(Ot)},title:`Map ${mt+1} Configuration`,fields:[]});var Pt=Y(Ue,2);ng(Pt,{get manager(){return i(Ot)}}),U(at),v(Dt,at)}),v(Ye,it)},$$slots:{default:!0}})})}var oe=Y(ht,2),nt=W(oe);{let et=B(()=>i(n)===-1);Kt(nt,{onclick:f,get disabled(){return i(et)},children:(Ie,He)=>{rt();var Ye=ct("Select Map");v(Ie,Ye)},$$slots:{default:!0}})}U(oe),U(Ne),v(Qe,Ne)},$$slots:{default:!0}})});var Se=Y(ze,2);ae(Se,()=>la,(qe,Je)=>{Je(qe,{value:"download",class:"space-y-4",children:(Qe,ve)=>{fa(Qe,{get manager(){return i(a).uprnDownloadApiConfig},title:"Download API Configuration",fields:[{key:"baseUrl",label:"Base URL"},{key:"healthRoute",label:"Health Route"},{key:"requestJobRoute",label:"Request Job Route"},{key:"requestJobStatusesRoute",label:"Job Statuses Route"},{key:"getAreaSelectionLimitsRoute",label:"Area Limits Route"},{key:"fetchDownloadRoute",label:"Fetch Download Route"}]})},$$slots:{default:!0}})});var je=Y(Se,2);ae(je,()=>la,(qe,Je)=>{Je(qe,{value:"chatbot",class:"space-y-4",children:(Qe,ve)=>{fa(Qe,{get manager(){return i(a).uprnChatbotApiConfig},title:"Chatbot API Configuration",fields:[{key:"baseUrl",label:"Base URL"},{key:"healthRoute",label:"Health Route"},{key:"chatRoute",label:"Chat Route"},{key:"chatStreamRoute",label:"Chat Stream Route"}]})},$$slots:{default:!0}})}),v(Be,Ve)},$$slots:{default:!0}})}),v(Me,ne)};te(le,Me=>{i(a)&&Me(De)})}v(H,re)},$$slots:{default:!0}})}),v(k,_)},$$slots:{default:!0}})}),v(u,y),he()}var hg=J("<!> <!>",1),vg=J('<p class="p-4 text-center text-sm text-gray-500">Download service is not available.</p>'),gg=J("<div><!></div> <div><!></div> <div><!></div> <div><!></div>",1),mg=J("<div><!></div>"),pg=J('<p class="p-4 text-center text-sm text-gray-500">AI UPRN Chatbot service is not available.</p>'),yg=J('<div class="relative flex h-full w-full min-w-0 flex-col overflow-visible"><!> <!> <!> <!> <!></div>'),bg=J("<!> <!> <!> <!>",1);function Dm(u,e){fe(e,!0);let n,a,s;const f=vt(new xf),d=vt(new _f);let g=B(()=>Hr.instance?.mapsConfig.map(Pe=>Pe.value).filter(Pe=>Pe!==void 0)??[]),y=ie(0),p=B(()=>i(g)[i(y)]),w=ie("define-areas"),D=vt(new yf),k=vt(new ac),S=ie(null),_=vt(new Iv(k,D)),E=ie(null),N=ie(void 0),T=ie(void 0),M=ie(void 0),H=B(()=>Hr.instance?.uprnDownloadApiConfig.value?new yv(Hr.instance.uprnDownloadApiConfig.value):void 0),Z=B(()=>Hr.instance?.uprnChatbotApiConfig.value?new bv(Hr.instance.uprnChatbotApiConfig.value):void 0),re=ie(!1),Q=ie(!1),le=ie(vt(new Set)),De=ie(vt(new Set)),Me=ie(!0),ne=vt(Co.LEFT);vt(Co.BOTTOM);let ce=B(()=>Hr.instance?.mainSidebarSizes??[]),ke=ie(vt(typeof window<"u"?window.innerWidth:1280)),pe=B(()=>Ze(i(ce),Pe=>Pe.originalSize)??"300px"),Be=B(()=>Ze(i(ce),Pe=>Pe.minSize)??"200px");function Ze(Pe,ht){if(!Pe||Pe.length===0)return;const nt=[...Pe].sort((et,Ie)=>Ie.breakpoint-et.breakpoint).find(et=>i(ke)>=et.breakpoint);return nt?ht(nt):"0"}function Ve(){O(Me,!i(Me))}function Te(Pe){O(w,Pe,!0)}function ze(){O(w,"downloads")}function Se(Pe){if(Pe<0||Pe>=i(g).length){console.warn(`[uprn-2/page] Invalid map index: ${Pe}`);return}je(),O(w,"define-areas"),f.data=null,f.isLoaded=!1,O(y,Pe,!0)}function je(){console.log("[uprn-2/page] Clearing all selections"),k.clearSelectedAreas(),D.clearSelections(),n?.clearSelections(),a?.clearSelections(),af()}sn(async()=>{O(M,new _v,!0),await i(M).init(`${xo}/custom-renderers.json`),console.log("[uprn-2/page] CustomRendererService initialized");try{await Hr.load(`${xo}/config/apps/uprn/config.json`)}catch(ht){console.error("[uprn-2/page] Failed to load UPRN config",ht)}await _.loadSelections();const{default:Pe}=await Rn(async()=>{const{default:ht}=await import("../chunks/DP-0fjQN.js").then(oe=>oe.a2);return{default:ht}},__vite__mapDeps([25,1,3,26,27,15,28,13,4,29,5,6,12,17,30,31,8,14,32,22,33,34,35,16,36,37,38,39,40,0,2,7,9,10,11,18,19,20,21,23,24,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);O(E,new Pe,!0),O(S,new oc(k,new cs(i(E))),!0)}),lt(()=>{i(H)?i(H).getHealth().then(Pe=>{O(re,Pe,!0),Pe?console.log("[uprn-2/page] UPRN Download Service is available"):console.warn("[uprn-2/page] UPRN Download Service is NOT available")}):O(re,!1)}),lt(()=>{i(Z)?i(Z).getHealth().then(Pe=>{O(Q,Pe,!0),Pe?console.log("[uprn-2/page] AI UPRN Chatbot Service is available"):console.warn("[uprn-2/page] AI UPRN Chatbot Service is NOT available")}):O(Q,!1)}),lt(()=>{!i(p)||!i(E)||!i(S)||f.data?.portalItem?.id!==i(p).portalItemId&&(console.log(`[uprn-2/page] Loading map ${i(y)+1} of ${i(g).length}`),O(De,new Set((i(p).selectableLayers||[]).map(Pe=>Pe.layerName)),!0),i(S).setFieldInfos(i(p).selectableLayers||[]),O(N,new Uo(i(p).dataTreeview),!0),O(T,new Uo(i(p).areaTreeview),!0),O(le,new Set(i(p).dataTreeview?.fieldsToHide||[]),!0),f.initializeAsync({portalUrl:i(p).portalUrl,itemId:i(p).portalItemId||"",proxy:i(p).proxy}))}),sn(()=>{const Pe=()=>{O(ke,window.innerWidth,!0)};return window.addEventListener("resize",Pe),()=>{window.removeEventListener("resize",Pe)}}),rs(()=>{D.cleanup()});var qe=bg(),Je=C(qe);mv(Je,{});var Qe=Y(Je,2);$f(Qe,{get dataSelectionStore(){return D},get fieldFilterMenuStore(){return d},get fieldsToHide(){return i(le)}});var ve=Y(Qe,2);{var Ne=Pe=>{var ht=hg(),oe=C(ht);Ru(oe,{get areaSelectionInteractionStore(){return i(S)}});var nt=Y(oe,2);Fd(nt,{get areaSelectionInteractionStore(){return i(S)}}),v(Pe,ht)};te(ve,Pe=>{i(S)&&Pe(Ne)})}var $e=Y(ve,2);{const Pe=oe=>{var nt=yg(),et=W(nt);fg(et,{onSelectMap:Se,buttonClass:"absolute top-0 left-0 z-10 shadow-none p-0 w-8 h-8 hover:bg-transparent focus:outline-none focus:ring-0 ml-1 mt-1"});var Ie=Y(et,2);ae(Ie,()=>bu,(it,Vt)=>{Vt(it,{children:(Dt,Ot)=>{Rh(Dt,{get value(){return i(w)},get triggers(){return pv},onValueChange:Te})},$$slots:{default:!0}})});var He=Y(Ie,2);ae(He,()=>sc,(it,Vt)=>{Vt(it,{children:(Dt,Ot)=>{var mt=gg(),at=C(mt),Ae=W(at);fi(Ae,{children:(kt,qt)=>{var wt=V(),yt=C(wt);{var _t=Ct=>{sr(mh(Ct,{get webMap(){return f.data},get treeviewConfigStore(){return i(T)},get areaSelectionStore(){return k}}),be=>n=be,()=>n)};te(yt,Ct=>{f.isLoaded&&Ct(_t)})}v(kt,wt)}}),U(at);var Re=Y(at,2),Xe=W(Re);fi(Xe,{children:(kt,qt)=>{var wt=V(),yt=C(wt);{var _t=Ct=>{{let be=B(()=>s?.getLayerViewProvider());sr(Ah(Ct,{get webMap(){return f.data},get dataSelectionStore(){return D},get layerViewProvider(){return i(be)},get treeviewConfigStore(){return i(N)},get customRendererService(){return i(M)},get fieldFilterMenuStore(){return d}}),$=>a=$,()=>a)}};te(yt,Ct=>{f.isLoaded&&Ct(_t)})}v(kt,wt)}}),U(Re);var tt=Y(Re,2),ut=W(tt);fi(ut,{children:(kt,qt)=>{var wt=V(),yt=C(wt);{var _t=Ct=>{Ff(Ct,{get webMapStore(){return f},get areaSelectionInteractionStore(){return i(S)},get dataSelectionStore(){return D},get dataSelectionTreeviewConfig(){return i(N)},get fieldFilterMenuStore(){return d}})};te(yt,Ct=>{i(S)&&f.isLoaded&&Ct(_t)})}v(kt,wt)}}),U(tt);var Ue=Y(tt,2),Pt=W(Ue);fi(Pt,{children:(kt,qt)=>{var wt=V(),yt=C(wt);{var _t=be=>{var $=vg();v(be,$)},Ct=be=>{mf(be,{get webMapStore(){return f},get uprnDownloadService(){return i(H)},get fieldsToHide(){return i(le)}})};te(yt,be=>{!i(H)||!i(re)?be(_t):be(Ct,!1)})}v(kt,wt)}}),U(Ue),ft(()=>{at.hidden=i(w)!=="define-areas",Re.hidden=i(w)!=="select-data",tt.hidden=i(w)!=="export",Ue.hidden=i(w)!=="downloads"}),v(Dt,mt)},$$slots:{default:!0}})});var Ye=Y(He,2);ae(Ye,()=>_u,(it,Vt)=>{Vt(it,{children:(Dt,Ot)=>{var mt=mg(),at=W(mt);{var Ae=Re=>{wf(Re,{onExportSuccess:ze,clearSelections:je,get areaSelectionInteractionStore(){return i(S)},get dataSelectionStore(){return D}})};te(at,Re=>{i(S)&&Re(Ae)})}U(mt),ft(()=>mt.hidden=i(w)!=="export"),v(Dt,mt)},$$slots:{default:!0}})});var Fe=Y(Ye,2);Cv(Fe,{isOpenedOnInit:!0,children:(it,Vt)=>{var Dt=V(),Ot=C(Dt);{var mt=Ae=>{var Re=pg();v(Ae,Re)},at=Ae=>{Zd(Ae,{get aiUprnChatbotService(){return i(Z)}})};te(Ot,Ae=>{!i(Z)||!i(Q)?Ae(mt):Ae(at,!1)})}v(it,Dt)},$$slots:{default:!0}}),U(nt),v(oe,nt)},ht=oe=>{var nt=V(),et=C(nt);{var Ie=He=>{sr(Dh(He,{get webMap(){return f.data},get mapView(){return i(E)},get areaSelectionInteractionStore(){return i(S)},get interactableLayers(){return i(De)}}),Ye=>s=Ye,()=>s)};te(et,He=>{i(S)&&He(Ie)})}v(oe,nt)};ae($e,()=>uc,(oe,nt)=>{nt(oe,{get isOpen(){return i(Me)},onToggle:Ve,get position(){return ne},get originalSize(){return i(pe)},get minSize(){return i(Be)},sidebarContent:Pe,mainContent:ht,$$slots:{sidebarContent:!0,mainContent:!0}})})}v(u,qe),he()}export{Dm as component};
