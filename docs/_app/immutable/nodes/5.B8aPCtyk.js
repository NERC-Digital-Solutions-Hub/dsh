const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/Wr6rKfR0.js","../chunks/CKPuaBYR.js","../chunks/w-2V2ENZ.js","../chunks/DGjcIG0n.js","../chunks/CzQMdAkT.js","../chunks/D9Z9MdNV.js","../chunks/CInk37WK.js","../chunks/BBGELVfD.js","../chunks/C6_pfFWS.js","../chunks/DE3--tLW.js","../chunks/Dm941dBC.js","../chunks/D8t6YHTB.js","../chunks/BWPniy7t.js","../chunks/B0qLHwdt.js","../chunks/CCvPy2fM.js","../chunks/DckaW9b_.js","../chunks/CL7vXgR2.js","../chunks/DS9n3-Bl.js","../chunks/DDm-X-5M.js","../chunks/D90a-UoA.js","../chunks/DnQgC4Ha.js","../chunks/D6wORzA5.js","../chunks/D6KPPgz5.js","../chunks/BNZPdy3K.js","../chunks/D_y-sfSV.js","../chunks/IxEuKwon.js","../chunks/Cl5lrJ4c.js","../chunks/CTwLLRLG.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/cmtqNiVW.js","../chunks/uFJEctAz.js","../chunks/BvgbCAFv.js","../chunks/CNijnAeP.js","../chunks/Djp3mnm5.js","../chunks/DFZ0CUon.js","../chunks/DQOJ18NT.js","../chunks/v_fQKU4l.js","../chunks/WkIQChO6.js","../chunks/Cu_5K5Zz.js","../chunks/BnCqjgE6.js","../chunks/Bdf-11Z5.js","../chunks/EzLf78vY.js","../chunks/CzfTFKt2.js","../chunks/DpoScDxu.js","../chunks/mri5zWU4.js","../chunks/DoXoWGcU.js","../chunks/DDtlEfCS.js","../chunks/C_jHcOel.js","../chunks/DZd6gJy7.js","../chunks/DNir1xdy.js","../chunks/C8BmVxiO.js","../chunks/BP0-ZyuP.js","../chunks/CMBSuDh0.js","../chunks/BTH6o7j9.js","../chunks/fN4C02TC.js","../chunks/cv8iTbG7.js","../chunks/DJXJ-7FB.js","../chunks/9YvG7tFv.js","../chunks/5rUod1La.js","../chunks/DZzaLosK.js","../chunks/aQeO9QTD.js","../chunks/CzVE9OXO.js","../chunks/Ch_Z0nfe.js","../chunks/DGPbYEVC.js","../chunks/CuBDo_-F.js","../chunks/Jv64hfd5.js","../chunks/BDvScnYe.js","../chunks/DdIyMqx_.js","../chunks/Lkgx_IfB.js","../chunks/B5hrGkZw.js","../chunks/BGsbaJnX.js","../chunks/Chk7YAAL.js","../chunks/C4eyRFHZ.js","../chunks/Cgb6qxNH.js","../chunks/D9a14fBp.js","../chunks/CHt7Mn0H.js","../chunks/QQC62dOK.js","../chunks/BNgrnmA0.js","../chunks/h1zrJ-8i.js","../chunks/BFBRCsEe.js","../chunks/D_yTgX-R.js","../chunks/DKpmsPfl.js","../chunks/CaVKkSa6.js","../chunks/C1d91D9B.js","../chunks/DVC1E9T3.js","../chunks/B1N-tmtC.js","../chunks/CASyCajO.js","../chunks/BiphejqT.js","../chunks/BeeG8NQi.js","../chunks/pDuGEAnG.js","../chunks/CAZPlRMg.js","../chunks/BrScpkSj.js","../chunks/rxpTDz6e.js","../chunks/BNJmkIEX.js","../chunks/DcTGm81B.js","../chunks/BEtcpBDE.js","../chunks/CL2NbQte.js","../chunks/IrTO006n.js","../chunks/BmUHNJWP.js","../chunks/xfJdFrc1.js","../chunks/DdJ5PhEA.js","../chunks/C5CzMsLd.js","../chunks/ej9iy2tj.js","../chunks/D-pA6xvz.js","../chunks/DqiAQ2UU.js","../chunks/B0C1T1UY.js","../chunks/iXzpqCne.js","../chunks/BxnPSAfS.js","../chunks/DBN86a8W.js","../chunks/B2C-dbaZ.js","../chunks/ClnEmzgi.js","../chunks/C1zu_xvx.js","../chunks/CWS3AiMj.js","../chunks/DRHJSLBV.js","../chunks/CebN7yrZ.js","../chunks/GKolV7NZ.js","../chunks/MtU-BGcu.js","../chunks/BEnS4Tus.js","../chunks/L5VTCVZK.js","../chunks/g6nCY5U5.js","../chunks/D9B-nNzP.js","../chunks/bak0aO70.js","../chunks/m_57cSl2.js","../chunks/BiKjlG2z.js","../chunks/Dcu3Lxq2.js","../chunks/VMSlSy0z.js","../chunks/wBp0zEev.js","../chunks/YF3zTyxo.js","../chunks/AW2prik-.js","../chunks/C2SSoHeS.js","../chunks/DAJsxU5z.js","../chunks/DMYGUuRw.js","../chunks/Dp9xyNUZ.js","../chunks/DD18C3z5.js","../chunks/CXlOSIUB.js","../chunks/DmYT_Xwc.js","../chunks/D1qUMsxF.js","../chunks/DjdLBfP6.js","../chunks/DPxN9dl1.js","../chunks/CIr2exaD.js","../chunks/CLHEgYYQ.js","../chunks/CvKH8Nhk.js","../chunks/CwFwQyan.js","../chunks/DypQGKEF.js","../chunks/C7F_V7dC.js","../chunks/BpLKgQZ7.js","../chunks/D8e7KE_h.js","../chunks/KcazVFlU.js","../chunks/CYsUaMUi.js","../chunks/SDyydinm.js","../chunks/H7r6T5zw.js","../chunks/D35hgLZq.js","../chunks/Dhq8eg9R.js","../chunks/BxF4T9N2.js","../chunks/D55AmI9p.js","../chunks/BWgvDHAP.js","../chunks/BqMYqny5.js","../chunks/DCdj6Lab.js","../chunks/BXfupK_G.js","../chunks/BkQcsSCB.js","../chunks/DPb6J-GU.js","../chunks/-ytxYhhT.js","../chunks/24-izIl7.js","../chunks/COrOErwf.js","../chunks/Qt6JCLST.js","../chunks/B_ZG5ntY.js","../chunks/DbSS6pRl.js","../chunks/C8aWokfD.js","../chunks/cHvQTL2Z.js","../chunks/ovw6hubi.js","../chunks/FC-_l_dz.js","../chunks/Bm851sU-.js","../chunks/Dyz97u5R.js","../chunks/CZIedxnU.js","../chunks/CxhGeGVi.js","../chunks/BXt_i_Zn.js","../chunks/NRTVJfGF.js","../chunks/DsHDw-MJ.js"])))=>i.map(i=>d[i]);
import"../chunks/DsnmJJEf.js";import{a as Ft,o as Pt}from"../chunks/6AnzUsxp.js";import{b5 as zt,p as Y,e as E,g as C,a as l,d as J,M as r,aH as $,f as V,c as b,b as se,r as w,aG as N,am as K,ah as p,u as ee,a9 as A,Q as X,n as ce,aI as me}from"../chunks/CssMMRv9.js";import{p as Q,i as z,r as ut,s as Et,a as Ot,b as Gt}from"../chunks/B2_wNakc.js";import{_ as ge}from"../chunks/D9Z9MdNV.js";import{s as ae,a as re}from"../chunks/CN5sxHli.js";import{b as Be}from"../chunks/CxCs-E1a.js";import{z as Ut,b as We,B as Rt,p as de,c as jt}from"../chunks/6VTe63PU.js";import{a as ue,i as He}from"../chunks/Cv5w3Z2a.js";import{c as q}from"../chunks/CvjFljrh.js";import{T as Bt,O as ht,a as Wt,G as at,F as nt,b as qt,c as Ie,d as vt,t as le,e as Zt,f as Qt,g as Xt,h as Yt,i as Jt,p as Kt,S as Ce,C as ot,j as $t,I as ei,k as ti,l as ii,m as ri,n as ai,L as ni,o as oi,V as st,q as si,r as li}from"../chunks/BNTq2Va4.js";import{a as di,e as De,d as ke,s as ye,b as ci}from"../chunks/DLkVeTyc.js";import{h as be}from"../chunks/0XjDNaHi.js";import{d as Ae}from"../chunks/CVUyh2xq.js";import{C as ui,c as Ke,d as $e,S as hi,s as vi,X as fi,e as gi,f as yi,g as mi,h as wi,i as _i,j as bi,k as pi}from"../chunks/BpEGVQFh.js";import{C as Si}from"../chunks/eMCoaWTw.js";import{B as fe}from"../chunks/DuixW-Ok.js";var Ii=V("<div><!></div>");function Ci(h,e){const t=zt();Y(e,!0);let i=Q(e,"id",19,()=>Ut(t)),a=Q(e,"ref",15,null),n=ut(e,["$$slots","$$events","$$legacy","children","child","id","ref","value"]);const s=Bt.create({value:We(()=>e.value),id:We(()=>i()),ref:We(()=>a(),o=>a(o))}),m=$(()=>Rt(n,s.props));var d=E(),u=C(d);{var g=o=>{var y=E(),c=C(y);ae(c,()=>e.child,()=>({props:r(m)})),l(o,y)},_=o=>{var y=Ii();di(y,()=>({...r(m)}));var c=b(y);ae(c,()=>e.children??se),w(y),l(o,y)};z(u,o=>{e.child?o(g):o(_,!1)})}l(h,d),J()}class Hi{#e=N(K({featureLayerView:null,areaInfos:[]}));get layerHighlightState(){return r(this.#e)}set layerHighlightState(e){p(this.#e,e,!0)}#t=N(null);get lastAddedArea(){return r(this.#t)}set lastAddedArea(e){p(this.#t,e,!0)}#a=N(null);get lastRemovedArea(){return r(this.#a)}set lastRemovedArea(e){p(this.#a,e,!0)}#i=N(null);get currentHoveredArea(){return r(this.#i)}set currentHoveredArea(e){p(this.#i,e,!0)}#r=[];#o=new de;setNameFields(e){console.log("Setting name fields:",e),this.#r=e}setSelectedLayerView(e){this.layerHighlightState?.featureLayerView!==e&&(this.layerHighlightState&&this.layerHighlightState.areaInfos.forEach(t=>{t.handle.remove()}),this.layerHighlightState={featureLayerView:e,areaInfos:[]})}clearSelectedLayerView(){this.layerHighlightState.featureLayerView!==null&&(this.resetSelectedAreas(),this.layerHighlightState.featureLayerView=null)}resetSelectedAreas(){!this.layerHighlightState.featureLayerView&&this.layerHighlightState.areaInfos.length===0||(this.layerHighlightState&&this.layerHighlightState.areaInfos.forEach(e=>{e.handle.remove()}),this.layerHighlightState={featureLayerView:null,areaInfos:[]})}addSelectedArea(e,t){if(console.log("Adding selected area with ID:",e),!this.layerHighlightState){console.warn("SelectedAreasStore: No feature layer view is set.");return}const i={id:e,handle:t};this.layerHighlightState.areaInfos.push(i),this.lastAddedArea=i}removeSelectedArea(e){if(console.log("Removing selected area with ID:",e),!this.layerHighlightState){console.warn("SelectedAreasStore: No feature layer view is set.");return}const t=this.layerHighlightState.areaInfos.findIndex(i=>i.id===e);t!==-1&&(this.lastRemovedArea={id:e,handle:this.layerHighlightState.areaInfos[t].handle},this.layerHighlightState.areaInfos[t].handle.remove(),this.layerHighlightState.areaInfos.splice(t,1))}async getAreaNamesById(e){if(!this.layerHighlightState?.featureLayerView)return[];const t=this.getNameFieldForCurrentLayer();if(!t)return[];const i=this.layerHighlightState.featureLayerView.layer;let a=this.#o.get(i.uid);a||(a=new de,this.#o.set(i.uid,a));const n=new Array(e.length),s=new de,m=[];if(e.forEach((g,_)=>{s.set(g,_);const o=a.get(g);o!==void 0?n[_]=o:m.push(g)}),m.length===0)return n.map(g=>g??"");const d=i.objectIdField,u=await i.queryFeatures({objectIds:m,outFields:[t,d],returnGeometry:!1});for(const g of u.features){const _=g.attributes[d],o=g.attributes[t],y=s.get(_);y!==void 0&&(n[y]=o??"",a.set(_,o??""))}return n.map(g=>g??"")}setHoveredArea(e,t){this.currentHoveredArea&&this.clearHoveredArea(),this.currentHoveredArea={id:e,handle:t}}clearHoveredArea(){this.currentHoveredArea&&(this.currentHoveredArea?.handle.remove(),this.currentHoveredArea=null)}getNameFieldForCurrentLayer(){if(!this.layerHighlightState||!this.layerHighlightState.featureLayerView)return null;const e=this.#r.find(t=>t.layerName===this.layerHighlightState?.featureLayerView?.layer?.title)?.field;return e||(console.warn(`SelectedAreasStore: No name field configured for layer ${this.layerHighlightState.featureLayerView.layer.title}`,this.#r),null)}}const G=new Hi;class ki{#e=N(null);get mapView(){return r(this.#e)}set mapView(e){p(this.#e,e,!0)}#t=N(K(new Set));get interactableLayers(){return r(this.#t)}set interactableLayers(e){p(this.#t,e,!0)}pointerMoveHandle=null;clickHandle=null;leaveHandle=null;enterHandle=null;#a=N(!1);get isInitialized(){return r(this.#a)}set isInitialized(e){p(this.#a,e,!0)}#i=N(!0);get pointerInsideMap(){return r(this.#i)}set pointerInsideMap(e){p(this.#i,e,!0)}initializationInProgress=!1;async initializeAsync(e,t){if(console.log("[map-interaction-store] Initializing with MapView"),this.mapView===e&&this.isInitialized){console.log("[map-interaction-store] MapView is already initialized"),this.interactableLayers=t;return}if(this.initializationInProgress){console.log("[map-interaction-store] Initialization already in progress");return}this.initializationInProgress=!0,console.log("[map-interaction-store] Cleaning up previous MapView if any"),this.cleanup(),this.mapView=e,this.interactableLayers=t,await e.when(),this.setupHighlights(e),this.setupPointerMoveHandler(e),this.setupClickHandler(e),this.setupLeaveHandler(e),this.setupEnterHandler(e),this.isInitialized=!0,this.initializationInProgress=!1,console.log("[map-interaction-store] Initialized with MapView")}updateInteractableLayers(e){this.interactableLayers=e}setupHighlights(e){const t={name:"hover",color:"lightgreen",haloOpacity:1,fillOpacity:.2},i={name:"selected",color:"green",haloOpacity:1,fillOpacity:.3};e.highlights.push(t),e.highlights.push(i)}setupPointerMoveHandler(e){this.pointerMoveHandle=e.on("pointer-move",async t=>{if(!this.pointerInsideMap)return;const{results:i}=await e.hitTest(t),a=i[0];if(!a){this.clearHoverHighlight();return}const n=a.graphic,s=n.layer;if(!n||!s||!this.isLayerInteractable(s.id)||n.attributes?.[s.objectIdField]===void 0){this.clearHoverHighlight();return}const m=n.attributes?.[s.objectIdField];if(!(G.currentHoveredArea&&G.currentHoveredArea.id===m))try{const d=await e.whenLayerView(s);G.layerHighlightState.featureLayerView!==d&&G.setSelectedLayerView(d),this.clearHoverHighlight();const u=d;if(!u){console.warn("LayerView is not a FeatureLayerView");return}if(!this.pointerInsideMap)return;const g=u.highlight(n,{name:"hover"});G.setHoveredArea(m,g)}catch(d){console.error("Error in pointer-move handler:",d),this.clearHoverHighlight()}})}setupClickHandler(e){this.clickHandle=e.on("click",async t=>{const{results:i}=await e.hitTest(t),a=i[0];if(!a)return;const n=a.graphic,s=n.layer;if(console.log("Clicked graphic:",n),!n||!s||!this.isLayerInteractable(s.id)||n.attributes?.[s.objectIdField]===void 0)return;const m=n.attributes?.[s.objectIdField];try{const d=await e.whenLayerView(s),u=d;if(!u){console.warn("Layer is not a FeatureLayerView");return}G.layerHighlightState.featureLayerView!==d&&G.setSelectedLayerView(d);const _=(G.layerHighlightState.areaInfos||[]).find(o=>o.id===m);if(_)G.removeSelectedArea(_.id);else{const o=u.highlight(n,{name:"selected"});G.addSelectedArea(m,o)}}catch(d){console.error("Error in click handler:",d)}})}setupLeaveHandler(e){this.leaveHandle=e.on("pointer-leave",()=>{this.pointerInsideMap=!1,this.clearHoverHighlight()})}setupEnterHandler(e){this.enterHandle=e.on("pointer-enter",()=>{this.pointerInsideMap=!0})}isLayerInteractable(e){return this.interactableLayers.has(e)}clearHoverHighlight(){G.currentHoveredArea&&G.clearHoveredArea()}cleanup(){this.pointerMoveHandle&&(this.pointerMoveHandle.remove(),this.pointerMoveHandle=null),this.clickHandle&&(this.clickHandle.remove(),this.clickHandle=null),this.leaveHandle&&(this.leaveHandle.remove(),this.leaveHandle=null),this.enterHandle&&(this.enterHandle.remove(),this.enterHandle=null),this.clearHoverHighlight(),this.isInitialized=!1,this.mapView=null,this.pointerInsideMap=!0,this.interactableLayers=new Set,console.log("[map-interaction-store] Cleaned up")}get currentMapView(){return this.mapView}get initialized(){return this.isInitialized}}const Te=new ki;var Ai=V('<div class="esri-ui-element svelte-xggl6e"><!></div>'),Li=V('<div class="esri-ui-element svelte-xggl6e"><!></div>'),xi=V('<div class="map-view svelte-xggl6e"></div> <!> <!>',1);function Vi(h,e){Y(e,!0);const t=Q(e,"webMap",3,null),i=Q(e,"panelPosition",3,"top-left"),a=Q(e,"menuPosition",3,"top-right");let n=null,s=N(null),m=N(null),d=N(null),u=N(!1);const g="streets-vector";let _,o;async function y(){if(!o){const[{default:I},{default:x},{default:D}]=await Promise.all([ge(()=>import("../chunks/Wr6rKfR0.js").then(O=>O.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]),import.meta.url),ge(()=>import("../chunks/BnCqjgE6.js").then(O=>O.a3),__vite__mapDeps([40,1,2,3,5,41,24,42,22,6,7,43,32,44,20,21,45,8,9,10,11,25,46,47,17,33,48,49,50,26,51,52,15,53,0,4,12,13,14,16,18,19,23,27,28,29,30,31,34,35,36,37,38,39,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93]),import.meta.url),ge(()=>import("../chunks/BNJmkIEX.js").then(O=>O.W),__vite__mapDeps([94,1,2,3,5,6,7,0,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,41,42,43,44,45,95,96,97,98,67,99,100,80,81,71,55,56,57,58,59,60,61,62,63,64,65,101,102,103,70,66,104,105,106,107,69,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,46,47,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178]),import.meta.url)]);_=I,o=x}}async function c(I,x){const D=new o({container:x,popupEnabled:!1,map:I});return await D.when(),D}function f(I){I.ui.move("zoom","top-right"),r(m)&&i()&&I.ui.add(r(m),i()),r(d)&&a()&&I.ui.add(r(d),a()),p(u,!0)}async function M(){return new _({basemap:g})}async function L(){if(t())try{if(await y(),await H(),!r(s)){console.error("MapView is not initialized");return}r(s).map=t(),console.log("[uprn-map-view] MapView updated with new webMap")}catch(I){console.error("Error updating MapView with new webMap:",I)}}ee(()=>{t()&&L()});async function H(){if(!n){console.error("Map container element was not found");return}try{p(s,await c(t()??void 0,n),!0),f(r(s)),console.log("[uprn-map-view] Map loaded successfully")}catch(I){console.error("Error loading map:",I),await v()}}async function v(){try{const I=await M();p(s,await c(I,n),!0),f(r(s)),console.log("[uprn-map-view] Fallback map loaded")}catch(I){console.error("Error loading fallback map:",I)}}ee(()=>{if(!r(s)||!e.areaSelectionTreeviewStore.initialized)return;const I=e.areaSelectionTreeviewStore.getNonHiddenNodes().map(x=>x.id);Te.initialized?Te.updateInteractableLayers(new Set(I)):Te.initializeAsync(r(s),new Set(I))});async function S(I){if(!r(s))return;const x=await r(s).whenLayerView(I);if(!x){console.warn("Could not get LayerView for the visible node layer");return}G.setSelectedLayerView(x)}ee(()=>{if(!e.areaSelectionTreeviewStore.initialized)return;if(!e.areaSelectionTreeviewStore.getVisibleNodes().length){G.resetSelectedAreas();return}const I=e.areaSelectionTreeviewStore.getVisibleNodes()[0].layer;if(!I){console.warn("Visible node layer is not a FeatureLayer");return}S(I)});function T(){Te.cleanup(),r(s)&&r(s).destroy()}Ft(()=>{T()});var k=xi(),j=C(k);Be(j,I=>n=I,()=>n);var F=A(j,2);{var U=I=>{var x=Ai(),D=b(x);{var O=P=>{var W=E(),B=C(W);ae(B,()=>e.panel),l(P,W)};z(D,P=>{r(u)&&P(O)})}w(x),Be(x,P=>p(m,P),()=>r(m)),l(I,x)};z(F,I=>{e.panel&&I(U)})}var R=A(F,2);{var Z=I=>{var x=Li(),D=b(x);{var O=P=>{var W=E(),B=C(W);ae(B,()=>e.menu),l(P,W)};z(D,P=>{r(u)&&P(O)})}w(x),Be(x,P=>p(d,P),()=>r(d)),l(I,x)};z(R,I=>{e.menu&&I(Z)})}l(h,k),J()}var Ni=V('<div class="tree-node-item svelte-1ehc80l"><!></div>'),Ti=V('<div class="tree-children relative ml-4 w-full svelte-1ehc80l"><div class="tree-guide-line tree-guide-line-animate svelte-1ehc80l"></div> <!></div>'),Mi=V('<div class="w-full"><!>  <!></div>');function ft(h,e){const t=Q(e,"isOpen",3,!1),i=Q(e,"childNodes",3,null);var a=Mi(),n=b(a);ae(n,()=>e.content??se);var s=A(n,2);{var m=d=>{var u=Ti(),g=A(b(u),2);ue(g,19,()=>i()??[],_=>_.id,(_,o,y)=>{var c=Ni(),f=b(c);ae(f,()=>e.childNode??se,()=>r(o)),w(c),X(()=>De(c,`animation-delay: ${100+r(y)*50}ms;`)),l(_,c)}),w(u),l(d,u)};z(s,d=>{t()&&i()&&d(m)})}w(a),l(h,a)}const gt="mb-1 cursor-pointer rounded-md border border-border/30 p-2 text-left",yt="transform-gpu transition-all duration-150 ease-out hover:border-border/50 hover:bg-card/70 hover:shadow-sm",Di="transition-colors hover:bg-card/70",Ye="text-sm font-normal",Je="bg-card/50",mt="bg-accent text-accent-foreground";function Fi(h){const{enhancedHover:e=!1,includeFont:t=!1,pressed:i=!1}=h;let a=gt;return e?a+=" "+yt:a+=" "+Di,t&&(a+=" "+Ye),i?a+=" "+mt:a+=" "+Je,a}const Pi="!h-auto !min-h-9 !whitespace-normal data-[state=on]:!bg-accent data-[state=on]:!text-accent-foreground data-[state=on]:hover:!bg-accent data-[state=on]:hover:!text-accent-foreground";var zi=V('<div class="flex w-full !items-center !justify-between gap-2"><div class="pointer-events-none !flex min-w-0 flex-1 !items-center gap-1"><span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div>'),Ei=V('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><!> <span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function lt(h,e){const t=`calc(100% - ${e.depth*1}rem)`,i=`${gt} ${yt}`,a=`${i} ${Pi} ${Je} ${Ye}`,n=`${i} ${Ye}`;var s=E(),m=C(s);{var d=g=>{Wt(g,{get pressed(){return e.pressed},get class(){return a},variant:"outline",get style(){return`width: ${t};`},get onPressedChange(){return e.onclick},children:(_,o)=>{var y=zi(),c=b(y),f=b(c),M=b(f);be(M,()=>e.icon),w(f);var L=A(f,2),H=b(L,!0);w(L),w(c);var v=A(c,2);ae(v,()=>e.children??se),w(y),X(()=>re(H,e.name)),l(_,y)},$$slots:{default:!0}})},u=g=>{var _=Ei();_.__click=function(...S){e.onclick?.apply(this,S)};var o=b(_),y=b(o),c=b(y);ht(c,{get isOpen(){return e.isOpen}});var f=A(c,2),M=b(f);be(M,()=>e.icon),w(f);var L=A(f,2),H=b(L,!0);w(L),w(y);var v=A(y,2);ae(v,()=>e.children??se),w(o),w(_),X(()=>{ke(_,1,`${n} ${e.pressed?mt:Je}`),De(_,`width: ${t};`),re(H,e.name)}),l(g,_)};z(m,g=>{e.isTogglable?g(d):g(u,!1)})}l(h,s)}Ae(["click"]);const wt=(h,e,t,i)=>e?Oi(h,t):t?i?'<path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>':'<path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>':'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14,2 14,8 20,8"/>',Oi=(h,e)=>{switch(h.type){case"group":return at;case"feature":return nt;case"tile":return qt;default:return e?at:nt}};function _t(h,e){Y(e,!0);const t=f=>{var M=E(),L=C(M);{var H=v=>{var S=E(),T=C(S);{var k=F=>{lt(F,{isTogglable:!1,get pressed(){return r(u)},get icon(){return r(g)},get name(){return e.node.name},get depth(){return a()},onclick:c,get isOpen(){return r(d)}})},j=F=>{lt(F,{isTogglable:!0,get pressed(){return r(u)},get icon(){return r(g)},get name(){return e.node.name},get depth(){return a()},onclick:y,get isOpen(){return r(d)}})};z(T,F=>{m?F(k):F(j,!1)})}l(v,S)};z(L,v=>{e.treeviewConfigStore.getItemConfig(e.node.id)?.isHidden||v(H)})}l(f,M)},i=(f,M=se)=>{var L=E(),H=C(L);{var v=S=>{{let T=$(()=>a()+1);_t(S,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return M()},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get getNodeVisibility(){return e.getNodeVisibility},get depth(){return r(T)},get useLayerTypeIcon(){return n()}})}};z(H,S=>{m&&r(d)&&!e.treeviewConfigStore.getItemConfig(M().id)?.isHidden&&S(v)})}l(f,L)},a=Q(e,"depth",3,0),n=Q(e,"useLayerTypeIcon",3,!1),s=!!e.node.layer&&"visible"in e.node.layer,m=!!(e.node.children&&e.node.children.length);let d=N(!1),u=N(!1),g=N("");function _(){return!e.node.children||!e.getNodeVisibility?!1:e.node.children.some(f=>{const M=e.getNodeVisibility(f.id);return M!==void 0?M:f.layer.visible})}ee(()=>{if(e.node){if(m)p(u,_(),!0);else{const f=e.getNodeVisibility?e.getNodeVisibility(e.node.id):void 0;p(u,f!==void 0?f:e.node.layer.visible,!0)}p(g,wt(e.node.layer,n(),m,r(d)),!0)}});function o(){!s||!e.onNodeVisibilityChange||m||(p(u,!r(u)),e.onNodeVisibilityChange(e.node,r(u)))}function y(){m||o(),e.onNodeClick?.(e.node)}function c(){p(d,!r(d)),e.onNodeClick?.(e.node)}{let f=$(()=>m?e.node.children:null);ft(h,{get isOpen(){return r(d)},get content(){return t},get childNodes(){return r(f)},get childNode(){return i}})}J()}class bt{#e=N(!1);get initialized(){return r(this.#e)}set initialized(e){p(this.#e,e,!0)}#t=null;#a=N(K([]));#i=$(()=>{const e=new de;return this.#w(r(this.#a),e),e});#r=N(K(new de));#o=N(K(new de));initialize(e,t){if(this.initialized)throw new Error("TreeviewStore is already initialized.");if(this.initialized=!0,!t)throw new Error("TreeviewStore requires a valid TreeviewConfigStore to initialize.");if(this.#t=t,!e)throw new Error("TreeviewStore requires a valid array of layers to initialize.");p(this.#a,this.#u(e),!0)}getNodeById(e){return this.#l(),r(this.#i).get(e)}getNodes(){return this.#l(),r(this.#a)}getVisibleNodes(){this.#l();const e=[];for(const[t,i]of r(this.#r)){if(!i)continue;const a=r(this.#i).get(t);a&&e.push(a)}return e}getNonHiddenNodes(){return this.#l(),this.#d(r(this.#a))}#d(e){this.#l();const t=[];for(const i of e){const a=this.#n(i.id);if(!(a&&a.isHidden)&&(t.push(i),i.children?.length)){const n=this.#d(i.children);t.push(...n)}}return t}getVisibilityState(e){return this.#l(),r(this.#r).get(e)??!1}setVisibilityState(e,t){this.#l();const i=r(this.#i).get(e);if(!i)throw new Error(`Tree node not found for ID: ${e}`);if(r(this.#r).set(e,t),i.layer.visible=t,this.#s(i,t),i.visibilityDependencyIds?.length&&this.#c(i,t),!i.visibilityGroupId)return;const a=i.visibilityGroupId;console.log(`Node ${e} is part of visibility group ${a}`);let n=r(this.#o).get(a);n||(n=[],r(this.#o).set(a,n));const s=this.#f(a);if(!s)throw new Error(`Visibility group config not found for group ID: ${a}`);if(!t){const d=n.indexOf(e);n.splice(d,1);return}const m=d=>{r(this.#r).set(d,!1);const u=r(this.#i).get(d);u&&(u.layer.visible=!1,this.#s(u,!1),u.visibilityDependencyIds?.length&&this.#c(u,!1));const g=n.indexOf(d);g>=0&&n.splice(g,1)};for(;n.length>=s.maxVisibleLayers;){const d=n[0];m(d)}n.push(e),this.#s(i,t),i.visibilityDependencyIds?.length&&this.#c(i,t)}#s(e,t){e.parent&&(r(this.#r).set(e.parent.id,t),e.parent.layer.visible=t,this.#s(e.parent,t))}#c(e,t){if(e.visibilityDependencyIds?.length)for(const i of e.visibilityDependencyIds){const a=r(this.#i).get(i);a&&(r(this.#r).set(i,t),a.layer.visible=t,this.#s(a,t))}}#f(e){if(e&&this.#t)return this.#t.getVisibilityGroupConfig(e)}#u(e){const t=e.map(i=>{const a=this.#n(i.id);return this.#v(i,void 0,a)});return this.#h([...t])}#n(e){if(e&&this.#t)return this.#t.getItemConfig(e)}#h(e){e.reverse();for(const t of e)t.children?.length&&this.#h(t.children);return e}#v(e,t,i){const a={id:e.id,name:e.title,layer:e,visibilityDependencyIds:i?.visibilityDependencyIds,visibilityGroupId:i?.visibilityGroupId,children:[],parent:t};if(e.visible=i?.isVisibleOnInit??!1,r(this.#r).set(e.id,e.visible),this.#_(e)){const n=e;return a.children=n.layers.toArray().map(s=>{const m=this.#g(s,i);return this.#v(s,a,m)}),a}if(this.#y(e)){const n=e;if(n.sublayers&&n.sublayers.length>0){const s=n.sublayers;a.children=s.toArray().map(this.#m)}}return a}#g(e,t){if(!this.#t||!t)return;const i=this.#t.getItemConfig(e.id);return{id:e.id,type:Ie.None,isDownloadable:i?.isDownloadable,isVisibleOnInit:i?.isVisibleOnInit,isHidden:i?.isHidden,visibilityDependencyIds:i?.visibilityDependencyIds??t.visibilityDependencyIds,visibilityGroupId:i?.visibilityGroupId??t.visibilityGroupId}}#y(e){return e.type==="map-image"||e.type==="wms"}#m(e){const t={id:e.uid,name:e.title,layer:e,children:[]};return e.sublayers?.length&&(t.children=e.sublayers.toArray().map(this.#m)),t}#w(e,t){for(const i of e)t.set(i.id,i),i.children?.length&&this.#w(i.children,t)}#_(e){return e.type==="group"}#l(){if(!this.initialized)throw new Error("TreeviewStore is not initialized. Call initialize() first.")}}function Gi(h,e){Y(e,!0);const t=Q(e,"webMap",3,null);ee(()=>{!t()||e.treeviewStore.initialized||e.treeviewStore.initialize(t().layers.toArray(),e.treeviewConfigStore)});var i=E(),a=C(i);{var n=s=>{var m=E(),d=C(m);q(d,()=>vt,(u,g)=>{g(u,{children:(_,o)=>{var y=E(),c=C(y);ue(c,17,()=>e.treeviewStore.getNodes(),f=>f.id,(f,M)=>{_t(f,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return r(M)},onNodeClick:()=>{},onNodeVisibilityChange:(L,H)=>e.treeviewStore.setVisibilityState(L.id,H),getNodeVisibility:L=>e.treeviewStore.getVisibilityState(L),depth:0,useLayerTypeIcon:!0})}),l(_,y)},$$slots:{default:!0}})}),l(s,m)};z(a,s=>{e.treeviewStore.initialized&&s(n)})}l(h,i),J()}function Ui(h,e){Y(e,!0),ee(()=>{if(!G.lastAddedArea)return;(async()=>{if(G.lastAddedArea===null)return;const i=await G.getAreaNamesById([G.lastAddedArea.id]);!i||i.length===0||!i[0]||le.success(`Area added: ${i?.[0]}`)})()}),ee(()=>{if(!G.lastRemovedArea)return;(async()=>{if(G.lastRemovedArea===null)return;const i=await G.getAreaNamesById([G.lastRemovedArea.id]);!i||i.length===0||!i[0]||le.success(`Area removed: ${i?.[0]}`)})()}),J()}function Ri(h,e){Y(e,!0);let t=Q(e,"ref",15,null),i=ut(e,["$$slots","$$events","$$legacy","ref","class"]);var a=E(),n=C(a);{let s=$(()=>jt("flex-1 outline-none",e.class));q(n,()=>Ci,(m,d)=>{d(m,Et({"data-slot":"tabs-content",get class(){return r(s)}},()=>i,{get ref(){return t()},set ref(u){t(u)}}))})}l(h,a),J()}var ji=V("<!> <!>",1),Bi=V("<!> <!>",1);function Wi(h,e){Y(e,!0);const t=Q(e,"triggers",19,()=>[]);var i=E(),a=C(i);q(a,()=>Qt,(n,s)=>{s(n,{get value(){return e.value},get onValueChange(){return e.onValueChange},class:"w-full",children:(m,d)=>{var u=Bi(),g=C(u);q(g,()=>Zt,(o,y)=>{y(o,{class:"tab-list",children:(c,f)=>{var M=E(),L=C(M);ue(L,17,t,He,(H,v,S,T)=>{let k=()=>r(v).value,j=()=>r(v).label;var F=ji(),U=C(F);q(U,()=>Xt,(I,x)=>{x(I,{get value(){return k()},class:"tab-trigger",children:(D,O)=>{ce();var P=me();X(()=>re(P,j())),l(D,P)},$$slots:{default:!0}})});var R=A(U,2);{var Z=I=>{ui(I,{class:"separator"})};z(R,I=>{k()!==t()[t().length-1]?.value&&I(Z)})}l(H,F)}),l(c,M)},$$slots:{default:!0}})});var _=A(g,2);ae(_,()=>e.children??se),l(m,u)},$$slots:{default:!0}})}),l(h,i),J()}var qi=V('<div class="min-w-0 space-y-2 overflow-hidden p-4"><!></div>'),Zi=V("<!> <!>",1);function Me(h,e){var t=E(),i=C(t);q(i,()=>Ri,(a,n)=>{n(a,{get value(){return e.value},class:"w-full",children:(s,m)=>{var d=E(),u=C(d);q(u,()=>Ke,(g,_)=>{_(g,{class:"w-full overflow-hidden",children:(o,y)=>{var c=Zi(),f=C(c);q(f,()=>$e,(H,v)=>{v(H,{class:"card-content overflow-hidden p-0",children:(S,T)=>{hi(S,{class:"h-[400px] w-full",children:(k,j)=>{var F=qi(),U=b(F);ae(U,()=>e.children??se),w(F),l(k,F)},$$slots:{default:!0}})},$$slots:{default:!0}})});var M=A(f,2);{var L=H=>{var v=E(),S=C(v);q(S,()=>Si,(T,k)=>{k(T,{class:"flex items-center justify-between",children:(j,F)=>{var U=E(),R=C(U);ae(R,()=>e.footer),l(j,U)},$$slots:{default:!0}})}),l(H,v)};z(M,H=>{e.footer&&H(L)})}l(o,c)},$$slots:{default:!0}})}),l(s,d)},$$slots:{default:!0}})}),l(h,t)}class Qi{#e=N(!1);get isLoaded(){return r(this.#e)}set isLoaded(e){p(this.#e,e,!0)}#t=N(null);get data(){return r(this.#t)}set data(e){p(this.#t,e,!0)}#a=$(()=>{const e=new de;function t(i){e.set(i.id,i),i.type==="group"&&i.layers.forEach(n=>{t(n)})}return this.data&&this.data.layers.forEach(i=>{t(i)}),e});get dataLookup(){return r(this.#a)}set dataLookup(e){p(this.#a,e)}#i=N(!1);get loading(){return r(this.#i)}set loading(e){p(this.#i,e,!0)}#r=N(null);get error(){return r(this.#r)}set error(e){p(this.#r,e,!0)}async initializeAsync(e){if(!this.data){this.loading=!0,this.error=null;try{const{portalUrl:t,itemId:i,proxy:a}=e;await this.configurePortalAsync(t,a),await this.loadwebmapAsync(i)}catch(t){console.error("Error initializing webmap:",t),this.error=t.message}finally{this.loading=!1}}}async configurePortalAsync(e,t){if(!e)return;const i=await Ji();if(i.portalUrl=e,console.log(i),!t)return;const{addProxyRule:a}=await Ki();console.log("Adding proxy rule for portal traffic"),a({urlPrefix:t?.urlPrefix,proxyUrl:t?.proxyUrl})}async loadwebmapAsync(e){if(this.data)return;const[t,i]=await Promise.all([Xi(),Yi()]),a=new i({id:e}),n=new t({portalItem:a});this.data=n,await this.data.when(),this.data.loaded&&(this.isLoaded=!0)}clear(){this.data=null,this.loading=!1,this.error=null}clearError(){this.error=null}getWebmap(){return this.data}}let qe=null,Ze=null,Qe=null,Xe=null;async function Xi(){return qe||(qe=ge(()=>import("../chunks/BNJmkIEX.js").then(h=>h.W),__vite__mapDeps([94,1,2,3,5,6,7,0,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,41,42,43,44,45,95,96,97,98,67,99,100,80,81,71,55,56,57,58,59,60,61,62,63,64,65,101,102,103,70,66,104,105,106,107,69,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,46,47,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178]),import.meta.url).then(h=>h.default)),qe}async function Yi(){return Ze||(Ze=ge(()=>import("../chunks/CL7vXgR2.js"),__vite__mapDeps([16,5,1,2,3,6,7,13,10]),import.meta.url).then(h=>h.default)),Ze}async function Ji(){return Qe||(Qe=ge(()=>import("../chunks/w-2V2ENZ.js").then(h=>h.Z),[],import.meta.url).then(h=>h.default)),Qe}async function Ki(){return Xe||(Xe=ge(()=>import("../chunks/BBGELVfD.js").then(h=>h.O),__vite__mapDeps([7,2,3]),import.meta.url)),Xe}class $i{#e=N(K(new de));get DataSelections(){return r(this.#e)}set DataSelections(e){p(this.#e,e,!0)}addSelection(e){this.DataSelections.set(e.layerId,e),le.success(`'${e.name}' Added`)}removeSelection(e){const t=this.DataSelections.get(e);this.DataSelections.delete(e),le.success(`'${t?.name}' Removed`)}}const ie=new $i;function er(h,e){h.stopPropagation(),e.onFilterClicked?.(e.layerId)}var tr=V("<button><!></button>");function pt(h,e){Y(e,!0);let t=N(K(e.hasFiltersApplied?.(e.layerId)??!1));ee(()=>{p(t,e.hasFiltersApplied?.(e.layerId)??!1,!0)});const i=$(()=>r(t)?Yt:Jt);var a=tr();let n;a.__click=[er,e];var s=b(a);be(s,()=>r(i)),w(a),X(m=>{n=ke(a,1,"filter-btn svelte-effqed",null,n,m),ye(a,"aria-pressed",r(t))},[()=>({active:r(t)})]),l(h,a),J()}Ae(["click"]);class ir{#e=N(null);get ActiveLayer(){return r(this.#e)}set ActiveLayer(e){p(this.#e,e,!0)}}var rr=V('<li class="area-item svelte-1eawb4y"><span class="area-name svelte-1eawb4y"> </span> <!></li>'),ar=V('<ul class="selected-list svelte-1eawb4y"></ul> <p class="count svelte-1eawb4y"> </p>',1),nr=V('<p class="no-selection svelte-1eawb4y">No areas selected</p>'),or=V('<li class="data-item svelte-1eawb4y"><span class="data-name svelte-1eawb4y"> </span> <div class="data-actions svelte-1eawb4y"><!> <!></div></li>'),sr=V('<ul class="selected-list svelte-1eawb4y"></ul> <p class="count svelte-1eawb4y"> </p>',1),lr=V('<p class="no-selection svelte-1eawb4y">No data selected</p>'),dr=V('<h2 class="svelte-1eawb4y">Export Options</h2> <div class="section svelte-1eawb4y"><h3 class="svelte-1eawb4y"> </h3> <h4 class="svelte-1eawb4y">Selected Areas</h4> <!></div> <div class="section svelte-1eawb4y"><h4 class="svelte-1eawb4y">Selected Data</h4> <!></div>',1);function cr(h,e){Y(e,!0);const t=Q(e,"fieldFilterMenuStore",7);let i=N(K([]));ee(()=>{if(!G.layerHighlightState.areaInfos.length){p(i,[],!0);return}(async()=>{const S=await G.getAreaNamesById(G.layerHighlightState.areaInfos.map(k=>k.id)),T=[];for(let k=0;k<S.length;k++)T.push({name:S[k]||"Unknown Area",HighlightAreaInfo:G.layerHighlightState.areaInfos[k]});p(i,T,!0)})()});function a(v){const S=r(i).findIndex(T=>T.name===v);S!==-1&&G.removeSelectedArea(r(i)[S]?.HighlightAreaInfo.id)}function n(v){console.log("[export-menu] Removing data selection for layerId:",v),ie.DataSelections.delete(v),console.log("[export-menu] Current SelectedData:",vi(ie.DataSelections))}function s(v){t().ActiveLayer?.id===v?t().ActiveLayer=null:t().ActiveLayer=e.webMapStore.dataLookup.get(v)}function m(v){const S=ie.DataSelections.get(v);return!(!S||!S.fields||S.fields.size===0||S.fields.size===e.webMapStore.dataLookup.get(v).fields?.length)}var d=dr(),u=A(C(d),2),g=b(u),_=b(g,!0);w(g);var o=A(g,4);{var y=v=>{var S=ar(),T=C(S);ue(T,21,()=>r(i),He,(F,U)=>{var R=rr(),Z=b(R),I=b(Z,!0);w(Z);var x=A(Z,2);fe(x,{variant:"ghost",size:"sm",class:"area-remove-btn",onclick:()=>a(r(U).name),children:(D,O)=>{ce();var P=me("×");l(D,P)},$$slots:{default:!0}}),w(R),X(()=>re(I,r(U).name)),l(F,R)}),w(T);var k=A(T,2),j=b(k);w(k),X(()=>re(j,`${r(i).length??""} area(s) selected`)),l(v,S)},c=v=>{var S=nr();l(v,S)};z(o,v=>{r(i).length>0?v(y):v(c,!1)})}w(u);var f=A(u,2),M=A(b(f),2);{var L=v=>{var S=sr(),T=C(S);ue(T,21,()=>[...ie.DataSelections.values()],He,(F,U)=>{var R=or(),Z=b(R),I=b(Z,!0);w(Z);var x=A(Z,2),D=b(x);{var O=W=>{pt(W,{get layerId(){return r(U).layerId},onFilterClicked:s,hasFiltersApplied:m})};z(D,W=>{r(U).fields&&W(O)})}var P=A(D,2);fe(P,{variant:"ghost",size:"sm",class:"data-remove-btn",onclick:()=>n(r(U).layerId),children:(W,B)=>{ce();var ne=me("×");l(W,ne)},$$slots:{default:!0}}),w(x),w(R),X(()=>re(I,r(U).name)),l(F,R)}),w(T);var k=A(T,2),j=b(k);w(k),X(()=>re(j,`${ie.DataSelections.size??""} data layer(s) selected`)),l(v,S)},H=v=>{var S=lr();l(v,S)};z(M,v=>{ie.DataSelections.size>0?v(L):v(H,!1)})}w(f),X(v=>re(_,v),[()=>e.areaSelectionTreeviewStore.initialized?e.areaSelectionTreeviewStore.getVisibleNodes()[0]?.name:"Loading..."]),l(h,d),J()}class ur{#e=N(K([]));get downloads(){return r(this.#e)}set downloads(e){p(this.#e,e,!0)}}const _e=new ur;var hr=V('<p class="text-sm text-muted-foreground">Click "Export" to begin the download.</p> <!>',1);function vr(h,e){Y(e,!0);const t=()=>Gt(Kt,"$page",i),[i,a]=Ot();function n(){if(G.layerHighlightState.areaInfos.length<=0){le.error("Please select at least one area to export.");return}if(ie.DataSelections.size<=0){le.error("Please select at least one data layer to export.");return}console.log("Starting export..."),le.info("Export started successfully.",{duration:4e3});const d=crypto.randomUUID();_e.downloads.push({id:d,url:`${t().url}/${d}`,status:"pending"}),e.onExportSuccess?.()}var s=hr(),m=A(C(s),2);fe(m,{onclick:n,children:(d,u)=>{ce();var g=me("Export");l(d,g)},$$slots:{default:!0}}),l(h,s),J(),a()}var fr=V('<p class="text-sm font-medium"> </p>'),gr=V('<div class="pointer-events-none fixed z-50 transition-opacity duration-200"><!></div>');function yr(h,e){Y(e,!0);let t=N(null),i=N(K({x:0,y:0})),a=0;const n=u=>{p(i,{x:u.clientX,y:u.clientY},!0)};ee(()=>(document.addEventListener("mousemove",n),()=>{document.removeEventListener("mousemove",n)})),ee(()=>{const u=G.currentHoveredArea?.id,g=++a;if(!u){p(t,null);return}(async()=>{const _=await G.getAreaNamesById([u]);g===a&&G.currentHoveredArea?.id===u&&p(t,_[0]??null,!0)})()});var s=E(),m=C(s);{var d=u=>{var g=gr(),_=b(g);q(_,()=>Ke,(o,y)=>{y(o,{class:"max-w-xs border !py-2 shadow-lg",children:(c,f)=>{var M=E(),L=C(M);q(L,()=>$e,(H,v)=>{v(H,{class:"!px-3 !py-0",children:(S,T)=>{var k=fr(),j=b(k,!0);w(k),X(()=>re(j,r(t))),l(S,k)},$$slots:{default:!0}})}),l(c,M)},$$slots:{default:!0}})}),w(g),X(()=>De(g,`left: ${r(i).x+10}px; top: ${r(i).y-10}px;`)),l(u,g)};z(m,u=>{r(t)&&u(d)})}l(h,s),J()}function mr(h,e){h.target===h.currentTarget&&e()}var wr=(h,e)=>h.key==="Escape"&&e(),_r=(h,e,t)=>e(r(t).name),br=V('<div class="info-icon-container svelte-18b92yu"><!></div>'),pr=V('<div class="field-content-wrapper svelte-18b92yu"><!> <button class="field-content svelte-18b92yu" tabindex="0"><div class="field-name-container svelte-18b92yu"><span class="field-name svelte-18b92yu"> </span> <!></div></button></div>'),Sr=V('<div class="master-checkbox-container svelte-18b92yu"><!> <span class="master-checkbox-label svelte-18b92yu">Select All Fields</span></div> <!> <!>',1),Ir=V("<!> <!>",1),Cr=V("<!> <!>",1),Hr=V('<button class="close-button svelte-18b92yu" aria-label="Close"><!></button> <!>',1),kr=V('<div class="card-container svelte-18b92yu" role="dialog" aria-modal="true" tabindex="-1"><!></div>');function Ar(h,e){Y(e,!0);const t=Q(e,"fieldFilterMenuStore",7);let i=N(null),a=N(K(new Ce)),n=$(()=>{if(!r(i)||!r(i).fields)return{checked:!1,indeterminate:!1};const c=r(i).fields.length,f=r(a)?.size||0;return f===0?{checked:!1,indeterminate:!1}:f===c?{checked:!0,indeterminate:!1}:{checked:!1,indeterminate:!0}});ee(()=>{console.log("Active Layer to Filter:",t().ActiveLayer);const c=t().ActiveLayer;if(p(i,c,!0),c){const f=ie.DataSelections.get(c.id);f?.fields?p(a,new Ce([...f.fields]),!0):p(a,new Ce,!0)}});function s(){m(),t().ActiveLayer=null}function m(){if(!r(i))return;let c=ie.DataSelections.get(r(i).id);if(c){if((c.fields===void 0||c.fields===null)&&(c.fields=new Ce),r(a).size===0){ie.removeSelection(r(i).id);return}c.fields.clear(),r(a).forEach(f=>{c.fields?.add(f)})}}function d(c){r(i)&&(r(a).has(c)?r(a).delete(c):r(a).add(c))}function u(){if(!r(i)?.fields)return;(r(a)?.size||0)===0?r(i).fields.forEach(f=>{r(a).add(f.name)}):r(a).clear()}function g(){return r(i)?.fields?r(i).fields.filter(c=>!e.fieldsToHide?.has(c.alias?.toLowerCase()??"")):[]}var _=E(),o=C(_);{var y=c=>{var f=kr();f.__click=[mr,s],f.__keydown=[wr,s];var M=b(f);q(M,()=>Ke,(L,H)=>{H(L,{class:"command-card",children:(v,S)=>{var T=Hr(),k=C(T);k.__click=s;var j=b(k);fi(j,{size:20}),w(k);var F=A(k,2);q(F,()=>$e,(U,R)=>{R(U,{class:"card-content",children:(Z,I)=>{var x=E(),D=C(x);q(D,()=>gi,(O,P)=>{P(O,{children:(W,B)=>{var ne=Cr(),te=C(ne);q(te,()=>yi,(he,ve)=>{ve(he,{placeholder:"Search for fields..."})});var pe=A(te,2);q(pe,()=>mi,(he,ve)=>{ve(he,{children:(we,Fe)=>{var Le=Ir(),xe=C(Le);q(xe,()=>wi,(Pe,ze)=>{ze(Pe,{children:(Ee,Ct)=>{ce();var Ve=me("No results found.");l(Ee,Ve)},$$slots:{default:!0}})});var It=A(xe,2);q(It,()=>_i,(Pe,ze)=>{ze(Pe,{heading:"Fields",children:(Ee,Ct)=>{var Ve=Sr(),Oe=C(Ve),Ht=b(Oe);ot(Ht,{get checked(){return r(n).checked},get indeterminate(){return r(n).indeterminate},onCheckedChange:u}),ce(2),w(Oe);var et=A(Oe,2);q(et,()=>$t,(Ge,oe)=>{oe(Ge,{})});var kt=A(et,2);ue(kt,17,g,He,(Ge,oe)=>{var tt=E(),At=C(tt);q(At,()=>bi,(Lt,xt)=>{xt(Lt,{class:"field-item",onselect:()=>d(r(oe).name),children:(Vt,Zr)=>{var Ue=pr(),it=b(Ue);{let Se=$(()=>r(a)?.has(r(oe).name)??!1);ot(it,{class:"field-checkbox",get checked(){return r(Se)},onCheckedChange:()=>d(r(oe).name)})}var Re=A(it,2);Re.__click=[_r,d,oe];var rt=b(Re),je=b(rt),Nt=b(je,!0);w(je);var Tt=A(je,2);{var Mt=Se=>{var Ne=br(),Dt=b(Ne);be(Dt,()=>ei),w(Ne),X(()=>ye(Ne,"title",r(oe).description)),l(Se,Ne)};z(Tt,Se=>{r(oe).description&&Se(Mt)})}w(rt),w(Re),w(Ue),X(()=>re(Nt,r(oe).alias||r(oe).name)),l(Vt,Ue)},$$slots:{default:!0}})}),l(Ge,tt)}),l(Ee,Ve)},$$slots:{default:!0}})}),l(we,Le)},$$slots:{default:!0}})}),l(W,ne)},$$slots:{default:!0}})}),l(Z,x)},$$slots:{default:!0}})}),l(v,T)},$$slots:{default:!0}})}),w(f),l(c,f)};z(o,c=>{r(i)&&c(y)})}l(h,_),J()}Ae(["click","keydown"]);var Lr=V('<li class="download-item svelte-ynwhdm"><div class="download-info svelte-ynwhdm"><span class="download-url svelte-ynwhdm"> </span></div> <div class="download-actions svelte-ynwhdm"><div><!></div> <!> <!> <!></div></li>'),xr=V('<ul class="selected-list svelte-ynwhdm"></ul> <p class="count svelte-ynwhdm"> </p>',1),Vr=V('<p class="no-selection svelte-ynwhdm">No downloads in queue</p>'),Nr=V('<div class="section svelte-ynwhdm"><h4 class="svelte-ynwhdm">Download Queue</h4> <!></div>');function Tr(h,e){Y(e,!0);let t=N(K(new Set));function i(o){const y=_e.downloads.findIndex(c=>c.url===o);y!==-1&&_e.downloads.splice(y,1)}async function a(o){try{await navigator.clipboard.writeText(o),p(t,new Set(r(t)).add(o),!0),le.success("URL copied to clipboard"),setTimeout(()=>{const y=new Set(r(t));y.delete(o),p(t,y,!0)},2e3)}catch(y){console.error("Failed to copy URL:",y),le.error("Failed to copy URL to clipboard")}}function n(o){switch(o){case"completed":return"#059669";case"in-progress":return"#2563eb";case"failed":return"#dc2626";case"pending":default:return"#6b7280"}}function s(o){switch(o){case"completed":return"Completed";case"in-progress":return"In Progress";case"failed":return"Failed";case"pending":default:return"Pending"}}function m(o){switch(o){case"completed":return oi;case"in-progress":return ni;case"failed":return ai;case"pending":default:return ri}}var d=Nr(),u=A(b(d),2);{var g=o=>{var y=xr(),c=C(y);ue(c,21,()=>_e.downloads,He,(L,H)=>{var v=Lr(),S=b(v),T=b(S),k=b(T,!0);w(T),w(S);var j=A(S,2),F=b(j),U=b(F);{let D=$(()=>n(r(H).status));fe(U,{variant:"ghost",size:"sm",class:"download-status-btn",get style(){return`color: ${r(D)??""}`},disabled:!0,children:(O,P)=>{const W=$(()=>m(r(H).status));var B=E(),ne=C(B);{let te=$(()=>r(H).status==="in-progress"?"spinning":"");q(ne,()=>r(W),(pe,he)=>{he(pe,{size:14,get class(){return r(te)}})})}l(O,B)},$$slots:{default:!0}})}w(F);var R=A(F,2);fe(R,{variant:"ghost",size:"sm",class:"download-clipboard-btn",onclick:()=>a(r(H).url),title:"Copy URL to clipboard",children:(D,O)=>{var P=E(),W=C(P);{var B=te=>{ti(te,{size:14})},ne=te=>{ii(te,{size:14})};z(W,te=>{r(t).has(r(H).url)?te(B):te(ne,!1)})}l(D,P)},$$slots:{default:!0}});var Z=A(R,2);{var I=D=>{fe(D,{variant:"ghost",size:"sm",class:"download-action-btn",onclick:()=>window.open(r(H).url,"_blank"),title:"Open download",children:(O,P)=>{ce();var W=me("📥");l(O,W)},$$slots:{default:!0}})};z(Z,D=>{r(H).status==="completed"&&D(I)})}var x=A(Z,2);fe(x,{variant:"ghost",size:"sm",class:"download-remove-btn",onclick:()=>i(r(H).url),title:"Remove from queue",children:(D,O)=>{ce();var P=me("×");l(D,P)},$$slots:{default:!0}}),w(j),w(v),X(D=>{ye(T,"title",r(H).url),re(k,r(H).id),ye(F,"title",D)},[()=>s(r(H).status)]),l(L,v)}),w(c);var f=A(c,2),M=b(f);w(f),X(()=>re(M,`${_e.downloads.length??""} download(s) in queue`)),l(o,y)},_=o=>{var y=Vr();l(o,y)};z(u,o=>{_e.downloads.length>0?o(g):o(_,!1)})}w(d),l(h,d),J()}var Mr=V('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><!> <span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function dt(h,e){Y(e,!0);const t=Q(e,"isGroup",3,!1),i=Q(e,"isOpen",3,!1),a=`calc(100% - ${e.depth*1}rem)`;var n=Mr();n.__click=function(...f){e.onclick?.apply(this,f)};var s=b(n),m=b(s),d=b(m);{var u=f=>{ht(f,{get isOpen(){return i()}})};z(d,f=>{t()&&f(u)})}var g=A(d,2),_=b(g);be(_,()=>e.icon),w(g);var o=A(g,2),y=b(o,!0);w(o),w(m);var c=A(m,2);ae(c,()=>e.children??se),w(s),w(n),X(f=>{ke(n,1,f),De(n,`width: ${a};`),re(y,e.name)},[()=>ci(Fi({enhancedHover:!0,includeFont:!0}))]),l(h,n),J()}Ae(["click"]);const Dr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-to-line-icon lucide-arrow-down-to-line"><path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/></svg>';function Fr(h,e,t){h.stopPropagation(),p(e,!r(e)),t.onDownloadStateChanged?.(t.node,r(e))}var Pr=V("<button><!></button>");function zr(h,e){Y(e,!0);let t=N(K(e.getDownloadState?.(e.node)??!1));ee(()=>{if(e.getDownloadState){const s=e.getDownloadState(e.node);p(t,s??!1,!0)}});var i=Pr();let a;i.__click=[Fr,t,e];var n=b(i);be(n,()=>Dr),w(i),X(s=>{a=ke(i,1,"download-btn svelte-1gynj9v",null,a,s),ye(i,"title",`Download ${e.node.name??""}`),ye(i,"aria-label",`Download ${e.node.name??""}`),ye(i,"aria-pressed",r(t))},[()=>({active:r(t)})]),l(h,i),J()}Ae(["click"]);var Er=V('<div class="flex items-center gap-2"><!></div>'),Or=V("<div><!></div>"),Gr=V("<!> <!>",1),Ur=V('<div class="flex items-center gap-2"><!> <!></div>');function St(h,e){Y(e,!0);const t=L=>{var H=E(),v=C(H);{var S=T=>{var k=E(),j=C(k);{var F=R=>{dt(R,{get icon(){return r(_)},get name(){return e.node.name},get depth(){return n()},onclick:M,isGroup:!0,get isOpen(){return r(u)},children:I=>{var x=Er(),D=b(x);{var O=P=>{st(P,{get checked(){return r(g)},onCheckedChange:c})};z(D,P=>{d&&P(O)})}w(x),l(I,x)},$$slots:{default:!0}})},U=R=>{dt(R,{get icon(){return r(_)},get name(){return e.node.name},get depth(){return n()},onclick:f,isGroup:!1,children:I=>{var x=Ur(),D=b(x);{var O=B=>{var ne=Gr(),te=C(ne);{var pe=ve=>{var we=Or();let Fe;var Le=b(we);pt(Le,{get layerId(){return e.node.id},get onFilterClicked(){return e.onFilterClicked},get hasFiltersApplied(){return e.hasFiltersApplied}}),w(we),X(xe=>Fe=ke(we,1,"filter-transition-wrapper svelte-42m3ms",null,Fe,xe),[()=>({"fade-in":!r(y),"fade-out":r(y)})]),l(ve,we)};z(te,ve=>{r(o)&&ve(pe)})}var he=A(te,2);zr(he,{get node(){return e.node},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState}}),l(B,ne)};z(D,B=>{e.isDownloadable&&B(O)})}var P=A(D,2);{var W=B=>{st(B,{get checked(){return r(g)},onCheckedChange:c})};z(P,B=>{d&&B(W)})}w(x),l(I,x)},$$slots:{default:!0}})};z(j,R=>{m?R(F):R(U,!1)})}l(T,k)};z(v,T=>{a()?.getItemConfig(e.node.id)?.isHidden||T(S)})}l(L,H)},i=(L,H=se)=>{var v=E(),S=C(v);{var T=k=>{{let j=$(()=>a()?.getItemConfig(H().id)?.isDownloadable??!0),F=$(()=>n()+1);St(k,{get node(){return H()},get isDownloadable(){return r(j)},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState},get onFilterClicked(){return e.onFilterClicked},get hasFiltersApplied(){return e.hasFiltersApplied},get getNodeVisibility(){return e.getNodeVisibility},get depth(){return r(F)},get useLayerTypeIcon(){return s()}})}};z(S,k=>{m&&r(u)&&!a()?.getItemConfig(H().id)?.isHidden&&k(T)})}l(L,v)},a=Q(e,"treeviewConfigStore",3,null),n=Q(e,"depth",3,0),s=Q(e,"useLayerTypeIcon",3,!1),m=!!(e.node.children&&e.node.children.length),d=!!e.node.layer&&"visible"in e.node.layer&&!m;let u=N(!1),g=N(!1),_=N(""),o=N(!1),y=N(!1);ee(()=>{if(!e.node)return;const L=e.getNodeVisibility?e.getNodeVisibility(e.node.id):void 0;p(g,L!==void 0?L:e.node.layer.visible,!0),p(_,wt(e.node.layer,s(),m,r(u)),!0)}),ee(()=>{const L=(e.getDownloadState?.(e.node)&&e.node.layer.type==="feature")??!1;L&&!r(o)?(p(o,!0),p(y,!1)):!L&&r(o)&&(p(y,!0),setTimeout(()=>{p(o,!1),p(y,!1)},180))});function c(){!d||!e.onNodeVisibilityChange||(p(g,!r(g)),e.onNodeVisibilityChange(e.node,r(g)))}function f(){e.onNodeClick?.(e.node)}function M(){p(u,!r(u)),e.onNodeClick?.(e.node)}{let L=$(()=>m?e.node.children:null);ft(h,{get isOpen(){return r(u)},get content(){return t},get childNodes(){return r(L)},get childNode(){return i}})}J()}function Rr(h,e){Y(e,!0);const t=Q(e,"webMap",3,null),i=Q(e,"fieldFilterMenuStore",7),a=new bt;ee(()=>{if(!t()||a.initialized)return;(async()=>{a.initialize(t().layers.toArray(),e.treeviewConfigStore),console.log("TreeView initialized with layers:",a.getNodes())})()});function n(o,y){if(y){const c={layerId:o.id,name:o.layer.title||"",fields:new Ce(o.layer.fields?.map(f=>f.name)||[])};ie.addSelection(c)}else ie.removeSelection(o.id)}function s(o){return ie.DataSelections.has(o.id)}function m(o){if(i().ActiveLayer?.uid===o)i().ActiveLayer=null;else{const c=a.getNodeById(o)?.layer;i().ActiveLayer=c}}function d(o){const y=ie.DataSelections.get(o);if(!y?.fields)return!1;const c=a.getNodeById(o);if(!c)return!1;const f=c.layer.fields?.length||0,M=y.fields.size;return M>0&&M!==f}var u=E(),g=C(u);{var _=o=>{var y=E(),c=C(y);q(c,()=>vt,(f,M)=>{M(f,{children:(L,H)=>{var v=E(),S=C(v);ue(S,17,()=>a.getNodes(),T=>T.id,(T,k)=>{{let j=$(()=>e.treeviewConfigStore.getItemConfig(r(k).id)?.isDownloadable??!1);St(T,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return r(k)},get isDownloadable(){return r(j)},onNodeClick:()=>{},onNodeVisibilityChange:(F,U)=>a.setVisibilityState(F.id,U),getNodeVisibility:F=>a.getVisibilityState(F),onDownloadStateChanged:n,getDownloadState:s,onFilterClicked:m,hasFiltersApplied:d,depth:0,useLayerTypeIcon:!0})}}),l(L,v)},$$slots:{default:!0}})}),l(o,y)};z(g,o=>{a.initialized&&o(_)})}l(h,u),J()}class ct{#e=[];#t=new Map;#a=[];#i=new Map;#r=[];#o=new Map;#d=new Set;constructor(e){if(!e)throw new Error("TreeviewConfigStore requires a valid configuration object.");this.#e=e.items??[],this.#t=new Map(this.#e.map(t=>[t.id,t])),this.#a=e.visibilityGroups??[],this.#i=new Map(this.#a.map(t=>[t.id,t])),this.#r=e.inheritanceGroups??[],this.#o=new Map(this.#r.map(t=>[t.id,t])),e.fieldsToHide&&(this.#d=new Set(e.fieldsToHide.map(t=>t.trim().toLowerCase())))}getItemConfig(e){return this.#t.get(e)}getVisibilityGroupConfig(e){return this.#i.get(e)}getInheritanceGroupConfig(e){return this.#o.get(e)}resolveInheritance(e){if(!(e.length===0||!this.#e||this.#e.length===0))for(const t of e)this.#s(t)}#s(e,t){const i=this.#c(e,t);if(this.#y(e)&&i.showFields){const a=e;a.loaded||console.warn(`Layer not loaded: ${e.id}`);for(const n of a.fields??[])this.#f(this.#v(e.id,n.name),n.alias||n.name,i)}if(this.#g(e)){const a=e;for(const n of a.layers.toArray())this.#s(n,i)}}#c(e,t){const i=this.#u(e.id,t);return i.type===Ie.None&&(i.type=si(e)),i}#f(e,t,i){const a=this.#u(e,i);return a.type===Ie.None&&(a.type=Ie.Field),this.#d.has(t.trim().toLowerCase())&&(a.isHidden=!0),a}#u(e,t){let i=this.getItemConfig(e);const a=i!==void 0,n=i?.inheritanceGroupId?this.getInheritanceGroupConfig(i.inheritanceGroupId):this.getInheritanceGroupConfig(t?.inheritanceGroupId??"");return i={id:e,type:Ie.None,isDownloadable:this.#n(n,"isDownloadable",i,t,!0),isVisibleOnInit:this.#n(n,"isVisibleOnInit",i,t,!1),isHidden:this.#n(n,"isHidden",i,t,!1),showFields:this.#n(n,"showFields",i,t,!1),visibilityDependencyIds:this.#n(n,"visibilityDependencyIds",i,t,[]),visibilityGroupId:this.#n(n,"visibilityGroupId",i,t,void 0),inheritanceGroupId:this.#n(n,"inheritanceGroupId",i,t,void 0)},a===!1&&this.#h(i),i}#n(e,t,i,a,n){const s=i?.[t];return s!==void 0?s:e?.inheritedProperties.includes(t)&&a?a[t]??n:n}#h(e){if(this.#t.has(e.id))throw new Error(`Item with id ${e.id} already exists.`);this.#e.push(e),this.#t.set(e.id,e)}#v(e,t){return`${e}-${t}`}#g(e){return e.type==="group"}#y(e){return e.type==="feature"}}const jr=[{value:"define-areas",label:"Define Areas"},{value:"select-data",label:"Select Data"},{value:"export",label:"Export"},{value:"downloads",label:"Download"}];var Br=V("<!> <!> <!> <!>",1),Wr=V('<div class="flex w-120 min-w-0 flex-col gap-6"><!></div>'),qr=V('<!> <!> <!> <!> <div class="map-section svelte-1v5dyfr"><!></div>',1);function ua(h,e){Y(e,!0);const t=v=>{var S=Wr(),T=b(S);Wi(T,{get value(){return r(s)},get triggers(){return jr},onValueChange:g,children:(k,j)=>{var F=Br(),U=C(F);Me(U,{value:"define-areas",children:(x,D)=>{var O=E(),P=C(O);{var W=B=>{Gi(B,{get webMap(){return i.data},get treeviewStore(){return n},get treeviewConfigStore(){return r(u)}})};z(P,B=>{i.isLoaded&&B(W)})}l(x,O)}});var R=A(U,2);Me(R,{value:"select-data",children:(x,D)=>{var O=E(),P=C(O);{var W=B=>{Rr(B,{get webMap(){return i.data},get treeviewConfigStore(){return r(d)},get fieldFilterMenuStore(){return a}})};z(P,B=>{i.isLoaded&&B(W)})}l(x,O)}});var Z=A(R,2);Me(Z,{value:"export",footer:D=>{vr(D,{onExportSuccess:_})},children:(D,O)=>{cr(D,{get webMapStore(){return i},get areaSelectionTreeviewStore(){return n},get fieldFilterMenuStore(){return a}})}});var I=A(Z,2);Me(I,{value:"downloads",children:(x,D)=>{Tr(x,{})}}),l(k,F)},$$slots:{default:!0}}),w(S),l(v,S)},i=K(new Qi),a=K(new ir),n=K(new bt);let s=N("define-areas"),m=N(K(new Set)),d=N(void 0),u=N(void 0);Pt(async()=>{const v=await pi();p(m,new Set(v.serviceUprnConfig.fieldsToHide||[]),!0),G.setNameFields(v.serviceUprnConfig.selectionLayersNameFields||[]),p(d,new ct(v.serviceUprnConfig.dataSelectionTreeviewConfig),!0),p(u,new ct(v.serviceUprnConfig.areaSelectionTreeviewConfig),!0),await i.initializeAsync({portalUrl:v.serviceUprnConfig.portalUrl,itemId:v.serviceUprnConfig.portalItemId||"",proxy:v.serviceUprnConfig.proxy}),console.log("[page] WebMap loaded")});function g(v){p(s,v,!0)}function _(){p(s,"downloads")}var o=qr(),y=C(o);li(y,{});var c=A(y,2);yr(c,{});var f=A(c,2);Ar(f,{get fieldFilterMenuStore(){return a},get fieldsToHide(){return r(m)}});var M=A(f,2);Ui(M,{});var L=A(M,2),H=b(L);Vi(H,{get webMap(){return i.data},get areaSelectionTreeviewStore(){return n},panelPosition:"top-left",menuPosition:"top-right",get panel(){return t}}),w(L),l(h,o),J()}export{ua as component};
