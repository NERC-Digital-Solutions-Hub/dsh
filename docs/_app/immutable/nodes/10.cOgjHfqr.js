const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DphrNNSX.js","../chunks/DUlE1Kon.js","../chunks/BFGjv385.js","../chunks/DSdBzmdi.js","../chunks/DxH_hBwP.js","../chunks/PPVm8Dsz.js","../chunks/CQL0hffV.js","../chunks/CZCUGSrh.js","../chunks/BaDyA0M1.js","../chunks/DL8FWpFD.js","../chunks/BLSZFbqy.js","../chunks/Cc17QD5h.js","../chunks/uh6gjmpK.js","../chunks/Cd67kGb1.js","../chunks/CdXemNPl.js","../chunks/CXjBFwQ9.js","../chunks/o70dz_cY.js","../chunks/CM1PiDdF.js","../chunks/zBqsFMnn.js","../chunks/CkhiIt0L.js","../chunks/L2GR07yw.js","../chunks/D-I_tQMx.js","../chunks/Cp_8tW2x.js","../chunks/CYxm9iil.js","../chunks/BEA_VxVb.js","../chunks/Ci6C1k20.js","../chunks/bnayRBMH.js","../chunks/CUIIoQkz.js","../chunks/BXAeIeBi.js","../chunks/CD2g8Juu.js","../chunks/Oe6SV2kF.js","../chunks/DPxSQfEf.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/DsBvJ7A-.js","../chunks/D5Qy1aVr.js","../chunks/MhViydJc.js","../chunks/BCRaCWYj.js","../chunks/DCfKjjp7.js","../chunks/Djp3mnm5.js","../chunks/Chx5LzQ5.js","../chunks/Bb2fg_id.js","../chunks/DchRxFIP.js","../chunks/ZIqzJHAa.js","../chunks/B87vTgcy.js","../chunks/9TJBZQUn.js","../chunks/BjmdJBfY.js","../chunks/sd8OvKRi.js","../chunks/DmnoE05D.js","../chunks/B16TZZfh.js","../chunks/B7faZHWT.js","../chunks/iG1wnc6C.js","../chunks/CNDfUgA1.js","../chunks/BF3aQNOw.js","../chunks/DCcCllwm.js","../chunks/Q1qKPNYG.js","../chunks/DvWg7eaT.js","../chunks/AqFDIo71.js","../chunks/DC-QZh_5.js","../chunks/BeSfGlfk.js","../chunks/CiqIKsqy.js","../chunks/CVwTD0fV.js","../chunks/CXUS8JZp.js","../chunks/b_fk785i.js","../chunks/DPJXGPFY.js","../chunks/CaRPOetq.js","../chunks/BP4OB8lT.js","../chunks/q_b6UJoq.js","../chunks/CJlrH8jE.js","../chunks/B9gW65iH.js","../chunks/D5jpRriJ.js","../chunks/DBhV_qh4.js","../chunks/CSXZNpHb.js","../chunks/D57yZP3Q.js","../chunks/lWokueJ2.js","../chunks/DQecCNGY.js","../chunks/mAuPy2vb.js","../chunks/dARmBYlp.js","../chunks/BGQ_LaAd.js","../chunks/Cjfbh0Bh.js","../chunks/DzmYiIMT.js","../chunks/VQkRg7Q-.js","../chunks/BhPU3j9T.js","../chunks/BOU_hlcm.js","../chunks/CNVEWGRl.js","../chunks/tNsKsBHm.js","../chunks/B57vubiS.js","../chunks/LwNghGgk.js","../chunks/CPX-0D5v.js","../chunks/tE6mHfHE.js","../chunks/ezYR7HcO.js","../chunks/CAvwV7jA.js","../chunks/Dr6oaL29.js","../chunks/toeQ6bUV.js","../chunks/DSBUT0GZ.js","../chunks/Dcc6T4ia.js","../chunks/BobW4Z-9.js","../chunks/Cuf7dbI9.js","../chunks/BaROR_Cb.js","../chunks/hRXT0cbk.js","../chunks/B3H7AeAl.js","../chunks/BLP-snuk.js","../chunks/D0WBE2w5.js","../chunks/BKtwV4GZ.js","../chunks/iNvouxpq.js","../chunks/BiVs8Tjo.js","../chunks/0X5ruz8T.js","../chunks/Bif0vJpv.js","../chunks/eY7ax6ob.js","../chunks/GKolV7NZ.js","../chunks/DAUJrXtl.js","../chunks/CQ3Vk-j7.js","../chunks/BHFMIzj3.js","../chunks/C_yj0s9N.js","../chunks/SjkvCP0N.js","../chunks/ddR77hBF.js","../chunks/9wjTO81M.js","../chunks/kxY8maoG.js","../chunks/DeP0P-5x.js","../chunks/Dq2efiiW.js","../chunks/DhzudQro.js","../chunks/C7Z2Ig1t.js","../chunks/I_ue-w2G.js","../chunks/BK33hlRA.js","../chunks/rN5JuMfK.js","../chunks/CLYnf0gO.js","../chunks/DC4T6Ptu.js","../chunks/n__Nwz3z.js","../chunks/BLzg8iQo.js","../chunks/CDBeNHlA.js","../chunks/DjcuonZY.js","../chunks/x20ZNUyp.js","../chunks/dP9e_Lho.js","../chunks/XaXpG9zZ.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/DsOBwyS3.js","../chunks/B95mHHT8.js","../chunks/DPb6J-GU.js","../chunks/C8qJNYv1.js","../chunks/DeDrvwF9.js","../chunks/GDaKMnnD.js","../chunks/C7RYGzg8.js","../chunks/D9V7wSQz.js","../chunks/Qxf0lnHT.js","../chunks/DZ1iX8ze.js","../chunks/BNEYiyjh.js","../chunks/CUxkSqAk.js","../chunks/D1j5F4no.js","../chunks/yj2YNffg.js","../chunks/DvKU1K2H.js","../chunks/DEk7s8q5.js","../chunks/BcKkb5Xn.js","../chunks/DkEIX9Qu.js","../chunks/DIuFmtHG.js","../chunks/BuGjRqRb.js","../chunks/CaYZrGFV.js","../chunks/DJWKYYK3.js","../chunks/CgQPMLVo.js","../chunks/_-8nXWYx.js","../chunks/Cs9UiRAv.js","../chunks/BioNjP4A.js","../assets/jsxFactory.CQED0rIl.css","../chunks/BfTDt07v.js","../chunks/B_F2oaks.js","../chunks/CHFp6N2U.js","../chunks/Cgb6qxNH.js","../chunks/fHIp3-Ia.js","../chunks/Bj9FaGh4.js","../chunks/CZcoKViM.js","../chunks/CaVKkSa6.js","../chunks/CqhmP5Wf.js","../chunks/Dv0h64eS.js","../chunks/B1N-tmtC.js","../chunks/BVfbJNC8.js","../chunks/DX9O6NLU.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/Bxxl7NsE.js","../chunks/OMM7yKVB.js","../chunks/DQOO6RKE.js","../chunks/Ds6r1LYR.js","../chunks/Bi6C4OG6.js","../chunks/CXuogR47.js","../chunks/BTFiZ01f.js","../chunks/D-YQ4CHs.js","../chunks/OWXZYB2M.js","../chunks/BZwb5JM9.js","../chunks/BMOk5WQ1.js","../chunks/BQBvadb7.js","../chunks/UtnsrrcQ.js","../chunks/Caulfaw_.js","../chunks/CB4i8DO7.js","../chunks/zCv2hQmD.js","../chunks/DKzVzLpH.js","../chunks/BEQnBRaB.js","../chunks/BvOub3JO.js","../chunks/CKpGzqD0.js","../chunks/Ca-7ty7r.js","../chunks/DzxQJWW8.js","../chunks/DrdMH2QE.js","../chunks/4Z4nrO_d.js","../chunks/BAIH_WY6.js","../chunks/COg2mCVS.js","../chunks/CvtDJuar.js","../chunks/B2xel-Uw.js","../chunks/Cr8WeetO.js","../chunks/8WtPGj6h.js","../chunks/CG7ZQ6BV.js","../chunks/CJNC-2D3.js","../chunks/BDi4ZoQa.js","../chunks/BvER9tXK.js","../chunks/CLMfVxiI.js","../chunks/n_VqDs8R.js","../chunks/D5J0HRgs.js","../chunks/ptvnMHIJ.js","../chunks/BPTNpVpY.js","../chunks/C2y1nKdd.js","../chunks/CUzevAry.js","../chunks/C8zGwbjb.js","../chunks/CHFGEYP1.js","../chunks/CnfR2FxX.js","../chunks/BQFVO5wH.js","../chunks/DViSIZQO.js","../chunks/DUb7lpCa.js","../chunks/DajC7boy.js","../chunks/CT0GwVXd.js","../chunks/DQNsYokC.js","../assets/component-utils.R4SXog4D.css","../chunks/3iuy7Red.js","../chunks/C8GSh56T.js","../chunks/B8YAi78o.js","../chunks/CUTH-Hom.js","../chunks/DbV659dB.js","../chunks/RV-vX2R0.js","../chunks/ByYmbMp8.js","../chunks/HTOW8iPe.js","../chunks/DPjQN7tu.js","../chunks/hQCbxfQJ.js","../chunks/BK4aKXQl.js","../chunks/DuIgqnlY.js","../chunks/BsnTTfDm.js","../chunks/DaQyK3nQ.js","../chunks/BaR6RHU6.js"])))=>i.map(i=>d[i]);
import{_ as ye}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as Ze,a as lt}from"../chunks/DFUKILGv.js";import{f as g,p as le,c as x,n as it,r as P,a as ie,g as e,aG as v,ar as a,a8 as j,u as S,X as be,U as N,av as St,o as Se,aZ as Lt,a_ as kt,aM as Et}from"../chunks/C1YmX2UH.js";import{c as E,a as u,f as h,t as Ae}from"../chunks/BMeCtLyR.js";import{l as Rt,s as xe,p as T,r as Je,i as R}from"../chunks/MYJGKh80.js";import{b as De}from"../chunks/DHTNoGoN.js";import{s as X}from"../chunks/DfAHVaxr.js";import{s as ut,e as Xe,i as zt}from"../chunks/P1xUTngh.js";import{c as k}from"../chunks/CpUudvot.js";import{g as nt}from"../chunks/CWKS71Yf.js";import{a as Dt,s as Ft,b as Ot,d as Wt}from"../chunks/CeBw7cM3.js";import{I as jt,s as Ut,e as Nt,f as Tt,S as ot,g as dt,h as ct,i as ft}from"../chunks/CwUP6mZe.js";import{c as Ye}from"../chunks/c5jJKWzo.js";import"../chunks/69_IOA4Y.js";import{C as Kt}from"../chunks/CVwzUQOY.js";import{A as Ht,a as Gt,b as Bt}from"../chunks/kclYbeaK.js";import{S as pt}from"../chunks/FxWU69XT.js";import{B as qt}from"../chunks/B63z5rX-.js";import{I as Qt}from"../chunks/B9RZHzvF.js";import{s as st}from"../chunks/BFGjv385.js";import"../chunks/CZCUGSrh.js";import{j as Xt}from"../chunks/zBqsFMnn.js";import{a as Zt,b as Jt}from"../chunks/V9JFjWFo.js";function Yt(y){return(Zt||Jt)+y}function er(y,l){const i=Rt(l,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const f=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]];jt(y,xe({name:"command"},()=>i,{get iconNode(){return f},children:(p,I)=>{var r=E(),_=g(r);Ut(_,l,"default",{}),u(p,r)},$$slots:{default:!0}}))}var tr=h("<span><!></span>");function rr(y,l){le(l,!0);let i=T(l,"ref",15,null),f=Je(l,["$$slots","$$events","$$legacy","ref","class","children"]);var p=tr();Dt(p,r=>({"data-slot":"command-shortcut",class:r,...f}),[()=>Ye("text-muted-foreground ml-auto text-xs tracking-widest",l.class)]);var I=x(p);ut(I,()=>l.children??it),P(p),De(p,r=>i(r),()=>i()),u(y,p),ie()}function ar(y,l){le(l,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let i=Je(l,["$$slots","$$events","$$legacy"]);const f=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Qt(y,xe({name:"arrow-left"},()=>i,{get iconNode(){return f},children:(p,I)=>{var r=E(),_=g(r);ut(_,()=>l.children??it),u(p,r)},$$slots:{default:!0}})),ie()}var nr=h('<div class="view svelte-1s3dmqi"></div>');function or(y,l){le(l,!0);const i=T(l,"mapView",7);let f=v(null);Ze(()=>{i().container=e(f)});var p=nr();De(p,I=>a(f,I),()=>e(f)),u(y,p),ie()}class sr{#r=v(null);#e=v(!1);#t=v(null);async fetchWebMaps(l){a(this.#e,!0),a(this.#t,null);try{console.log("[useFetchWebMaps] Fetching web maps from URL:",l);const i=await fetch(l);if(!i.ok)throw new Error(`Failed to fetch web maps: ${i.status} ${i.statusText}`);const f=await i.json();a(this.#r,f,!0)}catch(i){a(this.#t,i,!0)}finally{a(this.#e,!1)}}get response(){return e(this.#r)}get isLoading(){return e(this.#e)}get error(){return e(this.#t)}}var lr=h('<span class="m-0 ml-[-5px] inline-flex max-w-[10rem] items-center overflow-hidden rounded border border-border px-1 py-0.5 text-xs font-medium text-ellipsis whitespace-nowrap text-muted-foreground"> </span> <span aria-hidden="true" class="h-5 w-px bg-border"></span>',1),ir=h('<div class="flex h-9 items-center gap-2 border-b pl-2" data-slot="command-input-wrapper"><span class="flex h-full min-w-[1.25rem] shrink-0 items-center justify-center text-muted-foreground"><!></span> <!> <!></div>');function ur(y,l){le(l,!0);let i=T(l,"ref",15,null),f=T(l,"value",15,""),p=T(l,"iconProps",19,()=>({})),I=Je(l,["$$slots","$$events","$$legacy","ref","class","value","icon","iconProps","commandId"]);var r=ir(),_=x(r),z=x(_);{var b=m=>{const F=S(()=>l.icon);var c=E(),n=g(c);k(n,()=>e(F),(d,w)=>{w(d,xe(p))}),u(m,c)},M=m=>{er(m,{class:"size-4 opacity-50"})};R(z,m=>{l.icon?m(b):m(M,!1)})}P(_);var V=j(_,2);{var O=m=>{var F=lr(),c=g(F),n=x(c,!0);P(c),be(2),N(()=>{Ft(c,"title",l.commandId),X(n,l.commandId)}),u(m,F)};R(V,m=>{l.commandId&&m(O)})}var C=j(V,2);{let m=S(()=>Ye("flex h-10 flex-1 rounded-md bg-transparent py-3 text-sm outline-hidden placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",l.class));k(C,()=>Nt,(F,c)=>{c(F,xe({"data-slot":"command-input",get class(){return e(m)}},()=>I,{get ref(){return i()},set ref(n){i(n)},get value(){return f()},set value(n){f(n)}}))})}P(r),u(y,r),ie()}function dr(y,l){le(l,!0);const i=T(l,"disabled",3,!1);qt(y,{class:"m-0 flex size-7 shrink-0 items-center justify-center rounded-md border-none bg-transparent p-0 text-muted-foreground opacity-50 shadow-none transition hover:bg-transparent hover:text-accent-foreground focus:outline-none focus-visible:border-transparent focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none active:ring-0 active:outline-none disabled:pointer-events-none disabled:opacity-50 has-[>svg]:px-0",onclick:()=>{i()||l.onPress?.()},"aria-label":"Return to command search",get disabled(){return i()},children:(f,p)=>{{let I=S(()=>`size-4 ${l.class}`.trim());ar(f,{get class(){return e(I)}})}},$$slots:{default:!0}}),ie()}var cr=h('<span class="text-xs text-muted-foreground"> </span>'),fr=h('<div class="flex flex-col gap-0.5"><span class="text-sm leading-tight font-medium"> </span> <!></div> <!>',1),pr=h("<!> <!>",1),mr=h('<div class="px-4 pb-3"><!></div>'),vr=h("<!> <!>",1),_r=h('<div class="px-4 pb-3"><!></div>'),gr=h('<p class="text-sm text-muted-foreground">No panel registered for this command.</p>'),hr=h('<div class="pr-2 pb-2 pl-2"><!></div>'),wr=h("<!> <!> <!>",1),yr=h("<!> <!>",1),br=h("<div><!></div>");function xr(y,l){le(l,!0);let i=T(l,"ref",15,null),f=T(l,"commands",19,()=>[]),p=T(l,"placeholder",3,"Search commands..."),I=T(l,"emptyMessage",3,"No commands found."),r=v(null),_=v(null),z=v(null),b=v(null),M=v(null),V=v(null),O=v(""),C=v(!1),m=v(St(p())),F=v(null),c=!1,n=v(null),d=!1,w=null,$=null;const L=S(()=>{const t=new Map;for(const o of f())t.set(o.id,o);return Array.from(t.values())}),Pe=S(()=>{const t=new Map;for(const o of e(L)){const s=o.group??null,A=t.get(s);A?A.push(o):t.set(s,[o])}for(const[,o]of t)o.sort((s,A)=>s.name.localeCompare(A.name));return t});function pe(t,o=!1){o&&(c=!0),a(O,t,!0)}function Fe(){a(F,null),a(m,p()),c=!1}Se(()=>{const t=e(F);if(t){if(c){c=!1;return}t(e(O))}}),Se(()=>{e(r)||a(m,p())});function Z(){if($)try{$()}catch(t){console.error("Failed to dispose command session",t)}$=null,a(z,null),a(b,null),Fe(),a(_,null)}function K(){e(r)&&(Z(),a(r,null),a(V,null),a(M,null),pe("",!0),a(C,!0))}function me(){e(n)?.blur()}function ne(t,o){if(!t.component)return null;const s=t.props;return s?{component:t.component,props:()=>s(o)}:{component:t.component}}function J(t,o){const s=t.createSession?.(o);if(s){$=s.dispose??null,Object.prototype.hasOwnProperty.call(s,"input")?a(z,s.input??null,!0):a(z,null),Object.prototype.hasOwnProperty.call(s,"content")?a(b,s.content??null,!0):a(b,ne(t,o),!0);return}$=null,a(z,null),a(b,ne(t,o),!0)}function ve(t){const o=t.id;return{deactivate:()=>{!e(r)||e(r).id!==o||K()},isActive:s=>!e(r)||e(r).id!==o?!1:s?e(r).id===s:!0,setIsOpen:(s,A)=>{if(!e(r)||e(r).id!==o)return;if(s){d=!1,a(C,!0);return}const Y=A?.preserveActive??!0;Ie(Y)},setInputSurface:s=>{!e(r)||e(r).id!==o||a(z,s,!0)},setContentSurface:s=>{!e(r)||e(r).id!==o||a(b,s,!0)},getInputValue:()=>e(O),setInputValue:s=>{!e(r)||e(r).id!==o||pe(s,!0)},setInputHandler:s=>{if(!(!e(r)||e(r).id!==o)){if(a(F,s,!0),!s){c=!1;return}s(e(O))}},setPlaceholder:s=>{!e(r)||e(r).id!==o||a(m,s,!0)},resetPlaceholder:()=>{!e(r)||e(r).id!==o||a(m,p())}}}function $e(t){const o=e(_);if(!t)return o?{runtime:o}:{};if(!o)return{};const{props:s}=t;return s?{...typeof s=="function"?s(o):s,runtime:o}:{runtime:o}}function Ce(t){return`${t.name} ${t.description??""}`.trim()}async function Le(t){if(e(r)?.id===t.id){K();return}Z(),a(V,null),a(M,t.id,!0),a(C,!0),e(n)&&e(n).focus();const o=ve(t);a(_,o,!0),a(r,t,!0),J(t,o);try{await t.execute(o)}catch(s){a(V,s instanceof Error?s:new Error("Failed to execute the command."),!0)}finally{a(M,null),pe("",!0)}}function Oe(t){const o=t.key.toLowerCase();if((t.metaKey||t.ctrlKey)&&o==="p"){if(t.preventDefault(),e(r)){K();return}e(n)&&e(n).focus();return}if(o==="escape"){if(e(r)){t.preventDefault(),K(),me();return}e(C)&&(t.preventDefault(),a(C,!1),me());return}if(!e(r))for(const A of e(L)){if(!A.shortcut)continue;const Y=A.shortcut.join(" ").toLowerCase(),H=[];if(t.metaKey&&H.push("âŒ˜"),t.ctrlKey&&H.push("Ctrl"),t.altKey&&H.push("Alt"),t.shiftKey&&H.push("Shift"),H.push(t.key.length===1?t.key.toUpperCase():t.key),H.join(" ").toLowerCase()===Y.toLowerCase()){t.preventDefault(),Le(A);break}}}function et(){a(C,!0)}function Ie(t=!1){d=t,a(C,!1)}function We(t){const o=w;if(!o)return;const s=t.target;s&&o.contains(s)||e(C)&&Ie(!!e(r))}Se(()=>{if(!e(C)){if(pe("",!0),!e(r)){d=!1;return}if(d){d=!1;return}Z(),a(r,null),a(V,null)}});var oe=br();nt("keydown",Lt,Oe),nt("pointerdown",kt,We);var je=x(oe);k(je,()=>Tt,(t,o)=>{o(t,{children:(s,A)=>{var Y=yr(),H=g(Y);{let ue=S(()=>e(r)?e(r).inputPlaceholder??e(m):e(m)),ke=S(()=>e(r)?dr:void 0),Ue=S(()=>e(r)?{onPress:K,disabled:e(M)===e(r).id}:void 0),Ne=S(()=>e(r)?.id);ur(H,{get placeholder(){return e(ue)},onfocus:()=>et(),get icon(){return e(ke)},get iconProps(){return e(Ue)},get commandId(){return e(Ne)},get value(){return e(O)},set value(Ve){a(O,Ve,!0)},get ref(){return e(n)},set ref(Ve){a(n,Ve,!0)}})}var _e=j(H,2);{var Me=ue=>{var ke=E(),Ue=g(ke);{var Ne=ge=>{ot(ge,{children:(Ee,Te)=>{var Re=E(),ze=g(Re);k(ze,()=>dt,(Ke,He)=>{He(Ke,{children:(G,de)=>{var U=pr(),se=g(U);k(se,()=>ct,(re,W)=>{W(re,{children:(B,ee)=>{be();var q=Ae();N(()=>X(q,I())),u(B,q)},$$slots:{default:!0}})});var ce=j(se,2);Xe(ce,17,()=>Array.from(e(Pe).entries()),zt,(re,W)=>{var B=S(()=>Et(e(W),2));let ee=()=>e(B)[1];var q=E(),ae=g(q);Xe(ae,17,ee,Q=>Q.id,(Q,D)=>{var he=E(),fe=g(he);{let mt=S(()=>Ce(e(D)));k(fe,()=>ft,(vt,_t)=>{_t(vt,{get value(){return e(mt)},onclick:()=>Le(e(D)),children:(gt,Lr)=>{var tt=fr(),Ge=g(tt),Be=x(Ge),ht=x(Be,!0);P(Be);var wt=j(Be,2);{var yt=te=>{var we=cr(),qe=x(we,!0);P(we),N(()=>X(qe,e(D).description)),u(te,we)};R(wt,te=>{e(D).description&&te(yt)})}P(Ge);var bt=j(Ge,2);{var xt=te=>{pt(te,{class:"ml-auto size-4 text-muted-foreground"})},Pt=te=>{var we=E(),qe=g(we);{var $t=Qe=>{var rt=E(),Ct=g(rt);k(Ct,()=>rr,(It,Mt)=>{Mt(It,{children:(Vt,kr)=>{be();var at=Ae();N(At=>X(at,At),[()=>e(D).shortcut?.join(" + ")]),u(Vt,at)},$$slots:{default:!0}})}),u(Qe,rt)};R(qe,Qe=>{e(D).shortcut?.length&&Qe($t)},!0)}u(te,we)};R(bt,te=>{e(M)===e(D).id?te(xt):te(Pt,!1)})}N(()=>X(ht,e(D).name)),u(gt,tt)},$$slots:{default:!0}})})}u(Q,he)}),u(re,q)}),u(G,U)},$$slots:{default:!0}})}),u(Ee,Re)},$$slots:{default:!0}})},Ve=ge=>{var Ee=wr(),Te=g(Ee);{var Re=G=>{const de=S(()=>e(z).component);var U=mr(),se=x(U);{let ce=S(()=>$e(e(z)));k(se,()=>e(de),(re,W)=>{W(re,xe(()=>e(ce)))})}P(U),u(G,U)};R(Te,G=>{e(z)&&G(Re)})}var ze=j(Te,2);{var Ke=G=>{var de=_r(),U=x(de);k(U,()=>Ht,(se,ce)=>{ce(se,{variant:"destructive",children:(re,W)=>{var B=vr(),ee=g(B);k(ee,()=>Gt,(ae,Q)=>{Q(ae,{children:(D,he)=>{be();var fe=Ae();N(()=>X(fe,`${e(r).name??""} failed`)),u(D,fe)},$$slots:{default:!0}})});var q=j(ee,2);k(q,()=>Bt,(ae,Q)=>{Q(ae,{children:(D,he)=>{be();var fe=Ae();N(()=>X(fe,e(V).message)),u(D,fe)},$$slots:{default:!0}})}),u(re,B)},$$slots:{default:!0}})}),P(de),u(G,de)};R(ze,G=>{e(V)&&G(Ke)})}var He=j(ze,2);ot(He,{children:(G,de)=>{var U=hr(),se=x(U);{var ce=W=>{const B=S(()=>e(b).component);var ee=E(),q=g(ee);{let ae=S(()=>$e(e(b)));k(q,()=>e(B),(Q,D)=>{D(Q,xe(()=>e(ae)))})}u(W,ee)},re=W=>{var B=E(),ee=g(B);k(ee,()=>Kt,(q,ae)=>{ae(q,{class:"px-0",children:(Q,D)=>{var he=gr();u(Q,he)},$$slots:{default:!0}})}),u(W,B)};R(se,W=>{e(b)?W(ce):W(re,!1)})}P(U),u(G,U)},$$slots:{default:!0}}),u(ge,Ee)};R(Ue,ge=>{e(r)?ge(Ve,!1):ge(Ne)})}u(ue,ke)};R(_e,ue=>{e(C)&&ue(Me)})}u(s,Y)},$$slots:{default:!0}})}),P(oe),De(oe,t=>w=t,()=>w),De(oe,t=>i(t),()=>i()),N(t=>Wt(oe,1,t),[()=>Ot(Ye("space-y-4",l.class))]),u(y,oe),ie()}var Pr=h('<div class="error-message svelte-11six79"><p class="text-sm text-red-600"> </p></div>'),$r=h('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-11six79"> </span></div>'),Cr=h('<span class="description-text text-xs text-gray-500 svelte-11six79"> </span>'),Ir=h('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-11six79"> </span> <!></div>'),Mr=h('<div class="item-container svelte-11six79"><!> <!></div>');function Vr(y,l){le(l,!0);const i=T(l,"mapView",7),f=T(l,"runtime",3,null),p=new sr;let I=v(null),r=v(null),_=v("");const z=S(()=>{const n=p.response?.results??[],d=e(_).trim().toLowerCase();return d?n.filter(w=>{const $=typeof w?.title=="string"?w.title.toLowerCase():"",L=typeof w?.description=="string"?w.description.toLowerCase():"";return $.includes(d)||L.includes(d)}):n});Ze(async()=>{const n=Yt("/maps-web-map.json");await p.fetchWebMaps(n)});let b=null,M=null,V=l.inputPlaceholder??"Search...";Se(()=>{const n=f(),d=l.inputPlaceholder??"Search...";if(!n){M?.(),M=null,b=null,a(_,""),V=d;return}if(n===b){d!==V&&(n.setPlaceholder(d),V=d);return}M?.(),M=null,b=null,V=d;const w=L=>{a(_,L,!0)};n.setPlaceholder(d),n.setInputHandler(w);const $=n.getInputValue();a(_,$,!0),$&&(n.setInputValue(""),a(_,"")),M=()=>{n.setInputHandler(null),n.resetPlaceholder(),n.setInputValue(""),b===n&&(b=null),a(_,"")},b=n}),lt(()=>{M?.(),M=null,b=null});async function O(n){if(!i()){console.error("MapView is not initialized"),a(r,"MapView is not ready. Please wait and try again.");return}a(I,n,!0),a(r,null);try{console.log(`Loading web map with ID: ${n}`);const d="https://nercdsh.dev.azure.manchester.ac.uk/portal";st.portalUrl=d,console.log("Portal URL configured:",st.portalUrl);const[{default:w}]=await Promise.all([ye(()=>import("../chunks/DphrNNSX.js").then(Pe=>Pe.W),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156]),import.meta.url)]),$=new w({portalItem:{id:n,portal:{url:d}}});await $.load(),console.log("Web map loaded successfully"),console.log("Applying web map to MapView",i().ui),i().map=$,console.log("Web map applied to MapView"),await Xt(()=>i().ready),console.log("MapView updated with new web map");const L=$.initialViewProperties?.viewpoint?.targetGeometry;L&&(console.log("Navigating to web map initial viewpoint"),await i().goTo(L),console.log("MapView navigated to web map initial viewpoint")),f()?.setIsOpen(!1)}catch(d){console.error("Error loading web map:",d),a(r,d instanceof Error?d.message:"Failed to load web map",!0)}finally{a(I,null)}}var C=Mr(),m=x(C);{var F=n=>{var d=Pr(),w=x(d),$=x(w,!0);P(w),P(d),N(()=>X($,e(r))),u(n,d)};R(m,n=>{e(r)&&n(F)})}var c=j(m,2);k(c,()=>dt,(n,d)=>{d(n,{children:(w,$)=>{var L=E(),Pe=g(L);{var pe=Z=>{var K=E(),me=g(K);k(me,()=>ct,(ne,J)=>{J(ne,{children:(ve,$e)=>{be();var Ce=Ae("No web maps match your search.");u(ve,Ce)},$$slots:{default:!0}})}),u(Z,K)},Fe=Z=>{var K=E(),me=g(K);Xe(me,17,()=>e(z),ne=>ne.id,(ne,J)=>{var ve=E(),$e=g(ve);k($e,()=>ft,(Ce,Le)=>{Le(Ce,{onclick:()=>O(e(J).id),children:(Oe,et)=>{var Ie=E(),We=g(Ie);{var oe=t=>{var o=$r(),s=x(o);pt(s,{class:"size-4"});var A=j(s,2),Y=x(A);P(A),P(o),N(()=>X(Y,`Loading ${e(J).title??"Untitled web map"??""}...`)),u(t,o)},je=t=>{var o=Ir(),s=x(o),A=x(s,!0);P(s);var Y=j(s,2);{var H=_e=>{var Me=Cr(),ue=x(Me,!0);P(Me),N(()=>X(ue,e(J).description)),u(_e,Me)};R(Y,_e=>{e(J).description&&_e(H)})}P(o),N(()=>X(A,e(J).title??"Untitled web map")),u(t,o)};R(We,t=>{e(I)===e(J).id?t(oe):t(je,!1)})}u(Oe,Ie)},$$slots:{default:!0}})}),u(ne,ve)}),u(Z,K)};R(Pe,Z=>{e(z).length===0?Z(pe):Z(Fe,!1)})}u(w,L)},$$slots:{default:!0}})}),P(C),u(y,C),ie()}var Ar=h('<div class="map-layout svelte-10vgo84"><!></div>'),Sr=h("<!> <!>",1);function aa(y,l){le(l,!0);let i=v(null),f=v(null),p=v(!1),I=v(null),r=v(null),_=v(null);Ze(async()=>{await z();const[{default:c}]=await Promise.all([ye(()=>import("../chunks/DJWKYYK3.js").then(L=>L.a2),__vite__mapDeps([157,1,2,3,4,5,42,43,29,44,26,6,7,45,36,37,46,24,25,47,10,11,12,13,27,18,76,77,21,158,57,58,59,28,60,61,62,63,64,14,19,65,66,67,68,69,70,38,159,160,161,30,150,162,163,16,17,164,8,9,15,20,22,23,31,32,33,34,35,39,40,41,96,51,165,94,74,56,166,167,168,169,54,55,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185]),import.meta.url)]);a(i,new c({map:{basemap:"gray"},zoom:15,center:[-2.231774828836059,53.46531847221502],background:{color:[207,211,212]}}),!0),e(i).ui.move("zoom","bottom-right");const[{default:n}]=await Promise.all([ye(()=>import("../chunks/OWXZYB2M.js").then(L=>L.L),__vite__mapDeps([186,5,1,2,3,4,10,11,12,13,7,165,18,161,21,6,30,150,162,17,187,188,189,60,185]),import.meta.url)]),d=new n({view:e(i)});e(i).ui.add(d,{position:"top-left"});const[{default:w}]=await Promise.all([ye(()=>import("../chunks/UtnsrrcQ.js"),__vite__mapDeps([190,1,2,3,4,18,6,5,7,161,21,11,12,30,150,162,10,13,191,24,25,26,64,59,192,85,39,40,37,89,193,88,194,195,16,17,196,123,124,125,28,102,103,29,104,105,57,58,60,45,36,46,61,62,63,14,19,65,66,67,68,69,70,99,106,107,108,109,112,126,127,128,47,129,130,51,131,132,133,134,135,136,137,138,101,110,111,113,197,198,199,200,84,201,167,202,203,185,204,205,206,207,208,209,210,211,212,213,214,215,216,217,178,170,218,219,220,221,181,222,223,224,183,184,188]),import.meta.url)]),$=new w({view:e(i)});e(i).ui.add($,{position:"top-right"}),a(r,b(),!0),a(_,M(),!0)});async function z(){await ye(()=>import("../chunks/DajC7boy.js"),__vite__mapDeps([225,226,161,1,2,3,4,21,11,12,6,5,7,18,30,150,162,227,184,13,228,186,10,165,17,187,188,189,60,185]),import.meta.url),await ye(()=>import("../chunks/3iuy7Red.js"),__vite__mapDeps([229,230,161,1,2,3,4,21,11,12,6,5,7,18,30,150,162,231,232,233,234,235,236,237,227,184,238,239,240,241,242,243,226,13,228,157,42,43,29,44,26,45,36,37,46,24,25,47,10,27,76,77,158,57,58,59,28,60,61,62,63,64,14,19,65,66,67,68,69,70,38,159,160,163,16,17,164,8,9,15,20,22,23,31,32,33,34,35,39,40,41,96,51,165,94,74,56,166,167,168,169,54,55,170,171,172,173,174,175,176,177,178,179,180,181,182,183,185,0,48,49,50,52,53,71,72,73,75,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,95,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156]),import.meta.url)}Se(()=>{if(e(p)||!e(i)||!e(f))return;const c=e(i),n=e(f);c.ui.add(n,{position:"manual"}),a(p,!0)}),lt(()=>{a(r,null),a(_,null),e(i)&&e(i).destroy()});function b(){const c={id:"add-web-map",name:"Add web map",description:"Fetch and display our web maps.",group:"Maps",shortcut:["Ctrl","M"],inputPlaceholder:"Search web maps...",execute:async n=>{a(I,"show-web-maps")},component:Vr,props:n=>({mapView:e(i),inputPlaceholder:c.inputPlaceholder})};return c}function M(){return{id:"add-layer",name:"Add layers",description:"Fetch and display our layers.",group:"Maps",shortcut:["Ctrl","L"],execute:async c=>{}}}var V=Sr(),O=g(V);{var C=c=>{{let n=S(()=>[e(r),e(_)]);xr(c,{class:"position-absolute top-3 left-1/2 z-1 -translate-x-1/2 transform",get commands(){return e(n)},get ref(){return e(f)},set ref(d){a(f,d,!0)}})}};R(O,c=>{e(r)&&e(_)&&c(C)})}var m=j(O,2);{var F=c=>{var n=Ar(),d=x(n);or(d,{get mapView(){return e(i)}}),P(n),u(c,n)};R(m,c=>{e(i)&&c(F)})}u(y,V),ie()}export{aa as component};
