const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/QoFPZSeS.js","../chunks/Bc_TmxSc.js","../chunks/DOBtub6T.js","../assets/index.CQED0rIl.css","../chunks/4u0wcz6f.js","../chunks/C6pzAkdR.js","../chunks/CHwVPrQX.js","../chunks/DXGw_0Ww.js","../chunks/DHAweUE4.js","../chunks/HTOW8iPe.js","../chunks/CYB2EK_d.js","../chunks/CdDXOJ3Y.js","../chunks/CEIZYuf2.js","../chunks/DYslx7It.js","../chunks/DuIgqnlY.js","../chunks/D-Nm-cDg.js","../chunks/DaQyK3nQ.js","../chunks/Dex61Jy7.js","../chunks/DkJ9ydHD.js","../chunks/BUpj17sD.js","../chunks/DwWpeHsS.js","../chunks/BfMV86KQ.js","../chunks/PPVm8Dsz.js","../chunks/mvO4rAvm.js","../assets/component-utils.R4SXog4D.css","../chunks/DP-0fjQN.js","../chunks/8JOOWlUE.js","../chunks/DmtPipHG.js","../chunks/v5xyD8FI.js","../chunks/B87vTgcy.js","../chunks/bnayRBMH.js","../chunks/CbKIfN8e.js","../chunks/Y_0EfhRu.js","../chunks/D2feDspf.js","../chunks/DdbdneQ1.js","../chunks/BV8-ngCo.js","../chunks/Db91rTNV.js","../chunks/JSgpbLKx.js","../chunks/BxzdRo61.js","../chunks/D7TN9t_q.js","../chunks/BdDvN8O6.js","../chunks/DYAvFwNf.js","../chunks/BVzLLi1N.js","../chunks/BT4JRnHr.js","../chunks/BawRJkAp.js","../chunks/in6aGWsR.js","../chunks/CgRsZskV.js","../chunks/h5rW6lAS.js","../chunks/BiKLiV0b.js","../chunks/BFkxbxSE.js","../chunks/CNI1bPWi.js","../chunks/Cp_8tW2x.js","../chunks/BW9c9SrU.js","../chunks/CPLN7muT.js","../chunks/C0wm8_Yw.js","../chunks/C0Q15jgo.js","../chunks/idjzkL-p.js","../chunks/Dm66KbFf.js","../chunks/CH2_fMSn.js","../chunks/B5GhfNyB.js","../chunks/Cgb6qxNH.js","../chunks/D30EvcMW.js","../chunks/E6bx-lsJ.js","../chunks/jrtQMiTD.js","../chunks/8hNj00IL.js","../chunks/BauKPgXA.js","../chunks/CaVKkSa6.js","../chunks/CT-uuzXp.js","../chunks/fFYBqOqn.js","../chunks/B1N-tmtC.js","../chunks/DEfNR1C0.js","../chunks/CtljFrUl.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/Bxxl7NsE.js","../chunks/DNogqiqR.js","../chunks/DQOO6RKE.js","../chunks/j00zX3Hz.js","../chunks/Bi6C4OG6.js","../chunks/C7e3Z5XT.js","../chunks/D-YQ4CHs.js","../chunks/COf4WTrX.js","../chunks/O7sg2ysZ.js","../chunks/rIJyvhvt.js","../chunks/Dc261vxq.js","../chunks/CC5XFA8H.js","../chunks/D-fXJnCB.js","../chunks/B4oxan5h.js","../chunks/CEhj4l8G.js","../chunks/D_bKRBrk.js","../chunks/BvwLokzg.js","../chunks/6vsZKnZ9.js","../chunks/7VNfS1TG.js","../chunks/DP5d1tPL.js","../chunks/D-LmNXBe.js","../chunks/B0qK9XMn.js","../chunks/Dci9kdnZ.js","../chunks/CF39WpqH.js","../chunks/BAzr6Eo0.js","../chunks/FTzM2Tyd.js","../chunks/C61-NiK_.js","../chunks/BWeyrF54.js","../chunks/Cx8JFOfk.js","../chunks/BmgeYasw.js","../chunks/DLOQEY_Z.js","../chunks/91llm6te.js","../chunks/D31seSHD.js","../chunks/DH0im0Cr.js","../chunks/NIvIaQ85.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/Bdg0_NLM.js","../chunks/ShBCB_ow.js","../chunks/Df_x8s9w.js","../chunks/O7OdySC2.js","../chunks/UusjRatb.js","../chunks/BTOnRfOV.js","../chunks/CaYZrGFV.js","../chunks/DiSf52yC.js","../chunks/ChwpPGxO.js","../chunks/DlHjpvET.js","../chunks/h2nqTh5L.js","../chunks/DbKbkLbd.js","../chunks/Blp-4Wmz.js","../chunks/BQBvadb7.js","../chunks/DYyHyQO-.js","../chunks/Epqbrrx8.js","../chunks/OuOF1Ws1.js","../chunks/CHtALhqk.js"])))=>i.map(i=>d[i]);
import{_ as Ce}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as Re}from"../chunks/BW702uPa.js";import{p as Y,a5 as j,t as c,aa as Ae,a7 as E,r as de,a as H,a9 as N,n as Be,a6 as ye,V as qe,u as Ze,c as Le,R as fe}from"../chunks/BjFLI01z.js";import{g as Ke}from"../chunks/esl4IHED.js";import{f as X,d as Q,a as $,t as Je}from"../chunks/DAMOoDui.js";import{s as Se,r as Ve,i as Fe}from"../chunks/Ck_Twk2V.js";import{c as me}from"../chunks/BM3AUTZE.js";import{b as Ge,e as se}from"../chunks/BCRv6d1m.js";import{b as Ne}from"../chunks/hODufui9.js";import{B as De}from"../chunks/DZaSAE_7.js";import{S as Qe}from"../chunks/aP47lXW6.js";import{A as Ye,a as He,L as Xe,M as et,S as tt}from"../chunks/9Wz90BE-.js";import"../chunks/69_IOA4Y.js";import{e as nt,i as rt,s as xe}from"../chunks/DoCgVQpV.js";import{n as $e}from"../chunks/DcogKsHq.js";import{_ as q}from"../chunks/CbKIfN8e.js";import{z as he}from"../chunks/O7sg2ysZ.js";import"../chunks/DwWpeHsS.js";import"../chunks/D4VJcUD0.js";import"../chunks/CjH7Rf0r.js";import"../chunks/C9bC63rm.js";import"../chunks/BfMV86KQ.js";import"../chunks/D2feDspf.js";import"../chunks/BVLmr62Y.js";import{u as Te,m as ot,i as it}from"../chunks/BYRe6UlO.js";import{p as _e,m as We,a as st}from"../chunks/Do8Mu2oV.js";import at from"../chunks/BSlv9HcN.js";import{n as Ie}from"../chunks/C92cRl-g.js";import"../chunks/C39vTPtT.js";import{b as lt}from"../chunks/DgdLcLnH.js";import{I as Me}from"../chunks/DxXRo6I4.js";var ct=X('<div class="map-sidebar svelte-1gk88h6" role="navigation" aria-label="Map tools"></div>');function ut(t,e){Y(e,!0);let r=E("");const n=async o=>{c(r)===o?(N(r,""),e.onToggleItem?.(o,!1)):(N(r,o,!0),e.onToggleItem?.(o,!0))};var i=ct();nt(i,21,()=>e.options,rt,(o,s)=>{var l=Q(),f=j(l);{let g=Ae(()=>`sidebar-button ${c(s).id===c(r)?"active":""}`),d=Ae(()=>c(s).id===c(r));me(f,()=>De,(v,w)=>{w(v,{get class(){return c(g)},variant:"ghost",size:"icon",get"aria-label"(){return c(s).label},get"aria-pressed"(){return c(d)},get title(){return c(s).label},onclick:()=>void n(c(s).id),children:(B,h)=>{const u=Ae(()=>c(s).icon);var b=Q(),_=j(b);me(_,()=>c(u),(m,S)=>{S(m,{"aria-hidden":"true",class:"sidebar-icon"})}),$(B,b)},$$slots:{default:!0}})})}$(o,l)}),de(i),$(t,i),H()}async function ft(t,e,r,n){return e.length?t.type==="feature"?pt(t,e,r,n):t.type==="graphics"?dt(t,e,r):(console.warn("getUnionPolygonGeometryByIds: unsupported layer type:",t.type),null):null}async function pt(t,e,r,n){const i=r,o=t.createQuery(),s=e.map(d=>ht(i,d));o.where=s.join(" OR "),o.returnGeometry=!0,o.outFields=[],o.num=e.length||1e3,n?.spatialReference&&(o.outSpatialReference=n.spatialReference);const f=(await t.queryFeatures(o)).features.map(d=>d.geometry).filter(d=>!!d&&d.type==="polygon");if(!f.length)return null;if(f.length===1)return f[0];const g=_e(f);return!g||g.type!=="polygon"?null:g}function dt(t,e,r){const n=r,i=new Set(e.map(l=>String(l))),o=[];if(t.graphics.forEach(l=>{const g=(l.attributes||{})[n];if(g==null||!i.has(String(g)))return;const d=l.geometry;d&&d.type==="polygon"&&o.push(d)}),!o.length)return null;if(o.length===1)return o[0];const s=_e(o);return!s||s.type!=="polygon"?null:s}async function yt(t,e,r,n){const i=await ke(t,e,r,n);if(!i.length)return[];const o=new Map;for(const l of i){const f=l.value==null?"__NULL__":String(l.value);let g=o.get(f);g||(g={value:l.value,geometries:[]},o.set(f,g)),g.geometries.push(l.geometry)}const s=[];return o.forEach(l=>{const f=Pe(e,l.geometries);f&&s.push({geometry:f,value:l.value})}),s}async function ke(t,e,r,n){return t.type==="feature"?gt(t,e,r,n):t.type==="graphics"?mt(t,e,r):(console.warn("getClipFeatures: unsupported layer type:",t.type),[])}async function gt(t,e,r,n){const i=t.createQuery();return i.geometry=e,i.spatialRelationship="intersects",i.returnGeometry=!0,i.outFields=[r],i.num=1e3,n?.spatialReference&&(i.outSpatialReference=n.spatialReference),(await t.queryFeatures(i)).features.filter(s=>!!s.geometry).map(s=>({geometry:s.geometry,value:s.attributes?.[r]}))}function mt(t,e,r){const n=e.extent,i=[];return t.graphics.forEach(o=>{if(!o.geometry)return;const s=o.geometry,l="extent"in s?s.extent:null;if(!n||!l||ze(n,l)){const f=o.attributes||{};i.push({geometry:s,value:f[r]})}}),i}function be(t,e){return t.spatialReference?.wkid!==e.spatialReference?.wkid&&t.spatialReference?.wkt!==e.spatialReference?.wkt?(console.error("clipPolygon: polygon and union clip geometry must be in the same spatial reference."),console.log("polygon SR",t.spatialReference?.toJSON()),console.log("unionClipGeometry SR",e.spatialReference?.toJSON()),!1):!0}function we(t,e,r){return new q({geometry:t,attributes:{clipped:!0,...e},symbol:r||{type:"simple-fill",color:[0,0,0,.2],outline:{color:[255,0,0,1],width:1.5}}})}function ae(t,e,r){r?.map&&!r.map.layers.includes(t)&&r.map.add(t),t.add(e)}function ht(t,e){return typeof e=="number"?`${t} = ${e}`:`${t} = '${String(e).replace(/'/g,"''")}'`}async function bt(t,e,r){const n=await Ue(t,e,r);return n.length?Pe(e,n):null}async function Ue(t,e,r){return t.type==="feature"?wt(t,e,r):t.type==="graphics"?vt(t,e):(console.warn("getClipGeometries: unsupported layer type:",t.type),[])}async function wt(t,e,r){const n=t.createQuery();return n.geometry=e,n.spatialRelationship="intersects",n.returnGeometry=!0,n.outFields=[],n.num=1e3,r?.spatialReference&&(n.outSpatialReference=r.spatialReference),(await t.queryFeatures(n)).features.map(o=>o.geometry).filter(o=>!!o)}function vt(t,e){const r=e.extent,n=[];return t.graphics.forEach(i=>{if(!i.geometry)return;const o=i.geometry,s="extent"in o?o.extent:null;(!r||!s||ze(r,s))&&n.push(o)}),n}function Pe(t,e){Te(t);const r=ot(e,t);if(!r.length)return null;const n=r.filter(o=>!!o&&o.type==="polygon");if(!n.length)return null;const i=_e(n);return!i||i.type!=="polygon"?null:i}function ze(t,e){return!(t.xmax<e.xmin||t.xmin>e.xmax||t.ymax<e.ymin||t.ymin>e.ymax)}async function _t(t){const{view:e,input:r,clipLayer:n,targetLayer:i,symbol:o,clipLayerValueField:s,sourceIds:l}=t,f=r instanceof q?r.geometry:r;if(!f)return console.warn("clipPolygon: no input geometry provided."),null;if(f.type!=="polygon")return console.warn("clipPolygon: input geometry is not a polygon."),null;const g=f;if(n instanceof he&&n.geometryType!=="polygon")return console.error("clipPolygon: clipLayer is not of polygon geometry type."),null;const d=[];if(s){const B=await yt(n,g,s,e);if(!B.length)return console.info("clipPolygon: no geometries in clipLayer intersect the polygon for any value."),null;const h=n.title||n.id||"clip-layer";for(const{geometry:u,value:b}of B){if(!be(g,u)){console.error("clipPolygon: spatial reference mismatch for clip value:",b);continue}const m=we(u,{sourceIds:l,layerTitle:h,valueField:s,value:b},o);ae(i,m,e),d.push(m)}return d.length?(e&&e.goTo(d.map(u=>u.geometry)).catch(u=>console.warn("goTo failed:",u)),d):null}const v=await bt(n,g,e);if(!v)return console.info("clipPolygon: no geometries in clipLayer intersect the polygon."),null;if(!be(g,v))return null;const w=we(v,{sourceIds:l},o);return ae(i,w,e),e&&e.goTo(v).catch(B=>console.warn("goTo failed:",B)),d.push(w),d}function Pt(t,e){console.log("[merge-clipped-polygons] merging in layer:",t.id,"opts:",e);const r=Ct(t);if(r.length<=1)return r;console.log("[merge-clipped-polygons] candidate polygons:",r.length);const n=At(r);if(console.log("[merge-clipped-polygons] overlay pieces count:",n.length),!n.length)return[];const i=It(n);console.log("[merge-clipped-polygons] groups by layer set:",i.size);const o=Bt(i);return console.log("[merge-clipped-polygons] replacing",r.length,"originals with",o.length,"final polygons."),t.graphics.removeMany(r),t.graphics.addMany(o),o}function Ct(t,e){return t.graphics.toArray().filter(n=>!(!n.geometry||n.geometry.type!=="polygon"))}function At(t){let e=[];for(const r of t)e=Lt(r,e);return e}function Lt(t,e){let n=t.geometry;if(!n)return e;Te(n);const i=[];for(const o of e){const s=Tt(o,n,t);i.push(...s.pieces),n=s.remaining,n&&Te(n)}return n&&i.push({geometry:n,members:[t]}),i}function Tt(t,e,r){const n=t.geometry;if(!e)return{pieces:[t],remaining:null};const i=n.extent,o=e.extent;if(!xt(i,o))return{pieces:[t],remaining:e};const s=it(n,e);if(!s||s.type!=="polygon")return{pieces:[t],remaining:e};const l=Ie(n,e),f=Ie(e,n),g=[];l&&l.type==="polygon"&&g.push({geometry:l,members:t.members.slice()}),g.push({geometry:s,members:[...t.members,r]});const d=f&&f.type==="polygon"?f:null;return{pieces:g,remaining:d}}function It(t){const e=new Map;for(const r of t){const{key:n,ids:i}=St(r.members);if(i.length===0)continue;let o=e.get(n);o||(o={geometries:[],members:r.members,comboKey:n},e.set(n,o)),o.geometries.push(r.geometry)}return e}function Bt(t){const e=[];for(const[,r]of t.entries()){if(!r.geometries.length)continue;const n=_e(r.geometries);if(!n||n.type!=="polygon")continue;const i=Vt(r.members),o=new q({geometry:n,attributes:i,symbol:{type:"simple-fill",color:[0,0,0,.3],outline:{color:[0,0,0,1],width:1}}});e.push(o)}return e}function St(t){const e=new Set,r=new Set,n=new Set;for(const l of t){const f=l.attributes??{},g=f.layerId,d=f.layerTitle,v=f.layerIds,w=f.layerTitles,B=f.value!=null?String(f.value):void 0,h=f.layerValues,u=f.bufferDistance,b=f.bufferUnit,_=u!=null&&!Number.isNaN(u)?`|buffer:${u}:${b??"sr"}`:"",m=(S,M)=>{n.add(`${S}:${M}${_}`)};if(g){e.add(g),d&&r.add(d);const S=Array.isArray(h)&&h.length?h:B?[B]:["__NOVALUE__"];for(const M of S)m(g,M)}if(Array.isArray(v))for(let S=0;S<v.length;S++){const M=v[S];if(!M)continue;e.add(M);const k=w?.[S];k&&r.add(k);const U=h?.[S]??B??"__NOVALUE__";m(M,U)}}const i=Array.from(e).sort(),o=Array.from(r).sort();return{key:Array.from(n).sort().join("|"),ids:i,titles:o}}function Vt(t){const e={};if(!t.length)return e;const r=t[0].attributes??{};Object.assign(e,r),"sourceId"in r&&(e.sourceId=r.sourceId),"clipped"in r&&(e.clipped=r.clipped);const n=[],i=[],o=new Map,s=h=>{const u=h.bufferDistance,b=h.bufferUnit,_=h.weight;if(u==null&&b==null&&_==null)return;const m=`${u??""}|${b??""}|${_??""}`;o.has(m)||o.set(m,{distance:u,unit:b,weight:_})},l=new Map,f=(h,u,b,_)=>{if(!h)return;let m=l.get(h);m||(m={titles:new Set,values:new Set,weights:[]},l.set(h,m)),u&&m.titles.add(u),Array.isArray(b)&&b.forEach(S=>{S!=null&&m.values.add(String(S))}),typeof _=="number"&&!Number.isNaN(_)&&m.weights.push(_)};for(const h of t){const u=h.attributes??{},b=typeof u.weight=="number"?u.weight:void 0,_=u.layerTitle;_&&typeof b=="number"&&!Number.isNaN(b)&&(n.push(_),i.push(b)),s(u);const m=u.layerId,S=u.layerTitle,M=u.layerValues,k=u.value!=null?String(u.value):void 0,U=u.layerIds,ee=u.layerTitles,Z=Array.isArray(M)&&M.length?M:k?[k]:void 0;if(m&&f(m,S,Z,b),Array.isArray(U))for(let R=0;R<U.length;R++){const z=U[R],K=Array.isArray(ee)?ee[R]:void 0;f(z,K,Z,b)}}const g=[],d=[],v=[],w=[],B=Array.from(l.keys()).sort();for(const h of B){const u=l.get(h),b=Array.from(u.titles).sort(),_=Array.from(u.values);g.push(h),d.push(b.join(" / ")),v.push(_.join(", "));const m=u.weights.length>0?Math.min(...u.weights):0;w.push(m)}if(e.layerIds=g,e.layerTitles=d,e.layerValues=v,e.layerWeights=w,e.layerTitlesCsv=d.join(", "),e.memberLayerTitles=n,e.memberLayerWeights=i,o.size){const h=Array.from(o.values());if(e.bufferInfos=h,e.hasBuffer=!0,h.length===1){const u=h[0];u.distance!=null&&(e.bufferDistance=u.distance),u.unit!=null&&(e.bufferUnit=u.unit),u.weight!=null&&(e.weight=u.weight)}}else delete e.bufferDistance,delete e.bufferUnit,delete e.weight,delete e.bufferInfos,delete e.hasBuffer;return e}function xt(t,e){return!(t.xmax<e.xmin||t.xmin>e.xmax||t.ymax<e.ymin||t.ymin>e.ymax)}function Mt(t,e){Y(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Ve(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 18V5"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77"}]];Me(t,Se({name:"brain"},()=>r,{get iconNode(){return n},children:(i,o)=>{var s=Q(),l=j(s);xe(l,()=>e.children??Be),$(i,s)},$$slots:{default:!0}})),H()}function Ft(t,e){Y(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Ve(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 5h.01"}],["path",{d:"M3 12h.01"}],["path",{d:"M3 19h.01"}],["path",{d:"M8 5h13"}],["path",{d:"M8 12h13"}],["path",{d:"M8 19h13"}]];Me(t,Se({name:"list"},()=>r,{get iconNode(){return n},children:(i,o)=>{var s=Q(),l=j(s);xe(l,()=>e.children??Be),$(i,s)},$$slots:{default:!0}})),H()}function Gt(t,e){Y(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Ve(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]];Me(t,Se({name:"map"},()=>r,{get iconNode(){return n},children:(i,o)=>{var s=Q(),l=j(s);xe(l,()=>e.children??Be),$(i,s)},$$slots:{default:!0}})),H()}function Nt(t,e){if(!t||!t.map)throw new Error("MapView is not initialized");const r=new $e({title:e,listMode:"show"}),n=new $e({listMode:"hide"});return t.map.add(n),t.on("click",async i=>{if(!t)return;const s=(await t.hitTest(i)).results.find(f=>f.layer===r);if(!s){n.removeAll();return}const l=s.graphic;n.removeAll(),n.add(new q({geometry:l.geometry,symbol:{type:"simple-fill",color:[0,0,0,0],outline:{type:"simple-line",color:[255,255,0,1],width:3}}})),t.popup?.open({features:[l],location:i.mapPoint})}),t.map.add(r),r}async function $t(t){const{view:e,input:r,clipLayer:n,targetLayer:i,symbol:o,clipLayerValueField:s,bufferDistance:l,bufferUnit:f,sourceIds:g}=t;if(l<=0)return console.warn("clipPoints: bufferDistance must be greater than zero."),null;const d=r instanceof q?r.geometry:r;if(!d)return console.warn("clipPoints: no input geometry provided."),null;if(d.type!=="polygon")return console.warn("clipPoints: input geometry is not a polygon."),null;const v=d;if(n instanceof he){const b=n.geometryType;if(b!=="point"&&b!=="multipoint")return console.error("clipPoints: clipLayer must be point or multipoint."),null}const w=[],B=n.title||n.id||"clip-layer";if(s){const b=await Rt(n,v,s,l,f,e);if(!b.length)return console.info("clipPoints: no buffered geometries in clipLayer intersect the polygon for any value."),null;for(const{geometry:_,value:m}of b){if(!be(v,_)){console.error("clipPoints: spatial reference mismatch for clip value:",m);continue}const M=we(_,{clippedByPoints:!0,sourceIds:g,layerTitle:B,valueField:s,value:m,bufferDistance:l,bufferUnit:f},o);ae(i,M,e),w.push(M)}return w.length?(e&&e.goTo(w.map(_=>_.geometry)).catch(_=>console.warn("goTo failed:",_)),w):null}const h=await Et(n,v,l,f,e);if(!h)return console.info("clipPoints: no buffered geometries in clipLayer intersect the polygon."),null;if(!be(v,h))return null;const u=we(h,{clippedByPoints:!0,sourceIds:g,bufferDistance:l,bufferUnit:f},o);return ae(i,u,e),e&&e.goTo(h).catch(b=>console.warn("goTo failed:",b)),w.push(u),w}async function Et(t,e,r,n,i){const o=await Ue(t,e,i);if(!o.length)return null;let s;try{s=We(o,[r],n?{unit:n}:void 0)}catch(f){return console.error("getUnionBufferedClipGeometryFromLayer: buffer failed",f),null}const l=s.filter(f=>!!f&&f.type==="polygon");return l.length?Pe(e,l):null}async function Rt(t,e,r,n,i,o){const s=await ke(t,e,r,o);if(!s.length)return[];const l=new Map;for(const d of s){const v=d.value==null?"__NULL__":String(d.value);let w=l.get(v);w||(w={value:d.value,geometries:[]},l.set(v,w)),w.geometries.push(d.geometry)}const f=[],g=[n];for(const d of l.values()){let v;try{v=We(d.geometries,g,i?{unit:i}:void 0)}catch(h){console.error("getGroupedBufferedClipGeometriesFromLayer: buffer failed for value:",d.value,h);continue}const w=v.filter(h=>!!h&&h.type==="polygon");if(!w.length)continue;const B=Pe(e,w);B&&f.push({geometry:B,value:d.value})}return f}async function Ee(t){const{view:e,input:r,targetLayer:n,bufferDistance:i,bufferUnit:o,symbol:s,sourceIds:l}=t;if(i<=0)return console.warn("createPolygonBuffer: bufferDistance must be greater than zero."),null;const f=r instanceof q?r.geometry:r;if(!f)return console.warn("createPolygonBuffer: no input geometry provided."),null;if(f.type!=="polygon")return console.warn("createPolygonBuffer: input geometry is not a polygon."),null;const g=f,d=st(g,i,o?{unit:o}:void 0);if(!d||d.type!=="polygon")return console.warn("createPolygonBuffer: buffer operation returned no polygon."),null;const v=Ie(d,g);let w;v&&v.type==="polygon"?w=v:(console.warn("createPolygonBuffer: difference operation returned no polygon; using outer buffer instead."),w=d);const B=new q({geometry:w,attributes:{polygonBuffer:!0,sourceIds:l,bufferDistance:i,bufferUnit:o},symbol:s||{type:"simple-fill",color:[0,255,255,.1],outline:{color:[0,255,255,1],width:2}}});return ae(n,B,e),e&&e.goTo(w).catch(h=>console.warn("goTo failed:",h)),B}class Oe{id;constructor(e){this.id=e}}class J extends Oe{weight;buffers;constructor(e,r,n){super(e),this.weight=r,this.buffers=n}}class ve extends Oe{fieldName;constructor(e,r){super(e),this.fieldName=r}}class ge extends ve{fieldValues;constructor(e,r,n){super(e,r),this.fieldValues=n}}class je extends ve{weight;constructor(e,r,n){super(e,r),this.weight=n}}let pe=null;async function Dt(){return pe||(pe={analysisSettings:(await(await fetch(`${lt}/config/apps/ai-where-to-build/config.json`)).json()).analysisSettings.map(n=>Wt(n))},pe)}function Wt(t){if("fieldValues"in t)return new ge(t.id,t.fieldName,t.fieldValues);if("fieldName"in t&&!("fieldValues"in t)){const o=t.weight??1;return new je(t.id,t.fieldName,o)}const e=t,r=e.weight??1,n=e.buffers??[];return new J(e.id,r,n)}var kt=X(`<p>This is the Analysis Tab component. This is where the user and initiate analysis for a polygon or
	area (e.g. Ward).</p> <!>`,1);function Ut(t,e){Y(e,!0);let r=E(null),n=E(null),i=E(null),o=E(null),s=E(null);const l="UK Wards (Boundary Fully Clipped) (2022)";Re(async()=>{N(o,Nt(e.mapView,"Analysis Results Layer"),!0),await f(),g()});async function f(){if(!e.mapView)throw new Error("[analysis-tab] MapView is not initialized");N(r,new Ye,!0),N(n,new He(c(r),new Xe(e.mapView)),!0),N(i,new et(e.mapView,c(n),new Set([l])),!0),console.log("[analysis-tab] Initialized stores",c(r).layerId),await c(n).refreshLayerView(),await c(n).refreshAreas()}function g(){if(!c(r)){console.warn("[analysis-tab] AreaSelectionStore not initialized yet");return}const y=e.mapView.map?.allLayers.find(p=>p.title===l);y?(c(r).setLayerId(y.uid),console.log(`[analysis-tab] Set default area layer to ID: ${y.uid}`)):console.warn("[analysis-tab] Default area layer not found on the map")}function d(y){const p=[];for(const a of y)a instanceof at?p.push(...d(a.layers.toArray())):a instanceof he&&p.push(a);return p}function v(y,p=.3){let a=0;for(let A=0;A<y.length;A++)a=y.charCodeAt(A)+((a<<5)-a);const C=a>>0&255,T=a>>8&255,I=a>>16&255;return[C,T,I,p]}function w(y,p=.3,a=[255,0,0,1],C=2){return{type:"simple-fill",color:v(y,p),outline:{color:a,width:C}}}function B(){return{title:"Clipped region",content:[{type:"custom",creator:y=>{const a=y.graphic.attributes??{},C=a.layerTitles??[],T=a.layerValues??[],I=a.layerWeights??[],A=a.bufferInfos??[],L=[];C.forEach((x,F)=>{const ue=T[F]??"",V=I[F];L.push({layer:x,value:ue,weight:V!=null&&V!==""?String(V):"",isBuffer:A[F]?"Yes":"No",bufferDistance:A[F]&&A[F].distance!=null?`${A[F].distance} ${A[F].unit??""}`.trim():""})});const P=L.some(x=>x.value&&x.value.trim()!==""),G=L.some(x=>x.weight&&x.weight.trim()!==""),le=L.some(x=>x.isBuffer&&x.isBuffer.trim()!==""),te=L.some(x=>x.bufferDistance&&x.bufferDistance.trim()!==""),D=document.createElement("table");D.className="esri-widget__table";const O=document.createElement("tbody"),W=document.createElement("tr"),ce=document.createElement("th");ce.textContent="Layer",W.appendChild(ce);let ne,re,oe,ie;return ce.style.whiteSpace="nowrap",ce.style.wordBreak="normal",P&&(ne=document.createElement("th"),ne.textContent="Value",ne.style.whiteSpace="nowrap",ne.style.wordBreak="normal",W.appendChild(ne)),G&&(re=document.createElement("th"),re.textContent="Weight",re.style.whiteSpace="nowrap",re.style.wordBreak="normal",W.appendChild(re)),le&&(oe=document.createElement("th"),oe.textContent="Is buffer",oe.style.whiteSpace="nowrap",oe.style.wordBreak="normal",W.appendChild(oe)),te&&(ie=document.createElement("th"),ie.textContent="Buffer distance",ie.style.whiteSpace="nowrap",ie.style.wordBreak="normal",W.appendChild(ie)),O.appendChild(W),L.forEach(x=>{const F=document.createElement("tr"),ue=document.createElement("td");if(ue.textContent=x.layer,F.appendChild(ue),P){const V=document.createElement("td");V.textContent=x.value,F.appendChild(V)}if(G){const V=document.createElement("td");V.textContent=x.weight,V.style.whiteSpace="nowrap",V.style.wordBreak="normal",F.appendChild(V)}if(le){const V=document.createElement("td");V.textContent=x.isBuffer,V.style.whiteSpace="nowrap",V.style.wordBreak="normal",F.appendChild(V)}if(te){const V=document.createElement("td");V.textContent=x.bufferDistance,V.style.whiteSpace="nowrap",V.style.wordBreak="normal",F.appendChild(V)}O.appendChild(F)}),D.appendChild(O),D}}]}}function h(){return!e.mapView||!e.mapView.map?(console.warn("[analysis-tab] MapView not initialized yet"),!1):!c(r)||!c(n)||!c(i)?(console.warn("[analysis-tab] Stores not initialized yet"),!1):c(o)?!0:(console.warn("[analysis-tab] Graphic layer not initialized yet"),!1)}function u(){const y=e.mapView.map.findLayerById("19a9760b651-layer-105");return y&&console.log("Parcels Layer:",y.title),y}async function b(y,p,a){const C=await _t({view:e.mapView,input:y,clipLayer:p,clipLayerValueField:a instanceof ve?a.fieldName:void 0,targetLayer:c(o)});if(!C||C.length===0){console.log(`No polygon clipped for layer: ${p.title}`);return}console.log(`Clipped ${C.length} polygons from layer: ${p.title}`);const T=a instanceof J||a instanceof je?a.weight:void 0;for(const I of C){I.attributes.layerTitle=p.title,I.attributes.layerId=p.id,I.attributes.weight=T,I.attributes.layerTitles=[p.title],I.symbol=w(p.id,.3,[255,0,0,1],2);const A=I.attributes.value;I.attributes.weight=T||_(A,a);const L=a instanceof J?a.buffers:m(A,a);for(const P of L)if(P.distance>0){const G=await Ee({view:e.mapView,input:I,targetLayer:c(o),bufferDistance:P.distance,bufferUnit:P.unit});G&&(G.attributes={...I.attributes,polygonBuffer:!0,bufferDistance:P.distance,bufferUnit:P.unit,weight:P.weight},G.symbol=w(`${p.id}-buffer-${P.distance}-${P.unit}`,.2,[0,0,255,1],1))}}}function _(y,p){if(!(p instanceof ge))return;const a=p.fieldValues.find(C=>C.value===y);if(a)return a.weight}function m(y,p){if(!(p instanceof ge))return[];const a=p.fieldValues.find(C=>C.value===y);return a?a.buffers||[]:[]}function S(y){return y instanceof J?y.buffers?.[0]??null:y instanceof ge?y.fieldValues.find(a=>a.buffers&&a.buffers.length)?.buffers?.[0]??null:null}async function M(y,p,a){console.log(`Processing point layer: ${p.title}`);const C=a instanceof ve?a.fieldName:void 0,T=S(a),I=T?.distance??1,A=T?.unit,L=await $t({view:e.mapView,input:y,clipLayer:p,clipLayerValueField:C,bufferDistance:I,bufferUnit:A,targetLayer:c(o)});if(!L||L.length===0){console.log(`No polygon clipped for layer: ${p.title}`);return}console.log(`Clipped ${L.length} polygons from layer: ${p.title}`);for(const P of L){P.attributes??={};const G=P.attributes.value;P.attributes.layerTitle=p.title,P.attributes.layerId=p.id,P.attributes.layerTitles=[p.title],P.attributes.layerValues=G!=null?[String(G)]:P.attributes.layerValues??[],P.attributes.weight=a instanceof J?a.weight:_(G,a),P.symbol=w(p.id,.3,[255,0,0,1],2);const le=a instanceof J?a.buffers:m(G,a);for(const te of le){const{distance:D,unit:O}=te;if(!D||D<=0||T&&T.distance===D&&T.unit===O)continue;const W=await Ee({view:e.mapView,input:P,targetLayer:c(o),bufferDistance:D,bufferUnit:O});W&&(W.attributes={...P.attributes,polygonBuffer:!0,bufferDistance:D,bufferUnit:O,weight:te.weight},W.symbol=w(`${p.id}-buffer-${D}-${O??"sr"}`,.2,[0,0,255,1],1))}console.log("Clipped Polygon:",L)}}function k(y){for(const p of y){const a=typeof p.attributes.totalWeight=="number"?p.attributes.totalWeight:0,C=Math.max(-1,Math.min(1,a));let T;if(C<=0){const I=C+1;T=[Math.round(255*I),0,0,.5]}else{const I=C;T=[Math.round(255*(1-I)),Math.round(255*I),0,.5]}p.symbol={type:"simple-fill",color:T,outline:{color:[0,0,0,1],width:1}},p.popupTemplate=B()}}async function U(){if(!h())return;const y=R();if(y.length===0){console.warn("[analysis-tab] No area selected for analysis");return}if(c(s)===`analyzed-${y.join("-")}`){console.log("[analysis-tab] Analysis already performed for the selected area(s)");return}const p=u();if(!p){console.warn("[analysis-tab] Parcels layer not found");return}const a=await ft(p,y,"OBJECTID",e.mapView);if(!a){console.warn("[analysis-tab] Unable to retrieve polygon for selected parcel IDs");return}const C=await Dt();console.log("AI Where to Build Config:",C);const T=d(e.mapView.map.layers.toArray());for(const A of C.analysisSettings){const L=T.find(P=>P instanceof he&&P.portalItem?.id===A.id);if(!L){console.log(`Layer for setting ID ${A.id} not found on the map`);continue}if(L.id===p.id){console.log(`Skipping parcels layer itself: ${L.title}`);continue}L.geometryType==="polygon"?await b(a,L,A):(L.geometryType==="point"||L.geometryType==="multipoint")&&await M(a,L,A)}console.log("Merging clipped polygons in layer:",c(o).id),ee(a,c(o));const I=Pt(c(o));Z(I),k(I),c(r)?.clearSelectedAreas(),await c(n)?.refreshAreas(),c(n)?.clearSelections(),N(s,`analyzed-${y.join("-")}`)}function ee(y,p){const a=new q({geometry:y.clone(),attributes:{layerTitle:"Base Weight",layerId:"base-weight-layer",layerTitles:["Base Weight"],layerValues:["base"],value:"base",weight:0,clipped:!1,baseWeight:!0},symbol:{type:"simple-fill",color:[128,128,128,.1],outline:{color:[128,128,128,.5],width:1}}});p.add(a)}function Z(y){for(const p of y){const a=p.attributes.memberLayerTitles??[],C=p.attributes.memberLayerWeights??[],T=new Map;for(let A=0;A<a.length;A++){const L=a[A],P=C[A];if(P==null||isNaN(P))continue;const G=T.get(L)??Number.POSITIVE_INFINITY;P<G&&T.set(L,P)}const I=Array.from(T.values()).reduce((A,L)=>A+L,0);if(T.values().find(A=>A<=-1)){p.attributes.totalWeight=-1;continue}p.attributes.totalWeight=I}}function R(){return!c(n)||!c(r)?[]:Array.from(c(r).selectedAreaIds)}var z=kt(),K=ye(j(z),2);De(K,{onclick:U,children:(y,p)=>{qe();var a=Je("Analyze");$(y,a)},$$slots:{default:!0}}),$(t,z),H()}var zt=X("<div><!></div>"),Ot=X('<arcgis-layer-list></arcgis-layer-list> <div class="basemap-container svelte-1q0t0hd"><arcgis-basemap-gallery></arcgis-basemap-gallery></div> <!>',3),jt=X("<arcgis-map></arcgis-map>",2),qt=X('<div class="layout svelte-1q0t0hd"><!> <!></div>');function Tn(t,e){Y(e,!0);let r=E(null),n=E(null),i=E(null),o=E(!1),s=E(null),l=E(!1);const f=[{id:"layers",label:"Layers",icon:Ft},{id:"basemap",label:"Basemap Gallery",icon:Gt},{id:"analysis",label:"Analysis",icon:Mt}];Re(async()=>{await Ce(()=>import("../chunks/QoFPZSeS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117]),import.meta.url),await Ce(()=>import("../chunks/DiSf52yC.js"),__vite__mapDeps([118,119,2,3,120,12,11,121,7,5,4,1,6,8,9,10,18,19,20,21,22,23,24,122,123,17,48,49,36,50,51,52,39,33,30,124,57,43,125,85,32,34,40,41]),import.meta.url),await Ce(()=>import("../chunks/Epqbrrx8.js").then(u=>u.a),__vite__mapDeps([126,18,2,3,19,20,21,22,23,11,24,59,42,36,43,33,30,44,35,32,31,28,34,127,128,124,80,123]),import.meta.url)}),Ze(()=>{!c(n)||!c(i)||(c(n).view=c(i),c(n).listItemCreatedFunction=u=>{const{item:b}=u;b.layer.type!="group"&&(b.panel={content:"legend",open:!0})})});async function g(){N(i,c(r)?.view??null,!0),c(n)&&c(i)&&(c(n).view=c(i)),!c(l)&&(N(l,!0),!(!c(i)||!c(i).map)&&await c(i).when())}function d(u,b){N(o,b,!0),N(s,b?u:null,!0)}var v=qt(),w=Le(v);{var B=u=>{ut(u,{get options(){return f},onToggleItem:d})};Fe(w,u=>{c(i)&&u(B)})}var h=ye(w,2);{const u=_=>{var m=Q(),S=j(m);me(S,()=>tt,(M,k)=>{k(M,{children:(U,ee)=>{var Z=Ot(),R=j(Z);fe(()=>se(R,"hidden",c(s)!=="layers")),Ne(R,a=>N(n,a),()=>c(n));var z=ye(R,2),K=Le(z);Ge(K,1,"basemap-gallery svelte-1q0t0hd"),fe(()=>se(K,"view",c(i))),de(z);var y=ye(z,2);{var p=a=>{var C=zt(),T=Le(C);Ut(T,{get mapView(){return c(i)}}),de(C),fe(()=>C.hidden=c(s)!=="analysis"),$(a,C)};Fe(y,a=>{c(i)&&a(p)})}fe(()=>z.hidden=c(s)!=="basemap"),$(U,Z)},$$slots:{default:!0}})}),$(_,m)},b=_=>{var m=jt();Ge(m,1,"relative h-full w-full"),se(m,"item-id","331ba640fe6c4fa5b4c3d025160c2ec5"),se(m,"center","-2.231774828836059,53.46531847221502"),se(m,"zoom","15"),Ne(m,S=>N(r,S),()=>c(r)),Ke("arcgisViewReadyChange",m,g),$(_,m)};me(h,()=>Qe,(_,m)=>{m(_,{get isOpen(){return c(o)},hideToggleButton:!0,sidebarContent:u,mainContent:b,$$slots:{sidebarContent:!0,mainContent:!0}})})}de(v),$(t,v),H()}export{Tn as component};
