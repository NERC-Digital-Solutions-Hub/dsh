import"../chunks/DsnmJJEf.js";import{o as Ye}from"../chunks/Bzs1IGhx.js";import{aD as P,v as r,a5 as S,aB as U,u as ie,a4 as we,aI as oe,D as H,aC as N,E as k,a as c,G as F,f as L,H as V,ay as q,I as A,J as E,F as Ae,n as Ve,aE as Ie}from"../chunks/CU6wUyX1.js";import{aR as Se,aS as Me,aT as Le,aU as Qe,aV as $e,aW as et,aX as ve,aY as _e,aZ as O,a_ as tt,a$ as rt,b0 as at,b1 as ze,b2 as De,b3 as st}from"../chunks/ByNAQ7iQ.js";import{p as b,i as W,r as B,c as D,s as le}from"../chunks/CjfPyj--.js";import{C as it,f as de,h as xe,j as fe,k as nt,l as Ee,w as Oe,S as ot,m as lt,o as Ue,p as dt,q as ct,r as He,R as ut,s as ce,n as We,b as I,t as te,u as ue,v as vt,x as re,y as ft,z as ht,A as Ze}from"../chunks/B968l6pj.js";import{a as j,d as gt,s as Fe}from"../chunks/CMZp0cv5.js";import{b as bt}from"../chunks/DP0V16Nu.js";import{c as pt}from"../chunks/CXdMk6uD.js";const ne=Ee({component:"tabs",parts:["root","list","trigger","content"]}),he=new it("Tabs.Root");class ke{static create(e){return he.set(new ke(e))}opts;attachment;rovingFocusGroup;#t=U(we([]));get triggerIds(){return r(this.#t)}set triggerIds(e){S(this.#t,e,!0)}valueToTriggerId=new He;valueToContentId=new He;constructor(e){this.opts=e,this.attachment=de(e.ref),this.rovingFocusGroup=new ut({candidateAttr:ne.trigger,rootNode:this.opts.ref,loop:this.opts.loop,orientation:this.opts.orientation})}registerTrigger(e,a){return this.triggerIds.push(e),this.valueToTriggerId.set(a,e),()=>{this.triggerIds=this.triggerIds.filter(n=>n!==e),this.valueToTriggerId.delete(a)}}registerContent(e,a){return this.valueToContentId.set(a,e),()=>{this.valueToContentId.delete(a)}}setValue(e){this.opts.value.current=e}#e=P(()=>({id:this.opts.id.current,"data-orientation":fe(this.opts.orientation.current),[ne.root]:"",...this.attachment}));get props(){return r(this.#e)}set props(e){S(this.#e,e)}}class Te{static create(e){return new Te(e,he.get())}opts;root;attachment;#t=P(()=>this.root.opts.disabled.current);constructor(e,a){this.opts=e,this.root=a,this.attachment=de(e.ref)}#e=P(()=>({id:this.opts.id.current,role:"tablist","aria-orientation":nt(this.root.opts.orientation.current),"data-orientation":fe(this.root.opts.orientation.current),[ne.list]:"","data-disabled":xe(r(this.#t)),...this.attachment}));get props(){return r(this.#e)}set props(e){S(this.#e,e)}}class Pe{static create(e){return new Pe(e,he.get())}opts;root;attachment;#t=U(0);#e=P(()=>this.root.opts.value.current===this.opts.value.current);#r=P(()=>this.opts.disabled.current||this.root.opts.disabled.current);#i=P(()=>this.root.valueToContentId.get(this.opts.value.current));constructor(e,a){this.opts=e,this.root=a,this.attachment=de(e.ref),Oe([()=>this.opts.id.current,()=>this.opts.value.current],([n,o])=>this.root.registerTrigger(n,o)),ie(()=>{this.root.triggerIds.length,r(this.#e)||!this.root.opts.value.current?S(this.#t,0):S(this.#t,-1)}),this.onfocus=this.onfocus.bind(this),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}#a(){this.root.opts.value.current!==this.opts.value.current&&this.root.setValue(this.opts.value.current)}onfocus(e){this.root.opts.activationMode.current!=="automatic"||r(this.#r)||this.#a()}onclick(e){r(this.#r)||this.#a()}onkeydown(e){if(!r(this.#r)){if(e.key===ot||e.key===lt){e.preventDefault(),this.#a();return}this.root.rovingFocusGroup.handleKeydown(this.opts.ref.current,e)}}#s=P(()=>({id:this.opts.id.current,role:"tab","data-state":qe(r(this.#e)),"data-value":this.opts.value.current,"data-orientation":fe(this.root.opts.orientation.current),"data-disabled":xe(r(this.#r)),"aria-selected":dt(r(this.#e)),"aria-controls":r(this.#i),[ne.trigger]:"",disabled:Ue(r(this.#r)),tabindex:r(this.#t),onclick:this.onclick,onfocus:this.onfocus,onkeydown:this.onkeydown,...this.attachment}));get props(){return r(this.#s)}set props(e){S(this.#s,e)}}class Ce{static create(e){return new Ce(e,he.get())}opts;root;attachment;#t=P(()=>this.root.opts.value.current===this.opts.value.current);#e=P(()=>this.root.valueToTriggerId.get(this.opts.value.current));constructor(e,a){this.opts=e,this.root=a,this.attachment=de(e.ref),Oe([()=>this.opts.id.current,()=>this.opts.value.current],([n,o])=>this.root.registerContent(n,o))}#r=P(()=>({id:this.opts.id.current,role:"tabpanel",hidden:ct(!r(this.#t)),tabindex:0,"data-value":this.opts.value.current,"data-state":qe(r(this.#t)),"aria-labelledby":r(this.#e),"data-orientation":fe(this.root.opts.orientation.current),[ne.content]:"",...this.attachment}));get props(){return r(this.#r)}set props(e){S(this.#r,e)}}function qe(h){return h?"active":"inactive"}var mt=L("<div><!></div>");function yt(h,e){const a=oe();H(e,!0);let n=b(e,"id",19,()=>ce(a)),o=b(e,"ref",15,null),g=b(e,"value",15,""),l=b(e,"onValueChange",3,We),d=b(e,"orientation",3,"horizontal"),v=b(e,"loop",3,!0),w=b(e,"activationMode",3,"automatic"),m=b(e,"disabled",3,!1),x=B(e,["$$slots","$$events","$$legacy","id","ref","value","onValueChange","orientation","loop","activationMode","disabled","children","child"]);const s=ke.create({id:I.with(()=>n()),value:I.with(()=>g(),i=>{g(i),l()(i)}),orientation:I.with(()=>d()),loop:I.with(()=>v()),activationMode:I.with(()=>w()),disabled:I.with(()=>m()),ref:I.with(()=>o(),i=>o(i))}),u=P(()=>ue(x,s.props));var p=N(),C=k(p);{var _=i=>{var f=N(),y=k(f);j(y,()=>e.child,()=>({props:r(u)})),c(i,f)},t=i=>{var f=mt();te(f,()=>({...r(u)}));var y=V(f);j(y,()=>e.children??q),A(f),c(i,f)};W(C,i=>{e.child?i(_):i(t,!1)})}c(h,p),F()}var wt=L("<div><!></div>");function _t(h,e){const a=oe();H(e,!0);let n=b(e,"id",19,()=>ce(a)),o=b(e,"ref",15,null),g=B(e,["$$slots","$$events","$$legacy","children","child","id","ref","value"]);const l=Ce.create({value:I.with(()=>e.value),id:I.with(()=>n()),ref:I.with(()=>o(),s=>o(s))}),d=P(()=>ue(g,l.props));var v=N(),w=k(v);{var m=s=>{var u=N(),p=k(u);j(p,()=>e.child,()=>({props:r(d)})),c(s,u)},x=s=>{var u=wt();te(u,()=>({...r(d)}));var p=V(u);j(p,()=>e.children??q),A(u),c(s,u)};W(w,s=>{e.child?s(m):s(x,!1)})}c(h,v),F()}var xt=L("<div><!></div>");function kt(h,e){const a=oe();H(e,!0);let n=b(e,"id",19,()=>ce(a)),o=b(e,"ref",15,null),g=B(e,["$$slots","$$events","$$legacy","child","children","id","ref"]);const l=Te.create({id:I.with(()=>n()),ref:I.with(()=>o(),s=>o(s))}),d=P(()=>ue(g,l.props));var v=N(),w=k(v);{var m=s=>{var u=N(),p=k(u);j(p,()=>e.child,()=>({props:r(d)})),c(s,u)},x=s=>{var u=xt();te(u,()=>({...r(d)}));var p=V(u);j(p,()=>e.children??q),A(u),c(s,u)};W(w,s=>{e.child?s(m):s(x,!1)})}c(h,v),F()}var Tt=L("<button><!></button>");function Pt(h,e){const a=oe();H(e,!0);let n=b(e,"disabled",3,!1),o=b(e,"id",19,()=>ce(a)),g=b(e,"type",3,"button"),l=b(e,"ref",15,null),d=B(e,["$$slots","$$events","$$legacy","child","children","disabled","id","type","value","ref"]);const v=Pe.create({id:I.with(()=>o()),disabled:I.with(()=>n()??!1),value:I.with(()=>e.value),ref:I.with(()=>l(),p=>l(p))}),w=P(()=>ue(d,v.props,{type:g()}));var m=N(),x=k(m);{var s=p=>{var C=N(),_=k(C);j(_,()=>e.child,()=>({props:r(w)})),c(p,C)},u=p=>{var C=Tt();te(C,()=>({...r(w)}));var _=V(C);j(_,()=>e.children??q),A(C),c(p,C)};W(x,p=>{e.child?p(s):p(u,!1)})}c(h,m),F()}const Ct=Ee({component:"toggle",parts:["root"]});class Ne{static create(e){return new Ne(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=de(this.opts.ref),this.onclick=this.onclick.bind(this)}#t(){this.opts.disabled.current||(this.opts.pressed.current=!this.opts.pressed.current)}onclick(e){this.opts.disabled.current||this.#t()}#e=P(()=>({pressed:this.opts.pressed.current}));get snippetProps(){return r(this.#e)}set snippetProps(e){S(this.#e,e)}#r=P(()=>({[Ct.root]:"",id:this.opts.id.current,"data-disabled":xe(this.opts.disabled.current),"aria-pressed":vt(this.opts.pressed.current),"data-state":Nt(this.opts.pressed.current),disabled:Ue(this.opts.disabled.current),onclick:this.onclick,...this.attachment}));get props(){return r(this.#r)}set props(e){S(this.#r,e)}}function Nt(h){return h?"on":"off"}var At=L("<button><!></button>");function Vt(h,e){const a=oe();H(e,!0);let n=b(e,"ref",15,null),o=b(e,"id",19,()=>ce(a)),g=b(e,"pressed",15,!1),l=b(e,"onPressedChange",3,We),d=b(e,"disabled",3,!1),v=b(e,"type",3,"button"),w=B(e,["$$slots","$$events","$$legacy","ref","id","pressed","onPressedChange","disabled","type","children","child"]);const m=Ne.create({pressed:I.with(()=>g(),_=>{g(_),l()(_)}),disabled:I.with(()=>d()??!1),id:I.with(()=>o()),ref:I.with(()=>n(),_=>n(_))}),x=P(()=>ue(w,m.props,{type:v()}));var s=N(),u=k(s);{var p=_=>{var t=N(),i=k(t);{let f=P(()=>({props:r(x),...m.snippetProps}));j(i,()=>e.child,()=>r(f))}c(_,t)},C=_=>{var t=At();te(t,()=>({...r(x)}));var i=V(t);j(i,()=>e.children??q,()=>m.snippetProps),A(t),c(_,t)};W(u,_=>{e.child?_(p):_(C,!1)})}c(h,s),F()}var It=L("<div><!></div>");function Re(h,e){H(e,!0);let a=b(e,"ref",15,null),n=B(e,["$$slots","$$events","$$legacy","ref","class","children"]);var o=It();te(o,l=>({"data-slot":"card-content",class:l,...n}),[()=>re("px-6",e.class)]);var g=V(o);j(g,()=>e.children??q),A(o),bt(o,l=>a(l),()=>a()),c(h,o),F()}function St(h,e){H(e,!0);let a=b(e,"ref",15,null),n=b(e,"value",15,""),o=B(e,["$$slots","$$events","$$legacy","ref","value","class"]);var g=N(),l=k(g);{let d=P(()=>re("flex flex-col gap-2",e.class));D(l,()=>yt,(v,w)=>{w(v,le({"data-slot":"tabs",get class(){return r(d)}},()=>o,{get ref(){return a()},set ref(m){a(m)},get value(){return n()},set value(m){n(m)}}))})}c(h,g),F()}function je(h,e){H(e,!0);let a=b(e,"ref",15,null),n=B(e,["$$slots","$$events","$$legacy","ref","class"]);var o=N(),g=k(o);{let l=P(()=>re("flex-1 outline-none",e.class));D(g,()=>_t,(d,v)=>{v(d,le({"data-slot":"tabs-content",get class(){return r(l)}},()=>n,{get ref(){return a()},set ref(w){a(w)}}))})}c(h,o),F()}function Mt(h,e){H(e,!0);let a=b(e,"ref",15,null),n=B(e,["$$slots","$$events","$$legacy","ref","class"]);var o=N(),g=k(o);{let l=P(()=>re("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e.class));D(g,()=>kt,(d,v)=>{v(d,le({"data-slot":"tabs-list",get class(){return r(l)}},()=>n,{get ref(){return a()},set ref(w){a(w)}}))})}c(h,o),F()}function Ge(h,e){H(e,!0);let a=b(e,"ref",15,null),n=B(e,["$$slots","$$events","$$legacy","ref","class"]);var o=N(),g=k(o);{let l=P(()=>re("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 whitespace-nowrap rounded-md border border-transparent px-2 py-1 text-sm font-medium transition-[color,box-shadow] focus-visible:outline-1 focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",e.class));D(g,()=>Pt,(d,v)=>{v(d,le({"data-slot":"tabs-trigger",get class(){return r(l)}},()=>n,{get ref(){return a()},set ref(w){a(w)}}))})}c(h,o),F()}const Lt=pt({base:"hover:bg-muted hover:text-muted-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium outline-none transition-[color,box-shadow] focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",variants:{variant:{default:"bg-transparent",outline:"border-input shadow-xs hover:bg-accent hover:text-accent-foreground border bg-transparent"},size:{default:"h-9 min-w-9 px-2",sm:"h-8 min-w-8 px-1.5",lg:"h-10 min-w-10 px-2.5"}},defaultVariants:{variant:"default",size:"default"}});function zt(h,e){H(e,!0);let a=b(e,"ref",15,null),n=b(e,"pressed",15,!1),o=b(e,"size",3,"default"),g=b(e,"variant",3,"default"),l=B(e,["$$slots","$$events","$$legacy","ref","pressed","class","size","variant"]);var d=N(),v=k(d);{let w=P(()=>re(Lt({variant:g(),size:o()}),e.class));D(v,()=>Vt,(m,x)=>{x(m,le({"data-slot":"toggle",get class(){return r(w)}},()=>l,{get ref(){return a()},set ref(s){a(s)},get pressed(){return n()},set pressed(s){n(s)}}))})}c(h,d),F()}var Dt=L('<div class="flex w-full !items-center !justify-between gap-2"><div class="pointer-events-none !flex min-w-0 flex-1 !items-center gap-1"><span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div>'),Ht=L('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function Be(h,e){const a=`calc(100% - ${e.depth*1}rem)`;var n=N(),o=k(n);{var g=d=>{zt(d,{get pressed(){return e.pressed},class:"mb-1 !h-auto !min-h-9 cursor-pointer rounded-md border border-border/30 bg-card/50 p-2 text-left !whitespace-normal transition-colors hover:bg-card/70 data-[state=on]:!bg-accent data-[state=on]:!text-accent-foreground data-[state=on]:hover:!bg-accent data-[state=on]:hover:!text-accent-foreground",variant:"outline",get style(){return`width: ${a};`},get onPressedChange(){return e.onclick},children:(v,w)=>{var m=Dt(),x=V(m),s=V(x),u=V(s);Se(u,()=>e.icon),A(s);var p=E(s,2),C=V(p,!0);A(p),A(x);var _=E(x,2);j(_,()=>e.children??q),A(m),Ae(()=>Fe(C,e.name)),c(v,m)},$$slots:{default:!0}})},l=d=>{var v=Ht();v.__click=function(..._){e.onclick?.apply(this,_)};var w=V(v),m=V(w),x=V(m),s=V(x);Se(s,()=>e.icon),A(x);var u=E(x,2),p=V(u,!0);A(u),A(m);var C=E(m,2);j(C,()=>e.children??q),A(w),A(v),Ae(()=>{ft(v,1,`mb-1 cursor-pointer rounded-md border border-border/30 p-2 text-left text-sm font-medium transition-colors hover:bg-card/70 ${e.pressed?"bg-accent text-accent-foreground":"bg-card/50"}`),ht(v,`width: ${a};`),Fe(p,e.name)}),c(d,v)};W(o,d=>{e.isTogglable?d(g):d(l,!1)})}c(h,n)}gt(["click"]);const Ft=(h,e,a,n)=>e?Rt(h,a):a?n?'<path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>':'<path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>':'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14,2 14,8 20,8"/>',Rt=(h,e)=>{switch(h.type){case"group":return Me;case"feature":return Le;case"tile":return Qe;default:return e?Me:Le}};var jt=L('<div class="ml-4 w-full"></div>'),Gt=L('<div class="w-full"><!> <!></div>');function Je(h,e){H(e,!0);const a=b(e,"depth",3,0),n=b(e,"useLayerTypeIcon",3,!1),o=!!e.node.layer&&"visible"in e.node.layer,g=!!(e.node.children&&e.node.children.length);let l=U(!1),d=U(!1),v=U("");function w(){return!e.node.children||!e.getNodeVisibility?!1:e.node.children.some(t=>{const i=e.getNodeVisibility(t.id);return i!==void 0?i:t.layer.visible})}ie(()=>{if(e.node){if(g)S(d,w(),!0);else{const t=e.getNodeVisibility?e.getNodeVisibility(e.node.id):void 0;S(d,t!==void 0?t:e.node.layer.visible,!0)}S(v,Ft(e.node.layer,n(),g,r(l)),!0)}});function m(){!o||!e.onNodeVisibilityChange||g||(S(d,!r(d)),e.onNodeVisibilityChange(e.node,r(d)))}function x(){g||m(),e.onNodeClick?.(e.node)}function s(){S(l,!r(l)),e.onNodeClick?.(e.node)}var u=N(),p=k(u);{var C=t=>{var i=Gt(),f=V(i);Be(f,{isTogglable:!1,get pressed(){return r(d)},get icon(){return r(v)},get name(){return e.node.name},get depth(){return a()},onclick:s});var y=E(f,2);{var T=G=>{var M=jt();Ze(M,21,()=>e.node.children??[],z=>z.id,(z,R)=>{{let $=P(()=>a()+1);Je(z,{get node(){return r(R)},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get getNodeVisibility(){return e.getNodeVisibility},get depth(){return r($)},get useLayerTypeIcon(){return n()}})}}),A(M),c(G,M)};W(y,G=>{r(l)&&G(T)})}A(i),c(t,i)},_=t=>{Be(t,{isTogglable:!0,get pressed(){return r(d)},get icon(){return r(v)},get name(){return e.node.name},get depth(){return a()},onclick:x})};W(p,t=>{g?t(C):t(_,!1)})}c(h,u),F()}var Bt=L("<!> <!>",1);function Et(h,e){H(e,!0);const a=b(e,"webMap",3,null),n=b(e,"treeviewConfig",3,null);let o=U(we([]));const g=P(()=>{const t=new Map;function i(f){for(const y of f)t.set(y.id,y),y.children&&y.children.length&&i(y.children)}return i(r(o)),t});let l=U(we(new Map));ie(()=>{if(!a()){S(o,[],!0);return}(async()=>{await a().when();const i=await v(a());S(o,i,!0),d(i)})()});function d(t){const i=new Map;function f(y){for(const T of y)T.layer.visible=!1,i.set(T.id,!1),T.children&&T.children.length&&f(T.children)}f(t),S(l,i,!0)}async function v(t){const i=[];for(const y of t.layers.toArray())i.push(await w(y));return n()?n().map(y=>i.find(T=>T.name===y.name)).filter(y=>y!==void 0):i}async function w(t){const i={id:t.uid,name:t.title,layer:t,children:[]};if(t.type==="group"){const f=t;return i.children=await Promise.all(f.layers.toArray().map(y=>w(y))),i}return(t.type==="map-image"||t.type==="wms")&&t.sublayers&&t.sublayers.length>0&&(i.children=await m(t.sublayers)),i}async function m(t){const i=[];for(const f of t.toArray())i.push(await x(f));return i}async function x(t){const i={id:t.uid,name:t.title,layer:t,children:[]};return t.sublayers&&t.sublayers.length&&(i.children=await m(t.sublayers)),i}function s(t,i){if(!t||!t.layer||!("visible"in t.layer))return;for(const[y]of r(l)){if(!r(l).get(y))continue;r(l).set(y,!1);const G=r(g).get(y);console.log("currentNode",ve(G)),console.log("key",y),G&&(G.layer.visible=!1)}t.layer.visible=i,r(l).set(t.id,i),console.log("node.layer.title",t.layer.title),_e.success(`'${t.layer.title}' Selected`);const f=t.layer.parent;if(f&&f.type==="group"){let y=function(M){if(M.type!=="group")return;const z=M;!z.visible&&z.layers.some($=>$.visible)&&(z.visible=!0,r(l).set(z.uid,!0));const R=z.parent;R&&R.type==="group"&&y(R)},T=!1;for(const M of f.layers)if(M.visible){T=!0;break}T&&i&&(f.visible=T,r(l).set(f.uid,T),y(f)),(r(l).get(f.uid)??f.visible)!==T&&!T&&(f.visible=T,r(l).set(f.uid,T))}S(l,new Map(r(l)),!0)}function u(t){return r(l).get(t)}var p=Bt(),C=k(p);$e(C,{});var _=E(C,2);D(_,()=>et,(t,i)=>{i(t,{children:(f,y)=>{var T=N(),G=k(T);Ze(G,17,()=>r(o),M=>M.id,(M,z)=>{Je(M,{get node(){return r(z)},onNodeClick:R=>console.log("clicked",ve(R)),onNodeVisibilityChange:s,getNodeVisibility:u,depth:0,useLayerTypeIcon:!0})}),c(f,T)},$$slots:{default:!0}})}),c(h,p),F()}function Ot(h,e){H(e,!0),ie(()=>{if(!O.lastAddedHandle)return;(async()=>{if(O.lastAddedHandle===null)return;const n=await O.getAreaNamesById([O.lastAddedHandle.id]);_e.success(`Area added: ${n?.[0]}`)})()}),ie(()=>{if(!O.lastRemovedHandle)return;(async()=>{if(O.lastRemovedHandle===null)return;const n=await O.getAreaNamesById([O.lastRemovedHandle.id]);_e.success(`Area removed: ${n?.[0]}`)})()}),F()}var Ut=L("<!> <!>",1),Wt=L('<div class="min-w-0 space-y-2 overflow-hidden p-4"><!></div>'),Zt=L('<div class="min-w-0 space-y-2 overflow-hidden p-4"><!></div>'),qt=L("<!> <!> <!>",1),Jt=L('<div class="flex w-120 min-w-0 flex-col gap-6"><!></div>'),Kt=L("<p>Loading map...</p>"),Xt=L('<!> <div class="map-section svelte-1xwk4vv"><!></div>',1);function nr(h,e){H(e,!0);const a=s=>{var u=Jt(),p=V(u);D(p,()=>St,(C,_)=>{_(C,{value:"selection-areas",class:"w-full",children:(t,i)=>{var f=qt(),y=k(f);D(y,()=>Mt,(M,z)=>{z(M,{children:(R,$)=>{var Z=Ut(),ee=k(Z);D(ee,()=>Ge,(J,K)=>{K(J,{value:"selection-areas",children:(se,X)=>{Ve();var Y=Ie("Selection Areas");c(se,Y)},$$slots:{default:!0}})});var ae=E(ee,2);D(ae,()=>Ge,(J,K)=>{K(J,{value:"data",children:(se,X)=>{Ve();var Y=Ie("Layers");c(se,Y)},$$slots:{default:!0}})}),c(R,Z)},$$slots:{default:!0}})});var T=E(y,2);D(T,()=>je,(M,z)=>{z(M,{value:"selection-areas",class:"w-full",children:(R,$)=>{var Z=N(),ee=k(Z);D(ee,()=>ze,(ae,J)=>{J(ae,{class:"w-full overflow-hidden",children:(K,se)=>{var X=N(),Y=k(X);D(Y,()=>Re,(ge,be)=>{be(ge,{class:"card-content overflow-hidden p-0",children:(pe,Ke)=>{De(pe,{class:"h-[300px] w-full",children:(me,Xe)=>{var Q=Wt(),ye=V(Q);Et(ye,{get webMap(){return n.data},get treeviewConfig(){return r(o)}}),A(Q),c(me,Q)},$$slots:{default:!0}})},$$slots:{default:!0}})}),c(K,X)},$$slots:{default:!0}})}),c(R,Z)},$$slots:{default:!0}})});var G=E(T,2);D(G,()=>je,(M,z)=>{z(M,{value:"data",class:"w-full",children:(R,$)=>{var Z=N(),ee=k(Z);D(ee,()=>ze,(ae,J)=>{J(ae,{class:"w-full overflow-hidden",children:(K,se)=>{var X=N(),Y=k(X);D(Y,()=>Re,(ge,be)=>{be(ge,{class:"card-content overflow-hidden p-0",children:(pe,Ke)=>{De(pe,{class:"h-[300px] w-full",children:(me,Xe)=>{var Q=Zt(),ye=V(Q);st(ye,{get webMap(){return n.data},get treeviewConfig(){return r(g)}}),A(Q),c(me,Q)},$$slots:{default:!0}})},$$slots:{default:!0}})}),c(K,X)},$$slots:{default:!0}})}),c(R,Z)},$$slots:{default:!0}})}),c(t,f)},$$slots:{default:!0}})}),A(u),c(s,u)},n=new rt;let o=U(null),g=U(null);Ye(async()=>{const s=await tt(),u=s.portalUrl,p=s.portalItemId,C=s.proxy;S(o,s.treeviewSelectionAreasConfig,!0),S(g,s.treeviewDataConfig||null,!0),O.setLayerNameFields(s.selectionLayersNameFields||[]),console.log("Selection Layers:",ve(r(o))),await n.initializeAsync({portalUrl:u,itemId:p||"",proxy:C}),console.log("WebMap loaded",ve(n.data))});var l=Xt(),d=k(l);Ot(d,{});var v=E(d,2),w=V(v);{var m=s=>{at(s,{get webMap(){return n.data},panelPosition:"top-left",menuPosition:"top-right",get panel(){return a}})},x=s=>{var u=Kt();c(s,u)};W(w,s=>{n.data?s(m):s(x,!1)})}A(v),c(h,l),F()}export{nr as component};
