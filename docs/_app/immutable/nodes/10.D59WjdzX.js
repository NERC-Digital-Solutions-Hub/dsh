const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CSVIPV-Z.js","../chunks/DUlE1Kon.js","../chunks/BFGjv385.js","../chunks/DSdBzmdi.js","../chunks/DxH_hBwP.js","../chunks/PPVm8Dsz.js","../chunks/CdqyOKuv.js","../chunks/DfRz3K_A.js","../chunks/Bm7caEBo.js","../chunks/DisPfFm5.js","../chunks/BzQhUrN8.js","../chunks/Cc17QD5h.js","../chunks/uh6gjmpK.js","../chunks/Cd67kGb1.js","../chunks/Bu8LbX79.js","../chunks/DcH38EyK.js","../chunks/B8nonhNC.js","../chunks/BBa5Ksby.js","../chunks/zBqsFMnn.js","../chunks/CaqnSMi6.js","../chunks/sCcXte38.js","../chunks/BI67_pHU.js","../chunks/Cp_8tW2x.js","../chunks/CQjNUrwR.js","../chunks/BEA_VxVb.js","../chunks/Ci6C1k20.js","../chunks/bnayRBMH.js","../chunks/BOKUTFyJ.js","../chunks/BXAeIeBi.js","../chunks/CD2g8Juu.js","../chunks/Oe6SV2kF.js","../chunks/ikZjGqs5.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/CFQCfeFO.js","../chunks/B1v7-87c.js","../chunks/CEVkfTgd.js","../chunks/J6jWJpvs.js","../chunks/BODnff4R.js","../chunks/Djp3mnm5.js","../chunks/CjadiZf0.js","../chunks/DjkR0zxu.js","../chunks/Br8rUiBs.js","../chunks/2ISwu1zN.js","../chunks/B87vTgcy.js","../chunks/D2Yxuq6P.js","../chunks/DD9DYTwn.js","../chunks/sd8OvKRi.js","../chunks/DmnoE05D.js","../chunks/Bui_4lHz.js","../chunks/DeckVo8k.js","../chunks/iG1wnc6C.js","../chunks/CgV2orsG.js","../chunks/CnalmBq0.js","../chunks/BrTgCvRV.js","../chunks/Ceg41VYx.js","../chunks/DvWg7eaT.js","../chunks/BJXfqnjN.js","../chunks/D14Jvju_.js","../chunks/D-57UJtx.js","../chunks/CAPEj8Cx.js","../chunks/CVwTD0fV.js","../chunks/D0NQgKcK.js","../chunks/b_fk785i.js","../chunks/DPJXGPFY.js","../chunks/C-CJOyzY.js","../chunks/BP4OB8lT.js","../chunks/q_b6UJoq.js","../chunks/sjfz1WYE.js","../chunks/CQ1KD0MB.js","../chunks/D5jpRriJ.js","../chunks/DvWyKjN_.js","../chunks/CSXZNpHb.js","../chunks/Bz2ALHBJ.js","../chunks/lWokueJ2.js","../chunks/DQecCNGY.js","../chunks/B4hi1Jh1.js","../chunks/dARmBYlp.js","../chunks/Bv7AoMPg.js","../chunks/CQzCk35G.js","../chunks/CzSz02z9.js","../chunks/VQkRg7Q-.js","../chunks/dJH6k6UL.js","../chunks/BIWwStHs.js","../chunks/DgIqTRow.js","../chunks/ClB7vY8t.js","../chunks/B57vubiS.js","../chunks/DK7tu6nz.js","../chunks/FvPJly2c.js","../chunks/CprQ0-zm.js","../chunks/Y8-7d-DN.js","../chunks/D4JmvjcN.js","../chunks/BvmwS9zW.js","../chunks/-iykUG6w.js","../chunks/l0ueOKN7.js","../chunks/CNZDyR7Q.js","../chunks/R1glNAcQ.js","../chunks/B3G-PwAA.js","../chunks/DuwZIA3o.js","../chunks/C3-hxTuw.js","../chunks/WBIG3CDM.js","../chunks/Cn30EQ8i.js","../chunks/C9SoQ3a0.js","../chunks/BKtwV4GZ.js","../chunks/iNvouxpq.js","../chunks/BA8mPeve.js","../chunks/CEPXXbfq.js","../chunks/B0By0VWJ.js","../chunks/BB9Oo-BD.js","../chunks/GKolV7NZ.js","../chunks/BAB5GhQ5.js","../chunks/CPc8fHiW.js","../chunks/BHFMIzj3.js","../chunks/CAnm2fw-.js","../chunks/SjkvCP0N.js","../chunks/ddR77hBF.js","../chunks/Df2jNZk7.js","../chunks/6Q854sDJ.js","../chunks/DeP0P-5x.js","../chunks/C9yIVy96.js","../chunks/DhzudQro.js","../chunks/B7DiT1Pd.js","../chunks/I_ue-w2G.js","../chunks/CGpFc7sv.js","../chunks/BaN4dDqR.js","../chunks/Cn1vmhQf.js","../chunks/DC4T6Ptu.js","../chunks/n__Nwz3z.js","../chunks/C9eBls0H.js","../chunks/Cp0qNGcE.js","../chunks/DjcuonZY.js","../chunks/Ce6-sqL1.js","../chunks/Cgc_BHpn.js","../chunks/XaXpG9zZ.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/BQKFBo9G.js","../chunks/BELp7PG8.js","../chunks/DPb6J-GU.js","../chunks/C8qJNYv1.js","../chunks/DeDrvwF9.js","../chunks/CFIHAfGj.js","../chunks/DoyMBUIC.js","../chunks/D9V7wSQz.js","../chunks/D2N4Kgi6.js","../chunks/DyrAxq_O.js","../chunks/BNEYiyjh.js","../chunks/CUxkSqAk.js","../chunks/2MGmNpsK.js","../chunks/BjSGBFKY.js","../chunks/DvKU1K2H.js","../chunks/BcBJ9TCl.js","../chunks/B_vJGzBB.js","../chunks/u5gByyAh.js","../chunks/DIuFmtHG.js","../chunks/BuGjRqRb.js","../chunks/CaYZrGFV.js","../chunks/CyzFLg49.js","../chunks/DjHAVuYa.js","../chunks/B3o8ME4Y.js","../chunks/BcFnCN9v.js","../chunks/BT212Icy.js","../assets/jsxFactory.CQED0rIl.css","../chunks/BfTDt07v.js","../chunks/B_F2oaks.js","../chunks/CHFp6N2U.js","../chunks/Cgb6qxNH.js","../chunks/7KSGTDwA.js","../chunks/DWQ4DDTW.js","../chunks/Bzb85Au4.js","../chunks/CaVKkSa6.js","../chunks/CqhmP5Wf.js","../chunks/BHDA5-eH.js","../chunks/B1N-tmtC.js","../chunks/DPp84Xbz.js","../chunks/DX9O6NLU.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/Bxxl7NsE.js","../chunks/OMM7yKVB.js","../chunks/DQOO6RKE.js","../chunks/CckC_upx.js","../chunks/Bi6C4OG6.js","../chunks/CXuogR47.js","../chunks/BTFiZ01f.js","../chunks/D-YQ4CHs.js","../chunks/ljivFxcH.js","../chunks/C_CdZhHo.js","../chunks/gqIXS9_O.js","../chunks/BQBvadb7.js","../chunks/CKhDoJii.js","../chunks/Caulfaw_.js","../chunks/BAtjbRqK.js","../chunks/BT3_6vQX.js","../chunks/DKzVzLpH.js","../chunks/BEQnBRaB.js","../chunks/BvOub3JO.js","../chunks/CWGl2bYv.js","../chunks/Ca-7ty7r.js","../chunks/DndJXGKg.js","../chunks/ypvuBaub.js","../chunks/C2g4lrCg.js","../chunks/CZw_cnq0.js","../chunks/D71z0FvY.js","../chunks/Bkx2kNjV.js","../chunks/B2xel-Uw.js","../chunks/BYhdBRWK.js","../chunks/8WtPGj6h.js","../chunks/CG7ZQ6BV.js","../chunks/ypcU6u8y.js","../chunks/DUowVffz.js","../chunks/BvER9tXK.js","../chunks/BiXJFJDW.js","../chunks/n_VqDs8R.js","../chunks/D5J0HRgs.js","../chunks/Bw68hAdJ.js","../chunks/BPTNpVpY.js","../chunks/C2y1nKdd.js","../chunks/CUzevAry.js","../chunks/C8zGwbjb.js","../chunks/DYadzJtd.js","../chunks/BN2vyTX-.js","../chunks/CxFjfwe1.js","../chunks/Cbfyo8tL.js","../chunks/DI5QB4t2.js","../chunks/DhFVmk4E.js","../chunks/D6DjEsAH.js","../chunks/dCrS7Wqq.js","../assets/component-utils.R4SXog4D.css","../chunks/CF0sTZpg.js","../chunks/BfsPW2bh.js","../chunks/GOizrh0l.js","../chunks/Be2V6wEE.js","../chunks/Dm4tN6Na.js","../chunks/B8nunW49.js","../chunks/DgYAzkgC.js","../chunks/HTOW8iPe.js","../chunks/AD2GcA0r.js","../chunks/C5IPdfsw.js","../chunks/CkkHWuE3.js","../chunks/DuIgqnlY.js","../chunks/C1_AgMSu.js","../chunks/DaQyK3nQ.js","../chunks/CRrk3Hur.js"])))=>i.map(i=>d[i]);
import{_ as xe}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as Xe,a as lt}from"../chunks/DFUKILGv.js";import{f as g,p as ie,c as b,n as it,r as P,a as ue,g as e,aG as v,ar as a,a8 as j,u as L,X as be,U as N,av as St,o as Se,aZ as Lt,a_ as kt,aM as Et}from"../chunks/C1YmX2UH.js";import{c as E,a as u,f as h,t as Ae}from"../chunks/BMeCtLyR.js";import{l as Rt,s as Pe,p as T,r as Ze,i as R}from"../chunks/MYJGKh80.js";import{b as De}from"../chunks/DHTNoGoN.js";import{s as Q}from"../chunks/DfAHVaxr.js";import{s as ut,e as Qe,i as zt}from"../chunks/P1xUTngh.js";import{c as k}from"../chunks/CpUudvot.js";import{g as nt}from"../chunks/CWKS71Yf.js";import{a as Dt,s as Ft,b as Ot,d as Ut}from"../chunks/CeBw7cM3.js";import{I as jt,s as Wt,e as Nt,f as Tt,S as ot,g as dt,h as ct,i as ft}from"../chunks/CwUP6mZe.js";import{c as Ye}from"../chunks/c5jJKWzo.js";import"../chunks/69_IOA4Y.js";import{C as Kt}from"../chunks/CVwzUQOY.js";import{A as Ht,a as Gt,b as Bt}from"../chunks/kclYbeaK.js";import{S as pt}from"../chunks/FxWU69XT.js";import{B as qt}from"../chunks/B63z5rX-.js";import{I as Jt}from"../chunks/B9RZHzvF.js";import{s as st}from"../chunks/BFGjv385.js";import{p as Qt}from"../chunks/DfRz3K_A.js";import{j as Xt}from"../chunks/zBqsFMnn.js";import{a as Zt,b as Yt}from"../chunks/GxuqgV8u.js";function er(y){return(Zt||Yt)+y}function tr(y,l){const i=Rt(l,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const f=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]];jt(y,Pe({name:"command"},()=>i,{get iconNode(){return f},children:(p,C)=>{var r=E(),_=g(r);Wt(_,l,"default",{}),u(p,r)},$$slots:{default:!0}}))}var rr=h("<span><!></span>");function ar(y,l){ie(l,!0);let i=T(l,"ref",15,null),f=Ze(l,["$$slots","$$events","$$legacy","ref","class","children"]);var p=rr();Dt(p,r=>({"data-slot":"command-shortcut",class:r,...f}),[()=>Ye("text-muted-foreground ml-auto text-xs tracking-widest",l.class)]);var C=b(p);ut(C,()=>l.children??it),P(p),De(p,r=>i(r),()=>i()),u(y,p),ue()}function nr(y,l){ie(l,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let i=Ze(l,["$$slots","$$events","$$legacy"]);const f=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Jt(y,Pe({name:"arrow-left"},()=>i,{get iconNode(){return f},children:(p,C)=>{var r=E(),_=g(r);ut(_,()=>l.children??it),u(p,r)},$$slots:{default:!0}})),ue()}var or=h('<div class="view svelte-1s3dmqi"></div>');function sr(y,l){ie(l,!0);const i=T(l,"mapView",7);let f=v(null);Xe(()=>{i().container=e(f)});var p=or();De(p,C=>a(f,C),()=>e(f)),u(y,p),ue()}class lr{#r=v(null);#e=v(!1);#t=v(null);async fetchWebMaps(l){a(this.#e,!0),a(this.#t,null);try{console.log("[useFetchWebMaps] Fetching web maps from URL:",l);const i=await fetch(l);if(!i.ok)throw new Error(`Failed to fetch web maps: ${i.status} ${i.statusText}`);const f=await i.json();a(this.#r,f,!0)}catch(i){a(this.#t,i,!0)}finally{a(this.#e,!1)}}get response(){return e(this.#r)}get isLoading(){return e(this.#e)}get error(){return e(this.#t)}}var ir=h('<span class="m-0 ml-[-5px] inline-flex max-w-[10rem] items-center overflow-hidden rounded border border-border px-1 py-0.5 text-xs font-medium text-ellipsis whitespace-nowrap text-muted-foreground"> </span> <span aria-hidden="true" class="h-5 w-px bg-border"></span>',1),ur=h('<div class="flex h-9 items-center gap-2 border-b pl-2" data-slot="command-input-wrapper"><span class="flex h-full min-w-[1.25rem] shrink-0 items-center justify-center text-muted-foreground"><!></span> <!> <!></div>');function dr(y,l){ie(l,!0);let i=T(l,"ref",15,null),f=T(l,"value",15,""),p=T(l,"iconProps",19,()=>({})),C=Ze(l,["$$slots","$$events","$$legacy","ref","class","value","icon","iconProps","commandId"]);var r=ur(),_=b(r),z=b(_);{var x=m=>{const F=L(()=>l.icon);var c=E(),n=g(c);k(n,()=>e(F),(d,w)=>{w(d,Pe(p))}),u(m,c)},I=m=>{tr(m,{class:"size-4 opacity-50"})};R(z,m=>{l.icon?m(x):m(I,!1)})}P(_);var M=j(_,2);{var O=m=>{var F=ir(),c=g(F),n=b(c,!0);P(c),be(2),N(()=>{Ft(c,"title",l.commandId),Q(n,l.commandId)}),u(m,F)};R(M,m=>{l.commandId&&m(O)})}var $=j(M,2);{let m=L(()=>Ye("flex h-10 flex-1 rounded-md bg-transparent py-3 text-sm outline-hidden placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",l.class));k($,()=>Nt,(F,c)=>{c(F,Pe({"data-slot":"command-input",get class(){return e(m)}},()=>C,{get ref(){return i()},set ref(n){i(n)},get value(){return f()},set value(n){f(n)}}))})}P(r),u(y,r),ue()}function cr(y,l){ie(l,!0);const i=T(l,"disabled",3,!1);qt(y,{class:"m-0 flex size-7 shrink-0 items-center justify-center rounded-md border-none bg-transparent p-0 text-muted-foreground opacity-50 shadow-none transition hover:bg-transparent hover:text-accent-foreground focus:outline-none focus-visible:border-transparent focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none active:ring-0 active:outline-none disabled:pointer-events-none disabled:opacity-50 has-[>svg]:px-0",onclick:()=>{i()||l.onPress?.()},"aria-label":"Return to command search",get disabled(){return i()},children:(f,p)=>{{let C=L(()=>`size-4 ${l.class}`.trim());nr(f,{get class(){return e(C)}})}},$$slots:{default:!0}}),ue()}var fr=h('<span class="text-xs text-muted-foreground"> </span>'),pr=h('<div class="flex flex-col gap-0.5"><span class="text-sm leading-tight font-medium"> </span> <!></div> <!>',1),mr=h("<!> <!>",1),vr=h('<div class="px-4 pb-3"><!></div>'),_r=h("<!> <!>",1),gr=h('<div class="px-4 pb-3"><!></div>'),hr=h('<p class="text-sm text-muted-foreground">No panel registered for this command.</p>'),wr=h('<div class="pr-2 pb-2 pl-2"><!></div>'),yr=h("<!> <!> <!>",1),xr=h("<!> <!>",1),br=h("<div><!></div>");function Pr(y,l){ie(l,!0);let i=T(l,"ref",15,null),f=T(l,"commands",19,()=>[]),p=T(l,"placeholder",3,"Search commands..."),C=T(l,"emptyMessage",3,"No commands found."),r=v(null),_=v(null),z=v(null),x=v(null),I=v(null),M=v(null),O=v(""),$=v(!1),m=v(St(p())),F=v(null),c=!1,n=v(null),d=!1,w=null,V=null;const A=L(()=>{const t=new Map;for(const o of f())t.set(o.id,o);return Array.from(t.values())}),me=L(()=>{const t=new Map;for(const o of e(A)){const s=o.group??null,S=t.get(s);S?S.push(o):t.set(s,[o])}for(const[,o]of t)o.sort((s,S)=>s.name.localeCompare(S.name));return t});function ne(t,o=!1){o&&(c=!0),a(O,t,!0)}function Fe(){a(F,null),a(m,p()),c=!1}Se(()=>{const t=e(F);if(t){if(c){c=!1;return}t(e(O))}}),Se(()=>{e(r)||a(m,p())});function X(){if(V)try{V()}catch(t){console.error("Failed to dispose command session",t)}V=null,a(z,null),a(x,null),Fe(),a(_,null)}function K(){e(r)&&(X(),a(r,null),a(M,null),a(I,null),ne("",!0),a($,!0))}function ve(){e(n)?.blur()}function oe(t,o){if(!t.component)return null;const s=t.props;return s?{component:t.component,props:()=>s(o)}:{component:t.component}}function Z(t,o){const s=t.createSession?.(o);if(s){V=s.dispose??null,Object.prototype.hasOwnProperty.call(s,"input")?a(z,s.input??null,!0):a(z,null),Object.prototype.hasOwnProperty.call(s,"content")?a(x,s.content??null,!0):a(x,oe(t,o),!0);return}V=null,a(z,null),a(x,oe(t,o),!0)}function _e(t){const o=t.id;return{deactivate:()=>{!e(r)||e(r).id!==o||K()},isActive:s=>!e(r)||e(r).id!==o?!1:s?e(r).id===s:!0,setIsOpen:(s,S)=>{if(!e(r)||e(r).id!==o)return;if(s){d=!1,a($,!0);return}const Y=S?.preserveActive??!0;Ie(Y)},setInputSurface:s=>{!e(r)||e(r).id!==o||a(z,s,!0)},setContentSurface:s=>{!e(r)||e(r).id!==o||a(x,s,!0)},getInputValue:()=>e(O),setInputValue:s=>{!e(r)||e(r).id!==o||ne(s,!0)},setInputHandler:s=>{if(!(!e(r)||e(r).id!==o)){if(a(F,s,!0),!s){c=!1;return}s(e(O))}},setPlaceholder:s=>{!e(r)||e(r).id!==o||a(m,s,!0)},resetPlaceholder:()=>{!e(r)||e(r).id!==o||a(m,p())}}}function $e(t){const o=e(_);if(!t)return o?{runtime:o}:{};if(!o)return{};const{props:s}=t;return s?{...typeof s=="function"?s(o):s,runtime:o}:{runtime:o}}function Ce(t){return`${t.name} ${t.description??""}`.trim()}async function Le(t){if(e(r)?.id===t.id){K();return}X(),a(M,null),a(I,t.id,!0),a($,!0),e(n)&&e(n).focus();const o=_e(t);a(_,o,!0),a(r,t,!0),Z(t,o);try{await t.execute(o)}catch(s){a(M,s instanceof Error?s:new Error("Failed to execute the command."),!0)}finally{a(I,null),ne("",!0)}}function Oe(t){const o=t.key.toLowerCase();if((t.metaKey||t.ctrlKey)&&o==="p"){if(t.preventDefault(),e(r)){K();return}e(n)&&e(n).focus();return}if(o==="escape"){if(e(r)){t.preventDefault(),K(),ve();return}e($)&&(t.preventDefault(),a($,!1),ve());return}if(!e(r))for(const S of e(A)){if(!S.shortcut)continue;const Y=S.shortcut.join(" ").toLowerCase(),H=[];if(t.metaKey&&H.push("âŒ˜"),t.ctrlKey&&H.push("Ctrl"),t.altKey&&H.push("Alt"),t.shiftKey&&H.push("Shift"),H.push(t.key.length===1?t.key.toUpperCase():t.key),H.join(" ").toLowerCase()===Y.toLowerCase()){t.preventDefault(),Le(S);break}}}function et(){a($,!0)}function Ie(t=!1){d=t,a($,!1)}function Ue(t){const o=w;if(!o)return;const s=t.target;s&&o.contains(s)||e($)&&Ie(!!e(r))}Se(()=>{if(!e($)){if(ne("",!0),!e(r)){d=!1;return}if(d){d=!1;return}X(),a(r,null),a(M,null)}});var se=br();nt("keydown",Lt,Oe),nt("pointerdown",kt,Ue);var je=b(se);k(je,()=>Tt,(t,o)=>{o(t,{children:(s,S)=>{var Y=xr(),H=g(Y);{let de=L(()=>e(r)?e(r).inputPlaceholder??e(m):e(m)),ke=L(()=>e(r)?cr:void 0),We=L(()=>e(r)?{onPress:K,disabled:e(I)===e(r).id}:void 0),Ne=L(()=>e(r)?.id);dr(H,{get placeholder(){return e(de)},onfocus:()=>et(),get icon(){return e(ke)},get iconProps(){return e(We)},get commandId(){return e(Ne)},get value(){return e(O)},set value(Ve){a(O,Ve,!0)},get ref(){return e(n)},set ref(Ve){a(n,Ve,!0)}})}var ge=j(H,2);{var Me=de=>{var ke=E(),We=g(ke);{var Ne=he=>{ot(he,{children:(Ee,Te)=>{var Re=E(),ze=g(Re);k(ze,()=>dt,(Ke,He)=>{He(Ke,{children:(G,ce)=>{var W=mr(),le=g(W);k(le,()=>ct,(re,U)=>{U(re,{children:(B,ee)=>{be();var q=Ae();N(()=>Q(q,C())),u(B,q)},$$slots:{default:!0}})});var fe=j(le,2);Qe(fe,17,()=>Array.from(e(me).entries()),zt,(re,U)=>{var B=L(()=>Et(e(U),2));let ee=()=>e(B)[1];var q=E(),ae=g(q);Qe(ae,17,ee,J=>J.id,(J,D)=>{var we=E(),pe=g(we);{let mt=L(()=>Ce(e(D)));k(pe,()=>ft,(vt,_t)=>{_t(vt,{get value(){return e(mt)},onclick:()=>Le(e(D)),children:(gt,kr)=>{var tt=pr(),Ge=g(tt),Be=b(Ge),ht=b(Be,!0);P(Be);var wt=j(Be,2);{var yt=te=>{var ye=fr(),qe=b(ye,!0);P(ye),N(()=>Q(qe,e(D).description)),u(te,ye)};R(wt,te=>{e(D).description&&te(yt)})}P(Ge);var xt=j(Ge,2);{var bt=te=>{pt(te,{class:"ml-auto size-4 text-muted-foreground"})},Pt=te=>{var ye=E(),qe=g(ye);{var $t=Je=>{var rt=E(),Ct=g(rt);k(Ct,()=>ar,(It,Mt)=>{Mt(It,{children:(Vt,Er)=>{be();var at=Ae();N(At=>Q(at,At),[()=>e(D).shortcut?.join(" + ")]),u(Vt,at)},$$slots:{default:!0}})}),u(Je,rt)};R(qe,Je=>{e(D).shortcut?.length&&Je($t)},!0)}u(te,ye)};R(xt,te=>{e(I)===e(D).id?te(bt):te(Pt,!1)})}N(()=>Q(ht,e(D).name)),u(gt,tt)},$$slots:{default:!0}})})}u(J,we)}),u(re,q)}),u(G,W)},$$slots:{default:!0}})}),u(Ee,Re)},$$slots:{default:!0}})},Ve=he=>{var Ee=yr(),Te=g(Ee);{var Re=G=>{const ce=L(()=>e(z).component);var W=vr(),le=b(W);{let fe=L(()=>$e(e(z)));k(le,()=>e(ce),(re,U)=>{U(re,Pe(()=>e(fe)))})}P(W),u(G,W)};R(Te,G=>{e(z)&&G(Re)})}var ze=j(Te,2);{var Ke=G=>{var ce=gr(),W=b(ce);k(W,()=>Ht,(le,fe)=>{fe(le,{variant:"destructive",children:(re,U)=>{var B=_r(),ee=g(B);k(ee,()=>Gt,(ae,J)=>{J(ae,{children:(D,we)=>{be();var pe=Ae();N(()=>Q(pe,`${e(r).name??""} failed`)),u(D,pe)},$$slots:{default:!0}})});var q=j(ee,2);k(q,()=>Bt,(ae,J)=>{J(ae,{children:(D,we)=>{be();var pe=Ae();N(()=>Q(pe,e(M).message)),u(D,pe)},$$slots:{default:!0}})}),u(re,B)},$$slots:{default:!0}})}),P(ce),u(G,ce)};R(ze,G=>{e(M)&&G(Ke)})}var He=j(ze,2);ot(He,{children:(G,ce)=>{var W=wr(),le=b(W);{var fe=U=>{const B=L(()=>e(x).component);var ee=E(),q=g(ee);{let ae=L(()=>$e(e(x)));k(q,()=>e(B),(J,D)=>{D(J,Pe(()=>e(ae)))})}u(U,ee)},re=U=>{var B=E(),ee=g(B);k(ee,()=>Kt,(q,ae)=>{ae(q,{class:"px-0",children:(J,D)=>{var we=hr();u(J,we)},$$slots:{default:!0}})}),u(U,B)};R(le,U=>{e(x)?U(fe):U(re,!1)})}P(W),u(G,W)},$$slots:{default:!0}}),u(he,Ee)};R(We,he=>{e(r)?he(Ve,!1):he(Ne)})}u(de,ke)};R(ge,de=>{e($)&&de(Me)})}u(s,Y)},$$slots:{default:!0}})}),P(se),De(se,t=>w=t,()=>w),De(se,t=>i(t),()=>i()),N(t=>Ut(se,1,t),[()=>Ot(Ye("space-y-4",l.class))]),u(y,se),ue()}var $r=h('<div class="error-message svelte-11six79"><p class="text-sm text-red-600"> </p></div>'),Cr=h('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-11six79"> </span></div>'),Ir=h('<span class="description-text text-xs text-gray-500 svelte-11six79"> </span>'),Mr=h('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-11six79"> </span> <!></div>'),Vr=h('<div class="item-container svelte-11six79"><!> <!></div>');function Ar(y,l){ie(l,!0);const i=T(l,"mapView",7),f=T(l,"runtime",3,null),p=new lr;let C=v(null),r=v(null),_=v("");const z=L(()=>{const n=p.response?.results??[],d=e(_).trim().toLowerCase();return d?n.filter(w=>{const V=typeof w?.title=="string"?w.title.toLowerCase():"",A=typeof w?.description=="string"?w.description.toLowerCase():"";return V.includes(d)||A.includes(d)}):n});Xe(async()=>{const n=er("/maps-web-map.json");await p.fetchWebMaps(n)});let x=null,I=null,M=l.inputPlaceholder??"Search...";Se(()=>{const n=f(),d=l.inputPlaceholder??"Search...";if(!n){I?.(),I=null,x=null,a(_,""),M=d;return}if(n===x){d!==M&&(n.setPlaceholder(d),M=d);return}I?.(),I=null,x=null,M=d;const w=A=>{a(_,A,!0)};n.setPlaceholder(d),n.setInputHandler(w);const V=n.getInputValue();a(_,V,!0),V&&(n.setInputValue(""),a(_,"")),I=()=>{n.setInputHandler(null),n.resetPlaceholder(),n.setInputValue(""),x===n&&(x=null),a(_,"")},x=n}),lt(()=>{I?.(),I=null,x=null});async function O(n){if(!i()){console.error("MapView is not initialized"),a(r,"MapView is not ready. Please wait and try again.");return}a(C,n,!0),a(r,null);try{console.log(`Loading web map with ID: ${n}`);const d="https://nercdsh.dev.azure.manchester.ac.uk/portal";st.portalUrl=d,console.log("Portal URL configured:",st.portalUrl);const{addProxyRule:w}=Qt;console.log("Adding proxy rule for portal traffic"),w({urlPrefix:"https://nercdsh.dev.azure.manchester.ac.uk",proxyUrl:"/dsh/proxy/Java/proxy.jsp"});const[{default:V}]=await Promise.all([xe(()=>import("../chunks/CSVIPV-Z.js").then(ne=>ne.W),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156]),import.meta.url)]),A=new V({portalItem:{id:n,portal:{url:d}}});await A.load(),console.log("Web map loaded successfully"),console.log("Applying web map to MapView",i().ui),i().map=A,console.log("Web map applied to MapView"),await Xt(()=>i().ready),console.log("MapView updated with new web map");const me=A.initialViewProperties?.viewpoint?.targetGeometry;me&&(console.log("Navigating to web map initial viewpoint"),await i().goTo(me),console.log("MapView navigated to web map initial viewpoint")),f()?.setIsOpen(!1)}catch(d){console.error("Error loading web map:",d),a(r,d instanceof Error?d.message:"Failed to load web map",!0)}finally{a(C,null)}}var $=Vr(),m=b($);{var F=n=>{var d=$r(),w=b(d),V=b(w,!0);P(w),P(d),N(()=>Q(V,e(r))),u(n,d)};R(m,n=>{e(r)&&n(F)})}var c=j(m,2);k(c,()=>dt,(n,d)=>{d(n,{children:(w,V)=>{var A=E(),me=g(A);{var ne=X=>{var K=E(),ve=g(K);k(ve,()=>ct,(oe,Z)=>{Z(oe,{children:(_e,$e)=>{be();var Ce=Ae("No web maps match your search.");u(_e,Ce)},$$slots:{default:!0}})}),u(X,K)},Fe=X=>{var K=E(),ve=g(K);Qe(ve,17,()=>e(z),oe=>oe.id,(oe,Z)=>{var _e=E(),$e=g(_e);k($e,()=>ft,(Ce,Le)=>{Le(Ce,{onclick:()=>O(e(Z).id),children:(Oe,et)=>{var Ie=E(),Ue=g(Ie);{var se=t=>{var o=Cr(),s=b(o);pt(s,{class:"size-4"});var S=j(s,2),Y=b(S);P(S),P(o),N(()=>Q(Y,`Loading ${e(Z).title??"Untitled web map"??""}...`)),u(t,o)},je=t=>{var o=Mr(),s=b(o),S=b(s,!0);P(s);var Y=j(s,2);{var H=ge=>{var Me=Ir(),de=b(Me,!0);P(Me),N(()=>Q(de,e(Z).description)),u(ge,Me)};R(Y,ge=>{e(Z).description&&ge(H)})}P(o),N(()=>Q(S,e(Z).title??"Untitled web map")),u(t,o)};R(Ue,t=>{e(C)===e(Z).id?t(se):t(je,!1)})}u(Oe,Ie)},$$slots:{default:!0}})}),u(oe,_e)}),u(X,K)};R(me,X=>{e(z).length===0?X(ne):X(Fe,!1)})}u(w,A)},$$slots:{default:!0}})}),P($),u(y,$),ue()}var Sr=h('<div class="map-layout svelte-10vgo84"><!></div>'),Lr=h("<!> <!>",1);function na(y,l){ie(l,!0);let i=v(null),f=v(null),p=v(!1),C=v(null),r=v(null),_=v(null);Xe(async()=>{await z();const[{default:c}]=await Promise.all([xe(()=>import("../chunks/CyzFLg49.js").then(A=>A.a2),__vite__mapDeps([157,1,2,3,4,5,42,43,29,44,26,6,7,45,36,37,46,24,25,47,10,11,12,13,27,18,76,77,21,158,57,58,59,28,60,61,62,63,64,14,19,65,66,67,68,69,70,38,159,160,161,30,150,162,163,16,17,164,8,9,15,20,22,23,31,32,33,34,35,39,40,41,96,51,165,94,74,56,166,167,168,169,54,55,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185]),import.meta.url)]);a(i,new c({map:{basemap:"gray"},zoom:15,center:[-2.231774828836059,53.46531847221502],background:{color:[207,211,212]}}),!0),e(i).ui.move("zoom","bottom-right");const[{default:n}]=await Promise.all([xe(()=>import("../chunks/ljivFxcH.js").then(A=>A.L),__vite__mapDeps([186,5,1,2,3,4,10,11,12,13,7,165,18,161,21,6,30,150,162,17,187,188,189,60,185]),import.meta.url)]),d=new n({view:e(i)});e(i).ui.add(d,{position:"top-left"});const[{default:w}]=await Promise.all([xe(()=>import("../chunks/CKhDoJii.js"),__vite__mapDeps([190,1,2,3,4,18,6,5,7,161,21,11,12,30,150,162,10,13,191,24,25,26,64,59,192,85,39,40,37,89,193,88,194,195,16,17,196,123,124,125,28,102,103,29,104,105,57,58,60,45,36,46,61,62,63,14,19,65,66,67,68,69,70,99,106,107,108,109,112,126,127,128,47,129,130,51,131,132,133,134,135,136,137,138,101,110,111,113,197,198,199,200,84,201,167,202,203,185,204,205,206,207,208,209,210,211,212,213,214,215,216,217,178,170,218,219,220,221,181,222,223,224,183,184,188]),import.meta.url)]),V=new w({view:e(i)});e(i).ui.add(V,{position:"top-right"}),a(r,x(),!0),a(_,I(),!0)});async function z(){await xe(()=>import("../chunks/DhFVmk4E.js"),__vite__mapDeps([225,226,161,1,2,3,4,21,11,12,6,5,7,18,30,150,162,227,184,13,228,186,10,165,17,187,188,189,60,185]),import.meta.url),await xe(()=>import("../chunks/CF0sTZpg.js"),__vite__mapDeps([229,230,161,1,2,3,4,21,11,12,6,5,7,18,30,150,162,231,232,233,234,235,236,237,227,184,238,239,240,241,242,243,226,13,228,157,42,43,29,44,26,45,36,37,46,24,25,47,10,27,76,77,158,57,58,59,28,60,61,62,63,64,14,19,65,66,67,68,69,70,38,159,160,163,16,17,164,8,9,15,20,22,23,31,32,33,34,35,39,40,41,96,51,165,94,74,56,166,167,168,169,54,55,170,171,172,173,174,175,176,177,178,179,180,181,182,183,185,0,48,49,50,52,53,71,72,73,75,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,95,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156]),import.meta.url)}Se(()=>{if(e(p)||!e(i)||!e(f))return;const c=e(i),n=e(f);c.ui.add(n,{position:"manual"}),a(p,!0)}),lt(()=>{a(r,null),a(_,null),e(i)&&e(i).destroy()});function x(){const c={id:"add-web-map",name:"Add web map",description:"Fetch and display our web maps.",group:"Maps",shortcut:["Ctrl","M"],inputPlaceholder:"Search web maps...",execute:async n=>{a(C,"show-web-maps")},component:Ar,props:n=>({mapView:e(i),inputPlaceholder:c.inputPlaceholder})};return c}function I(){return{id:"add-layer",name:"Add layers",description:"Fetch and display our layers.",group:"Maps",shortcut:["Ctrl","L"],execute:async c=>{}}}var M=Lr(),O=g(M);{var $=c=>{{let n=L(()=>[e(r),e(_)]);Pr(c,{class:"position-absolute top-3 left-1/2 z-1 -translate-x-1/2 transform",get commands(){return e(n)},get ref(){return e(f)},set ref(d){a(f,d,!0)}})}};R(O,c=>{e(r)&&e(_)&&c($)})}var m=j(O,2);{var F=c=>{var n=Sr(),d=b(n);sr(d,{get mapView(){return e(i)}}),P(n),u(c,n)};R(m,c=>{e(i)&&c(F)})}u(y,M),ue()}export{na as component};
