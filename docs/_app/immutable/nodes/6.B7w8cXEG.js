const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/Bo-Ws7j2.js","../chunks/DtUpcSZL.js","../chunks/DHq0rblm.js","../chunks/BfhsIlKo.js","../chunks/qs4PuqLF.js","../chunks/D9Z9MdNV.js","../chunks/Bwh84WyQ.js","../chunks/BgvLO-3W.js","../chunks/BPWMfk3L.js","../chunks/B5FfC49X.js","../chunks/Cw1pwOU3.js","../chunks/Ab6_LQF8.js","../chunks/BzdAE8IO.js","../chunks/C1i-M2aP.js","../chunks/DpT7IovD.js","../chunks/DwaPv9Xz.js","../chunks/DxjcXvGa.js","../chunks/CU7c9CMG.js","../chunks/129gMYlb.js","../chunks/v8BQWUBe.js","../chunks/b9L_h0zx.js","../chunks/D6wORzA5.js","../chunks/D6KPPgz5.js","../chunks/BsbEhHPI.js","../chunks/1paoQEYR.js","../chunks/CbQpSWi7.js","../chunks/Cl5lrJ4c.js","../chunks/DS3I1QGm.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/C4HJhmWz.js","../chunks/BL_xGwnO.js","../chunks/CJDxRR2q.js","../chunks/Djp3mnm5.js","../chunks/5FB5fp0p.js","../chunks/DQOJ18NT.js","../chunks/BXRubaki.js","../chunks/CO7wCLMN.js","../chunks/CISklr1W.js","../chunks/BcYzNU04.js","../chunks/EzLf78vY.js","../chunks/DJcANb4D.js","../chunks/CYIjw6v6.js","../chunks/BHJeQD3W.js","../chunks/CFcsbxo9.js","../chunks/9YvG7tFv.js","../chunks/0RWeYtrz.js","../chunks/D63lrzPI.js","../chunks/aQeO9QTD.js","../chunks/thXDNXE5.js","../chunks/C8mSainR.js","../chunks/BMX0GFJS.js","../chunks/DzdGX2zJ.js","../chunks/BBxgwA0n.js","../chunks/CWhDOlk9.js","../chunks/DZd6gJy7.js","../chunks/DxShpBdY.js","../chunks/C8BmVxiO.js","../chunks/NT2Bw9Xs.js","../chunks/NdScq7k1.js","../chunks/BNxyGXCQ.js","../chunks/C1lBXX5P.js","../chunks/D2J_WLS8.js","../chunks/DQ8jsygj.js","../chunks/CQ7_HgKN.js","../chunks/B7w94aGg.js","../chunks/Chk7YAAL.js","../chunks/D0t3l1UW.js","../chunks/Cgb6qxNH.js","../chunks/CQSPGXrE.js","../chunks/BHlmUX6D.js","../chunks/QQC62dOK.js","../chunks/DJa1hCZQ.js","../chunks/BM6Wwexr.js","../chunks/Bm1xQlw6.js","../chunks/XNewhKeX.js","../chunks/DKpmsPfl.js","../chunks/Sc2kLiW3.js","../chunks/B55yQsaB.js","../chunks/B1N-tmtC.js","../chunks/CASyCajO.js","../chunks/BiphejqT.js","../chunks/CWKudsnk.js","../chunks/pDuGEAnG.js","../chunks/CmGkajPk.js","../chunks/BrScpkSj.js","../chunks/rxpTDz6e.js","../chunks/huXfT4GN.js","../chunks/DoXK2rGs.js","../chunks/Ctm-fIfE.js","../chunks/CL2NbQte.js","../chunks/CpiZ4wIO.js","../chunks/BASHandG.js","../chunks/8QcYoK8I.js","../chunks/NPoLgU3x.js","../chunks/C5CzMsLd.js","../chunks/deFn64y_.js","../chunks/BAf2E7HJ.js","../chunks/Y387DGzA.js","../chunks/CFIXdoHM.js","../chunks/JBhdCoOi.js","../chunks/CHZSYXvn.js","../chunks/BML_M8sQ.js","../chunks/Dnb1jllm.js","../chunks/DfNP466Y.js","../chunks/eWXUghTg.js","../chunks/BE7embxS.js","../chunks/B2pz97Mw.js","../chunks/iS9MPUWn.js","../chunks/GKolV7NZ.js","../chunks/B7so6aiN.js","../chunks/D_jxB2M9.js","../chunks/C70Wcz7U.js","../chunks/Cp7iBt0A.js","../chunks/f7qLKxBD.js","../chunks/4c7MyKAz.js","../chunks/DbuHlGOH.js","../chunks/5Hu3Tj1O.js","../chunks/BDRwM1Gy.js","../chunks/VMSlSy0z.js","../chunks/lYnSLSOW.js","../chunks/C9yb1cMp.js","../chunks/BlVJDMPv.js","../chunks/DKdVR8l2.js","../chunks/DZ6eIUka.js","../chunks/n8j1sCwN.js","../chunks/L_yqRdqL.js","../chunks/BPsRHx0w.js","../chunks/CJzbRXVH.js","../chunks/DVkWVZrr.js","../chunks/Cbt3oAQ3.js","../chunks/C6-4EbnJ.js","../chunks/DdaJqb9x.js","../chunks/BQ9eRUBJ.js","../chunks/yMNjucUt.js","../chunks/DYWnz87V.js","../chunks/dDFQnWwh.js","../chunks/TngxyDh1.js","../chunks/6Dn7lewd.js","../chunks/DfJNYC5A.js","../chunks/zTkdiH1w.js","../chunks/KcazVFlU.js","../chunks/CYsUaMUi.js","../chunks/Bu2dLfoR.js","../chunks/uNqxL_S-.js","../chunks/BVskHUjz.js","../chunks/iUYx5jDy.js","../chunks/B5kADfHL.js","../chunks/CfrNlpsM.js","../chunks/DdSLmJ2d.js","../chunks/BS3H3l-F.js","../chunks/DCdj6Lab.js","../chunks/BXfupK_G.js","../chunks/BkQcsSCB.js","../chunks/DPb6J-GU.js","../chunks/Di4P92Bn.js","../chunks/ChlOomCl.js","../chunks/B8TggrAl.js","../chunks/BH-QLa3i.js","../chunks/Bt_bao6a.js","../chunks/CpOLeWL8.js","../chunks/Cy_9-Fvw.js","../chunks/CEiIohNf.js","../chunks/CNvMJFKk.js","../chunks/DqlQ8lc_.js","../chunks/CZQNMlVz.js","../chunks/uuiBM66S.js","../chunks/VStmm7cP.js","../chunks/BqnxlNxI.js","../chunks/BXAqi3_T.js","../chunks/D8UNv0pX.js","../chunks/DsHDw-MJ.js"])))=>i.map(i=>d[i]);
import"../chunks/DsnmJJEf.js";import{o as ct,a as lr}from"../chunks/BTUtnK6b.js";import{O as dr,E as cr,be as ur,bf as fr,Y as hr,y as vr,bg as gr,bh as mr,bi as pr,a1 as Bt,as as yr,_ as wr,a9 as ne,aH as z,J as i,ah as _,b5 as br,p as Q,c as P,b as S,a as v,d as ee,f as H,a6 as b,a7 as y,aG as M,am as ae,u as de,a8 as L,N as oe,n as Pe,aI as De,G as _r}from"../chunks/DehUWplH.js";import{p as W,i as G,r as Te,l as Ke,s as xe,a as Sr,b as xr}from"../chunks/TLwjHNuO.js";import{_ as Ne}from"../chunks/D9Z9MdNV.js";import{e as Ir,a as se,s as he}from"../chunks/BTpQzbbG.js";import{b as Le}from"../chunks/BquELpeJ.js";import{C as Cr,D as Tr,l as kr,o as Ar,z as Lr,b as nt,B as Hr,p as Ae,c as Mr}from"../chunks/B3jgurcF.js";import{I as It,a as Ce,i as Ge}from"../chunks/B--_NR5U.js";import{c as J}from"../chunks/B1MLz82n.js";import{O as Ut,T as Nr,G as Lt,F as Ht,a as zr,c as $t,t as He,d as Fr,e as Pr,f as Or,g as Vr,S as Ze,h as Er,i as Dr,p as Rr,C as Mt,j as Gr,I as Br,k as Ur,l as $r,m as jr,n as Wr,L as qr,o as Yr,s as Zr,M as Xr,V as Nt,b as at,q as Kr,u as Jr,r as Qr}from"../chunks/hTpH4jzT.js";import{a as ut,e as Fe,d as ze,s as dt,b as ei}from"../chunks/CZEBf6kI.js";import{h as Xe}from"../chunks/DYCabrYF.js";import{d as ft,g as ti}from"../chunks/CG5SEHFF.js";import{I as Je,m as Qe,C as ri,d as Ct,S as jt,e as ii,s as ni,c as Wt,X as ai,f as oi,g as si,h as li,i as di,j as ci,k as ui,l as fi}from"../chunks/B-JAyApq.js";import{B as Se,c as ht}from"../chunks/CLqO5gQz.js";import"../chunks/DajHuwdy.js";import{I as hi}from"../chunks/IOY-uvk4.js";const vi=()=>performance.now(),ke={tick:s=>requestAnimationFrame(s),now:()=>vi(),tasks:new Set};function qt(){const s=ke.now();ke.tasks.forEach(e=>{e.c(s)||(ke.tasks.delete(e),e.f())}),ke.tasks.size!==0&&ke.tick(qt)}function gi(s){let e;return ke.tasks.size===0&&ke.tick(qt),{promise:new Promise(t=>{ke.tasks.add(e={c:s,f:t})}),abort(){ke.tasks.delete(e)}}}function ot(s,e){Bt(()=>{s.dispatchEvent(new CustomEvent(e))})}function mi(s){if(s==="float")return"cssFloat";if(s==="offset")return"cssOffset";if(s.startsWith("--"))return s;const e=s.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function zt(s){const e={},t=s.split(";");for(const r of t){const[n,a]=r.split(":");if(!n||a===void 0)break;const o=mi(n.trim());e[o]=a.trim()}return e}const pi=s=>s;function Ft(s,e,t,r){var n=(s&mr)!==0,a=(s&pr)!==0,o=n&&a,c=(s&gr)!==0,g=o?"both":n?"in":"out",h,d=e.inert,p=e.style.overflow,l,m;function u(){return Bt(()=>h??=t()(e,r?.()??{},{direction:g}))}var f={is_global:c,in(){if(e.inert=d,!n){m?.abort(),m?.reset?.();return}a||l?.abort(),ot(e,"introstart"),l=_t(e,u(),m,1,()=>{ot(e,"introend"),l?.abort(),l=h=void 0,e.style.overflow=p})},out(w){if(!a){w?.(),h=void 0;return}e.inert=!0,ot(e,"outrostart"),m=_t(e,u(),l,0,()=>{ot(e,"outroend"),w?.()})},stop:()=>{l?.abort(),m?.abort()}},x=dr;if((x.transitions??=[]).push(f),n&&Ir){var T=c;if(!T){for(var C=x.parent;C&&(C.f&cr)!==0;)for(;(C=C.parent)&&(C.f&ur)===0;);T=!C||(C.f&fr)!==0}T&&hr(()=>{vr(()=>f.in())})}}function _t(s,e,t,r,n){var a=r===1;if(yr(e)){var o,c=!1;return wr(()=>{if(!c){var x=e({direction:a?"in":"out"});o=_t(s,x,t,r,n)}}),{abort:()=>{c=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t?.deactivate(),!e?.duration)return n(),{abort:ne,deactivate:ne,reset:ne,t:()=>r};const{delay:g=0,css:h,tick:d,easing:p=pi}=e;var l=[];if(a&&t===void 0&&(d&&d(0,1),h)){var m=zt(h(0,1));l.push(m,m)}var u=()=>1-r,f=s.animate(l,{duration:g,fill:"forwards"});return f.onfinish=()=>{f.cancel();var x=t?.t()??1-r;t?.abort();var T=r-x,C=e.duration*Math.abs(T),w=[];if(C>0){var I=!1;if(h)for(var V=Math.ceil(C/16.666666666666668),k=0;k<=V;k+=1){var j=x+T*p(k/V),R=zt(h(j,1-j));w.push(R),I||=R.overflow==="hidden"}I&&(s.style.overflow="hidden"),u=()=>{var B=f.currentTime;return x+T*p(B/C)},d&&gi(()=>{if(f.playState!=="running")return!1;var B=u();return d(B,1-B),!0})}f=s.animate(w,{duration:C,fill:"forwards"}),f.onfinish=()=>{u=()=>r,d?.(r,1-r),n()}},{abort:()=>{f&&(f.cancel(),f.effect=null,f.onfinish=ne)},deactivate:()=>{n=ne},reset:()=>{r===0&&d?.(1,0)},t:()=>u()}}const yi=Ar({component:"avatar",parts:["root","image","fallback"]}),wi=new Cr("Avatar.Root");class Tt{static create(e){return wi.set(new Tt(e))}opts;domContext;attachment;constructor(e){this.opts=e,this.domContext=new Tr(this.opts.ref),this.loadImage=this.loadImage.bind(this),this.attachment=kr(this.opts.ref)}loadImage(e,t,r){if(this.opts.loadingStatus.current==="loaded")return;let n;const a=new Image;return a.src=e,t!==void 0&&(a.crossOrigin=t),r&&(a.referrerPolicy=r),this.opts.loadingStatus.current="loading",a.onload=()=>{n=this.domContext.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},a.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{n&&this.domContext.clearTimeout(n)}}#e=z(()=>({id:this.opts.id.current,[yi.root]:"","data-status":this.opts.loadingStatus.current,...this.attachment}));get props(){return i(this.#e)}set props(e){_(this.#e,e)}}var bi=H("<div><!></div>");function _i(s,e){const t=br();Q(e,!0);let r=W(e,"delayMs",3,0),n=W(e,"loadingStatus",15,"loading"),a=W(e,"id",19,()=>Lr(t)),o=W(e,"ref",15,null),c=Te(e,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const g=Tt.create({delayMs:nt(()=>r()),loadingStatus:nt(()=>n(),u=>{n()!==u&&(n(u),e.onLoadingStatusChange?.(u))}),id:nt(()=>a()),ref:nt(()=>o(),u=>o(u))}),h=z(()=>Hr(c,g.props));var d=P(),p=S(d);{var l=u=>{var f=P(),x=S(f);se(x,()=>e.child,()=>({props:i(h)})),v(u,f)},m=u=>{var f=bi();ut(f,()=>({...i(h)}));var x=b(f);se(x,()=>e.children??ne),y(f),v(u,f)};G(p,u=>{e.child?u(l):u(m,!1)})}v(s,d),ee()}function Si(s,e){const t=Ke(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M12 8V4H8"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}],["path",{d:"M2 14h2"}],["path",{d:"M20 14h2"}],["path",{d:"M15 13v2"}],["path",{d:"M9 13v2"}]];Je(s,xe({name:"bot"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=P(),c=S(o);Qe(c,e,"default",{}),v(n,o)},$$slots:{default:!0}}))}function xi(s,e){const t=Ke(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"m6 9 6 6 6-6"}]];Je(s,xe({name:"chevron-down"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=P(),c=S(o);Qe(c,e,"default",{}),v(n,o)},$$slots:{default:!0}}))}function Ii(s,e){const t=Ke(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"m15 18-6-6 6-6"}]];Je(s,xe({name:"chevron-left"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=P(),c=S(o);Qe(c,e,"default",{}),v(n,o)},$$slots:{default:!0}}))}function Ci(s,e){const t=Ke(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"m18 15-6-6-6 6"}]];Je(s,xe({name:"chevron-up"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=P(),c=S(o);Qe(c,e,"default",{}),v(n,o)},$$slots:{default:!0}}))}function Ti(s,e){const t=Ke(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M4 5h16"}],["path",{d:"M4 12h16"}],["path",{d:"M4 19h16"}]];Je(s,xe({name:"menu"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=P(),c=S(o);Qe(c,e,"default",{}),v(n,o)},$$slots:{default:!0}}))}function ki(s,e){Q(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let t=Te(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 17V3"}],["path",{d:"m6 11 6 6 6-6"}],["path",{d:"M19 21H5"}]];It(s,xe({name:"arrow-down-to-line"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=P(),c=S(o);se(c,()=>e.children??ne),v(n,o)},$$slots:{default:!0}})),ee()}function Ai(s,e){Q(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let t=Te(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]];It(s,xe({name:"arrow-down"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=P(),c=S(o);se(c,()=>e.children??ne),v(n,o)},$$slots:{default:!0}})),ee()}function Li(s,e){Q(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let t=Te(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];It(s,xe({name:"send"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=P(),c=S(o);se(c,()=>e.children??ne),v(n,o)},$$slots:{default:!0}})),ee()}class Hi{#e=M(ae({featureLayerView:null,areaInfos:[]}));get layerHighlightState(){return i(this.#e)}set layerHighlightState(e){_(this.#e,e,!0)}#t=M(null);get lastAddedArea(){return i(this.#t)}set lastAddedArea(e){_(this.#t,e,!0)}#r=M(null);get lastRemovedArea(){return i(this.#r)}set lastRemovedArea(e){_(this.#r,e,!0)}#n=M(null);get currentHoveredArea(){return i(this.#n)}set currentHoveredArea(e){_(this.#n,e,!0)}#i=[];#o=new Ae;setNameFields(e){console.log("Setting name fields:",e),this.#i=e}setSelectedLayerView(e){this.layerHighlightState?.featureLayerView!==e&&(this.layerHighlightState&&this.layerHighlightState.areaInfos.forEach(t=>{t.handle.remove()}),this.layerHighlightState={featureLayerView:e,areaInfos:[]})}clearSelectedLayerView(){this.layerHighlightState.featureLayerView!==null&&(this.resetSelectedAreas(),this.layerHighlightState.featureLayerView=null)}resetSelectedAreas(){!this.layerHighlightState.featureLayerView&&this.layerHighlightState.areaInfos.length===0||(this.layerHighlightState&&this.layerHighlightState.areaInfos.forEach(e=>{e.handle.remove()}),this.layerHighlightState={featureLayerView:null,areaInfos:[]})}addSelectedArea(e,t){if(!this.layerHighlightState){console.warn("SelectedAreasStore: No feature layer view is set.");return}const r={id:e,handle:t};this.layerHighlightState.areaInfos.push(r),this.lastAddedArea=r}removeSelectedArea(e){if(!this.layerHighlightState){console.warn("SelectedAreasStore: No feature layer view is set.");return}const t=this.layerHighlightState.areaInfos.findIndex(r=>r.id===e);t!==-1&&(this.lastRemovedArea={id:e,handle:this.layerHighlightState.areaInfos[t].handle},this.layerHighlightState.areaInfos[t].handle.remove(),this.layerHighlightState.areaInfos.splice(t,1))}async getAreaNamesById(e){if(!this.layerHighlightState?.featureLayerView)return[];const t=this.getNameFieldForCurrentLayer();if(!t)return[];const r=this.layerHighlightState.featureLayerView.layer;let n=this.#o.get(r.uid);n||(n=new Ae,this.#o.set(r.uid,n));const a=new Array(e.length),o=new Ae,c=[];if(e.forEach((d,p)=>{o.set(d,p);const l=n.get(d);l!==void 0?a[p]=l:c.push(d)}),c.length===0)return a.map(d=>d??"");const g=r.objectIdField,h=await r.queryFeatures({objectIds:c,outFields:[t,g],returnGeometry:!1});for(const d of h.features){const p=d.attributes[g],l=d.attributes[t],m=o.get(p);m!==void 0&&(a[m]=l??"",n.set(p,l??""))}return a.map(d=>d??"")}setHoveredArea(e,t){this.currentHoveredArea&&this.clearHoveredArea(),this.currentHoveredArea={id:e,handle:t}}clearHoveredArea(){this.currentHoveredArea&&(this.currentHoveredArea?.handle.remove(),this.currentHoveredArea=null)}getNameFieldForCurrentLayer(){if(!this.layerHighlightState||!this.layerHighlightState.featureLayerView)return null;const e=this.#i.find(t=>t.layerName===this.layerHighlightState?.featureLayerView?.layer?.title)?.field;return e||(console.warn(`SelectedAreasStore: No name field configured for layer ${this.layerHighlightState.featureLayerView.layer.title}`,this.#i),null)}}const X=new Hi;class Mi{#e=M(null);get mapView(){return i(this.#e)}set mapView(e){_(this.#e,e,!0)}#t=M(ae(new Set));get interactableLayers(){return i(this.#t)}set interactableLayers(e){_(this.#t,e,!0)}pointerMoveHandle=null;clickHandle=null;leaveHandle=null;enterHandle=null;#r=M(!1);get isInitialized(){return i(this.#r)}set isInitialized(e){_(this.#r,e,!0)}#n=M(!0);get pointerInsideMap(){return i(this.#n)}set pointerInsideMap(e){_(this.#n,e,!0)}initializationInProgress=!1;async initializeAsync(e,t){if(console.log("[map-interaction-store] Initializing with MapView"),this.mapView===e&&this.isInitialized){console.log("[map-interaction-store] MapView is already initialized"),this.interactableLayers=t;return}if(this.initializationInProgress){console.log("[map-interaction-store] Initialization already in progress");return}this.initializationInProgress=!0,console.log("[map-interaction-store] Cleaning up previous MapView if any"),this.cleanup(),this.mapView=e,this.interactableLayers=t,await e.when(),this.setupHighlights(e),this.setupPointerMoveHandler(e),this.setupClickHandler(e),this.setupLeaveHandler(e),this.setupEnterHandler(e),this.isInitialized=!0,console.log("[map-interaction-store] Initialized with MapView"),this.initializationInProgress=!1}updateInteractableLayers(e){this.interactableLayers=e}setupHighlights(e){const t={name:"hover",color:"lightgreen",haloOpacity:1,fillOpacity:.2},r={name:"selected",color:"green",haloOpacity:1,fillOpacity:.3};e.highlights.push(t),e.highlights.push(r)}setupPointerMoveHandler(e){this.pointerMoveHandle=e.on("pointer-move",async t=>{if(!this.pointerInsideMap)return;const{results:r}=await e.hitTest(t),n=r[0];if(!n){this.clearHoverHighlight();return}const a=n.graphic,o=a.layer;if(!a||!o||!this.isLayerInteractable(o.id)||a.attributes?.[o.objectIdField]===void 0){this.clearHoverHighlight();return}const c=a.attributes?.[o.objectIdField];if(!(X.currentHoveredArea&&X.currentHoveredArea.id===c))try{const g=await e.whenLayerView(o);X.layerHighlightState.featureLayerView!==g&&X.setSelectedLayerView(g),this.clearHoverHighlight();const h=g;if(!h){console.warn("LayerView is not a FeatureLayerView");return}if(!this.pointerInsideMap)return;const d=h.highlight(a,{name:"hover"});X.setHoveredArea(c,d)}catch(g){console.error("Error in pointer-move handler:",g),this.clearHoverHighlight()}})}setupClickHandler(e){this.clickHandle=e.on("click",async t=>{const{results:r}=await e.hitTest(t),n=r[0];if(!n)return;const a=n.graphic,o=a.layer;if(!a||!o||!this.isLayerInteractable(o.id)||a.attributes?.[o.objectIdField]===void 0)return;const c=a.attributes?.[o.objectIdField];try{const g=await e.whenLayerView(o),h=g;if(!h){console.warn("Layer is not a FeatureLayerView");return}X.layerHighlightState.featureLayerView!==g&&X.setSelectedLayerView(g);const p=(X.layerHighlightState.areaInfos||[]).find(l=>l.id===c);if(p)X.removeSelectedArea(p.id);else{const l=h.highlight(a,{name:"selected"});X.addSelectedArea(c,l)}}catch(g){console.error("Error in click handler:",g)}})}setupLeaveHandler(e){this.leaveHandle=e.on("pointer-leave",()=>{this.pointerInsideMap=!1,this.clearHoverHighlight()})}setupEnterHandler(e){this.enterHandle=e.on("pointer-enter",()=>{this.pointerInsideMap=!0})}isLayerInteractable(e){return this.interactableLayers.has(e)}clearHoverHighlight(){X.currentHoveredArea&&X.clearHoveredArea()}cleanup(){this.pointerMoveHandle&&(this.pointerMoveHandle.remove(),this.pointerMoveHandle=null),this.clickHandle&&(this.clickHandle.remove(),this.clickHandle=null),this.leaveHandle&&(this.leaveHandle.remove(),this.leaveHandle=null),this.enterHandle&&(this.enterHandle.remove(),this.enterHandle=null),this.clearHoverHighlight(),this.isInitialized=!1,this.mapView=null,this.pointerInsideMap=!0,this.interactableLayers=new Set,console.log("[map-interaction-store] Cleaned up")}get currentMapView(){return this.mapView}get initialized(){return this.isInitialized}}const st=new Mi;class Yt{id;name;children;parent;constructor(e,t,r=[],n=null){this.id=e,this.name=t,this.children=r,this.parent=n}}class le extends Yt{layer;constructor(e,t,r,n=[],a=null){super(e,t,n,a),this.layer=r}}class Be extends le{featureLayer;field;constructor(e,t,r,n,a=[],o=null){super(e,t,r,a,o),this.field=n,this.featureLayer=r}}var ie=(s=>(s.Inactive="inactive",s.Indeterminate="indeterminate",s.Active="active",s))(ie||{}),Ni=H('<div class="esri-ui-element svelte-i0p9uk"><!></div>'),zi=H('<div class="esri-ui-element svelte-i0p9uk"><!></div>'),Fi=H('<div class="map-view svelte-i0p9uk"></div> <!> <!>',1);function Pi(s,e){Q(e,!0);const t=W(e,"webMap",3,null),r=W(e,"panelPosition",3,"top-left"),n=W(e,"menuPosition",3,"top-right");let a=null,o=M(null),c=M(null),g=M(null),h=M(!1);const d="streets-vector";let p,l;ct(async()=>{await m(),await C()});async function m(){if(!l){const[{default:N},{default:F},{default:D},{default:K}]=await Promise.all([Ne(()=>import("../chunks/Bo-Ws7j2.js").then(E=>E.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37]),import.meta.url),Ne(()=>import("../chunks/CISklr1W.js").then(E=>E.a3),__vite__mapDeps([38,1,2,3,5,39,24,6,7,22,40,41,42,43,8,9,10,11,44,23,20,21,45,46,47,48,12,13,49,50,51,25,52,53,17,32,54,55,56,26,57,58,15,59,0,4,14,16,18,19,27,28,29,30,31,33,34,35,36,37,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86]),import.meta.url),Ne(()=>import("../chunks/huXfT4GN.js").then(E=>E.W),__vite__mapDeps([87,1,2,3,5,6,7,0,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,39,40,41,42,43,44,45,46,47,48,49,50,51,88,89,90,91,62,92,93,74,75,65,94,95,96,61,97,98,99,100,64,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,52,53,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171]),import.meta.url),Ne(()=>import("../chunks/NPoLgU3x.js"),__vite__mapDeps([94,5,1,2,3,43,24,6,7,22,8,9,10,11,44,23,20,21,88,95,96,65,61,97,98,99,37,13,62,100,15,26,64,41,42,45,46,47,48,12,49,50,19,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,89,32,52,53,17,120,121,122,123,124,125,126,127,33,34,35,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,51,144,145,146,147,148,149,150,151,152,153,154,28,155,156,157,16,158,159,160,91,161,162,163,164,165,166,167,168,90]),import.meta.url)]);p=N,l=F}}async function u(N,F){const D=new l({container:F,popupEnabled:!1,map:N});return await D.when(),D}function f(N){N.ui.move("zoom","top-right"),i(c)&&r()&&N.ui.add(i(c),r()),i(g)&&n()&&N.ui.add(i(g),n()),_(h,!0)}async function x(){return new p({basemap:d})}async function T(){if(t())try{if(await m(),await C(),!i(o)){console.error("MapView is not initialized");return}i(o).map=t(),console.log("[uprn-map-view] MapView updated with new webMap")}catch(N){console.error("Error updating MapView with new webMap:",N)}}de(()=>{t()&&T()});async function C(){if(!a){console.error("Map container element was not found");return}try{_(o,await u(t()??void 0,a),!0),f(i(o)),console.log("[uprn-map-view] Map loaded successfully")}catch(N){console.error("Error loading map:",N),await w()}}async function w(){try{const N=await x();_(o,await u(N,a),!0),f(i(o)),console.log("[uprn-map-view] Fallback map loaded")}catch(N){console.error("Error loading fallback map:",N)}}de(()=>{if(!i(o)||!e.areaSelectionTreeviewStore.initialized)return;const N=e.areaSelectionTreeviewStore.getNonHiddenNodes().map(F=>F.id);st.initialized?st.updateInteractableLayers(new Set(N)):st.initializeAsync(i(o),new Set(N))});async function I(N){if(!i(o))return;const F=await i(o).whenLayerView(N);if(!F){console.warn("Could not get LayerView for the visible node layer");return}X.setSelectedLayerView(F)}de(()=>{if(!e.areaSelectionTreeviewStore.initialized)return;if(!e.areaSelectionTreeviewStore.getVisibleNodes().length){X.resetSelectedAreas();return}const N=e.areaSelectionTreeviewStore.getVisibleNodes()[0];if(!N||!(N instanceof le)){console.warn("Visible node is not a FeatureLayer");return}if(!N.layer){console.warn("Visible node layer is not a FeatureLayer");return}I(N.layer)});function V(){st.cleanup(),i(o)&&i(o).destroy()}lr(()=>{V()});var k=Fi(),j=S(k);Le(j,N=>a=N,()=>a);var R=L(j,2);{var B=N=>{var F=Ni(),D=b(F);{var K=E=>{var q=P(),$=S(q);se($,()=>e.panel),v(E,q)};G(D,E=>{i(h)&&E(K)})}y(F),Le(F,E=>_(c,E),()=>i(c)),v(N,F)};G(R,N=>{e.panel&&N(B)})}var U=L(R,2);{var re=N=>{var F=zi(),D=b(F);{var K=E=>{var q=P(),$=S(q);se($,()=>e.menu),v(E,q)};G(D,E=>{i(h)&&E(K)})}y(F),Le(F,E=>_(g,E),()=>i(g)),v(N,F)};G(U,N=>{e.menu&&N(re)})}v(s,k),ee()}var Oi=H('<div class="tree-node-item svelte-1x7dzzd"><!></div>'),Vi=H('<div class="tree-children relative ml-4 w-full svelte-1x7dzzd"><div class="tree-guide-line tree-guide-line-animate svelte-1x7dzzd"></div> <!></div>'),Ei=H('<div class="w-full"><!>  <!></div>');function Zt(s,e){const t=W(e,"isOpen",3,!1),r=W(e,"childNodes",3,null);var n=Ei(),a=b(n);se(a,()=>e.content??ne);var o=L(a,2);{var c=g=>{var h=Vi(),d=L(b(h),2);Ce(d,19,()=>r()??[],p=>p.id,(p,l,m)=>{var u=Oi(),f=b(u);se(f,()=>e.childNode??ne,()=>i(l)),y(u),oe(()=>Fe(u,`animation-delay: ${100+i(m)*50}ms;`)),v(p,u)}),y(h),v(g,h)};G(o,g=>{t()&&r()&&g(c)})}y(n),v(s,n)}const Xt="mb-1 cursor-pointer rounded-md border border-border/30 p-2 text-left",Kt="transform-gpu transition-all duration-150 ease-out hover:border-border/50 hover:bg-card/70 hover:shadow-sm",Di="transition-colors hover:bg-card/70",St="text-sm font-normal",xt="bg-card/50",Jt="bg-accent text-accent-foreground";function Ri(s){const{enhancedHover:e=!1,includeFont:t=!1,pressed:r=!1}=s;let n=Xt;return e?n+=" "+Kt:n+=" "+Di,t&&(n+=" "+St),r?n+=" "+Jt:n+=" "+xt,n}const Gi="!h-auto !min-h-9 !whitespace-normal data-[state=on]:!bg-accent data-[state=on]:!text-accent-foreground data-[state=on]:hover:!bg-accent data-[state=on]:hover:!text-accent-foreground";var Bi=H('<div class="flex w-full !items-center !justify-between gap-2"><div class="pointer-events-none !flex min-w-0 flex-1 !items-center gap-1"><span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div>'),Ui=H('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><!> <span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function Pt(s,e){const t=`calc(100% - ${e.depth*1}rem)`,r=`${Xt} ${Kt}`,n=`${r} ${Gi} ${xt} ${St}`,a=`${r} ${St}`;var o=P(),c=S(o);{var g=d=>{Nr(d,{get pressed(){return e.pressed},get class(){return n},variant:"outline",get style(){return`width: ${t};`},get onPressedChange(){return e.onclick},children:(p,l)=>{var m=Bi(),u=b(m),f=b(u),x=b(f);Xe(x,()=>e.icon),y(f);var T=L(f,2),C=b(T,!0);y(T),y(u);var w=L(u,2);se(w,()=>e.children??ne),y(m),oe(()=>he(C,e.name)),v(p,m)},$$slots:{default:!0}})},h=d=>{var p=Ui();p.__click=function(...I){e.onclick?.apply(this,I)};var l=b(p),m=b(l),u=b(m);Ut(u,{get isOpen(){return e.isOpen}});var f=L(u,2),x=b(f);Xe(x,()=>e.icon),y(f);var T=L(f,2),C=b(T,!0);y(T),y(m);var w=L(m,2);se(w,()=>e.children??ne),y(l),y(p),oe(()=>{ze(p,1,`${a} ${e.pressed?Jt:xt}`),Fe(p,`width: ${t};`),he(C,e.name)}),v(d,p)};G(c,d=>{e.isTogglable?d(g):d(h,!1)})}v(s,o)}ft(["click"]);const Qt=(s,e,t,r)=>e?$i(s,t):t?r?'<path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>':'<path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>':'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14,2 14,8 20,8"/>',$i=(s,e)=>{switch(s.type){case"group":return Lt;case"feature":return Ht;case"tile":return zr;default:return e?Lt:Ht}};function er(s,e){Q(e,!0);const t=f=>{var x=P(),T=S(x);{var C=w=>{var I=P(),V=S(I);{var k=R=>{Pt(R,{isTogglable:!1,get pressed(){return i(h)},get icon(){return i(d)},get name(){return e.node.name},get depth(){return n()},onclick:u,get isOpen(){return i(g)}})},j=R=>{Pt(R,{isTogglable:!0,get pressed(){return i(h)},get icon(){return i(d)},get name(){return e.node.name},get depth(){return n()},onclick:m,get isOpen(){return i(g)}})};G(V,R=>{o?R(k):R(j,!1)})}v(w,I)};G(T,w=>{e.treeviewConfigStore.getItemConfig(e.node.id)?.isHidden||w(C)})}v(f,x)},r=(f,x=ne)=>{var T=P(),C=S(T);{var w=I=>{{let V=z(()=>n()+1);er(I,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return x()},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get getNodeVisibility(){return e.getNodeVisibility},get depth(){return i(V)},get useLayerTypeIcon(){return a()}})}};G(C,I=>{o&&i(g)&&!e.treeviewConfigStore.getItemConfig(x().id)?.isHidden&&I(w)})}v(f,T)},n=W(e,"depth",3,0),a=W(e,"useLayerTypeIcon",3,!1),o=!!(e.node.children&&e.node.children.length),c=!o;let g=M(!1),h=M(!1),d=M("");function p(){return!e.node.children||!e.getNodeVisibility?!1:e.node.children.some(f=>{const x=e.getNodeVisibility(f.id);return x!==void 0?x:f instanceof le?f.layer.visible:!1})}de(()=>{if(!(!e.node||!(e.node instanceof le))){if(o)_(h,p(),!0);else{const f=e.getNodeVisibility?e.getNodeVisibility(e.node.id):void 0;_(h,f!==void 0?f:e.node.layer.visible,!0)}_(d,Qt(e.node.layer,a(),o,i(g)),!0)}});function l(){!c||!e.onNodeVisibilityChange||o||(_(h,!i(h)),e.onNodeVisibilityChange(e.node,i(h)))}function m(){o||l(),e.onNodeClick?.(e.node)}function u(){_(g,!i(g)),e.onNodeClick?.(e.node)}{let f=z(()=>o?e.node.children:null);Zt(s,{get isOpen(){return i(g)},get content(){return t},get childNodes(){return i(f)},get childNode(){return r}})}ee()}class tr{#e=M(!1);get initialized(){return i(this.#e)}set initialized(e){_(this.#e,e,!0)}#t=null;#r=M(ae([]));#n=z(()=>{const e=new Ae;return this.#w(i(this.#r),e),e});#i=M(ae(new Ae));#o=M(ae(new Ae));#c=M(ae(new Ae));initialize(e,t,r){if(this.initialized)throw new Error("TreeviewStore is already initialized.");if(this.initialized=!0,!t)throw new Error("TreeviewStore requires a valid TreeviewConfigStore to initialize.");if(this.#t=t,r)for(const n of r)i(this.#c).set(n.id,n);if(!e)throw new Error("TreeviewStore requires a valid array of layers to initialize.");this.#a(e),_(this.#r,this.#m(e),!0)}getNodeById(e){return this.#d(),i(this.#n).get(e)}getNodes(){return this.#d(),i(this.#r)}getVisibleNodes(){this.#d();const e=[];for(const[t,r]of i(this.#i)){if(!r)continue;const n=i(this.#n).get(t);n&&e.push(n)}return e}getNonHiddenNodes(){return this.#d(),this.#u(i(this.#r))}#u(e){this.#d();const t=[];for(const r of e){const n=this.#l(r.id);if(!(n&&n.isHidden)&&(t.push(r),r.children?.length)){const a=this.#u(r.children);t.push(...a)}}return t}getVisibilityState(e){return this.#d(),i(this.#i).get(e)??!1}setVisibilityState(e,t){this.#d();const r=i(this.#n).get(e);if(!r)throw new Error(`Tree node not found for ID: ${e}`);if(!(r instanceof le))throw new Error(`Tree node is not a layer node: ${e}`);i(this.#i).set(e,t),r.layer.visible=t,r instanceof Be&&(r.featureLayer.displayField=t?r.field.name:""),this.#s(r,t);const n=this.#l(e);if(!n||n.isHidden||(console.log(`Setting visibility of node ${e} to ${t}`,n,r),n.visibilityDependencyIds?.length&&this.#f(r,t),!n.visibilityGroupId))return;const a=n.visibilityGroupId;console.log(`Node ${e} is part of visibility group ${a}`);let o=i(this.#o).get(a);o||(o=[],i(this.#o).set(a,o));const c=this.#h(a);if(!c)throw new Error(`Visibility group config not found for group ID: ${a}`);if(!t){const h=o.indexOf(e);o.splice(h,1);return}const g=h=>{i(this.#i).set(h,!1);const d=i(this.#n).get(h);if(d&&d instanceof le){d.layer.visible=!1,this.#s(d,!1);const l=this.#l(h);l&&l.visibilityDependencyIds?.length&&this.#f(d,!1)}const p=o.indexOf(h);p>=0&&o.splice(p,1)};for(;o.length>=c.maxVisibleLayers;){const h=o[0];g(h)}o.push(e),this.#s(r,t),n.visibilityDependencyIds?.length&&this.#f(r,t)}#s(e,t){const r=e.parent;if(r){if(!(r instanceof le)){this.#s(r,t);return}i(this.#i).set(r.id,t),r.layer.visible=t,this.#s(r,t)}}#f(e,t){const r=this.#l(e.id);if(r&&r.visibilityDependencyIds?.length)for(const n of r.visibilityDependencyIds){const a=i(this.#n).get(n);a&&a instanceof le&&(i(this.#i).set(n,t),a.layer.visible=t,this.#s(a,t))}}#h(e){if(e&&this.#t)return this.#t.getVisibilityGroupConfig(e)}#a(e){this.#t&&this.#t.resolveInheritance(e)}#m(e){const t=e.map(r=>this.#g(r,void 0));return this.#v([...t])}#l(e){if(e&&this.#t)return this.#t.getItemConfig(e)}#v(e){e.reverse();for(const t of e)t.children?.length&&this.#v(t.children);return e}#g(e,t){const r=this.#l(e.id);if(r&&r.customConverterId){if(!i(this.#c).has(r.customConverterId))throw new Error(`Custom converter not found: ${r.customConverterId}`);const a=i(this.#c).get(r.customConverterId);if(!a)throw new Error(`Custom converter not found: ${r.customConverterId}`);return a.layerToNode(e,t??null)}const n=new le(e.id,e.title,e,[],t);if(e.visible=r?.isVisibleOnInit??!1,i(this.#i).set(e.id,e.visible),this.#x(e)&&r?.showFields){const a=e;a.loaded||console.warn(`Layer not loaded: ${e.id}`);for(const o of a.fields??[]){const c=this.#p(o,n);n.children.push(c)}}if(this.#S(e)){const a=e;return n.children=a.layers.toArray().map(o=>this.#g(o,n)),n}if(this.#b(e)){const a=e;if(a.sublayers&&a.sublayers.length>0){const o=a.sublayers;n.children=o.toArray().map(this.#y)}}return n}#p(e,t){const r=this.#_(t.id,e.name),n=new Be(r,e.alias||e.name,t.layer,e,[],t),a=this.#l(r);return i(this.#i).set(r,a?.isVisibleOnInit??!1),n}#b(e){return e.type==="map-image"||e.type==="wms"}#y(e){const t=new le(e.uid,e.title,e);return e.sublayers?.length&&(t.children=e.sublayers.toArray().map(this.#y)),t}#w(e,t){for(const r of e)t.set(r.id,r),r.children?.length&&this.#w(r.children,t)}#_(e,t){return`${e}-${t}`}#S(e){return e.type==="group"}#x(e){return e.type==="feature"}#d(){if(!this.initialized)throw new Error("TreeviewStore is not initialized. Call initialize() first.")}}function ji(s,e){Q(e,!0);const t=W(e,"webMap",3,null);de(()=>{!t()||e.treeviewStore.initialized||e.treeviewStore.initialize(t().layers.toArray(),e.treeviewConfigStore)});var r=P(),n=S(r);{var a=o=>{var c=P(),g=S(c);J(g,()=>$t,(h,d)=>{d(h,{children:(p,l)=>{var m=P(),u=S(m);Ce(u,17,()=>e.treeviewStore.getNodes(),f=>f.id,(f,x)=>{er(f,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return i(x)},onNodeClick:()=>{},onNodeVisibilityChange:(T,C)=>e.treeviewStore.setVisibilityState(T.id,C),getNodeVisibility:T=>e.treeviewStore.getVisibilityState(T),depth:0,useLayerTypeIcon:!0})}),v(p,m)},$$slots:{default:!0}})}),v(o,c)};G(n,o=>{e.treeviewStore.initialized&&o(a)})}v(s,r),ee()}function Wi(s,e){Q(e,!0),de(()=>{if(!X.lastAddedArea)return;(async()=>{if(X.lastAddedArea===null)return;const r=await X.getAreaNamesById([X.lastAddedArea.id]);!r||r.length===0||!r[0]||He.success(`Area added: ${r?.[0]}`)})()}),de(()=>{if(!X.lastRemovedArea)return;(async()=>{if(X.lastRemovedArea===null)return;const r=await X.getAreaNamesById([X.lastRemovedArea.id]);!r||r.length===0||!r[0]||He.success(`Area removed: ${r?.[0]}`)})()}),ee()}var qi=H("<!> <!>",1),Yi=H('<div class="tab-list-wrapper flex-shrink-0 svelte-rohqkk"><!></div> <!>',1);function Zi(s,e){Q(e,!0);const t=W(e,"triggers",19,()=>[]);var r=P(),n=S(r);J(n,()=>Or,(a,o)=>{o(a,{get value(){return e.value},get onValueChange(){return e.onValueChange},class:"flex h-full w-full flex-col",children:(c,g)=>{var h=Yi(),d=S(h),p=b(d);J(p,()=>Fr,(m,u)=>{u(m,{class:"tab-list",children:(f,x)=>{var T=P(),C=S(T);Ce(C,17,t,Ge,(w,I,V,k)=>{let j=()=>i(I).value,R=()=>i(I).label;var B=qi(),U=S(B);J(U,()=>Pr,(F,D)=>{D(F,{get value(){return j()},class:"tab-trigger",children:(K,E)=>{Pe();var q=De();oe(()=>he(q,R())),v(K,q)},$$slots:{default:!0}})});var re=L(U,2);{var N=F=>{ri(F,{class:"separator"})};G(re,F=>{j()!==t()[t().length-1]?.value&&F(N)})}v(w,B)}),v(f,T)},$$slots:{default:!0}})}),y(d);var l=L(d,2);se(l,()=>e.children??ne),v(c,h)},$$slots:{default:!0}})}),v(s,r),ee()}var Xi=H('<div class="min-w-0 space-y-2 overflow-hidden p-4"><!></div>'),Ki=H("<!> <!>",1);function lt(s,e){var t=P(),r=S(t);J(r,()=>Vr,(n,a)=>{a(n,{get value(){return e.value},class:"flex min-h-0 flex-1 flex-col",children:(o,c)=>{var g=Ki(),h=S(g);J(h,()=>Ct,(l,m)=>{m(l,{class:"card-content flex min-h-0 flex-1 flex-col overflow-hidden p-0",children:(u,f)=>{jt(u,{class:"h-full w-full",children:(x,T)=>{var C=Xi(),w=b(C);se(w,()=>e.children??ne),y(C),v(x,C)},$$slots:{default:!0}})},$$slots:{default:!0}})});var d=L(h,2);{var p=l=>{var m=P(),u=S(m);J(u,()=>ii,(f,x)=>{x(f,{class:"flex flex-shrink-0 items-center justify-between",children:(T,C)=>{var w=P(),I=S(w);se(I,()=>e.footer),v(T,w)},$$slots:{default:!0}})}),v(l,m)};G(d,l=>{e.footer&&l(p)})}v(o,g)},$$slots:{default:!0}})}),v(s,t)}class Ji{#e=M(!1);get isLoaded(){return i(this.#e)}set isLoaded(e){_(this.#e,e,!0)}#t=M(null);get data(){return i(this.#t)}set data(e){_(this.#t,e,!0)}#r=z(()=>{const e=new Ae;function t(r){e.set(r.id,r),r.type==="group"&&r.layers.forEach(a=>{t(a)})}return this.data&&this.data.layers.forEach(r=>{t(r)}),e});get dataLookup(){return i(this.#r)}set dataLookup(e){_(this.#r,e)}#n=M(!1);get loading(){return i(this.#n)}set loading(e){_(this.#n,e,!0)}#i=M(null);get error(){return i(this.#i)}set error(e){_(this.#i,e,!0)}async initializeAsync(e){if(!this.data){this.loading=!0,this.error=null;try{const{portalUrl:t,itemId:r,proxy:n}=e;await this.configurePortalAsync(t,n),await this.loadwebmapAsync(r)}catch(t){console.error("Error initializing webmap:",t),this.error=t.message}finally{this.loading=!1}}}async configurePortalAsync(e,t){if(!e)return;const r=await tn();if(r.portalUrl=e,console.log(r),!t)return;const{addProxyRule:n}=await rn();console.log("Adding proxy rule for portal traffic"),n({urlPrefix:t?.urlPrefix,proxyUrl:t?.proxyUrl})}async loadwebmapAsync(e){if(this.data)return;const[t,r]=await Promise.all([Qi(),en()]),n=new r({id:e}),a=new t({portalItem:n});this.data=a,await this.data.when(),this.data.loaded&&(this.isLoaded=!0)}clear(){this.data=null,this.loading=!1,this.error=null}clearError(){this.error=null}getWebmap(){return this.data}}let pt=null,yt=null,wt=null,bt=null;async function Qi(){return pt||(pt=Ne(()=>import("../chunks/huXfT4GN.js").then(s=>s.W),__vite__mapDeps([87,1,2,3,5,6,7,0,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,39,40,41,42,43,44,45,46,47,48,49,50,51,88,89,90,91,62,92,93,74,75,65,94,95,96,61,97,98,99,100,64,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,52,53,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171]),import.meta.url).then(s=>s.default)),pt}async function en(){return yt||(yt=Ne(()=>import("../chunks/DxjcXvGa.js"),__vite__mapDeps([16,5,1,2,3,6,7,13,10]),import.meta.url).then(s=>s.default)),yt}async function tn(){return wt||(wt=Ne(()=>import("../chunks/DHq0rblm.js").then(s=>s.Z),[],import.meta.url).then(s=>s.default)),wt}async function rn(){return bt||(bt=Ne(()=>import("../chunks/BgvLO-3W.js").then(s=>s.O),__vite__mapDeps([7,2,3]),import.meta.url)),bt}class nn{#e=M(ae(new Ae));get DataSelections(){return i(this.#e)}set DataSelections(e){_(this.#e,e,!0)}addSelection(e){this.DataSelections.set(e.layerId,e),He.success(`'${e.name}' Added`)}removeSelection(e){const t=this.DataSelections.get(e);this.DataSelections.delete(e),He.success(`'${t?.name}' Removed`)}updateSelection(e,t){if(!(e instanceof le)){this.updateChildrenSelection(e,t);return}if(e instanceof Be){this.updateFieldSelection(e,t);return}this.updateLayerSelection(e,t)}getSelectionState(e){if(!(e instanceof le))return this.determineSelectionStateFromChildren(e);if(this.isGroupLayer(e))return this.determineSelectionStateFromChildren(e);let t;return e instanceof Be?(t=this.DataSelections.get(e.featureLayer.id),t&&t.fields.has(e.field.name)?ie.Active:ie.Inactive):(t=this.DataSelections.get(e.id),t?this.isFeatureLayer(e)&&e.children&&e.children.length>0?this.determineSelectionStateFromChildren(e):ie.Active:ie.Inactive)}updateLayerSelection(e,t){let r=this.DataSelections.get(e.id);switch(t){case ie.Active:!r&&!this.isGroupLayer(e)&&(r=this.createAndAddDataSelection(e.id,e.layer.title||""));for(const n of e.children||[])this.updateSelection(n,t);break;case ie.Inactive:r&&!this.isGroupLayer(e)&&this.removeSelection(e.id),this.updateChildrenSelection(e,t);break}}updateFieldSelection(e,t){let r=this.DataSelections.get(e.featureLayer.id);switch(t){case ie.Active:r||(r=this.createAndAddDataSelection(e.featureLayer.id,e.featureLayer.title||"")),r.fields.add(e.field.name);break;case ie.Inactive:if(!r)break;r.fields.delete(e.field.name),r.fields.size===0&&this.removeSelection(r.layerId);break}}updateChildrenSelection(e,t){for(const r of e.children||[])this.updateSelection(r,t)}determineSelectionStateFromChildren(e){let t=0,r=0;for(const n of e.children||[]){r++;const a=this.getSelectionState(n);if(a===ie.Active||this.isFeatureLayer(n)&&a!==ie.Inactive)t++;else if(a===ie.Indeterminate)return ie.Indeterminate}return t===0?ie.Inactive:t===r?ie.Active:ie.Indeterminate}createAndAddDataSelection(e,t){const r={layerId:e,name:t,fields:new Ze};return this.addSelection(r),r}isGroupLayer(e){return e instanceof le&&e.layer.type==="group"}isFeatureLayer(e){return e instanceof le&&e.layer.type==="feature"}}const me=new nn;function an(s,e){s.stopPropagation(),e.onFilterClicked?.(e.layerId)}var on=H("<button><!></button>");function sn(s,e){Q(e,!0);let t=M(ae(e.hasFiltersApplied?.(e.layerId)??!1));de(()=>{_(t,e.hasFiltersApplied?.(e.layerId)??!1,!0)});const r=z(()=>i(t)?Er:Dr);var n=on();let a;n.__click=[an,e];var o=b(n);Xe(o,()=>i(r)),y(n),oe(c=>{a=ze(n,1,"filter-btn svelte-k95pvd",null,a,c),dt(n,"aria-pressed",i(t))},[()=>({active:i(t)})]),v(s,n),ee()}ft(["click"]);class ln{#e=M(null);get ActiveLayer(){return i(this.#e)}set ActiveLayer(e){_(this.#e,e,!0)}}var dn=H('<li class="area-item svelte-81yb5c"><span class="area-name svelte-81yb5c"> </span> <!></li>'),cn=H('<ul class="selected-list svelte-81yb5c"></ul> <p class="count svelte-81yb5c"> </p>',1),un=H('<p class="no-selection svelte-81yb5c">No areas selected</p>'),fn=H('<li class="data-item svelte-81yb5c"><span class="data-name svelte-81yb5c"> </span> <div class="data-actions svelte-81yb5c"><!> <!></div></li>'),hn=H('<ul class="selected-list svelte-81yb5c"></ul> <p class="count svelte-81yb5c"> </p>',1),vn=H('<p class="no-selection svelte-81yb5c">No data selected</p>'),gn=H('<h2 class="svelte-81yb5c">Export Options</h2> <div class="section svelte-81yb5c"><h3 class="svelte-81yb5c"> </h3> <h4 class="svelte-81yb5c">Selected Areas</h4> <!></div> <div class="section svelte-81yb5c"><h4 class="svelte-81yb5c">Selected Data</h4> <!></div>',1);function mn(s,e){Q(e,!0);const t=W(e,"fieldFilterMenuStore",7);let r=M(ae([]));de(()=>{if(!X.layerHighlightState.areaInfos.length){_(r,[],!0);return}(async()=>{const I=await X.getAreaNamesById(X.layerHighlightState.areaInfos.map(k=>k.id)),V=[];for(let k=0;k<I.length;k++)V.push({name:I[k]||"Unknown Area",HighlightAreaInfo:X.layerHighlightState.areaInfos[k]});_(r,V,!0)})()});function n(w){const I=i(r).findIndex(V=>V.name===w);I!==-1&&X.removeSelectedArea(i(r)[I]?.HighlightAreaInfo.id)}function a(w){console.log("[export-menu] Removing data selection for layerId:",w),me.DataSelections.delete(w),console.log("[export-menu] Current SelectedData:",ni(me.DataSelections))}function o(w){if(t().ActiveLayer?.id===w){t().ActiveLayer=null;return}const I=e.webMapStore.dataLookup.get(w);if(!I){console.warn(`[export-menu] Layer with ID ${w} not found in web map store.`);return}t().ActiveLayer=I}function c(w){const I=me.DataSelections.get(w);return!(!I||!I.fields||I.fields.size===0||I.fields.size===e.webMapStore.dataLookup.get(w)?.fields?.length)}var g=gn(),h=L(S(g),2),d=b(h),p=b(d,!0);y(d);var l=L(d,4);{var m=w=>{var I=cn(),V=S(I);Ce(V,21,()=>i(r),Ge,(R,B)=>{var U=dn(),re=b(U),N=b(re,!0);y(re);var F=L(re,2);Se(F,{variant:"ghost",size:"sm",class:"area-remove-btn",onclick:()=>n(i(B).name),children:(D,K)=>{Pe();var E=De("");v(D,E)},$$slots:{default:!0}}),y(U),oe(()=>he(N,i(B).name)),v(R,U)}),y(V);var k=L(V,2),j=b(k);y(k),oe(()=>he(j,`${i(r).length??""} area(s) selected`)),v(w,I)},u=w=>{var I=un();v(w,I)};G(l,w=>{i(r).length>0?w(m):w(u,!1)})}y(h);var f=L(h,2),x=L(b(f),2);{var T=w=>{var I=hn(),V=S(I);Ce(V,21,()=>[...me.DataSelections.values()],Ge,(R,B)=>{var U=fn(),re=b(U),N=b(re,!0);y(re);var F=L(re,2),D=b(F);{var K=q=>{sn(q,{get layerId(){return i(B).layerId},onFilterClicked:o,hasFiltersApplied:c})};G(D,q=>{i(B).fields&&q(K)})}var E=L(D,2);Se(E,{variant:"ghost",size:"sm",class:"data-remove-btn",onclick:()=>a(i(B).layerId),children:(q,$)=>{Pe();var ve=De("");v(q,ve)},$$slots:{default:!0}}),y(F),y(U),oe(()=>he(N,i(B).name)),v(R,U)}),y(V);var k=L(V,2),j=b(k);y(k),oe(()=>he(j,`${me.DataSelections.size??""} data layer(s) selected`)),v(w,I)},C=w=>{var I=vn();v(w,I)};G(x,w=>{me.DataSelections.size>0?w(T):w(C,!1)})}y(f),oe(w=>he(p,w),[()=>e.areaSelectionTreeviewStore.initialized?e.areaSelectionTreeviewStore.getVisibleNodes()[0]?.name:"Loading..."]),v(s,g),ee()}class pn{#e=M(ae([]));get downloads(){return i(this.#e)}set downloads(e){_(this.#e,e,!0)}}const Re=new pn;var yn=H('<p class="text-sm text-muted-foreground">Click "Export" to begin the download.</p> <!>',1);function wn(s,e){Q(e,!0);const t=()=>xr(Rr,"$page",r),[r,n]=Sr();function a(){if(X.layerHighlightState.areaInfos.length<=0){He.error("Please select at least one area to export.");return}if(me.DataSelections.size<=0){He.error("Please select at least one data layer to export.");return}console.log("Starting export..."),He.info("Export started successfully.",{duration:4e3});const g=crypto.randomUUID();Re.downloads.push({id:g,url:`${t().url}/${g}`,status:"pending"}),e.onExportSuccess?.()}var o=yn(),c=L(S(o),2);Se(c,{onclick:a,children:(g,h)=>{Pe();var d=De("Export");v(g,d)},$$slots:{default:!0}}),v(s,o),ee(),n()}var bn=H('<p class="text-sm font-medium"> </p>'),_n=H('<div class="pointer-events-none fixed z-50 transition-opacity duration-200"><!></div>');function Sn(s,e){Q(e,!0);let t=M(null),r=M(ae({x:0,y:0})),n=0;const a=h=>{_(r,{x:h.clientX,y:h.clientY},!0)};de(()=>(document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousemove",a)})),de(()=>{const h=X.currentHoveredArea?.id,d=++n;if(!h){_(t,null);return}(async()=>{const p=await X.getAreaNamesById([h]);d===n&&X.currentHoveredArea?.id===h&&_(t,p[0]??null,!0)})()});var o=P(),c=S(o);{var g=h=>{var d=_n(),p=b(d);J(p,()=>Wt,(l,m)=>{m(l,{class:"max-w-xs border !py-2 shadow-lg",children:(u,f)=>{var x=P(),T=S(x);J(T,()=>Ct,(C,w)=>{w(C,{class:"!px-3 !py-0",children:(I,V)=>{var k=bn(),j=b(k,!0);y(k),oe(()=>he(j,i(t))),v(I,k)},$$slots:{default:!0}})}),v(u,x)},$$slots:{default:!0}})}),y(d),oe(()=>Fe(d,`left: ${i(r).x+10}px; top: ${i(r).y-10}px;`)),v(h,d)};G(c,h=>{i(t)&&h(g)})}v(s,o),ee()}function xn(s,e){s.target===s.currentTarget&&e()}var In=(s,e)=>s.key==="Escape"&&e(),Cn=(s,e,t)=>e(i(t).name),Tn=H('<div class="info-icon-container svelte-fp5rsc"><!></div>'),kn=H('<div class="field-content-wrapper svelte-fp5rsc"><!> <button class="field-content svelte-fp5rsc" tabindex="0"><div class="field-name-container svelte-fp5rsc"><span class="field-name svelte-fp5rsc"> </span> <!></div></button></div>'),An=H('<div class="master-checkbox-container svelte-fp5rsc"><!> <span class="master-checkbox-label svelte-fp5rsc">Select All Fields</span></div> <!> <!>',1),Ln=H("<!> <!>",1),Hn=H("<!> <!>",1),Mn=H('<button class="close-button svelte-fp5rsc" aria-label="Close"><!></button> <!>',1),Nn=H('<div class="card-container svelte-fp5rsc" role="dialog" aria-modal="true" tabindex="-1"><!></div>');function zn(s,e){Q(e,!0);const t=W(e,"fieldFilterMenuStore",7);let r=M(null),n=M(ae(new Ze)),a=z(()=>{if(!i(r)||!i(r).fields)return{checked:!1,indeterminate:!1};const u=i(r).fields.length,f=i(n)?.size||0;return f===0?{checked:!1,indeterminate:!1}:f===u?{checked:!0,indeterminate:!1}:{checked:!1,indeterminate:!0}});de(()=>{console.log("Active Layer to Filter:",t().ActiveLayer);const u=t().ActiveLayer;if(_(r,u,!0),u){const f=me.DataSelections.get(u.id);f?.fields?_(n,new Ze([...f.fields]),!0):_(n,new Ze,!0)}});function o(){c(),t().ActiveLayer=null}function c(){if(!i(r))return;let u=me.DataSelections.get(i(r).id);if(u){if((u.fields===void 0||u.fields===null)&&(u.fields=new Ze),i(n).size===0){me.removeSelection(i(r).id);return}u.fields.clear(),i(n).forEach(f=>{u.fields?.add(f)})}}function g(u){i(r)&&(i(n).has(u)?i(n).delete(u):i(n).add(u))}function h(){if(!i(r)?.fields)return;(i(n)?.size||0)===0?i(r).fields.forEach(f=>{i(n).add(f.name)}):i(n).clear()}function d(){return i(r)?.fields?i(r).fields:[]}var p=P(),l=S(p);{var m=u=>{var f=Nn();f.__click=[xn,o],f.__keydown=[In,o];var x=b(f);J(x,()=>Wt,(T,C)=>{C(T,{class:"command-card",children:(w,I)=>{var V=Mn(),k=S(V);k.__click=o;var j=b(k);ai(j,{size:20}),y(k);var R=L(k,2);J(R,()=>Ct,(B,U)=>{U(B,{class:"card-content",children:(re,N)=>{var F=P(),D=S(F);J(D,()=>oi,(K,E)=>{E(K,{children:(q,$)=>{var ve=Hn(),te=S(ve);J(te,()=>si,(ce,ge)=>{ge(ce,{placeholder:"Search for fields..."})});var ue=L(te,2);J(ue,()=>li,(ce,ge)=>{ge(ce,{children:(we,pe)=>{var Ue=Ln(),Oe=S(Ue);J(Oe,()=>di,(Y,Z)=>{Z(Y,{children:(fe,be)=>{Pe();var _e=De("No results found.");v(fe,_e)},$$slots:{default:!0}})});var A=L(Oe,2);J(A,()=>ci,(Y,Z)=>{Z(Y,{heading:"Fields",children:(fe,be)=>{var _e=An(),Ie=S(_e),$e=b(Ie);Mt($e,{get checked(){return i(a).checked},get indeterminate(){return i(a).indeterminate},onCheckedChange:h}),Pe(2),y(Ie);var vt=L(Ie,2);J(vt,()=>Gr,(je,ye)=>{ye(je,{})});var et=L(vt,2);Ce(et,17,d,Ge,(je,ye)=>{var tt=P(),Me=S(tt);J(Me,()=>ui,(We,Ve)=>{Ve(We,{class:"field-item",onselect:()=>g(i(ye).name),children:(qe,rt)=>{var Ee=kn(),kt=b(Ee);{let Ye=z(()=>i(n)?.has(i(ye).name)??!1);Mt(kt,{class:"field-checkbox",get checked(){return i(Ye)},onCheckedChange:()=>g(i(ye).name)})}var gt=L(kt,2);gt.__click=[Cn,g,ye];var At=b(gt),mt=b(At),nr=b(mt,!0);y(mt);var ar=L(mt,2);{var or=Ye=>{var it=Tn(),sr=b(it);Xe(sr,()=>Br),y(it),oe(()=>dt(it,"title",i(ye).description)),v(Ye,it)};G(ar,Ye=>{i(ye).description&&Ye(or)})}y(At),y(gt),y(Ee),oe(()=>he(nr,i(ye).alias||i(ye).name)),v(qe,Ee)},$$slots:{default:!0}})}),v(je,tt)}),v(fe,_e)},$$slots:{default:!0}})}),v(we,Ue)},$$slots:{default:!0}})}),v(q,ve)},$$slots:{default:!0}})}),v(re,F)},$$slots:{default:!0}})}),v(w,V)},$$slots:{default:!0}})}),y(f),v(u,f)};G(l,u=>{i(r)&&u(m)})}v(s,p),ee()}ft(["click","keydown"]);var Fn=H('<li class="download-item svelte-vgw5fc"><div class="download-info svelte-vgw5fc"><span class="download-url svelte-vgw5fc"> </span></div> <div class="download-actions svelte-vgw5fc"><div><!></div> <!> <!> <!></div></li>'),Pn=H('<ul class="selected-list svelte-vgw5fc"></ul> <p class="count svelte-vgw5fc"> </p>',1),On=H('<p class="no-selection svelte-vgw5fc">No downloads in queue</p>'),Vn=H('<div class="section svelte-vgw5fc"><h4 class="svelte-vgw5fc">Download Queue</h4> <!></div>');function En(s,e){Q(e,!0);let t=M(ae(new Set));function r(l){const m=Re.downloads.findIndex(u=>u.url===l);m!==-1&&Re.downloads.splice(m,1)}async function n(l){try{await navigator.clipboard.writeText(l),_(t,new Set(i(t)).add(l),!0),He.success("URL copied to clipboard"),setTimeout(()=>{const m=new Set(i(t));m.delete(l),_(t,m,!0)},2e3)}catch(m){console.error("Failed to copy URL:",m),He.error("Failed to copy URL to clipboard")}}function a(l){switch(l){case"completed":return"#059669";case"in-progress":return"#2563eb";case"failed":return"#dc2626";case"pending":default:return"#6b7280"}}function o(l){switch(l){case"completed":return"Completed";case"in-progress":return"In Progress";case"failed":return"Failed";case"pending":default:return"Pending"}}function c(l){switch(l){case"completed":return Yr;case"in-progress":return qr;case"failed":return Wr;case"pending":default:return jr}}var g=Vn(),h=L(b(g),2);{var d=l=>{var m=Pn(),u=S(m);Ce(u,21,()=>Re.downloads,Ge,(T,C)=>{var w=Fn(),I=b(w),V=b(I),k=b(V,!0);y(V),y(I);var j=L(I,2),R=b(j),B=b(R);{let D=z(()=>a(i(C).status));Se(B,{variant:"ghost",size:"sm",class:"download-status-btn",get style(){return`color: ${i(D)??""}`},disabled:!0,children:(K,E)=>{const q=z(()=>c(i(C).status));var $=P(),ve=S($);{let te=z(()=>i(C).status==="in-progress"?"spinning":"");J(ve,()=>i(q),(ue,ce)=>{ce(ue,{size:14,get class(){return i(te)}})})}v(K,$)},$$slots:{default:!0}})}y(R);var U=L(R,2);Se(U,{variant:"ghost",size:"sm",class:"download-clipboard-btn",onclick:()=>n(i(C).url),title:"Copy URL to clipboard",children:(D,K)=>{var E=P(),q=S(E);{var $=te=>{Ur(te,{size:14})},ve=te=>{$r(te,{size:14})};G(q,te=>{i(t).has(i(C).url)?te($):te(ve,!1)})}v(D,E)},$$slots:{default:!0}});var re=L(U,2);{var N=D=>{Se(D,{variant:"ghost",size:"sm",class:"download-action-btn",onclick:()=>window.open(i(C).url,"_blank"),title:"Open download",children:(K,E)=>{Pe();var q=De("");v(K,q)},$$slots:{default:!0}})};G(re,D=>{i(C).status==="completed"&&D(N)})}var F=L(re,2);Se(F,{variant:"ghost",size:"sm",class:"download-remove-btn",onclick:()=>r(i(C).url),title:"Remove from queue",children:(D,K)=>{Pe();var E=De("");v(D,E)},$$slots:{default:!0}}),y(j),y(w),oe(D=>{dt(V,"title",i(C).url),he(k,i(C).id),dt(R,"title",D)},[()=>o(i(C).status)]),v(T,w)}),y(u);var f=L(u,2),x=b(f);y(f),oe(()=>he(x,`${Re.downloads.length??""} download(s) in queue`)),v(l,m)},p=l=>{var m=On();v(l,m)};G(h,l=>{Re.downloads.length>0?l(d):l(p,!1)})}y(g),v(s,g),ee()}var Dn=H('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><!> <span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function Ot(s,e){Q(e,!0);const t=W(e,"isFolder",3,!1),r=W(e,"isOpen",3,!1),n=`calc(100% - ${e.depth*1}rem)`;var a=Dn();a.__click=function(...f){e.onclick?.apply(this,f)};var o=b(a),c=b(o),g=b(c);{var h=f=>{Ut(f,{get isOpen(){return r()}})};G(g,f=>{t()&&f(h)})}var d=L(g,2),p=b(d);Xe(p,()=>e.icon),y(d);var l=L(d,2),m=b(l,!0);y(l),y(c);var u=L(c,2);se(u,()=>e.children??ne),y(o),y(a),oe(f=>{ze(a,1,f),Fe(a,`width: ${n};`),he(m,e.name)},[()=>ei(Ri({enhancedHover:!0,includeFont:!0}))]),v(s,a),ee()}ft(["click"]);var Rn=H('<div data-slot="checkbox-indicator" class="text-current transition-none"><!></div>');function Gn(s,e){Q(e,!0);let t=W(e,"ref",15,null),r=W(e,"checked",11,!1),n=W(e,"indeterminate",11,!1),a=Te(e,["$$slots","$$events","$$legacy","ref","checked","indeterminate","class"]),o=M(ae(r())),c=M(ae(n()));de(()=>{_(o,r())}),de(()=>{_(c,n())});var g=P(),h=S(g);{const d=(l,m)=>{let u=()=>m?.().checked,f=()=>m?.().indeterminate;var x=Rn(),T=b(x);{var C=I=>{ki(I,{class:"size-3.5"})},w=I=>{var V=P(),k=S(V);{var j=R=>{Xr(R,{class:"size-3.5"})};G(k,R=>{f()&&R(j)},!0)}v(I,V)};G(T,I=>{u()?I(C):I(w,!1)})}y(x),v(l,x)};let p=z(()=>Mr("peer flex size-4 shrink-0 items-center justify-center rounded-[4px] border border-input shadow-xs transition-shadow outline-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[state=checked]:border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:bg-input/30 dark:aria-invalid:ring-destructive/40 dark:data-[state=checked]:bg-primary",e.class));J(h,()=>Zr,(l,m)=>{m(l,xe({"data-slot":"checkbox",get class(){return i(p)}},()=>a,{get ref(){return t()},set ref(u){t(u)},get checked(){return i(o)},set checked(u){_(o,u,!0)},get indeterminate(){return i(c)},set indeterminate(u){_(c,u,!0)},children:d,$$slots:{default:!0}}))})}v(s,g),ee()}var Bn=H("<div><!></div>");function Vt(s,e){Q(e,!0);let t=z(()=>e.getDownloadState?.(e.node)??ie.Inactive),r=z(()=>i(t)===ie.Active),n=z(()=>i(t)===ie.Indeterminate);function a(g){g.stopPropagation();const h=i(t)===ie.Active?ie.Inactive:ie.Active;e.onDownloadStateChanged?.(e.node,h)}var o=Bn(),c=b(o);Gn(c,{get checked(){return i(r)},get indeterminate(){return i(n)},onclick:a}),y(o),v(s,o),ee()}var Un=H('<div class="flex items-center gap-2"><!> <!></div>'),$n=H('<div class="flex items-center gap-2"><!> <!></div>');function rr(s,e){Q(e,!0);const t=T=>{var C=P(),w=S(C);{var I=V=>{var k=P(),j=S(k);{var R=U=>{Ot(U,{get icon(){return i(p)},get name(){return e.node.name},get depth(){return a()},onclick:x,get isFolder(){return c},get isOpen(){return i(h)},children:N=>{var F=Un(),D=b(F);{var K=$=>{Vt($,{get node(){return e.node},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState}})};G(D,$=>{e.isDownloadable&&$(K)})}var E=L(D,2);{var q=$=>{Nt($,{get checked(){return i(d)},onCheckedChange:u})};G(E,$=>{g&&$(q)})}y(F),v(N,F)},$$slots:{default:!0}})},B=U=>{Ot(U,{get icon(){return i(p)},get name(){return e.node.name},get depth(){return a()},onclick:f,get isFolder(){return c},children:N=>{var F=$n(),D=b(F);{var K=$=>{Vt($,{get node(){return e.node},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState}})};G(D,$=>{e.isDownloadable&&$(K)})}var E=L(D,2);{var q=$=>{Nt($,{get checked(){return i(d)},onCheckedChange:u})};G(E,$=>{g&&$(q)})}y(F),v(N,F)},$$slots:{default:!0}})};G(j,U=>{c?U(R):U(B,!1)})}v(V,k)};G(w,V=>{n()?.getItemConfig(e.node.id)?.isHidden||V(I)})}v(T,C)},r=(T,C=ne)=>{var w=P(),I=S(w);{var V=k=>{{let j=z(()=>n()?.getItemConfig(C().id)?.isDownloadable??!0),R=z(()=>a()+1);rr(k,{get treeviewConfigStore(){return n()},get node(){return C()},get isDownloadable(){return i(j)},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState},get onFilterClicked(){return e.onFilterClicked},get hasFiltersApplied(){return e.hasFiltersApplied},get getNodeVisibility(){return e.getNodeVisibility},get depth(){return i(R)},get useLayerTypeIcon(){return o()}})}};G(I,k=>{c&&i(h)&&!n()?.getItemConfig(C().id)?.isHidden&&k(V)})}v(T,w)},n=W(e,"treeviewConfigStore",3,null),a=W(e,"depth",3,0),o=W(e,"useLayerTypeIcon",3,!1),c=!!(e.node.children&&e.node.children.length),g=!c||e.node instanceof le&&e.node.layer.type==="feature";let h=M(!1),d=M(!1),p=M(""),l=M(!1),m=M(!1);de(()=>{if(!e.node)return;const T=e.getNodeVisibility?e.getNodeVisibility(e.node.id):!1;_(d,T??!1,!0),e.node instanceof le&&_(p,Qt(e.node.layer,o(),c,i(h)),!0)}),de(()=>{if(!(e.node instanceof le))return;const T=(e.getDownloadState?.(e.node)===ie.Active&&e.node.layer.type==="feature")??!1;T&&!i(l)?(_(l,!0),_(m,!1)):!T&&i(l)&&(_(m,!0),setTimeout(()=>{_(l,!1),_(m,!1)},180))});function u(){!g||!e.onNodeVisibilityChange||(_(d,!i(d)),e.onNodeVisibilityChange(e.node,i(d)))}function f(){e.onNodeClick?.(e.node)}function x(){_(h,!i(h)),e.onNodeClick?.(e.node)}{let T=z(()=>c?e.node.children:null);Zt(s,{get isOpen(){return i(h)},get content(){return t},get childNodes(){return i(T)},get childNode(){return r}})}ee()}class jn{configStore;constructor(e){this.configStore=e}}function Wn(s){return s.replace(/&deg;/gi,"").replace(/&nbsp;/gi," ").replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">")}class qn extends jn{id="aliasPath";layerToNode(e,t){const r=new le(e.id,e.title,e,[],t),n=this.configStore.getItemConfig(e.id);if(this.#r(e)&&n?.showFields){const a=e;a.loaded||console.warn(`Layer not loaded: ${e.id}`);const o=new Map;for(const c of a.fields??[]){const g=this.configStore.getItemConfig(this.#t(e.id,c.name));!g||g.isHidden||this.#e(c,r,o)}r.children.sort((c,g)=>c.children.length>0&&g.children.length===0?1:c.children.length===0&&g.children.length>0?-1:0)}return r}#e(e,t,r=new Map){const n=this.#t(t.id,e.name),o=Wn(e.alias||"")?.split("|").map(l=>l.trim()).filter(Boolean)??[];if(o.length===0){const l=new Be(n,e.alias||e.name,t.layer,e,[],t);return t.children.push(l),l}const c=o.slice(0,-1),g=o[o.length-1];let h=t;const d=(l,m)=>{l.children??=[],l.children.includes(m)||l.children.push(m)};for(let l=0;l<c.length;l++){const m=c[l],u=o.slice(0,l+1).join("::"),f=`${t.id}::${u}`;let x=r.get(f);x||(x=new Yt(f,m,[],h),r.set(f,x),d(h,x)),h=x}const p=new Be(n,g||e.name,t.layer,e,[],h);return d(h,p),p}#t(e,t){return`${e}-${t}`}#r(e){return e.type==="feature"}}function Yn(s,e){Q(e,!0);const t=W(e,"webMap",3,null),r=W(e,"fieldFilterMenuStore",7),n=new tr;de(()=>{if(!t()||n.initialized)return;(async()=>{await t().when(),await a(t().layers.toArray()),console.log("[data-selection-tree-view] fields to hide:",e.fieldsToHide);const u=new qn(e.treeviewConfigStore);n.initialize(t().layers.toArray(),e.treeviewConfigStore,[u]),console.log("[data-selection-tree-view] Initialized with layers:",n.getNodes())})()});async function a(m){for(const u of m)u.type==="feature"&&!u.loaded&&(await u.load(),console.log("Loaded feature layer:",u.title)),u.type==="group"&&await a(u.layers.toArray())}function o(m,u){me.updateSelection(m,u)}function c(m){return me.getSelectionState(m)}function g(m){if(r().ActiveLayer?.uid===m){r().ActiveLayer=null;return}const f=n.getNodeById(m);!f||!(f instanceof le)||(r().ActiveLayer=f.layer)}function h(m){const u=me.DataSelections.get(m);if(!u?.fields)return!1;const f=n.getNodeById(m);if(!f||!(f instanceof le))return!1;const x=f.layer.fields?.length||0,T=u.fields.size;return T>0&&T!==x}var d=P(),p=S(d);{var l=m=>{var u=P(),f=S(u);J(f,()=>$t,(x,T)=>{T(x,{children:(C,w)=>{var I=P(),V=S(I);Ce(V,17,()=>n.getNodes(),k=>k.id,(k,j)=>{{let R=z(()=>e.treeviewConfigStore.getItemConfig(i(j).id)?.isDownloadable??!0);rr(k,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return i(j)},get isDownloadable(){return i(R)},onNodeClick:()=>{},onNodeVisibilityChange:(B,U)=>n.setVisibilityState(B.id,U),getNodeVisibility:B=>n.getVisibilityState(B),onDownloadStateChanged:o,getDownloadState:c,onFilterClicked:g,hasFiltersApplied:h,depth:0,useLayerTypeIcon:!0})}}),v(C,I)},$$slots:{default:!0}})}),v(m,u)};G(p,m=>{n.initialized&&m(l)})}v(s,d),ee()}class Et{#e=[];#t=new Map;#r=[];#n=new Map;#i=[];#o=new Map;#c=new Set;constructor(e){if(!e)throw new Error("TreeviewConfigStore requires a valid configuration object.");this.#e=e.items??[],this.#t=new Map(this.#e.map(t=>[t.id,t])),this.#r=e.visibilityGroups??[],this.#n=new Map(this.#r.map(t=>[t.id,t])),this.#i=e.inheritanceGroups??[],this.#o=new Map(this.#i.map(t=>[t.id,t])),e.fieldsToHide&&(this.#c=new Set(e.fieldsToHide.map(t=>t.trim().toLowerCase())))}getItemConfig(e){return this.#t.get(e)}getVisibilityGroupConfig(e){return this.#n.get(e)}getInheritanceGroupConfig(e){return this.#o.get(e)}resolveInheritance(e){if(!(e.length===0||!this.#e||this.#e.length===0))for(const t of e){const r=this.getItemConfig(t.id);this.#u(t,r)}}#u(e,t){const r=this.#s(e,t);if(this.#p(e)&&r.showFields){const n=e;n.loaded||console.warn(`Layer not loaded: ${e.id}`);for(const a of n.fields??[])this.#f(this.#v(e.id,a.name),a.alias||a.name,r)}if(this.#g(e)){const n=e;for(const a of n.layers.toArray())this.#u(a,r)}}#s(e,t){const r=this.#h(e.id,t);return r.type===at.None&&(r.type=Kr(e)),r}#f(e,t,r){const n=this.#h(e,r);return n.type===at.None&&(n.type=at.Field),this.#c.has(t.trim().toLowerCase())&&(n.isHidden=!0),n}#h(e,t){let r=this.getItemConfig(e);const n=r?.inheritanceGroupId?this.getInheritanceGroupConfig(r.inheritanceGroupId):this.getInheritanceGroupConfig(t?.inheritanceGroupId??"");return r={id:e,type:at.None,isDownloadable:this.#a(n,"isDownloadable",r,t,!0),isVisibleOnInit:this.#a(n,"isVisibleOnInit",r,t,!1),isHidden:this.#a(n,"isHidden",r,t,!1),showFields:this.#a(n,"showFields",r,t,!1),visibilityDependencyIds:this.#a(n,"visibilityDependencyIds",r,t,[]),visibilityGroupId:this.#a(n,"visibilityGroupId",r,t,void 0),inheritanceGroupId:this.#a(n,"inheritanceGroupId",r,t,void 0)},this.#l(r),this.#m(r),r}#a(e,t,r,n,a){const o=r?.[t];return o!==void 0?o:e?.inheritedProperties.includes(t)&&n?n[t]??a:a}#m(e){if(this.#t.has(e.id))throw new Error(`Item with id ${e.id} already exists.`);this.#e.push(e),this.#t.set(e.id,e)}#l(e){this.#t.has(e.id)&&(this.#e=this.#e.filter(t=>t.id!==e.id),this.#t.delete(e.id))}#v(e,t){return`${e}-${t}`}#g(e){return e.type==="group"}#p(e){return e.type==="feature"}}const Zn=[{value:"define-areas",label:"Define Areas"},{value:"select-data",label:"Select Data"},{value:"export",label:"Export"},{value:"downloads",label:"Download"}],O=Object.freeze({LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom"});var Xn=H("<!> <div><aside><div><div><!></div></div></aside></div> <!>",1);function ir(s,e){Q(e,!0);const t=W(e,"position",19,()=>O.LEFT),r=W(e,"openIcon",3,Ti),n=W(e,"overlay",3,!1),a=8,o=500,c="calc(var(--header-height, 64px) + 1rem)";let g,h=M(0),d=M(o),p=M(!1);const l=z(()=>t()===O.LEFT||t()===O.RIGHT),m=z(()=>t()===O.LEFT||t()===O.TOP),u=z(()=>i(l)?"500px":"100px"),f=z(()=>e.minSize??i(u)),x=z(()=>parseFloat(i(f))),T=z(()=>i(l)?"width":"height"),C=z(()=>i(l)?"ew-resize":"ns-resize");de(()=>{const A=parseFloat(i(f));i(d)<A&&_(d,A,!0)}),ct(()=>{if(!g)return;const A=new ResizeObserver(Y=>{for(const Z of Y)_(h,i(l)?Z.contentRect.width:Z.contentRect.height,!0)});return A.observe(g),()=>A.disconnect()});function w(A){if(!e.isOpen)return;_(p,!0),A.preventDefault();const Y=i(l)?A.clientX:A.clientY,Z=i(d);function fe(_e){const Ie=i(l)?_e.clientX:_e.clientY,$e=i(m)?Ie-Y:Y-Ie;_(d,Math.max(i(x),Z+$e),!0)}function be(){_(p,!1),document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",be),document.body.style.cursor="",document.body.style.userSelect=""}document.addEventListener("mousemove",fe),document.addEventListener("mouseup",be),document.body.style.cursor=i(C),document.body.style.userSelect="none"}const I=z(()=>()=>{const A=e.isOpen?i(d):0;return n()?{[O.LEFT]:{top:"1rem",left:`${A}px`},[O.RIGHT]:{top:"1rem",right:`${A}px`},[O.TOP]:{top:`${A}px`,left:"1rem"},[O.BOTTOM]:{bottom:`${A}px`,left:"1rem"}}[t()]:{[O.LEFT]:{top:c,left:`${A}px`},[O.RIGHT]:{top:c,right:`${A}px`},[O.TOP]:{top:`${A}px`,left:"1rem"},[O.BOTTOM]:{bottom:`${A}px`,left:"1rem"}}[t()]}),V=z(()=>()=>({[O.LEFT]:"rounded-l-none rounded-r-md",[O.RIGHT]:"rounded-r-none rounded-l-md",[O.TOP]:"rounded-t-none rounded-b-md",[O.BOTTOM]:"rounded-b-none rounded-t-md"})[t()]),k=z(()=>()=>!n()&&e.isOpen?"":{[O.LEFT]:"box-shadow: 4px 0 8px -2px rgb(0 0 0 / 0.1), 2px 0 4px -2px rgb(0 0 0 / 0.1);",[O.RIGHT]:"box-shadow: -4px 0 8px -2px rgb(0 0 0 / 0.1), -2px 0 4px -2px rgb(0 0 0 / 0.1);",[O.TOP]:"box-shadow: 0 4px 8px -2px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);",[O.BOTTOM]:"box-shadow: 0 -4px 8px -2px rgb(0 0 0 / 0.1), 0 -2px 4px -2px rgb(0 0 0 / 0.1);"}[t()]),j=z(()=>()=>({[O.LEFT]:Ii,[O.RIGHT]:Jr,[O.TOP]:Ci,[O.BOTTOM]:xi})[t()]),R=z(()=>()=>({[O.LEFT]:`padding-right: ${a}px`,[O.RIGHT]:`padding-left: ${a}px`,[O.TOP]:`padding-bottom: ${a}px`,[O.BOTTOM]:`padding-top: ${a}px`})[t()]),B=z(()=>()=>{if(!e.isOpen)return{};const A=`${a}px`,Y=e.isOpen?i(d):0,Z=-a/2;return n()?{[O.LEFT]:{left:`${Y+Z}px`,top:"0",width:A,height:"100%"},[O.RIGHT]:{right:`${Y+Z}px`,top:"0",width:A,height:"100%"},[O.TOP]:{top:`${Y+Z}px`,left:"0",height:A,width:"100%"},[O.BOTTOM]:{bottom:`${Y+Z}px`,left:"0",height:A,width:"100%"}}[t()]:{[O.LEFT]:{left:`${Y+Z}px`,top:"0",width:A,height:"100%"},[O.RIGHT]:{right:`${Y+Z}px`,top:"0",width:A,height:"100%"},[O.TOP]:{top:`${Y+Z}px`,left:"0",height:A,width:"100%"},[O.BOTTOM]:{bottom:`${Y+Z}px`,left:"0",height:A,width:"100%"}}[t()]});function U(A){return Object.entries(A).map(([Y,Z])=>`${Y}: ${Z}`).join("; ")}const re=z(()=>i(m)?0:1),N=z(()=>()=>e.isOpen?"translate(0, 0)":{[O.LEFT]:`translate(-${i(d)}px, 0)`,[O.RIGHT]:`translate(${i(d)}px, 0)`,[O.TOP]:`translate(0, -${i(d)}px)`,[O.BOTTOM]:`translate(0, ${i(d)}px)`}[t()]),F=z(()=>()=>{const A=e.isOpen?`${i(d)}px`:"0";if(n()){if(i(l)){const Z={position:"absolute",top:"0",bottom:"0",width:A,height:"100%","z-index":"30"};return Z[t()===O.LEFT?"left":"right"]="0",Z}const Y={position:"absolute",left:"0",right:"0",height:A,width:"100%","z-index":"30"};return Y[t()===O.TOP?"top":"bottom"]="0",Y}return{[i(T)]:A,order:`${i(re)}`}});var D=Xn(),K=S(D);{let A=z(()=>n()?"absolute":"fixed"),Y=z(()=>i(V)()),Z=z(()=>i(p)?"":"transition-all duration-300"),fe=z(()=>U(i(I)())),be=z(()=>i(k)()),_e=z(()=>i(p)?"transition: none !important;":""),Ie=z(()=>e.isOpen?"Close sidebar":"Open sidebar");Se(K,{get onclick(){return e.onToggle},variant:"default",size:"icon",get class(){return`${i(A)??""} z-[40] !bg-background hover:scale-105 hover:!bg-background/90 ${i(Y)??""} ${i(Z)??""}`},get style(){return`${i(fe)??""}; pointer-events: auto; ${i(be)??""} ${i(_e)??""}`},get"aria-label"(){return i(Ie)},get"aria-expanded"(){return e.isOpen},children:($e,vt)=>{var et=P(),je=S(et);{var ye=Me=>{const We=z(()=>i(j)());var Ve=P(),qe=S(Ve);J(qe,()=>i(We),(rt,Ee)=>{Ee(rt,{class:"h-6 w-6 text-primary"})}),v(Me,Ve)},tt=Me=>{const We=z(r);var Ve=P(),qe=S(Ve);J(qe,()=>i(We),(rt,Ee)=>{Ee(rt,{class:"h-6 w-6 text-primary"})}),v(Me,Ve)};G(je,Me=>{e.isOpen?Me(ye):Me(tt,!1)})}v($e,et)},$$slots:{default:!0}})}var E=L(K,2);let q;var $=b(E);let ve;var te=b($);let ue;var ce=b(te);let ge;var we=b(ce);{var pe=A=>{var Y=P(),Z=S(Y);se(Z,()=>e.children),v(A,Y)};G(we,A=>{e.children&&A(pe)})}y(ce),y(te),y($),Le($,A=>g=A,()=>g),y(E);var Ue=L(E,2);{var Oe=A=>{{let Y=z(()=>n()?"absolute":"fixed"),Z=z(()=>i(l)?"cursor-ew-resize":"cursor-ns-resize"),fe=z(()=>i(p)?"":"transition-all duration-300"),be=z(()=>U(i(B)()));Se(A,{get class(){return`${i(Y)??""} z-50 border-0 bg-transparent p-0 ring-0 transition-colors outline-none hover:!bg-primary/50 focus-visible:ring-0 ${i(Z)??""} ${i(fe)??""}`},onmousedown:w,"aria-label":"Resize sidebar by dragging",get style(){return`${i(be)??""}; outline: none !important; box-shadow: none !important; border: none !important;`}})}};G(Ue,A=>{e.isOpen&&A(Oe)})}oe((A,Y,Z,fe,be,_e,Ie)=>{q=ze(E,1,"relative",null,q,A),Fe(E,Y),ve=ze($,1,`relative flex bg-card text-card-foreground ${n()?"shadow-2xl":"shadow-lg"}`,null,ve,Z),Fe($,`${i(T)??""}: ${i(d)??""}px; transform: ${fe??""};`),ue=ze(te,1,"flex overflow-hidden",null,ue,be),Fe(te,_e),ge=ze(ce,1,"flex overflow-hidden",null,ge,Ie)},[()=>({"overflow-hidden":!n(),"overflow-visible":n(),"h-full":i(l),"w-full":!i(l),"transition-all":!i(p),"duration-300":!i(p),"z-30":n()}),()=>U(i(F)()),()=>({"flex-col":i(l),"flex-row":!i(l),"h-full":i(l),"w-full":!i(l),"border-r":t()===O.LEFT,"border-l":t()===O.RIGHT,"border-b":t()===O.TOP,"border-t":t()===O.BOTTOM,"border-sidebar-border":!0,"transition-transform":!i(p),"duration-300":!i(p),"pointer-events-auto":n(),"z-30":n()}),()=>i(N)(),()=>({"flex-col":i(l),"flex-row":!i(l),"h-full":i(l),"w-full":!i(l)}),()=>i(R)(),()=>({"flex-col":i(l),"flex-row":!i(l),"h-full":i(l),"w-full":!i(l)})]),v(s,D),ee()}var Kn=H('<div><!> <div class="main-content svelte-1drp0rm"><!></div></div>');function Jn(s,e){Q(e,!0);const t=W(e,"position",19,()=>O.LEFT),r=z(()=>t()===O.TOP||t()===O.BOTTOM);var n=Kn();let a;var o=b(n);ir(o,{get isOpen(){return e.isOpen},get onToggle(){return e.onToggle},get position(){return t()},get minSize(){return e.minSize},get openIcon(){return e.openIcon},children:(d,p)=>{var l=P(),m=S(l);{var u=f=>{var x=P(),T=S(x);se(T,()=>e.sidebarContent),v(f,x)};G(m,f=>{e.sidebarContent&&f(u)})}v(d,l)},$$slots:{default:!0}});var c=L(o,2),g=b(c);{var h=d=>{var p=P(),l=S(p);se(l,()=>e.mainContent),v(d,p)};G(g,d=>{e.mainContent&&d(h)})}y(c),y(n),oe(d=>a=ze(n,1,"sidebar-layout svelte-1drp0rm",null,a,d),[()=>({vertical:i(r)})]),v(s,n),ee()}var Qn=H("<div><!></div>");function Dt(s,e){Q(e,!0);let t=W(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","variant","children"]);var n=Qn();ut(n,()=>({...r,class:"group/chat-bubble flex max-w-[80%] flex-row place-items-end gap-2 data-[variant='sent']:place-self-end","data-variant":e.variant}));var a=b(n);se(a,()=>e.children??ne),y(n),Le(n,o=>t(o),()=>t()),v(s,n),ee()}var ea=H('<span class="inline-block size-(--loading-dots-size) rounded-full bg-primary svelte-k2x6sv"></span>'),ta=H('<div class="inline-flex items-center gap-1 svelte-k2x6sv"></div>');function ra(s,e){let t=W(e,"size",3,4);var r=ta();let n;Ce(r,20,()=>({length:3}),Ge,(a,o)=>{var c=ea();v(a,c)}),y(r),oe(a=>n=Fe(r,"",n,a),[()=>({"--loading-dots-size":`${t()??""}px`})]),v(s,r)}var ia=H('<div class="flex size-full place-items-center justify-center"><!></div>'),na=H("<div><!></div>");function Rt(s,e){Q(e,!0);let t=W(e,"ref",15,null),r=W(e,"typing",3,!1),n=Te(e,["$$slots","$$events","$$legacy","ref","typing","class","children"]);var a=na();ut(a,h=>({...n,class:h}),[()=>ht("order-2 rounded-lg bg-secondary p-4 text-sm group-data-[variant='received']/chat-bubble:rounded-bl-none group-data-[variant='sent']/chat-bubble:order-1 group-data-[variant='sent']/chat-bubble:rounded-br-none group-data-[variant='sent']/chat-bubble:bg-primary group-data-[variant='sent']/chat-bubble:text-primary-foreground",e.class)]);var o=b(a);{var c=h=>{var d=ia(),p=b(d);ra(p,{}),y(d),v(h,d)},g=h=>{var d=P(),p=S(d);se(p,()=>e.children??ne),v(h,d)};G(o,h=>{r()?h(c):h(g,!1)})}y(a),Le(a,h=>t(h),()=>t()),v(s,a),ee()}function aa(s,e){Q(e,!0);let t=W(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class"]);var n=P(),a=S(n);{let o=z(()=>ht("relative flex size-8 shrink-0 overflow-hidden rounded-full",e.class));J(a,()=>_i,(c,g)=>{g(c,xe({"data-slot":"avatar",get class(){return i(o)}},()=>r,{get ref(){return t()},set ref(h){t(h)}}))})}v(s,n),ee()}function oa(s,e){Q(e,!0);let t=W(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class"]);{let n=z(()=>ht("order-1 group-data-[variant='sent']/chat-bubble:order-2",e.class));aa(s,xe({get class(){return i(n)}},()=>r,{get ref(){return t()},set ref(a){t(a)}}))}ee()}function sa(s){const e=s-1;return e*e*e+1}function Gt(s,{delay:e=0,duration:t=400,easing:r=sa,start:n=0,opacity:a=0}={}){const o=getComputedStyle(s),c=+o.opacity,g=o.transform==="none"?"":o.transform,h=1-n,d=c*(1-a);return{delay:e,duration:t,easing:r,css:(p,l)=>`
			transform: ${g} scale(${1-h*l});
			opacity: ${c-d*l}
		`}}class la{#e=M();#t=M(0);#r=M(!1);lastScrollHeight=0;set ref(e){if(_(this.#e,e,!0),!i(this.#e))return;this.lastScrollHeight=i(this.#e).scrollHeight,i(this.#e).scrollTo(0,i(this.#t)?i(this.#t):i(this.#e).scrollHeight),i(this.#e).addEventListener("scroll",()=>{i(this.#e)&&(_(this.#t,i(this.#e).scrollTop,!0),this.disableAutoScroll())}),window.addEventListener("resize",()=>{this.scrollToBottom(!0)}),new MutationObserver(()=>{i(this.#e)&&(i(this.#e).scrollHeight!==this.lastScrollHeight&&this.scrollToBottom(!0),this.lastScrollHeight=i(this.#e).scrollHeight)}).observe(i(this.#e),{childList:!0,subtree:!0})}get ref(){return i(this.#e)}get scrollY(){return i(this.#t)}get isAtBottom(){return i(this.#e)?i(this.#t)+i(this.#e).offsetHeight>=i(this.#e).scrollHeight:!0}disableAutoScroll(){this.isAtBottom?_(this.#r,!1):_(this.#r,!0)}scrollToBottom(e=!1){i(this.#e)&&(e&&i(this.#r)||i(this.#e).scrollTo(0,i(this.#e).scrollHeight))}}var da=H("<div><!></div>"),ca=H('<div class="relative"><div><!></div> <!></div>');function ua(s,e){Q(e,!0);let t=W(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","children","class"]),n=M(!1);const a=new la;ct(()=>{_(n,!0)});var o=ca(),c=b(o);ut(c,p=>({...r,class:p}),[()=>ht("no-scrollbar flex h-full w-full flex-col gap-4 overflow-y-auto p-4",e.class,{"scroll-smooth":i(n)})]);var g=b(c);se(g,()=>e.children??ne),y(c),Le(c,p=>t(p),()=>t()),Le(c,p=>a.ref=p,()=>a?.ref);var h=L(c,2);{var d=p=>{var l=da(),m=b(l);Se(m,{onclick:()=>a.scrollToBottom(),variant:"outline",size:"icon",class:"absolute bottom-2 left-1/2 inline-flex -translate-x-1/2 transform rounded-full shadow-md",children:(u,f)=>{Ai(u,{})},$$slots:{default:!0}}),y(l),Ft(1,l,()=>Gt,()=>({start:.85,duration:100,delay:250})),Ft(2,l,()=>Gt,()=>({start:.85,duration:100})),v(p,l)};G(h,p=>{a.isAtBottom||p(d)})}y(o),v(s,o),ee()}var fa=H(`<p> </p> <div class="w-full text-xs group-data-[variant='sent']/chat-bubble:text-end"> </div>`,1),ha=H("<!> <!>",1),va=H("<!> <!> <div></div>",1),ga=H('<div class="flex h-full w-full flex-col border border-border"><div class="flex-1 overflow-hidden"><!></div> <form class="flex shrink-0 place-items-center gap-2 border-t border-border bg-background p-2"><!> <!></form></div>');function ma(s,e){Q(e,!0);let t=M(""),r=M(void 0);const n=ae([{senderId:2,message:"How do I use the treeview?",sentAt:"10:00 AM"},{senderId:1,message:"The UPRN treeview enables you to select and download data...",sentAt:"10:01 AM"},{senderId:2,message:"Can you show me how?",sentAt:"10:02 AM"}]);async function a(){await _r(),i(r)?.scrollIntoView({behavior:"smooth"})}function o(m){const u=m.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return m.getHours()>=12?u+" PM":u+" AM"}de(()=>{n.length,a()});var c=ga(),g=b(c),h=b(g);jt(h,{class:"h-full",children:(m,u)=>{var f=P(),x=S(f);J(x,()=>ua,(T,C)=>{C(T,{children:(w,I)=>{var V=va(),k=S(V);Ce(k,16,()=>n,B=>B,(B,U,re,N)=>{var F=P(),D=S(F);{let K=z(()=>U.senderId===2?"sent":"received");J(D,()=>Dt,(E,q)=>{q(E,{get variant(){return i(K)},children:($,ve)=>{var te=ha(),ue=S(te);J(ue,()=>oa,(ge,we)=>{we(ge,{})});var ce=L(ue,2);J(ce,()=>Rt,(ge,we)=>{we(ge,{class:"flex flex-col gap-1",children:(pe,Ue)=>{var Oe=fa(),A=S(Oe),Y=b(A,!0);y(A);var Z=L(A,2),fe=b(Z,!0);y(Z),oe(()=>{he(Y,U.message),he(fe,U.sentAt)}),v(pe,Oe)},$$slots:{default:!0}})}),v($,te)},$$slots:{default:!0}})})}v(B,F)});var j=L(k,2);J(j,()=>Dt,(B,U)=>{U(B,{variant:"received",children:(re,N)=>{var F=P(),D=S(F);J(D,()=>Rt,(K,E)=>{E(K,{typing:!0})}),v(re,F)},$$slots:{default:!0}})});var R=L(j,2);Le(R,B=>_(r,B),()=>i(r)),v(w,V)},$$slots:{default:!0}})}),v(m,f)},$$slots:{default:!0}}),y(g);var d=L(g,2),p=b(d);hi(p,{class:"rounded-full",placeholder:"Type a message...",get value(){return i(t)},set value(m){_(t,m,!0)}});var l=L(p,2);{let m=z(()=>i(t)==="");Se(l,{type:"submit",variant:"default",size:"icon",class:"shrink-0 rounded-full",get disabled(){return i(m)},children:(u,f)=>{Li(u,{})},$$slots:{default:!0}})}y(d),y(c),ti("submit",d,m=>{m.preventDefault(),n.push({message:i(t),senderId:2,sentAt:o(new Date)}),_(t,"")}),v(s,c),ee()}var pa=H("<!> <!> <!> <!>",1),ya=H('<div class="relative flex h-full w-full min-w-0 overflow-visible"><div class="flex h-full w-full min-w-0 flex-col overflow-hidden"><!></div> <!></div>'),wa=H("<!> <!> <!> <!> <!>",1);function Ea(s,e){Q(e,!0);const t=ae(new Ji),r=ae(new ln),n=ae(new tr);let a=M("define-areas"),o=M(void 0),c=M(void 0),g=M(!0),h=ae(O.LEFT),d=M(!0),p=ae(O.BOTTOM);function l(){_(g,!i(g))}function m(){_(d,!i(d))}ct(async()=>{const k=await fi();X.setNameFields(k.serviceUprn2Config.selectionLayersNameFields||[]),_(o,new Et(k.serviceUprn2Config.dataSelectionTreeviewConfig),!0),_(c,new Et(k.serviceUprn2Config.areaSelectionTreeviewConfig),!0),await t.initializeAsync({portalUrl:k.serviceUprn2Config.portalUrl,itemId:k.serviceUprn2Config.portalItemId||"",proxy:k.serviceUprn2Config.proxy}),console.log("[page] WebMap loaded")});function u(k){_(a,k,!0)}function f(){_(a,"downloads")}var x=wa(),T=S(x);Qr(T,{});var C=L(T,2);Sn(C,{});var w=L(C,2);zn(w,{get fieldFilterMenuStore(){return r}});var I=L(w,2);Wi(I,{});var V=L(I,2);Jn(V,{get isOpen(){return i(g)},onToggle:l,get position(){return h},sidebarContent:R=>{var B=ya(),U=b(B),re=b(U);Zi(re,{get value(){return i(a)},get triggers(){return Zn},onValueChange:u,children:(F,D)=>{var K=pa(),E=S(K);lt(E,{value:"define-areas",children:(te,ue)=>{var ce=P(),ge=S(ce);{var we=pe=>{ji(pe,{get webMap(){return t.data},get treeviewStore(){return n},get treeviewConfigStore(){return i(c)}})};G(ge,pe=>{t.isLoaded&&pe(we)})}v(te,ce)}});var q=L(E,2);lt(q,{value:"select-data",children:(te,ue)=>{var ce=P(),ge=S(ce);{var we=pe=>{Yn(pe,{get webMap(){return t.data},get treeviewConfigStore(){return i(o)},get fieldFilterMenuStore(){return r}})};G(ge,pe=>{t.isLoaded&&pe(we)})}v(te,ce)}});var $=L(q,2);lt($,{value:"export",footer:ue=>{wn(ue,{onExportSuccess:f})},children:(ue,ce)=>{mn(ue,{get webMapStore(){return t},get areaSelectionTreeviewStore(){return n},get fieldFilterMenuStore(){return r}})}});var ve=L($,2);lt(ve,{value:"downloads",children:(te,ue)=>{En(te,{})}}),v(F,K)},$$slots:{default:!0}}),y(U);var N=L(U,2);ir(N,{get isOpen(){return i(d)},onToggle:m,get position(){return p},overlay:!0,get openIcon(){return Si},children:D=>{ma(D,{})},$$slots:{default:!0}}),y(B),v(R,B)},mainContent:R=>{Pi(R,{get webMap(){return t.data},get areaSelectionTreeviewStore(){return n},panelPosition:"top-left",menuPosition:"top-right"})},$$slots:{sidebarContent:!0,mainContent:!0}}),v(s,x),ee()}export{Ea as component};
