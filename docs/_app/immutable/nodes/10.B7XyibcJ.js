const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DVzVZBBg.js","../chunks/DvUDi2Se.js","../chunks/CnfuZz2S.js","../chunks/BYatcg2i.js","../chunks/DSvukMJ1.js","../chunks/PPVm8Dsz.js","../chunks/DedWa6hQ.js","../chunks/CbAk7Q2g.js","../chunks/Dtl6Huvk.js","../chunks/JZrX1DQH.js","../chunks/InWWYu7p.js","../chunks/BtRNH9HO.js","../chunks/C3DztaFN.js","../chunks/Fd-zc6xv.js","../chunks/CLdLWz9D.js","../chunks/Bx7Drccn.js","../chunks/Bstk8l7f.js","../chunks/Bs5I5-7o.js","../chunks/BJ6KxFoX.js","../chunks/Dg2Cy1wG.js","../chunks/Cfk1RgA5.js","../chunks/CJqWAG8q.js","../chunks/BNRAtZeH.js","../chunks/DTbuUgvd.js","../chunks/eb6qfy6k.js","../chunks/CdZ5E7Js.js","../chunks/D6wORzA5.js","../chunks/D6KPPgz5.js","../chunks/Hpj2QL01.js","../chunks/DHdURl-u.js","../chunks/B8bQhW-6.js","../chunks/Cl5lrJ4c.js","../chunks/CSgXBDAV.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/XEWFwhUy.js","../chunks/Bcw4sJLc.js","../chunks/BDErjlP0.js","../chunks/elf00Mmu.js","../chunks/BTzO5B6K.js","../chunks/Djp3mnm5.js","../chunks/BkkzFYiK.js","../chunks/DQOJ18NT.js","../chunks/BfvMWYA7.js","../chunks/C2A-cDAk.js","../chunks/pZ2g7Ohf.js","../chunks/DPRDD1To.js","../chunks/DZNpV-Fi.js","../chunks/EzLf78vY.js","../chunks/Ct-FuPNe.js","../chunks/BmZQD3Tc.js","../chunks/Dp3s0ZcO.js","../chunks/B7VbszFd.js","../chunks/CWwez7Ew.js","../chunks/CL2NbQte.js","../chunks/C-gotZDZ.js","../chunks/BYWLb-qP.js","../chunks/Dtr09YEc.js","../chunks/5_frVxKl.js","../chunks/kro8eSGX.js","../chunks/Cj7IhThc.js","../chunks/CsmaOzwV.js","../chunks/WcbF0m06.js","../chunks/D2fJSBL9.js","../chunks/BTFaZ95N.js","../chunks/Db_cRbTq.js","../chunks/9YvG7tFv.js","../chunks/DwIAbcbk.js","../chunks/Bunn428X.js","../chunks/aQeO9QTD.js","../chunks/BVStbsji.js","../chunks/muspHcCn.js","../chunks/BSsBqB8a.js","../chunks/BfUcY0IH.js","../chunks/CVqfDkJl.js","../chunks/C5CzMsLd.js","../chunks/C9lK54Hu.js","../chunks/D26fh4vX.js","../chunks/Cigsg82C.js","../chunks/BwvlIeVB.js","../chunks/Cu2J4Q4w.js","../chunks/DI4_79_v.js","../chunks/ZfJYk1lX.js","../chunks/Cv9IkvcT.js","../chunks/CzgEe7_M.js","../chunks/Co6MM1WB.js","../chunks/L9sxntLJ.js","../chunks/Dz9nnGQp.js","../chunks/BZVu3XrO.js","../chunks/nDOBqX6c.js","../chunks/DPeJS9ie.js","../chunks/GKolV7NZ.js","../chunks/CLfdaVZL.js","../chunks/BvI0vjxO.js","../chunks/BoVlFCoi.js","../chunks/Byb_ddQ1.js","../chunks/DayGv1xo.js","../chunks/DFa2M8Ih.js","../chunks/CB8DDl4O.js","../chunks/Cvu3dz6j.js","../chunks/CjV58eza.js","../chunks/VMSlSy0z.js","../chunks/B9TnOdWG.js","../chunks/B-KfLzZb.js","../chunks/D7MNnqkP.js","../chunks/OVZo4xRf.js","../chunks/DWtdFFwQ.js","../chunks/X9GVov2f.js","../chunks/CEn1iOYu.js","../chunks/BpCBUT2X.js","../chunks/DZpgY3Wp.js","../chunks/BXcKK5tC.js","../chunks/qWbuC5Wj.js","../chunks/B0YVZ3UN.js","../chunks/CTVS09Kb.js","../chunks/ThCcySDx.js","../chunks/BkCRFj7C.js","../chunks/K4FY9oqR.js","../chunks/CL2yxhDV.js","../chunks/COhKi5I6.js","../chunks/hpPpwecu.js","../chunks/C2-YgiZF.js","../chunks/C03-sIHu.js","../chunks/DBzD8FIy.js","../chunks/Ct5BCk5d.js","../chunks/KcazVFlU.js","../chunks/CYsUaMUi.js","../chunks/mxPIBlca.js","../chunks/B1Bh4S2o.js","../chunks/BzFyVeiR.js","../chunks/Bb0xX_Fn.js","../chunks/CFX_YiyI.js","../chunks/CefFkNr2.js","../chunks/DOAJfpyz.js","../chunks/B6Hh54jn.js","../chunks/DKMbv1dP.js","../chunks/BXfupK_G.js","../chunks/BkQcsSCB.js","../chunks/DPb6J-GU.js","../chunks/CwFyj4KC.js","../chunks/JI8MBgth.js","../chunks/QYHQISVP.js","../chunks/Cn-KJRkU.js","../chunks/VEGSGQ51.js","../chunks/CeqSKNOq.js","../chunks/BpS0eVY-.js","../chunks/C9BgZYvd.js","../chunks/D5QddsNZ.js","../chunks/BTdrrTIi.js","../chunks/DqGAFGWo.js","../chunks/CRfvaNoS.js","../chunks/BfuGwL9X.js","../chunks/DyEdvwqw.js","../chunks/Ca0GnHj9.js","../chunks/D7XwZUDn.js","../chunks/DsHDw-MJ.js","../chunks/CTXKbNVE.js","../chunks/B68-e1i2.js","../chunks/DZd6gJy7.js","../chunks/Cm1FCrMa.js","../chunks/C8BmVxiO.js","../chunks/SKPvM9nl.js","../chunks/CJcipZJa.js","../chunks/t7YI7jjt.js","../chunks/BzGHCuFd.js","../chunks/Chk7YAAL.js","../chunks/C4eyRFHZ.js","../chunks/Cgb6qxNH.js","../chunks/CMQCdq-P.js","../chunks/BZbOVUP0.js","../chunks/RkHh7_F4.js","../chunks/DKpmsPfl.js","../chunks/CaVKkSa6.js","../chunks/CKJW_hzu.js","../chunks/_KzNjohN.js","../chunks/B1N-tmtC.js","../chunks/DPw1_jRx.js","../chunks/_rUCDO1N.js","../chunks/QQC62dOK.js","../chunks/CASyCajO.js","../chunks/BiphejqT.js","../chunks/CRKBOk0z.js","../chunks/pDuGEAnG.js","../chunks/NzVRVRqD.js","../chunks/BrScpkSj.js","../chunks/Dqz3n4A5.js","../chunks/rxpTDz6e.js","../chunks/D-YQ4CHs.js","../chunks/D7TOvjcp.js","../chunks/BRjzZcZp.js","../chunks/COHLhXik.js","../chunks/BQBvadb7.js","../chunks/cUAizdnp.js","../chunks/Caulfaw_.js","../chunks/CnOjiBQ4.js","../chunks/9DHXOnVc.js","../chunks/n6UOt7ty.js","../chunks/LQ8II5qk.js","../chunks/BvOub3JO.js","../chunks/DAOJ2vkn.js","../chunks/Bt46m4pd.js","../chunks/bexxTcmF.js","../chunks/Cw4sh3xC.js","../chunks/BjhwDpSk.js","../chunks/B8l_M83k.js","../chunks/CB8wlU_f.js","../chunks/CQM3m500.js","../chunks/UjjEJtDR.js","../chunks/CpiU6G5c.js","../chunks/DwqrsEzQ.js","../chunks/QXap_35O.js","../chunks/DV_D_ms-.js","../chunks/D_qA3yb9.js","../chunks/BBYFSOBi.js","../chunks/CtDOi6ec.js","../chunks/BOEID1Kf.js","../chunks/BRxoU36Y.js","../chunks/CUzevAry.js","../chunks/C8zGwbjb.js","../chunks/BXMBYno9.js","../chunks/BSRsT1j9.js","../chunks/CqGmR_uN.js","../chunks/NpbZkYhY.js"])))=>i.map(i=>d[i]);
import{_ as ze}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as Xe,a as Re}from"../chunks/BvQjZ8fx.js";import{f as _,p as ie,c as x,n as ut,r as b,a as ue,g as e,aG as h,ar as r,a8 as O,u as L,X as xe,U as N,av as kt,o as be,aZ as ot,aM as Et}from"../chunks/C3YAFalO.js";import{c as E,a as u,f as w,t as Se}from"../chunks/C_zlMU_v.js";import{l as Wt,s as Pe,p as K,r as Ze,i as W}from"../chunks/CG7dtwR-.js";import{b as Ye}from"../chunks/1eP6wkfH.js";import{s as X}from"../chunks/BssK7A_K.js";import{s as dt,e as Qe,i as zt}from"../chunks/D3_op0xR.js";import{c as k}from"../chunks/cB9eePE-.js";import{g as st}from"../chunks/2TaPjkhc.js";import{a as Rt,s as Ft,b as jt,d as Dt}from"../chunks/ClCOGCSH.js";import{I as Ot,s as Ut,e as Nt,f as Kt,S as lt,g as ct,h as ft,i as pt}from"../chunks/Uhz644kk.js";import{c as et}from"../chunks/Hj8sYXvt.js";import"../chunks/69_IOA4Y.js";import{C as Ht}from"../chunks/C79VbXc-.js";import{A as Tt,a as Jt,b as Bt}from"../chunks/CnXnFF9a.js";import{S as mt}from"../chunks/B2Sah5Hx.js";import{B as Gt}from"../chunks/D7RGRiPY.js";import{I as qt}from"../chunks/CvnG0RHB.js";import{s as it}from"../chunks/CnfuZz2S.js";import{J as Qt}from"../chunks/CbAk7Q2g.js";import{j as Xt}from"../chunks/CJqWAG8q.js";import{a as Zt,b as Yt}from"../chunks/C8J_5Uks.js";function er(y){return(Zt||Yt)+y}function tr(y,l){const i=Wt(l,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const c=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]];Ot(y,Pe({name:"command"},()=>i,{get iconNode(){return c},children:(p,S)=>{var a=E(),v=_(a);Ut(v,l,"default",{}),u(p,a)},$$slots:{default:!0}}))}var rr=w("<span><!></span>");function ar(y,l){ie(l,!0);let i=K(l,"ref",15,null),c=Ze(l,["$$slots","$$events","$$legacy","ref","class","children"]);var p=rr();Rt(p,a=>({"data-slot":"command-shortcut",class:a,...c}),[()=>et("text-muted-foreground ml-auto text-xs tracking-widest",l.class)]);var S=x(p);dt(S,()=>l.children??ut),b(p),Ye(p,a=>i(a),()=>i()),u(y,p),ue()}function nr(y,l){ie(l,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let i=Ze(l,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];qt(y,Pe({name:"arrow-left"},()=>i,{get iconNode(){return c},children:(p,S)=>{var a=E(),v=_(a);dt(v,()=>l.children??ut),u(p,a)},$$slots:{default:!0}})),ue()}var or=w('<div class="map-view svelte-1s3dmqi"></div>');function sr(y,l){ie(l,!0);const i=K(l,"mapView",7);let c=h(null);Xe(()=>{i().container=e(c)}),Re(()=>{console.log("Destroying MapView in MapView component"),i()&&(i().container=null)});var p=or();Ye(p,S=>r(c,S),()=>e(c)),u(y,p),ue()}class vt{#r=h(null);#e=h(!1);#t=h(null);async fetchWebMaps(l){r(this.#e,!0),r(this.#t,null);try{const i=await fetch(l);if(!i.ok)throw new Error(`Failed to fetch web maps: ${i.status} ${i.statusText}`);const c=await i.json();r(this.#r,c,!0)}catch(i){r(this.#t,i,!0)}finally{r(this.#e,!1)}}get response(){return e(this.#r)}get isLoading(){return e(this.#e)}get error(){return e(this.#t)}}var lr=w('<span class="m-0 ml-[-5px] inline-flex max-w-[10rem] items-center overflow-hidden rounded border border-border px-1 py-0.5 text-xs font-medium text-ellipsis whitespace-nowrap text-muted-foreground"> </span> <span aria-hidden="true" class="h-5 w-px bg-border"></span>',1),ir=w('<div class="flex h-9 items-center gap-2 border-b pl-2" data-slot="command-input-wrapper"><span class="flex h-full min-w-[1.25rem] shrink-0 items-center justify-center text-muted-foreground"><!></span> <!> <!></div>');function ur(y,l){ie(l,!0);let i=K(l,"ref",15,null),c=K(l,"value",15,""),p=K(l,"iconProps",19,()=>({})),S=Ze(l,["$$slots","$$events","$$legacy","ref","class","value","icon","iconProps","commandId"]);var a=ir(),v=x(a),P=x(v);{var g=m=>{const F=L(()=>l.icon);var M=E(),n=_(M);k(n,()=>e(F),(d,f)=>{f(d,Pe(p))}),u(m,M)},C=m=>{tr(m,{class:"size-4 opacity-50"})};W(P,m=>{l.icon?m(g):m(C,!1)})}b(v);var I=O(v,2);{var j=m=>{var F=lr(),M=_(F),n=x(M,!0);b(M),xe(2),N(()=>{Ft(M,"title",l.commandId),X(n,l.commandId)}),u(m,F)};W(I,m=>{l.commandId&&m(j)})}var $=O(I,2);{let m=L(()=>et("flex h-10 flex-1 rounded-md bg-transparent py-3 text-sm outline-hidden placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",l.class));k($,()=>Nt,(F,M)=>{M(F,Pe({"data-slot":"command-input",get class(){return e(m)}},()=>S,{get ref(){return i()},set ref(n){i(n)},get value(){return c()},set value(n){c(n)}}))})}b(a),u(y,a),ue()}function dr(y,l){ie(l,!0);const i=K(l,"disabled",3,!1);Gt(y,{class:"m-0 flex size-7 shrink-0 items-center justify-center rounded-md border-none bg-transparent p-0 text-muted-foreground opacity-50 shadow-none transition hover:bg-transparent hover:text-accent-foreground focus:outline-none focus-visible:border-transparent focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none active:ring-0 active:outline-none disabled:pointer-events-none disabled:opacity-50 has-[>svg]:px-0",onclick:()=>{i()||l.onPress?.()},"aria-label":"Return to command search",get disabled(){return i()},children:(c,p)=>{{let S=L(()=>`size-4 ${l.class}`.trim());nr(c,{get class(){return e(S)}})}},$$slots:{default:!0}}),ue()}var cr=w('<span class="text-xs text-muted-foreground"> </span>'),fr=w('<div class="flex flex-col gap-0.5"><span class="text-sm leading-tight font-medium"> </span> <!></div> <!>',1),pr=w("<!> <!>",1),mr=w('<div class="px-4 pb-3"><!></div>'),vr=w("<!> <!>",1),_r=w('<div class="px-4 pb-3"><!></div>'),hr=w('<p class="text-sm text-muted-foreground">No panel registered for this command.</p>'),gr=w('<div class="pr-2 pb-2 pl-2"><!></div>'),wr=w("<!> <!> <!>",1),yr=w("<!> <!>",1),xr=w("<div><!></div>");function br(y,l){ie(l,!0);let i=K(l,"ref",15,null),c=K(l,"commands",19,()=>[]),p=K(l,"placeholder",3,"Search commands..."),S=K(l,"emptyMessage",3,"No commands found."),a=h(null),v=h(null),P=h(null),g=h(null),C=h(null),I=h(null),j=h(""),$=h(!1),m=h(kt(p())),F=h(null),M=!1,n=h(null),d=!1,f=null,V=null;const z=L(()=>{const t=new Map;for(const o of c())t.set(o.id,o);return Array.from(t.values())}),Z=L(()=>{const t=new Map;for(const o of e(z)){const s=o.group??null,A=t.get(s);A?A.push(o):t.set(s,[o])}for(const[,o]of t)o.sort((s,A)=>s.name.localeCompare(A.name));return t});function ae(t,o=!1){o&&(M=!0),r(j,t,!0)}function Fe(){r(F,null),r(m,p()),M=!1}be(()=>{const t=e(F);if(t){if(M){M=!1;return}t(e(j))}}),be(()=>{e(a)||r(m,p())});function H(){if(V)try{V()}catch(t){console.error("Failed to dispose command session",t)}V=null,r(P,null),r(g,null),Fe(),r(v,null)}function T(){e(a)&&(H(),r(a,null),r(I,null),r(C,null),ae("",!0),r($,!0))}function ve(){e(n)?.blur()}function se(t,o){if(!t.component)return null;const s=t.props;return s?{component:t.component,props:()=>s(o)}:{component:t.component}}function Y(t,o){const s=t.createSession?.(o);if(s){V=s.dispose??null,Object.prototype.hasOwnProperty.call(s,"input")?r(P,s.input??null,!0):r(P,null),Object.prototype.hasOwnProperty.call(s,"content")?r(g,s.content??null,!0):r(g,se(t,o),!0);return}V=null,r(P,null),r(g,se(t,o),!0)}function _e(t){const o=t.id;return{deactivate:()=>{!e(a)||e(a).id!==o||T()},isActive:s=>!e(a)||e(a).id!==o?!1:s?e(a).id===s:!0,setIsOpen:(s,A)=>{if(!e(a)||e(a).id!==o)return;if(s){d=!1,r($,!0);return}const ee=A?.preserveActive??!0;Ie(ee)},setInputSurface:s=>{!e(a)||e(a).id!==o||r(P,s,!0)},setContentSurface:s=>{!e(a)||e(a).id!==o||r(g,s,!0)},getInputValue:()=>e(j),setInputValue:s=>{!e(a)||e(a).id!==o||ae(s,!0)},setInputHandler:s=>{if(!(!e(a)||e(a).id!==o)){if(r(F,s,!0),!s){M=!1;return}s(e(j))}},setPlaceholder:s=>{!e(a)||e(a).id!==o||r(m,s,!0)},resetPlaceholder:()=>{!e(a)||e(a).id!==o||r(m,p())}}}function $e(t){const o=e(v);if(!t)return o?{runtime:o}:{};if(!o)return{};const{props:s}=t;return s?{...typeof s=="function"?s(o):s,runtime:o}:{runtime:o}}function Ce(t){return`${t.name} ${t.description??""}`.trim()}async function Ae(t){if(e(a)?.id===t.id){T();return}H(),r(I,null),r(C,t.id,!0),r($,!0),e(n)&&e(n).focus();const o=_e(t);r(v,o,!0),r(a,t,!0),Y(t,o);try{await t.execute(o)}catch(s){r(I,s instanceof Error?s:new Error("Failed to execute the command."),!0)}finally{r(C,null),ae("",!0)}}function je(t){const o=t.key.toLowerCase();if((t.metaKey||t.ctrlKey)&&o==="p"){if(t.preventDefault(),e(a)){T();return}e(n)&&e(n).focus();return}if(o==="escape"){if(e(a)){t.preventDefault(),T(),ve();return}e($)&&(t.preventDefault(),r($,!1),ve());return}if(!e(a))for(const A of e(z)){if(!A.shortcut)continue;const ee=A.shortcut.join(" ").toLowerCase(),J=[];if(t.metaKey&&J.push("âŒ˜"),t.ctrlKey&&J.push("Ctrl"),t.altKey&&J.push("Alt"),t.shiftKey&&J.push("Shift"),J.push(t.key.length===1?t.key.toUpperCase():t.key),J.join(" ").toLowerCase()===ee.toLowerCase()){t.preventDefault(),Ae(A);break}}}function tt(){r($,!0)}function Ie(t=!1){d=t,r($,!1)}function De(t){const o=f;if(!o)return;const s=t.target;s&&o.contains(s)||e($)&&Ie(!!e(a))}be(()=>{if(!e($)){if(ae("",!0),!e(a)){d=!1;return}if(d){d=!1;return}H(),r(a,null),r(I,null)}}),be(()=>{i(f)}),Re(()=>{H(),r(a,null),r(I,null),r(C,null),r(v,null),r(P,null),r(g,null),V=null,d=!1,r($,!1),ae("",!0),r(n,null),f=null,i(null)});var de=xr();st("pointerdown",ot,De),st("keydown",ot,je);var Oe=x(de);k(Oe,()=>Kt,(t,o)=>{o(t,{children:(s,A)=>{var ee=yr(),J=_(ee);{let ce=L(()=>e(a)?e(a).inputPlaceholder??e(m):e(m)),Le=L(()=>e(a)?dr:void 0),Ue=L(()=>e(a)?{onPress:T,disabled:e(C)===e(a).id}:void 0),Ne=L(()=>e(a)?.id);ur(J,{get placeholder(){return e(ce)},onfocus:()=>tt(),get icon(){return e(Le)},get iconProps(){return e(Ue)},get commandId(){return e(Ne)},get value(){return e(j)},set value(Ve){r(j,Ve,!0)},get ref(){return e(n)},set ref(Ve){r(n,Ve,!0)}})}var he=O(J,2);{var Me=ce=>{var Le=E(),Ue=_(Le);{var Ne=ge=>{lt(ge,{children:(ke,Ke)=>{var Ee=E(),We=_(Ee);k(We,()=>ct,(He,Te)=>{Te(He,{children:(B,fe)=>{var U=pr(),le=_(U);k(le,()=>ft,(ne,D)=>{D(ne,{children:(G,te)=>{xe();var q=Se();N(()=>X(q,S())),u(G,q)},$$slots:{default:!0}})});var pe=O(le,2);Qe(pe,17,()=>Array.from(e(Z).entries()),zt,(ne,D)=>{var G=L(()=>Et(e(D),2));let te=()=>e(G)[1];var q=E(),oe=_(q);Qe(oe,17,te,Q=>Q.id,(Q,R)=>{var we=E(),me=_(we);{let _t=L(()=>Ce(e(R)));k(me,()=>pt,(ht,gt)=>{gt(ht,{get value(){return e(_t)},onclick:()=>Ae(e(R)),children:(wt,Ar)=>{var rt=fr(),Je=_(rt),Be=x(Je),yt=x(Be,!0);b(Be);var xt=O(Be,2);{var bt=re=>{var ye=cr(),Ge=x(ye,!0);b(ye),N(()=>X(Ge,e(R).description)),u(re,ye)};W(xt,re=>{e(R).description&&re(bt)})}b(Je);var Pt=O(Je,2);{var $t=re=>{mt(re,{class:"ml-auto size-4 text-muted-foreground"})},Ct=re=>{var ye=E(),Ge=_(ye);{var It=qe=>{var at=E(),Mt=_(at);k(Mt,()=>ar,(Vt,St)=>{St(Vt,{children:(At,Lr)=>{xe();var nt=Se();N(Lt=>X(nt,Lt),[()=>e(R).shortcut?.join(" + ")]),u(At,nt)},$$slots:{default:!0}})}),u(qe,at)};W(Ge,qe=>{e(R).shortcut?.length&&qe(It)},!0)}u(re,ye)};W(Pt,re=>{e(C)===e(R).id?re($t):re(Ct,!1)})}N(()=>X(yt,e(R).name)),u(wt,rt)},$$slots:{default:!0}})})}u(Q,we)}),u(ne,q)}),u(B,U)},$$slots:{default:!0}})}),u(ke,Ee)},$$slots:{default:!0}})},Ve=ge=>{var ke=wr(),Ke=_(ke);{var Ee=B=>{const fe=L(()=>e(P).component);var U=mr(),le=x(U);{let pe=L(()=>$e(e(P)));k(le,()=>e(fe),(ne,D)=>{D(ne,Pe(()=>e(pe)))})}b(U),u(B,U)};W(Ke,B=>{e(P)&&B(Ee)})}var We=O(Ke,2);{var He=B=>{var fe=_r(),U=x(fe);k(U,()=>Tt,(le,pe)=>{pe(le,{variant:"destructive",children:(ne,D)=>{var G=vr(),te=_(G);k(te,()=>Jt,(oe,Q)=>{Q(oe,{children:(R,we)=>{xe();var me=Se();N(()=>X(me,`${e(a).name??""} failed`)),u(R,me)},$$slots:{default:!0}})});var q=O(te,2);k(q,()=>Bt,(oe,Q)=>{Q(oe,{children:(R,we)=>{xe();var me=Se();N(()=>X(me,e(I).message)),u(R,me)},$$slots:{default:!0}})}),u(ne,G)},$$slots:{default:!0}})}),b(fe),u(B,fe)};W(We,B=>{e(I)&&B(He)})}var Te=O(We,2);lt(Te,{children:(B,fe)=>{var U=gr(),le=x(U);{var pe=D=>{const G=L(()=>e(g).component);var te=E(),q=_(te);{let oe=L(()=>$e(e(g)));k(q,()=>e(G),(Q,R)=>{R(Q,Pe(()=>e(oe)))})}u(D,te)},ne=D=>{var G=E(),te=_(G);k(te,()=>Ht,(q,oe)=>{oe(q,{class:"px-0",children:(Q,R)=>{var we=hr();u(Q,we)},$$slots:{default:!0}})}),u(D,G)};W(le,D=>{e(g)?D(pe):D(ne,!1)})}b(U),u(B,U)},$$slots:{default:!0}}),u(ge,ke)};W(Ue,ge=>{e(a)?ge(Ve,!1):ge(Ne)})}u(ce,Le)};W(he,ce=>{e($)&&ce(Me)})}u(s,ee)},$$slots:{default:!0}})}),b(de),Ye(de,t=>f=t,()=>f),N(t=>Dt(de,1,t),[()=>jt(et("space-y-4",l.class))]),u(y,de),ue()}var Pr=w('<div class="error-message svelte-11six79"><p class="text-sm text-red-600"> </p></div>'),$r=w('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-11six79"> </span></div>'),Cr=w('<span class="description-text text-xs text-gray-500 svelte-11six79"> </span>'),Ir=w('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-11six79"> </span> <!></div>'),Mr=w('<div class="item-container svelte-11six79"><!> <!></div>');function Vr(y,l){ie(l,!0);const i=K(l,"mapView",7),c=K(l,"runtime",3,null),p=new vt;let S=h(null),a=h(null),v=h("");const P=L(()=>{const n=p.response?.results??[],d=e(v).trim().toLowerCase();return d?n.filter(f=>{const V=typeof f?.title=="string"?f.title.toLowerCase():"",z=typeof f?.description=="string"?f.description.toLowerCase():"";return V.includes(d)||z.includes(d)}):n});Xe(async()=>{await p.fetchWebMaps("/maps-web-map.json")});let g=null,C=null,I=l.inputPlaceholder??"Search...";be(()=>{const n=c(),d=l.inputPlaceholder??"Search...";if(!n){C?.(),C=null,g=null,r(v,""),I=d;return}if(n===g){d!==I&&(n.setPlaceholder(d),I=d);return}C?.(),C=null,g=null,I=d;const f=z=>{r(v,z,!0)};n.setPlaceholder(d),n.setInputHandler(f);const V=n.getInputValue();r(v,V,!0),V&&(n.setInputValue(""),r(v,"")),C=()=>{n.setInputHandler(null),n.resetPlaceholder(),n.setInputValue(""),g===n&&(g=null),r(v,"")},g=n}),Re(()=>{C?.(),C=null,g=null});async function j(n){if(!i()){console.error("MapView is not initialized"),r(a,"MapView is not ready. Please wait and try again.");return}r(S,n,!0),r(a,null);try{console.log(`Loading web map with ID: ${n}`);const[{default:d}]=await Promise.all([ze(()=>import("../chunks/DVzVZBBg.js").then(ae=>ae.W),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155]),import.meta.url)]),f="https://nercdsh.dev.azure.manchester.ac.uk/portal";it.portalUrl=f,console.log("Portal URL configured:",it.portalUrl);const{addProxyRule:V}=Qt;console.log("Adding proxy rule for portal traffic"),V({urlPrefix:"https://nercdsh.dev.azure.manchester.ac.uk",proxyUrl:"/proxy/Java/proxy.jsp"});const z=new d({portalItem:{id:n,portal:{url:f}}});await z.load(),console.log("Web map loaded successfully"),i().map=z,console.log("Web map applied to MapView"),await Xt(()=>i().ready),console.log("MapView updated with new web map");const Z=z.initialViewProperties?.viewpoint?.targetGeometry;Z&&(await i().goTo(Z),console.log("MapView navigated to web map initial viewpoint")),c()?.setIsOpen(!1)}catch(d){console.error("Error loading web map:",d),r(a,d instanceof Error?d.message:"Failed to load web map",!0)}finally{r(S,null)}}var $=Mr(),m=x($);{var F=n=>{var d=Pr(),f=x(d),V=x(f,!0);b(f),b(d),N(()=>X(V,e(a))),u(n,d)};W(m,n=>{e(a)&&n(F)})}var M=O(m,2);k(M,()=>ct,(n,d)=>{d(n,{children:(f,V)=>{var z=E(),Z=_(z);{var ae=H=>{var T=E(),ve=_(T);k(ve,()=>ft,(se,Y)=>{Y(se,{children:(_e,$e)=>{xe();var Ce=Se("No web maps match your search.");u(_e,Ce)},$$slots:{default:!0}})}),u(H,T)},Fe=H=>{var T=E(),ve=_(T);Qe(ve,17,()=>e(P),se=>se.id,(se,Y)=>{var _e=E(),$e=_(_e);k($e,()=>pt,(Ce,Ae)=>{Ae(Ce,{onclick:()=>j(e(Y).id),children:(je,tt)=>{var Ie=E(),De=_(Ie);{var de=t=>{var o=$r(),s=x(o);mt(s,{class:"size-4"});var A=O(s,2),ee=x(A);b(A),b(o),N(()=>X(ee,`Loading ${e(Y).title??"Untitled web map"??""}...`)),u(t,o)},Oe=t=>{var o=Ir(),s=x(o),A=x(s,!0);b(s);var ee=O(s,2);{var J=he=>{var Me=Cr(),ce=x(Me,!0);b(Me),N(()=>X(ce,e(Y).description)),u(he,Me)};W(ee,he=>{e(Y).description&&he(J)})}b(o),N(()=>X(A,e(Y).title??"Untitled web map")),u(t,o)};W(De,t=>{e(S)===e(Y).id?t(de):t(Oe,!1)})}u(je,Ie)},$$slots:{default:!0}})}),u(se,_e)}),u(H,T)};W(Z,H=>{e(P).length===0?H(ae):H(Fe,!1)})}u(f,z)},$$slots:{default:!0}})}),b($),u(y,$),ue()}var Sr=w('<!> <div class="map-layout svelte-10vgo84"><!></div>',1);function ra(y,l){ie(l,!0);let i=h(null),c=h(null),p=new vt,S=h(null),a=null,v=h(null),P=h(null);Xe(async()=>{a=er("/maps-web-map.json"),console.log("Maps WebMap JSON Path:",a);const[{default:n}]=await Promise.all([ze(()=>import("../chunks/CTXKbNVE.js").then(Z=>Z.a2),__vite__mapDeps([156,1,2,3,4,5,47,29,48,27,15,6,7,17,49,37,50,25,26,51,10,11,12,13,30,21,102,103,23,38,39,157,158,159,31,160,161,19,20,162,8,9,14,16,18,22,24,28,32,33,34,35,36,40,41,42,43,44,45,46,163,62,63,64,65,66,67,68,69,70,71,72,73,78,56,164,83,77,61,165,166,167,168,169,170,59,60,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187]),import.meta.url)]);r(i,new n({map:{basemap:"streets-vector"},zoom:15,center:[-90.1928,38.6226]}),!0),e(i).ui.move("zoom","bottom-right");const[{default:d}]=await Promise.all([ze(()=>import("../chunks/D7TOvjcp.js").then(Z=>Z.L),__vite__mapDeps([188,5,1,2,3,4,10,11,12,13,7,45,164,21,159,23,6,31,160,20,189,190,191,65,187]),import.meta.url)]),f=new d({view:e(i)});e(i).ui.add(f,{position:"top-left"});const[{default:V}]=await Promise.all([ze(()=>import("../chunks/cUAizdnp.js"),__vite__mapDeps([192,1,2,3,4,21,6,5,7,159,23,11,12,31,160,10,13,193,25,26,27,69,64,194,111,40,41,37,15,17,42,110,115,195,114,196,197,19,20,198,122,123,124,28,85,86,29,87,88,62,63,65,45,49,50,66,67,68,14,16,70,71,72,73,81,89,90,91,94,125,126,127,51,128,129,56,130,131,132,133,134,135,136,137,138,84,92,93,95,199,200,201,202,203,168,204,205,206,46,207,187,208,209,210,211,212,213,214,179,215,216,166,172,217,218,219,220,183,221,222,185,190]),import.meta.url)]),z=new V({view:e(i)});e(i).ui.add(z,{position:"top-right"}),r(v,g(),!0),r(P,C(),!0)}),be(()=>{if(!e(i)||!e(c))return;const n=e(i),d=e(c);return n.ui.add(d,{position:"manual"}),()=>{n.ui.remove(d)}}),Re(()=>{r(v,null),r(P,null),e(i)&&e(i).destroy()});function g(){const n={id:"add-web-map",name:"Add web map",description:"Fetch and display our web maps.",group:"Maps",shortcut:["Ctrl","M"],inputPlaceholder:"Search web maps...",execute:async d=>{if(!a){console.error("[add-web-map-command] mapsWebMapJsonPath is not defined");return}console.log("[add-web-map-command] Fetching web maps from:",a),await p.fetchWebMaps(a),r(S,"show-web-maps")},component:Vr,props:d=>({mapView:e(i),inputPlaceholder:n.inputPlaceholder})};return n}function C(){return{id:"add-layer",name:"Add layers",description:"Fetch and display our layers.",group:"Maps",shortcut:["Ctrl","L"],execute:async n=>{}}}var I=Sr(),j=_(I);{var $=n=>{{let d=L(()=>[e(v),e(P)]);br(n,{class:"position-absolute top-3 left-1/2 z-1 -translate-x-1/2 transform",get commands(){return e(d)},get ref(){return e(c)},set ref(f){r(c,f,!0)}})}};W(j,n=>{e(v)&&e(P)&&n($)})}var m=O(j,2),F=x(m);{var M=n=>{sr(n,{get mapView(){return e(i)}})};W(F,n=>{e(i)&&n(M)})}b(m),u(y,I),ue()}export{ra as component};
