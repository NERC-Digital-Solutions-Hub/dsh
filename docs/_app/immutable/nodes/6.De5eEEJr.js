const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/Bo-Ws7j2.js","../chunks/DtUpcSZL.js","../chunks/DHq0rblm.js","../chunks/BfhsIlKo.js","../chunks/qs4PuqLF.js","../chunks/D9Z9MdNV.js","../chunks/Bwh84WyQ.js","../chunks/BgvLO-3W.js","../chunks/BPWMfk3L.js","../chunks/B5FfC49X.js","../chunks/Cw1pwOU3.js","../chunks/Ab6_LQF8.js","../chunks/BzdAE8IO.js","../chunks/C1i-M2aP.js","../chunks/DpT7IovD.js","../chunks/DwaPv9Xz.js","../chunks/DxjcXvGa.js","../chunks/CU7c9CMG.js","../chunks/129gMYlb.js","../chunks/v8BQWUBe.js","../chunks/b9L_h0zx.js","../chunks/D6wORzA5.js","../chunks/D6KPPgz5.js","../chunks/BsbEhHPI.js","../chunks/1paoQEYR.js","../chunks/CbQpSWi7.js","../chunks/Cl5lrJ4c.js","../chunks/DS3I1QGm.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/C4HJhmWz.js","../chunks/BL_xGwnO.js","../chunks/CJDxRR2q.js","../chunks/Djp3mnm5.js","../chunks/5FB5fp0p.js","../chunks/DQOJ18NT.js","../chunks/BXRubaki.js","../chunks/CO7wCLMN.js","../chunks/CISklr1W.js","../chunks/BcYzNU04.js","../chunks/EzLf78vY.js","../chunks/DJcANb4D.js","../chunks/CYIjw6v6.js","../chunks/BHJeQD3W.js","../chunks/CFcsbxo9.js","../chunks/9YvG7tFv.js","../chunks/0RWeYtrz.js","../chunks/D63lrzPI.js","../chunks/aQeO9QTD.js","../chunks/thXDNXE5.js","../chunks/C8mSainR.js","../chunks/BMX0GFJS.js","../chunks/DzdGX2zJ.js","../chunks/BBxgwA0n.js","../chunks/CWhDOlk9.js","../chunks/DZd6gJy7.js","../chunks/DxShpBdY.js","../chunks/C8BmVxiO.js","../chunks/NT2Bw9Xs.js","../chunks/NdScq7k1.js","../chunks/BNxyGXCQ.js","../chunks/C1lBXX5P.js","../chunks/D2J_WLS8.js","../chunks/DQ8jsygj.js","../chunks/CQ7_HgKN.js","../chunks/B7w94aGg.js","../chunks/Chk7YAAL.js","../chunks/D0t3l1UW.js","../chunks/Cgb6qxNH.js","../chunks/CQSPGXrE.js","../chunks/BHlmUX6D.js","../chunks/QQC62dOK.js","../chunks/DJa1hCZQ.js","../chunks/BM6Wwexr.js","../chunks/Bm1xQlw6.js","../chunks/XNewhKeX.js","../chunks/DKpmsPfl.js","../chunks/Sc2kLiW3.js","../chunks/B55yQsaB.js","../chunks/B1N-tmtC.js","../chunks/CASyCajO.js","../chunks/BiphejqT.js","../chunks/CWKudsnk.js","../chunks/pDuGEAnG.js","../chunks/CmGkajPk.js","../chunks/BrScpkSj.js","../chunks/rxpTDz6e.js","../chunks/huXfT4GN.js","../chunks/DoXK2rGs.js","../chunks/Ctm-fIfE.js","../chunks/CL2NbQte.js","../chunks/CpiZ4wIO.js","../chunks/BASHandG.js","../chunks/8QcYoK8I.js","../chunks/NPoLgU3x.js","../chunks/C5CzMsLd.js","../chunks/deFn64y_.js","../chunks/BAf2E7HJ.js","../chunks/Y387DGzA.js","../chunks/CFIXdoHM.js","../chunks/JBhdCoOi.js","../chunks/CHZSYXvn.js","../chunks/BML_M8sQ.js","../chunks/Dnb1jllm.js","../chunks/DfNP466Y.js","../chunks/eWXUghTg.js","../chunks/BE7embxS.js","../chunks/B2pz97Mw.js","../chunks/iS9MPUWn.js","../chunks/GKolV7NZ.js","../chunks/B7so6aiN.js","../chunks/D_jxB2M9.js","../chunks/C70Wcz7U.js","../chunks/Cp7iBt0A.js","../chunks/f7qLKxBD.js","../chunks/4c7MyKAz.js","../chunks/DbuHlGOH.js","../chunks/5Hu3Tj1O.js","../chunks/BDRwM1Gy.js","../chunks/VMSlSy0z.js","../chunks/lYnSLSOW.js","../chunks/C9yb1cMp.js","../chunks/BlVJDMPv.js","../chunks/DKdVR8l2.js","../chunks/DZ6eIUka.js","../chunks/n8j1sCwN.js","../chunks/L_yqRdqL.js","../chunks/BPsRHx0w.js","../chunks/CJzbRXVH.js","../chunks/DVkWVZrr.js","../chunks/Cbt3oAQ3.js","../chunks/C6-4EbnJ.js","../chunks/DdaJqb9x.js","../chunks/BQ9eRUBJ.js","../chunks/yMNjucUt.js","../chunks/DYWnz87V.js","../chunks/dDFQnWwh.js","../chunks/TngxyDh1.js","../chunks/6Dn7lewd.js","../chunks/DfJNYC5A.js","../chunks/zTkdiH1w.js","../chunks/KcazVFlU.js","../chunks/CYsUaMUi.js","../chunks/Bu2dLfoR.js","../chunks/uNqxL_S-.js","../chunks/BVskHUjz.js","../chunks/iUYx5jDy.js","../chunks/B5kADfHL.js","../chunks/CfrNlpsM.js","../chunks/DdSLmJ2d.js","../chunks/BS3H3l-F.js","../chunks/DCdj6Lab.js","../chunks/BXfupK_G.js","../chunks/BkQcsSCB.js","../chunks/DPb6J-GU.js","../chunks/Di4P92Bn.js","../chunks/ChlOomCl.js","../chunks/B8TggrAl.js","../chunks/BH-QLa3i.js","../chunks/Bt_bao6a.js","../chunks/CpOLeWL8.js","../chunks/Cy_9-Fvw.js","../chunks/CEiIohNf.js","../chunks/CNvMJFKk.js","../chunks/DqlQ8lc_.js","../chunks/CZQNMlVz.js","../chunks/uuiBM66S.js","../chunks/VStmm7cP.js","../chunks/BqnxlNxI.js","../chunks/BXAqi3_T.js","../chunks/D8UNv0pX.js","../chunks/DsHDw-MJ.js"])))=>i.map(i=>d[i]);
import"../chunks/DsnmJJEf.js";import{o as ot,a as sr}from"../chunks/BTUtnK6b.js";import{O as lr,E as dr,be as cr,bf as ur,Y as fr,y as hr,bg as vr,bh as gr,bi as mr,a1 as Rt,as as yr,_ as pr,a9 as ne,aH as P,J as i,ah as _,b5 as wr,p as J,c as F,b as S,a as v,d as Q,f as L,a6 as b,a7 as p,aG as H,am as ae,u as de,a8 as A,N as oe,n as Oe,aI as Ee,G as br}from"../chunks/DehUWplH.js";import{p as W,i as B,r as Te,l as Ze,s as Se,a as _r,b as Sr}from"../chunks/TLwjHNuO.js";import{_ as Fe}from"../chunks/D9Z9MdNV.js";import{e as Cr,a as se,s as he}from"../chunks/BTpQzbbG.js";import{b as Le}from"../chunks/BquELpeJ.js";import{C as Ir,D as xr,l as Tr,o as kr,z as Ar,b as et,B as Lr,p as Ae,c as Hr}from"../chunks/B3jgurcF.js";import{I as St,a as xe,i as Re}from"../chunks/B--_NR5U.js";import{c as K}from"../chunks/B1MLz82n.js";import{O as Gt,T as Mr,G as kt,F as At,a as Nr,c as Bt,t as He,d as zr,e as Fr,f as Pr,g as Vr,S as qe,h as Or,i as Er,p as Dr,C as Lt,j as Rr,I as Gr,k as Br,l as Ur,m as $r,n as jr,L as Wr,o as qr,s as Yr,M as Zr,V as Ht,b as tt,q as Xr,u as Kr,r as Jr}from"../chunks/Cd4jLINO.js";import{a as st,e as Ve,d as Pe,s as at,b as Qr}from"../chunks/CZEBf6kI.js";import{h as Ye}from"../chunks/DYCabrYF.js";import{d as lt,g as ei}from"../chunks/CG5SEHFF.js";import{I as Xe,m as Ke,C as ti,d as Ct,S as Ut,e as ri,s as ii,c as $t,X as ni,f as ai,g as oi,h as si,i as li,j as di,k as ci,l as ui}from"../chunks/LxZDR49O.js";import{B as _e,c as dt}from"../chunks/CLqO5gQz.js";import"../chunks/DajHuwdy.js";import{I as fi}from"../chunks/Cbe9z-Js.js";const hi=()=>performance.now(),ke={tick:s=>requestAnimationFrame(s),now:()=>hi(),tasks:new Set};function jt(){const s=ke.now();ke.tasks.forEach(e=>{e.c(s)||(ke.tasks.delete(e),e.f())}),ke.tasks.size!==0&&ke.tick(jt)}function vi(s){let e;return ke.tasks.size===0&&ke.tick(jt),{promise:new Promise(t=>{ke.tasks.add(e={c:s,f:t})}),abort(){ke.tasks.delete(e)}}}function rt(s,e){Rt(()=>{s.dispatchEvent(new CustomEvent(e))})}function gi(s){if(s==="float")return"cssFloat";if(s==="offset")return"cssOffset";if(s.startsWith("--"))return s;const e=s.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Mt(s){const e={},t=s.split(";");for(const r of t){const[n,a]=r.split(":");if(!n||a===void 0)break;const o=gi(n.trim());e[o]=a.trim()}return e}const mi=s=>s;function Nt(s,e,t,r){var n=(s&gr)!==0,a=(s&mr)!==0,o=n&&a,c=(s&vr)!==0,g=o?"both":n?"in":"out",h,d=e.inert,y=e.style.overflow,l,m;function u(){return Rt(()=>h??=t()(e,r?.()??{},{direction:g}))}var f={is_global:c,in(){if(e.inert=d,!n){m?.abort(),m?.reset?.();return}a||l?.abort(),rt(e,"introstart"),l=wt(e,u(),m,1,()=>{rt(e,"introend"),l?.abort(),l=h=void 0,e.style.overflow=y})},out(w){if(!a){w?.(),h=void 0;return}e.inert=!0,rt(e,"outrostart"),m=wt(e,u(),l,0,()=>{rt(e,"outroend"),w?.()})},stop:()=>{l?.abort(),m?.abort()}},C=lr;if((C.transitions??=[]).push(f),n&&Cr){var T=c;if(!T){for(var x=C.parent;x&&(x.f&dr)!==0;)for(;(x=x.parent)&&(x.f&cr)===0;);T=!x||(x.f&ur)!==0}T&&fr(()=>{hr(()=>f.in())})}}function wt(s,e,t,r,n){var a=r===1;if(yr(e)){var o,c=!1;return pr(()=>{if(!c){var C=e({direction:a?"in":"out"});o=wt(s,C,t,r,n)}}),{abort:()=>{c=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t?.deactivate(),!e?.duration)return n(),{abort:ne,deactivate:ne,reset:ne,t:()=>r};const{delay:g=0,css:h,tick:d,easing:y=mi}=e;var l=[];if(a&&t===void 0&&(d&&d(0,1),h)){var m=Mt(h(0,1));l.push(m,m)}var u=()=>1-r,f=s.animate(l,{duration:g,fill:"forwards"});return f.onfinish=()=>{f.cancel();var C=t?.t()??1-r;t?.abort();var T=r-C,x=e.duration*Math.abs(T),w=[];if(x>0){var I=!1;if(h)for(var V=Math.ceil(x/16.666666666666668),k=0;k<=V;k+=1){var j=C+T*y(k/V),R=Mt(h(j,1-j));w.push(R),I||=R.overflow==="hidden"}I&&(s.style.overflow="hidden"),u=()=>{var G=f.currentTime;return C+T*y(G/x)},d&&vi(()=>{if(f.playState!=="running")return!1;var G=u();return d(G,1-G),!0})}f=s.animate(w,{duration:x,fill:"forwards"}),f.onfinish=()=>{u=()=>r,d?.(r,1-r),n()}},{abort:()=>{f&&(f.cancel(),f.effect=null,f.onfinish=ne)},deactivate:()=>{n=ne},reset:()=>{r===0&&d?.(1,0)},t:()=>u()}}const yi=kr({component:"avatar",parts:["root","image","fallback"]}),pi=new Ir("Avatar.Root");class It{static create(e){return pi.set(new It(e))}opts;domContext;attachment;constructor(e){this.opts=e,this.domContext=new xr(this.opts.ref),this.loadImage=this.loadImage.bind(this),this.attachment=Tr(this.opts.ref)}loadImage(e,t,r){if(this.opts.loadingStatus.current==="loaded")return;let n;const a=new Image;return a.src=e,t!==void 0&&(a.crossOrigin=t),r&&(a.referrerPolicy=r),this.opts.loadingStatus.current="loading",a.onload=()=>{n=this.domContext.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},a.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{n&&this.domContext.clearTimeout(n)}}#e=P(()=>({id:this.opts.id.current,[yi.root]:"","data-status":this.opts.loadingStatus.current,...this.attachment}));get props(){return i(this.#e)}set props(e){_(this.#e,e)}}var wi=L("<div><!></div>");function bi(s,e){const t=wr();J(e,!0);let r=W(e,"delayMs",3,0),n=W(e,"loadingStatus",15,"loading"),a=W(e,"id",19,()=>Ar(t)),o=W(e,"ref",15,null),c=Te(e,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const g=It.create({delayMs:et(()=>r()),loadingStatus:et(()=>n(),u=>{n()!==u&&(n(u),e.onLoadingStatusChange?.(u))}),id:et(()=>a()),ref:et(()=>o(),u=>o(u))}),h=P(()=>Lr(c,g.props));var d=F(),y=S(d);{var l=u=>{var f=F(),C=S(f);se(C,()=>e.child,()=>({props:i(h)})),v(u,f)},m=u=>{var f=wi();st(f,()=>({...i(h)}));var C=b(f);se(C,()=>e.children??ne),p(f),v(u,f)};B(y,u=>{e.child?u(l):u(m,!1)})}v(s,d),Q()}function _i(s,e){const t=Ze(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M12 8V4H8"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}],["path",{d:"M2 14h2"}],["path",{d:"M20 14h2"}],["path",{d:"M15 13v2"}],["path",{d:"M9 13v2"}]];Xe(s,Se({name:"bot"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=F(),c=S(o);Ke(c,e,"default",{}),v(n,o)},$$slots:{default:!0}}))}function Si(s,e){const t=Ze(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"m6 9 6 6 6-6"}]];Xe(s,Se({name:"chevron-down"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=F(),c=S(o);Ke(c,e,"default",{}),v(n,o)},$$slots:{default:!0}}))}function Ci(s,e){const t=Ze(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"m15 18-6-6 6-6"}]];Xe(s,Se({name:"chevron-left"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=F(),c=S(o);Ke(c,e,"default",{}),v(n,o)},$$slots:{default:!0}}))}function Ii(s,e){const t=Ze(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"m18 15-6-6-6 6"}]];Xe(s,Se({name:"chevron-up"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=F(),c=S(o);Ke(c,e,"default",{}),v(n,o)},$$slots:{default:!0}}))}function xi(s,e){const t=Ze(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M4 5h16"}],["path",{d:"M4 12h16"}],["path",{d:"M4 19h16"}]];Xe(s,Se({name:"menu"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=F(),c=S(o);Ke(c,e,"default",{}),v(n,o)},$$slots:{default:!0}}))}function Ti(s,e){J(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let t=Te(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 17V3"}],["path",{d:"m6 11 6 6 6-6"}],["path",{d:"M19 21H5"}]];St(s,Se({name:"arrow-down-to-line"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=F(),c=S(o);se(c,()=>e.children??ne),v(n,o)},$$slots:{default:!0}})),Q()}function ki(s,e){J(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let t=Te(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]];St(s,Se({name:"arrow-down"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=F(),c=S(o);se(c,()=>e.children??ne),v(n,o)},$$slots:{default:!0}})),Q()}function Ai(s,e){J(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let t=Te(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];St(s,Se({name:"send"},()=>t,{get iconNode(){return r},children:(n,a)=>{var o=F(),c=S(o);se(c,()=>e.children??ne),v(n,o)},$$slots:{default:!0}})),Q()}class Li{#e=H(ae({featureLayerView:null,areaInfos:[]}));get layerHighlightState(){return i(this.#e)}set layerHighlightState(e){_(this.#e,e,!0)}#t=H(null);get lastAddedArea(){return i(this.#t)}set lastAddedArea(e){_(this.#t,e,!0)}#r=H(null);get lastRemovedArea(){return i(this.#r)}set lastRemovedArea(e){_(this.#r,e,!0)}#n=H(null);get currentHoveredArea(){return i(this.#n)}set currentHoveredArea(e){_(this.#n,e,!0)}#i=[];#o=new Ae;setNameFields(e){console.log("Setting name fields:",e),this.#i=e}setSelectedLayerView(e){this.layerHighlightState?.featureLayerView!==e&&(this.layerHighlightState&&this.layerHighlightState.areaInfos.forEach(t=>{t.handle.remove()}),this.layerHighlightState={featureLayerView:e,areaInfos:[]})}clearSelectedLayerView(){this.layerHighlightState.featureLayerView!==null&&(this.resetSelectedAreas(),this.layerHighlightState.featureLayerView=null)}resetSelectedAreas(){!this.layerHighlightState.featureLayerView&&this.layerHighlightState.areaInfos.length===0||(this.layerHighlightState&&this.layerHighlightState.areaInfos.forEach(e=>{e.handle.remove()}),this.layerHighlightState={featureLayerView:null,areaInfos:[]})}addSelectedArea(e,t){if(!this.layerHighlightState){console.warn("SelectedAreasStore: No feature layer view is set.");return}const r={id:e,handle:t};this.layerHighlightState.areaInfos.push(r),this.lastAddedArea=r}removeSelectedArea(e){if(!this.layerHighlightState){console.warn("SelectedAreasStore: No feature layer view is set.");return}const t=this.layerHighlightState.areaInfos.findIndex(r=>r.id===e);t!==-1&&(this.lastRemovedArea={id:e,handle:this.layerHighlightState.areaInfos[t].handle},this.layerHighlightState.areaInfos[t].handle.remove(),this.layerHighlightState.areaInfos.splice(t,1))}async getAreaNamesById(e){if(!this.layerHighlightState?.featureLayerView)return[];const t=this.getNameFieldForCurrentLayer();if(!t)return[];const r=this.layerHighlightState.featureLayerView.layer;let n=this.#o.get(r.uid);n||(n=new Ae,this.#o.set(r.uid,n));const a=new Array(e.length),o=new Ae,c=[];if(e.forEach((d,y)=>{o.set(d,y);const l=n.get(d);l!==void 0?a[y]=l:c.push(d)}),c.length===0)return a.map(d=>d??"");const g=r.objectIdField,h=await r.queryFeatures({objectIds:c,outFields:[t,g],returnGeometry:!1});for(const d of h.features){const y=d.attributes[g],l=d.attributes[t],m=o.get(y);m!==void 0&&(a[m]=l??"",n.set(y,l??""))}return a.map(d=>d??"")}setHoveredArea(e,t){this.currentHoveredArea&&this.clearHoveredArea(),this.currentHoveredArea={id:e,handle:t}}clearHoveredArea(){this.currentHoveredArea&&(this.currentHoveredArea?.handle.remove(),this.currentHoveredArea=null)}getNameFieldForCurrentLayer(){if(!this.layerHighlightState||!this.layerHighlightState.featureLayerView)return null;const e=this.#i.find(t=>t.layerName===this.layerHighlightState?.featureLayerView?.layer?.title)?.field;return e||(console.warn(`SelectedAreasStore: No name field configured for layer ${this.layerHighlightState.featureLayerView.layer.title}`,this.#i),null)}}const Z=new Li;class Hi{#e=H(null);get mapView(){return i(this.#e)}set mapView(e){_(this.#e,e,!0)}#t=H(ae(new Set));get interactableLayers(){return i(this.#t)}set interactableLayers(e){_(this.#t,e,!0)}pointerMoveHandle=null;clickHandle=null;leaveHandle=null;enterHandle=null;#r=H(!1);get isInitialized(){return i(this.#r)}set isInitialized(e){_(this.#r,e,!0)}#n=H(!0);get pointerInsideMap(){return i(this.#n)}set pointerInsideMap(e){_(this.#n,e,!0)}initializationInProgress=!1;async initializeAsync(e,t){if(console.log("[map-interaction-store] Initializing with MapView"),this.mapView===e&&this.isInitialized){console.log("[map-interaction-store] MapView is already initialized"),this.interactableLayers=t;return}if(this.initializationInProgress){console.log("[map-interaction-store] Initialization already in progress");return}this.initializationInProgress=!0,console.log("[map-interaction-store] Cleaning up previous MapView if any"),this.cleanup(),this.mapView=e,this.interactableLayers=t,await e.when(),this.setupHighlights(e),this.setupPointerMoveHandler(e),this.setupClickHandler(e),this.setupLeaveHandler(e),this.setupEnterHandler(e),this.isInitialized=!0,console.log("[map-interaction-store] Initialized with MapView"),this.initializationInProgress=!1}updateInteractableLayers(e){this.interactableLayers=e}setupHighlights(e){const t={name:"hover",color:"lightgreen",haloOpacity:1,fillOpacity:.2},r={name:"selected",color:"green",haloOpacity:1,fillOpacity:.3};e.highlights.push(t),e.highlights.push(r)}setupPointerMoveHandler(e){this.pointerMoveHandle=e.on("pointer-move",async t=>{if(!this.pointerInsideMap)return;const{results:r}=await e.hitTest(t),n=r[0];if(!n){this.clearHoverHighlight();return}const a=n.graphic,o=a.layer;if(!a||!o||!this.isLayerInteractable(o.id)||a.attributes?.[o.objectIdField]===void 0){this.clearHoverHighlight();return}const c=a.attributes?.[o.objectIdField];if(!(Z.currentHoveredArea&&Z.currentHoveredArea.id===c))try{const g=await e.whenLayerView(o);Z.layerHighlightState.featureLayerView!==g&&Z.setSelectedLayerView(g),this.clearHoverHighlight();const h=g;if(!h){console.warn("LayerView is not a FeatureLayerView");return}if(!this.pointerInsideMap)return;const d=h.highlight(a,{name:"hover"});Z.setHoveredArea(c,d)}catch(g){console.error("Error in pointer-move handler:",g),this.clearHoverHighlight()}})}setupClickHandler(e){this.clickHandle=e.on("click",async t=>{const{results:r}=await e.hitTest(t),n=r[0];if(!n)return;const a=n.graphic,o=a.layer;if(!a||!o||!this.isLayerInteractable(o.id)||a.attributes?.[o.objectIdField]===void 0)return;const c=a.attributes?.[o.objectIdField];try{const g=await e.whenLayerView(o),h=g;if(!h){console.warn("Layer is not a FeatureLayerView");return}Z.layerHighlightState.featureLayerView!==g&&Z.setSelectedLayerView(g);const y=(Z.layerHighlightState.areaInfos||[]).find(l=>l.id===c);if(y)Z.removeSelectedArea(y.id);else{const l=h.highlight(a,{name:"selected"});Z.addSelectedArea(c,l)}}catch(g){console.error("Error in click handler:",g)}})}setupLeaveHandler(e){this.leaveHandle=e.on("pointer-leave",()=>{this.pointerInsideMap=!1,this.clearHoverHighlight()})}setupEnterHandler(e){this.enterHandle=e.on("pointer-enter",()=>{this.pointerInsideMap=!0})}isLayerInteractable(e){return this.interactableLayers.has(e)}clearHoverHighlight(){Z.currentHoveredArea&&Z.clearHoveredArea()}cleanup(){this.pointerMoveHandle&&(this.pointerMoveHandle.remove(),this.pointerMoveHandle=null),this.clickHandle&&(this.clickHandle.remove(),this.clickHandle=null),this.leaveHandle&&(this.leaveHandle.remove(),this.leaveHandle=null),this.enterHandle&&(this.enterHandle.remove(),this.enterHandle=null),this.clearHoverHighlight(),this.isInitialized=!1,this.mapView=null,this.pointerInsideMap=!0,this.interactableLayers=new Set,console.log("[map-interaction-store] Cleaned up")}get currentMapView(){return this.mapView}get initialized(){return this.isInitialized}}const it=new Hi;class Wt{id;name;children;parent;constructor(e,t,r=[],n=null){this.id=e,this.name=t,this.children=r,this.parent=n}}class le extends Wt{layer;constructor(e,t,r,n=[],a=null){super(e,t,n,a),this.layer=r}}class Ge extends le{featureLayer;field;constructor(e,t,r,n,a=[],o=null){super(e,t,r,a,o),this.field=n,this.featureLayer=r}}var ie=(s=>(s.Inactive="inactive",s.Indeterminate="indeterminate",s.Active="active",s))(ie||{}),Mi=L('<div class="esri-ui-element svelte-i0p9uk"><!></div>'),Ni=L('<div class="esri-ui-element svelte-i0p9uk"><!></div>'),zi=L('<div class="map-view svelte-i0p9uk"></div> <!> <!>',1);function Fi(s,e){J(e,!0);const t=W(e,"webMap",3,null),r=W(e,"panelPosition",3,"top-left"),n=W(e,"menuPosition",3,"top-right");let a=null,o=H(null),c=H(null),g=H(null),h=H(!1);const d="streets-vector";let y,l;ot(async()=>{await m(),await x()});async function m(){if(!l){const[{default:M},{default:N},{default:E},{default:Y}]=await Promise.all([Fe(()=>import("../chunks/Bo-Ws7j2.js").then(O=>O.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37]),import.meta.url),Fe(()=>import("../chunks/CISklr1W.js").then(O=>O.a3),__vite__mapDeps([38,1,2,3,5,39,24,6,7,22,40,41,42,43,8,9,10,11,44,23,20,21,45,46,47,48,12,13,49,50,51,25,52,53,17,32,54,55,56,26,57,58,15,59,0,4,14,16,18,19,27,28,29,30,31,33,34,35,36,37,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86]),import.meta.url),Fe(()=>import("../chunks/huXfT4GN.js").then(O=>O.W),__vite__mapDeps([87,1,2,3,5,6,7,0,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,39,40,41,42,43,44,45,46,47,48,49,50,51,88,89,90,91,62,92,93,74,75,65,94,95,96,61,97,98,99,100,64,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,52,53,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171]),import.meta.url),Fe(()=>import("../chunks/NPoLgU3x.js"),__vite__mapDeps([94,5,1,2,3,43,24,6,7,22,8,9,10,11,44,23,20,21,88,95,96,65,61,97,98,99,37,13,62,100,15,26,64,41,42,45,46,47,48,12,49,50,19,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,89,32,52,53,17,120,121,122,123,124,125,126,127,33,34,35,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,51,144,145,146,147,148,149,150,151,152,153,154,28,155,156,157,16,158,159,160,91,161,162,163,164,165,166,167,168,90]),import.meta.url)]);y=M,l=N}}async function u(M,N){const E=new l({container:N,popupEnabled:!1,map:M});return await E.when(),E}function f(M){M.ui.move("zoom","top-right"),i(c)&&r()&&M.ui.add(i(c),r()),i(g)&&n()&&M.ui.add(i(g),n()),_(h,!0)}async function C(){return new y({basemap:d})}async function T(){if(t())try{if(await m(),await x(),!i(o)){console.error("MapView is not initialized");return}i(o).map=t(),console.log("[uprn-map-view] MapView updated with new webMap")}catch(M){console.error("Error updating MapView with new webMap:",M)}}de(()=>{t()&&T()});async function x(){if(!a){console.error("Map container element was not found");return}try{_(o,await u(t()??void 0,a),!0),f(i(o)),console.log("[uprn-map-view] Map loaded successfully")}catch(M){console.error("Error loading map:",M),await w()}}async function w(){try{const M=await C();_(o,await u(M,a),!0),f(i(o)),console.log("[uprn-map-view] Fallback map loaded")}catch(M){console.error("Error loading fallback map:",M)}}de(()=>{if(!i(o)||!e.areaSelectionTreeviewStore.initialized)return;const M=e.areaSelectionTreeviewStore.getNonHiddenNodes().map(N=>N.id);it.initialized?it.updateInteractableLayers(new Set(M)):it.initializeAsync(i(o),new Set(M))});async function I(M){if(!i(o))return;const N=await i(o).whenLayerView(M);if(!N){console.warn("Could not get LayerView for the visible node layer");return}Z.setSelectedLayerView(N)}de(()=>{if(!e.areaSelectionTreeviewStore.initialized)return;if(!e.areaSelectionTreeviewStore.getVisibleNodes().length){Z.resetSelectedAreas();return}const M=e.areaSelectionTreeviewStore.getVisibleNodes()[0];if(!M||!(M instanceof le)){console.warn("Visible node is not a FeatureLayer");return}if(!M.layer){console.warn("Visible node layer is not a FeatureLayer");return}I(M.layer)});function V(){it.cleanup(),i(o)&&i(o).destroy()}sr(()=>{V()});var k=zi(),j=S(k);Le(j,M=>a=M,()=>a);var R=A(j,2);{var G=M=>{var N=Mi(),E=b(N);{var Y=O=>{var $=F(),q=S($);se(q,()=>e.panel),v(O,$)};B(E,O=>{i(h)&&O(Y)})}p(N),Le(N,O=>_(c,O),()=>i(c)),v(M,N)};B(R,M=>{e.panel&&M(G)})}var U=A(R,2);{var ee=M=>{var N=Ni(),E=b(N);{var Y=O=>{var $=F(),q=S($);se(q,()=>e.menu),v(O,$)};B(E,O=>{i(h)&&O(Y)})}p(N),Le(N,O=>_(g,O),()=>i(g)),v(M,N)};B(U,M=>{e.menu&&M(ee)})}v(s,k),Q()}var Pi=L('<div class="tree-node-item svelte-1x7dzzd"><!></div>'),Vi=L('<div class="tree-children relative ml-4 w-full svelte-1x7dzzd"><div class="tree-guide-line tree-guide-line-animate svelte-1x7dzzd"></div> <!></div>'),Oi=L('<div class="w-full"><!>  <!></div>');function qt(s,e){const t=W(e,"isOpen",3,!1),r=W(e,"childNodes",3,null);var n=Oi(),a=b(n);se(a,()=>e.content??ne);var o=A(a,2);{var c=g=>{var h=Vi(),d=A(b(h),2);xe(d,19,()=>r()??[],y=>y.id,(y,l,m)=>{var u=Pi(),f=b(u);se(f,()=>e.childNode??ne,()=>i(l)),p(u),oe(()=>Ve(u,`animation-delay: ${100+i(m)*50}ms;`)),v(y,u)}),p(h),v(g,h)};B(o,g=>{t()&&r()&&g(c)})}p(n),v(s,n)}const Yt="mb-1 cursor-pointer rounded-md border border-border/30 p-2 text-left",Zt="transform-gpu transition-all duration-150 ease-out hover:border-border/50 hover:bg-card/70 hover:shadow-sm",Ei="transition-colors hover:bg-card/70",bt="text-sm font-normal",_t="bg-card/50",Xt="bg-accent text-accent-foreground";function Di(s){const{enhancedHover:e=!1,includeFont:t=!1,pressed:r=!1}=s;let n=Yt;return e?n+=" "+Zt:n+=" "+Ei,t&&(n+=" "+bt),r?n+=" "+Xt:n+=" "+_t,n}const Ri="!h-auto !min-h-9 !whitespace-normal data-[state=on]:!bg-accent data-[state=on]:!text-accent-foreground data-[state=on]:hover:!bg-accent data-[state=on]:hover:!text-accent-foreground";var Gi=L('<div class="flex w-full !items-center !justify-between gap-2"><div class="pointer-events-none !flex min-w-0 flex-1 !items-center gap-1"><span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div>'),Bi=L('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><!> <span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function zt(s,e){const t=`calc(100% - ${e.depth*1}rem)`,r=`${Yt} ${Zt}`,n=`${r} ${Ri} ${_t} ${bt}`,a=`${r} ${bt}`;var o=F(),c=S(o);{var g=d=>{Mr(d,{get pressed(){return e.pressed},get class(){return n},variant:"outline",get style(){return`width: ${t};`},get onPressedChange(){return e.onclick},children:(y,l)=>{var m=Gi(),u=b(m),f=b(u),C=b(f);Ye(C,()=>e.icon),p(f);var T=A(f,2),x=b(T,!0);p(T),p(u);var w=A(u,2);se(w,()=>e.children??ne),p(m),oe(()=>he(x,e.name)),v(y,m)},$$slots:{default:!0}})},h=d=>{var y=Bi();y.__click=function(...I){e.onclick?.apply(this,I)};var l=b(y),m=b(l),u=b(m);Gt(u,{get isOpen(){return e.isOpen}});var f=A(u,2),C=b(f);Ye(C,()=>e.icon),p(f);var T=A(f,2),x=b(T,!0);p(T),p(m);var w=A(m,2);se(w,()=>e.children??ne),p(l),p(y),oe(()=>{Pe(y,1,`${a} ${e.pressed?Xt:_t}`),Ve(y,`width: ${t};`),he(x,e.name)}),v(d,y)};B(c,d=>{e.isTogglable?d(g):d(h,!1)})}v(s,o)}lt(["click"]);const Kt=(s,e,t,r)=>e?Ui(s,t):t?r?'<path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>':'<path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>':'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14,2 14,8 20,8"/>',Ui=(s,e)=>{switch(s.type){case"group":return kt;case"feature":return At;case"tile":return Nr;default:return e?kt:At}};function Jt(s,e){J(e,!0);const t=f=>{var C=F(),T=S(C);{var x=w=>{var I=F(),V=S(I);{var k=R=>{zt(R,{isTogglable:!1,get pressed(){return i(h)},get icon(){return i(d)},get name(){return e.node.name},get depth(){return n()},onclick:u,get isOpen(){return i(g)}})},j=R=>{zt(R,{isTogglable:!0,get pressed(){return i(h)},get icon(){return i(d)},get name(){return e.node.name},get depth(){return n()},onclick:m,get isOpen(){return i(g)}})};B(V,R=>{o?R(k):R(j,!1)})}v(w,I)};B(T,w=>{e.treeviewConfigStore.getItemConfig(e.node.id)?.isHidden||w(x)})}v(f,C)},r=(f,C=ne)=>{var T=F(),x=S(T);{var w=I=>{{let V=P(()=>n()+1);Jt(I,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return C()},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get getNodeVisibility(){return e.getNodeVisibility},get depth(){return i(V)},get useLayerTypeIcon(){return a()}})}};B(x,I=>{o&&i(g)&&!e.treeviewConfigStore.getItemConfig(C().id)?.isHidden&&I(w)})}v(f,T)},n=W(e,"depth",3,0),a=W(e,"useLayerTypeIcon",3,!1),o=!!(e.node.children&&e.node.children.length),c=!o;let g=H(!1),h=H(!1),d=H("");function y(){return!e.node.children||!e.getNodeVisibility?!1:e.node.children.some(f=>{const C=e.getNodeVisibility(f.id);return C!==void 0?C:f instanceof le?f.layer.visible:!1})}de(()=>{if(!(!e.node||!(e.node instanceof le))){if(o)_(h,y(),!0);else{const f=e.getNodeVisibility?e.getNodeVisibility(e.node.id):void 0;_(h,f!==void 0?f:e.node.layer.visible,!0)}_(d,Kt(e.node.layer,a(),o,i(g)),!0)}});function l(){!c||!e.onNodeVisibilityChange||o||(_(h,!i(h)),e.onNodeVisibilityChange(e.node,i(h)))}function m(){o||l(),e.onNodeClick?.(e.node)}function u(){_(g,!i(g)),e.onNodeClick?.(e.node)}{let f=P(()=>o?e.node.children:null);qt(s,{get isOpen(){return i(g)},get content(){return t},get childNodes(){return i(f)},get childNode(){return r}})}Q()}class Qt{#e=H(!1);get initialized(){return i(this.#e)}set initialized(e){_(this.#e,e,!0)}#t=null;#r=H(ae([]));#n=P(()=>{const e=new Ae;return this.#p(i(this.#r),e),e});#i=H(ae(new Ae));#o=H(ae(new Ae));#c=H(ae(new Ae));initialize(e,t,r){if(this.initialized)throw new Error("TreeviewStore is already initialized.");if(this.initialized=!0,!t)throw new Error("TreeviewStore requires a valid TreeviewConfigStore to initialize.");if(this.#t=t,r)for(const n of r)i(this.#c).set(n.id,n);if(!e)throw new Error("TreeviewStore requires a valid array of layers to initialize.");this.#a(e),_(this.#r,this.#m(e),!0)}getNodeById(e){return this.#d(),i(this.#n).get(e)}getNodes(){return this.#d(),i(this.#r)}getVisibleNodes(){this.#d();const e=[];for(const[t,r]of i(this.#i)){if(!r)continue;const n=i(this.#n).get(t);n&&e.push(n)}return e}getNonHiddenNodes(){return this.#d(),this.#u(i(this.#r))}#u(e){this.#d();const t=[];for(const r of e){const n=this.#s(r.id);if(!(n&&n.isHidden)&&(t.push(r),r.children?.length)){const a=this.#u(r.children);t.push(...a)}}return t}getVisibilityState(e){return this.#d(),i(this.#i).get(e)??!1}setVisibilityState(e,t){this.#d();const r=i(this.#n).get(e);if(!r)throw new Error(`Tree node not found for ID: ${e}`);if(!(r instanceof le))throw new Error(`Tree node is not a layer node: ${e}`);i(this.#i).set(e,t),r.layer.visible=t,r instanceof Ge&&(r.featureLayer.displayField=t?r.field.name:""),this.#l(r,t);const n=this.#s(e);if(!n||n.isHidden||(n.visibilityDependencyIds?.length&&this.#f(r,t),!n.visibilityGroupId))return;const a=n.visibilityGroupId;console.log(`Node ${e} is part of visibility group ${a}`);let o=i(this.#o).get(a);o||(o=[],i(this.#o).set(a,o));const c=this.#h(a);if(!c)throw new Error(`Visibility group config not found for group ID: ${a}`);if(!t){const h=o.indexOf(e);o.splice(h,1);return}const g=h=>{i(this.#i).set(h,!1);const d=i(this.#n).get(h);if(d&&d instanceof le){d.layer.visible=!1,this.#l(d,!1);const l=this.#s(h);l&&l.visibilityDependencyIds?.length&&this.#f(d,!1)}const y=o.indexOf(h);y>=0&&o.splice(y,1)};for(;o.length>=c.maxVisibleLayers;){const h=o[0];g(h)}o.push(e),this.#l(r,t),n.visibilityDependencyIds?.length&&this.#f(r,t)}#l(e,t){const r=e.parent;!r||!(r instanceof le)||(i(this.#i).set(r.id,t),r.layer.visible=t,this.#l(r,t))}#f(e,t){const r=this.#s(e.id);if(r&&r.visibilityDependencyIds?.length)for(const n of r.visibilityDependencyIds){const a=i(this.#n).get(n);a&&a instanceof le&&(i(this.#i).set(n,t),a.layer.visible=t,this.#l(a,t))}}#h(e){if(e&&this.#t)return this.#t.getVisibilityGroupConfig(e)}#a(e){this.#t&&this.#t.resolveInheritance(e)}#m(e){const t=e.map(r=>this.#g(r,void 0));return this.#v([...t])}#s(e){if(e&&this.#t)return this.#t.getItemConfig(e)}#v(e){e.reverse();for(const t of e)t.children?.length&&this.#v(t.children);return e}#g(e,t){const r=this.#s(e.id);if(r&&r.customConverterId){if(!i(this.#c).has(r.customConverterId))throw new Error(`Custom converter not found: ${r.customConverterId}`);const a=i(this.#c).get(r.customConverterId);if(!a)throw new Error(`Custom converter not found: ${r.customConverterId}`);return a.layerToNode(e,t??null)}const n=new le(e.id,e.title,e,[],t);if(e.visible=r?.isVisibleOnInit??!1,i(this.#i).set(e.id,e.visible),this.#C(e)&&r?.showFields){const a=e;a.loaded||console.warn(`Layer not loaded: ${e.id}`);for(const o of a.fields??[]){const c=this.#w(o,n);n.children.push(c)}}if(this.#S(e)){const a=e;return n.children=a.layers.toArray().map(o=>this.#g(o,n)),n}if(this.#b(e)){const a=e;if(a.sublayers&&a.sublayers.length>0){const o=a.sublayers;n.children=o.toArray().map(this.#y)}}return n}#w(e,t){const r=this.#_(t.id,e.name),n=new Ge(r,e.alias||e.name,t.layer,e,[],t),a=this.#s(r);return i(this.#i).set(r,a?.isVisibleOnInit??!1),n}#b(e){return e.type==="map-image"||e.type==="wms"}#y(e){const t=new le(e.uid,e.title,e);return e.sublayers?.length&&(t.children=e.sublayers.toArray().map(this.#y)),t}#p(e,t){for(const r of e)t.set(r.id,r),r.children?.length&&this.#p(r.children,t)}#_(e,t){return`${e}-${t}`}#S(e){return e.type==="group"}#C(e){return e.type==="feature"}#d(){if(!this.initialized)throw new Error("TreeviewStore is not initialized. Call initialize() first.")}}function $i(s,e){J(e,!0);const t=W(e,"webMap",3,null);de(()=>{!t()||e.treeviewStore.initialized||e.treeviewStore.initialize(t().layers.toArray(),e.treeviewConfigStore)});var r=F(),n=S(r);{var a=o=>{var c=F(),g=S(c);K(g,()=>Bt,(h,d)=>{d(h,{children:(y,l)=>{var m=F(),u=S(m);xe(u,17,()=>e.treeviewStore.getNodes(),f=>f.id,(f,C)=>{Jt(f,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return i(C)},onNodeClick:()=>{},onNodeVisibilityChange:(T,x)=>e.treeviewStore.setVisibilityState(T.id,x),getNodeVisibility:T=>e.treeviewStore.getVisibilityState(T),depth:0,useLayerTypeIcon:!0})}),v(y,m)},$$slots:{default:!0}})}),v(o,c)};B(n,o=>{e.treeviewStore.initialized&&o(a)})}v(s,r),Q()}function ji(s,e){J(e,!0),de(()=>{if(!Z.lastAddedArea)return;(async()=>{if(Z.lastAddedArea===null)return;const r=await Z.getAreaNamesById([Z.lastAddedArea.id]);!r||r.length===0||!r[0]||He.success(`Area added: ${r?.[0]}`)})()}),de(()=>{if(!Z.lastRemovedArea)return;(async()=>{if(Z.lastRemovedArea===null)return;const r=await Z.getAreaNamesById([Z.lastRemovedArea.id]);!r||r.length===0||!r[0]||He.success(`Area removed: ${r?.[0]}`)})()}),Q()}var Wi=L("<!> <!>",1),qi=L('<div class="tab-list-wrapper flex-shrink-0 svelte-rohqkk"><!></div> <!>',1);function Yi(s,e){J(e,!0);const t=W(e,"triggers",19,()=>[]);var r=F(),n=S(r);K(n,()=>Pr,(a,o)=>{o(a,{get value(){return e.value},get onValueChange(){return e.onValueChange},class:"flex h-full w-full flex-col",children:(c,g)=>{var h=qi(),d=S(h),y=b(d);K(y,()=>zr,(m,u)=>{u(m,{class:"tab-list",children:(f,C)=>{var T=F(),x=S(T);xe(x,17,t,Re,(w,I,V,k)=>{let j=()=>i(I).value,R=()=>i(I).label;var G=Wi(),U=S(G);K(U,()=>Fr,(N,E)=>{E(N,{get value(){return j()},class:"tab-trigger",children:(Y,O)=>{Oe();var $=Ee();oe(()=>he($,R())),v(Y,$)},$$slots:{default:!0}})});var ee=A(U,2);{var M=N=>{ti(N,{class:"separator"})};B(ee,N=>{j()!==t()[t().length-1]?.value&&N(M)})}v(w,G)}),v(f,T)},$$slots:{default:!0}})}),p(d);var l=A(d,2);se(l,()=>e.children??ne),v(c,h)},$$slots:{default:!0}})}),v(s,r),Q()}var Zi=L('<div class="min-w-0 space-y-2 overflow-hidden p-4"><!></div>'),Xi=L("<!> <!>",1);function nt(s,e){var t=F(),r=S(t);K(r,()=>Vr,(n,a)=>{a(n,{get value(){return e.value},class:"flex min-h-0 flex-1 flex-col",children:(o,c)=>{var g=Xi(),h=S(g);K(h,()=>Ct,(l,m)=>{m(l,{class:"card-content flex min-h-0 flex-1 flex-col overflow-hidden p-0",children:(u,f)=>{Ut(u,{class:"h-full w-full",children:(C,T)=>{var x=Zi(),w=b(x);se(w,()=>e.children??ne),p(x),v(C,x)},$$slots:{default:!0}})},$$slots:{default:!0}})});var d=A(h,2);{var y=l=>{var m=F(),u=S(m);K(u,()=>ri,(f,C)=>{C(f,{class:"flex flex-shrink-0 items-center justify-between",children:(T,x)=>{var w=F(),I=S(w);se(I,()=>e.footer),v(T,w)},$$slots:{default:!0}})}),v(l,m)};B(d,l=>{e.footer&&l(y)})}v(o,g)},$$slots:{default:!0}})}),v(s,t)}class Ki{#e=H(!1);get isLoaded(){return i(this.#e)}set isLoaded(e){_(this.#e,e,!0)}#t=H(null);get data(){return i(this.#t)}set data(e){_(this.#t,e,!0)}#r=P(()=>{const e=new Ae;function t(r){e.set(r.id,r),r.type==="group"&&r.layers.forEach(a=>{t(a)})}return this.data&&this.data.layers.forEach(r=>{t(r)}),e});get dataLookup(){return i(this.#r)}set dataLookup(e){_(this.#r,e)}#n=H(!1);get loading(){return i(this.#n)}set loading(e){_(this.#n,e,!0)}#i=H(null);get error(){return i(this.#i)}set error(e){_(this.#i,e,!0)}async initializeAsync(e){if(!this.data){this.loading=!0,this.error=null;try{const{portalUrl:t,itemId:r,proxy:n}=e;await this.configurePortalAsync(t,n),await this.loadwebmapAsync(r)}catch(t){console.error("Error initializing webmap:",t),this.error=t.message}finally{this.loading=!1}}}async configurePortalAsync(e,t){if(!e)return;const r=await en();if(r.portalUrl=e,console.log(r),!t)return;const{addProxyRule:n}=await tn();console.log("Adding proxy rule for portal traffic"),n({urlPrefix:t?.urlPrefix,proxyUrl:t?.proxyUrl})}async loadwebmapAsync(e){if(this.data)return;const[t,r]=await Promise.all([Ji(),Qi()]),n=new r({id:e}),a=new t({portalItem:n});this.data=a,await this.data.when(),this.data.loaded&&(this.isLoaded=!0)}clear(){this.data=null,this.loading=!1,this.error=null}clearError(){this.error=null}getWebmap(){return this.data}}let gt=null,mt=null,yt=null,pt=null;async function Ji(){return gt||(gt=Fe(()=>import("../chunks/huXfT4GN.js").then(s=>s.W),__vite__mapDeps([87,1,2,3,5,6,7,0,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,39,40,41,42,43,44,45,46,47,48,49,50,51,88,89,90,91,62,92,93,74,75,65,94,95,96,61,97,98,99,100,64,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,52,53,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171]),import.meta.url).then(s=>s.default)),gt}async function Qi(){return mt||(mt=Fe(()=>import("../chunks/DxjcXvGa.js"),__vite__mapDeps([16,5,1,2,3,6,7,13,10]),import.meta.url).then(s=>s.default)),mt}async function en(){return yt||(yt=Fe(()=>import("../chunks/DHq0rblm.js").then(s=>s.Z),[],import.meta.url).then(s=>s.default)),yt}async function tn(){return pt||(pt=Fe(()=>import("../chunks/BgvLO-3W.js").then(s=>s.O),__vite__mapDeps([7,2,3]),import.meta.url)),pt}class rn{#e=H(ae(new Ae));get DataSelections(){return i(this.#e)}set DataSelections(e){_(this.#e,e,!0)}addSelection(e){this.DataSelections.set(e.layerId,e),He.success(`'${e.name}' Added`)}removeSelection(e){const t=this.DataSelections.get(e);this.DataSelections.delete(e),He.success(`'${t?.name}' Removed`)}updateSelection(e,t){if(!(e instanceof le)){this.updateChildrenSelection(e,t);return}if(e instanceof Ge){this.updateFieldSelection(e,t);return}this.updateLayerSelection(e,t)}getSelectionState(e){if(!(e instanceof le))return this.determineSelectionStateFromChildren(e);if(this.isGroupLayer(e))return this.determineSelectionStateFromChildren(e);let t;return e instanceof Ge?(t=this.DataSelections.get(e.featureLayer.id),t&&t.fields.has(e.field.name)?ie.Active:ie.Inactive):(t=this.DataSelections.get(e.id),t?this.isFeatureLayer(e)&&e.children&&e.children.length>0?this.determineSelectionStateFromChildren(e):ie.Active:ie.Inactive)}updateLayerSelection(e,t){let r=this.DataSelections.get(e.id);switch(t){case ie.Active:!r&&!this.isGroupLayer(e)&&(r=this.createAndAddDataSelection(e.id,e.layer.title||""));for(const n of e.children||[])this.updateSelection(n,t);break;case ie.Inactive:r&&!this.isGroupLayer(e)&&this.removeSelection(e.id),this.updateChildrenSelection(e,t);break}}updateFieldSelection(e,t){let r=this.DataSelections.get(e.featureLayer.id);switch(t){case ie.Active:r||(r=this.createAndAddDataSelection(e.featureLayer.id,e.featureLayer.title||"")),r.fields.add(e.field.name);break;case ie.Inactive:if(!r)break;r.fields.delete(e.field.name),r.fields.size===0&&this.removeSelection(r.layerId);break}}updateChildrenSelection(e,t){for(const r of e.children||[])this.updateSelection(r,t)}determineSelectionStateFromChildren(e){let t=0,r=0;for(const n of e.children||[]){r++;const a=this.getSelectionState(n);if(a===ie.Active||this.isFeatureLayer(n)&&a!==ie.Inactive)t++;else if(a===ie.Indeterminate)return ie.Indeterminate}return t===0?ie.Inactive:t===r?ie.Active:ie.Indeterminate}createAndAddDataSelection(e,t){const r={layerId:e,name:t,fields:new qe};return this.addSelection(r),r}isGroupLayer(e){return e instanceof le&&e.layer.type==="group"}isFeatureLayer(e){return e instanceof le&&e.layer.type==="feature"}}const ye=new rn;function nn(s,e){s.stopPropagation(),e.onFilterClicked?.(e.layerId)}var an=L("<button><!></button>");function on(s,e){J(e,!0);let t=H(ae(e.hasFiltersApplied?.(e.layerId)??!1));de(()=>{_(t,e.hasFiltersApplied?.(e.layerId)??!1,!0)});const r=P(()=>i(t)?Or:Er);var n=an();let a;n.__click=[nn,e];var o=b(n);Ye(o,()=>i(r)),p(n),oe(c=>{a=Pe(n,1,"filter-btn svelte-k95pvd",null,a,c),at(n,"aria-pressed",i(t))},[()=>({active:i(t)})]),v(s,n),Q()}lt(["click"]);class sn{#e=H(null);get ActiveLayer(){return i(this.#e)}set ActiveLayer(e){_(this.#e,e,!0)}}var ln=L('<li class="area-item svelte-81yb5c"><span class="area-name svelte-81yb5c"> </span> <!></li>'),dn=L('<ul class="selected-list svelte-81yb5c"></ul> <p class="count svelte-81yb5c"> </p>',1),cn=L('<p class="no-selection svelte-81yb5c">No areas selected</p>'),un=L('<li class="data-item svelte-81yb5c"><span class="data-name svelte-81yb5c"> </span> <div class="data-actions svelte-81yb5c"><!> <!></div></li>'),fn=L('<ul class="selected-list svelte-81yb5c"></ul> <p class="count svelte-81yb5c"> </p>',1),hn=L('<p class="no-selection svelte-81yb5c">No data selected</p>'),vn=L('<h2 class="svelte-81yb5c">Export Options</h2> <div class="section svelte-81yb5c"><h3 class="svelte-81yb5c"> </h3> <h4 class="svelte-81yb5c">Selected Areas</h4> <!></div> <div class="section svelte-81yb5c"><h4 class="svelte-81yb5c">Selected Data</h4> <!></div>',1);function gn(s,e){J(e,!0);const t=W(e,"fieldFilterMenuStore",7);let r=H(ae([]));de(()=>{if(!Z.layerHighlightState.areaInfos.length){_(r,[],!0);return}(async()=>{const I=await Z.getAreaNamesById(Z.layerHighlightState.areaInfos.map(k=>k.id)),V=[];for(let k=0;k<I.length;k++)V.push({name:I[k]||"Unknown Area",HighlightAreaInfo:Z.layerHighlightState.areaInfos[k]});_(r,V,!0)})()});function n(w){const I=i(r).findIndex(V=>V.name===w);I!==-1&&Z.removeSelectedArea(i(r)[I]?.HighlightAreaInfo.id)}function a(w){console.log("[export-menu] Removing data selection for layerId:",w),ye.DataSelections.delete(w),console.log("[export-menu] Current SelectedData:",ii(ye.DataSelections))}function o(w){if(t().ActiveLayer?.id===w){t().ActiveLayer=null;return}const I=e.webMapStore.dataLookup.get(w);if(!I){console.warn(`[export-menu] Layer with ID ${w} not found in web map store.`);return}t().ActiveLayer=I}function c(w){const I=ye.DataSelections.get(w);return!(!I||!I.fields||I.fields.size===0||I.fields.size===e.webMapStore.dataLookup.get(w)?.fields?.length)}var g=vn(),h=A(S(g),2),d=b(h),y=b(d,!0);p(d);var l=A(d,4);{var m=w=>{var I=dn(),V=S(I);xe(V,21,()=>i(r),Re,(R,G)=>{var U=ln(),ee=b(U),M=b(ee,!0);p(ee);var N=A(ee,2);_e(N,{variant:"ghost",size:"sm",class:"area-remove-btn",onclick:()=>n(i(G).name),children:(E,Y)=>{Oe();var O=Ee("");v(E,O)},$$slots:{default:!0}}),p(U),oe(()=>he(M,i(G).name)),v(R,U)}),p(V);var k=A(V,2),j=b(k);p(k),oe(()=>he(j,`${i(r).length??""} area(s) selected`)),v(w,I)},u=w=>{var I=cn();v(w,I)};B(l,w=>{i(r).length>0?w(m):w(u,!1)})}p(h);var f=A(h,2),C=A(b(f),2);{var T=w=>{var I=fn(),V=S(I);xe(V,21,()=>[...ye.DataSelections.values()],Re,(R,G)=>{var U=un(),ee=b(U),M=b(ee,!0);p(ee);var N=A(ee,2),E=b(N);{var Y=$=>{on($,{get layerId(){return i(G).layerId},onFilterClicked:o,hasFiltersApplied:c})};B(E,$=>{i(G).fields&&$(Y)})}var O=A(E,2);_e(O,{variant:"ghost",size:"sm",class:"data-remove-btn",onclick:()=>a(i(G).layerId),children:($,q)=>{Oe();var ce=Ee("");v($,ce)},$$slots:{default:!0}}),p(N),p(U),oe(()=>he(M,i(G).name)),v(R,U)}),p(V);var k=A(V,2),j=b(k);p(k),oe(()=>he(j,`${ye.DataSelections.size??""} data layer(s) selected`)),v(w,I)},x=w=>{var I=hn();v(w,I)};B(C,w=>{ye.DataSelections.size>0?w(T):w(x,!1)})}p(f),oe(w=>he(y,w),[()=>e.areaSelectionTreeviewStore.initialized?e.areaSelectionTreeviewStore.getVisibleNodes()[0]?.name:"Loading..."]),v(s,g),Q()}class mn{#e=H(ae([]));get downloads(){return i(this.#e)}set downloads(e){_(this.#e,e,!0)}}const De=new mn;var yn=L('<p class="text-sm text-muted-foreground">Click "Export" to begin the download.</p> <!>',1);function pn(s,e){J(e,!0);const t=()=>Sr(Dr,"$page",r),[r,n]=_r();function a(){if(Z.layerHighlightState.areaInfos.length<=0){He.error("Please select at least one area to export.");return}if(ye.DataSelections.size<=0){He.error("Please select at least one data layer to export.");return}console.log("Starting export..."),He.info("Export started successfully.",{duration:4e3});const g=crypto.randomUUID();De.downloads.push({id:g,url:`${t().url}/${g}`,status:"pending"}),e.onExportSuccess?.()}var o=yn(),c=A(S(o),2);_e(c,{onclick:a,children:(g,h)=>{Oe();var d=Ee("Export");v(g,d)},$$slots:{default:!0}}),v(s,o),Q(),n()}var wn=L('<p class="text-sm font-medium"> </p>'),bn=L('<div class="pointer-events-none fixed z-50 transition-opacity duration-200"><!></div>');function _n(s,e){J(e,!0);let t=H(null),r=H(ae({x:0,y:0})),n=0;const a=h=>{_(r,{x:h.clientX,y:h.clientY},!0)};de(()=>(document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousemove",a)})),de(()=>{const h=Z.currentHoveredArea?.id,d=++n;if(!h){_(t,null);return}(async()=>{const y=await Z.getAreaNamesById([h]);d===n&&Z.currentHoveredArea?.id===h&&_(t,y[0]??null,!0)})()});var o=F(),c=S(o);{var g=h=>{var d=bn(),y=b(d);K(y,()=>$t,(l,m)=>{m(l,{class:"max-w-xs border !py-2 shadow-lg",children:(u,f)=>{var C=F(),T=S(C);K(T,()=>Ct,(x,w)=>{w(x,{class:"!px-3 !py-0",children:(I,V)=>{var k=wn(),j=b(k,!0);p(k),oe(()=>he(j,i(t))),v(I,k)},$$slots:{default:!0}})}),v(u,C)},$$slots:{default:!0}})}),p(d),oe(()=>Ve(d,`left: ${i(r).x+10}px; top: ${i(r).y-10}px;`)),v(h,d)};B(c,h=>{i(t)&&h(g)})}v(s,o),Q()}function Sn(s,e){s.target===s.currentTarget&&e()}var Cn=(s,e)=>s.key==="Escape"&&e(),In=(s,e,t)=>e(i(t).name),xn=L('<div class="info-icon-container svelte-fp5rsc"><!></div>'),Tn=L('<div class="field-content-wrapper svelte-fp5rsc"><!> <button class="field-content svelte-fp5rsc" tabindex="0"><div class="field-name-container svelte-fp5rsc"><span class="field-name svelte-fp5rsc"> </span> <!></div></button></div>'),kn=L('<div class="master-checkbox-container svelte-fp5rsc"><!> <span class="master-checkbox-label svelte-fp5rsc">Select All Fields</span></div> <!> <!>',1),An=L("<!> <!>",1),Ln=L("<!> <!>",1),Hn=L('<button class="close-button svelte-fp5rsc" aria-label="Close"><!></button> <!>',1),Mn=L('<div class="card-container svelte-fp5rsc" role="dialog" aria-modal="true" tabindex="-1"><!></div>');function Nn(s,e){J(e,!0);const t=W(e,"fieldFilterMenuStore",7);let r=H(null),n=H(ae(new qe)),a=P(()=>{if(!i(r)||!i(r).fields)return{checked:!1,indeterminate:!1};const u=i(r).fields.length,f=i(n)?.size||0;return f===0?{checked:!1,indeterminate:!1}:f===u?{checked:!0,indeterminate:!1}:{checked:!1,indeterminate:!0}});de(()=>{console.log("Active Layer to Filter:",t().ActiveLayer);const u=t().ActiveLayer;if(_(r,u,!0),u){const f=ye.DataSelections.get(u.id);f?.fields?_(n,new qe([...f.fields]),!0):_(n,new qe,!0)}});function o(){c(),t().ActiveLayer=null}function c(){if(!i(r))return;let u=ye.DataSelections.get(i(r).id);if(u){if((u.fields===void 0||u.fields===null)&&(u.fields=new qe),i(n).size===0){ye.removeSelection(i(r).id);return}u.fields.clear(),i(n).forEach(f=>{u.fields?.add(f)})}}function g(u){i(r)&&(i(n).has(u)?i(n).delete(u):i(n).add(u))}function h(){if(!i(r)?.fields)return;(i(n)?.size||0)===0?i(r).fields.forEach(f=>{i(n).add(f.name)}):i(n).clear()}function d(){return i(r)?.fields?i(r).fields:[]}var y=F(),l=S(y);{var m=u=>{var f=Mn();f.__click=[Sn,o],f.__keydown=[Cn,o];var C=b(f);K(C,()=>$t,(T,x)=>{x(T,{class:"command-card",children:(w,I)=>{var V=Hn(),k=S(V);k.__click=o;var j=b(k);ni(j,{size:20}),p(k);var R=A(k,2);K(R,()=>Ct,(G,U)=>{U(G,{class:"card-content",children:(ee,M)=>{var N=F(),E=S(N);K(E,()=>ai,(Y,O)=>{O(Y,{children:($,q)=>{var ce=Ln(),re=S(ce);K(re,()=>oi,(fe,ge)=>{ge(fe,{placeholder:"Search for fields..."})});var ue=A(re,2);K(ue,()=>si,(fe,ge)=>{ge(fe,{children:(be,pe)=>{var Be=An(),z=S(Be);K(z,()=>li,(te,me)=>{me(te,{children:(we,Me)=>{Oe();var Ce=Ee("No results found.");v(we,Ce)},$$slots:{default:!0}})});var X=A(z,2);K(X,()=>di,(te,me)=>{me(te,{heading:"Fields",children:(we,Me)=>{var Ce=kn(),Ne=S(Ce),ct=b(Ne);Lt(ct,{get checked(){return i(a).checked},get indeterminate(){return i(a).indeterminate},onCheckedChange:h}),Oe(2),p(Ne);var Je=A(Ne,2);K(Je,()=>Rr,(Ie,ve)=>{ve(Ie,{})});var ut=A(Je,2);xe(ut,17,d,Re,(Ie,ve)=>{var ze=F(),Ue=S(ze);K(Ue,()=>ci,($e,je)=>{je($e,{class:"field-item",onselect:()=>g(i(ve).name),children:(rr,wa)=>{var ft=Tn(),xt=b(ft);{let We=P(()=>i(n)?.has(i(ve).name)??!1);Lt(xt,{class:"field-checkbox",get checked(){return i(We)},onCheckedChange:()=>g(i(ve).name)})}var ht=A(xt,2);ht.__click=[In,g,ve];var Tt=b(ht),vt=b(Tt),ir=b(vt,!0);p(vt);var nr=A(vt,2);{var ar=We=>{var Qe=xn(),or=b(Qe);Ye(or,()=>Gr),p(Qe),oe(()=>at(Qe,"title",i(ve).description)),v(We,Qe)};B(nr,We=>{i(ve).description&&We(ar)})}p(Tt),p(ht),p(ft),oe(()=>he(ir,i(ve).alias||i(ve).name)),v(rr,ft)},$$slots:{default:!0}})}),v(Ie,ze)}),v(we,Ce)},$$slots:{default:!0}})}),v(be,Be)},$$slots:{default:!0}})}),v($,ce)},$$slots:{default:!0}})}),v(ee,N)},$$slots:{default:!0}})}),v(w,V)},$$slots:{default:!0}})}),p(f),v(u,f)};B(l,u=>{i(r)&&u(m)})}v(s,y),Q()}lt(["click","keydown"]);var zn=L('<li class="download-item svelte-vgw5fc"><div class="download-info svelte-vgw5fc"><span class="download-url svelte-vgw5fc"> </span></div> <div class="download-actions svelte-vgw5fc"><div><!></div> <!> <!> <!></div></li>'),Fn=L('<ul class="selected-list svelte-vgw5fc"></ul> <p class="count svelte-vgw5fc"> </p>',1),Pn=L('<p class="no-selection svelte-vgw5fc">No downloads in queue</p>'),Vn=L('<div class="section svelte-vgw5fc"><h4 class="svelte-vgw5fc">Download Queue</h4> <!></div>');function On(s,e){J(e,!0);let t=H(ae(new Set));function r(l){const m=De.downloads.findIndex(u=>u.url===l);m!==-1&&De.downloads.splice(m,1)}async function n(l){try{await navigator.clipboard.writeText(l),_(t,new Set(i(t)).add(l),!0),He.success("URL copied to clipboard"),setTimeout(()=>{const m=new Set(i(t));m.delete(l),_(t,m,!0)},2e3)}catch(m){console.error("Failed to copy URL:",m),He.error("Failed to copy URL to clipboard")}}function a(l){switch(l){case"completed":return"#059669";case"in-progress":return"#2563eb";case"failed":return"#dc2626";case"pending":default:return"#6b7280"}}function o(l){switch(l){case"completed":return"Completed";case"in-progress":return"In Progress";case"failed":return"Failed";case"pending":default:return"Pending"}}function c(l){switch(l){case"completed":return qr;case"in-progress":return Wr;case"failed":return jr;case"pending":default:return $r}}var g=Vn(),h=A(b(g),2);{var d=l=>{var m=Fn(),u=S(m);xe(u,21,()=>De.downloads,Re,(T,x)=>{var w=zn(),I=b(w),V=b(I),k=b(V,!0);p(V),p(I);var j=A(I,2),R=b(j),G=b(R);{let E=P(()=>a(i(x).status));_e(G,{variant:"ghost",size:"sm",class:"download-status-btn",get style(){return`color: ${i(E)??""}`},disabled:!0,children:(Y,O)=>{const $=P(()=>c(i(x).status));var q=F(),ce=S(q);{let re=P(()=>i(x).status==="in-progress"?"spinning":"");K(ce,()=>i($),(ue,fe)=>{fe(ue,{size:14,get class(){return i(re)}})})}v(Y,q)},$$slots:{default:!0}})}p(R);var U=A(R,2);_e(U,{variant:"ghost",size:"sm",class:"download-clipboard-btn",onclick:()=>n(i(x).url),title:"Copy URL to clipboard",children:(E,Y)=>{var O=F(),$=S(O);{var q=re=>{Br(re,{size:14})},ce=re=>{Ur(re,{size:14})};B($,re=>{i(t).has(i(x).url)?re(q):re(ce,!1)})}v(E,O)},$$slots:{default:!0}});var ee=A(U,2);{var M=E=>{_e(E,{variant:"ghost",size:"sm",class:"download-action-btn",onclick:()=>window.open(i(x).url,"_blank"),title:"Open download",children:(Y,O)=>{Oe();var $=Ee("");v(Y,$)},$$slots:{default:!0}})};B(ee,E=>{i(x).status==="completed"&&E(M)})}var N=A(ee,2);_e(N,{variant:"ghost",size:"sm",class:"download-remove-btn",onclick:()=>r(i(x).url),title:"Remove from queue",children:(E,Y)=>{Oe();var O=Ee("");v(E,O)},$$slots:{default:!0}}),p(j),p(w),oe(E=>{at(V,"title",i(x).url),he(k,i(x).id),at(R,"title",E)},[()=>o(i(x).status)]),v(T,w)}),p(u);var f=A(u,2),C=b(f);p(f),oe(()=>he(C,`${De.downloads.length??""} download(s) in queue`)),v(l,m)},y=l=>{var m=Pn();v(l,m)};B(h,l=>{De.downloads.length>0?l(d):l(y,!1)})}p(g),v(s,g),Q()}var En=L('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><!> <span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function Ft(s,e){J(e,!0);const t=W(e,"isFolder",3,!1),r=W(e,"isOpen",3,!1),n=`calc(100% - ${e.depth*1}rem)`;var a=En();a.__click=function(...f){e.onclick?.apply(this,f)};var o=b(a),c=b(o),g=b(c);{var h=f=>{Gt(f,{get isOpen(){return r()}})};B(g,f=>{t()&&f(h)})}var d=A(g,2),y=b(d);Ye(y,()=>e.icon),p(d);var l=A(d,2),m=b(l,!0);p(l),p(c);var u=A(c,2);se(u,()=>e.children??ne),p(o),p(a),oe(f=>{Pe(a,1,f),Ve(a,`width: ${n};`),he(m,e.name)},[()=>Qr(Di({enhancedHover:!0,includeFont:!0}))]),v(s,a),Q()}lt(["click"]);var Dn=L('<div data-slot="checkbox-indicator" class="text-current transition-none"><!></div>');function Rn(s,e){J(e,!0);let t=W(e,"ref",15,null),r=W(e,"checked",11,!1),n=W(e,"indeterminate",11,!1),a=Te(e,["$$slots","$$events","$$legacy","ref","checked","indeterminate","class"]),o=H(ae(r())),c=H(ae(n()));de(()=>{_(o,r())}),de(()=>{_(c,n())});var g=F(),h=S(g);{const d=(l,m)=>{let u=()=>m?.().checked,f=()=>m?.().indeterminate;var C=Dn(),T=b(C);{var x=I=>{Ti(I,{class:"size-3.5"})},w=I=>{var V=F(),k=S(V);{var j=R=>{Zr(R,{class:"size-3.5"})};B(k,R=>{f()&&R(j)},!0)}v(I,V)};B(T,I=>{u()?I(x):I(w,!1)})}p(C),v(l,C)};let y=P(()=>Hr("peer flex size-4 shrink-0 items-center justify-center rounded-[4px] border border-input shadow-xs transition-shadow outline-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[state=checked]:border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:bg-input/30 dark:aria-invalid:ring-destructive/40 dark:data-[state=checked]:bg-primary",e.class));K(h,()=>Yr,(l,m)=>{m(l,Se({"data-slot":"checkbox",get class(){return i(y)}},()=>a,{get ref(){return t()},set ref(u){t(u)},get checked(){return i(o)},set checked(u){_(o,u,!0)},get indeterminate(){return i(c)},set indeterminate(u){_(c,u,!0)},children:d,$$slots:{default:!0}}))})}v(s,g),Q()}var Gn=L("<div><!></div>");function Pt(s,e){J(e,!0);let t=P(()=>e.getDownloadState?.(e.node)??ie.Inactive),r=P(()=>i(t)===ie.Active),n=P(()=>i(t)===ie.Indeterminate);function a(g){g.stopPropagation();const h=i(t)===ie.Active?ie.Inactive:ie.Active;e.onDownloadStateChanged?.(e.node,h)}var o=Gn(),c=b(o);Rn(c,{get checked(){return i(r)},get indeterminate(){return i(n)},onclick:a}),p(o),v(s,o),Q()}var Bn=L('<div class="flex items-center gap-2"><!> <!></div>'),Un=L('<div class="flex items-center gap-2"><!> <!></div>');function er(s,e){J(e,!0);const t=T=>{var x=F(),w=S(x);{var I=V=>{var k=F(),j=S(k);{var R=U=>{Ft(U,{get icon(){return i(y)},get name(){return e.node.name},get depth(){return a()},onclick:C,get isFolder(){return c},get isOpen(){return i(h)},children:M=>{var N=Bn(),E=b(N);{var Y=q=>{Pt(q,{get node(){return e.node},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState}})};B(E,q=>{e.isDownloadable&&q(Y)})}var O=A(E,2);{var $=q=>{Ht(q,{get checked(){return i(d)},onCheckedChange:u})};B(O,q=>{g&&q($)})}p(N),v(M,N)},$$slots:{default:!0}})},G=U=>{Ft(U,{get icon(){return i(y)},get name(){return e.node.name},get depth(){return a()},onclick:f,get isFolder(){return c},children:M=>{var N=Un(),E=b(N);{var Y=q=>{Pt(q,{get node(){return e.node},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState}})};B(E,q=>{e.isDownloadable&&q(Y)})}var O=A(E,2);{var $=q=>{Ht(q,{get checked(){return i(d)},onCheckedChange:u})};B(O,q=>{g&&q($)})}p(N),v(M,N)},$$slots:{default:!0}})};B(j,U=>{c?U(R):U(G,!1)})}v(V,k)};B(w,V=>{n()?.getItemConfig(e.node.id)?.isHidden||V(I)})}v(T,x)},r=(T,x=ne)=>{var w=F(),I=S(w);{var V=k=>{{let j=P(()=>n()?.getItemConfig(x().id)?.isDownloadable??!0),R=P(()=>a()+1);er(k,{get treeviewConfigStore(){return n()},get node(){return x()},get isDownloadable(){return i(j)},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState},get onFilterClicked(){return e.onFilterClicked},get hasFiltersApplied(){return e.hasFiltersApplied},get getNodeVisibility(){return e.getNodeVisibility},get depth(){return i(R)},get useLayerTypeIcon(){return o()}})}};B(I,k=>{c&&i(h)&&!n()?.getItemConfig(x().id)?.isHidden&&k(V)})}v(T,w)},n=W(e,"treeviewConfigStore",3,null),a=W(e,"depth",3,0),o=W(e,"useLayerTypeIcon",3,!1),c=!!(e.node.children&&e.node.children.length),g=!c;let h=H(!1),d=H(!1),y=H(""),l=H(!1),m=H(!1);de(()=>{if(!e.node)return;const T=e.getNodeVisibility?e.getNodeVisibility(e.node.id):!1;_(d,T??!1,!0),e.node instanceof le&&_(y,Kt(e.node.layer,o(),c,i(h)),!0)}),de(()=>{if(!(e.node instanceof le))return;const T=(e.getDownloadState?.(e.node)===ie.Active&&e.node.layer.type==="feature")??!1;T&&!i(l)?(_(l,!0),_(m,!1)):!T&&i(l)&&(_(m,!0),setTimeout(()=>{_(l,!1),_(m,!1)},180))});function u(){!g||!e.onNodeVisibilityChange||(_(d,!i(d)),e.onNodeVisibilityChange(e.node,i(d)))}function f(){e.onNodeClick?.(e.node)}function C(){_(h,!i(h)),e.onNodeClick?.(e.node)}{let T=P(()=>c?e.node.children:null);qt(s,{get isOpen(){return i(h)},get content(){return t},get childNodes(){return i(T)},get childNode(){return r}})}Q()}class $n{configStore;constructor(e){this.configStore=e}}function jn(s){return s.replace(/&deg;/gi,"").replace(/&nbsp;/gi," ").replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">")}class Wn extends $n{id="aliasPath";layerToNode(e,t){const r=new le(e.id,e.title,e,[],t),n=this.configStore.getItemConfig(e.id);if(this.#r(e)&&n?.showFields){const a=e;a.loaded||console.warn(`Layer not loaded: ${e.id}`);const o=new Map;for(const c of a.fields??[]){const g=this.configStore.getItemConfig(this.#t(e.id,c.name));!g||g.isHidden||this.#e(c,r,o)}r.children.sort((c,g)=>c.children.length>0&&g.children.length===0?1:c.children.length===0&&g.children.length>0?-1:0)}return r}#e(e,t,r=new Map){const n=this.#t(t.id,e.name),o=jn(e.alias||"")?.split("|").map(l=>l.trim()).filter(Boolean)??[];if(o.length===0){const l=new Ge(n,e.alias||e.name,t.layer,e,[],t);return t.children.push(l),l}const c=o.slice(0,-1),g=o[o.length-1];let h=t;const d=(l,m)=>{l.children??=[],l.children.includes(m)||l.children.push(m)};for(let l=0;l<c.length;l++){const m=c[l],u=o.slice(0,l+1).join("::"),f=`${t.id}::${u}`;let C=r.get(f);C||(C=new Wt(f,m,[],h),r.set(f,C),d(h,C)),h=C}const y=new Ge(n,g||e.name,t.layer,e,[],h);return d(h,y),y}#t(e,t){return`${e}-${t}`}#r(e){return e.type==="feature"}}function qn(s,e){J(e,!0);const t=W(e,"webMap",3,null),r=W(e,"fieldFilterMenuStore",7),n=new Qt;de(()=>{if(!t()||n.initialized)return;(async()=>{await t().when(),await a(t().layers.toArray()),console.log("[data-selection-tree-view] fields to hide:",e.fieldsToHide);const u=new Wn(e.treeviewConfigStore);n.initialize(t().layers.toArray(),e.treeviewConfigStore,[u]),console.log("[data-selection-tree-view] Initialized with layers:",n.getNodes())})()});async function a(m){for(const u of m)u.type==="feature"&&!u.loaded&&(await u.load(),console.log("Loaded feature layer:",u.title)),u.type==="group"&&await a(u.layers.toArray())}function o(m,u){ye.updateSelection(m,u)}function c(m){return ye.getSelectionState(m)}function g(m){if(r().ActiveLayer?.uid===m){r().ActiveLayer=null;return}const f=n.getNodeById(m);!f||!(f instanceof le)||(r().ActiveLayer=f.layer)}function h(m){const u=ye.DataSelections.get(m);if(!u?.fields)return!1;const f=n.getNodeById(m);if(!f||!(f instanceof le))return!1;const C=f.layer.fields?.length||0,T=u.fields.size;return T>0&&T!==C}var d=F(),y=S(d);{var l=m=>{var u=F(),f=S(u);K(f,()=>Bt,(C,T)=>{T(C,{children:(x,w)=>{var I=F(),V=S(I);xe(V,17,()=>n.getNodes(),k=>k.id,(k,j)=>{{let R=P(()=>e.treeviewConfigStore.getItemConfig(i(j).id)?.isDownloadable??!0);er(k,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return i(j)},get isDownloadable(){return i(R)},onNodeClick:()=>{},onNodeVisibilityChange:(G,U)=>n.setVisibilityState(G.id,U),getNodeVisibility:G=>n.getVisibilityState(G),onDownloadStateChanged:o,getDownloadState:c,onFilterClicked:g,hasFiltersApplied:h,depth:0,useLayerTypeIcon:!0})}}),v(x,I)},$$slots:{default:!0}})}),v(m,u)};B(y,m=>{n.initialized&&m(l)})}v(s,d),Q()}class Vt{#e=[];#t=new Map;#r=[];#n=new Map;#i=[];#o=new Map;#c=new Set;constructor(e){if(!e)throw new Error("TreeviewConfigStore requires a valid configuration object.");this.#e=e.items??[],this.#t=new Map(this.#e.map(t=>[t.id,t])),this.#r=e.visibilityGroups??[],this.#n=new Map(this.#r.map(t=>[t.id,t])),this.#i=e.inheritanceGroups??[],this.#o=new Map(this.#i.map(t=>[t.id,t])),e.fieldsToHide&&(this.#c=new Set(e.fieldsToHide.map(t=>t.trim().toLowerCase())))}getItemConfig(e){return this.#t.get(e)}getVisibilityGroupConfig(e){return this.#n.get(e)}getInheritanceGroupConfig(e){return this.#o.get(e)}resolveInheritance(e){if(!(e.length===0||!this.#e||this.#e.length===0))for(const t of e)this.#u(t)}#u(e,t){const r=this.#l(e,t);if(this.#g(e)&&r.showFields){const n=e;n.loaded||console.warn(`Layer not loaded: ${e.id}`);for(const a of n.fields??[])this.#f(this.#s(e.id,a.name),a.alias||a.name,r)}if(this.#v(e)){const n=e;for(const a of n.layers.toArray())this.#u(a,r)}}#l(e,t){const r=this.#h(e.id,t);return r.type===tt.None&&(r.type=Xr(e)),r}#f(e,t,r){const n=this.#h(e,r);return n.type===tt.None&&(n.type=tt.Field),this.#c.has(t.trim().toLowerCase())&&(n.isHidden=!0),n}#h(e,t){let r=this.getItemConfig(e);const n=r!==void 0,a=r?.inheritanceGroupId?this.getInheritanceGroupConfig(r.inheritanceGroupId):this.getInheritanceGroupConfig(t?.inheritanceGroupId??"");return r={id:e,type:tt.None,isDownloadable:this.#a(a,"isDownloadable",r,t,!0),isVisibleOnInit:this.#a(a,"isVisibleOnInit",r,t,!1),isHidden:this.#a(a,"isHidden",r,t,!1),showFields:this.#a(a,"showFields",r,t,!1),visibilityDependencyIds:this.#a(a,"visibilityDependencyIds",r,t,[]),visibilityGroupId:this.#a(a,"visibilityGroupId",r,t,void 0),inheritanceGroupId:this.#a(a,"inheritanceGroupId",r,t,void 0)},n===!1&&this.#m(r),r}#a(e,t,r,n,a){const o=r?.[t];return o!==void 0?o:e?.inheritedProperties.includes(t)&&n?n[t]??a:a}#m(e){if(this.#t.has(e.id))throw new Error(`Item with id ${e.id} already exists.`);this.#e.push(e),this.#t.set(e.id,e)}#s(e,t){return`${e}-${t}`}#v(e){return e.type==="group"}#g(e){return e.type==="feature"}}const Yn=[{value:"define-areas",label:"Define Areas"},{value:"select-data",label:"Select Data"},{value:"export",label:"Export"},{value:"downloads",label:"Download"}],D=Object.freeze({LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom"});var Zn=L("<!> <div><aside><div><div><!></div></div> <!></aside></div>",1);function tr(s,e){J(e,!0);const t=W(e,"position",19,()=>D.LEFT),r=W(e,"openIcon",3,xi),n=W(e,"overlay",3,!1),a=8,o=500,c="calc(var(--header-height, 64px) + 1rem)";let g,h=H(0),d=H(o),y=H(!1);const l=P(()=>t()===D.LEFT||t()===D.RIGHT),m=P(()=>t()===D.LEFT||t()===D.TOP),u=P(()=>i(l)?"500px":"100px"),f=P(()=>e.minSize??i(u)),C=P(()=>parseFloat(i(f))),T=P(()=>i(l)?"width":"height"),x=P(()=>i(l)?"ew-resize":"ns-resize");de(()=>{const z=parseFloat(i(f));i(d)<z&&_(d,z,!0)}),ot(()=>{if(!g)return;const z=new ResizeObserver(X=>{for(const te of X)_(h,i(l)?te.contentRect.width:te.contentRect.height,!0)});return z.observe(g),()=>z.disconnect()});function w(z){if(!e.isOpen)return;_(y,!0),z.preventDefault();const X=i(l)?z.clientX:z.clientY,te=i(d);function me(Me){const Ce=i(l)?Me.clientX:Me.clientY,Ne=i(m)?Ce-X:X-Ce;_(d,Math.max(i(C),te+Ne),!0)}function we(){_(y,!1),document.removeEventListener("mousemove",me),document.removeEventListener("mouseup",we),document.body.style.cursor="",document.body.style.userSelect=""}document.addEventListener("mousemove",me),document.addEventListener("mouseup",we),document.body.style.cursor=i(x),document.body.style.userSelect="none"}const I=P(()=>()=>{const z=e.isOpen?i(d):0;return n()?{[D.LEFT]:{top:"1rem",left:`${z}px`},[D.RIGHT]:{top:"1rem",right:`${z}px`},[D.TOP]:{top:`${z}px`,left:"1rem"},[D.BOTTOM]:{bottom:`${z}px`,left:"1rem"}}[t()]:{[D.LEFT]:{top:c,left:`${z}px`},[D.RIGHT]:{top:c,right:`${z}px`},[D.TOP]:{top:`${z}px`,left:"1rem"},[D.BOTTOM]:{bottom:`${z}px`,left:"1rem"}}[t()]}),V=P(()=>()=>({[D.LEFT]:"rounded-l-none rounded-r-md",[D.RIGHT]:"rounded-r-none rounded-l-md",[D.TOP]:"rounded-t-none rounded-b-md",[D.BOTTOM]:"rounded-b-none rounded-t-md"})[t()]),k=P(()=>()=>({[D.LEFT]:Ci,[D.RIGHT]:Kr,[D.TOP]:Ii,[D.BOTTOM]:Si})[t()]),j=P(()=>()=>({[D.LEFT]:`padding-right: ${a}px`,[D.RIGHT]:`padding-left: ${a}px`,[D.TOP]:`padding-bottom: ${a}px`,[D.BOTTOM]:`padding-top: ${a}px`})[t()]),R=P(()=>()=>{const z=`${a}px`,X=`${-a/2}px`;return{[D.LEFT]:`width: ${z}; right: ${X}`,[D.RIGHT]:`width: ${z}; left: ${X}`,[D.TOP]:`height: ${z}; bottom: ${X}`,[D.BOTTOM]:`height: ${z}; top: ${X}`}[t()]});function G(z){return Object.entries(z).map(([X,te])=>`${X}: ${te}`).join("; ")}const U=P(()=>i(m)?0:1),ee=P(()=>()=>e.isOpen?"translate(0, 0)":{[D.LEFT]:`translate(-${i(d)}px, 0)`,[D.RIGHT]:`translate(${i(d)}px, 0)`,[D.TOP]:`translate(0, -${i(d)}px)`,[D.BOTTOM]:`translate(0, ${i(d)}px)`}[t()]),M=P(()=>()=>{const z=e.isOpen?`${i(d)}px`:"0";if(n()){if(i(l)){const te={position:"absolute",top:"0",bottom:"0",width:z,height:"100%","z-index":"30"};return te[t()===D.LEFT?"left":"right"]="0",te}const X={position:"absolute",left:"0",right:"0",height:z,width:"100%","z-index":"30"};return X[t()===D.TOP?"top":"bottom"]="0",X}return{[i(T)]:z,order:`${i(U)}`}});var N=Zn(),E=S(N);{let z=P(()=>n()?"absolute":"fixed"),X=P(()=>i(V)()),te=P(()=>i(y)?"":"transition-all duration-300"),me=P(()=>G(i(I)())),we=P(()=>e.isOpen?"Close sidebar":"Open sidebar");_e(E,{get onclick(){return e.onToggle},variant:"default",size:"icon",get class(){return`${i(z)??""} z-[40] !bg-primary shadow-lg hover:scale-105 hover:!bg-primary/90 ${i(X)??""} ${i(te)??""}`},get style(){return`${i(me)??""}; pointer-events: auto;`},get"aria-label"(){return i(we)},get"aria-expanded"(){return e.isOpen},children:(Me,Ce)=>{var Ne=F(),ct=S(Ne);{var Je=Ie=>{const ve=P(()=>i(k)());var ze=F(),Ue=S(ze);K(Ue,()=>i(ve),($e,je)=>{je($e,{class:"h-6 w-6"})}),v(Ie,ze)},ut=Ie=>{const ve=P(r);var ze=F(),Ue=S(ze);K(Ue,()=>i(ve),($e,je)=>{je($e,{class:"h-6 w-6"})}),v(Ie,ze)};B(ct,Ie=>{e.isOpen?Ie(Je):Ie(ut,!1)})}v(Me,Ne)},$$slots:{default:!0}})}var Y=A(E,2);let O;var $=b(Y);let q;var ce=b($);let re;var ue=b(ce);let fe;var ge=b(ue);{var be=z=>{var X=F(),te=S(X);se(te,()=>e.children),v(z,X)};B(ge,z=>{e.children&&z(be)})}p(ue),p(ce);var pe=A(ce,2);{var Be=z=>{{let X=P(()=>i(l)?"top-0 h-full cursor-ew-resize":"left-0 w-full cursor-ns-resize"),te=P(()=>i(R)());_e(z,{get class(){return`absolute border-0 bg-transparent p-0 transition-colors hover:!bg-primary/50 ${i(X)??""}`},onmousedown:w,"aria-label":"Resize sidebar by dragging",get style(){return i(te)}})}};B(pe,z=>{e.isOpen&&z(Be)})}p($),Le($,z=>g=z,()=>g),p(Y),oe((z,X,te,me,we,Me,Ce)=>{O=Pe(Y,1,"relative",null,O,z),Ve(Y,X),q=Pe($,1,"relative flex bg-card text-card-foreground shadow-lg",null,q,te),Ve($,`${i(T)??""}: ${i(d)??""}px; transform: ${me??""};`),re=Pe(ce,1,"flex overflow-hidden",null,re,we),Ve(ce,Me),fe=Pe(ue,1,"flex overflow-hidden",null,fe,Ce)},[()=>({"overflow-hidden":!n(),"overflow-visible":n(),"h-full":i(l),"w-full":!i(l),"transition-all":!i(y),"duration-300":!i(y),"z-30":n()}),()=>G(i(M)()),()=>({"flex-col":i(l),"flex-row":!i(l),"h-full":i(l),"w-full":!i(l),"border-r":t()===D.LEFT,"border-l":t()===D.RIGHT,"border-b":t()===D.TOP,"border-t":t()===D.BOTTOM,"border-sidebar-border":!0,"transition-transform":!i(y),"duration-300":!i(y),"pointer-events-auto":n(),"z-30":n()}),()=>i(ee)(),()=>({"flex-col":i(l),"flex-row":!i(l),"h-full":i(l),"w-full":!i(l)}),()=>i(j)(),()=>({"flex-col":i(l),"flex-row":!i(l),"h-full":i(l),"w-full":!i(l)})]),v(s,N),Q()}var Xn=L('<div><!> <div class="main-content svelte-1drp0rm"><!></div></div>');function Kn(s,e){J(e,!0);const t=W(e,"position",19,()=>D.LEFT),r=P(()=>t()===D.TOP||t()===D.BOTTOM);var n=Xn();let a;var o=b(n);tr(o,{get isOpen(){return e.isOpen},get onToggle(){return e.onToggle},get position(){return t()},get minSize(){return e.minSize},get openIcon(){return e.openIcon},children:(d,y)=>{var l=F(),m=S(l);{var u=f=>{var C=F(),T=S(C);se(T,()=>e.sidebarContent),v(f,C)};B(m,f=>{e.sidebarContent&&f(u)})}v(d,l)},$$slots:{default:!0}});var c=A(o,2),g=b(c);{var h=d=>{var y=F(),l=S(y);se(l,()=>e.mainContent),v(d,y)};B(g,d=>{e.mainContent&&d(h)})}p(c),p(n),oe(d=>a=Pe(n,1,"sidebar-layout svelte-1drp0rm",null,a,d),[()=>({vertical:i(r)})]),v(s,n),Q()}var Jn=L("<div><!></div>");function Ot(s,e){J(e,!0);let t=W(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","variant","children"]);var n=Jn();st(n,()=>({...r,class:"group/chat-bubble flex max-w-[80%] flex-row place-items-end gap-2 data-[variant='sent']:place-self-end","data-variant":e.variant}));var a=b(n);se(a,()=>e.children??ne),p(n),Le(n,o=>t(o),()=>t()),v(s,n),Q()}var Qn=L('<span class="inline-block size-(--loading-dots-size) rounded-full bg-primary svelte-k2x6sv"></span>'),ea=L('<div class="inline-flex items-center gap-1 svelte-k2x6sv"></div>');function ta(s,e){let t=W(e,"size",3,4);var r=ea();let n;xe(r,20,()=>({length:3}),Re,(a,o)=>{var c=Qn();v(a,c)}),p(r),oe(a=>n=Ve(r,"",n,a),[()=>({"--loading-dots-size":`${t()??""}px`})]),v(s,r)}var ra=L('<div class="flex size-full place-items-center justify-center"><!></div>'),ia=L("<div><!></div>");function Et(s,e){J(e,!0);let t=W(e,"ref",15,null),r=W(e,"typing",3,!1),n=Te(e,["$$slots","$$events","$$legacy","ref","typing","class","children"]);var a=ia();st(a,h=>({...n,class:h}),[()=>dt("order-2 rounded-lg bg-secondary p-4 text-sm group-data-[variant='received']/chat-bubble:rounded-bl-none group-data-[variant='sent']/chat-bubble:order-1 group-data-[variant='sent']/chat-bubble:rounded-br-none group-data-[variant='sent']/chat-bubble:bg-primary group-data-[variant='sent']/chat-bubble:text-primary-foreground",e.class)]);var o=b(a);{var c=h=>{var d=ra(),y=b(d);ta(y,{}),p(d),v(h,d)},g=h=>{var d=F(),y=S(d);se(y,()=>e.children??ne),v(h,d)};B(o,h=>{r()?h(c):h(g,!1)})}p(a),Le(a,h=>t(h),()=>t()),v(s,a),Q()}function na(s,e){J(e,!0);let t=W(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class"]);var n=F(),a=S(n);{let o=P(()=>dt("relative flex size-8 shrink-0 overflow-hidden rounded-full",e.class));K(a,()=>bi,(c,g)=>{g(c,Se({"data-slot":"avatar",get class(){return i(o)}},()=>r,{get ref(){return t()},set ref(h){t(h)}}))})}v(s,n),Q()}function aa(s,e){J(e,!0);let t=W(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class"]);{let n=P(()=>dt("order-1 group-data-[variant='sent']/chat-bubble:order-2",e.class));na(s,Se({get class(){return i(n)}},()=>r,{get ref(){return t()},set ref(a){t(a)}}))}Q()}function oa(s){const e=s-1;return e*e*e+1}function Dt(s,{delay:e=0,duration:t=400,easing:r=oa,start:n=0,opacity:a=0}={}){const o=getComputedStyle(s),c=+o.opacity,g=o.transform==="none"?"":o.transform,h=1-n,d=c*(1-a);return{delay:e,duration:t,easing:r,css:(y,l)=>`
			transform: ${g} scale(${1-h*l});
			opacity: ${c-d*l}
		`}}class sa{#e=H();#t=H(0);#r=H(!1);lastScrollHeight=0;set ref(e){if(_(this.#e,e,!0),!i(this.#e))return;this.lastScrollHeight=i(this.#e).scrollHeight,i(this.#e).scrollTo(0,i(this.#t)?i(this.#t):i(this.#e).scrollHeight),i(this.#e).addEventListener("scroll",()=>{i(this.#e)&&(_(this.#t,i(this.#e).scrollTop,!0),this.disableAutoScroll())}),window.addEventListener("resize",()=>{this.scrollToBottom(!0)}),new MutationObserver(()=>{i(this.#e)&&(i(this.#e).scrollHeight!==this.lastScrollHeight&&this.scrollToBottom(!0),this.lastScrollHeight=i(this.#e).scrollHeight)}).observe(i(this.#e),{childList:!0,subtree:!0})}get ref(){return i(this.#e)}get scrollY(){return i(this.#t)}get isAtBottom(){return i(this.#e)?i(this.#t)+i(this.#e).offsetHeight>=i(this.#e).scrollHeight:!0}disableAutoScroll(){this.isAtBottom?_(this.#r,!1):_(this.#r,!0)}scrollToBottom(e=!1){i(this.#e)&&(e&&i(this.#r)||i(this.#e).scrollTo(0,i(this.#e).scrollHeight))}}var la=L("<div><!></div>"),da=L('<div class="relative"><div><!></div> <!></div>');function ca(s,e){J(e,!0);let t=W(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","children","class"]),n=H(!1);const a=new sa;ot(()=>{_(n,!0)});var o=da(),c=b(o);st(c,y=>({...r,class:y}),[()=>dt("no-scrollbar flex h-full w-full flex-col gap-4 overflow-y-auto p-4",e.class,{"scroll-smooth":i(n)})]);var g=b(c);se(g,()=>e.children??ne),p(c),Le(c,y=>t(y),()=>t()),Le(c,y=>a.ref=y,()=>a?.ref);var h=A(c,2);{var d=y=>{var l=la(),m=b(l);_e(m,{onclick:()=>a.scrollToBottom(),variant:"outline",size:"icon",class:"absolute bottom-2 left-1/2 inline-flex -translate-x-1/2 transform rounded-full shadow-md",children:(u,f)=>{ki(u,{})},$$slots:{default:!0}}),p(l),Nt(1,l,()=>Dt,()=>({start:.85,duration:100,delay:250})),Nt(2,l,()=>Dt,()=>({start:.85,duration:100})),v(y,l)};B(h,y=>{a.isAtBottom||y(d)})}p(o),v(s,o),Q()}var ua=L(`<p> </p> <div class="w-full text-xs group-data-[variant='sent']/chat-bubble:text-end"> </div>`,1),fa=L("<!> <!>",1),ha=L("<!> <!> <div></div>",1),va=L('<div class="flex h-full w-full flex-col border border-border"><div class="flex-1 overflow-hidden"><!></div> <form class="flex shrink-0 place-items-center gap-2 border-t border-border bg-background p-2"><!> <!></form></div>');function ga(s,e){J(e,!0);let t=H(""),r=H(void 0);const n=ae([{senderId:2,message:"How do I use the treeview?",sentAt:"10:00 AM"},{senderId:1,message:"The UPRN treeview enables you to select and download data...",sentAt:"10:01 AM"},{senderId:2,message:"Can you show me how?",sentAt:"10:02 AM"}]);async function a(){await br(),i(r)?.scrollIntoView({behavior:"smooth"})}function o(m){const u=m.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return m.getHours()>=12?u+" PM":u+" AM"}de(()=>{n.length,a()});var c=va(),g=b(c),h=b(g);Ut(h,{class:"h-full",children:(m,u)=>{var f=F(),C=S(f);K(C,()=>ca,(T,x)=>{x(T,{children:(w,I)=>{var V=ha(),k=S(V);xe(k,16,()=>n,G=>G,(G,U,ee,M)=>{var N=F(),E=S(N);{let Y=P(()=>U.senderId===2?"sent":"received");K(E,()=>Ot,(O,$)=>{$(O,{get variant(){return i(Y)},children:(q,ce)=>{var re=fa(),ue=S(re);K(ue,()=>aa,(ge,be)=>{be(ge,{})});var fe=A(ue,2);K(fe,()=>Et,(ge,be)=>{be(ge,{class:"flex flex-col gap-1",children:(pe,Be)=>{var z=ua(),X=S(z),te=b(X,!0);p(X);var me=A(X,2),we=b(me,!0);p(me),oe(()=>{he(te,U.message),he(we,U.sentAt)}),v(pe,z)},$$slots:{default:!0}})}),v(q,re)},$$slots:{default:!0}})})}v(G,N)});var j=A(k,2);K(j,()=>Ot,(G,U)=>{U(G,{variant:"received",children:(ee,M)=>{var N=F(),E=S(N);K(E,()=>Et,(Y,O)=>{O(Y,{typing:!0})}),v(ee,N)},$$slots:{default:!0}})});var R=A(j,2);Le(R,G=>_(r,G),()=>i(r)),v(w,V)},$$slots:{default:!0}})}),v(m,f)},$$slots:{default:!0}}),p(g);var d=A(g,2),y=b(d);fi(y,{class:"rounded-full",placeholder:"Type a message...",get value(){return i(t)},set value(m){_(t,m,!0)}});var l=A(y,2);{let m=P(()=>i(t)==="");_e(l,{type:"submit",variant:"default",size:"icon",class:"shrink-0 rounded-full",get disabled(){return i(m)},children:(u,f)=>{Ai(u,{})},$$slots:{default:!0}})}p(d),p(c),ei("submit",d,m=>{m.preventDefault(),n.push({message:i(t),senderId:2,sentAt:o(new Date)}),_(t,"")}),v(s,c),Q()}var ma=L("<!> <!> <!> <!>",1),ya=L('<div class="relative flex h-full w-full min-w-0 overflow-visible"><div class="flex h-full w-full min-w-0 flex-col overflow-hidden"><!></div> <!></div>'),pa=L("<!> <!> <!> <!> <!>",1);function Ea(s,e){J(e,!0);const t=ae(new Ki),r=ae(new sn),n=ae(new Qt);let a=H("define-areas"),o=H(void 0),c=H(void 0),g=H(!0),h=ae(D.LEFT),d=H(!0),y=ae(D.BOTTOM);function l(){_(g,!i(g))}function m(){_(d,!i(d))}ot(async()=>{const k=await ui();Z.setNameFields(k.serviceUprn2Config.selectionLayersNameFields||[]),_(o,new Vt(k.serviceUprn2Config.dataSelectionTreeviewConfig),!0),_(c,new Vt(k.serviceUprn2Config.areaSelectionTreeviewConfig),!0),await t.initializeAsync({portalUrl:k.serviceUprn2Config.portalUrl,itemId:k.serviceUprn2Config.portalItemId||"",proxy:k.serviceUprn2Config.proxy}),console.log("[page] WebMap loaded")});function u(k){_(a,k,!0)}function f(){_(a,"downloads")}var C=pa(),T=S(C);Jr(T,{});var x=A(T,2);_n(x,{});var w=A(x,2);Nn(w,{get fieldFilterMenuStore(){return r}});var I=A(w,2);ji(I,{});var V=A(I,2);Kn(V,{get isOpen(){return i(g)},onToggle:l,get position(){return h},sidebarContent:R=>{var G=ya(),U=b(G),ee=b(U);Yi(ee,{get value(){return i(a)},get triggers(){return Yn},onValueChange:u,children:(N,E)=>{var Y=ma(),O=S(Y);nt(O,{value:"define-areas",children:(re,ue)=>{var fe=F(),ge=S(fe);{var be=pe=>{$i(pe,{get webMap(){return t.data},get treeviewStore(){return n},get treeviewConfigStore(){return i(c)}})};B(ge,pe=>{t.isLoaded&&pe(be)})}v(re,fe)}});var $=A(O,2);nt($,{value:"select-data",children:(re,ue)=>{var fe=F(),ge=S(fe);{var be=pe=>{qn(pe,{get webMap(){return t.data},get treeviewConfigStore(){return i(o)},get fieldFilterMenuStore(){return r}})};B(ge,pe=>{t.isLoaded&&pe(be)})}v(re,fe)}});var q=A($,2);nt(q,{value:"export",footer:ue=>{pn(ue,{onExportSuccess:f})},children:(ue,fe)=>{gn(ue,{get webMapStore(){return t},get areaSelectionTreeviewStore(){return n},get fieldFilterMenuStore(){return r}})}});var ce=A(q,2);nt(ce,{value:"downloads",children:(re,ue)=>{On(re,{})}}),v(N,Y)},$$slots:{default:!0}}),p(U);var M=A(U,2);tr(M,{get isOpen(){return i(d)},onToggle:m,get position(){return y},overlay:!0,get openIcon(){return _i},children:E=>{ga(E,{})},$$slots:{default:!0}}),p(G),v(R,G)},mainContent:R=>{Fi(R,{get webMap(){return t.data},get areaSelectionTreeviewStore(){return n},panelPosition:"top-left",menuPosition:"top-right"})},$$slots:{sidebarContent:!0,mainContent:!0}}),v(s,C),Q()}export{Ea as component};
