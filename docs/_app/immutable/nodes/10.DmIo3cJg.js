const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DpAKiq6K.js","../chunks/BW0zoJTm.js","../chunks/CEBETtrS.js","../chunks/CaNW5Bx0.js","../chunks/PPVm8Dsz.js","../chunks/BUsxo-Ec.js","../chunks/D0nkGZIM.js","../chunks/BEZFO2vt.js","../chunks/CjBjO1Km.js","../chunks/CVQPxYbx.js","../chunks/DwerzRSF.js","../chunks/y1GB1Svy.js","../chunks/AlyPEkJM.js","../chunks/DFYTeVXP.js","../chunks/Cn9cIaVC.js","../chunks/BTNr9f9k.js","../chunks/EmFT8XhJ.js","../chunks/jYVHtrPb.js","../chunks/Cp_8tW2x.js","../chunks/BAWfW4Tu.js","../chunks/CumW50Sh.js","../chunks/Ci6C1k20.js","../chunks/bnayRBMH.js","../chunks/TJ-VhDZ5.js","../chunks/B0gOzRRh.js","../chunks/TW8D_o5j.js","../chunks/Oe6SV2kF.js","../chunks/B_yBz6pZ.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/CW6Redn4.js","../chunks/BnQsZfR4.js","../chunks/BYduSOTS.js","../chunks/PJHcqbvL.js","../chunks/DS2ZxNQA.js","../chunks/Djp3mnm5.js","../chunks/DjNaDsmS.js","../chunks/C-w03I0l.js","../chunks/D9kT-sgB.js","../chunks/Bu0s_rAF.js","../chunks/B87vTgcy.js","../chunks/C3_gy5al.js","../chunks/CfBiQUdY.js","../chunks/BABeDC_w.js","../chunks/XEmGDYB_.js","../chunks/BVFIxAn9.js","../chunks/CAO_3SU9.js","../chunks/0N6-HNAU.js","../chunks/CglP3OMz.js","../chunks/DCBLidga.js","../chunks/B934cuUn.js","../chunks/C1gSvD9v.js","../chunks/PWd9QCpP.js","../chunks/BwN_j92a.js","../chunks/Bde99gqs.js","../chunks/C7fxqwFZ.js","../chunks/CVwTD0fV.js","../chunks/9eAP65Ji.js","../chunks/mOc398RU.js","../chunks/DPJXGPFY.js","../chunks/B8cN3yAo.js","../chunks/BIj_QgNJ.js","../chunks/q_b6UJoq.js","../chunks/CYI1luaL.js","../chunks/DTEZVyiP.js","../chunks/BCTmL8G8.js","../chunks/DhMSIuCj.js","../chunks/CSXZNpHb.js","../chunks/xXH_AyYh.js","../chunks/CTnd5cvu.js","../chunks/CHAiFIco.js","../chunks/Dj-cqQsY.js","../chunks/B128_oTY.js","../chunks/6Jo1niE7.js","../chunks/DjNuiUVf.js","../chunks/CpqG7TFG.js","../chunks/D_dxbuU-.js","../chunks/jQbrml54.js","../chunks/uHWM1awI.js","../chunks/CYEJx0Wq.js","../chunks/BteoTDFn.js","../chunks/B7Ex7sMf.js","../chunks/DocBEfKB.js","../chunks/B2jVc7id.js","../chunks/Da4sQo3R.js","../chunks/CAGdFHZB.js","../chunks/DzvuCIKa.js","../chunks/Bu0Dv00G.js","../chunks/Bo5l4fk8.js","../chunks/48RKFPo7.js","../chunks/TEMnSu_8.js","../chunks/Ch4klalT.js","../chunks/CQmZIYPi.js","../chunks/DsEHuRPb.js","../chunks/BARRAGjD.js","../chunks/DwIB5gq4.js","../chunks/BjGHVp5Q.js","../chunks/lEIzcqu9.js","../chunks/CtIxBnU3.js","../chunks/gJDQstGQ.js","../chunks/Cl8hT7Dy.js","../chunks/hngUoOdp.js","../chunks/BlT3hoGo.js","../chunks/DZpEp5b3.js","../chunks/GKolV7NZ.js","../chunks/PiqJyY-Z.js","../chunks/CWQ4Sji6.js","../chunks/Cc8znHts.js","../chunks/C9Yzh9th.js","../chunks/CMFr2xVw.js","../chunks/B8kDL1f4.js","../chunks/Bo-exx2O.js","../chunks/BFHafdW6.js","../chunks/D5cGnOsZ.js","../chunks/CCtOv0E5.js","../chunks/DhzudQro.js","../chunks/Qzt__3Yd.js","../chunks/mx71iuXv.js","../chunks/E5yhiq2t.js","../chunks/B2om5830.js","../chunks/CrUuvTSr.js","../chunks/DNQVkPqp.js","../chunks/WCLBMBm-.js","../chunks/BveQ3Yw2.js","../chunks/EGFv0f86.js","../chunks/BDRaqLVR.js","../chunks/BlaSF0Se.js","../chunks/mBdPBegd.js","../chunks/Cu3emot3.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/DS8kW6UP.js","../chunks/1BM1gK8E.js","../chunks/DPb6J-GU.js","../chunks/BxTLSXBH.js","../chunks/BGyY2giR.js","../chunks/D28RTRrm.js","../chunks/C65Zrur8.js","../chunks/DwnB9djr.js","../chunks/CUTkbj50.js","../chunks/DE7psHTV.js","../chunks/Fla_WrMr.js","../chunks/CVRs03iK.js","../chunks/g8mGjH5g.js","../chunks/D1UBzOg5.js","../chunks/DvKU1K2H.js","../chunks/C8HgMPMV.js","../chunks/BqUxlKJa.js","../chunks/CzWdKr8p.js","../chunks/C2FvnhIN.js","../chunks/B0DG5wVw.js","../chunks/CaYZrGFV.js","../chunks/BRIeeldl.js","../chunks/B-myf1ZS.js","../chunks/B45SJMf_.js","../assets/jsxFactory.CQED0rIl.css","../chunks/2dBEZGc-.js","../assets/component-utils.R4SXog4D.css","../chunks/BqXNu7b5.js","../chunks/Ba6e521d.js","../chunks/DER5P13g.js","../chunks/Byx8h0ay.js","../chunks/BQBvadb7.js","../chunks/D-YQ4CHs.js","../chunks/BpMm_bKu.js","../chunks/DN8pD2EM.js","../chunks/GCVPM2bX.js","../chunks/3vzEJNVc.js","../chunks/C1a7zHTx.js","../chunks/BWEUlARE.js","../chunks/Cba5hWeF.js","../chunks/06ySslQQ.js","../chunks/DlHjpvET.js","../chunks/Dp15eoVC.js","../chunks/DtjklSP3.js","../chunks/Bl9gULnU.js","../chunks/upW12MZ5.js","../chunks/DGnEEsyW.js","../chunks/-tLY_6gf.js","../chunks/DhDrCS8X.js","../chunks/s7y6ZYeW.js","../chunks/COsUduS5.js","../chunks/fxczVhmx.js","../chunks/tfsDxZdG.js","../chunks/D6zlzagn.js","../chunks/Caulfaw_.js","../chunks/DCTsuy_4.js","../chunks/CnyFIUVt.js","../chunks/DKzVzLpH.js","../chunks/BEQnBRaB.js","../chunks/BvOub3JO.js","../chunks/e98d0pcw.js","../chunks/CUjVhFqY.js","../chunks/CXu_ESHL.js","../chunks/DRPDV87L.js","../chunks/DUN1HABK.js","../chunks/Pg2iTJw5.js","../chunks/8WtPGj6h.js","../chunks/CG7ZQ6BV.js","../chunks/BeVzuV2m.js","../chunks/Cef1xHaC.js","../chunks/BvER9tXK.js","../chunks/B9Dt7Ynm.js","../chunks/COg86Xge.js","../chunks/DWpwVUOd.js","../chunks/DeOh5xmU.js","../chunks/B3KWAeZ2.js","../chunks/C34EDYhX.js","../chunks/Bxxl7NsE.js","../chunks/CaVKkSa6.js","../chunks/CUzevAry.js","../chunks/C8zGwbjb.js","../chunks/DOU46fny.js","../chunks/CxntQxa8.js","../chunks/B21jgz5M.js","../chunks/CHMqct6U.js","../chunks/DJfmhI_b.js","../chunks/CqSK9vE_.js","../chunks/teoI27Zt.js","../chunks/BgIfDPrD.js","../chunks/Bl0cSKE5.js","../chunks/HTOW8iPe.js","../chunks/BzyQLkBI.js","../chunks/DuIgqnlY.js","../chunks/CbvgmFLt.js","../chunks/DaQyK3nQ.js","../chunks/CZyMpCUL.js","../chunks/7808le4B.js","../chunks/DqwAHjQA.js","../chunks/CFxQi9ff.js","../chunks/CRNKQexD.js","../chunks/DfDynnwy.js","../chunks/Cgb6qxNH.js","../chunks/_r5V6nso.js","../chunks/TQki0tx9.js","../chunks/Bb7XCc95.js","../chunks/BrT4CCe6.js","../chunks/B1N-tmtC.js","../chunks/CEtlHNOR.js","../chunks/BZKeGk9D.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/BpZHOvkG.js","../chunks/DQOO6RKE.js","../chunks/Bi6C4OG6.js"])))=>i.map(i=>d[i]);
import{_ as Ie}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as ot,a as st}from"../chunks/B12Xl85d.js";import{f as x,p as Re,c as h,n as Pt,r as g,a as Ee,a7 as ne,T as te,v as e,a8 as Q,W as Be,aG as S,av as Ye,u as He,ar as r,aX as Qt,aY as Yt,aK as Xt}from"../chunks/l2HDBFeU.js";import{e as Jt,g as _t}from"../chunks/7Q11sfri.js";import{c as D,a as o,f as w,t as ze}from"../chunks/D3mgKXxP.js";import{l as Zt,s as Xe,p as ce,r as xt,i as W}from"../chunks/amrQSy0T.js";import{c as H}from"../chunks/BULd4hFL.js";import{a as er,e as At,b as it,s as Je,f as ht}from"../chunks/B2XAts-z.js";import{b as at}from"../chunks/CPWKExeQ.js";import{s as se}from"../chunks/CPxvWa6q.js";import{s as $t,e as Qe,i as tr}from"../chunks/Dv6QOWAw.js";import{I as rr,s as ar,e as nr,f as or,S as wt,g as lt,h as ct,i as ut}from"../chunks/xE6fRQiE.js";import{c as dt}from"../chunks/DzE4wJgV.js";import{X as ir,A as sr,a as lr,b as cr}from"../chunks/De6S0tni.js";import"../chunks/69_IOA4Y.js";import{C as ur}from"../chunks/Cgb8ZoOw.js";import{S as nt,a as dr}from"../chunks/DqC0T5S3.js";import{B as fr}from"../chunks/Cycc-Qfx.js";import{I as mr}from"../chunks/D9YRtp1B.js";import{H as pr}from"../chunks/BUsxo-Ec.js";import{c as Ot,S as vr}from"../chunks/Kx36ldNz.js";import{a as gr,b as bt}from"../chunks/BnpBF7an.js";import"../chunks/B17Q6ahh.js";import{S as hr}from"../chunks/p_qY5EvW.js";import"../chunks/DhMSIuCj.js";import"../chunks/CaNW5Bx0.js";import"../chunks/BW0zoJTm.js";import"../chunks/CEBETtrS.js";function _r(O){return(gr||bt)+O}function wr(O,t){const i=Zt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const _=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]];rr(O,Xe({name:"command"},()=>i,{get iconNode(){return _},children:(p,P)=>{var n=D(),V=x(n);ar(V,t,"default",{}),o(p,n)},$$slots:{default:!0}}))}var yr=w("<span><!></span>");function xr(O,t){Re(t,!0);let i=ce(t,"ref",15,null),_=xt(t,["$$slots","$$events","$$legacy","ref","class","children"]);var p=yr();er(p,n=>({"data-slot":"command-shortcut",class:n,..._}),[()=>dt("text-muted-foreground ml-auto text-xs tracking-widest",t.class)]);var P=h(p);$t(P,()=>t.children??Pt),g(p),at(p,n=>i(n),()=>i()),o(O,p),Ee()}function br(O,t){Re(t,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let i=xt(t,["$$slots","$$events","$$legacy"]);const _=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];mr(O,Xe({name:"arrow-left"},()=>i,{get iconNode(){return _},children:(p,P)=>{var n=D(),V=x(n);$t(V,()=>t.children??Pt),o(p,n)},$$slots:{default:!0}})),Ee()}function Cr(O,t){O.stopPropagation(),t()?.()}var Ir=w('<button type="button" class="pointer-events-none flex h-4 w-0 items-center justify-center rounded text-muted-foreground opacity-0 transition-[width,margin-left,opacity] group-hover:pointer-events-auto group-hover:ml-1 group-hover:w-4 group-hover:opacity-100"><!></button>'),Sr=w('<div><span class="truncate"> </span> <!></div>');function Rt(O,t){Re(t,!0);let i=ce(t,"onClose",3,null);const _=t.title??t.value;var p=Sr(),P=h(p),n=h(P,!0);g(P);var V=ne(P,2);{var A=R=>{var E=Ir();E.__click=[Cr,i];var b=h(E);ir(b,{class:"size-3"}),g(E),te(()=>Je(E,"aria-label",`Clear ${t.value}`)),o(R,E)};W(V,R=>{i()&&R(A)})}g(p),te(R=>{it(p,1,R),Je(p,"title",_),se(n,t.value)},[()=>At(dt("group inline-flex max-w-[10rem] items-center overflow-hidden rounded border border-border px-1 py-0.5 text-xs font-medium text-muted-foreground transition-all",t.class))]),o(O,p),Ee()}Jt(["click"]);var Pr=w('<!> <span aria-hidden="true" class="h-5 w-px bg-border"></span>',1),Ar=w('<div class="flex h-9 items-center gap-2 border-b pl-2" data-slot="command-input-wrapper"><span class="flex h-full min-w-[1.25rem] shrink-0 items-center justify-center text-muted-foreground"><!></span> <!> <!></div>');function $r(O,t){Re(t,!0);let i=ce(t,"ref",15,null),_=ce(t,"value",15,""),p=ce(t,"iconProps",19,()=>({})),P=ce(t,"onCommandClose",3,null),n=xt(t,["$$slots","$$events","$$legacy","ref","class","value","icon","iconProps","commandId","onCommandClose"]);var V=Ar(),A=h(V),R=h(A);{var E=$=>{const X=Q(()=>t.icon);var J=D(),v=x(J);H(v,()=>e(X),(d,C)=>{C(d,Xe(p))}),o($,J)},b=$=>{wr($,{class:"size-4 opacity-50"})};W(R,$=>{t.icon?$(E):$(b,!1)})}g(A);var B=ne(A,2);{var z=$=>{var X=Pr(),J=x(X);Rt(J,{get value(){return t.commandId},get title(){return t.commandId},get onClose(){return P()}}),Be(2),o($,X)};W(B,$=>{t.commandId&&$(z)})}var U=ne(B,2);{let $=Q(()=>dt("flex h-10 flex-1 rounded-md bg-transparent py-3 text-sm outline-hidden placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t.class));H(U,()=>nr,(X,J)=>{J(X,Xe({"data-slot":"command-input",get class(){return e($)}},()=>n,{get ref(){return i()},set ref(v){i(v)},get value(){return _()},set value(v){_(v)}}))})}g(V),o(O,V),Ee()}function Or(O,t){Re(t,!0);const i=ce(t,"disabled",3,!1);fr(O,{class:"m-0 flex size-7 shrink-0 items-center justify-center rounded-md border-none bg-transparent p-0 text-muted-foreground opacity-50 shadow-none transition hover:bg-transparent hover:text-accent-foreground focus:outline-none focus-visible:border-transparent focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none active:ring-0 active:outline-none disabled:pointer-events-none disabled:opacity-50 has-[>svg]:px-0",onclick:()=>{i()||t.onPress?.()},"aria-label":"Return to command search",get disabled(){return i()},children:(_,p)=>{{let P=Q(()=>`size-4 ${t.class}`.trim());br(_,{get class(){return e(P)}})}},$$slots:{default:!0}}),Ee()}var Rr=w('<div class="flex flex-wrap gap-2 px-2 py-0.5"></div>'),Er=w('<span class="text-xs text-muted-foreground"> </span>'),Mr=w('<div class="flex flex-col gap-0.5"><span class="text-sm leading-tight font-medium"> </span> <!></div> <!>',1),Vr=w("<!> <!>",1),Lr=w('<div class="px-4 pb-3"><!></div>'),kr=w("<!> <!>",1),Tr=w('<div class="px-4 pb-3"><!></div>'),Dr=w('<p class="text-sm text-muted-foreground">No panel registered for this command.</p>'),Nr=w('<div class="pr-2 pb-2 pl-2"><!></div>'),Fr=w("<!> <!> <!>",1),Wr=w("<!> <!>",1),Br=w("<!> <!>",1),zr=w("<div><!></div>");function Ur(O,t){Re(t,!0);let i=ce(t,"ref",15,null),_=ce(t,"commands",19,()=>[]),p=ce(t,"placeholder",3,"Search commands..."),P=ce(t,"emptyMessage",3,"No commands found."),n=S(null),V=S(null),A=S(null),R=S(null),E=S(null),b=S(null),B=S(Ye([])),z=S(""),U=S(!1),$=S(Ye(p())),X=S(null),J=!1,v=S(null),d=!1,C=null,f=null,y=0,I=null;const L=Q(()=>{const a=new Map;for(const u of _())a.set(u.id,u);return Array.from(a.values())}),oe=Q(()=>{const a=new Map;for(const u of e(L)){const s=u.group??null,m=a.get(s);m?m.push(u):a.set(s,[u])}return a});ot(()=>{Fe()});function j(a,u=!1){u&&(J=!0),r(z,a,!0)}function Z(a=null,u){if(!I||a&&I!==a)return;r(X,null),I.placeholderOverridden&&r($,p()),(u?.forceReset??(u?.skipReset?!1:I.resetValueOnDetach))&&(j("",!0),I.onInput("")),I.onDetach?.(),I=null}function we(){Z(null,{forceReset:!0}),r(X,null),r($,p()),J=!1}He(()=>{const a=e(X);if(a){if(J){J=!1;return}a(e(z))}}),He(()=>{e(n)||r($,p())});function c(){if(f)try{f()}catch(a){console.error("Failed to dispose command session",a)}f=null,r(A,null),r(R,null),we(),r(V,null)}function l(){e(n)&&(c(),r(n,null),r(b,null),r(E,null),j("",!0),r(U,!0))}function k(a){try{t.commandSearchContext.get(a.classType).clear()}catch(u){console.error("Failed to clear global variable",u)}finally{Fe()}}function N(){e(v)?.blur()}function re(a,u){if(!a.component)return null;const s=a.props;return s?{component:a.component,props:()=>s(u)}:{component:a.component}}function M(a,u){const s=a.createSession?.(u);if(s){f=s.dispose??null,Object.prototype.hasOwnProperty.call(s,"input")?r(A,s.input??null,!0):r(A,null),Object.prototype.hasOwnProperty.call(s,"content")?r(R,s.content??null,!0):r(R,re(a,u),!0);return}f=null,r(A,null),r(R,re(a,u),!0)}function ee(a){const u=a.id;return{deactivate:()=>{!e(n)||e(n).id!==u||(l(),Fe())},isActive:s=>!e(n)||e(n).id!==u?!1:s?e(n).id===s:!0,setIsOpen:(s,m)=>{if(!e(n)||e(n).id!==u)return;if(s){d=!1,r(U,!0);return}const G=m?.preserveActive??!0;Me(G)},setInputSurface:s=>{!e(n)||e(n).id!==u||r(A,s,!0)},setContentSurface:s=>{!e(n)||e(n).id!==u||r(R,s,!0)},getInputValue:()=>e(z),setInputValue:s=>{!e(n)||e(n).id!==u||j(s,!0)},setInputHandler:s=>{if(!(!e(n)||e(n).id!==u)){if(Z(null,{skipReset:!0}),r(X,s,!0),!s){J=!1;return}s(e(z))}},setPlaceholder:s=>{!e(n)||e(n).id!==u||r($,s,!0)},resetPlaceholder:()=>{!e(n)||e(n).id!==u||r($,p())},attachInputBinding:s=>{if(!e(n)||e(n).id!==u)return()=>{};Z(null,{skipReset:!0});const m=s.placeholder??e(n).inputPlaceholder??p(),G={id:++y,commandId:u,onInput:s.onInput,onDetach:s.onDetach,placeholderOverridden:!!m,resetValueOnDetach:s.resetValueOnDetach??!0};I=G,G.placeholderOverridden&&m&&r($,m,!0),r(X,Le=>{!I||I.id!==G.id||s.onInput(Le)});const q=s.resetValueOnAttach??!0,ge=s.replayInitialValue??!q;return q?(j("",!0),s.onInput("")):ge&&s.onInput(e(z)),()=>{Z(G)}}}}function K(a){const u=e(V);if(!a)return u?{runtime:u}:{};if(!u)return{};const{props:s}=a;return s?{...typeof s=="function"?s(u):s,runtime:u}:{runtime:u}}function ve(a){return`${a.name} ${a.description??""}`.trim()}async function Y(a){if(e(n)?.id===a.id){l();return}c(),r(b,null),r(E,a.id,!0),r(U,!0),e(v)&&e(v).focus();const u=ee(a);r(V,u,!0),r(n,a,!0),M(a,u);try{await a.execute(u)}catch(s){r(b,s instanceof Error?s:new Error("Failed to execute the command."),!0)}finally{r(E,null),j("",!0),Fe()}}function Ne(a){const u=a.key.toLowerCase();if((a.metaKey||a.ctrlKey)&&u==="p"){if(a.preventDefault(),e(n)){l();return}e(v)&&e(v).focus();return}if(u==="escape"){if(e(n)){a.preventDefault(),l(),N();return}e(U)&&(a.preventDefault(),r(U,!1),N());return}if(!e(n))for(const m of e(L)){if(!m.shortcut)continue;const G=m.shortcut.join(" ").toLowerCase(),q=[];if(a.metaKey&&q.push("âŒ˜"),a.ctrlKey&&q.push("Ctrl"),a.altKey&&q.push("Alt"),a.shiftKey&&q.push("Shift"),q.push(a.key.length===1?a.key.toUpperCase():a.key),q.join(" ").toLowerCase()===G.toLowerCase()){a.preventDefault(),Y(m);break}}}function Ze(){r(U,!0)}function Me(a=!1){d=a,r(U,!1)}function et(a){const u=C;if(!u)return;const s=a.target;s&&u.contains(s)||e(U)&&Me(!!e(n))}He(()=>{if(!e(U)){if(j("",!0),!e(n)){d=!1;return}if(d){d=!1;return}c(),r(n,null),r(b,null)}});function Fe(){if(!t.commandSearchContext){r(B,[],!0);return}const a=t.commandSearchContext.getGlobalVariables(),u=[];for(const s of a){const m=s.getId();m&&u.push({displayName:s.displayName,id:m,classType:s.constructor})}r(B,u,!0)}var Ve=zr();_t("keydown",Qt,Ne),_t("pointerdown",Yt,et);var ye=h(Ve);H(ye,()=>or,(a,u)=>{u(a,{children:(s,m)=>{var G=Br(),q=x(G);{let ke=Q(()=>e(n)?e(n).inputPlaceholder??e($):e($)),Se=Q(()=>e(n)?Or:void 0),Pe=Q(()=>e(n)?{onPress:l,disabled:e(E)===e(n).id}:void 0),We=Q(()=>e(n)?.id),tt=Q(()=>e(n)?l:null);$r(q,{get placeholder(){return e(ke)},onfocus:()=>Ze(),get icon(){return e(Se)},get iconProps(){return e(Pe)},get commandId(){return e(We)},get onCommandClose(){return e(tt)},get value(){return e(z)},set value(Ue){r(z,Ue,!0)},get ref(){return e(v)},set ref(Ue){r(v,Ue,!0)}})}var ge=ne(q,2);{var Le=ke=>{var Se=Wr(),Pe=x(Se);{var We=le=>{var ue=Rr();Qe(ue,21,()=>e(B),he=>he.id,(he,de)=>{{let xe=Q(()=>`${e(de).displayName}: ${e(de).id}`),Ae=Q(()=>`${e(de).displayName}: ${e(de).id}`);Rt(he,{get value(){return e(xe)},get title(){return e(Ae)},onClose:()=>k(e(de))})}}),g(ue),o(le,ue)};W(Pe,le=>{e(B).length&&le(We)})}var tt=ne(Pe,2);{var Ue=le=>{wt(le,{children:(ue,he)=>{var de=D(),xe=x(de);H(xe,()=>lt,(Ae,rt)=>{rt(Ae,{children:(pe,Te)=>{var fe=Vr(),$e=x(fe);H($e,()=>ct,(be,T)=>{T(be,{children:(F,ae)=>{Be();var _e=ze();te(()=>se(_e,P())),o(F,_e)},$$slots:{default:!0}})});var De=ne($e,2);Qe(De,17,()=>Array.from(e(oe).entries()),tr,(be,T)=>{var F=Q(()=>Xt(e(T),2));let ae=()=>e(F)[1];var _e=D(),Ce=x(_e);Qe(Ce,17,ae,me=>me.id,(me,ie)=>{var Ge=D(),je=x(Ge);{let Vt=Q(()=>ve(e(ie)));H(je,()=>ut,(Lt,kt)=>{kt(Lt,{get value(){return e(Vt)},onclick:()=>Y(e(ie)),children:(Tt,pa)=>{var Ct=Mr(),mt=x(Ct),pt=h(mt),Dt=h(pt,!0);g(pt);var Nt=ne(pt,2);{var Ft=Oe=>{var qe=Er(),vt=h(qe,!0);g(qe),te(()=>se(vt,e(ie).description)),o(Oe,qe)};W(Nt,Oe=>{e(ie).description&&Oe(Ft)})}g(mt);var Wt=ne(mt,2);{var Bt=Oe=>{nt(Oe,{class:"ml-auto size-4 text-muted-foreground"})},zt=Oe=>{var qe=D(),vt=x(qe);{var Ut=gt=>{var It=D(),jt=x(It);H(jt,()=>xr,(Kt,Gt)=>{Gt(Kt,{children:(qt,va)=>{Be();var St=ze();te(Ht=>se(St,Ht),[()=>e(ie).shortcut?.join(" + ")]),o(qt,St)},$$slots:{default:!0}})}),o(gt,It)};W(vt,gt=>{e(ie).shortcut?.length&&gt(Ut)},!0)}o(Oe,qe)};W(Wt,Oe=>{e(E)===e(ie).id?Oe(Bt):Oe(zt,!1)})}te(()=>se(Dt,e(ie).name)),o(Tt,Ct)},$$slots:{default:!0}})})}o(me,Ge)}),o(be,_e)}),o(pe,fe)},$$slots:{default:!0}})}),o(ue,de)},$$slots:{default:!0}})},ft=le=>{var ue=Fr(),he=x(ue);{var de=pe=>{const Te=Q(()=>e(A).component);var fe=Lr(),$e=h(fe);{let De=Q(()=>K(e(A)));H($e,()=>e(Te),(be,T)=>{T(be,Xe(()=>e(De)))})}g(fe),o(pe,fe)};W(he,pe=>{e(A)&&pe(de)})}var xe=ne(he,2);{var Ae=pe=>{var Te=Tr(),fe=h(Te);H(fe,()=>sr,($e,De)=>{De($e,{variant:"destructive",children:(be,T)=>{var F=kr(),ae=x(F);H(ae,()=>lr,(Ce,me)=>{me(Ce,{children:(ie,Ge)=>{Be();var je=ze();te(()=>se(je,`${e(n).name??""} failed`)),o(ie,je)},$$slots:{default:!0}})});var _e=ne(ae,2);H(_e,()=>cr,(Ce,me)=>{me(Ce,{children:(ie,Ge)=>{Be();var je=ze();te(()=>se(je,e(b).message)),o(ie,je)},$$slots:{default:!0}})}),o(be,F)},$$slots:{default:!0}})}),g(Te),o(pe,Te)};W(xe,pe=>{e(b)&&pe(Ae)})}var rt=ne(xe,2);wt(rt,{children:(pe,Te)=>{var fe=Nr(),$e=h(fe);{var De=T=>{const F=Q(()=>e(R).component);var ae=D(),_e=x(ae);{let Ce=Q(()=>K(e(R)));H(_e,()=>e(F),(me,ie)=>{ie(me,Xe(()=>e(Ce)))})}o(T,ae)},be=T=>{var F=D(),ae=x(F);H(ae,()=>ur,(_e,Ce)=>{Ce(_e,{class:"px-0",children:(me,ie)=>{var Ge=Dr();o(me,Ge)},$$slots:{default:!0}})}),o(T,F)};W($e,T=>{e(R)?T(De):T(be,!1)})}g(fe),o(pe,fe)},$$slots:{default:!0}}),o(le,ue)};W(tt,le=>{e(n)?le(ft,!1):le(Ue)})}o(ke,Se)};W(ge,ke=>{e(U)&&ke(Le)})}o(s,G)},$$slots:{default:!0}})}),g(Ve),at(Ve,a=>C=a,()=>C),at(Ve,a=>i(a),()=>i()),te(a=>it(Ve,1,a),[()=>At(dt("space-y-4",t.class))]),o(O,Ve),Ee()}class yt{#e=[];constructor(t){this.#e=t}get organisations(){return this.#e}}class Et{#e=S(null);#t=S(!1);#r=S(null);load=async(t,i)=>{r(this.#t,!0),r(this.#r,null);try{const _=await pr(t,{...i,responseType:"json"});console.log("Esri Request Response:",_,_.data.url),r(this.#e,_.data,!0)}catch(_){r(this.#r,_,!0)}finally{r(this.#t,!1)}};get data(){return e(this.#e)}get isLoading(){return e(this.#t)}get error(){return e(this.#r)}}class Mt{colour=null;id=null;getId(){return this.id}setId(t){this.id=t}clear(){this.setId(null)}}class Ke extends Mt{displayName="org";organisations;constructor(t){super(),this.organisations=new Map(t.map(i=>[i.id,i])),t.length>0&&this.setId(t[0].id)}setActiveOrganisation(t){this.setId(t)}getActiveOrganisationId(){return this.id}getActiveOrganisationPortalUrl(){const t=this.organisations.get(this.getActiveOrganisationIdInternal());if(!t)throw new Error("No organisation is currently selected.");return t.portalUrl}getActiveOrganisationEndpoint(){const t=this.organisations.get(this.getActiveOrganisationIdInternal());if(!t)throw new Error("No organisation is currently selected.");return t.endpoint}getActiveOrganisationQueryParams(){const t=this.organisations.get(this.getActiveOrganisationIdInternal());if(!t)throw new Error("No organisation is currently selected.");return t.queryParams||{}}getActiveOrganisationIdInternal(){if(!this.id)throw new Error("No organisation is currently selected.");return this.id}}var jr=w('<div class="error-message svelte-11six79"><p class="text-sm text-red-600"> </p></div>'),Kr=w('<div class="flex items-center justify-center p-4"><!></div>'),Gr=w('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-11six79"> </span></div>'),qr=w('<span class="description-text text-xs text-gray-500 svelte-11six79"> </span>'),Hr=w('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-11six79"> </span> <!></div>'),Qr=w('<div class="item-container svelte-11six79"><!></div>');function Yr(O,t){Re(t,!0);const i=ce(t,"mapView",7),_=ce(t,"runtime",3,null),p=new Et;let P=S(null),n=S(null),V=S(""),A=S(Ye([]));const R=Q(()=>{const v=e(A);console.log("Filtering web maps with data:",v);const d=e(V).trim().toLowerCase();return d?v.filter(C=>{const f=C?.title?.toLowerCase()??"",y=C?.description?.toLowerCase()??"";return f.includes(d)||y.includes(d)}):v});ot(async()=>{const d=t.commandSearchContext.get(Ke).getActiveOrganisationId();if(!d){console.warn("No active organisation selected in OrganisationCommandService");return}try{const C=await fetch(`${bt}/api/maps?id=${d}`);if(!C.ok)throw new Error(`Failed to fetch maps: ${C.status} ${C.statusText}`);const f=await C.json();r(A,(f.results??[]).filter(y=>y.type.toLowerCase()==="web map").map(y=>({id:y.id,title:y.title,description:Ot(y.description),owner:y.owner,tags:y.tags})),!0)}catch(C){console.error("Error fetching web maps:",C),r(n,C instanceof Error?C.message:"Failed to fetch web maps",!0)}});let E=null,b=null,B=t.inputPlaceholder??"Search...";He(()=>{const v=_(),d=t.inputPlaceholder??"Search...";if(!v){E?.(),E=null,b=null,B=d,r(V,"");return}if(v===b){d!==B&&(v.setPlaceholder(d),B=d);return}E?.(),E=null,B=d,E=v.attachInputBinding({placeholder:d,onInput:C=>{r(V,C,!0)}}),b=v}),st(()=>{E?.(),E=null,b=null});async function z(v){if(!i()){console.error("MapView is not initialized"),r(n,"MapView is not ready. Please wait and try again.");return}r(P,v,!0),r(n,null);try{console.log(`Loading web map with ID: ${v}`);const d=t.commandSearchContext.get(Ke);if(!d.getActiveOrganisationId()){console.warn("No active organisation selected in OrganisationCommandService");return}const f=d.getActiveOrganisationPortalUrl(),{default:y}=await Ie(async()=>{const{default:j}=await import("../chunks/DpAKiq6K.js").then(Z=>Z.W);return{default:j}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151]),import.meta.url),I=new y({portalItem:{id:v,portal:{url:f}}});await I.load(),console.log("Web map loaded successfully"),console.log("Applying web map to MapView",i().ui),i().map=I,console.log("Web map applied to MapView"),await(await Ie(()=>import("../chunks/DwerzRSF.js").then(j=>j.m),__vite__mapDeps([10,1,2,3,11,4,5,6]),import.meta.url)).whenOnce(()=>i().ready),console.log("MapView updated with new web map");const oe=I.initialViewProperties?.viewpoint?.targetGeometry;oe&&(console.log("Navigating to web map initial viewpoint"),await i().goTo(oe),console.log("MapView navigated to web map initial viewpoint")),_()?.setIsOpen(!1)}catch(d){console.error("Error loading web map:",d),r(n,d instanceof Error?d.message:"Failed to load web map",!0)}finally{r(P,null)}}var U=Qr(),$=h(U);{var X=v=>{var d=jr(),C=h(d),f=h(C);g(C),g(d),te(()=>se(f,`${p.error.message??""}. ${p.error?.details?.httpStatus===0?"Reason: CORS Error. See console for more information.":""}`)),o(v,d)},J=v=>{var d=D(),C=x(d);{var f=I=>{var L=Kr(),oe=h(L);nt(oe,{class:"size-5"}),g(L),o(I,L)},y=I=>{var L=D(),oe=x(L);H(oe,()=>lt,(j,Z)=>{Z(j,{children:(we,c)=>{var l=D(),k=x(l);{var N=M=>{var ee=D(),K=x(ee);H(K,()=>ct,(ve,Y)=>{Y(ve,{children:(Ne,Ze)=>{Be();var Me=ze("No web maps match your search.");o(Ne,Me)},$$slots:{default:!0}})}),o(M,ee)},re=M=>{var ee=D(),K=x(ee);Qe(K,17,()=>e(R),ve=>ve.id,(ve,Y)=>{var Ne=D(),Ze=x(Ne);H(Ze,()=>ut,(Me,et)=>{et(Me,{onclick:()=>z(e(Y).id),children:(Fe,Ve)=>{var ye=D(),a=x(ye);{var u=m=>{var G=Gr(),q=h(G);nt(q,{class:"size-4"});var ge=ne(q,2),Le=h(ge);g(ge),g(G),te(()=>se(Le,`Loading ${e(Y).title??"Untitled web map"??""}...`)),o(m,G)},s=m=>{var G=Hr(),q=h(G),ge=h(q,!0);g(q);var Le=ne(q,2);{var ke=Se=>{var Pe=qr(),We=h(Pe,!0);g(Pe),te(()=>{Je(Pe,"title",e(Y).description),se(We,e(Y).description)}),o(Se,Pe)};W(Le,Se=>{e(Y).description&&Se(ke)})}g(G),te(()=>{Je(q,"title",e(Y).title),se(ge,e(Y).title??"Untitled web map")}),o(m,G)};W(a,m=>{e(P)===e(Y).id?m(u):m(s,!1)})}o(Fe,ye)},$$slots:{default:!0}})}),o(ve,Ne)}),o(M,ee)};W(k,M=>{e(R).length===0?M(N):M(re,!1)})}o(we,l)},$$slots:{default:!0}})}),o(I,L)};W(C,I=>{p.isLoading?I(f):I(y,!1)},!0)}o(v,d)};W($,v=>{p.error?v(X):v(J,!1)})}g(U),o(O,U),Ee()}var Xr=w('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-1w2u78y"> </span></div>'),Jr=w('<div class="item-container svelte-1w2u78y"><!></div>');function Zr(O,t){Re(t,!0);const i=ce(t,"runtime",3,null);let _=S(Ye([])),p=S("");ot(async()=>{const b=t.commandSearchContext.get(yt)?.organisations;if(!b){console.warn("No organisation configuration found in MapsConfig");return}r(_,b,!0)});let P=null,n=null,V=t.inputPlaceholder??"Search...";He(()=>{const b=i(),B=t.inputPlaceholder??"Search...";if(!b){P?.(),P=null,n=null,V=B,r(p,"");return}if(b===n){B!==V&&(b.setPlaceholder(B),V=B);return}P?.(),P=null,V=B,P=b.attachInputBinding({placeholder:B,onInput:z=>{r(p,z,!0)}}),n=b}),st(()=>{P?.(),P=null,n=null});function A(b){t.commandSearchContext.get(Ke).setActiveOrganisation(b),i()&&i().deactivate()}var R=Jr(),E=h(R);H(E,()=>lt,(b,B)=>{B(b,{children:(z,U)=>{var $=D(),X=x($);{var J=d=>{var C=D(),f=x(C);H(f,()=>ct,(y,I)=>{I(y,{children:(L,oe)=>{Be();var j=ze("No organisations match your search.");o(L,j)},$$slots:{default:!0}})}),o(d,C)},v=d=>{var C=D(),f=x(C);Qe(f,17,()=>e(_),y=>y.name,(y,I)=>{var L=D(),oe=x(L);H(oe,()=>ut,(j,Z)=>{Z(j,{onclick:()=>A(e(I).id),children:(we,c)=>{var l=Xr(),k=h(l),N=h(k,!0);g(k),g(l),te(()=>se(N,e(I).name??"Untitled organisation")),o(we,l)},$$slots:{default:!0}})}),o(y,L)}),o(d,C)};W(X,d=>{e(_).length===0?d(J):d(v,!1)})}o(z,$)},$$slots:{default:!0}})}),g(R),o(O,R),Ee()}class ea{services=new Map;globalVariables=new Map;add(t,i){this.services.set(t,i),i instanceof Mt&&this.globalVariables.set(t,i)}get(t){const i=this.services.get(t);if(!i)throw new Error(`Service not found for token: ${t.name}`);return i}has(t){return this.services.has(t)}getGlobalVariables(){return Array.from(this.globalVariables.values())}}globalThis.process?.versions?.webcontainer;Ie(()=>import("../chunks/BIHI7g3E.js"),[],import.meta.url).then(O=>new O.AsyncLocalStorage).catch(()=>{});var ta=w('<div class="error-message svelte-1lap2l5"><p class="text-sm text-red-600"> </p></div>'),ra=w('<div class="flex items-center justify-center p-4"><!></div>'),aa=w('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-1lap2l5"> </span></div>'),na=w('<div class="flex items-center gap-2"><!></div>'),oa=w('<span class="description-text text-xs text-gray-500 svelte-1lap2l5"> </span>'),ia=w('<span class="text-[11px] text-muted-foreground"> </span>'),sa=w('<span class="text-[11px] text-muted-foreground"> <!></span>'),la=w('<!> <div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-1lap2l5"> </span> <!> <!> <!></div>',1),ca=w('<div class="item-container svelte-1lap2l5"><!></div>');function ua(O,t){Re(t,!0);const i=ce(t,"mapView",7),_=ce(t,"runtime",3,null),p=new Et;let P=S(null),n=S(null),V=S(""),A=S(Ye(new hr)),R=S(Ye([]));const E=new Map,b={27700:"OS_Open_Background"},B=Q(()=>{const c=e(R),l=e(V).trim().toLowerCase();return l?c.filter(k=>{const N=k?.title?.toLowerCase()??"",re=k?.description?.toLowerCase()??"";return N.includes(l)||re.includes(l)}):c});ot(async()=>{const c=t.commandSearchContext.get(Ke),l=c.getActiveOrganisationId();if(!l){console.warn("No active organisation selected in OrganisationCommandService");return}c.getActiveOrganisationPortalUrl(),c.getActiveOrganisationEndpoint();const k=["Feature Layer","Feature Service","Map Service","Image Service"],N=await fetch(`${bt}/api/maps?id=${l}`);if(!N.ok)throw new Error(`Failed to fetch maps: ${N.status} ${N.statusText}`);const re=await N.json();r(R,(re.results??[]).filter(M=>k.includes(M.type)).map(M=>({id:M.id,title:M.title,description:Ot(M.description),owner:M.owner,tags:M.tags})),!0),E.clear();for(const M of e(R))E.set(M.id,M)});let z=null,U=null,$=t.inputPlaceholder??"Search...";He(()=>{const c=_(),l=t.inputPlaceholder??"Search...";if(!c){z?.(),z=null,U=null,$=l,r(V,"");return}if(c===U){l!==$&&(c.setPlaceholder(l),$=l);return}z?.(),z=null,$=l,z=c.attachInputBinding({placeholder:l,onInput:k=>{r(V,k,!0)}}),U=c}),st(()=>{z?.(),z=null,U=null});async function X(c){e(A).has(c)?J(c):await d(c)}function J(c){const l=e(A).get(c);!l||!i()||!i().map||(i().map.remove(l),e(A).delete(c),r(A,e(A),!0),console.log(`Layer removed from the map: ${c}`))}function v(c){for(const l of i()?.map?.allLayers??[])if(l.portalItem?.id===c)return!0;return!1}async function d(c){if(!i()||!i().map){console.error("Map or MapView is not initialized"),r(n,"Map is not ready. Please wait and try again.");return}r(P,c,!0),r(n,null);try{console.log(`Loading layer with portal item ID: ${c}`);const l=t.commandSearchContext.get(Ke);if(!l.getActiveOrganisationId()){console.warn("No active organisation selected in OrganisationCommandService");return}const N=l.getActiveOrganisationPortalUrl(),[{default:re},{default:M}]=await Promise.all([Ie(()=>import("../chunks/BTNr9f9k.js").then(Y=>Y.u),__vite__mapDeps([15,1,2,3,5,4,6,9,10,11,12]),import.meta.url),Ie(()=>import("../chunks/y1GB1Svy.js").then(Y=>Y.P),__vite__mapDeps([11,4,1,2,3,5,6]),import.meta.url)]),ee=new M({url:N}),K=await re.fromPortalItem({portalItem:{id:c,portal:ee}});await K.load();const ve=await C(K,c);await L(ve),i().map.add(K),e(A).set(c,K),r(A,e(A),!0),console.log("Layer added to the map");try{await i().whenLayerView(K),K.fullExtent&&await i().goTo(K.fullExtent)}catch(Y){console.warn("Layer view not ready for navigation",Y)}}catch(l){console.error("Error loading layer:",l),r(n,l instanceof Error?l.message:"Failed to add layer",!0)}finally{r(P,null)}}async function C(c,l){const k=f(c);if(k)return k;const N=E.get(l);if(N?.spatialReferenceWkid){const{default:M}=await Ie(async()=>{const{default:ee}=await import("../chunks/BUsxo-Ec.js").then(K=>K.bc);return{default:ee}},__vite__mapDeps([5,1,2,3,4,6]),import.meta.url);return new M({wkid:N.spatialReferenceWkid})}const re=c.portalItem?.spatialReference;return re||null}function f(c){return c?.spatialReference??null}function y(c){if(!c)return;const l=c;return c.wkid??l?.latestWkid??void 0}async function I(c){if(!i()||!i().map)return console.warn("MapView or Map is not available for basemap loading"),null;if(!c)return i().map.basemap;const l=b[c];if(!l)return i().map.basemap;const{default:k}=await Ie(async()=>{const{default:N}=await import("../chunks/CjBjO1Km.js").then(re=>re.B);return{default:N}},__vite__mapDeps([8,4,1,2,3,5,6,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url);try{return await k.fromId(l)}catch(N){return console.warn(`Failed to load basemap ${l}`,N),i().map.basemap}}async function L(c){if(!i()||!i().map||!c){console.log("MapView or target spatial reference is not available","mapView:",i(),"target:",c);return}const l=y(c),k=y(i().spatialReference??void 0);if(console.log(`Ensuring map view spatial reference compatibility: target WKID=${l}, current WKID=${k}`),!l||l===k)return;const[{default:N}]=await Promise.all([Ie(()=>import("../chunks/BEZFO2vt.js").then(ve=>ve.M),__vite__mapDeps([7,1,2,3,8,4,5,6,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37]),import.meta.url)]),re=await I(l),M=i().map.layers.toArray(),ee=i().map.ground;i().map.removeAll();const K=new N({basemap:re??void 0,ground:ee});K.spatialReference=c,K.layers.addMany(M),i().map=K,await i().when()}var oe=ca(),j=h(oe);{var Z=c=>{var l=ta(),k=h(l),N=h(k);g(k),g(l),te(()=>se(N,`${p.error.message??""}. ${p.error?.details?.httpStatus===0?"Reason: CORS Error. See console for more information.":""}`)),o(c,l)},we=c=>{var l=D(),k=x(l);{var N=M=>{var ee=ra(),K=h(ee);nt(K,{class:"size-5"}),g(ee),o(M,ee)},re=M=>{var ee=D(),K=x(ee);H(K,()=>lt,(ve,Y)=>{Y(ve,{children:(Ne,Ze)=>{var Me=D(),et=x(Me);{var Fe=ye=>{var a=D(),u=x(a);H(u,()=>ct,(s,m)=>{m(s,{children:(G,q)=>{Be();var ge=ze("No layers match your search.");o(G,ge)},$$slots:{default:!0}})}),o(ye,a)},Ve=ye=>{var a=D(),u=x(a);Qe(u,17,()=>e(B),s=>s.id,(s,m)=>{var G=D(),q=x(G);{let ge=Q(()=>e(A).has(e(m).id)?"layer-selected":"");H(q,()=>ut,(Le,ke)=>{ke(Le,{onclick:()=>X(e(m).id),get class(){return e(ge)},children:(Se,Pe)=>{var We=D(),tt=x(We);{var Ue=le=>{var ue=aa(),he=h(ue);nt(he,{class:"size-4"});var de=ne(he,2),xe=h(de);g(de),g(ue),te(()=>se(xe,`Loading ${e(m).title??"Untitled layer"??""}...`)),o(le,ue)},ft=le=>{var ue=la(),he=x(ue);{var de=T=>{var F=na(),ae=h(F);dr(ae,{}),g(F),o(T,F)};W(he,T=>{v(e(m).id)&&T(de)})}var xe=ne(he,2),Ae=h(xe),rt=h(Ae,!0);g(Ae);var pe=ne(Ae,2);{var Te=T=>{var F=oa(),ae=h(F,!0);g(F),te(()=>{Je(F,"title",e(m).description),se(ae,e(m).description)}),o(T,F)};W(pe,T=>{e(m).description&&T(Te)})}var fe=ne(pe,2);{var $e=T=>{var F=ia(),ae=h(F,!0);g(F),te(()=>se(ae,e(m).type??"")),o(T,F)};W(fe,T=>{e(m).type&&T($e)})}var De=ne(fe,2);{var be=T=>{var F=sa(),ae=h(F),_e=ne(ae);{var Ce=me=>{var ie=ze();ie.nodeValue=" (auto aligns view)",o(me,ie)};W(_e,me=>{b[e(m).spatialReferenceWkid]&&me(Ce)})}g(F),te(()=>se(ae,`WKID ${e(m).spatialReferenceWkid??""} `)),o(T,F)};W(De,T=>{e(m).spatialReferenceWkid&&T(be)})}g(xe),te(()=>{Je(Ae,"title",e(m).title),se(rt,e(m).title??"Untitled layer")}),o(le,ue)};W(tt,le=>{e(P)===e(m).id?le(Ue):le(ft,!1)})}o(Se,We)},$$slots:{default:!0}})})}o(s,G)}),o(ye,a)};W(et,ye=>{e(B).length===0?ye(Fe):ye(Ve,!1)})}o(Ne,Me)},$$slots:{default:!0}})}),o(M,ee)};W(k,M=>{p.isLoading?M(N):M(re,!1)},!0)}o(c,l)};W(j,c=>{p.error?c(Z):c(we,!1)})}g(oe),o(O,oe),Ee()}var da=w("<arcgis-layer-list></arcgis-layer-list>",2),fa=w('<div id="search-slot" class="absolute top-3 left-1/2 z-10 -translate-x-1/2"><!></div>'),ma=w("<arcgis-map><!></arcgis-map>",2);function Ka(O,t){Re(t,!0);const i=new ea;let _=S(null),p=S(null),P=S(null),n=S(null),V=S(null),A=S(null),R=S(null),E=S(null),b=S(!1);ot(async()=>{const f=await B(),y=new Ke(f.organisations);i.add(yt,f),i.add(Ke,y),await U(),r(V,$(),!0),r(A,X(),!0),r(R,J(),!0),r(E,v(),!0)});async function B(){const f=await fetch(_r("/config/maps/config.json"));if(!f.ok)throw new Error(`Failed to load maps config: ${f.status} ${f.statusText}`);const y=await f.json();return new yt(y.organisations)}async function z(){e(P)&&(r(_,e(P).view,!0),e(n)&&(e(n).view=e(_),e(n).listItemCreatedFunction=f=>{const{item:y}=f;y.layer.type!="group"&&(y.panel={content:"legend",open:!0})}))}async function U(){await Ie(()=>import("../chunks/BRIeeldl.js").then(f=>f.a),__vite__mapDeps([152,153,154,145,1,2,3,10,11,4,5,6,155,156,12,157,9,158,159,17,26,15,160,161,162,54,25,55,24,20,21,22,163,164]),import.meta.url),await Ie(()=>import("../chunks/DN8pD2EM.js"),__vite__mapDeps([165,166,154,145,1,2,3,10,11,4,5,6,155,167,168,169,170,171,172,173,174,175,156,176,177,153,12,157,17,161,178,59,9,15,55,179,20,21,22,33,79,80,35,36,180,129,130,121,122,57,24,58,13,25,60,61,62,63,64,65,181,132,133,182,102,103,104,183,184,185,186,84,187,83,188,189,190,118,119,120,97,98,99,100,53,54,41,32,42,56,94,101,107,123,43,124,125,47,126,127,128,131,96,105,106,108,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,164]),import.meta.url),await Ie(()=>import("../chunks/BgIfDPrD.js"),__vite__mapDeps([219,166,154,145,1,2,3,10,11,4,5,6,155,167,168,220,171,173,221,176,156,175,222,223,224,225,183,153,12,157,226,38,39,25,40,22,41,32,33,42,20,21,43,9,23,71,72,17,227,53,54,55,24,56,57,58,59,13,60,61,62,63,64,65,34,228,229,159,26,230,15,231,7,8,14,16,18,19,27,28,29,30,31,35,36,37,91,47,158,89,69,52,232,182,233,234,50,51,209,235,236,237,238,239,240,241,208,242,243,214,244,218,163,0,44,45,46,48,49,66,67,68,70,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,90,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,146,147,148,149,150,151]),import.meta.url)}st(()=>{r(V,null),r(A,null),r(R,null),r(E,null)});function $(){const f={id:"add-web-map",name:"Add web map",description:"Fetch and display web maps.",group:"Maps",shortcut:["Ctrl","M"],inputPlaceholder:"Search web maps...",execute:async y=>{},component:Yr,props:y=>({commandSearchContext:i,mapView:e(_),inputPlaceholder:f.inputPlaceholder})};return f}function X(){const f={id:"add-layer",name:"Add layers",description:"Fetch and display layers.",group:"Maps",shortcut:["Ctrl","L"],execute:async y=>{},component:ua,props:y=>({commandSearchContext:i,mapView:e(_),inputPlaceholder:f.inputPlaceholder})};return f}function J(){return{id:"add-organisation",name:"Add organisation",description:"Find and add an organisation to filter items by.",group:"Maps",shortcut:["Ctrl","O"],inputPlaceholder:"Search organisations...",component:Zr,execute:async f=>{},props:f=>({commandSearchContext:i,inputPlaceholder:"Search organisations..."})}}function v(){return{id:"clear-map",name:"Clear map",description:"Clear all layers and reset the map view.",shortcut:["Ctrl","C"],execute:async f=>{e(_)&&e(_).map&&(e(_).map.layers.removeAll(),e(_).map.basemap="gray"),f.deactivate()}}}var d=D(),C=x(d);{const f=I=>{wt(I,{class:"h-full",children:(L,oe)=>{var j=da();it(j,1,"mx-2 min-h-20"),at(j,Z=>r(n,Z),()=>e(n)),o(L,j)},$$slots:{default:!0}})},y=I=>{var L=ma();it(L,1,"relative h-full w-full"),ht(L,"basemap","gray"),ht(L,"center","-2.231774828836059,53.46531847221502"),ht(L,"zoom","15");var oe=h(L);{var j=Z=>{var we=fa(),c=h(we);{let l=Q(()=>[e(R),e(V),e(A),e(E)]);Ur(c,{class:"w-full max-w-md",get commandSearchContext(){return i},get commands(){return e(l)},get ref(){return e(p)},set ref(k){r(p,k,!0)}})}g(we),o(Z,we)};W(oe,Z=>{e(V)&&e(A)&&e(R)&&e(E)&&Z(j)})}g(L),at(L,Z=>r(P,Z),()=>e(P)),_t("arcgisViewReadyChange",L,z),o(I,L)};H(C,()=>vr,(I,L)=>{L(I,{get isOpen(){return e(b)},onToggle:()=>r(b,!e(b)),sidebarContent:f,mainContent:y,$$slots:{sidebarContent:!0,mainContent:!0}})})}o(O,d),Ee()}export{Ka as component};
