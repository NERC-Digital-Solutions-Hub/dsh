const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DVzVZBBg.js","../chunks/DvUDi2Se.js","../chunks/CnfuZz2S.js","../chunks/BYatcg2i.js","../chunks/DSvukMJ1.js","../chunks/PPVm8Dsz.js","../chunks/DedWa6hQ.js","../chunks/CbAk7Q2g.js","../chunks/Dtl6Huvk.js","../chunks/JZrX1DQH.js","../chunks/InWWYu7p.js","../chunks/BtRNH9HO.js","../chunks/C3DztaFN.js","../chunks/Fd-zc6xv.js","../chunks/CLdLWz9D.js","../chunks/Bx7Drccn.js","../chunks/Bstk8l7f.js","../chunks/Bs5I5-7o.js","../chunks/BJ6KxFoX.js","../chunks/Dg2Cy1wG.js","../chunks/Cfk1RgA5.js","../chunks/CJqWAG8q.js","../chunks/BNRAtZeH.js","../chunks/DTbuUgvd.js","../chunks/eb6qfy6k.js","../chunks/CdZ5E7Js.js","../chunks/D6wORzA5.js","../chunks/D6KPPgz5.js","../chunks/Hpj2QL01.js","../chunks/DHdURl-u.js","../chunks/B8bQhW-6.js","../chunks/Cl5lrJ4c.js","../chunks/CSgXBDAV.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/XEWFwhUy.js","../chunks/Bcw4sJLc.js","../chunks/BDErjlP0.js","../chunks/elf00Mmu.js","../chunks/BTzO5B6K.js","../chunks/Djp3mnm5.js","../chunks/BkkzFYiK.js","../chunks/DQOJ18NT.js","../chunks/BfvMWYA7.js","../chunks/C2A-cDAk.js","../chunks/pZ2g7Ohf.js","../chunks/DPRDD1To.js","../chunks/DZNpV-Fi.js","../chunks/EzLf78vY.js","../chunks/Ct-FuPNe.js","../chunks/BmZQD3Tc.js","../chunks/Dp3s0ZcO.js","../chunks/B7VbszFd.js","../chunks/CWwez7Ew.js","../chunks/CL2NbQte.js","../chunks/C-gotZDZ.js","../chunks/BYWLb-qP.js","../chunks/Dtr09YEc.js","../chunks/5_frVxKl.js","../chunks/kro8eSGX.js","../chunks/Cj7IhThc.js","../chunks/CsmaOzwV.js","../chunks/WcbF0m06.js","../chunks/D2fJSBL9.js","../chunks/BTFaZ95N.js","../chunks/Db_cRbTq.js","../chunks/9YvG7tFv.js","../chunks/DwIAbcbk.js","../chunks/Bunn428X.js","../chunks/aQeO9QTD.js","../chunks/BVStbsji.js","../chunks/muspHcCn.js","../chunks/BSsBqB8a.js","../chunks/BfUcY0IH.js","../chunks/CVqfDkJl.js","../chunks/C5CzMsLd.js","../chunks/C9lK54Hu.js","../chunks/D26fh4vX.js","../chunks/Cigsg82C.js","../chunks/BwvlIeVB.js","../chunks/Cu2J4Q4w.js","../chunks/DI4_79_v.js","../chunks/ZfJYk1lX.js","../chunks/Cv9IkvcT.js","../chunks/CzgEe7_M.js","../chunks/Co6MM1WB.js","../chunks/L9sxntLJ.js","../chunks/Dz9nnGQp.js","../chunks/BZVu3XrO.js","../chunks/nDOBqX6c.js","../chunks/DPeJS9ie.js","../chunks/GKolV7NZ.js","../chunks/CLfdaVZL.js","../chunks/BvI0vjxO.js","../chunks/BoVlFCoi.js","../chunks/Byb_ddQ1.js","../chunks/DayGv1xo.js","../chunks/DFa2M8Ih.js","../chunks/CB8DDl4O.js","../chunks/Cvu3dz6j.js","../chunks/CjV58eza.js","../chunks/VMSlSy0z.js","../chunks/B9TnOdWG.js","../chunks/B-KfLzZb.js","../chunks/D7MNnqkP.js","../chunks/OVZo4xRf.js","../chunks/DWtdFFwQ.js","../chunks/X9GVov2f.js","../chunks/CEn1iOYu.js","../chunks/BpCBUT2X.js","../chunks/DZpgY3Wp.js","../chunks/BXcKK5tC.js","../chunks/qWbuC5Wj.js","../chunks/B0YVZ3UN.js","../chunks/CTVS09Kb.js","../chunks/ThCcySDx.js","../chunks/BkCRFj7C.js","../chunks/K4FY9oqR.js","../chunks/CL2yxhDV.js","../chunks/COhKi5I6.js","../chunks/hpPpwecu.js","../chunks/C2-YgiZF.js","../chunks/C03-sIHu.js","../chunks/DBzD8FIy.js","../chunks/Ct5BCk5d.js","../chunks/KcazVFlU.js","../chunks/CYsUaMUi.js","../chunks/mxPIBlca.js","../chunks/B1Bh4S2o.js","../chunks/BzFyVeiR.js","../chunks/Bb0xX_Fn.js","../chunks/CFX_YiyI.js","../chunks/CefFkNr2.js","../chunks/DOAJfpyz.js","../chunks/B6Hh54jn.js","../chunks/DKMbv1dP.js","../chunks/BXfupK_G.js","../chunks/BkQcsSCB.js","../chunks/DPb6J-GU.js","../chunks/CwFyj4KC.js","../chunks/JI8MBgth.js","../chunks/QYHQISVP.js","../chunks/Cn-KJRkU.js","../chunks/VEGSGQ51.js","../chunks/CeqSKNOq.js","../chunks/BpS0eVY-.js","../chunks/C9BgZYvd.js","../chunks/D5QddsNZ.js","../chunks/BTdrrTIi.js","../chunks/DqGAFGWo.js","../chunks/CRfvaNoS.js","../chunks/BfuGwL9X.js","../chunks/DyEdvwqw.js","../chunks/Ca0GnHj9.js","../chunks/D7XwZUDn.js","../chunks/DsHDw-MJ.js","../chunks/CTXKbNVE.js","../chunks/B68-e1i2.js","../chunks/DZd6gJy7.js","../chunks/Cm1FCrMa.js","../chunks/C8BmVxiO.js","../chunks/SKPvM9nl.js","../chunks/CJcipZJa.js","../chunks/t7YI7jjt.js","../chunks/BzGHCuFd.js","../chunks/Chk7YAAL.js","../chunks/C4eyRFHZ.js","../chunks/Cgb6qxNH.js","../chunks/CMQCdq-P.js","../chunks/BZbOVUP0.js","../chunks/RkHh7_F4.js","../chunks/DKpmsPfl.js","../chunks/CaVKkSa6.js","../chunks/CKJW_hzu.js","../chunks/_KzNjohN.js","../chunks/B1N-tmtC.js","../chunks/DPw1_jRx.js","../chunks/_rUCDO1N.js","../chunks/QQC62dOK.js","../chunks/CASyCajO.js","../chunks/BiphejqT.js","../chunks/CRKBOk0z.js","../chunks/pDuGEAnG.js","../chunks/NzVRVRqD.js","../chunks/BrScpkSj.js","../chunks/Dqz3n4A5.js","../chunks/rxpTDz6e.js","../chunks/D-YQ4CHs.js","../chunks/D7TOvjcp.js","../chunks/BRjzZcZp.js","../chunks/COHLhXik.js","../chunks/BQBvadb7.js","../chunks/cUAizdnp.js","../chunks/Caulfaw_.js","../chunks/CnOjiBQ4.js","../chunks/9DHXOnVc.js","../chunks/n6UOt7ty.js","../chunks/LQ8II5qk.js","../chunks/BvOub3JO.js","../chunks/DAOJ2vkn.js","../chunks/Bt46m4pd.js","../chunks/bexxTcmF.js","../chunks/Cw4sh3xC.js","../chunks/BjhwDpSk.js","../chunks/B8l_M83k.js","../chunks/CB8wlU_f.js","../chunks/CQM3m500.js","../chunks/UjjEJtDR.js","../chunks/CpiU6G5c.js","../chunks/DwqrsEzQ.js","../chunks/QXap_35O.js","../chunks/DV_D_ms-.js","../chunks/D_qA3yb9.js","../chunks/BBYFSOBi.js","../chunks/CtDOi6ec.js","../chunks/BOEID1Kf.js","../chunks/BRxoU36Y.js","../chunks/CUzevAry.js","../chunks/C8zGwbjb.js","../chunks/BXMBYno9.js","../chunks/BSRsT1j9.js","../chunks/CqGmR_uN.js","../chunks/NpbZkYhY.js"])))=>i.map(i=>d[i]);
import{_ as je}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as ot,a as At}from"../chunks/DFUKILGv.js";import{f as h,p as le,c as b,n as st,r as $,a as ie,o as be,g as e,aG as g,ar as r,a8 as W,u as S,X as ye,U as J,av as Lt,aZ as kt,a_ as Et,aM as Rt}from"../chunks/C1YmX2UH.js";import{c as R,a as l,f as x,t as Ve}from"../chunks/BMeCtLyR.js";import{l as jt,s as $e,p as X,r as Ze,i as z}from"../chunks/MYJGKh80.js";import{b as ze}from"../chunks/DHTNoGoN.js";import{s as Q}from"../chunks/DfAHVaxr.js";import{s as lt,e as Xe,i as zt}from"../chunks/P1xUTngh.js";import{c as E}from"../chunks/CpUudvot.js";import{g as rt}from"../chunks/CWKS71Yf.js";import{I as Ft,s as Ot,e as Dt,f as Ut,S as at,g as it,h as ut,i as dt}from"../chunks/CwUP6mZe.js";import{a as Wt,s as Kt}from"../chunks/CeBw7cM3.js";import{c as ct}from"../chunks/c5jJKWzo.js";import"../chunks/69_IOA4Y.js";import{C as Nt}from"../chunks/CVwzUQOY.js";import{A as Ht,a as Tt,b as Bt}from"../chunks/kclYbeaK.js";import{S as ft}from"../chunks/FxWU69XT.js";import{B as Gt}from"../chunks/B63z5rX-.js";import{I as qt}from"../chunks/B9RZHzvF.js";import{s as nt}from"../chunks/CnfuZz2S.js";import{J as Jt}from"../chunks/CbAk7Q2g.js";import{j as Qt}from"../chunks/CJqWAG8q.js";import{a as Xt,b as Zt}from"../chunks/Btj6uXun.js";function Qe(P){return(Xt||Zt)+P}function Yt(P,s){const u=jt(s,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const p=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]];Ft(P,$e({name:"command"},()=>u,{get iconNode(){return p},children:(v,a)=>{var m=R(),f=h(m);Ot(f,s,"default",{}),l(v,m)},$$slots:{default:!0}}))}var er=x("<span><!></span>");function tr(P,s){le(s,!0);let u=X(s,"ref",15,null),p=Ze(s,["$$slots","$$events","$$legacy","ref","class","children"]);var v=er();Wt(v,m=>({"data-slot":"command-shortcut",class:m,...p}),[()=>ct("text-muted-foreground ml-auto text-xs tracking-widest",s.class)]);var a=b(v);lt(a,()=>s.children??st),$(v),ze(v,m=>u(m),()=>u()),l(P,v),ie()}function rr(P,s){le(s,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let u=Ze(s,["$$slots","$$events","$$legacy"]);const p=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];qt(P,$e({name:"arrow-left"},()=>u,{get iconNode(){return p},children:(v,a)=>{var m=R(),f=h(m);lt(f,()=>s.children??st),l(v,m)},$$slots:{default:!0}})),ie()}var ar=x('<div class="view svelte-1s3dmqi"></div>');function nr(P,s){le(s,!0);const u=!1,p=X(s,"mapView",7);let v=g(null),a=g(!1);be(()=>{p()&&(e(a)||(e(v)&&(p().container=e(v)),r(a,!0)))});var m={ssr:u},f=ar();return ze(f,V=>r(v,V),()=>e(v)),l(P,f),ie(m)}class pt{#r=g(null);#e=g(!1);#t=g(null);async fetchWebMaps(s){r(this.#e,!0),r(this.#t,null);try{const u=await fetch(s);if(!u.ok)throw new Error(`Failed to fetch web maps: ${u.status} ${u.statusText}`);const p=await u.json();r(this.#r,p,!0)}catch(u){r(this.#t,u,!0)}finally{r(this.#e,!1)}}get response(){return e(this.#r)}get isLoading(){return e(this.#e)}get error(){return e(this.#t)}}var or=x('<span class="m-0 ml-[-5px] inline-flex max-w-[10rem] items-center overflow-hidden rounded border border-border px-1 py-0.5 text-xs font-medium text-ellipsis whitespace-nowrap text-muted-foreground"> </span> <span aria-hidden="true" class="h-5 w-px bg-border"></span>',1),sr=x('<div class="flex h-9 items-center gap-2 border-b pl-2" data-slot="command-input-wrapper"><span class="flex h-full min-w-[1.25rem] shrink-0 items-center justify-center text-muted-foreground"><!></span> <!> <!></div>');function lr(P,s){le(s,!0);let u=X(s,"ref",15,null),p=X(s,"value",15,""),v=X(s,"iconProps",19,()=>({})),a=Ze(s,["$$slots","$$events","$$legacy","ref","class","value","icon","iconProps","commandId"]);var m=sr(),f=b(m),V=b(f);{var M=d=>{const C=S(()=>s.icon);var w=R(),i=h(w);E(i,()=>e(C),(c,_)=>{_(c,$e(v))}),l(d,w)},y=d=>{Yt(d,{class:"size-4 opacity-50"})};z(V,d=>{s.icon?d(M):d(y,!1)})}$(f);var A=W(f,2);{var L=d=>{var C=or(),w=h(C),i=b(w,!0);$(w),ye(2),J(()=>{Kt(w,"title",s.commandId),Q(i,s.commandId)}),l(d,C)};z(A,d=>{s.commandId&&d(L)})}var F=W(A,2);{let d=S(()=>ct("flex h-10 flex-1 rounded-md bg-transparent py-3 text-sm outline-hidden placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s.class));E(F,()=>Dt,(C,w)=>{w(C,$e({"data-slot":"command-input",get class(){return e(d)}},()=>a,{get ref(){return u()},set ref(i){u(i)},get value(){return p()},set value(i){p(i)}}))})}$(m),l(P,m),ie()}function ir(P,s){le(s,!0);const u=X(s,"disabled",3,!1);Gt(P,{class:"m-0 flex size-7 shrink-0 items-center justify-center rounded-md border-none bg-transparent p-0 text-muted-foreground opacity-50 shadow-none transition hover:bg-transparent hover:text-accent-foreground focus:outline-none focus-visible:border-transparent focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none active:ring-0 active:outline-none disabled:pointer-events-none disabled:opacity-50 has-[>svg]:px-0",onclick:()=>{u()||s.onPress?.()},"aria-label":"Return to command search",get disabled(){return u()},children:(p,v)=>{{let a=S(()=>`size-4 ${s.class}`.trim());rr(p,{get class(){return e(a)}})}},$$slots:{default:!0}}),ie()}var ur=x('<span class="text-xs text-muted-foreground"> </span>'),dr=x('<div class="flex flex-col gap-0.5"><span class="text-sm leading-tight font-medium"> </span> <!></div> <!>',1),cr=x("<!> <!>",1),fr=x('<div class="px-4 pb-3"><!></div>'),pr=x("<!> <!>",1),mr=x('<div class="px-4 pb-3"><!></div>'),vr=x('<p class="text-sm text-muted-foreground">No panel registered for this command.</p>'),_r=x('<div class="pr-2 pb-2 pl-2"><!></div>'),hr=x("<!> <!> <!>",1),gr=x("<!> <!>",1),wr=x('<div class="space-y-4"><!></div>');function xr(P,s){le(s,!0);const u=X(s,"commands",19,()=>[]),p=X(s,"placeholder",3,"Search commands..."),v=X(s,"emptyMessage",3,"No commands found.");let a=g(null),m=g(null),f=g(null),V=g(null),M=g(null),y=g(null),A=g(""),L=g(!1),F=g(Lt(p())),d=g(null),C=!1,w=g(null),i=!1,c=null,_=null;const O=S(()=>{const t=new Map;for(const o of u())t.set(o.id,o);return Array.from(t.values())}),k=S(()=>{const t=new Map;for(const o of e(O)){const n=o.group??null,I=t.get(n);I?I.push(o):t.set(n,[o])}for(const[,o]of t)o.sort((n,I)=>n.name.localeCompare(I.name));return t});function te(t,o=!1){o&&(C=!0),r(A,t,!0)}function Pe(){r(d,null),r(F,p()),C=!1}be(()=>{const t=e(d);if(t){if(C){C=!1;return}t(e(A))}}),be(()=>{e(a)||r(F,p())});function Ce(){if(_)try{_()}catch(t){console.error("Failed to dispose command session",t)}_=null,r(f,null),r(V,null),Pe(),r(m,null)}function K(){e(a)&&(Ce(),r(a,null),r(y,null),r(M,null),te("",!0),r(L,!0))}function oe(){e(w)?.blur()}function me(t,o){if(!t.component)return null;const n=t.props;return n?{component:t.component,props:()=>n(o)}:{component:t.component}}function ue(t,o){const n=t.createSession?.(o);if(n){_=n.dispose??null,Object.prototype.hasOwnProperty.call(n,"input")?r(f,n.input??null,!0):r(f,null),Object.prototype.hasOwnProperty.call(n,"content")?r(V,n.content??null,!0):r(V,me(t,o),!0);return}_=null,r(f,null),r(V,me(t,o),!0)}function Z(t){const o=t.id;return{deactivate:()=>{!e(a)||e(a).id!==o||K()},isActive:n=>!e(a)||e(a).id!==o?!1:n?e(a).id===n:!0,setIsOpen:(n,I)=>{if(!e(a)||e(a).id!==o)return;if(n){i=!1,r(L,!0);return}const H=I?.preserveActive??!0;De(H)},setInputSurface:n=>{!e(a)||e(a).id!==o||r(f,n,!0)},setContentSurface:n=>{!e(a)||e(a).id!==o||r(V,n,!0)},getInputValue:()=>e(A),setInputValue:n=>{!e(a)||e(a).id!==o||te(n,!0)},setInputHandler:n=>{if(!(!e(a)||e(a).id!==o)){if(r(d,n,!0),!n){C=!1;return}n(e(A))}},setPlaceholder:n=>{!e(a)||e(a).id!==o||r(F,n,!0)},resetPlaceholder:()=>{!e(a)||e(a).id!==o||r(F,p())}}}function de(t){const o=e(m);if(!t)return o?{runtime:o}:{};if(!o)return{};const{props:n}=t;return n?{...typeof n=="function"?n(o):n,runtime:o}:{runtime:o}}function Se(t){return`${t.name} ${t.description??""}`.trim()}async function ve(t){if(e(a)?.id===t.id){K();return}Ce(),r(y,null),r(M,t.id,!0),r(L,!0),e(w)&&e(w).focus();const o=Z(t);r(m,o,!0),r(a,t,!0),ue(t,o);try{await t.execute(o)}catch(n){r(y,n instanceof Error?n:new Error("Failed to execute the command."),!0)}finally{r(M,null),te("",!0)}}function Fe(t){const o=t.key.toLowerCase();if((t.metaKey||t.ctrlKey)&&o==="p"){if(t.preventDefault(),e(a)){K();return}e(w)&&e(w).focus();return}if(o==="escape"){if(e(a)){t.preventDefault(),K(),oe();return}e(L)&&(t.preventDefault(),r(L,!1),oe());return}if(!e(a))for(const I of e(O)){if(!I.shortcut)continue;const H=I.shortcut.join(" ").toLowerCase(),D=[];if(t.metaKey&&D.push("âŒ˜"),t.ctrlKey&&D.push("Ctrl"),t.altKey&&D.push("Alt"),t.shiftKey&&D.push("Shift"),D.push(t.key.length===1?t.key.toUpperCase():t.key),D.join(" ").toLowerCase()===H.toLowerCase()){t.preventDefault(),ve(I);break}}}function Oe(){r(L,!0)}function De(t=!1){i=t,r(L,!1)}function Ae(t){const o=c;if(!o)return;const n=t.target;n&&o.contains(n)||e(L)&&De(!!e(a))}be(()=>{if(!e(L)){if(te("",!0),!e(a)){i=!1;return}if(i){i=!1;return}Ce(),r(a,null),r(y,null)}});var _e=wr();rt("keydown",kt,Fe),rt("pointerdown",Et,Ae);var Ue=b(_e);E(Ue,()=>Ut,(t,o)=>{o(t,{children:(n,I)=>{var H=gr(),D=h(H);{let re=S(()=>e(a)?e(a).inputPlaceholder??e(F):e(F)),he=S(()=>e(a)?ir:void 0),We=S(()=>e(a)?{onPress:K,disabled:e(M)===e(a).id}:void 0),Ke=S(()=>e(a)?.id);lr(D,{get placeholder(){return e(re)},onfocus:()=>Oe(),get icon(){return e(he)},get iconProps(){return e(We)},get commandId(){return e(Ke)},get value(){return e(A)},set value(Me){r(A,Me,!0)},get ref(){return e(w)},set ref(Me){r(w,Me,!0)}})}var Le=W(D,2);{var Ie=re=>{var he=R(),We=h(he);{var Ke=ge=>{at(ge,{children:(ke,Ne)=>{var Ee=R(),Re=h(Ee);E(Re,()=>it,(He,Te)=>{Te(He,{children:(T,ce)=>{var N=cr(),se=h(N);E(se,()=>ut,(ae,U)=>{U(ae,{children:(B,Y)=>{ye();var G=Ve();J(()=>Q(G,v())),l(B,G)},$$slots:{default:!0}})});var fe=W(se,2);Xe(fe,17,()=>Array.from(e(k).entries()),zt,(ae,U)=>{var B=S(()=>Rt(e(U),2));let Y=()=>e(B)[1];var G=R(),ne=h(G);Xe(ne,17,Y,q=>q.id,(q,j)=>{var we=R(),pe=h(we);{let mt=S(()=>Se(e(j)));E(pe,()=>dt,(vt,_t)=>{_t(vt,{get value(){return e(mt)},onclick:()=>ve(e(j)),children:(ht,Sr)=>{var Ye=dr(),Be=h(Ye),Ge=b(Be),gt=b(Ge,!0);$(Ge);var wt=W(Ge,2);{var xt=ee=>{var xe=ur(),qe=b(xe,!0);$(xe),J(()=>Q(qe,e(j).description)),l(ee,xe)};z(wt,ee=>{e(j).description&&ee(xt)})}$(Be);var yt=W(Be,2);{var bt=ee=>{ft(ee,{class:"ml-auto size-4 text-muted-foreground"})},$t=ee=>{var xe=R(),qe=h(xe);{var Pt=Je=>{var et=R(),Ct=h(et);E(Ct,()=>tr,(It,Mt)=>{Mt(It,{children:(Vt,Ar)=>{ye();var tt=Ve();J(St=>Q(tt,St),[()=>e(j).shortcut?.join(" + ")]),l(Vt,tt)},$$slots:{default:!0}})}),l(Je,et)};z(qe,Je=>{e(j).shortcut?.length&&Je(Pt)},!0)}l(ee,xe)};z(yt,ee=>{e(M)===e(j).id?ee(bt):ee($t,!1)})}J(()=>Q(gt,e(j).name)),l(ht,Ye)},$$slots:{default:!0}})})}l(q,we)}),l(ae,G)}),l(T,N)},$$slots:{default:!0}})}),l(ke,Ee)},$$slots:{default:!0}})},Me=ge=>{var ke=hr(),Ne=h(ke);{var Ee=T=>{const ce=S(()=>e(f).component);var N=fr(),se=b(N);{let fe=S(()=>de(e(f)));E(se,()=>e(ce),(ae,U)=>{U(ae,$e(()=>e(fe)))})}$(N),l(T,N)};z(Ne,T=>{e(f)&&T(Ee)})}var Re=W(Ne,2);{var He=T=>{var ce=mr(),N=b(ce);E(N,()=>Ht,(se,fe)=>{fe(se,{variant:"destructive",children:(ae,U)=>{var B=pr(),Y=h(B);E(Y,()=>Tt,(ne,q)=>{q(ne,{children:(j,we)=>{ye();var pe=Ve();J(()=>Q(pe,`${e(a).name??""} failed`)),l(j,pe)},$$slots:{default:!0}})});var G=W(Y,2);E(G,()=>Bt,(ne,q)=>{q(ne,{children:(j,we)=>{ye();var pe=Ve();J(()=>Q(pe,e(y).message)),l(j,pe)},$$slots:{default:!0}})}),l(ae,B)},$$slots:{default:!0}})}),$(ce),l(T,ce)};z(Re,T=>{e(y)&&T(He)})}var Te=W(Re,2);at(Te,{children:(T,ce)=>{var N=_r(),se=b(N);{var fe=U=>{const B=S(()=>e(V).component);var Y=R(),G=h(Y);{let ne=S(()=>de(e(V)));E(G,()=>e(B),(q,j)=>{j(q,$e(()=>e(ne)))})}l(U,Y)},ae=U=>{var B=R(),Y=h(B);E(Y,()=>Nt,(G,ne)=>{ne(G,{class:"px-0",children:(q,j)=>{var we=vr();l(q,we)},$$slots:{default:!0}})}),l(U,B)};z(se,U=>{e(V)?U(fe):U(ae,!1)})}$(N),l(T,N)},$$slots:{default:!0}}),l(ge,ke)};z(We,ge=>{e(a)?ge(Me,!1):ge(Ke)})}l(re,he)};z(Le,re=>{e(L)&&re(Ie)})}l(n,H)},$$slots:{default:!0}})}),$(_e),ze(_e,t=>c=t,()=>c),l(P,_e),ie()}var yr=x('<div class="error-message svelte-11six79"><p class="text-sm text-red-600"> </p></div>'),br=x('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-11six79"> </span></div>'),$r=x('<span class="description-text text-xs text-gray-500 svelte-11six79"> </span>'),Pr=x('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-11six79"> </span> <!></div>'),Cr=x('<div class="item-container svelte-11six79"><!> <!></div>');function Ir(P,s){le(s,!0);const u=X(s,"mapView",7),p=X(s,"runtime",3,null),v=new pt;let a=g(null),m=g(null),f=g("");const V=S(()=>{const i=v.response?.results??[],c=e(f).trim().toLowerCase();return c?i.filter(_=>{const O=typeof _?.title=="string"?_.title.toLowerCase():"",k=typeof _?.description=="string"?_.description.toLowerCase():"";return O.includes(c)||k.includes(c)}):i});ot(async()=>{await v.fetchWebMaps("/maps-web-map.json")});let M=null,y=null,A=s.inputPlaceholder??"Search...";be(()=>{const i=p(),c=s.inputPlaceholder??"Search...";if(!i){y?.(),y=null,M=null,r(f,""),A=c;return}if(i===M){c!==A&&(i.setPlaceholder(c),A=c);return}y?.(),y=null,M=null,A=c;const _=k=>{r(f,k,!0)};i.setPlaceholder(c),i.setInputHandler(_);const O=i.getInputValue();r(f,O,!0),O&&(i.setInputValue(""),r(f,"")),y=()=>{i.setInputHandler(null),i.resetPlaceholder(),i.setInputValue(""),M===i&&(M=null),r(f,"")},M=i}),At(()=>{y?.(),y=null,M=null});async function L(i){if(!u()){console.error("MapView is not initialized"),r(m,"MapView is not ready. Please wait and try again.");return}r(a,i,!0),r(m,null);try{console.log(`Loading web map with ID: ${i}`);const[{default:c}]=await Promise.all([je(()=>import("../chunks/DVzVZBBg.js").then(Pe=>Pe.W),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155]),import.meta.url)]),_="https://nercdsh.dev.azure.manchester.ac.uk/portal";nt.portalUrl=_,console.log("Portal URL configured:",nt.portalUrl);const{addProxyRule:O}=Jt;console.log("Adding proxy rule for portal traffic"),O({urlPrefix:"https://nercdsh.dev.azure.manchester.ac.uk",proxyUrl:"/proxy/Java/proxy.jsp"});const k=new c({portalItem:{id:i,portal:{url:_}}});await k.load(),console.log("Web map loaded successfully"),u().map=k,console.log("Web map applied to MapView"),await Qt(()=>u().ready),console.log("MapView updated with new web map");const te=k.initialViewProperties?.viewpoint?.targetGeometry;te&&(await u().goTo(te),console.log("MapView navigated to web map initial viewpoint")),p()?.setIsOpen(!1)}catch(c){console.error("Error loading web map:",c),r(m,c instanceof Error?c.message:"Failed to load web map",!0)}finally{r(a,null)}}var F=Cr(),d=b(F);{var C=i=>{var c=yr(),_=b(c),O=b(_,!0);$(_),$(c),J(()=>Q(O,e(m))),l(i,c)};z(d,i=>{e(m)&&i(C)})}var w=W(d,2);E(w,()=>it,(i,c)=>{c(i,{children:(_,O)=>{var k=R(),te=h(k);{var Pe=K=>{var oe=R(),me=h(oe);E(me,()=>ut,(ue,Z)=>{Z(ue,{children:(de,Se)=>{ye();var ve=Ve("No web maps match your search.");l(de,ve)},$$slots:{default:!0}})}),l(K,oe)},Ce=K=>{var oe=R(),me=h(oe);Xe(me,17,()=>e(V),ue=>ue.id,(ue,Z)=>{var de=R(),Se=h(de);E(Se,()=>dt,(ve,Fe)=>{Fe(ve,{onclick:()=>L(e(Z).id),children:(Oe,De)=>{var Ae=R(),_e=h(Ae);{var Ue=o=>{var n=br(),I=b(n);ft(I,{class:"size-4"});var H=W(I,2),D=b(H);$(H),$(n),J(()=>Q(D,`Loading ${e(Z).title??"Untitled web map"??""}...`)),l(o,n)},t=o=>{var n=Pr(),I=b(n),H=b(I,!0);$(I);var D=W(I,2);{var Le=Ie=>{var re=$r(),he=b(re,!0);$(re),J(()=>Q(he,e(Z).description)),l(Ie,re)};z(D,Ie=>{e(Z).description&&Ie(Le)})}$(n),J(()=>Q(H,e(Z).title??"Untitled web map")),l(o,n)};z(_e,o=>{e(a)===e(Z).id?o(Ue):o(t,!1)})}l(Oe,Ae)},$$slots:{default:!0}})}),l(ue,de)}),l(K,oe)};z(te,K=>{e(V).length===0?K(Pe):K(Ce,!1)})}l(_,k)},$$slots:{default:!0}})}),$(F),l(P,F),ie()}var Mr=x('<section class="map-layout svelte-10vgo84"><!></section>'),Vr=x('<div class="command-search-wrapper svelte-10vgo84"><!></div> <!>',1);function ta(P,s){le(s,!0);let u=g(null),p=g(null),v=new pt,a=g(null),m=g(!1);const f={id:"add-web-map",name:"Add web map",description:"Fetch and display our web maps.",group:"Maps",shortcut:["Ctrl","M"],inputPlaceholder:"Search web maps...",execute:async d=>{await v.fetchWebMaps(Qe("/maps-web-map.json")),r(a,"show-web-maps"),r(m,!0)},component:Ir,props:d=>({mapView:e(u),inputPlaceholder:f.inputPlaceholder})},V={id:"add-layer",name:"Add layers",description:"Fetch and display our layers.",group:"Maps",shortcut:["Ctrl","L"],execute:async d=>{}};ot(async()=>{const d=Qe("/maps-web-map.json"),C=Qe("/");console.log("[page/maps] Asset path test:",d,C);const[{default:w}]=await Promise.all([je(()=>import("../chunks/CTXKbNVE.js").then(k=>k.a2),__vite__mapDeps([156,1,2,3,4,5,47,29,48,27,15,6,7,17,49,37,50,25,26,51,10,11,12,13,30,21,102,103,23,38,39,157,158,159,31,160,161,19,20,162,8,9,14,16,18,22,24,28,32,33,34,35,36,40,41,42,43,44,45,46,163,62,63,64,65,66,67,68,69,70,71,72,73,78,56,164,83,77,61,165,166,167,168,169,170,59,60,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187]),import.meta.url)]);r(u,new w({map:{basemap:"streets-vector"},zoom:15,center:[-90.1928,38.6226]}),!0),e(u).ui.move("zoom","bottom-right");const[{default:i}]=await Promise.all([je(()=>import("../chunks/D7TOvjcp.js").then(k=>k.L),__vite__mapDeps([188,5,1,2,3,4,10,11,12,13,7,45,164,21,159,23,6,31,160,20,189,190,191,65,187]),import.meta.url)]),c=new i({view:e(u)});e(u).ui.add(c,{position:"top-left"});const[{default:_}]=await Promise.all([je(()=>import("../chunks/cUAizdnp.js"),__vite__mapDeps([192,1,2,3,4,21,6,5,7,159,23,11,12,31,160,10,13,193,25,26,27,69,64,194,111,40,41,37,15,17,42,110,115,195,114,196,197,19,20,198,122,123,124,28,85,86,29,87,88,62,63,65,45,49,50,66,67,68,14,16,70,71,72,73,81,89,90,91,94,125,126,127,51,128,129,56,130,131,132,133,134,135,136,137,138,84,92,93,95,199,200,201,202,203,168,204,205,206,46,207,187,208,209,210,211,212,213,214,179,215,216,166,172,217,218,219,220,183,221,222,185,190]),import.meta.url)]),O=new _({view:e(u)});e(u).ui.add(O,{position:"top-right"})}),be(()=>{e(u)&&e(p)&&e(u).ui.add(e(p),{position:"manual"})});var M=Vr(),y=h(M),A=b(y);{let d=S(()=>[f,V]);xr(A,{get commands(){return e(d)}})}$(y),ze(y,d=>r(p,d),()=>e(p));var L=W(y,2);{var F=d=>{var C=Mr(),w=b(C);nr(w,{get mapView(){return e(u)}}),$(C),l(d,C)};z(L,d=>{e(u)&&d(F)})}l(P,M),ie()}export{ta as component};
