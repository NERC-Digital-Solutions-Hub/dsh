const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DVzVZBBg.js","../chunks/DvUDi2Se.js","../chunks/CnfuZz2S.js","../chunks/BYatcg2i.js","../chunks/DSvukMJ1.js","../chunks/PPVm8Dsz.js","../chunks/DedWa6hQ.js","../chunks/CbAk7Q2g.js","../chunks/Dtl6Huvk.js","../chunks/JZrX1DQH.js","../chunks/InWWYu7p.js","../chunks/BtRNH9HO.js","../chunks/C3DztaFN.js","../chunks/Fd-zc6xv.js","../chunks/CLdLWz9D.js","../chunks/Bx7Drccn.js","../chunks/Bstk8l7f.js","../chunks/Bs5I5-7o.js","../chunks/BJ6KxFoX.js","../chunks/Dg2Cy1wG.js","../chunks/Cfk1RgA5.js","../chunks/CJqWAG8q.js","../chunks/BNRAtZeH.js","../chunks/DTbuUgvd.js","../chunks/eb6qfy6k.js","../chunks/CdZ5E7Js.js","../chunks/D6wORzA5.js","../chunks/D6KPPgz5.js","../chunks/Hpj2QL01.js","../chunks/DHdURl-u.js","../chunks/B8bQhW-6.js","../chunks/Cl5lrJ4c.js","../chunks/CSgXBDAV.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/XEWFwhUy.js","../chunks/Bcw4sJLc.js","../chunks/BDErjlP0.js","../chunks/elf00Mmu.js","../chunks/BTzO5B6K.js","../chunks/Djp3mnm5.js","../chunks/BkkzFYiK.js","../chunks/DQOJ18NT.js","../chunks/BfvMWYA7.js","../chunks/C2A-cDAk.js","../chunks/pZ2g7Ohf.js","../chunks/DPRDD1To.js","../chunks/DZNpV-Fi.js","../chunks/EzLf78vY.js","../chunks/Ct-FuPNe.js","../chunks/BmZQD3Tc.js","../chunks/Dp3s0ZcO.js","../chunks/B7VbszFd.js","../chunks/CWwez7Ew.js","../chunks/CL2NbQte.js","../chunks/C-gotZDZ.js","../chunks/BYWLb-qP.js","../chunks/Dtr09YEc.js","../chunks/5_frVxKl.js","../chunks/kro8eSGX.js","../chunks/Cj7IhThc.js","../chunks/CsmaOzwV.js","../chunks/WcbF0m06.js","../chunks/D2fJSBL9.js","../chunks/BTFaZ95N.js","../chunks/Db_cRbTq.js","../chunks/9YvG7tFv.js","../chunks/DwIAbcbk.js","../chunks/Bunn428X.js","../chunks/aQeO9QTD.js","../chunks/BVStbsji.js","../chunks/muspHcCn.js","../chunks/BSsBqB8a.js","../chunks/BfUcY0IH.js","../chunks/CVqfDkJl.js","../chunks/C5CzMsLd.js","../chunks/C9lK54Hu.js","../chunks/D26fh4vX.js","../chunks/Cigsg82C.js","../chunks/BwvlIeVB.js","../chunks/Cu2J4Q4w.js","../chunks/DI4_79_v.js","../chunks/ZfJYk1lX.js","../chunks/Cv9IkvcT.js","../chunks/CzgEe7_M.js","../chunks/Co6MM1WB.js","../chunks/L9sxntLJ.js","../chunks/Dz9nnGQp.js","../chunks/BZVu3XrO.js","../chunks/nDOBqX6c.js","../chunks/DPeJS9ie.js","../chunks/GKolV7NZ.js","../chunks/CLfdaVZL.js","../chunks/BvI0vjxO.js","../chunks/BoVlFCoi.js","../chunks/Byb_ddQ1.js","../chunks/DayGv1xo.js","../chunks/DFa2M8Ih.js","../chunks/CB8DDl4O.js","../chunks/Cvu3dz6j.js","../chunks/CjV58eza.js","../chunks/VMSlSy0z.js","../chunks/B9TnOdWG.js","../chunks/B-KfLzZb.js","../chunks/D7MNnqkP.js","../chunks/OVZo4xRf.js","../chunks/DWtdFFwQ.js","../chunks/X9GVov2f.js","../chunks/CEn1iOYu.js","../chunks/BpCBUT2X.js","../chunks/DZpgY3Wp.js","../chunks/BXcKK5tC.js","../chunks/qWbuC5Wj.js","../chunks/B0YVZ3UN.js","../chunks/CTVS09Kb.js","../chunks/ThCcySDx.js","../chunks/BkCRFj7C.js","../chunks/K4FY9oqR.js","../chunks/CL2yxhDV.js","../chunks/COhKi5I6.js","../chunks/hpPpwecu.js","../chunks/C2-YgiZF.js","../chunks/C03-sIHu.js","../chunks/DBzD8FIy.js","../chunks/Ct5BCk5d.js","../chunks/KcazVFlU.js","../chunks/CYsUaMUi.js","../chunks/mxPIBlca.js","../chunks/B1Bh4S2o.js","../chunks/BzFyVeiR.js","../chunks/Bb0xX_Fn.js","../chunks/CFX_YiyI.js","../chunks/CefFkNr2.js","../chunks/DOAJfpyz.js","../chunks/B6Hh54jn.js","../chunks/DKMbv1dP.js","../chunks/BXfupK_G.js","../chunks/BkQcsSCB.js","../chunks/DPb6J-GU.js","../chunks/CwFyj4KC.js","../chunks/JI8MBgth.js","../chunks/QYHQISVP.js","../chunks/Cn-KJRkU.js","../chunks/VEGSGQ51.js","../chunks/CeqSKNOq.js","../chunks/BpS0eVY-.js","../chunks/C9BgZYvd.js","../chunks/D5QddsNZ.js","../chunks/BTdrrTIi.js","../chunks/DqGAFGWo.js","../chunks/CRfvaNoS.js","../chunks/BfuGwL9X.js","../chunks/DyEdvwqw.js","../chunks/Ca0GnHj9.js","../chunks/D7XwZUDn.js","../chunks/DsHDw-MJ.js","../chunks/CTXKbNVE.js","../chunks/B68-e1i2.js","../chunks/DZd6gJy7.js","../chunks/Cm1FCrMa.js","../chunks/C8BmVxiO.js","../chunks/SKPvM9nl.js","../chunks/CJcipZJa.js","../chunks/t7YI7jjt.js","../chunks/BzGHCuFd.js","../chunks/Chk7YAAL.js","../chunks/C4eyRFHZ.js","../chunks/Cgb6qxNH.js","../chunks/CMQCdq-P.js","../chunks/BZbOVUP0.js","../chunks/RkHh7_F4.js","../chunks/DKpmsPfl.js","../chunks/CaVKkSa6.js","../chunks/CKJW_hzu.js","../chunks/_KzNjohN.js","../chunks/B1N-tmtC.js","../chunks/DPw1_jRx.js","../chunks/_rUCDO1N.js","../chunks/QQC62dOK.js","../chunks/CASyCajO.js","../chunks/BiphejqT.js","../chunks/CRKBOk0z.js","../chunks/pDuGEAnG.js","../chunks/NzVRVRqD.js","../chunks/BrScpkSj.js","../chunks/Dqz3n4A5.js","../chunks/rxpTDz6e.js","../chunks/D-YQ4CHs.js","../chunks/D7TOvjcp.js","../chunks/BRjzZcZp.js","../chunks/COHLhXik.js","../chunks/BQBvadb7.js","../chunks/cUAizdnp.js","../chunks/Caulfaw_.js","../chunks/CnOjiBQ4.js","../chunks/9DHXOnVc.js","../chunks/n6UOt7ty.js","../chunks/LQ8II5qk.js","../chunks/BvOub3JO.js","../chunks/DAOJ2vkn.js","../chunks/Bt46m4pd.js","../chunks/bexxTcmF.js","../chunks/Cw4sh3xC.js","../chunks/BjhwDpSk.js","../chunks/B8l_M83k.js","../chunks/CB8wlU_f.js","../chunks/CQM3m500.js","../chunks/UjjEJtDR.js","../chunks/CpiU6G5c.js","../chunks/DwqrsEzQ.js","../chunks/QXap_35O.js","../chunks/DV_D_ms-.js","../chunks/D_qA3yb9.js","../chunks/BBYFSOBi.js","../chunks/CtDOi6ec.js","../chunks/BOEID1Kf.js","../chunks/BRxoU36Y.js","../chunks/CUzevAry.js","../chunks/C8zGwbjb.js","../chunks/BXMBYno9.js","../chunks/BSRsT1j9.js","../chunks/CqGmR_uN.js","../chunks/NpbZkYhY.js"])))=>i.map(i=>d[i]);
import{_ as ze}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as nt,a as St}from"../chunks/DFUKILGv.js";import{f as h,p as le,c as b,n as ot,r as $,a as ie,o as be,g as e,aG as g,ar as r,a8 as D,u as S,X as ye,U as J,av as Lt,aZ as At,a_ as kt,aM as Et}from"../chunks/C1YmX2UH.js";import{c as E,a as l,f as x,t as Ve}from"../chunks/BMeCtLyR.js";import{l as Rt,s as $e,p as X,r as Xe,i as z}from"../chunks/MYJGKh80.js";import{b as je}from"../chunks/DHTNoGoN.js";import{s as Q}from"../chunks/DfAHVaxr.js";import{s as st,e as Qe,i as zt}from"../chunks/P1xUTngh.js";import{c as k}from"../chunks/CpUudvot.js";import{g as tt}from"../chunks/CWKS71Yf.js";import{I as jt,s as Ft,e as Ot,f as Dt,S as rt,g as lt,h as it,i as ut}from"../chunks/CwUP6mZe.js";import{a as Ut,s as Wt}from"../chunks/CeBw7cM3.js";import{c as dt}from"../chunks/c5jJKWzo.js";import"../chunks/69_IOA4Y.js";import{C as Kt}from"../chunks/CVwzUQOY.js";import{A as Nt,a as Ht,b as Tt}from"../chunks/kclYbeaK.js";import{S as ct}from"../chunks/FxWU69XT.js";import{B as Bt}from"../chunks/B63z5rX-.js";import{I as Gt}from"../chunks/B9RZHzvF.js";import{s as at}from"../chunks/CnfuZz2S.js";import{J as qt}from"../chunks/CbAk7Q2g.js";import{j as Jt}from"../chunks/CJqWAG8q.js";import{a as Qt,b as Xt}from"../chunks/ClXaspsJ.js";function Zt(P){return(Qt||Xt)+P}function Yt(P,s){const u=Rt(s,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const p=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]];jt(P,$e({name:"command"},()=>u,{get iconNode(){return p},children:(_,a)=>{var m=E(),f=h(m);Ft(f,s,"default",{}),l(_,m)},$$slots:{default:!0}}))}var er=x("<span><!></span>");function tr(P,s){le(s,!0);let u=X(s,"ref",15,null),p=Xe(s,["$$slots","$$events","$$legacy","ref","class","children"]);var _=er();Ut(_,m=>({"data-slot":"command-shortcut",class:m,...p}),[()=>dt("text-muted-foreground ml-auto text-xs tracking-widest",s.class)]);var a=b(_);st(a,()=>s.children??ot),$(_),je(_,m=>u(m),()=>u()),l(P,_),ie()}function rr(P,s){le(s,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let u=Xe(s,["$$slots","$$events","$$legacy"]);const p=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Gt(P,$e({name:"arrow-left"},()=>u,{get iconNode(){return p},children:(_,a)=>{var m=E(),f=h(m);st(f,()=>s.children??ot),l(_,m)},$$slots:{default:!0}})),ie()}var ar=x('<div class="view svelte-1s3dmqi"></div>');function nr(P,s){le(s,!0);const u=!1,p=X(s,"mapView",7);let _=g(null),a=g(!1);be(()=>{p()&&(e(a)||(e(_)&&(p().container=e(_)),r(a,!0)))});var m={ssr:u},f=ar();return je(f,V=>r(_,V),()=>e(_)),l(P,f),ie(m)}class ft{#r=g(null);#e=g(!1);#t=g(null);async fetchWebMaps(s){r(this.#e,!0),r(this.#t,null);try{const u=await fetch(s);if(!u.ok)throw new Error(`Failed to fetch web maps: ${u.status} ${u.statusText}`);const p=await u.json();r(this.#r,p,!0)}catch(u){r(this.#t,u,!0)}finally{r(this.#e,!1)}}get response(){return e(this.#r)}get isLoading(){return e(this.#e)}get error(){return e(this.#t)}}var or=x('<span class="m-0 ml-[-5px] inline-flex max-w-[10rem] items-center overflow-hidden rounded border border-border px-1 py-0.5 text-xs font-medium text-ellipsis whitespace-nowrap text-muted-foreground"> </span> <span aria-hidden="true" class="h-5 w-px bg-border"></span>',1),sr=x('<div class="flex h-9 items-center gap-2 border-b pl-2" data-slot="command-input-wrapper"><span class="flex h-full min-w-[1.25rem] shrink-0 items-center justify-center text-muted-foreground"><!></span> <!> <!></div>');function lr(P,s){le(s,!0);let u=X(s,"ref",15,null),p=X(s,"value",15,""),_=X(s,"iconProps",19,()=>({})),a=Xe(s,["$$slots","$$events","$$legacy","ref","class","value","icon","iconProps","commandId"]);var m=sr(),f=b(m),V=b(f);{var M=d=>{const C=S(()=>s.icon);var w=E(),i=h(w);k(i,()=>e(C),(c,v)=>{v(c,$e(_))}),l(d,w)},y=d=>{Yt(d,{class:"size-4 opacity-50"})};z(V,d=>{s.icon?d(M):d(y,!1)})}$(f);var L=D(f,2);{var A=d=>{var C=or(),w=h(C),i=b(w,!0);$(w),ye(2),J(()=>{Wt(w,"title",s.commandId),Q(i,s.commandId)}),l(d,C)};z(L,d=>{s.commandId&&d(A)})}var j=D(L,2);{let d=S(()=>dt("flex h-10 flex-1 rounded-md bg-transparent py-3 text-sm outline-hidden placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s.class));k(j,()=>Ot,(C,w)=>{w(C,$e({"data-slot":"command-input",get class(){return e(d)}},()=>a,{get ref(){return u()},set ref(i){u(i)},get value(){return p()},set value(i){p(i)}}))})}$(m),l(P,m),ie()}function ir(P,s){le(s,!0);const u=X(s,"disabled",3,!1);Bt(P,{class:"m-0 flex size-7 shrink-0 items-center justify-center rounded-md border-none bg-transparent p-0 text-muted-foreground opacity-50 shadow-none transition hover:bg-transparent hover:text-accent-foreground focus:outline-none focus-visible:border-transparent focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none active:ring-0 active:outline-none disabled:pointer-events-none disabled:opacity-50 has-[>svg]:px-0",onclick:()=>{u()||s.onPress?.()},"aria-label":"Return to command search",get disabled(){return u()},children:(p,_)=>{{let a=S(()=>`size-4 ${s.class}`.trim());rr(p,{get class(){return e(a)}})}},$$slots:{default:!0}}),ie()}var ur=x('<span class="text-xs text-muted-foreground"> </span>'),dr=x('<div class="flex flex-col gap-0.5"><span class="text-sm leading-tight font-medium"> </span> <!></div> <!>',1),cr=x("<!> <!>",1),fr=x('<div class="px-4 pb-3"><!></div>'),pr=x("<!> <!>",1),mr=x('<div class="px-4 pb-3"><!></div>'),vr=x('<p class="text-sm text-muted-foreground">No panel registered for this command.</p>'),_r=x('<div class="pr-2 pb-2 pl-2"><!></div>'),hr=x("<!> <!> <!>",1),gr=x("<!> <!>",1),wr=x('<div class="space-y-4"><!></div>');function xr(P,s){le(s,!0);const u=X(s,"commands",19,()=>[]),p=X(s,"placeholder",3,"Search commands..."),_=X(s,"emptyMessage",3,"No commands found.");let a=g(null),m=g(null),f=g(null),V=g(null),M=g(null),y=g(null),L=g(""),A=g(!1),j=g(Lt(p())),d=g(null),C=!1,w=g(null),i=!1,c=null,v=null;const U=S(()=>{const t=new Map;for(const o of u())t.set(o.id,o);return Array.from(t.values())}),W=S(()=>{const t=new Map;for(const o of e(U)){const n=o.group??null,I=t.get(n);I?I.push(o):t.set(n,[o])}for(const[,o]of t)o.sort((n,I)=>n.name.localeCompare(I.name));return t});function te(t,o=!1){o&&(C=!0),r(L,t,!0)}function Pe(){r(d,null),r(j,p()),C=!1}be(()=>{const t=e(d);if(t){if(C){C=!1;return}t(e(L))}}),be(()=>{e(a)||r(j,p())});function Ce(){if(v)try{v()}catch(t){console.error("Failed to dispose command session",t)}v=null,r(f,null),r(V,null),Pe(),r(m,null)}function K(){e(a)&&(Ce(),r(a,null),r(y,null),r(M,null),te("",!0),r(A,!0))}function oe(){e(w)?.blur()}function me(t,o){if(!t.component)return null;const n=t.props;return n?{component:t.component,props:()=>n(o)}:{component:t.component}}function ue(t,o){const n=t.createSession?.(o);if(n){v=n.dispose??null,Object.prototype.hasOwnProperty.call(n,"input")?r(f,n.input??null,!0):r(f,null),Object.prototype.hasOwnProperty.call(n,"content")?r(V,n.content??null,!0):r(V,me(t,o),!0);return}v=null,r(f,null),r(V,me(t,o),!0)}function Z(t){const o=t.id;return{deactivate:()=>{!e(a)||e(a).id!==o||K()},isActive:n=>!e(a)||e(a).id!==o?!1:n?e(a).id===n:!0,setIsOpen:(n,I)=>{if(!e(a)||e(a).id!==o)return;if(n){i=!1,r(A,!0);return}const H=I?.preserveActive??!0;De(H)},setInputSurface:n=>{!e(a)||e(a).id!==o||r(f,n,!0)},setContentSurface:n=>{!e(a)||e(a).id!==o||r(V,n,!0)},getInputValue:()=>e(L),setInputValue:n=>{!e(a)||e(a).id!==o||te(n,!0)},setInputHandler:n=>{if(!(!e(a)||e(a).id!==o)){if(r(d,n,!0),!n){C=!1;return}n(e(L))}},setPlaceholder:n=>{!e(a)||e(a).id!==o||r(j,n,!0)},resetPlaceholder:()=>{!e(a)||e(a).id!==o||r(j,p())}}}function de(t){const o=e(m);if(!t)return o?{runtime:o}:{};if(!o)return{};const{props:n}=t;return n?{...typeof n=="function"?n(o):n,runtime:o}:{runtime:o}}function Se(t){return`${t.name} ${t.description??""}`.trim()}async function ve(t){if(e(a)?.id===t.id){K();return}Ce(),r(y,null),r(M,t.id,!0),r(A,!0),e(w)&&e(w).focus();const o=Z(t);r(m,o,!0),r(a,t,!0),ue(t,o);try{await t.execute(o)}catch(n){r(y,n instanceof Error?n:new Error("Failed to execute the command."),!0)}finally{r(M,null),te("",!0)}}function Fe(t){const o=t.key.toLowerCase();if((t.metaKey||t.ctrlKey)&&o==="p"){if(t.preventDefault(),e(a)){K();return}e(w)&&e(w).focus();return}if(o==="escape"){if(e(a)){t.preventDefault(),K(),oe();return}e(A)&&(t.preventDefault(),r(A,!1),oe());return}if(!e(a))for(const I of e(U)){if(!I.shortcut)continue;const H=I.shortcut.join(" ").toLowerCase(),F=[];if(t.metaKey&&F.push("âŒ˜"),t.ctrlKey&&F.push("Ctrl"),t.altKey&&F.push("Alt"),t.shiftKey&&F.push("Shift"),F.push(t.key.length===1?t.key.toUpperCase():t.key),F.join(" ").toLowerCase()===H.toLowerCase()){t.preventDefault(),ve(I);break}}}function Oe(){r(A,!0)}function De(t=!1){i=t,r(A,!1)}function Le(t){const o=c;if(!o)return;const n=t.target;n&&o.contains(n)||e(A)&&De(!!e(a))}be(()=>{if(!e(A)){if(te("",!0),!e(a)){i=!1;return}if(i){i=!1;return}Ce(),r(a,null),r(y,null)}});var _e=wr();tt("keydown",At,Fe),tt("pointerdown",kt,Le);var Ue=b(_e);k(Ue,()=>Dt,(t,o)=>{o(t,{children:(n,I)=>{var H=gr(),F=h(H);{let re=S(()=>e(a)?e(a).inputPlaceholder??e(j):e(j)),he=S(()=>e(a)?ir:void 0),We=S(()=>e(a)?{onPress:K,disabled:e(M)===e(a).id}:void 0),Ke=S(()=>e(a)?.id);lr(F,{get placeholder(){return e(re)},onfocus:()=>Oe(),get icon(){return e(he)},get iconProps(){return e(We)},get commandId(){return e(Ke)},get value(){return e(L)},set value(Me){r(L,Me,!0)},get ref(){return e(w)},set ref(Me){r(w,Me,!0)}})}var Ae=D(F,2);{var Ie=re=>{var he=E(),We=h(he);{var Ke=ge=>{rt(ge,{children:(ke,Ne)=>{var Ee=E(),Re=h(Ee);k(Re,()=>lt,(He,Te)=>{Te(He,{children:(T,ce)=>{var N=cr(),se=h(N);k(se,()=>it,(ae,O)=>{O(ae,{children:(B,Y)=>{ye();var G=Ve();J(()=>Q(G,_())),l(B,G)},$$slots:{default:!0}})});var fe=D(se,2);Qe(fe,17,()=>Array.from(e(W).entries()),zt,(ae,O)=>{var B=S(()=>Et(e(O),2));let Y=()=>e(B)[1];var G=E(),ne=h(G);Qe(ne,17,Y,q=>q.id,(q,R)=>{var we=E(),pe=h(we);{let pt=S(()=>Se(e(R)));k(pe,()=>ut,(mt,vt)=>{vt(mt,{get value(){return e(pt)},onclick:()=>ve(e(R)),children:(_t,Sr)=>{var Ze=dr(),Be=h(Ze),Ge=b(Be),ht=b(Ge,!0);$(Ge);var gt=D(Ge,2);{var wt=ee=>{var xe=ur(),qe=b(xe,!0);$(xe),J(()=>Q(qe,e(R).description)),l(ee,xe)};z(gt,ee=>{e(R).description&&ee(wt)})}$(Be);var xt=D(Be,2);{var yt=ee=>{ct(ee,{class:"ml-auto size-4 text-muted-foreground"})},bt=ee=>{var xe=E(),qe=h(xe);{var $t=Je=>{var Ye=E(),Pt=h(Ye);k(Pt,()=>tr,(Ct,It)=>{It(Ct,{children:(Mt,Lr)=>{ye();var et=Ve();J(Vt=>Q(et,Vt),[()=>e(R).shortcut?.join(" + ")]),l(Mt,et)},$$slots:{default:!0}})}),l(Je,Ye)};z(qe,Je=>{e(R).shortcut?.length&&Je($t)},!0)}l(ee,xe)};z(xt,ee=>{e(M)===e(R).id?ee(yt):ee(bt,!1)})}J(()=>Q(ht,e(R).name)),l(_t,Ze)},$$slots:{default:!0}})})}l(q,we)}),l(ae,G)}),l(T,N)},$$slots:{default:!0}})}),l(ke,Ee)},$$slots:{default:!0}})},Me=ge=>{var ke=hr(),Ne=h(ke);{var Ee=T=>{const ce=S(()=>e(f).component);var N=fr(),se=b(N);{let fe=S(()=>de(e(f)));k(se,()=>e(ce),(ae,O)=>{O(ae,$e(()=>e(fe)))})}$(N),l(T,N)};z(Ne,T=>{e(f)&&T(Ee)})}var Re=D(Ne,2);{var He=T=>{var ce=mr(),N=b(ce);k(N,()=>Nt,(se,fe)=>{fe(se,{variant:"destructive",children:(ae,O)=>{var B=pr(),Y=h(B);k(Y,()=>Ht,(ne,q)=>{q(ne,{children:(R,we)=>{ye();var pe=Ve();J(()=>Q(pe,`${e(a).name??""} failed`)),l(R,pe)},$$slots:{default:!0}})});var G=D(Y,2);k(G,()=>Tt,(ne,q)=>{q(ne,{children:(R,we)=>{ye();var pe=Ve();J(()=>Q(pe,e(y).message)),l(R,pe)},$$slots:{default:!0}})}),l(ae,B)},$$slots:{default:!0}})}),$(ce),l(T,ce)};z(Re,T=>{e(y)&&T(He)})}var Te=D(Re,2);rt(Te,{children:(T,ce)=>{var N=_r(),se=b(N);{var fe=O=>{const B=S(()=>e(V).component);var Y=E(),G=h(Y);{let ne=S(()=>de(e(V)));k(G,()=>e(B),(q,R)=>{R(q,$e(()=>e(ne)))})}l(O,Y)},ae=O=>{var B=E(),Y=h(B);k(Y,()=>Kt,(G,ne)=>{ne(G,{class:"px-0",children:(q,R)=>{var we=vr();l(q,we)},$$slots:{default:!0}})}),l(O,B)};z(se,O=>{e(V)?O(fe):O(ae,!1)})}$(N),l(T,N)},$$slots:{default:!0}}),l(ge,ke)};z(We,ge=>{e(a)?ge(Me,!1):ge(Ke)})}l(re,he)};z(Ae,re=>{e(A)&&re(Ie)})}l(n,H)},$$slots:{default:!0}})}),$(_e),je(_e,t=>c=t,()=>c),l(P,_e),ie()}var yr=x('<div class="error-message svelte-11six79"><p class="text-sm text-red-600"> </p></div>'),br=x('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-11six79"> </span></div>'),$r=x('<span class="description-text text-xs text-gray-500 svelte-11six79"> </span>'),Pr=x('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-11six79"> </span> <!></div>'),Cr=x('<div class="item-container svelte-11six79"><!> <!></div>');function Ir(P,s){le(s,!0);const u=X(s,"mapView",7),p=X(s,"runtime",3,null),_=new ft;let a=g(null),m=g(null),f=g("");const V=S(()=>{const i=_.response?.results??[],c=e(f).trim().toLowerCase();return c?i.filter(v=>{const U=typeof v?.title=="string"?v.title.toLowerCase():"",W=typeof v?.description=="string"?v.description.toLowerCase():"";return U.includes(c)||W.includes(c)}):i});nt(async()=>{await _.fetchWebMaps("/maps-web-map.json")});let M=null,y=null,L=s.inputPlaceholder??"Search...";be(()=>{const i=p(),c=s.inputPlaceholder??"Search...";if(!i){y?.(),y=null,M=null,r(f,""),L=c;return}if(i===M){c!==L&&(i.setPlaceholder(c),L=c);return}y?.(),y=null,M=null,L=c;const v=W=>{r(f,W,!0)};i.setPlaceholder(c),i.setInputHandler(v);const U=i.getInputValue();r(f,U,!0),U&&(i.setInputValue(""),r(f,"")),y=()=>{i.setInputHandler(null),i.resetPlaceholder(),i.setInputValue(""),M===i&&(M=null),r(f,"")},M=i}),St(()=>{y?.(),y=null,M=null});async function A(i){if(!u()){console.error("MapView is not initialized"),r(m,"MapView is not ready. Please wait and try again.");return}r(a,i,!0),r(m,null);try{console.log(`Loading web map with ID: ${i}`);const[{default:c}]=await Promise.all([ze(()=>import("../chunks/DVzVZBBg.js").then(Pe=>Pe.W),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155]),import.meta.url)]),v="https://nercdsh.dev.azure.manchester.ac.uk/portal";at.portalUrl=v,console.log("Portal URL configured:",at.portalUrl);const{addProxyRule:U}=qt;console.log("Adding proxy rule for portal traffic"),U({urlPrefix:"https://nercdsh.dev.azure.manchester.ac.uk",proxyUrl:"/proxy/Java/proxy.jsp"});const W=new c({portalItem:{id:i,portal:{url:v}}});await W.load(),console.log("Web map loaded successfully"),u().map=W,console.log("Web map applied to MapView"),await Jt(()=>u().ready),console.log("MapView updated with new web map");const te=W.initialViewProperties?.viewpoint?.targetGeometry;te&&(await u().goTo(te),console.log("MapView navigated to web map initial viewpoint")),p()?.setIsOpen(!1)}catch(c){console.error("Error loading web map:",c),r(m,c instanceof Error?c.message:"Failed to load web map",!0)}finally{r(a,null)}}var j=Cr(),d=b(j);{var C=i=>{var c=yr(),v=b(c),U=b(v,!0);$(v),$(c),J(()=>Q(U,e(m))),l(i,c)};z(d,i=>{e(m)&&i(C)})}var w=D(d,2);k(w,()=>lt,(i,c)=>{c(i,{children:(v,U)=>{var W=E(),te=h(W);{var Pe=K=>{var oe=E(),me=h(oe);k(me,()=>it,(ue,Z)=>{Z(ue,{children:(de,Se)=>{ye();var ve=Ve("No web maps match your search.");l(de,ve)},$$slots:{default:!0}})}),l(K,oe)},Ce=K=>{var oe=E(),me=h(oe);Qe(me,17,()=>e(V),ue=>ue.id,(ue,Z)=>{var de=E(),Se=h(de);k(Se,()=>ut,(ve,Fe)=>{Fe(ve,{onclick:()=>A(e(Z).id),children:(Oe,De)=>{var Le=E(),_e=h(Le);{var Ue=o=>{var n=br(),I=b(n);ct(I,{class:"size-4"});var H=D(I,2),F=b(H);$(H),$(n),J(()=>Q(F,`Loading ${e(Z).title??"Untitled web map"??""}...`)),l(o,n)},t=o=>{var n=Pr(),I=b(n),H=b(I,!0);$(I);var F=D(I,2);{var Ae=Ie=>{var re=$r(),he=b(re,!0);$(re),J(()=>Q(he,e(Z).description)),l(Ie,re)};z(F,Ie=>{e(Z).description&&Ie(Ae)})}$(n),J(()=>Q(H,e(Z).title??"Untitled web map")),l(o,n)};z(_e,o=>{e(a)===e(Z).id?o(Ue):o(t,!1)})}l(Oe,Le)},$$slots:{default:!0}})}),l(ue,de)}),l(K,oe)};z(te,K=>{e(V).length===0?K(Pe):K(Ce,!1)})}l(v,W)},$$slots:{default:!0}})}),$(j),l(P,j),ie()}var Mr=x('<section class="map-layout svelte-10vgo84"><!></section>'),Vr=x('<div class="command-search-wrapper svelte-10vgo84"><!></div> <!>',1);function ta(P,s){le(s,!0);let u=g(null),p=g(null),_=new ft,a=g(null),m=g(!1);const f={id:"add-web-map",name:"Add web map",description:"Fetch and display our web maps.",group:"Maps",shortcut:["Ctrl","M"],inputPlaceholder:"Search web maps...",execute:async d=>{await _.fetchWebMaps(Zt("/maps-web-map.json")),r(a,"show-web-maps"),r(m,!0)},component:Ir,props:d=>({mapView:e(u),inputPlaceholder:f.inputPlaceholder})},V={id:"add-layer",name:"Add layers",description:"Fetch and display our layers.",group:"Maps",shortcut:["Ctrl","L"],execute:async d=>{}};nt(async()=>{const[{default:d}]=await Promise.all([ze(()=>import("../chunks/CTXKbNVE.js").then(v=>v.a2),__vite__mapDeps([156,1,2,3,4,5,47,29,48,27,15,6,7,17,49,37,50,25,26,51,10,11,12,13,30,21,102,103,23,38,39,157,158,159,31,160,161,19,20,162,8,9,14,16,18,22,24,28,32,33,34,35,36,40,41,42,43,44,45,46,163,62,63,64,65,66,67,68,69,70,71,72,73,78,56,164,83,77,61,165,166,167,168,169,170,59,60,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187]),import.meta.url)]);r(u,new d({map:{basemap:"streets-vector"},zoom:15,center:[-90.1928,38.6226]}),!0),e(u).ui.move("zoom","bottom-right");const[{default:C}]=await Promise.all([ze(()=>import("../chunks/D7TOvjcp.js").then(v=>v.L),__vite__mapDeps([188,5,1,2,3,4,10,11,12,13,7,45,164,21,159,23,6,31,160,20,189,190,191,65,187]),import.meta.url)]),w=new C({view:e(u)});e(u).ui.add(w,{position:"top-left"});const[{default:i}]=await Promise.all([ze(()=>import("../chunks/cUAizdnp.js"),__vite__mapDeps([192,1,2,3,4,21,6,5,7,159,23,11,12,31,160,10,13,193,25,26,27,69,64,194,111,40,41,37,15,17,42,110,115,195,114,196,197,19,20,198,122,123,124,28,85,86,29,87,88,62,63,65,45,49,50,66,67,68,14,16,70,71,72,73,81,89,90,91,94,125,126,127,51,128,129,56,130,131,132,133,134,135,136,137,138,84,92,93,95,199,200,201,202,203,168,204,205,206,46,207,187,208,209,210,211,212,213,214,179,215,216,166,172,217,218,219,220,183,221,222,185,190]),import.meta.url)]),c=new i({view:e(u)});e(u).ui.add(c,{position:"top-right"})}),be(()=>{e(u)&&e(p)&&e(u).ui.add(e(p),{position:"manual"})});var M=Vr(),y=h(M),L=b(y);{let d=S(()=>[f,V]);xr(L,{get commands(){return e(d)}})}$(y),je(y,d=>r(p,d),()=>e(p));var A=D(y,2);{var j=d=>{var C=Mr(),w=b(C);nr(w,{get mapView(){return e(u)}}),$(C),l(d,C)};z(A,d=>{e(u)&&d(j)})}l(P,M),ie()}export{ta as component};
