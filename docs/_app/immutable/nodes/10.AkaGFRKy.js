const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CSVIPV-Z.js","../chunks/DUlE1Kon.js","../chunks/BFGjv385.js","../chunks/DSdBzmdi.js","../chunks/DxH_hBwP.js","../chunks/PPVm8Dsz.js","../chunks/CdqyOKuv.js","../chunks/DfRz3K_A.js","../chunks/Bm7caEBo.js","../chunks/DisPfFm5.js","../chunks/BzQhUrN8.js","../chunks/Cc17QD5h.js","../chunks/uh6gjmpK.js","../chunks/Cd67kGb1.js","../chunks/Bu8LbX79.js","../chunks/DcH38EyK.js","../chunks/B8nonhNC.js","../chunks/BBa5Ksby.js","../chunks/zBqsFMnn.js","../chunks/CaqnSMi6.js","../chunks/sCcXte38.js","../chunks/BI67_pHU.js","../chunks/Cp_8tW2x.js","../chunks/CQjNUrwR.js","../chunks/BEA_VxVb.js","../chunks/Ci6C1k20.js","../chunks/bnayRBMH.js","../chunks/BOKUTFyJ.js","../chunks/BXAeIeBi.js","../chunks/CD2g8Juu.js","../chunks/Oe6SV2kF.js","../chunks/ikZjGqs5.js","../chunks/MtSiOt06.js","../chunks/C0wm8_Yw.js","../chunks/CFQCfeFO.js","../chunks/B1v7-87c.js","../chunks/CEVkfTgd.js","../chunks/J6jWJpvs.js","../chunks/BODnff4R.js","../chunks/Djp3mnm5.js","../chunks/CjadiZf0.js","../chunks/DjkR0zxu.js","../chunks/Br8rUiBs.js","../chunks/2ISwu1zN.js","../chunks/B87vTgcy.js","../chunks/D2Yxuq6P.js","../chunks/DD9DYTwn.js","../chunks/sd8OvKRi.js","../chunks/DmnoE05D.js","../chunks/Bui_4lHz.js","../chunks/DeckVo8k.js","../chunks/iG1wnc6C.js","../chunks/CgV2orsG.js","../chunks/CnalmBq0.js","../chunks/BrTgCvRV.js","../chunks/Ceg41VYx.js","../chunks/DvWg7eaT.js","../chunks/BJXfqnjN.js","../chunks/D14Jvju_.js","../chunks/D-57UJtx.js","../chunks/CAPEj8Cx.js","../chunks/CVwTD0fV.js","../chunks/D0NQgKcK.js","../chunks/b_fk785i.js","../chunks/DPJXGPFY.js","../chunks/C-CJOyzY.js","../chunks/BP4OB8lT.js","../chunks/q_b6UJoq.js","../chunks/sjfz1WYE.js","../chunks/CQ1KD0MB.js","../chunks/D5jpRriJ.js","../chunks/DvWyKjN_.js","../chunks/CSXZNpHb.js","../chunks/Bz2ALHBJ.js","../chunks/lWokueJ2.js","../chunks/DQecCNGY.js","../chunks/B4hi1Jh1.js","../chunks/dARmBYlp.js","../chunks/Bv7AoMPg.js","../chunks/CQzCk35G.js","../chunks/CzSz02z9.js","../chunks/VQkRg7Q-.js","../chunks/dJH6k6UL.js","../chunks/BIWwStHs.js","../chunks/DgIqTRow.js","../chunks/ClB7vY8t.js","../chunks/B57vubiS.js","../chunks/DK7tu6nz.js","../chunks/FvPJly2c.js","../chunks/CprQ0-zm.js","../chunks/Y8-7d-DN.js","../chunks/D4JmvjcN.js","../chunks/BvmwS9zW.js","../chunks/-iykUG6w.js","../chunks/l0ueOKN7.js","../chunks/CNZDyR7Q.js","../chunks/R1glNAcQ.js","../chunks/B3G-PwAA.js","../chunks/DuwZIA3o.js","../chunks/C3-hxTuw.js","../chunks/WBIG3CDM.js","../chunks/Cn30EQ8i.js","../chunks/C9SoQ3a0.js","../chunks/BKtwV4GZ.js","../chunks/iNvouxpq.js","../chunks/BA8mPeve.js","../chunks/CEPXXbfq.js","../chunks/B0By0VWJ.js","../chunks/BB9Oo-BD.js","../chunks/GKolV7NZ.js","../chunks/BAB5GhQ5.js","../chunks/CPc8fHiW.js","../chunks/BHFMIzj3.js","../chunks/CAnm2fw-.js","../chunks/SjkvCP0N.js","../chunks/ddR77hBF.js","../chunks/Df2jNZk7.js","../chunks/6Q854sDJ.js","../chunks/DeP0P-5x.js","../chunks/C9yIVy96.js","../chunks/DhzudQro.js","../chunks/B7DiT1Pd.js","../chunks/I_ue-w2G.js","../chunks/CGpFc7sv.js","../chunks/BaN4dDqR.js","../chunks/Cn1vmhQf.js","../chunks/DC4T6Ptu.js","../chunks/n__Nwz3z.js","../chunks/C9eBls0H.js","../chunks/Cp0qNGcE.js","../chunks/DjcuonZY.js","../chunks/Ce6-sqL1.js","../chunks/Cgc_BHpn.js","../chunks/XaXpG9zZ.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/BQKFBo9G.js","../chunks/BELp7PG8.js","../chunks/DPb6J-GU.js","../chunks/C8qJNYv1.js","../chunks/DeDrvwF9.js","../chunks/CFIHAfGj.js","../chunks/DoyMBUIC.js","../chunks/D9V7wSQz.js","../chunks/D2N4Kgi6.js","../chunks/DyrAxq_O.js","../chunks/BNEYiyjh.js","../chunks/CUxkSqAk.js","../chunks/2MGmNpsK.js","../chunks/BjSGBFKY.js","../chunks/DvKU1K2H.js","../chunks/BcBJ9TCl.js","../chunks/B_vJGzBB.js","../chunks/u5gByyAh.js","../chunks/DIuFmtHG.js","../chunks/BuGjRqRb.js","../chunks/CaYZrGFV.js","../chunks/CyzFLg49.js","../chunks/DjHAVuYa.js","../chunks/B3o8ME4Y.js","../chunks/BcFnCN9v.js","../chunks/BT212Icy.js","../assets/jsxFactory.CQED0rIl.css","../chunks/BfTDt07v.js","../chunks/B_F2oaks.js","../chunks/CHFp6N2U.js","../chunks/Cgb6qxNH.js","../chunks/7KSGTDwA.js","../chunks/DWQ4DDTW.js","../chunks/Bzb85Au4.js","../chunks/CaVKkSa6.js","../chunks/CqhmP5Wf.js","../chunks/BHDA5-eH.js","../chunks/B1N-tmtC.js","../chunks/DPp84Xbz.js","../chunks/DX9O6NLU.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/Bxxl7NsE.js","../chunks/OMM7yKVB.js","../chunks/DQOO6RKE.js","../chunks/CckC_upx.js","../chunks/Bi6C4OG6.js","../chunks/CXuogR47.js","../chunks/BTFiZ01f.js","../chunks/D-YQ4CHs.js","../chunks/ljivFxcH.js","../chunks/C_CdZhHo.js","../chunks/gqIXS9_O.js","../chunks/BQBvadb7.js","../chunks/CKhDoJii.js","../chunks/Caulfaw_.js","../chunks/BAtjbRqK.js","../chunks/BT3_6vQX.js","../chunks/DKzVzLpH.js","../chunks/BEQnBRaB.js","../chunks/BvOub3JO.js","../chunks/CWGl2bYv.js","../chunks/Ca-7ty7r.js","../chunks/DndJXGKg.js","../chunks/ypvuBaub.js","../chunks/C2g4lrCg.js","../chunks/CZw_cnq0.js","../chunks/D71z0FvY.js","../chunks/Bkx2kNjV.js","../chunks/B2xel-Uw.js","../chunks/BYhdBRWK.js","../chunks/8WtPGj6h.js","../chunks/CG7ZQ6BV.js","../chunks/ypcU6u8y.js","../chunks/DUowVffz.js","../chunks/BvER9tXK.js","../chunks/BiXJFJDW.js","../chunks/n_VqDs8R.js","../chunks/D5J0HRgs.js","../chunks/Bw68hAdJ.js","../chunks/BPTNpVpY.js","../chunks/C2y1nKdd.js","../chunks/CUzevAry.js","../chunks/C8zGwbjb.js","../chunks/DYadzJtd.js","../chunks/BN2vyTX-.js","../chunks/CxFjfwe1.js","../chunks/Cbfyo8tL.js","../chunks/DI5QB4t2.js","../chunks/DhFVmk4E.js","../chunks/D6DjEsAH.js","../chunks/dCrS7Wqq.js","../assets/component-utils.R4SXog4D.css","../chunks/CF0sTZpg.js","../chunks/BfsPW2bh.js","../chunks/GOizrh0l.js","../chunks/Be2V6wEE.js","../chunks/Dm4tN6Na.js","../chunks/B8nunW49.js","../chunks/DgYAzkgC.js","../chunks/HTOW8iPe.js","../chunks/AD2GcA0r.js","../chunks/C5IPdfsw.js","../chunks/CkkHWuE3.js","../chunks/DuIgqnlY.js","../chunks/C1_AgMSu.js","../chunks/DaQyK3nQ.js","../chunks/CRrk3Hur.js"])))=>i.map(i=>d[i]);
import{_ as xe}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as Xe,a as lt}from"../chunks/DFUKILGv.js";import{f as g,p as ue,c as x,n as it,r as b,a as de,g as e,aG as v,ar as a,a8 as O,u as S,X as be,U as N,av as Lt,o as Se,aZ as kt,a_ as Et,aM as Rt}from"../chunks/C1YmX2UH.js";import{c as k,a as d,f as h,t as Ae}from"../chunks/BMeCtLyR.js";import{l as zt,s as Pe,p as T,r as Ze,i as E}from"../chunks/MYJGKh80.js";import{b as De}from"../chunks/DHTNoGoN.js";import{s as Q}from"../chunks/DfAHVaxr.js";import{s as ut,e as Qe,i as Dt}from"../chunks/P1xUTngh.js";import{c as L}from"../chunks/CpUudvot.js";import{g as nt}from"../chunks/CWKS71Yf.js";import{a as Ft,s as Ot,b as Ut,d as jt}from"../chunks/CeBw7cM3.js";import{I as Wt,s as Nt,e as Tt,f as Kt,S as ot,g as dt,h as ct,i as ft}from"../chunks/CwUP6mZe.js";import{c as Ye}from"../chunks/c5jJKWzo.js";import"../chunks/69_IOA4Y.js";import{C as Ht}from"../chunks/CVwzUQOY.js";import{A as Gt,a as Bt,b as qt}from"../chunks/kclYbeaK.js";import{S as pt}from"../chunks/FxWU69XT.js";import{B as Jt}from"../chunks/B63z5rX-.js";import{I as Qt}from"../chunks/B9RZHzvF.js";import{s as st}from"../chunks/BFGjv385.js";import{p as Xt}from"../chunks/DfRz3K_A.js";import{j as Zt}from"../chunks/zBqsFMnn.js";import{a as Yt,b as mt}from"../chunks/RlMAHxPD.js";function er(w){return(Yt||mt)+w}function tr(w,l){const i=zt(l,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const c=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]];Wt(w,Pe({name:"command"},()=>i,{get iconNode(){return c},children:(f,C)=>{var r=k(),_=g(r);Nt(_,l,"default",{}),d(f,r)},$$slots:{default:!0}}))}var rr=h("<span><!></span>");function ar(w,l){ue(l,!0);let i=T(l,"ref",15,null),c=Ze(l,["$$slots","$$events","$$legacy","ref","class","children"]);var f=rr();Ft(f,r=>({"data-slot":"command-shortcut",class:r,...c}),[()=>Ye("text-muted-foreground ml-auto text-xs tracking-widest",l.class)]);var C=x(f);ut(C,()=>l.children??it),b(f),De(f,r=>i(r),()=>i()),d(w,f),de()}function nr(w,l){ue(l,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let i=Ze(l,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Qt(w,Pe({name:"arrow-left"},()=>i,{get iconNode(){return c},children:(f,C)=>{var r=k(),_=g(r);ut(_,()=>l.children??it),d(f,r)},$$slots:{default:!0}})),de()}var or=h('<div class="view svelte-1s3dmqi"></div>');function sr(w,l){ue(l,!0);const i=T(l,"mapView",7);let c=v(null);Xe(()=>{i().container=e(c)});var f=or();De(f,C=>a(c,C),()=>e(c)),d(w,f),de()}class lr{#r=v(null);#e=v(!1);#t=v(null);async fetchWebMaps(l){a(this.#e,!0),a(this.#t,null);try{console.log("[useFetchWebMaps] Fetching web maps from URL:",l);const i=await fetch(l);if(!i.ok)throw new Error(`Failed to fetch web maps: ${i.status} ${i.statusText}`);const c=await i.json();a(this.#r,c,!0)}catch(i){a(this.#t,i,!0)}finally{a(this.#e,!1)}}get response(){return e(this.#r)}get isLoading(){return e(this.#e)}get error(){return e(this.#t)}}var ir=h('<span class="m-0 ml-[-5px] inline-flex max-w-[10rem] items-center overflow-hidden rounded border border-border px-1 py-0.5 text-xs font-medium text-ellipsis whitespace-nowrap text-muted-foreground"> </span> <span aria-hidden="true" class="h-5 w-px bg-border"></span>',1),ur=h('<div class="flex h-9 items-center gap-2 border-b pl-2" data-slot="command-input-wrapper"><span class="flex h-full min-w-[1.25rem] shrink-0 items-center justify-center text-muted-foreground"><!></span> <!> <!></div>');function dr(w,l){ue(l,!0);let i=T(l,"ref",15,null),c=T(l,"value",15,""),f=T(l,"iconProps",19,()=>({})),C=Ze(l,["$$slots","$$events","$$legacy","ref","class","value","icon","iconProps","commandId"]);var r=ur(),_=x(r),R=x(_);{var y=m=>{const F=S(()=>l.icon);var $=k(),n=g($);L(n,()=>e(F),(u,p)=>{p(u,Pe(f))}),d(m,$)},I=m=>{tr(m,{class:"size-4 opacity-50"})};E(R,m=>{l.icon?m(y):m(I,!1)})}b(_);var M=O(_,2);{var U=m=>{var F=ir(),$=g(F),n=x($,!0);b($),be(2),N(()=>{Ot($,"title",l.commandId),Q(n,l.commandId)}),d(m,F)};E(M,m=>{l.commandId&&m(U)})}var P=O(M,2);{let m=S(()=>Ye("flex h-10 flex-1 rounded-md bg-transparent py-3 text-sm outline-hidden placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",l.class));L(P,()=>Tt,(F,$)=>{$(F,Pe({"data-slot":"command-input",get class(){return e(m)}},()=>C,{get ref(){return i()},set ref(n){i(n)},get value(){return c()},set value(n){c(n)}}))})}b(r),d(w,r),de()}function cr(w,l){ue(l,!0);const i=T(l,"disabled",3,!1);Jt(w,{class:"m-0 flex size-7 shrink-0 items-center justify-center rounded-md border-none bg-transparent p-0 text-muted-foreground opacity-50 shadow-none transition hover:bg-transparent hover:text-accent-foreground focus:outline-none focus-visible:border-transparent focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none active:ring-0 active:outline-none disabled:pointer-events-none disabled:opacity-50 has-[>svg]:px-0",onclick:()=>{i()||l.onPress?.()},"aria-label":"Return to command search",get disabled(){return i()},children:(c,f)=>{{let C=S(()=>`size-4 ${l.class}`.trim());nr(c,{get class(){return e(C)}})}},$$slots:{default:!0}}),de()}var fr=h('<span class="text-xs text-muted-foreground"> </span>'),pr=h('<div class="flex flex-col gap-0.5"><span class="text-sm leading-tight font-medium"> </span> <!></div> <!>',1),mr=h("<!> <!>",1),vr=h('<div class="px-4 pb-3"><!></div>'),_r=h("<!> <!>",1),gr=h('<div class="px-4 pb-3"><!></div>'),hr=h('<p class="text-sm text-muted-foreground">No panel registered for this command.</p>'),wr=h('<div class="pr-2 pb-2 pl-2"><!></div>'),yr=h("<!> <!> <!>",1),xr=h("<!> <!>",1),br=h("<div><!></div>");function Pr(w,l){ue(l,!0);let i=T(l,"ref",15,null),c=T(l,"commands",19,()=>[]),f=T(l,"placeholder",3,"Search commands..."),C=T(l,"emptyMessage",3,"No commands found."),r=v(null),_=v(null),R=v(null),y=v(null),I=v(null),M=v(null),U=v(""),P=v(!1),m=v(Lt(f())),F=v(null),$=!1,n=v(null),u=!1,p=null,V=null;const z=S(()=>{const t=new Map;for(const o of c())t.set(o.id,o);return Array.from(t.values())}),X=S(()=>{const t=new Map;for(const o of e(z)){const s=o.group??null,A=t.get(s);A?A.push(o):t.set(s,[o])}for(const[,o]of t)o.sort((s,A)=>s.name.localeCompare(A.name));return t});function oe(t,o=!1){o&&($=!0),a(U,t,!0)}function Fe(){a(F,null),a(m,f()),$=!1}Se(()=>{const t=e(F);if(t){if($){$=!1;return}t(e(U))}}),Se(()=>{e(r)||a(m,f())});function Z(){if(V)try{V()}catch(t){console.error("Failed to dispose command session",t)}V=null,a(R,null),a(y,null),Fe(),a(_,null)}function K(){e(r)&&(Z(),a(r,null),a(M,null),a(I,null),oe("",!0),a(P,!0))}function ve(){e(n)?.blur()}function se(t,o){if(!t.component)return null;const s=t.props;return s?{component:t.component,props:()=>s(o)}:{component:t.component}}function Y(t,o){const s=t.createSession?.(o);if(s){V=s.dispose??null,Object.prototype.hasOwnProperty.call(s,"input")?a(R,s.input??null,!0):a(R,null),Object.prototype.hasOwnProperty.call(s,"content")?a(y,s.content??null,!0):a(y,se(t,o),!0);return}V=null,a(R,null),a(y,se(t,o),!0)}function _e(t){const o=t.id;return{deactivate:()=>{!e(r)||e(r).id!==o||K()},isActive:s=>!e(r)||e(r).id!==o?!1:s?e(r).id===s:!0,setIsOpen:(s,A)=>{if(!e(r)||e(r).id!==o)return;if(s){u=!1,a(P,!0);return}const ee=A?.preserveActive??!0;Ie(ee)},setInputSurface:s=>{!e(r)||e(r).id!==o||a(R,s,!0)},setContentSurface:s=>{!e(r)||e(r).id!==o||a(y,s,!0)},getInputValue:()=>e(U),setInputValue:s=>{!e(r)||e(r).id!==o||oe(s,!0)},setInputHandler:s=>{if(!(!e(r)||e(r).id!==o)){if(a(F,s,!0),!s){$=!1;return}s(e(U))}},setPlaceholder:s=>{!e(r)||e(r).id!==o||a(m,s,!0)},resetPlaceholder:()=>{!e(r)||e(r).id!==o||a(m,f())}}}function $e(t){const o=e(_);if(!t)return o?{runtime:o}:{};if(!o)return{};const{props:s}=t;return s?{...typeof s=="function"?s(o):s,runtime:o}:{runtime:o}}function Ce(t){return`${t.name} ${t.description??""}`.trim()}async function Le(t){if(e(r)?.id===t.id){K();return}Z(),a(M,null),a(I,t.id,!0),a(P,!0),e(n)&&e(n).focus();const o=_e(t);a(_,o,!0),a(r,t,!0),Y(t,o);try{await t.execute(o)}catch(s){a(M,s instanceof Error?s:new Error("Failed to execute the command."),!0)}finally{a(I,null),oe("",!0)}}function Oe(t){const o=t.key.toLowerCase();if((t.metaKey||t.ctrlKey)&&o==="p"){if(t.preventDefault(),e(r)){K();return}e(n)&&e(n).focus();return}if(o==="escape"){if(e(r)){t.preventDefault(),K(),ve();return}e(P)&&(t.preventDefault(),a(P,!1),ve());return}if(!e(r))for(const A of e(z)){if(!A.shortcut)continue;const ee=A.shortcut.join(" ").toLowerCase(),H=[];if(t.metaKey&&H.push("âŒ˜"),t.ctrlKey&&H.push("Ctrl"),t.altKey&&H.push("Alt"),t.shiftKey&&H.push("Shift"),H.push(t.key.length===1?t.key.toUpperCase():t.key),H.join(" ").toLowerCase()===ee.toLowerCase()){t.preventDefault(),Le(A);break}}}function et(){a(P,!0)}function Ie(t=!1){u=t,a(P,!1)}function Ue(t){const o=p;if(!o)return;const s=t.target;s&&o.contains(s)||e(P)&&Ie(!!e(r))}Se(()=>{if(!e(P)){if(oe("",!0),!e(r)){u=!1;return}if(u){u=!1;return}Z(),a(r,null),a(M,null)}});var le=br();nt("keydown",kt,Oe),nt("pointerdown",Et,Ue);var je=x(le);L(je,()=>Kt,(t,o)=>{o(t,{children:(s,A)=>{var ee=xr(),H=g(ee);{let ce=S(()=>e(r)?e(r).inputPlaceholder??e(m):e(m)),ke=S(()=>e(r)?cr:void 0),We=S(()=>e(r)?{onPress:K,disabled:e(I)===e(r).id}:void 0),Ne=S(()=>e(r)?.id);dr(H,{get placeholder(){return e(ce)},onfocus:()=>et(),get icon(){return e(ke)},get iconProps(){return e(We)},get commandId(){return e(Ne)},get value(){return e(U)},set value(Ve){a(U,Ve,!0)},get ref(){return e(n)},set ref(Ve){a(n,Ve,!0)}})}var ge=O(H,2);{var Me=ce=>{var ke=k(),We=g(ke);{var Ne=he=>{ot(he,{children:(Ee,Te)=>{var Re=k(),ze=g(Re);L(ze,()=>dt,(Ke,He)=>{He(Ke,{children:(G,fe)=>{var W=mr(),ie=g(W);L(ie,()=>ct,(ae,j)=>{j(ae,{children:(B,te)=>{be();var q=Ae();N(()=>Q(q,C())),d(B,q)},$$slots:{default:!0}})});var pe=O(ie,2);Qe(pe,17,()=>Array.from(e(X).entries()),Dt,(ae,j)=>{var B=S(()=>Rt(e(j),2));let te=()=>e(B)[1];var q=k(),ne=g(q);Qe(ne,17,te,J=>J.id,(J,D)=>{var we=k(),me=g(we);{let vt=S(()=>Ce(e(D)));L(me,()=>ft,(_t,gt)=>{gt(_t,{get value(){return e(vt)},onclick:()=>Le(e(D)),children:(ht,kr)=>{var tt=pr(),Ge=g(tt),Be=x(Ge),wt=x(Be,!0);b(Be);var yt=O(Be,2);{var xt=re=>{var ye=fr(),qe=x(ye,!0);b(ye),N(()=>Q(qe,e(D).description)),d(re,ye)};E(yt,re=>{e(D).description&&re(xt)})}b(Ge);var bt=O(Ge,2);{var Pt=re=>{pt(re,{class:"ml-auto size-4 text-muted-foreground"})},$t=re=>{var ye=k(),qe=g(ye);{var Ct=Je=>{var rt=k(),It=g(rt);L(It,()=>ar,(Mt,Vt)=>{Vt(Mt,{children:(At,Er)=>{be();var at=Ae();N(St=>Q(at,St),[()=>e(D).shortcut?.join(" + ")]),d(At,at)},$$slots:{default:!0}})}),d(Je,rt)};E(qe,Je=>{e(D).shortcut?.length&&Je(Ct)},!0)}d(re,ye)};E(bt,re=>{e(I)===e(D).id?re(Pt):re($t,!1)})}N(()=>Q(wt,e(D).name)),d(ht,tt)},$$slots:{default:!0}})})}d(J,we)}),d(ae,q)}),d(G,W)},$$slots:{default:!0}})}),d(Ee,Re)},$$slots:{default:!0}})},Ve=he=>{var Ee=yr(),Te=g(Ee);{var Re=G=>{const fe=S(()=>e(R).component);var W=vr(),ie=x(W);{let pe=S(()=>$e(e(R)));L(ie,()=>e(fe),(ae,j)=>{j(ae,Pe(()=>e(pe)))})}b(W),d(G,W)};E(Te,G=>{e(R)&&G(Re)})}var ze=O(Te,2);{var Ke=G=>{var fe=gr(),W=x(fe);L(W,()=>Gt,(ie,pe)=>{pe(ie,{variant:"destructive",children:(ae,j)=>{var B=_r(),te=g(B);L(te,()=>Bt,(ne,J)=>{J(ne,{children:(D,we)=>{be();var me=Ae();N(()=>Q(me,`${e(r).name??""} failed`)),d(D,me)},$$slots:{default:!0}})});var q=O(te,2);L(q,()=>qt,(ne,J)=>{J(ne,{children:(D,we)=>{be();var me=Ae();N(()=>Q(me,e(M).message)),d(D,me)},$$slots:{default:!0}})}),d(ae,B)},$$slots:{default:!0}})}),b(fe),d(G,fe)};E(ze,G=>{e(M)&&G(Ke)})}var He=O(ze,2);ot(He,{children:(G,fe)=>{var W=wr(),ie=x(W);{var pe=j=>{const B=S(()=>e(y).component);var te=k(),q=g(te);{let ne=S(()=>$e(e(y)));L(q,()=>e(B),(J,D)=>{D(J,Pe(()=>e(ne)))})}d(j,te)},ae=j=>{var B=k(),te=g(B);L(te,()=>Ht,(q,ne)=>{ne(q,{class:"px-0",children:(J,D)=>{var we=hr();d(J,we)},$$slots:{default:!0}})}),d(j,B)};E(ie,j=>{e(y)?j(pe):j(ae,!1)})}b(W),d(G,W)},$$slots:{default:!0}}),d(he,Ee)};E(We,he=>{e(r)?he(Ve,!1):he(Ne)})}d(ce,ke)};E(ge,ce=>{e(P)&&ce(Me)})}d(s,ee)},$$slots:{default:!0}})}),b(le),De(le,t=>p=t,()=>p),De(le,t=>i(t),()=>i()),N(t=>jt(le,1,t),[()=>Ut(Ye("space-y-4",l.class))]),d(w,le),de()}var $r=h('<div class="error-message svelte-11six79"><p class="text-sm text-red-600"> </p></div>'),Cr=h('<div class="flex items-center gap-2"><!> <span class="title-text w-full font-medium text-foreground svelte-11six79"> </span></div>'),Ir=h('<span class="description-text text-xs text-gray-500 svelte-11six79"> </span>'),Mr=h('<div class="flex w-full min-w-0 flex-col gap-0.5"><span class="title-text font-medium text-foreground svelte-11six79"> </span> <!></div>'),Vr=h('<div class="item-container svelte-11six79"><!> <!></div>');function Ar(w,l){ue(l,!0);const i=T(l,"mapView",7),c=T(l,"runtime",3,null),f=new lr;let C=v(null),r=v(null),_=v("");const R=S(()=>{const n=f.response?.results??[],u=e(_).trim().toLowerCase();return u?n.filter(p=>{const V=typeof p?.title=="string"?p.title.toLowerCase():"",z=typeof p?.description=="string"?p.description.toLowerCase():"";return V.includes(u)||z.includes(u)}):n});Xe(async()=>{const n=er("/maps-web-map.json");await f.fetchWebMaps(n)});let y=null,I=null,M=l.inputPlaceholder??"Search...";Se(()=>{const n=c(),u=l.inputPlaceholder??"Search...";if(!n){I?.(),I=null,y=null,a(_,""),M=u;return}if(n===y){u!==M&&(n.setPlaceholder(u),M=u);return}I?.(),I=null,y=null,M=u;const p=z=>{a(_,z,!0)};n.setPlaceholder(u),n.setInputHandler(p);const V=n.getInputValue();a(_,V,!0),V&&(n.setInputValue(""),a(_,"")),I=()=>{n.setInputHandler(null),n.resetPlaceholder(),n.setInputValue(""),y===n&&(y=null),a(_,"")},y=n}),lt(()=>{I?.(),I=null,y=null});async function U(n){if(!i()){console.error("MapView is not initialized"),a(r,"MapView is not ready. Please wait and try again.");return}a(C,n,!0),a(r,null);try{console.log(`Loading web map with ID: ${n}`);const u="https://nercdsh.dev.azure.manchester.ac.uk/portal";st.portalUrl=u,console.log("Portal URL configured:",st.portalUrl);const{addProxyRule:p}=Xt;console.log("Adding proxy rule for portal traffic"),p({urlPrefix:"https://nercdsh.dev.azure.manchester.ac.uk",proxyUrl:`${mt}/proxy/Java/proxy.jsp`});const[{default:V}]=await Promise.all([xe(()=>import("../chunks/CSVIPV-Z.js").then(oe=>oe.W),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156]),import.meta.url)]),z=new V({portalItem:{id:n,portal:{url:u}}});await z.load(),console.log("Web map loaded successfully"),console.log("Applying web map to MapView",i().ui),i().map=z,console.log("Web map applied to MapView"),await Zt(()=>i().ready),console.log("MapView updated with new web map");const X=z.initialViewProperties?.viewpoint?.targetGeometry;X&&(console.log("Navigating to web map initial viewpoint"),await i().goTo(X),console.log("MapView navigated to web map initial viewpoint")),c()?.setIsOpen(!1)}catch(u){console.error("Error loading web map:",u),a(r,u instanceof Error?u.message:"Failed to load web map",!0)}finally{a(C,null)}}var P=Vr(),m=x(P);{var F=n=>{var u=$r(),p=x(u),V=x(p,!0);b(p),b(u),N(()=>Q(V,e(r))),d(n,u)};E(m,n=>{e(r)&&n(F)})}var $=O(m,2);L($,()=>dt,(n,u)=>{u(n,{children:(p,V)=>{var z=k(),X=g(z);{var oe=Z=>{var K=k(),ve=g(K);L(ve,()=>ct,(se,Y)=>{Y(se,{children:(_e,$e)=>{be();var Ce=Ae("No web maps match your search.");d(_e,Ce)},$$slots:{default:!0}})}),d(Z,K)},Fe=Z=>{var K=k(),ve=g(K);Qe(ve,17,()=>e(R),se=>se.id,(se,Y)=>{var _e=k(),$e=g(_e);L($e,()=>ft,(Ce,Le)=>{Le(Ce,{onclick:()=>U(e(Y).id),children:(Oe,et)=>{var Ie=k(),Ue=g(Ie);{var le=t=>{var o=Cr(),s=x(o);pt(s,{class:"size-4"});var A=O(s,2),ee=x(A);b(A),b(o),N(()=>Q(ee,`Loading ${e(Y).title??"Untitled web map"??""}...`)),d(t,o)},je=t=>{var o=Mr(),s=x(o),A=x(s,!0);b(s);var ee=O(s,2);{var H=ge=>{var Me=Ir(),ce=x(Me,!0);b(Me),N(()=>Q(ce,e(Y).description)),d(ge,Me)};E(ee,ge=>{e(Y).description&&ge(H)})}b(o),N(()=>Q(A,e(Y).title??"Untitled web map")),d(t,o)};E(Ue,t=>{e(C)===e(Y).id?t(le):t(je,!1)})}d(Oe,Ie)},$$slots:{default:!0}})}),d(se,_e)}),d(Z,K)};E(X,Z=>{e(R).length===0?Z(oe):Z(Fe,!1)})}d(p,z)},$$slots:{default:!0}})}),b(P),d(w,P),de()}var Sr=h('<div class="map-layout svelte-10vgo84"><!></div>'),Lr=h("<!> <arcgis-layer-list></arcgis-layer-list> <!>",3);function na(w,l){ue(l,!0);let i=v(null),c=v(null),f=v(!1),C=v(null),r=v(null),_=v(null);Xe(async()=>{await R();const[{default:n}]=await Promise.all([xe(()=>import("../chunks/CyzFLg49.js").then(X=>X.a2),__vite__mapDeps([157,1,2,3,4,5,42,43,29,44,26,6,7,45,36,37,46,24,25,47,10,11,12,13,27,18,76,77,21,158,57,58,59,28,60,61,62,63,64,14,19,65,66,67,68,69,70,38,159,160,161,30,150,162,163,16,17,164,8,9,15,20,22,23,31,32,33,34,35,39,40,41,96,51,165,94,74,56,166,167,168,169,54,55,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185]),import.meta.url)]);a(i,new n({map:{basemap:"gray"},zoom:15,center:[-2.231774828836059,53.46531847221502],background:{color:[207,211,212]}}),!0),e(i).ui.move("zoom","bottom-right");const[{default:u}]=await Promise.all([xe(()=>import("../chunks/ljivFxcH.js").then(X=>X.L),__vite__mapDeps([186,5,1,2,3,4,10,11,12,13,7,165,18,161,21,6,30,150,162,17,187,188,189,60,185]),import.meta.url)]),p=new u({view:e(i)});e(i).ui.add(p,{position:"top-left"});const[{default:V}]=await Promise.all([xe(()=>import("../chunks/CKhDoJii.js"),__vite__mapDeps([190,1,2,3,4,18,6,5,7,161,21,11,12,30,150,162,10,13,191,24,25,26,64,59,192,85,39,40,37,89,193,88,194,195,16,17,196,123,124,125,28,102,103,29,104,105,57,58,60,45,36,46,61,62,63,14,19,65,66,67,68,69,70,99,106,107,108,109,112,126,127,128,47,129,130,51,131,132,133,134,135,136,137,138,101,110,111,113,197,198,199,200,84,201,167,202,203,185,204,205,206,207,208,209,210,211,212,213,214,215,216,217,178,170,218,219,220,221,181,222,223,224,183,184,188]),import.meta.url)]),z=new V({view:e(i)});e(i).ui.add(z,{position:"top-right"}),a(r,y(),!0),a(_,I(),!0)});async function R(){await xe(()=>import("../chunks/DhFVmk4E.js"),__vite__mapDeps([225,226,161,1,2,3,4,21,11,12,6,5,7,18,30,150,162,227,184,13,228,186,10,165,17,187,188,189,60,185]),import.meta.url),await xe(()=>import("../chunks/CF0sTZpg.js"),__vite__mapDeps([229,230,161,1,2,3,4,21,11,12,6,5,7,18,30,150,162,231,232,233,234,235,236,237,227,184,238,239,240,241,242,243,226,13,228,157,42,43,29,44,26,45,36,37,46,24,25,47,10,27,76,77,158,57,58,59,28,60,61,62,63,64,14,19,65,66,67,68,69,70,38,159,160,163,16,17,164,8,9,15,20,22,23,31,32,33,34,35,39,40,41,96,51,165,94,74,56,166,167,168,169,54,55,170,171,172,173,174,175,176,177,178,179,180,181,182,183,185,0,48,49,50,52,53,71,72,73,75,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,95,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156]),import.meta.url)}Se(()=>{if(e(f)||!e(i)||!e(c))return;const n=e(i),u=e(c);n.ui.add(u,{position:"manual"}),a(f,!0)}),lt(()=>{a(r,null),a(_,null),e(i)&&e(i).destroy()});function y(){const n={id:"add-web-map",name:"Add web map",description:"Fetch and display our web maps.",group:"Maps",shortcut:["Ctrl","M"],inputPlaceholder:"Search web maps...",execute:async u=>{a(C,"show-web-maps")},component:Ar,props:u=>({mapView:e(i),inputPlaceholder:n.inputPlaceholder})};return n}function I(){return{id:"add-layer",name:"Add layers",description:"Fetch and display our layers.",group:"Maps",shortcut:["Ctrl","L"],execute:async n=>{}}}var M=Lr(),U=g(M);{var P=n=>{{let u=S(()=>[e(r),e(_)]);Pr(n,{class:"position-absolute top-3 left-1/2 z-1 -translate-x-1/2 transform",get commands(){return e(u)},get ref(){return e(c)},set ref(p){a(c,p,!0)}})}};E(U,n=>{e(r)&&e(_)&&n(P)})}var m=O(U,2),F=O(m,2);{var $=n=>{var u=Sr(),p=x(u);sr(p,{get mapView(){return e(i)}}),b(u),d(n,u)};E(F,n=>{e(i)&&n($)})}d(w,M),de()}export{na as component};
