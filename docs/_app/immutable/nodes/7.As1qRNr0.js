const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/h5rW6lAS.js","../chunks/DwWpeHsS.js","../chunks/BiKLiV0b.js","../chunks/PPVm8Dsz.js","../chunks/BfMV86KQ.js","../chunks/BUpj17sD.js","../chunks/mvO4rAvm.js","../chunks/BFkxbxSE.js","../chunks/Db91rTNV.js","../chunks/CNI1bPWi.js","../chunks/Cp_8tW2x.js","../chunks/BW9c9SrU.js","../chunks/Y_0EfhRu.js","../chunks/bnayRBMH.js","../chunks/JSgpbLKx.js","../chunks/v5xyD8FI.js","../chunks/BT4JRnHr.js","../chunks/D2feDspf.js","../chunks/CPLN7muT.js","../chunks/C0wm8_Yw.js","../chunks/C0Q15jgo.js","../chunks/idjzkL-p.js","../chunks/D7TN9t_q.js","../chunks/Dm66KbFf.js","../chunks/CH2_fMSn.js","../chunks/DP-0fjQN.js","../chunks/8JOOWlUE.js","../chunks/DmtPipHG.js","../chunks/B87vTgcy.js","../chunks/CbKIfN8e.js","../chunks/DdbdneQ1.js","../chunks/BV8-ngCo.js","../chunks/BxzdRo61.js","../chunks/BdDvN8O6.js","../chunks/DYAvFwNf.js","../chunks/BVzLLi1N.js","../chunks/BawRJkAp.js","../chunks/DOBtub6T.js","../assets/index.CQED0rIl.css","../chunks/in6aGWsR.js","../chunks/CgRsZskV.js","../chunks/B5GhfNyB.js","../chunks/Cgb6qxNH.js","../chunks/D30EvcMW.js","../chunks/E6bx-lsJ.js","../chunks/jrtQMiTD.js","../chunks/8hNj00IL.js","../chunks/BauKPgXA.js","../chunks/CaVKkSa6.js","../chunks/CT-uuzXp.js","../chunks/fFYBqOqn.js","../chunks/B1N-tmtC.js","../chunks/DEfNR1C0.js","../chunks/CtljFrUl.js","../chunks/D-qJO60r.js","../chunks/QQC62dOK.js","../chunks/Bxxl7NsE.js","../chunks/DNogqiqR.js","../chunks/DQOO6RKE.js","../chunks/j00zX3Hz.js","../chunks/Bi6C4OG6.js","../chunks/C7e3Z5XT.js","../chunks/D-YQ4CHs.js","../chunks/COf4WTrX.js","../chunks/O7sg2ysZ.js","../chunks/rIJyvhvt.js","../chunks/Dc261vxq.js","../chunks/CC5XFA8H.js","../chunks/D-fXJnCB.js","../chunks/B4oxan5h.js","../chunks/CEhj4l8G.js","../chunks/D_bKRBrk.js","../chunks/BvwLokzg.js","../chunks/6vsZKnZ9.js","../chunks/7VNfS1TG.js","../chunks/DP5d1tPL.js","../chunks/D-LmNXBe.js","../chunks/B0qK9XMn.js","../chunks/Dci9kdnZ.js","../chunks/CF39WpqH.js","../chunks/BAzr6Eo0.js","../chunks/FTzM2Tyd.js","../chunks/C61-NiK_.js","../chunks/BWeyrF54.js","../chunks/Cx8JFOfk.js","../chunks/BmgeYasw.js","../chunks/DLOQEY_Z.js","../chunks/91llm6te.js","../chunks/D31seSHD.js","../chunks/DH0im0Cr.js","../chunks/NIvIaQ85.js","../chunks/qyF9FwQ9.js","../chunks/XI-Li77m.js","../chunks/Bdg0_NLM.js","../chunks/ShBCB_ow.js","../chunks/Df_x8s9w.js","../chunks/O7OdySC2.js","../chunks/UusjRatb.js","../chunks/BTOnRfOV.js","../chunks/CaYZrGFV.js"])))=>i.map(i=>d[i]);
import{_ as Ar}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{o as er,a as Ea}from"../chunks/BW702uPa.js";import{Q as Ms,E as Fs,b9 as Rs,ba as Ns,y as Ls,m as On,bb as Bs,bc as zs,bd as js,W as Da,at as Vs,A as qs,n as De,p as ge,a5 as D,a as me,t as a,aa as K,c as ee,r as Q,a9 as F,a6 as ve,a7 as re,u as $e,a8 as Ze,R as at,b6 as Ks,b7 as Qo,b8 as Hs,V as en,o as Oa,aJ as vi}from"../chunks/BjFLI01z.js";import{p as bn,d as V,a as m,f as X,t as tn,e as Fr}from"../chunks/DAMOoDui.js";import{p as U,i as $,r as Be,s as Ke,l as Kn}from"../chunks/Ck_Twk2V.js";import{c as pe}from"../chunks/BM3AUTZE.js";import{b as $t}from"../chunks/hODufui9.js";import{b as Us,s as qt}from"../chunks/C3bMgyuU.js";import{a as zt,d as $n,f as pn,b as an,s as St,S as Gs,C as Ws}from"../chunks/BCRv6d1m.js";import{a as to,C as Ys}from"../chunks/nTAcCVyB.js";import{C as no}from"../chunks/KBMCT243.js";import{s as xe,e as nn,i as tr}from"../chunks/DoCgVQpV.js";import{o as Mn,g as Ma,e as Rr}from"../chunks/esl4IHED.js";import{c as fr,B as sn,b as Js}from"../chunks/DZaSAE_7.js";import{m as wn,b as Fe,n as hn,C as Nr,D as Qs,h as Rn,j as hr,w as Tr,l as Fn,k as ur,H as Fa,S as fn,I as Ra,y as gi}from"../chunks/Boioc3s7.js";import{I as In,T as Xs}from"../chunks/DxXRo6I4.js";import{j as Zs,I as $s,e as el,D as tl,c as nl,d as rl,X as il,f as ol,g as al,a as sl,b as ll,C as cl,M as ul,h as dl}from"../chunks/r2JBQGsi.js";import{I as Hn,s as Un,S as fl}from"../chunks/CNI_3E8R.js";import{S as hl,C as vl,d as gl}from"../chunks/BapmKZ94.js";import{c as ml,g as pl}from"../chunks/Cpj98o6Y.js";import"../chunks/Clywu22t.js";import{b as yl}from"../chunks/wVizKgRU.js";import"../chunks/B17Q6ahh.js";import"../chunks/69_IOA4Y.js";import{j as ci,s as bl,i as wl,k as _l,a as Sl,b as xl,c as kl,d as Cl}from"../chunks/CAoMU6KQ.js";import{b as Il}from"../chunks/COf4WTrX.js";import Pl from"../chunks/CNI1bPWi.js";import{C as Xo}from"../chunks/DwWpeHsS.js";import{bU as Al}from"../chunks/BfMV86KQ.js";import{h as Er}from"../chunks/t4nfeuT1.js";import{c as Wt}from"../chunks/DlBIu_vD.js";import{b as Tl,R as Na,P as El,C as Dl}from"../chunks/ZLC3qDPO.js";import{h as La,S as ro,n as io}from"../chunks/O4iNFm3G.js";import{i as Ba}from"../chunks/DFtDaNKb.js";import{b as Cn,M as Ol,L as za,A as Ml,a as Fl,S as Rl}from"../chunks/9Wz90BE-.js";import{b as Zo}from"../chunks/Db91rTNV.js";import"../chunks/D0U14gq-.js";import{a as Nl}from"../chunks/BUpj17sD.js";import{C as Ll,a as $o,S as Bl}from"../chunks/aP47lXW6.js";import{z as ea}from"../chunks/O7sg2ysZ.js";import"../chunks/bnayRBMH.js";import"../chunks/CEhj4l8G.js";import"../chunks/D_bKRBrk.js";import"../chunks/CbKIfN8e.js";import"../chunks/BV8-ngCo.js";import"../chunks/6vsZKnZ9.js";import{j as ta}from"../chunks/Cx8JFOfk.js";import{p as na}from"../chunks/BvwLokzg.js";import{a as ra,m as ia}from"../chunks/DdbdneQ1.js";import{u as ni}from"../chunks/Y_0EfhRu.js";const zl=()=>performance.now(),Dn={tick:u=>requestAnimationFrame(u),now:()=>zl(),tasks:new Set};function ja(){const u=Dn.now();Dn.tasks.forEach(e=>{e.c(u)||(Dn.tasks.delete(e),e.f())}),Dn.tasks.size!==0&&Dn.tick(ja)}function jl(u){let e;return Dn.tasks.size===0&&Dn.tick(ja),{promise:new Promise(r=>{Dn.tasks.add(e={c:u,f:r})}),abort(){Dn.tasks.delete(e)}}}function ri(u,e){Da(()=>{u.dispatchEvent(new CustomEvent(e))})}function Vl(u){if(u==="float")return"cssFloat";if(u==="offset")return"cssOffset";if(u.startsWith("--"))return u;const e=u.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function oa(u){const e={},r=u.split(";");for(const o of r){const[l,h]=o.split(":");if(!l||h===void 0)break;const d=Vl(l.trim());e[d]=h.trim()}return e}const ql=u=>u;function ui(u,e,r,o){var l=(u&zs)!==0,h=(u&js)!==0,d=l&&h,g=(u&Bs)!==0,w=d?"both":l?"in":"out",y,x=e.inert,B=e.style.overflow,A,M;function C(){return Da(()=>y??=r()(e,o?.()??{},{direction:w}))}var R={is_global:g,in(){if(e.inert=x,!l){M?.abort(),M?.reset?.();return}h||A?.abort(),ri(e,"introstart"),A=Wi(e,C(),M,1,()=>{ri(e,"introend"),A?.abort(),A=y=void 0,e.style.overflow=B})},out(H){if(!h){H?.(),y=void 0;return}e.inert=!0,ri(e,"outrostart"),M=Wi(e,C(),A,0,()=>{ri(e,"outroend"),H?.()})},stop:()=>{A?.abort(),M?.abort()}},q=Ms;if((q.transitions??=[]).push(R),l&&Us){var N=g;if(!N){for(var z=q.parent;z&&(z.f&Fs)!==0;)for(;(z=z.parent)&&(z.f&Rs)===0;);N=!z||(z.f&Ns)!==0}N&&Ls(()=>{On(()=>R.in())})}}function Wi(u,e,r,o,l){var h=o===1;if(Vs(e)){var d,g=!1;return qs(()=>{if(!g){var q=e({direction:h?"in":"out"});d=Wi(u,q,r,o,l)}}),{abort:()=>{g=!0,d?.abort()},deactivate:()=>d.deactivate(),reset:()=>d.reset(),t:()=>d.t()}}if(r?.deactivate(),!e?.duration)return l(),{abort:De,deactivate:De,reset:De,t:()=>o};const{delay:w=0,css:y,tick:x,easing:B=ql}=e;var A=[];if(h&&r===void 0&&(x&&x(0,1),y)){var M=oa(y(0,1));A.push(M,M)}var C=()=>1-o,R=u.animate(A,{duration:w,fill:"forwards"});return R.onfinish=()=>{R.cancel();var q=r?.t()??1-o;r?.abort();var N=o-q,z=e.duration*Math.abs(N),H=[];if(z>0){var J=!1;if(y)for(var Z=Math.ceil(z/16.666666666666668),W=0;W<=Z;W+=1){var oe=q+N*B(W/Z),be=oa(y(oe,1-oe));H.push(be),J||=be.overflow==="hidden"}J&&(u.style.overflow="hidden"),C=()=>{var Ie=R.currentTime;return q+N*B(Ie/z)},x&&jl(()=>{if(R.playState!=="running")return!1;var Ie=C();return x(Ie,1-Ie),!0})}R=u.animate(H,{duration:z,fill:"forwards"}),R.onfinish=()=>{C=()=>o,x?.(o,1-o),l()}},{abort:()=>{R&&(R.cancel(),R.effect=null,R.onfinish=De)},deactivate:()=>{l=De},reset:()=>{o===0&&x?.(1,0)},t:()=>C()}}var Kl=X("<button><!></button>");function Hl(u,e){const r=bn();ge(e,!0);let o=U(e,"id",19,()=>wn(r)),l=U(e,"ref",15,null),h=U(e,"disabled",3,!1),d=Be(e,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const g=Zs.create({id:Fe(()=>o()),ref:Fe(()=>l(),M=>l(M)),disabled:Fe(()=>!!h())}),w=K(()=>hn(d,g.props));var y=V(),x=D(y);{var B=M=>{var C=V(),R=D(C);xe(R,()=>e.child,()=>({props:a(w)})),m(M,C)},A=M=>{var C=Kl();zt(C,()=>({...a(w)}));var R=ee(C);xe(R,()=>e.children??De),Q(C),m(M,C)};$(x,M=>{e.child?M(B):M(A,!1)})}m(u,y),me()}const Ul=hr({component:"avatar",parts:["root","image","fallback"]}),Gl=new Nr("Avatar.Root");class oo{static create(e){return Gl.set(new oo(e))}opts;domContext;attachment;constructor(e){this.opts=e,this.domContext=new Qs(this.opts.ref),this.loadImage=this.loadImage.bind(this),this.attachment=Rn(this.opts.ref)}loadImage(e,r,o){if(this.opts.loadingStatus.current==="loaded")return;let l;const h=new Image;return h.src=e,r!==void 0&&(h.crossOrigin=r),o&&(h.referrerPolicy=o),this.opts.loadingStatus.current="loading",h.onload=()=>{l=this.domContext.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},h.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{l&&this.domContext.clearTimeout(l)}}#e=K(()=>({id:this.opts.id.current,[Ul.root]:"","data-status":this.opts.loadingStatus.current,...this.attachment}));get props(){return a(this.#e)}set props(e){F(this.#e,e)}}var Wl=X("<div><!></div>");function Yl(u,e){const r=bn();ge(e,!0);let o=U(e,"delayMs",3,0),l=U(e,"loadingStatus",15,"loading"),h=U(e,"id",19,()=>wn(r)),d=U(e,"ref",15,null),g=Be(e,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const w=oo.create({delayMs:Fe(()=>o()),loadingStatus:Fe(()=>l(),C=>{l()!==C&&(l(C),e.onLoadingStatusChange?.(C))}),id:Fe(()=>h()),ref:Fe(()=>d(),C=>d(C))}),y=K(()=>hn(g,w.props));var x=V(),B=D(x);{var A=C=>{var R=V(),q=D(R);xe(q,()=>e.child,()=>({props:a(y)})),m(C,R)},M=C=>{var R=Wl();zt(R,()=>({...a(y)}));var q=ee(R);xe(q,()=>e.children??De),Q(R),m(C,R)};$(B,C=>{e.child?C(A):C(M,!1)})}m(u,x),me()}const Jl=hr({component:"checkbox",parts:["root","group","group-label","input"]}),Ql=new Nr("Checkbox.Group"),Va=new Nr("Checkbox.Root");class ao{static create(e,r=null){return Va.set(new ao(e,r))}opts;group;#e=K(()=>this.group&&this.group.opts.name.current?this.group.opts.name.current:this.opts.name.current);get trueName(){return a(this.#e)}set trueName(e){F(this.#e,e)}#t=K(()=>this.group&&this.group.opts.required.current?!0:this.opts.required.current);get trueRequired(){return a(this.#t)}set trueRequired(e){F(this.#t,e)}#n=K(()=>this.group&&this.group.opts.disabled.current?!0:this.opts.disabled.current);get trueDisabled(){return a(this.#n)}set trueDisabled(e){F(this.#n,e)}#i=K(()=>this.group&&this.group.opts.readonly.current?!0:this.opts.readonly.current);get trueReadonly(){return a(this.#i)}set trueReadonly(e){F(this.#i,e)}attachment;constructor(e,r){this.opts=e,this.group=r,this.attachment=Rn(this.opts.ref),this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),Tr.pre([()=>ci(this.group?.opts.value.current),()=>this.opts.value.current],([o,l])=>{!o||!l||(this.opts.checked.current=o.includes(l))}),Tr.pre(()=>this.opts.checked.current,o=>{this.group&&(o?this.group?.addValue(this.opts.value.current):this.group?.removeValue(this.opts.value.current))})}onkeydown(e){this.trueDisabled||this.trueReadonly||(e.key===La&&e.preventDefault(),e.key===ro&&(e.preventDefault(),this.#r()))}#r(){this.opts.indeterminate.current?(this.opts.indeterminate.current=!1,this.opts.checked.current=!0):this.opts.checked.current=!this.opts.checked.current}onclick(e){if(!(this.trueDisabled||this.trueReadonly)){if(this.opts.type.current==="submit"){this.#r();return}e.preventDefault(),this.#r()}}#o=K(()=>({checked:this.opts.checked.current,indeterminate:this.opts.indeterminate.current}));get snippetProps(){return a(this.#o)}set snippetProps(e){F(this.#o,e)}#a=K(()=>({id:this.opts.id.current,role:"checkbox",type:this.opts.type.current,disabled:this.trueDisabled,"aria-checked":Fa(this.opts.checked.current,this.opts.indeterminate.current),"aria-required":ur(this.trueRequired),"aria-readonly":ur(this.trueReadonly),"data-disabled":Fn(this.trueDisabled),"data-readonly":Fn(this.trueReadonly),"data-state":Xl(this.opts.checked.current,this.opts.indeterminate.current),[Jl.root]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return a(this.#a)}set props(e){F(this.#a,e)}}class so{static create(){return new so(Va.get())}root;#e=K(()=>this.root.group?!!(this.root.opts.value.current!==void 0&&this.root.group.opts.value.current.includes(this.root.opts.value.current)):this.root.opts.checked.current);get trueChecked(){return a(this.#e)}set trueChecked(e){F(this.#e,e)}#t=K(()=>!!this.root.trueName);get shouldRender(){return a(this.#t)}set shouldRender(e){F(this.#t,e)}constructor(e){this.root=e,this.onfocus=this.onfocus.bind(this)}onfocus(e){Tl(this.root.opts.ref.current)&&this.root.opts.ref.current.focus()}#n=K(()=>({type:"checkbox",checked:this.root.opts.checked.current===!0,disabled:this.root.trueDisabled,required:this.root.trueRequired,name:this.root.trueName,value:this.root.opts.value.current,readonly:this.root.trueReadonly,onfocus:this.onfocus}));get props(){return a(this.#n)}set props(e){F(this.#n,e)}}function Xl(u,e){return e?"indeterminate":u?"checked":"unchecked"}var Zl=X("<input/>"),$l=X("<input/>");function qa(u,e){ge(e,!0);let r=U(e,"value",15),o=Be(e,["$$slots","$$events","$$legacy","value"]);const l=K(()=>hn(o,{"aria-hidden":"true",tabindex:-1,style:bl}));var h=V(),d=D(h);{var g=y=>{var x=Zl();zt(x,()=>({...a(l),value:r()}),void 0,void 0,void 0,!0),m(y,x)},w=y=>{var x=$l();zt(x,()=>({...a(l)}),void 0,void 0,void 0,!0),wl(x,r),m(y,x)};$(d,y=>{a(l).type==="checkbox"?y(g):y(w,!1)})}m(u,h),me()}function ec(u,e){ge(e,!1);const r=so.create();Ba();var o=V(),l=D(o);{var h=d=>{qa(d,Ke(()=>r.props))};$(l,d=>{r.shouldRender&&d(h)})}m(u,o),me()}var tc=X("<button><!></button>"),nc=X("<!> <!>",1);function Ka(u,e){const r=bn();ge(e,!0);let o=U(e,"checked",15,!1),l=U(e,"ref",15,null),h=U(e,"disabled",3,!1),d=U(e,"required",3,!1),g=U(e,"name",3,void 0),w=U(e,"value",3,"on"),y=U(e,"id",19,()=>wn(r)),x=U(e,"indeterminate",15,!1),B=U(e,"type",3,"button"),A=Be(e,["$$slots","$$events","$$legacy","checked","ref","onCheckedChange","children","disabled","required","name","value","id","indeterminate","onIndeterminateChange","child","type","readonly"]);const M=Ql.getOr(null);M&&w()&&(M.opts.value.current.includes(w())?o(!0):o(!1)),Tr.pre(()=>w(),()=>{M&&w()&&(M.opts.value.current.includes(w())?o(!0):o(!1))});const C=ao.create({checked:Fe(()=>o(),Z=>{o(Z),e.onCheckedChange?.(Z)}),disabled:Fe(()=>h()??!1),required:Fe(()=>d()),name:Fe(()=>g()),value:Fe(()=>w()),id:Fe(()=>y()),ref:Fe(()=>l(),Z=>l(Z)),indeterminate:Fe(()=>x(),Z=>{x(Z),e.onIndeterminateChange?.(Z)}),type:Fe(()=>B()),readonly:Fe(()=>!!e.readonly)},M),R=K(()=>hn({...A},C.props));var q=nc(),N=D(q);{var z=Z=>{var W=V(),oe=D(W);{let be=K(()=>({props:a(R),...C.snippetProps}));xe(oe,()=>e.child,()=>a(be))}m(Z,W)},H=Z=>{var W=tc();zt(W,()=>({...a(R)}));var oe=ee(W);xe(oe,()=>e.children??De,()=>C.snippetProps),Q(W),m(Z,W)};$(N,Z=>{e.child?Z(z):Z(H,!1)})}var J=ve(N,2);ec(J,{}),m(u,q),me()}var rc=X("<div><!></div>");function ic(u,e){const r=bn();ge(e,!0);let o=U(e,"id",19,()=>wn(r)),l=U(e,"ref",15,null),h=U(e,"forceMount",3,!1),d=Be(e,["$$slots","$$events","$$legacy","id","ref","forceMount","children","child"]);const g=_l.create({id:Fe(()=>o()),ref:Fe(()=>l(),A=>l(A)),forceMount:Fe(()=>h())}),w=K(()=>hn(d,g.props));var y=V(),x=D(y);{var B=A=>{var M=V(),C=D(M);{var R=N=>{var z=V(),H=D(z);xe(H,()=>e.child,()=>({props:a(w)})),m(N,z)},q=N=>{var z=rc();zt(z,()=>({...a(w)}));var H=ee(z);xe(H,()=>e.children??De),Q(z),m(N,z)};$(C,N=>{e.child?N(R):N(q,!1)})}m(A,M)};$(x,A=>{g.shouldRender&&A(B)})}m(u,y),me()}const oc=hr({component:"label",parts:["root"]});class lo{static create(e){return new lo(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=Rn(this.opts.ref),this.onmousedown=this.onmousedown.bind(this)}onmousedown(e){e.detail>1&&e.preventDefault()}#e=K(()=>({id:this.opts.id.current,[oc.root]:"",onmousedown:this.onmousedown,...this.attachment}));get props(){return a(this.#e)}set props(e){F(this.#e,e)}}var ac=X("<label><!></label>");function sc(u,e){const r=bn();ge(e,!0);let o=U(e,"id",19,()=>wn(r)),l=U(e,"ref",15,null),h=Be(e,["$$slots","$$events","$$legacy","children","child","id","ref","for"]);const d=lo.create({id:Fe(()=>o()),ref:Fe(()=>l(),A=>l(A))}),g=K(()=>hn(h,d.props,{for:e.for}));var w=V(),y=D(w);{var x=A=>{var M=V(),C=D(M);xe(C,()=>e.child,()=>({props:a(g)})),m(A,M)},B=A=>{var M=ac();zt(M,()=>({...a(g),for:e.for}));var C=ee(M);xe(C,()=>e.children??De),Q(M),m(A,M)};$(y,A=>{e.child?A(x):A(B,!1)})}m(u,w),me()}const Yi=hr({component:"radio-group",parts:["root","item"]}),co=new Nr("RadioGroup.Root");class uo{static create(e){return co.set(new uo(e))}opts;#e=K(()=>this.opts.value.current!=="");get hasValue(){return a(this.#e)}set hasValue(e){F(this.#e,e)}rovingFocusGroup;attachment;constructor(e){this.opts=e,this.attachment=Rn(this.opts.ref),this.rovingFocusGroup=new Na({rootNode:this.opts.ref,candidateAttr:Yi.item,loop:this.opts.loop,orientation:this.opts.orientation})}isChecked(e){return this.opts.value.current===e}setValue(e){this.opts.value.current=e}#t=K(()=>({id:this.opts.id.current,role:"radiogroup","aria-required":ur(this.opts.required.current),"aria-disabled":ur(this.opts.disabled.current),"aria-readonly":this.opts.readonly.current?"true":void 0,"data-disabled":Fn(this.opts.disabled.current),"data-readonly":Fn(this.opts.readonly.current),"data-orientation":this.opts.orientation.current,[Yi.root]:"",...this.attachment}));get props(){return a(this.#t)}set props(e){F(this.#t,e)}}class fo{static create(e){return new fo(e,co.get())}opts;root;attachment;#e=K(()=>this.root.opts.value.current===this.opts.value.current);get checked(){return a(this.#e)}set checked(e){F(this.#e,e)}#t=K(()=>this.opts.disabled.current||this.root.opts.disabled.current);#n=K(()=>this.root.opts.readonly.current);#i=K(()=>this.root.isChecked(this.opts.value.current));#r=re(-1);constructor(e,r){this.opts=e,this.root=r,this.attachment=Rn(this.opts.ref),this.opts.value.current===this.root.opts.value.current?(this.root.rovingFocusGroup.setCurrentTabStopId(this.opts.id.current),F(this.#r,0)):this.root.opts.value.current||F(this.#r,0),$e(()=>{F(this.#r,this.root.rovingFocusGroup.getTabIndex(this.opts.ref.current),!0)}),Tr([()=>this.opts.value.current,()=>this.root.opts.value.current],()=>{this.opts.value.current===this.root.opts.value.current&&(this.root.rovingFocusGroup.setCurrentTabStopId(this.opts.id.current),F(this.#r,0))}),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this),this.onfocus=this.onfocus.bind(this)}onclick(e){this.opts.disabled.current||a(this.#n)||this.root.setValue(this.opts.value.current)}onfocus(e){!this.root.hasValue||a(this.#n)||this.root.setValue(this.opts.value.current)}onkeydown(e){if(!a(this.#t)){if(e.key===ro){e.preventDefault(),a(this.#n)||this.root.setValue(this.opts.value.current);return}this.root.rovingFocusGroup.handleKeydown(this.opts.ref.current,e,!0)}}#o=K(()=>({checked:a(this.#i)}));get snippetProps(){return a(this.#o)}set snippetProps(e){F(this.#o,e)}#a=K(()=>({id:this.opts.id.current,disabled:a(this.#t)?!0:void 0,"data-value":this.opts.value.current,"data-orientation":this.root.opts.orientation.current,"data-disabled":Fn(a(this.#t)),"data-readonly":Fn(a(this.#n)),"data-state":a(this.#i)?"checked":"unchecked","aria-checked":Fa(a(this.#i),!1),[Yi.item]:"",type:"button",role:"radio",tabindex:a(this.#r),onkeydown:this.onkeydown,onfocus:this.onfocus,onclick:this.onclick,...this.attachment}));get props(){return a(this.#a)}set props(e){F(this.#a,e)}}class ho{static create(){return new ho(co.get())}root;#e=K(()=>this.root.opts.name.current!==void 0);get shouldRender(){return a(this.#e)}set shouldRender(e){F(this.#e,e)}constructor(e){this.root=e,this.onfocus=this.onfocus.bind(this)}onfocus(e){this.root.rovingFocusGroup.focusCurrentTabStop()}#t=K(()=>({name:this.root.opts.name.current,value:this.root.opts.value.current,required:this.root.opts.required.current,disabled:this.root.opts.disabled.current,onfocus:this.onfocus}));get props(){return a(this.#t)}set props(e){F(this.#t,e)}}function lc(u,e){ge(e,!1);const r=ho.create();Ba();var o=V(),l=D(o);{var h=d=>{qa(d,Ke(()=>r.props))};$(l,d=>{r.shouldRender&&d(h)})}m(u,o),me()}var cc=X("<div><!></div>"),uc=X("<!> <!>",1);function dc(u,e){const r=bn();ge(e,!0);let o=U(e,"disabled",3,!1),l=U(e,"value",15,""),h=U(e,"ref",15,null),d=U(e,"orientation",3,"vertical"),g=U(e,"loop",3,!0),w=U(e,"name",3,void 0),y=U(e,"required",3,!1),x=U(e,"readonly",3,!1),B=U(e,"id",19,()=>wn(r)),A=U(e,"onValueChange",3,io),M=Be(e,["$$slots","$$events","$$legacy","disabled","children","child","value","ref","orientation","loop","name","required","readonly","id","onValueChange"]);const C=uo.create({orientation:Fe(()=>d()),disabled:Fe(()=>o()),loop:Fe(()=>g()),name:Fe(()=>w()),required:Fe(()=>y()),readonly:Fe(()=>x()),id:Fe(()=>B()),value:Fe(()=>l(),Z=>{Z!==l()&&(l(Z),A()?.(Z))}),ref:Fe(()=>h(),Z=>h(Z))}),R=K(()=>hn(M,C.props));var q=uc(),N=D(q);{var z=Z=>{var W=V(),oe=D(W);xe(oe,()=>e.child,()=>({props:a(R)})),m(Z,W)},H=Z=>{var W=cc();zt(W,()=>({...a(R)}));var oe=ee(W);xe(oe,()=>e.children??De),Q(W),m(Z,W)};$(N,Z=>{e.child?Z(z):Z(H,!1)})}var J=ve(N,2);lc(J,{}),m(u,q),me()}var fc=X("<button><!></button>");function hc(u,e){const r=bn();ge(e,!0);let o=U(e,"id",19,()=>wn(r)),l=U(e,"disabled",3,!1),h=U(e,"ref",15,null),d=Be(e,["$$slots","$$events","$$legacy","id","children","child","value","disabled","ref"]);const g=fo.create({value:Fe(()=>e.value),disabled:Fe(()=>l()??!1),id:Fe(()=>o()),ref:Fe(()=>h(),M=>h(M))}),w=K(()=>hn(d,g.props));var y=V(),x=D(y);{var B=M=>{var C=V(),R=D(C);{let q=K(()=>({props:a(w),...g.snippetProps}));xe(R,()=>e.child,()=>a(q))}m(M,C)},A=M=>{var C=fc();zt(C,()=>({...a(w)}));var R=ee(C);xe(R,()=>e.children??De,()=>g.snippetProps),Q(C),m(M,C)};$(x,M=>{e.child?M(B):M(A,!1)})}m(u,y),me()}const di=hr({component:"tabs",parts:["root","list","trigger","content"]}),vo=new Nr("Tabs.Root");class go{static create(e){return vo.set(new go(e))}opts;attachment;rovingFocusGroup;#e=re(Ze([]));get triggerIds(){return a(this.#e)}set triggerIds(e){F(this.#e,e,!0)}valueToTriggerId=new fn;valueToContentId=new fn;constructor(e){this.opts=e,this.attachment=Rn(e.ref),this.rovingFocusGroup=new Na({candidateAttr:di.trigger,rootNode:this.opts.ref,loop:this.opts.loop,orientation:this.opts.orientation})}registerTrigger(e,r){return this.triggerIds.push(e),this.valueToTriggerId.set(r,e),()=>{this.triggerIds=this.triggerIds.filter(o=>o!==e),this.valueToTriggerId.delete(r)}}registerContent(e,r){return this.valueToContentId.set(r,e),()=>{this.valueToContentId.delete(r)}}setValue(e){this.opts.value.current=e}#t=K(()=>({id:this.opts.id.current,"data-orientation":this.opts.orientation.current,[di.root]:"",...this.attachment}));get props(){return a(this.#t)}set props(e){F(this.#t,e)}}class mo{static create(e){return new mo(e,vo.get())}opts;root;attachment;#e=K(()=>this.root.opts.disabled.current);constructor(e,r){this.opts=e,this.root=r,this.attachment=Rn(e.ref)}#t=K(()=>({id:this.opts.id.current,role:"tablist","aria-orientation":this.root.opts.orientation.current,"data-orientation":this.root.opts.orientation.current,[di.list]:"","data-disabled":Fn(a(this.#e)),...this.attachment}));get props(){return a(this.#t)}set props(e){F(this.#t,e)}}class po{static create(e){return new po(e,vo.get())}opts;root;attachment;#e=re(0);#t=K(()=>this.root.opts.value.current===this.opts.value.current);#n=K(()=>this.opts.disabled.current||this.root.opts.disabled.current);#i=K(()=>this.root.valueToContentId.get(this.opts.value.current));constructor(e,r){this.opts=e,this.root=r,this.attachment=Rn(e.ref),Tr([()=>this.opts.id.current,()=>this.opts.value.current],([o,l])=>this.root.registerTrigger(o,l)),$e(()=>{this.root.triggerIds.length,a(this.#t)||!this.root.opts.value.current?F(this.#e,0):F(this.#e,-1)}),this.onfocus=this.onfocus.bind(this),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}#r(){this.root.opts.value.current!==this.opts.value.current&&this.root.setValue(this.opts.value.current)}onfocus(e){this.root.opts.activationMode.current!=="automatic"||a(this.#n)||this.#r()}onclick(e){a(this.#n)||this.#r()}onkeydown(e){if(!a(this.#n)){if(e.key===ro||e.key===La){e.preventDefault(),this.#r();return}this.root.rovingFocusGroup.handleKeydown(this.opts.ref.current,e)}}#o=K(()=>({id:this.opts.id.current,role:"tab","data-state":vc(a(this.#t)),"data-value":this.opts.value.current,"data-orientation":this.root.opts.orientation.current,"data-disabled":Fn(a(this.#n)),"aria-selected":ur(a(this.#t)),"aria-controls":a(this.#i),[di.trigger]:"",disabled:Ra(a(this.#n)),tabindex:a(this.#e),onclick:this.onclick,onfocus:this.onfocus,onkeydown:this.onkeydown,...this.attachment}));get props(){return a(this.#o)}set props(e){F(this.#o,e)}}function vc(u){return u?"active":"inactive"}var gc=X("<div><!></div>");function mc(u,e){const r=bn();ge(e,!0);let o=U(e,"id",19,()=>wn(r)),l=U(e,"ref",15,null),h=U(e,"value",15,""),d=U(e,"onValueChange",3,io),g=U(e,"orientation",3,"horizontal"),w=U(e,"loop",3,!0),y=U(e,"activationMode",3,"automatic"),x=U(e,"disabled",3,!1),B=Be(e,["$$slots","$$events","$$legacy","id","ref","value","onValueChange","orientation","loop","activationMode","disabled","children","child"]);const A=go.create({id:Fe(()=>o()),value:Fe(()=>h(),z=>{h(z),d()(z)}),orientation:Fe(()=>g()),loop:Fe(()=>w()),activationMode:Fe(()=>y()),disabled:Fe(()=>x()),ref:Fe(()=>l(),z=>l(z))}),M=K(()=>hn(B,A.props));var C=V(),R=D(C);{var q=z=>{var H=V(),J=D(H);xe(J,()=>e.child,()=>({props:a(M)})),m(z,H)},N=z=>{var H=gc();zt(H,()=>({...a(M)}));var J=ee(H);xe(J,()=>e.children??De),Q(H),m(z,H)};$(R,z=>{e.child?z(q):z(N,!1)})}m(u,C),me()}var pc=X("<div><!></div>");function yc(u,e){const r=bn();ge(e,!0);let o=U(e,"id",19,()=>wn(r)),l=U(e,"ref",15,null),h=Be(e,["$$slots","$$events","$$legacy","child","children","id","ref"]);const d=mo.create({id:Fe(()=>o()),ref:Fe(()=>l(),A=>l(A))}),g=K(()=>hn(h,d.props));var w=V(),y=D(w);{var x=A=>{var M=V(),C=D(M);xe(C,()=>e.child,()=>({props:a(g)})),m(A,M)},B=A=>{var M=pc();zt(M,()=>({...a(g)}));var C=ee(M);xe(C,()=>e.children??De),Q(M),m(A,M)};$(y,A=>{e.child?A(x):A(B,!1)})}m(u,w),me()}var bc=X("<button><!></button>");function wc(u,e){const r=bn();ge(e,!0);let o=U(e,"disabled",3,!1),l=U(e,"id",19,()=>wn(r)),h=U(e,"type",3,"button"),d=U(e,"ref",15,null),g=Be(e,["$$slots","$$events","$$legacy","child","children","disabled","id","type","value","ref"]);const w=po.create({id:Fe(()=>l()),disabled:Fe(()=>o()??!1),value:Fe(()=>e.value),ref:Fe(()=>d(),C=>d(C))}),y=K(()=>hn(g,w.props,{type:h()}));var x=V(),B=D(x);{var A=C=>{var R=V(),q=D(R);xe(q,()=>e.child,()=>({props:a(y)})),m(C,R)},M=C=>{var R=bc();zt(R,()=>({...a(y)}));var q=ee(R);xe(q,()=>e.children??De),Q(R),m(C,R)};$(B,C=>{e.child?C(A):C(M,!1)})}m(u,x),me()}const _c=hr({component:"toggle",parts:["root"]});class yo{static create(e){return new yo(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=Rn(this.opts.ref),this.onclick=this.onclick.bind(this)}onclick(e){this.opts.disabled.current||(this.opts.pressed.current=!this.opts.pressed.current)}#e=K(()=>({pressed:this.opts.pressed.current}));get snippetProps(){return a(this.#e)}set snippetProps(e){F(this.#e,e)}#t=K(()=>({[_c.root]:"",id:this.opts.id.current,"data-disabled":Fn(this.opts.disabled.current),"aria-pressed":ur(this.opts.pressed.current),"data-state":Sc(this.opts.pressed.current),disabled:Ra(this.opts.disabled.current),onclick:this.onclick,...this.attachment}));get props(){return a(this.#t)}set props(e){F(this.#t,e)}}function Sc(u){return u?"on":"off"}var xc=X("<button><!></button>");function kc(u,e){const r=bn();ge(e,!0);let o=U(e,"ref",15,null),l=U(e,"id",19,()=>wn(r)),h=U(e,"pressed",15,!1),d=U(e,"onPressedChange",3,io),g=U(e,"disabled",3,!1),w=U(e,"type",3,"button"),y=Be(e,["$$slots","$$events","$$legacy","ref","id","pressed","onPressedChange","disabled","type","children","child"]);const x=yo.create({pressed:Fe(()=>h(),q=>{h(q),d()(q)}),disabled:Fe(()=>g()??!1),id:Fe(()=>l()),ref:Fe(()=>o(),q=>o(q))}),B=K(()=>hn(y,x.props,{type:w()}));var A=V(),M=D(A);{var C=q=>{var N=V(),z=D(N);{let H=K(()=>({props:a(B),...x.snippetProps}));xe(z,()=>e.child,()=>a(H))}m(q,N)},R=q=>{var N=xc();zt(N,()=>({...a(B)}));var z=ee(N);xe(z,()=>e.children??De,()=>x.snippetProps),Q(N),m(q,N)};$(M,q=>{e.child?q(C):q(R,!1)})}m(u,A),me()}function Cc(u,e){const r=Kn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const o=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]];Hn(u,Ke({name:"circle-check-big"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);Un(g,e,"default",{}),m(l,d)},$$slots:{default:!0}}))}function Ic(u,e){const r=Kn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const o=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}],["path",{d:"m9 14 2 2 4-4"}]];Hn(u,Ke({name:"clipboard-check"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);Un(g,e,"default",{}),m(l,d)},$$slots:{default:!0}}))}function Pc(u,e){const r=Kn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const o=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}]];Hn(u,Ke({name:"clipboard"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);Un(g,e,"default",{}),m(l,d)},$$slots:{default:!0}}))}function Ac(u,e){const r=Kn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const o=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];Hn(u,Ke({name:"download"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);Un(g,e,"default",{}),m(l,d)},$$slots:{default:!0}}))}function Tc(u,e){const r=Kn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const o=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}],["path",{d:"m2 2 20 20"}]];Hn(u,Ke({name:"eye-off"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);Un(g,e,"default",{}),m(l,d)},$$slots:{default:!0}}))}function aa(u,e){const r=Kn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const o=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];Hn(u,Ke({name:"eye"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);Un(g,e,"default",{}),m(l,d)},$$slots:{default:!0}}))}function Ec(u,e){const r=Kn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const o=[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]];Hn(u,Ke({name:"loader"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);Un(g,e,"default",{}),m(l,d)},$$slots:{default:!0}}))}function Dc(u,e){const r=Kn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const o=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Hn(u,Ke({name:"trash"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);Un(g,e,"default",{}),m(l,d)},$$slots:{default:!0}}))}var Oc=X('<div class="w-full flex-shrink-0"><!></div>');function Mc(u,e){var r=Oc(),o=ee(r);{var l=h=>{var d=V(),g=D(d);xe(g,()=>e.children),m(h,d)};$(o,h=>{e.children&&h(l)})}Q(r),m(u,r)}var Fc=X('<div class="w-full flex-shrink-0"><!></div>');function Rc(u,e){var r=Fc(),o=ee(r);{var l=h=>{var d=V(),g=D(d);xe(g,()=>e.children),m(h,d)};$(o,h=>{e.children&&h(l)})}Q(r),m(u,r)}function Nc(u,e){ge(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Be(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M12 17V3"}],["path",{d:"m6 11 6 6 6-6"}],["path",{d:"M19 21H5"}]];In(u,Ke({name:"arrow-down-to-line"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);xe(g,()=>e.children??De),m(l,d)},$$slots:{default:!0}})),me()}function Lc(u,e){ge(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Be(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]];In(u,Ke({name:"arrow-down"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);xe(g,()=>e.children??De),m(l,d)},$$slots:{default:!0}})),me()}function Bc(u,e){ge(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Be(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M20 6 9 17l-5-5"}]];In(u,Ke({name:"check"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);xe(g,()=>e.children??De),m(l,d)},$$slots:{default:!0}})),me()}function zc(u,e){ge(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Be(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"m18 15-6-6-6 6"}]];In(u,Ke({name:"chevron-up"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);xe(g,()=>e.children??De),m(l,d)},$$slots:{default:!0}})),me()}function jc(u,e){ge(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Be(e,["$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"10"}]];In(u,Ke({name:"circle"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);xe(g,()=>e.children??De),m(l,d)},$$slots:{default:!0}})),me()}function Vc(u,e){ge(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Be(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"}]];In(u,Ke({name:"maximize"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);xe(g,()=>e.children??De),m(l,d)},$$slots:{default:!0}})),me()}function qc(u,e){ge(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Be(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3"}]];In(u,Ke({name:"minimize"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);xe(g,()=>e.children??De),m(l,d)},$$slots:{default:!0}})),me()}function Ha(u,e){ge(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Be(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M5 12h14"}]];In(u,Ke({name:"minus"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);xe(g,()=>e.children??De),m(l,d)},$$slots:{default:!0}})),me()}function Kc(u,e){ge(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Be(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];In(u,Ke({name:"send"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);xe(g,()=>e.children??De),m(l,d)},$$slots:{default:!0}})),me()}function Hc(u,e){ge(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Be(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"}],["circle",{cx:"12",cy:"12",r:"3"}]];In(u,Ke({name:"settings"},()=>r,{get iconNode(){return o},children:(l,h)=>{var d=V(),g=D(d);xe(g,()=>e.children??De),m(l,d)},$$slots:{default:!0}})),me()}var Uc=X('<p class="text-sm font-medium"> </p>'),Gc=X('<div class="pointer-events-none fixed z-50 transition-opacity duration-200"><!></div>');function Wc(u,e){ge(e,!0);let r=re(null),o=re(Ze({x:0,y:0})),l=0;const h=y=>{F(o,{x:y.clientX,y:y.clientY},!0)};$e(()=>(document.addEventListener("mousemove",h),()=>{document.removeEventListener("mousemove",h)})),$e(()=>{const y=e.areaSelectionInteractionStore.currentHoveredArea?.id,x=++l;if(!y){F(r,null);return}(async()=>{const B=await e.areaSelectionInteractionStore.getAreaNamesById([y]);x===l&&e.areaSelectionInteractionStore.currentHoveredArea?.id===y&&F(r,B[0]??null,!0)})()});var d=V(),g=D(d);{var w=y=>{var x=Gc(),B=ee(x);pe(B,()=>to,(A,M)=>{M(A,{class:"max-w-xs border !py-2 shadow-lg",children:(C,R)=>{var q=V(),N=D(q);pe(N,()=>no,(z,H)=>{H(z,{class:"!px-3 !py-0",children:(J,Z)=>{var W=Uc(),oe=ee(W,!0);Q(W),at(()=>qt(oe,a(r))),m(J,W)},$$slots:{default:!0}})}),m(C,q)},$$slots:{default:!0}})}),Q(x),at(()=>$n(x,`left: ${a(o).x+10}px; top: ${a(o).y-10}px;`)),m(y,x)};$(g,y=>{a(r)&&y(w)})}m(u,d),me()}const Yc=Array(12).fill(0);var Jc=X('<div class="sonner-loading-bar"></div>'),Qc=X('<div><div class="sonner-spinner"></div></div>');function Xc(u,e){ge(e,!0);var r=Qc(),o=ee(r);nn(o,23,()=>Yc,(l,h)=>`spinner-bar-${h}`,(l,h)=>{var d=Jc();m(l,d)}),Q(o),Q(r),at(l=>{an(r,1,l),St(r,"data-visible",e.visible)},[()=>pn(["sonner-loading-wrapper",e.class].filter(Boolean).join(" "))]),m(u,r),me()}function En(...u){return u.filter(Boolean).join(" ")}const Zc=typeof document<"u",$c=typeof window<"u"?window:void 0;function eu(u){let e=u.activeElement;for(;e?.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}let tu=class{#e;#t;constructor(e={}){const{window:r=$c,document:o=r?.document}=e;r!==void 0&&(this.#e=o,this.#t=gi(l=>{const h=Mn(r,"focusin",l),d=Mn(r,"focusout",l);return()=>{h(),d()}}))}get current(){return this.#t?.(),this.#e?eu(this.#e):null}};new tu;class nu{#e;#t;constructor(e){this.#e=e,this.#t=Symbol(e)}get key(){return this.#t}exists(){return Ks(this.#t)}get(){const e=Qo(this.#t);if(e===void 0)throw new Error(`Context "${this.#e}" not found`);return e}getOr(e){const r=Qo(this.#t);return r===void 0?e:r}set(e){return Hs(this.#t,e)}}const ru=new nu("<Toaster/>");let sa=0;class iu{#e=re(Ze([]));get toasts(){return a(this.#e)}set toasts(e){F(this.#e,e,!0)}#t=re(Ze([]));get heights(){return a(this.#t)}set heights(e){F(this.#t,e,!0)}#n=e=>{const r=this.toasts.findIndex(o=>o.id===e);return r===-1?null:r};addToast=e=>{Zc&&this.toasts.unshift(e)};updateToast=({id:e,data:r,type:o,message:l})=>{const h=this.toasts.findIndex(g=>g.id===e),d=this.toasts[h];this.toasts[h]={...d,...r,id:e,title:l,type:o,updated:!0}};create=e=>{const{message:r,...o}=e,l=typeof e?.id=="number"||e.id&&e.id?.length>0?e.id:sa++,h=e.dismissable===void 0?!0:e.dismissable,d=e.type===void 0?"default":e.type;return On(()=>{this.toasts.find(w=>w.id===l)?this.updateToast({id:l,data:e,type:d,message:r,dismissable:h}):this.addToast({...o,id:l,title:r,dismissable:h,type:d})}),l};dismiss=e=>(On(()=>{if(e===void 0){this.toasts=this.toasts.map(o=>({...o,dismiss:!0}));return}const r=this.toasts.findIndex(o=>o.id===e);this.toasts[r]&&(this.toasts[r]={...this.toasts[r],dismiss:!0})}),e);remove=e=>{if(e===void 0){this.toasts=[];return}const r=this.#n(e);if(r!==null)return this.toasts.splice(r,1),e};message=(e,r)=>this.create({...r,type:"default",message:e});error=(e,r)=>this.create({...r,type:"error",message:e});success=(e,r)=>this.create({...r,type:"success",message:e});info=(e,r)=>this.create({...r,type:"info",message:e});warning=(e,r)=>this.create({...r,type:"warning",message:e});loading=(e,r)=>this.create({...r,type:"loading",message:e});promise=(e,r)=>{if(!r)return;let o;r.loading!==void 0&&(o=this.create({...r,promise:e,type:"loading",message:typeof r.loading=="string"?r.loading:r.loading()}));const l=e instanceof Promise?e:e();let h=o!==void 0;return l.then(d=>{if(typeof d=="object"&&d&&"ok"in d&&typeof d.ok=="boolean"&&!d.ok){h=!1;const g=ou(d);this.create({id:o,type:"error",message:g})}else if(r.success!==void 0){h=!1;const g=typeof r.success=="function"?r.success(d):r.success;this.create({id:o,type:"success",message:g})}}).catch(d=>{if(r.error!==void 0){h=!1;const g=typeof r.error=="function"?r.error(d):r.error;this.create({id:o,type:"error",message:g})}}).finally(()=>{h&&(this.dismiss(o),o=void 0),r.finally?.()}),o};custom=(e,r)=>{const o=r?.id||sa++;return this.create({component:e,id:o,...r}),o};removeHeight=e=>{this.heights=this.heights.filter(r=>r.toastId!==e)};setHeight=e=>{const r=this.#n(e.toastId);if(r===null){this.heights.push(e);return}this.heights[r]=e};reset=()=>{this.toasts=[],this.heights=[]}}function ou(u){return u&&typeof u=="object"&&"status"in u?`HTTP error! Status: ${u.status}`:`Error! ${u}`}const wt=new iu;function au(u,e){return wt.create({message:u,...e})}class su{#e=K(()=>wt.toasts.filter(e=>!e.dismiss));get toasts(){return a(this.#e)}}const lu=au,Dr=Object.assign(lu,{success:wt.success,info:wt.info,warning:wt.warning,error:wt.error,custom:wt.custom,message:wt.message,promise:wt.promise,dismiss:wt.dismiss,loading:wt.loading,getActiveToasts:()=>wt.toasts.filter(u=>!u.dismiss)});function fi(u){return u.label!==void 0}function cu(){let u=re(Ze(typeof document<"u"?document.hidden:!1));return $e(()=>Mn(document,"visibilitychange",()=>{F(u,document.hidden,!0)})),{get current(){return a(u)}}}const la=4e3,uu=14,du=45,fu=200,hu=.05,vu={toast:"",title:"",description:"",loader:"",closeButton:"",cancelButton:"",actionButton:"",action:"",warning:"",error:"",success:"",default:"",info:"",loading:""};function gu(u){const[e,r]=u.split("-"),o=[];return e&&o.push(e),r&&o.push(r),o}function ca(u){return 1/(1.5+Math.abs(u)/20)}var mu=X("<div><!></div>"),pu=(u,e,r,o,l)=>{a(e)||!a(r)||(o(),l.toast.onDismiss?.(l.toast))},yu=X('<button data-close-button=""><!></button>'),bu=X('<div data-icon=""><!> <!></div>'),wu=X('<div data-description=""><!></div>'),_u=(u,e,r,o)=>{fi(e.toast.cancel)&&a(r)&&(e.toast.cancel?.onClick?.(u),o())},Su=X('<button data-button="" data-cancel=""> </button>'),xu=(u,e,r)=>{fi(e.toast.action)&&(e.toast.action?.onClick(u),!u.defaultPrevented&&r())},ku=X('<button data-button=""> </button>'),Cu=X('<!> <div data-content=""><div data-title=""><!></div> <!></div> <!> <!>',1),Iu=X('<li data-sonner-toast=""><!> <!></li>');function Pu(u,e){ge(e,!0);const r=_e=>{var Ce=V(),Ge=D(Ce);{var He=je=>{var Pt=mu(),Et=ee(Pt);xe(Et,()=>e.loadingIcon),Q(Pt),at(Xt=>{an(Pt,1,Xt),St(Pt,"data-visible",a(W)==="loading")},[()=>pn(En(a(we)?.loader,e.toast?.classes?.loader,"sonner-loader"))]),m(je,Pt)},tt=je=>{{let Pt=K(()=>En(a(we)?.loader,e.toast.classes?.loader)),Et=K(()=>a(W)==="loading");Xc(je,{get class(){return a(Pt)},get visible(){return a(Et)}})}};$(Ge,je=>{e.loadingIcon?je(He):je(tt,!1)})}m(_e,Ce)};let o=U(e,"cancelButtonStyle",3,""),l=U(e,"actionButtonStyle",3,""),h=U(e,"descriptionClass",3,""),d=U(e,"unstyled",3,!1),g=U(e,"defaultRichColors",3,!1);const w={...vu};let y=re(!1),x=re(!1),B=re(!1),A=re(!1),M=re(!1),C=re(0),R=re(0),q=e.toast.duration||e.duration||la,N=re(void 0),z=re(null),H=re(null);const J=K(()=>e.index===0),Z=K(()=>e.index+1<=e.visibleToasts),W=K(()=>e.toast.type),oe=K(()=>e.toast.dismissable!==!1),be=K(()=>e.toast.class||""),Ie=K(()=>e.toast.descriptionClass||""),de=K(()=>wt.heights.findIndex(_e=>_e.toastId===e.toast.id)||0),Se=K(()=>e.toast.closeButton??e.closeButton),Oe=K(()=>e.toast.duration??e.duration??la);let Pe=null;const Ne=K(()=>e.position.split("-")),Ye=K(()=>wt.heights.reduce((_e,Ce,Ge)=>Ge>=a(de)?_e:_e+Ce.height,0)),et=cu(),Re=K(()=>e.toast.invert||e.invert),Ue=K(()=>a(W)==="loading"),we=K(()=>({...w,...e.classes})),ze=K(()=>e.toast.title),Qe=K(()=>e.toast.description);let xt=re(0),lt=re(0);const he=K(()=>Math.round(a(de)*uu+a(Ye)));$e(()=>{a(ze),a(Qe);let _e;e.expanded||e.expandByDefault?_e=1:_e=1-e.index*hu;const Ce=On(()=>a(N));if(Ce===void 0)return;Ce.style.setProperty("height","auto");const Ge=Ce.offsetHeight,He=Ce.getBoundingClientRect().height,tt=Math.round(He/_e+Number.EPSILON&100)/100;Ce.style.removeProperty("height");let je;Math.abs(tt-Ge)<1?je=tt:je=Ge,F(R,je,!0),On(()=>{wt.setHeight({toastId:e.toast.id,height:je})})});function Je(){F(x,!0),F(C,a(he),!0),wt.removeHeight(e.toast.id),setTimeout(()=>{wt.remove(e.toast.id)},fu)}let dt;const Me=K(()=>e.toast.promise&&a(W)==="loading"||e.toast.duration===Number.POSITIVE_INFINITY);function kt(){F(xt,new Date().getTime(),!0),dt=setTimeout(()=>{e.toast.onAutoClose?.(e.toast),Je()},q)}function fe(){if(a(lt)<a(xt)){const _e=new Date().getTime()-a(xt);q=q-_e}F(lt,new Date().getTime(),!0)}$e(()=>{e.toast.updated&&(clearTimeout(dt),q=a(Oe),kt())}),$e(()=>(a(Me)||(e.expanded||e.interacting||et.current?fe():kt()),()=>clearTimeout(dt))),er(()=>{F(y,!0);const _e=a(N)?.getBoundingClientRect().height;return F(R,_e,!0),wt.setHeight({toastId:e.toast.id,height:_e}),()=>{wt.removeHeight(e.toast.id)}}),$e(()=>{e.toast.delete&&On(()=>{Je(),e.toast.onDismiss?.(e.toast)})});const ct=_e=>{if(a(Ue))return;F(C,a(he),!0);const Ce=_e.target;Ce.setPointerCapture(_e.pointerId),Ce.tagName!=="BUTTON"&&(F(B,!0),Pe={x:_e.clientX,y:_e.clientY})},ft=()=>{if(a(A)||!a(oe))return;Pe=null;const _e=Number(a(N)?.style.getPropertyValue("--swipe-amount-x").replace("px","")||0),Ce=Number(a(N)?.style.getPropertyValue("--swipe-amount-y").replace("px","")||0),Ge=new Date().getTime()-0,He=a(z)==="x"?_e:Ce,tt=Math.abs(He)/Ge;if(Math.abs(He)>=du||tt>.11){F(C,a(he),!0),e.toast.onDismiss?.(e.toast),a(z)==="x"?F(H,_e>0?"right":"left",!0):F(H,Ce>0?"down":"up",!0),Je(),F(A,!0);return}else a(N)?.style.setProperty("--swipe-amount-x","0px"),a(N)?.style.setProperty("--swipe-amount-y","0px");F(M,!1),F(B,!1),F(z,null)},Ae=_e=>{if(!Pe||!a(oe)||(window.getSelection()?.toString().length??-1)>0)return;const Ge=_e.clientY-Pe.y,He=_e.clientX-Pe.x,tt=e.swipeDirections??gu(e.position);!a(z)&&(Math.abs(He)>1||Math.abs(Ge)>1)&&F(z,Math.abs(He)>Math.abs(Ge)?"x":"y",!0);let je={x:0,y:0};if(a(z)==="y"){if(tt.includes("top")||tt.includes("bottom"))if(tt.includes("top")&&Ge<0||tt.includes("bottom")&&Ge>0)je.y=Ge;else{const Pt=Ge*ca(Ge);je.y=Math.abs(Pt)<Math.abs(Ge)?Pt:Ge}}else if(a(z)==="x"&&(tt.includes("left")||tt.includes("right")))if(tt.includes("left")&&He<0||tt.includes("right")&&He>0)je.x=He;else{const Pt=He*ca(He);je.x=Math.abs(Pt)<Math.abs(He)?Pt:He}(Math.abs(je.x)>0||Math.abs(je.y)>0)&&F(M,!0),a(N)?.style.setProperty("--swipe-amount-x",`${je.x}px`),a(N)?.style.setProperty("--swipe-amount-y",`${je.y}px`)},ht=()=>{F(B,!1),F(z,null),Pe=null},yt=K(()=>e.toast.icon?e.toast.icon:a(W)==="success"?e.successIcon:a(W)==="error"?e.errorIcon:a(W)==="warning"?e.warningIcon:a(W)==="info"?e.infoIcon:a(W)==="loading"?e.loadingIcon:null);var Ee=Iu();St(Ee,"tabindex",0);let pt;Ee.__pointermove=Ae,Ee.__pointerup=ft,Ee.__pointerdown=ct;var Kt=ee(Ee);{var Rt=_e=>{var Ce=yu();Ce.__click=[pu,Ue,oe,Je,e];var Ge=ee(Ce);xe(Ge,()=>e.closeIcon??De),Q(Ce),at(He=>{St(Ce,"aria-label",e.closeButtonAriaLabel),St(Ce,"data-disabled",a(Ue)),an(Ce,1,He)},[()=>pn(En(a(we)?.closeButton,e.toast?.classes?.closeButton))]),m(_e,Ce)};$(Kt,_e=>{a(Se)&&!e.toast.component&&a(W)!=="loading"&&e.closeIcon!==null&&_e(Rt)})}var Ht=ve(Kt,2);{var _t=_e=>{const Ce=K(()=>e.toast.component);var Ge=V(),He=D(Ge);pe(He,()=>a(Ce),(tt,je)=>{je(tt,Ke(()=>e.toast.componentProps,{closeToast:Je}))}),m(_e,Ge)},nt=_e=>{var Ce=Cu(),Ge=D(Ce);{var He=te=>{var ke=bu(),Le=ee(ke);{var it=ot=>{var Dt=V(),Ut=D(Dt);{var Ot=jt=>{var Vt=V(),ln=D(Vt);pe(ln,()=>e.toast.icon,(Pn,_n)=>{_n(Pn,{})}),m(jt,Vt)},Mt=jt=>{r(jt)};$(Ut,jt=>{e.toast.icon?jt(Ot):jt(Mt,!1)})}m(ot,Dt)};$(Le,ot=>{(e.toast.promise||a(W)==="loading")&&ot(it)})}var ne=ve(Le,2);{var Te=ot=>{var Dt=V(),Ut=D(Dt);{var Ot=jt=>{var Vt=V(),ln=D(Vt);pe(ln,()=>e.toast.icon,(Pn,_n)=>{_n(Pn,{})}),m(jt,Vt)},Mt=jt=>{var Vt=V(),ln=D(Vt);{var Pn=mt=>{var At=V(),vr=D(At);xe(vr,()=>e.successIcon??De),m(mt,At)},_n=mt=>{var At=V(),vr=D(At);{var nr=vn=>{var Gn=V(),cn=D(Gn);xe(cn,()=>e.errorIcon??De),m(vn,Gn)},rr=vn=>{var Gn=V(),cn=D(Gn);{var Nn=gn=>{var Wn=V(),un=D(Wn);xe(un,()=>e.warningIcon??De),m(gn,Wn)},Sn=gn=>{var Wn=V(),un=D(Wn);{var Lr=mn=>{var gr=V(),mr=D(gr);xe(mr,()=>e.infoIcon??De),m(mn,gr)};$(un,mn=>{a(W)==="info"&&mn(Lr)},!0)}m(gn,Wn)};$(cn,gn=>{a(W)==="warning"?gn(Nn):gn(Sn,!1)},!0)}m(vn,Gn)};$(vr,vn=>{a(W)==="error"?vn(nr):vn(rr,!1)},!0)}m(mt,At)};$(ln,mt=>{a(W)==="success"?mt(Pn):mt(_n,!1)},!0)}m(jt,Vt)};$(Ut,jt=>{e.toast.icon?jt(Ot):jt(Mt,!1)})}m(ot,Dt)};$(ne,ot=>{e.toast.type!=="loading"&&ot(Te)})}Q(ke),at(ot=>an(ke,1,ot),[()=>pn(En(a(we)?.icon,e.toast?.classes?.icon))]),m(te,ke)};$(Ge,te=>{(a(W)||e.toast.icon||e.toast.promise)&&e.toast.icon!==null&&(a(yt)!==null||e.toast.icon)&&te(He)})}var tt=ve(Ge,2),je=ee(tt),Pt=ee(je);{var Et=te=>{var ke=V(),Le=D(ke);{var it=Te=>{const ot=K(()=>e.toast.title);var Dt=V(),Ut=D(Dt);pe(Ut,()=>a(ot),(Ot,Mt)=>{Mt(Ot,Ke(()=>e.toast.componentProps))}),m(Te,Dt)},ne=Te=>{var ot=tn();at(()=>qt(ot,e.toast.title)),m(Te,ot)};$(Le,Te=>{typeof e.toast.title!="string"?Te(it):Te(ne,!1)})}m(te,ke)};$(Pt,te=>{e.toast.title&&te(Et)})}Q(je);var Xt=ve(je,2);{var Ct=te=>{var ke=wu(),Le=ee(ke);{var it=Te=>{const ot=K(()=>e.toast.description);var Dt=V(),Ut=D(Dt);pe(Ut,()=>a(ot),(Ot,Mt)=>{Mt(Ot,Ke(()=>e.toast.componentProps))}),m(Te,Dt)},ne=Te=>{var ot=tn();at(()=>qt(ot,e.toast.description)),m(Te,ot)};$(Le,Te=>{typeof e.toast.description!="string"?Te(it):Te(ne,!1)})}Q(ke),at(Te=>an(ke,1,Te),[()=>pn(En(h(),a(Ie),a(we)?.description,e.toast.classes?.description))]),m(te,ke)};$(Xt,te=>{e.toast.description&&te(Ct)})}Q(tt);var st=ve(tt,2);{var vt=te=>{var ke=V(),Le=D(ke);{var it=Te=>{var ot=V(),Dt=D(ot);pe(Dt,()=>e.toast.cancel,(Ut,Ot)=>{Ot(Ut,{})}),m(Te,ot)},ne=Te=>{var ot=V(),Dt=D(ot);{var Ut=Ot=>{var Mt=Su();Mt.__click=[_u,e,oe,Je];var jt=ee(Mt,!0);Q(Mt),at(Vt=>{$n(Mt,e.toast.cancelButtonStyle??o()),an(Mt,1,Vt),qt(jt,e.toast.cancel.label)},[()=>pn(En(a(we)?.cancelButton,e.toast?.classes?.cancelButton))]),m(Ot,Mt)};$(Dt,Ot=>{fi(e.toast.cancel)&&Ot(Ut)},!0)}m(Te,ot)};$(Le,Te=>{typeof e.toast.cancel=="function"?Te(it):Te(ne,!1)})}m(te,ke)};$(st,te=>{e.toast.cancel&&te(vt)})}var bt=ve(st,2);{var gt=te=>{var ke=V(),Le=D(ke);{var it=Te=>{var ot=V(),Dt=D(ot);pe(Dt,()=>e.toast.action,(Ut,Ot)=>{Ot(Ut,{})}),m(Te,ot)},ne=Te=>{var ot=V(),Dt=D(ot);{var Ut=Ot=>{var Mt=ku();Mt.__click=[xu,e,Je];var jt=ee(Mt,!0);Q(Mt),at(Vt=>{$n(Mt,e.toast.actionButtonStyle??l()),an(Mt,1,Vt),qt(jt,e.toast.action.label)},[()=>pn(En(a(we)?.actionButton,e.toast?.classes?.actionButton))]),m(Ot,Mt)};$(Dt,Ot=>{fi(e.toast.action)&&Ot(Ut)},!0)}m(Te,ot)};$(Le,Te=>{typeof e.toast.action=="function"?Te(it):Te(ne,!1)})}m(te,ke)};$(bt,te=>{e.toast.action&&te(gt)})}at(te=>an(je,1,te),[()=>pn(En(a(we)?.title,e.toast?.classes?.title))]),m(_e,Ce)};$(Ht,_e=>{e.toast.component?_e(_t):_e(nt,!1)})}Q(Ee),$t(Ee,_e=>F(N,_e),()=>a(N)),at((_e,Ce,Ge,He)=>{an(Ee,1,_e),St(Ee,"data-rich-colors",e.toast.richColors??g()),St(Ee,"data-styled",!(e.toast.component||e.toast.unstyled||d())),St(Ee,"data-mounted",a(y)),St(Ee,"data-promise",Ce),St(Ee,"data-swiped",a(M)),St(Ee,"data-removed",a(x)),St(Ee,"data-visible",a(Z)),St(Ee,"data-y-position",a(Ne)[0]),St(Ee,"data-x-position",a(Ne)[1]),St(Ee,"data-index",e.index),St(Ee,"data-front",a(J)),St(Ee,"data-swiping",a(B)),St(Ee,"data-dismissable",a(oe)),St(Ee,"data-type",a(W)),St(Ee,"data-invert",a(Re)),St(Ee,"data-swipe-out",a(A)),St(Ee,"data-swipe-direction",a(H)),St(Ee,"data-expanded",Ge),pt=$n(Ee,`${e.style} ${e.toast.style}`,pt,He)},[()=>pn(En(e.class,a(be),a(we)?.toast,e.toast?.classes?.toast,a(we)?.[a(W)],e.toast?.classes?.[a(W)])),()=>!!e.toast.promise,()=>!!(e.expanded||e.expandByDefault&&a(y)),()=>({"--index":e.index,"--toasts-before":e.index,"--z-index":wt.toasts.length-e.index,"--offset":`${a(x)?a(C):a(he)}px`,"--initial-height":e.expandByDefault?"auto":`${a(R)}px`})]),Ma("dragend",Ee,ht),m(u,Ee),me()}Rr(["pointermove","pointerup","pointerdown","click"]);var Au=Fr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-success-icon=""><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg>');function Tu(u){var e=Au();m(u,e)}var Eu=Fr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-error-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>');function Du(u){var e=Eu();m(u,e)}var Ou=Fr('<svg viewBox="0 0 64 64" fill="currentColor" height="20" width="20" data-sonner-warning-icon="" xmlns="http://www.w3.org/2000/svg"><path d="M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"></path><path d="M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"></path></svg>');function Mu(u){var e=Ou();m(u,e)}var Fu=Fr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-info-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd"></path></svg>');function Ru(u){var e=Fu();m(u,e)}var Nu=Fr('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-sonner-close-icon=""><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>');function Lu(u){var e=Nu();m(u,e)}const Bu=3,Ua="24px",Ga="16px",zu=4e3,ju=356,Vu=14,Ki="dark",ii="light";function qu(u,e){const r={};return[u,e].forEach((o,l)=>{const h=l===1,d=h?"--mobile-offset":"--offset",g=h?Ga:Ua;function w(y){["top","right","bottom","left"].forEach(x=>{r[`${d}-${x}`]=typeof y=="number"?`${y}px`:y})}typeof o=="number"||typeof o=="string"?w(o):typeof o=="object"?["top","right","bottom","left"].forEach(y=>{const x=o[y];x===void 0?r[`${d}-${y}`]=g:r[`${d}-${y}`]=typeof x=="number"?`${x}px`:x}):w(g)}),r}var Ku=X("<ol></ol>"),Hu=X('<section aria-live="polite" aria-relevant="additions text" aria-atomic="false" class="svelte-nbs0zk"><!></section>');function Uu(u,e){ge(e,!0);function r(he){return he!=="system"?he:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ki:ii}let o=U(e,"invert",3,!1),l=U(e,"position",3,"bottom-right"),h=U(e,"hotkey",19,()=>["altKey","KeyT"]),d=U(e,"expand",3,!1),g=U(e,"closeButton",3,!1),w=U(e,"offset",3,Ua),y=U(e,"mobileOffset",3,Ga),x=U(e,"theme",3,"light"),B=U(e,"richColors",3,!1),A=U(e,"duration",3,zu),M=U(e,"visibleToasts",3,Bu),C=U(e,"toastOptions",19,()=>({})),R=U(e,"dir",7,"auto"),q=U(e,"gap",3,Vu),N=U(e,"containerAriaLabel",3,"Notifications"),z=U(e,"closeButtonAriaLabel",3,"Close toast"),H=Be(e,["$$slots","$$events","$$legacy","invert","position","hotkey","expand","closeButton","offset","mobileOffset","theme","richColors","duration","visibleToasts","toastOptions","dir","gap","loadingIcon","successIcon","errorIcon","warningIcon","closeIcon","infoIcon","containerAriaLabel","class","closeButtonAriaLabel","onblur","onfocus","onmouseenter","onmousemove","onmouseleave","ondragend","onpointerdown","onpointerup"]);function J(){if(R()!=="auto")return R();if(typeof window>"u"||typeof document>"u")return"ltr";const he=document.documentElement.getAttribute("dir");return he==="auto"||!he?(On(()=>R(window.getComputedStyle(document.documentElement).direction??"ltr")),R()):(On(()=>R(he)),he)}const Z=K(()=>Array.from(new Set([l(),...wt.toasts.filter(he=>he.position).map(he=>he.position)].filter(Boolean))));let W=re(!1),oe=re(!1),be=re(Ze(r(x()))),Ie=re(void 0),de=re(null),Se=re(!1);const Oe=K(()=>h().join("+").replace(/Key/g,"").replace(/Digit/g,""));$e(()=>{wt.toasts.length<=1&&F(W,!1)}),$e(()=>{const he=wt.toasts.filter(Je=>Je.dismiss&&!Je.delete);if(he.length>0){const Je=wt.toasts.map(dt=>he.find(kt=>kt.id===dt.id)?{...dt,delete:!0}:dt);wt.toasts=Je}}),$e(()=>()=>{a(Ie)&&a(de)&&(a(de).focus({preventScroll:!0}),F(de,null),F(Se,!1))}),er(()=>(wt.reset(),Mn(document,"keydown",Je=>{h().every(Me=>Je[Me]||Je.code===Me)&&(F(W,!0),a(Ie)?.focus()),Je.code==="Escape"&&(document.activeElement===a(Ie)||a(Ie)?.contains(document.activeElement))&&F(W,!1)}))),$e(()=>{if(x()!=="system"&&F(be,x()),typeof window<"u"){x()==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F(be,Ki):F(be,ii));const he=window.matchMedia("(prefers-color-scheme: dark)"),Je=({matches:dt})=>{F(be,dt?Ki:ii,!0)};"addEventListener"in he?he.addEventListener("change",Je):he.addListener(Je)}});const Pe=he=>{e.onblur?.(he),a(Se)&&!he.currentTarget.contains(he.relatedTarget)&&(F(Se,!1),a(de)&&(a(de).focus({preventScroll:!0}),F(de,null)))},Ne=he=>{e.onfocus?.(he),!(he.target instanceof HTMLElement&&he.target.dataset.dismissable==="false")&&(a(Se)||(F(Se,!0),F(de,he.relatedTarget,!0)))},Ye=he=>{e.onpointerdown?.(he),!(he.target instanceof HTMLElement&&he.target.dataset.dismissable==="false")&&F(oe,!0)},et=he=>{e.onmouseenter?.(he),F(W,!0)},Re=he=>{e.onmouseleave?.(he),a(oe)||F(W,!1)},Ue=he=>{e.onmousemove?.(he),F(W,!0)},we=he=>{e.ondragend?.(he),F(W,!1)},ze=he=>{e.onpointerup?.(he),F(oe,!1)};ru.set(new su);var Qe=Hu();St(Qe,"tabindex",-1);var xt=ee(Qe);{var lt=he=>{var Je=V(),dt=D(Je);nn(dt,18,()=>a(Z),Me=>Me,(Me,kt,fe,ct)=>{const ft=K(()=>{const[yt,Ee]=kt.split("-");return{y:yt,x:Ee}}),Ae=K(()=>qu(w(),y()));var ht=Ku();zt(ht,(yt,Ee)=>({tabindex:-1,dir:yt,class:e.class,"data-sonner-toaster":!0,"data-sonner-theme":a(be),"data-y-position":a(ft).y,"data-x-position":a(ft).x,style:e.style,onblur:Pe,onfocus:Ne,onmouseenter:et,onmousemove:Ue,onmouseleave:Re,ondragend:we,onpointerdown:Ye,onpointerup:ze,...H,[Gs]:Ee}),[J,()=>({"--front-toast-height":`${wt.heights[0]?.height}px`,"--width":`${ju}px`,"--gap":`${q()}px`,"--offset-top":a(Ae)["--offset-top"],"--offset-right":a(Ae)["--offset-right"],"--offset-bottom":a(Ae)["--offset-bottom"],"--offset-left":a(Ae)["--offset-left"],"--mobile-offset-top":a(Ae)["--mobile-offset-top"],"--mobile-offset-right":a(Ae)["--mobile-offset-right"],"--mobile-offset-bottom":a(Ae)["--mobile-offset-bottom"],"--mobile-offset-left":a(Ae)["--mobile-offset-left"]})],void 0,"svelte-nbs0zk"),nn(ht,23,()=>wt.toasts.filter(yt=>!yt.position&&a(fe)===0||yt.position===kt),yt=>yt.id,(yt,Ee,pt,Kt)=>{{const Rt=st=>{var vt=V(),bt=D(vt);{var gt=ke=>{var Le=V(),it=D(Le);xe(it,()=>e.successIcon??De),m(ke,Le)},te=ke=>{var Le=V(),it=D(Le);{var ne=Te=>{Tu(Te)};$(it,Te=>{e.successIcon!==null&&Te(ne)},!0)}m(ke,Le)};$(bt,ke=>{e.successIcon?ke(gt):ke(te,!1)})}m(st,vt)},Ht=st=>{var vt=V(),bt=D(vt);{var gt=ke=>{var Le=V(),it=D(Le);xe(it,()=>e.errorIcon??De),m(ke,Le)},te=ke=>{var Le=V(),it=D(Le);{var ne=Te=>{Du(Te)};$(it,Te=>{e.errorIcon!==null&&Te(ne)},!0)}m(ke,Le)};$(bt,ke=>{e.errorIcon?ke(gt):ke(te,!1)})}m(st,vt)},_t=st=>{var vt=V(),bt=D(vt);{var gt=ke=>{var Le=V(),it=D(Le);xe(it,()=>e.warningIcon??De),m(ke,Le)},te=ke=>{var Le=V(),it=D(Le);{var ne=Te=>{Mu(Te)};$(it,Te=>{e.warningIcon!==null&&Te(ne)},!0)}m(ke,Le)};$(bt,ke=>{e.warningIcon?ke(gt):ke(te,!1)})}m(st,vt)},nt=st=>{var vt=V(),bt=D(vt);{var gt=ke=>{var Le=V(),it=D(Le);xe(it,()=>e.infoIcon??De),m(ke,Le)},te=ke=>{var Le=V(),it=D(Le);{var ne=Te=>{Ru(Te)};$(it,Te=>{e.infoIcon!==null&&Te(ne)},!0)}m(ke,Le)};$(bt,ke=>{e.infoIcon?ke(gt):ke(te,!1)})}m(st,vt)},_e=st=>{var vt=V(),bt=D(vt);{var gt=ke=>{var Le=V(),it=D(Le);xe(it,()=>e.closeIcon??De),m(ke,Le)},te=ke=>{var Le=V(),it=D(Le);{var ne=Te=>{Lu(Te)};$(it,Te=>{e.closeIcon!==null&&Te(ne)},!0)}m(ke,Le)};$(bt,ke=>{e.closeIcon?ke(gt):ke(te,!1)})}m(st,vt)};let Ce=K(()=>C()?.duration??A()),Ge=K(()=>C()?.class??""),He=K(()=>C()?.descriptionClass||""),tt=K(()=>C()?.style??""),je=K(()=>C().classes||{}),Pt=K(()=>C().unstyled??!1),Et=K(()=>C()?.cancelButtonStyle??""),Xt=K(()=>C()?.actionButtonStyle??""),Ct=K(()=>C()?.closeButtonAriaLabel??z());Pu(yt,{get index(){return a(pt)},get toast(){return a(Ee)},get defaultRichColors(){return B()},get duration(){return a(Ce)},get class(){return a(Ge)},get descriptionClass(){return a(He)},get invert(){return o()},get visibleToasts(){return M()},get closeButton(){return g()},get interacting(){return a(oe)},get position(){return kt},get style(){return a(tt)},get classes(){return a(je)},get unstyled(){return a(Pt)},get cancelButtonStyle(){return a(Et)},get actionButtonStyle(){return a(Xt)},get closeButtonAriaLabel(){return a(Ct)},get expandByDefault(){return d()},get expanded(){return a(W)},get loadingIcon(){return e.loadingIcon},successIcon:Rt,errorIcon:Ht,warningIcon:_t,infoIcon:nt,closeIcon:_e,$$slots:{successIcon:!0,errorIcon:!0,warningIcon:!0,infoIcon:!0,closeIcon:!0}})}}),Q(ht),$t(ht,yt=>F(Ie,yt),()=>a(Ie)),at(()=>ht.dir=ht.dir),m(Me,ht)}),m(he,Je)};$(xt,he=>{wt.toasts.length>0&&he(lt)})}Q(Qe),at(()=>St(Qe,"aria-label",`${N()??""} ${a(Oe)??""}`)),m(u,Qe),me()}function Gu(u,e){ge(e,!0);async function r(o,l){const h=await e.areaSelectionInteractionStore.getAreaNamesById([o]);if(!h||h.length===0||!h[0])return;const d=`Area ${l}: ${h[0]}`;Dr.success(d)}$e(()=>{e.areaSelectionInteractionStore.lastAddedArea&&r(e.areaSelectionInteractionStore.lastAddedArea.id,"added")}),$e(()=>{e.areaSelectionInteractionStore.lastRemovedArea&&r(e.areaSelectionInteractionStore.lastRemovedArea.id,"removed")}),me()}var Wu=X("<div><!></div>");function ua(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","variant","children"]);var l=Wu();zt(l,()=>({...o,class:"group/chat-bubble flex max-w-[80%] flex-row place-items-end gap-2 data-[variant='sent']:place-self-end","data-variant":e.variant}));var h=ee(l);xe(h,()=>e.children??De),Q(l),$t(l,d=>r(d),()=>r()),m(u,l),me()}var Yu=X('<span class="inline-block size-(--loading-dots-size) rounded-full bg-primary svelte-k2x6sv"></span>'),Ju=X('<div class="inline-flex items-center gap-1 svelte-k2x6sv"></div>');function Qu(u,e){let r=U(e,"size",3,4);var o=Ju();let l;nn(o,20,()=>({length:3}),tr,(h,d)=>{var g=Yu();m(h,g)}),Q(o),at(h=>l=$n(o,"",l,h),[()=>({"--loading-dots-size":`${r()??""}px`})]),m(u,o)}var Xu=X('<div class="flex size-full place-items-center justify-center"><!></div>'),Zu=X("<div><!></div>");function Hi(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=U(e,"typing",3,!1),l=Be(e,["$$slots","$$events","$$legacy","ref","typing","class","children"]);var h=Zu();zt(h,y=>({...l,class:y}),[()=>fr("order-2 rounded-lg bg-secondary p-4 text-sm group-data-[variant='received']/chat-bubble:rounded-bl-none group-data-[variant='sent']/chat-bubble:order-1 group-data-[variant='sent']/chat-bubble:rounded-br-none group-data-[variant='sent']/chat-bubble:bg-primary group-data-[variant='sent']/chat-bubble:text-primary-foreground",e.class)]);var d=ee(h);{var g=y=>{var x=Xu(),B=ee(x);Qu(B,{}),Q(x),m(y,x)},w=y=>{var x=V(),B=D(x);xe(B,()=>e.children??De),m(y,x)};$(d,y=>{o()?y(g):y(w,!1)})}Q(h),$t(h,y=>r(y),()=>r()),m(u,h),me()}function $u(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class"]);var l=V(),h=D(l);{let d=K(()=>fr("relative flex size-8 shrink-0 overflow-hidden rounded-full",e.class));pe(h,()=>Yl,(g,w)=>{w(g,Ke({"data-slot":"avatar",get class(){return a(d)}},()=>o,{get ref(){return r()},set ref(y){r(y)}}))})}m(u,l),me()}function da(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class"]);{let l=K(()=>fr("order-1 group-data-[variant='sent']/chat-bubble:order-2",e.class));$u(u,Ke({get class(){return a(l)}},()=>o,{get ref(){return r()},set ref(h){r(h)}}))}me()}function Wa(u){const e=u-1;return e*e*e+1}function fa(u,{delay:e=0,duration:r=400,easing:o=Wa,axis:l="y"}={}){const h=getComputedStyle(u),d=+h.opacity,g=l==="y"?"height":"width",w=parseFloat(h[g]),y=l==="y"?["top","bottom"]:["left","right"],x=y.map(N=>`${N[0].toUpperCase()}${N.slice(1)}`),B=parseFloat(h[`padding${x[0]}`]),A=parseFloat(h[`padding${x[1]}`]),M=parseFloat(h[`margin${x[0]}`]),C=parseFloat(h[`margin${x[1]}`]),R=parseFloat(h[`border${x[0]}Width`]),q=parseFloat(h[`border${x[1]}Width`]);return{delay:e,duration:r,easing:o,css:N=>`overflow: hidden;opacity: ${Math.min(N*20,1)*d};${g}: ${N*w}px;padding-${y[0]}: ${N*B}px;padding-${y[1]}: ${N*A}px;margin-${y[0]}: ${N*M}px;margin-${y[1]}: ${N*C}px;border-${y[0]}-width: ${N*R}px;border-${y[1]}-width: ${N*q}px;min-${g}: 0`}}function ha(u,{delay:e=0,duration:r=400,easing:o=Wa,start:l=0,opacity:h=0}={}){const d=getComputedStyle(u),g=+d.opacity,w=d.transform==="none"?"":d.transform,y=1-l,x=g*(1-h);return{delay:e,duration:r,easing:o,css:(B,A)=>`
			transform: ${w} scale(${1-y*A});
			opacity: ${g-x*A}
		`}}class ed{#e=re();#t=re(0);#n=re(!1);lastScrollHeight=0;set ref(e){if(F(this.#e,e,!0),!a(this.#e))return;this.lastScrollHeight=a(this.#e).scrollHeight,a(this.#e).scrollTo(0,a(this.#t)?a(this.#t):a(this.#e).scrollHeight),a(this.#e).addEventListener("scroll",()=>{a(this.#e)&&(F(this.#t,a(this.#e).scrollTop,!0),this.disableAutoScroll())}),window.addEventListener("resize",()=>{this.scrollToBottom(!0)}),new MutationObserver(()=>{a(this.#e)&&(a(this.#e).scrollHeight!==this.lastScrollHeight&&this.scrollToBottom(!0),this.lastScrollHeight=a(this.#e).scrollHeight)}).observe(a(this.#e),{childList:!0,subtree:!0})}get ref(){return a(this.#e)}get scrollY(){return a(this.#t)}get isAtBottom(){return a(this.#e)?a(this.#t)+a(this.#e).offsetHeight>=a(this.#e).scrollHeight:!0}disableAutoScroll(){this.isAtBottom?F(this.#n,!1):F(this.#n,!0)}scrollToBottom(e=!1){a(this.#e)&&(e&&a(this.#n)||a(this.#e).scrollTo(0,a(this.#e).scrollHeight))}}var td=X("<div><!></div>"),nd=X('<div class="relative"><div><!></div> <!></div>');function rd(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","children","class"]),l=re(!1);const h=new ed;er(()=>{F(l,!0)});var d=nd(),g=ee(d);zt(g,B=>({...o,class:B}),[()=>fr("no-scrollbar flex h-full w-full flex-col gap-4 overflow-y-auto p-4",e.class,{"scroll-smooth":a(l)})]);var w=ee(g);xe(w,()=>e.children??De),Q(g),$t(g,B=>r(B),()=>r()),$t(g,B=>h.ref=B,()=>h?.ref);var y=ve(g,2);{var x=B=>{var A=td(),M=ee(A);sn(M,{onclick:()=>h.scrollToBottom(),variant:"outline",size:"icon",class:"absolute bottom-2 left-1/2 inline-flex -translate-x-1/2 transform rounded-full shadow-md",children:(C,R)=>{Lc(C,{})},$$slots:{default:!0}}),Q(A),ui(1,A,()=>ha,()=>({start:.85,duration:100,delay:250})),ui(2,A,()=>ha,()=>({start:.85,duration:100})),m(B,A)};$(y,B=>{h.isAtBottom||B(x)})}Q(d),m(u,d),me()}var id=X(`<p class="break-words whitespace-pre-wrap"> </p> <div class="w-full text-xs group-data-[variant='sent']/chat-bubble:text-end"> </div>`,1),od=X("<!> <!>",1),ad=X('<p class="break-words whitespace-pre-wrap"> </p>'),sd=X("<!> <!>",1),ld=X("<!> <!>",1),cd=X('<div class="chat-container h-full w-full border border-border svelte-1b8k5e4"><div class="message-wrapper svelte-1b8k5e4"><!></div> <div class="input-wrapper svelte-1b8k5e4"><form class="flex shrink-0 items-center gap-2 border-t border-border bg-background p-2"><!> <!></form></div></div>');function ud(u,e){ge(e,!0);const r=1,o=2,l="Sorry, I encountered an error processing your request.",h="How can I help?";let d=re(""),g=re(!1),w=re(""),y=re(null),x=re(null),B=re(null);const A=Ze([{senderId:r,message:h,sentAt:M(new Date)}]);$e(()=>{if(a(x)&&a(B)){const de=a(x),Se=a(B),Oe=()=>{const Ne=de.offsetHeight;Se.style.paddingBottom=`${Ne}px`};Oe();const Pe=new ResizeObserver(Oe);return Pe.observe(de),()=>{Pe.disconnect()}}}),$e(()=>{A.length,a(w),a(y)&&setTimeout(()=>{const de=a(y)?.querySelector('[data-slot="scroll-area-viewport"]');de&&(de.scrollTop=de.scrollHeight)},0)});function M(de){const Se=de.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Oe=de.getHours()>=12?"PM":"AM";return`${Se} ${Oe}`}function C(de,Se){return{message:de,senderId:Se,sentAt:M(new Date)}}function R(de,Se){A.push(C(de,Se))}function q(){F(g,!1),F(w,"")}function N(de){F(w,a(w)+de)}async function z(de){if(de.preventDefault(),!a(d).trim()||a(g))return;const Se=a(d).trim();F(d,""),R(Se,o),F(g,!0),F(w,"");try{await e.aiUprnChatbotService.chatStream(Se,N)&&a(w)?R(a(w),r):R(l,r)}catch(Oe){console.error("Chat error:",Oe),R(l,r)}finally{q()}}var H=cd(),J=ee(H),Z=ee(J);fl(Z,{class:"h-full w-full",get ref(){return a(y)},set ref(de){F(y,de,!0)},children:(de,Se)=>{var Oe=V(),Pe=D(Oe);pe(Pe,()=>rd,(Ne,Ye)=>{Ye(Ne,{children:(et,Re)=>{var Ue=ld(),we=D(Ue);nn(we,16,()=>A,xt=>xt,(xt,lt)=>{var he=V(),Je=D(he);{let dt=K(()=>lt.senderId===o?"sent":"received");pe(Je,()=>ua,(Me,kt)=>{kt(Me,{get variant(){return a(dt)},children:(fe,ct)=>{var ft=od(),Ae=D(ft);pe(Ae,()=>da,(yt,Ee)=>{Ee(yt,{})});var ht=ve(Ae,2);pe(ht,()=>Hi,(yt,Ee)=>{Ee(yt,{class:"flex flex-col gap-1",children:(pt,Kt)=>{var Rt=id(),Ht=D(Rt),_t=ee(Ht,!0);Q(Ht);var nt=ve(Ht,2),_e=ee(nt,!0);Q(nt),at(()=>{qt(_t,lt.message),qt(_e,lt.sentAt)}),m(pt,Rt)},$$slots:{default:!0}})}),m(fe,ft)},$$slots:{default:!0}})})}m(xt,he)});var ze=ve(we,2);{var Qe=xt=>{var lt=V(),he=D(lt);pe(he,()=>ua,(Je,dt)=>{dt(Je,{variant:"received",children:(Me,kt)=>{var fe=sd(),ct=D(fe);pe(ct,()=>da,(Ae,ht)=>{ht(Ae,{})});var ft=ve(ct,2);pe(ft,()=>Hi,(Ae,ht)=>{ht(Ae,{class:"flex flex-col gap-1",children:(yt,Ee)=>{var pt=V(),Kt=D(pt);{var Rt=_t=>{var nt=ad(),_e=ee(nt,!0);Q(nt),at(()=>qt(_e,a(w))),m(_t,nt)},Ht=_t=>{var nt=V(),_e=D(nt);pe(_e,()=>Hi,(Ce,Ge)=>{Ge(Ce,{typing:!0})}),m(_t,nt)};$(Kt,_t=>{a(w)?_t(Rt):_t(Ht,!1)})}m(yt,pt)},$$slots:{default:!0}})}),m(Me,fe)},$$slots:{default:!0}})}),m(xt,lt)};$(ze,xt=>{a(g)&&xt(Qe)})}m(et,Ue)},$$slots:{default:!0}})}),m(de,Oe)},$$slots:{default:!0}}),Q(J),$t(J,de=>F(B,de),()=>a(B));var W=ve(J,2),oe=ee(W),be=ee(oe);$s(be,{class:"rounded-full",placeholder:"Type a message...",get disabled(){return a(g)},get value(){return a(d)},set value(de){F(d,de,!0)}});var Ie=ve(be,2);{let de=K(()=>a(d).trim()===""||a(g));sn(Ie,{type:"submit",variant:"default",size:"icon",class:"shrink-0 rounded-full",get disabled(){return a(de)},children:(Se,Oe)=>{Kc(Se,{})},$$slots:{default:!0}})}Q(oe),$t(oe,de=>F(x,de),()=>a(x)),Q(W),Q(H),Ma("submit",oe,z),m(u,H),me()}const yn=Object.freeze({Pending:"pending",InProgress:"in-progress",Completed:"completed",Failed:"failed"}),oi=Object.freeze({Submitted:"SUBMITTED",Queued:"QUEUED",Processing:"IN_PROGRESS",Completed:"COMPLETED",Error:"ERROR"}),dd=Object.freeze({Success:"success",Error:"error"});var li={exports:{}},fd=li.exports,va;function hd(){return va||(va=1,(function(u,e){(function(r,o){u.exports=o()})(fd,function(){var r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(i[c]=s[c])})(t,n)},o=function(){return(o=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++)for(var c in n=arguments[i])Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c]);return t}).apply(this,arguments)};function l(t,n,i){for(var s,c=0,f=n.length;c<f;c++)!s&&c in n||((s=s||Array.prototype.slice.call(n,0,c))[c]=n[c]);return t.concat(s||Array.prototype.slice.call(n))}var h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ml,d=Object.keys,g=Array.isArray;function w(t,n){return typeof n!="object"||d(n).forEach(function(i){t[i]=n[i]}),t}typeof Promise>"u"||h.Promise||(h.Promise=Promise);var y=Object.getPrototypeOf,x={}.hasOwnProperty;function B(t,n){return x.call(t,n)}function A(t,n){typeof n=="function"&&(n=n(y(t))),(typeof Reflect>"u"?d:Reflect.ownKeys)(n).forEach(function(i){C(t,i,n[i])})}var M=Object.defineProperty;function C(t,n,i,s){M(t,n,w(i&&B(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},s))}function R(t){return{from:function(n){return t.prototype=Object.create(n.prototype),C(t.prototype,"constructor",t),{extend:A.bind(null,t.prototype)}}}}var q=Object.getOwnPropertyDescriptor,N=[].slice;function z(t,n,i){return N.call(t,n,i)}function H(t,n){return n(t)}function J(t){if(!t)throw new Error("Assertion Failed")}function Z(t){h.setImmediate?setImmediate(t):setTimeout(t,0)}function W(t,n){if(typeof n=="string"&&B(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var i=[],s=0,c=n.length;s<c;++s){var f=W(t,n[s]);i.push(f)}return i}var v=n.indexOf(".");if(v!==-1){var p=t[n.substr(0,v)];return p==null?void 0:W(p,n.substr(v+1))}}function oe(t,n,i){if(t&&n!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){J(typeof i!="string"&&"length"in i);for(var s=0,c=n.length;s<c;++s)oe(t,n[s],i[s])}else{var f,v,p=n.indexOf(".");p!==-1?(f=n.substr(0,p),(v=n.substr(p+1))===""?i===void 0?g(t)&&!isNaN(parseInt(f))?t.splice(f,1):delete t[f]:t[f]=i:oe(p=!(p=t[f])||!B(t,f)?t[f]={}:p,v,i)):i===void 0?g(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=i}}function be(t){var n,i={};for(n in t)B(t,n)&&(i[n]=t[n]);return i}var Ie=[].concat;function de(t){return Ie.apply([],t)}var tt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(de([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return h[t]}),Se=new Set(tt.map(function(t){return h[t]})),Oe=null;function Pe(t){return Oe=new WeakMap,t=(function n(i){if(!i||typeof i!="object")return i;var s=Oe.get(i);if(s)return s;if(g(i)){s=[],Oe.set(i,s);for(var c=0,f=i.length;c<f;++c)s.push(n(i[c]))}else if(Se.has(i.constructor))s=i;else{var v,p=y(i);for(v in s=p===Object.prototype?{}:Object.create(p),Oe.set(i,s),i)B(i,v)&&(s[v]=n(i[v]))}return s})(t),Oe=null,t}var Ne={}.toString;function Ye(t){return Ne.call(t).slice(8,-1)}var et=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Re=typeof et=="symbol"?function(t){var n;return t!=null&&(n=t[et])&&n.apply(t)}:function(){return null};function Ue(t,n){return n=t.indexOf(n),0<=n&&t.splice(n,1),0<=n}var we={};function ze(t){var n,i,s,c;if(arguments.length===1){if(g(t))return t.slice();if(this===we&&typeof t=="string")return[t];if(c=Re(t)){for(i=[];!(s=c.next()).done;)i.push(s.value);return i}if(t==null)return[t];if(typeof(n=t.length)!="number")return[t];for(i=new Array(n);n--;)i[n]=t[n];return i}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var Qe=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},He=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],dn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(He),xt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function lt(t,n){this.name=t,this.message=n}function he(t,n){return t+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,s,c){return c.indexOf(i)===s}).join(`
`)}function Je(t,n,i,s){this.failures=n,this.failedKeys=s,this.successCount=i,this.message=he(t,n)}function dt(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=he(t,this.failures)}R(lt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),R(Je).from(lt),R(dt).from(lt);var Me=dn.reduce(function(t,n){return t[n]=n+"Error",t},{}),kt=lt,fe=dn.reduce(function(t,n){var i=n+"Error";function s(c,f){this.name=i,c?typeof c=="string"?(this.message="".concat(c).concat(f?`
 `+f:""),this.inner=f||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=xt[n]||i,this.inner=null)}return R(s).from(kt),t[n]=s,t},{});fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError;var ct=He.reduce(function(t,n){return t[n+"Error"]=fe[n],t},{}),ft=dn.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=fe[n]),t},{});function Ae(){}function ht(t){return t}function yt(t,n){return t==null||t===ht?n:function(i){return n(t(i))}}function Ee(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function pt(t,n){return t===Ae?n:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var s=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var f=n.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Ee(s,this.onsuccess):s),c&&(this.onerror=this.onerror?Ee(c,this.onerror):c),f!==void 0?f:i}}function Kt(t,n){return t===Ae?n:function(){t.apply(this,arguments);var i=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Ee(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Ee(s,this.onerror):s)}}function Rt(t,n){return t===Ae?n:function(i){var s=t.apply(this,arguments);w(i,s);var c=this.onsuccess,f=this.onerror;return this.onsuccess=null,this.onerror=null,i=n.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?Ee(c,this.onsuccess):c),f&&(this.onerror=this.onerror?Ee(f,this.onerror):f),s===void 0?i===void 0?void 0:i:w(s,i)}}function Ht(t,n){return t===Ae?n:function(){return n.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function _t(t,n){return t===Ae?n:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var s=this,c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return i.then(function(){return n.apply(s,f)})}return n.apply(this,arguments)}}ft.ModifyError=Je,ft.DexieError=lt,ft.BulkError=dt;var nt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function _e(t){nt=t}var Ce={},Ge=100,tt=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,y(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,y(n),t]})(),He=tt[0],dn=tt[1],tt=tt[2],dn=dn&&dn.then,je=He&&He.constructor,Pt=!!tt,Et=function(t,n){ke.push([t,n]),Ct&&(queueMicrotask(jt),Ct=!1)},Xt=!0,Ct=!0,st=[],vt=[],bt=ht,gt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ae,pgp:!1,env:{},finalize:Ae},te=gt,ke=[],Le=0,it=[];function ne(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=te;if(typeof t!="function"){if(t!==Ce)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Dt(this,this._value))}this._state=null,this._value=null,++n.ref,(function i(s,c){try{c(function(f){if(s._state===null){if(f===s)throw new TypeError("A promise cannot be resolved with itself.");var v=s._lib&&Vt();f&&typeof f.then=="function"?i(s,function(p,_){f instanceof ne?f._then(p,_):f.then(p,_)}):(s._state=!0,s._value=f,Ut(s)),v&&ln()}},Dt.bind(null,s))}catch(f){Dt(s,f)}})(this,t)}var Te={get:function(){var t=te,n=vn;function i(s,c){var f=this,v=!t.global&&(t!==te||n!==vn),p=v&&!Sn(),_=new ne(function(S,T){Ot(f,new ot(gr(s,t,v,p),gr(c,t,v,p),S,T,t))});return this._consoleTask&&(_._consoleTask=this._consoleTask),_}return i.prototype=Ce,i},set:function(t){C(this,"then",t&&t.prototype===Ce?Te:{get:function(){return t},set:Te.set})}};function ot(t,n,i,s,c){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=s,this.psd=c}function Dt(t,n){var i,s;vt.push(n),t._state===null&&(i=t._lib&&Vt(),n=bt(n),t._state=!1,t._value=n,s=t,st.some(function(c){return c._value===s._value})||st.push(s),Ut(t),i&&ln())}function Ut(t){var n=t._listeners;t._listeners=[];for(var i=0,s=n.length;i<s;++i)Ot(t,n[i]);var c=t._PSD;--c.ref||c.finalize(),Le===0&&(++Le,Et(function(){--Le==0&&Pn()},[]))}function Ot(t,n){if(t._state!==null){var i=t._state?n.onFulfilled:n.onRejected;if(i===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++Le,Et(Mt,[i,t,n])}else t._listeners.push(n)}function Mt(t,n,i){try{var s,c=n._value;!n._state&&vt.length&&(vt=[]),s=nt&&n._consoleTask?n._consoleTask.run(function(){return t(c)}):t(c),n._state||vt.indexOf(c)!==-1||(function(f){for(var v=st.length;v;)if(st[--v]._value===f._value)return st.splice(v,1)})(n),i.resolve(s)}catch(f){i.reject(f)}finally{--Le==0&&Pn(),--i.psd.ref||i.psd.finalize()}}function jt(){mn(gt,function(){Vt()&&ln()})}function Vt(){var t=Xt;return Ct=Xt=!1,t}function ln(){var t,n,i;do for(;0<ke.length;)for(t=ke,ke=[],i=t.length,n=0;n<i;++n){var s=t[n];s[0].apply(null,s[1])}while(0<ke.length);Ct=Xt=!0}function Pn(){var t=st;st=[],t.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)});for(var n=it.slice(0),i=n.length;i;)n[--i]()}function _n(t){return new ne(Ce,!1,t)}function mt(t,n){var i=te;return function(){var s=Vt(),c=te;try{return un(i,!0),t.apply(this,arguments)}catch(f){n&&n(f)}finally{un(c,!1),s&&ln()}}}A(ne.prototype,{then:Te,_then:function(t,n){Ot(this,new ot(null,null,t,n,te))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=t,i=arguments[1];return typeof n=="function"?this.then(null,function(s){return(s instanceof n?i:_n)(s)}):this.then(null,function(s){return(s&&s.name===n?i:_n)(s)})},finally:function(t){return this.then(function(n){return ne.resolve(t()).then(function(){return n})},function(n){return ne.resolve(t()).then(function(){return _n(n)})})},timeout:function(t,n){var i=this;return t<1/0?new ne(function(s,c){var f=setTimeout(function(){return c(new fe.Timeout(n))},t);i.then(s,c).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),gt.env=Lr(),A(ne,{all:function(){var t=ze.apply(null,arguments).map(gn);return new ne(function(n,i){t.length===0&&n([]);var s=t.length;t.forEach(function(c,f){return ne.resolve(c).then(function(v){t[f]=v,--s||n(t)},i)})})},resolve:function(t){return t instanceof ne?t:t&&typeof t.then=="function"?new ne(function(n,i){t.then(n,i)}):new ne(Ce,!0,t)},reject:_n,race:function(){var t=ze.apply(null,arguments).map(gn);return new ne(function(n,i){t.map(function(s){return ne.resolve(s).then(n,i)})})},PSD:{get:function(){return te},set:function(t){return te=t}},totalEchoes:{get:function(){return vn}},newPSD:cn,usePSD:mn,scheduler:{get:function(){return Et},set:function(t){Et=t}},rejectionMapper:{get:function(){return bt},set:function(t){bt=t}},follow:function(t,n){return new ne(function(i,s){return cn(function(c,f){var v=te;v.unhandleds=[],v.onunhandled=f,v.finalize=Ee(function(){var p,_=this;p=function(){_.unhandleds.length===0?c():f(_.unhandleds[0])},it.push(function S(){p(),it.splice(it.indexOf(S),1)}),++Le,Et(function(){--Le==0&&Pn()},[])},v.finalize),t()},n,i,s)})}}),je&&(je.allSettled&&C(ne,"allSettled",function(){var t=ze.apply(null,arguments).map(gn);return new ne(function(n){t.length===0&&n([]);var i=t.length,s=new Array(i);t.forEach(function(c,f){return ne.resolve(c).then(function(v){return s[f]={status:"fulfilled",value:v}},function(v){return s[f]={status:"rejected",reason:v}}).then(function(){return--i||n(s)})})})}),je.any&&typeof AggregateError<"u"&&C(ne,"any",function(){var t=ze.apply(null,arguments).map(gn);return new ne(function(n,i){t.length===0&&i(new AggregateError([]));var s=t.length,c=new Array(s);t.forEach(function(f,v){return ne.resolve(f).then(function(p){return n(p)},function(p){c[v]=p,--s||i(new AggregateError(c))})})})}),je.withResolvers&&(ne.withResolvers=je.withResolvers));var At={awaits:0,echoes:0,id:0},vr=0,nr=[],rr=0,vn=0,Gn=0;function cn(t,n,i,s){var c=te,f=Object.create(c);return f.parent=c,f.ref=0,f.global=!1,f.id=++Gn,gt.env,f.env=Pt?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},n&&w(f,n),++c.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()},s=mn(f,t,i,s),f.ref===0&&f.finalize(),s}function Nn(){return At.id||(At.id=++vr),++At.awaits,At.echoes+=Ge,At.id}function Sn(){return!!At.awaits&&(--At.awaits==0&&(At.id=0),At.echoes=At.awaits*Ge,!0)}function gn(t){return At.echoes&&t&&t.constructor===je?(Nn(),t.then(function(n){return Sn(),n},function(n){return Sn(),Nt(n)})):t}function Wn(){var t=nr[nr.length-1];nr.pop(),un(t,!1)}function un(t,n){var i,s=te;(n?!At.echoes||rr++&&t===te:!rr||--rr&&t===te)||queueMicrotask(n?(function(c){++vn,At.echoes&&--At.echoes!=0||(At.echoes=At.awaits=At.id=0),nr.push(te),un(c,!0)}).bind(null,t):Wn),t!==te&&(te=t,s===gt&&(gt.env=Lr()),Pt&&(i=gt.env.Promise,n=t.env,(s.global||t.global)&&(Object.defineProperty(h,"Promise",n.PromiseProp),i.all=n.all,i.race=n.race,i.resolve=n.resolve,i.reject=n.reject,n.allSettled&&(i.allSettled=n.allSettled),n.any&&(i.any=n.any))))}function Lr(){var t=h.Promise;return Pt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function mn(t,n,i,s,c){var f=te;try{return un(t,!0),n(i,s,c)}finally{un(f,!1)}}function gr(t,n,i,s){return typeof t!="function"?t:function(){var c=te;i&&Nn(),un(n,!0);try{return t.apply(this,arguments)}finally{un(c,!1),s&&queueMicrotask(Sn)}}}function mr(t){Promise===je&&At.echoes===0?rr===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+dn).indexOf("[native code]")===-1&&(Nn=Sn=Ae);var Nt=ne.reject,Yn="",An="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",_o="String expected.",ir=[],Br="__dbnames",pi="readonly",yi="readwrite";function Jn(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var So={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zr(t){return typeof t!="string"||/\./.test(t)?function(n){return n}:function(n){return n[t]===void 0&&t in n&&delete(n=Pe(n))[t],n}}function xo(){throw fe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function rt(t,n){try{var i=ko(t),s=ko(n);if(i!==s)return i==="Array"?1:s==="Array"?-1:i==="binary"?1:s==="binary"?-1:i==="string"?1:s==="string"?-1:i==="Date"?1:s!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return n<t?1:t<n?-1:0;case"binary":return(function(c,f){for(var v=c.length,p=f.length,_=v<p?v:p,S=0;S<_;++S)if(c[S]!==f[S])return c[S]<f[S]?-1:1;return v===p?0:v<p?-1:1})(Co(t),Co(n));case"Array":return(function(c,f){for(var v=c.length,p=f.length,_=v<p?v:p,S=0;S<_;++S){var T=rt(c[S],f[S]);if(T!==0)return T}return v===p?0:v<p?-1:1})(t,n)}}catch{}return NaN}function ko(t){var n=typeof t;return n!="object"?n:ArrayBuffer.isView(t)?"binary":(t=Ye(t),t==="ArrayBuffer"?"binary":t)}function Co(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function jr(t,n,i){var s=t.schema.yProps;return s?(n&&0<i.numFailures&&(n=n.filter(function(c,f){return!i.failures[f]})),Promise.all(s.map(function(c){return c=c.updatesTable,n?t.db.table(c).where("k").anyOf(n).delete():t.db.table(c).clear()})).then(function(){return i})):i}var pr=(Io.prototype.execute=function(t){var n=this["@@propmod"];if(n.add!==void 0){var i=n.add;if(g(i))return l(l([],g(t)?t:[],!0),i).sort();if(typeof i=="number")return(Number(t)||0)+i;if(typeof i=="bigint")try{return BigInt(t)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(n.remove!==void 0){var s=n.remove;if(g(s))return g(t)?t.filter(function(c){return!s.includes(c)}).sort():[];if(typeof s=="number")return Number(t)-s;if(typeof s=="bigint")try{return BigInt(t)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}return i=(i=n.replacePrefix)===null||i===void 0?void 0:i[0],i&&typeof t=="string"&&t.startsWith(i)?n.replacePrefix[1]+t.substring(i.length):t},Io);function Io(t){this["@@propmod"]=t}function Po(t,n){for(var i=d(n),s=i.length,c=!1,f=0;f<s;++f){var v=i[f],p=n[v],_=W(t,v);p instanceof pr?(oe(t,v,p.execute(_)),c=!0):_!==p&&(oe(t,v,p),c=!0)}return c}var Ao=(It.prototype._trans=function(t,n,i){var s=this._tx||te.trans,c=this.name,f=nt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function v(S,T,b){if(!b.schema[c])throw new fe.NotFound("Table "+c+" not part of transaction");return n(b.idbtrans,b)}var p=Vt();try{var _=s&&s.db._novip===this.db._novip?s===te.trans?s._promise(t,v,i):cn(function(){return s._promise(t,v,i)},{trans:s,transless:te.transless||te}):(function S(T,b,O,k){if(T.idbdb&&(T._state.openComplete||te.letThrough||T._vip)){var I=T._createTransaction(b,O,T._dbSchema);try{I.create(),T._state.PR1398_maxLoop=3}catch(P){return P.name===Me.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return S(T,b,O,k)})):Nt(P)}return I._promise(b,function(P,E){return cn(function(){return te.trans=I,k(P,E,I)})}).then(function(P){if(b==="readwrite")try{I.idbtrans.commit()}catch{}return b==="readonly"?P:I._completion.then(function(){return P})})}if(T._state.openComplete)return Nt(new fe.DatabaseClosed(T._state.dbOpenError));if(!T._state.isBeingOpened){if(!T._state.autoOpen)return Nt(new fe.DatabaseClosed);T.open().catch(Ae)}return T._state.dbReadyPromise.then(function(){return S(T,b,O,k)})})(this.db,t,[this.name],v);return f&&(_._consoleTask=f,_=_.catch(function(S){return console.trace(S),Nt(S)})),_}finally{p&&ln()}},It.prototype.get=function(t,n){var i=this;return t&&t.constructor===Object?this.where(t).first(n):t==null?Nt(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return i.core.get({trans:s,key:t}).then(function(c){return i.hook.reading.fire(c)})}).then(n)},It.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(g(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var n=d(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(p){if(p.compound&&n.every(function(S){return 0<=p.keyPath.indexOf(S)})){for(var _=0;_<n.length;++_)if(n.indexOf(p.keyPath[_])===-1)return!1;return!0}return!1}).sort(function(p,_){return p.keyPath.length-_.keyPath.length})[0];if(i&&this.db._maxKey!==Yn){var f=i.keyPath.slice(0,n.length);return this.where(f).equals(f.map(function(_){return t[_]}))}!i&&nt&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var s=this.schema.idxByName;function c(p,_){return rt(p,_)===0}var v=n.reduce(function(b,_){var S=b[0],T=b[1],b=s[_],O=t[_];return[S||b,S||!b?Jn(T,b&&b.multi?function(k){return k=W(k,_),g(k)&&k.some(function(I){return c(O,I)})}:function(k){return c(O,W(k,_))}):T]},[null,null]),f=v[0],v=v[1];return f?this.where(f.name).equals(t[f.keyPath]).filter(v):i?this.filter(v):this.where(n).equals("")},It.prototype.filter=function(t){return this.toCollection().and(t)},It.prototype.count=function(t){return this.toCollection().count(t)},It.prototype.offset=function(t){return this.toCollection().offset(t)},It.prototype.limit=function(t){return this.toCollection().limit(t)},It.prototype.each=function(t){return this.toCollection().each(t)},It.prototype.toArray=function(t){return this.toCollection().toArray(t)},It.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},It.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,g(t)?"[".concat(t.join("+"),"]"):t))},It.prototype.reverse=function(){return this.toCollection().reverse()},It.prototype.mapToClass=function(t){var n,i=this.db,s=this.name;function c(){return n!==null&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof xo&&((function(_,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function T(){this.constructor=_}r(_,S),_.prototype=S===null?Object.create(S):(T.prototype=S.prototype,new T)})(c,n=t),Object.defineProperty(c.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),c.prototype.table=function(){return s},t=c);for(var f=new Set,v=t.prototype;v;v=y(v))Object.getOwnPropertyNames(v).forEach(function(_){return f.add(_)});function p(_){if(!_)return _;var S,T=Object.create(t.prototype);for(S in _)if(!f.has(S))try{T[S]=_[S]}catch{}return T}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),t},It.prototype.defineClass=function(){return this.mapToClass(function(t){w(this,t)})},It.prototype.add=function(t,n){var i=this,s=this.schema.primKey,c=s.auto,f=s.keyPath,v=t;return f&&c&&(v=zr(f)(t)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"add",keys:n!=null?[n]:null,values:[v]})}).then(function(p){return p.numFailures?ne.reject(p.failures[0]):p.lastResult}).then(function(p){if(f)try{oe(t,f,p)}catch{}return p})},It.prototype.upsert=function(t,n){var i=this,s=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return i.core.get({trans:c,key:t}).then(function(f){var v=f??{};return Po(v,n),s&&oe(v,s,t),i.core.mutate({trans:c,type:"put",values:[v],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[n]}}).then(function(p){return p.numFailures?ne.reject(p.failures[0]):!!f})})})},It.prototype.update=function(t,n){return typeof t!="object"||g(t)?this.where(":id").equals(t).modify(n):(t=W(t,this.schema.primKey.keyPath),t===void 0?Nt(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(n))},It.prototype.put=function(t,n){var i=this,s=this.schema.primKey,c=s.auto,f=s.keyPath,v=t;return f&&c&&(v=zr(f)(t)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"put",values:[v],keys:n!=null?[n]:null})}).then(function(p){return p.numFailures?ne.reject(p.failures[0]):p.lastResult}).then(function(p){if(f)try{oe(t,f,p)}catch{}return p})},It.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:[t]}).then(function(s){return jr(n,[t],s)}).then(function(s){return s.numFailures?ne.reject(s.failures[0]):void 0})})},It.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:So}).then(function(i){return jr(t,null,i)})}).then(function(n){return n.numFailures?ne.reject(n.failures[0]):void 0})},It.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(i){return n.core.getMany({keys:t,trans:i}).then(function(s){return s.map(function(c){return n.hook.reading.fire(c)})})})},It.prototype.bulkAdd=function(t,n,i){var s=this,c=Array.isArray(n)?n:void 0,f=(i=i||(c?void 0:n))?i.allKeys:void 0;return this._trans("readwrite",function(v){var S=s.schema.primKey,p=S.auto,S=S.keyPath;if(S&&c)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var _=t.length,S=S&&p?t.map(zr(S)):t;return s.core.mutate({trans:v,type:"add",keys:c,values:S,wantResults:f}).then(function(I){var b=I.numFailures,O=I.results,k=I.lastResult,I=I.failures;if(b===0)return f?O:k;throw new dt("".concat(s.name,".bulkAdd(): ").concat(b," of ").concat(_," operations failed"),I)})})},It.prototype.bulkPut=function(t,n,i){var s=this,c=Array.isArray(n)?n:void 0,f=(i=i||(c?void 0:n))?i.allKeys:void 0;return this._trans("readwrite",function(v){var S=s.schema.primKey,p=S.auto,S=S.keyPath;if(S&&c)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var _=t.length,S=S&&p?t.map(zr(S)):t;return s.core.mutate({trans:v,type:"put",keys:c,values:S,wantResults:f}).then(function(I){var b=I.numFailures,O=I.results,k=I.lastResult,I=I.failures;if(b===0)return f?O:k;throw new dt("".concat(s.name,".bulkPut(): ").concat(b," of ").concat(_," operations failed"),I)})})},It.prototype.bulkUpdate=function(t){var n=this,i=this.core,s=t.map(function(v){return v.key}),c=t.map(function(v){return v.changes}),f=[];return this._trans("readwrite",function(v){return i.getMany({trans:v,keys:s,cache:"clone"}).then(function(p){var _=[],S=[];t.forEach(function(b,O){var k=b.key,I=b.changes,P=p[O];if(P){for(var E=0,L=Object.keys(I);E<L.length;E++){var j=L[E],G=I[j];if(j===n.schema.primKey.keyPath){if(rt(G,k)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else oe(P,j,G)}f.push(O),_.push(k),S.push(P)}});var T=_.length;return i.mutate({trans:v,type:"put",keys:_,values:S,updates:{keys:s,changeSpecs:c}}).then(function(b){var O=b.numFailures,k=b.failures;if(O===0)return T;for(var I=0,P=Object.keys(k);I<P.length;I++){var E,L=P[I],j=f[Number(L)];j!=null&&(E=k[L],delete k[L],k[j]=E)}throw new dt("".concat(n.name,".bulkUpdate(): ").concat(O," of ").concat(T," operations failed"),k)})})})},It.prototype.bulkDelete=function(t){var n=this,i=t.length;return this._trans("readwrite",function(s){return n.core.mutate({trans:s,type:"delete",keys:t}).then(function(c){return jr(n,t,c)})}).then(function(v){var c=v.numFailures,f=v.lastResult,v=v.failures;if(c===0)return f;throw new dt("".concat(n.name,".bulkDelete(): ").concat(c," of ").concat(i," operations failed"),v)})},It);function It(){}function yr(t){function n(v,p){if(p){for(var _=arguments.length,S=new Array(_-1);--_;)S[_-1]=arguments[_];return i[v].subscribe.apply(null,S),t}if(typeof v=="string")return i[v]}var i={};n.addEventType=f;for(var s=1,c=arguments.length;s<c;++s)f(arguments[s]);return n;function f(v,p,_){if(typeof v!="object"){var S;p=p||Ht;var T={subscribers:[],fire:_=_||Ae,subscribe:function(b){T.subscribers.indexOf(b)===-1&&(T.subscribers.push(b),T.fire=p(T.fire,b))},unsubscribe:function(b){T.subscribers=T.subscribers.filter(function(O){return O!==b}),T.fire=T.subscribers.reduce(p,_)}};return i[v]=n[v]=T}d(S=v).forEach(function(b){var O=S[b];if(g(O))f(b,S[b][0],S[b][1]);else{if(O!=="asap")throw new fe.InvalidArgument("Invalid event config");var k=f(b,ht,function(){for(var I=arguments.length,P=new Array(I);I--;)P[I]=arguments[I];k.subscribers.forEach(function(E){Z(function(){E.apply(null,P)})})})}})}}function br(t,n){return R(n).from({prototype:t}),n}function or(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function bi(t,n){t.filter=Jn(t.filter,n)}function wi(t,n,i){var s=t.replayFilter;t.replayFilter=s?function(){return Jn(s(),n())}:n,t.justLimit=i&&!s}function Vr(t,n){if(t.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(t.index);if(!i)throw new fe.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return i}function To(t,n,i){var s=Vr(t,n.schema);return n.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:s,range:t.range}})}function qr(t,n,i,s){var c=t.replayFilter?Jn(t.filter,t.replayFilter()):t.filter;if(t.or){var f={},v=function(p,_,S){var T,b;c&&!c(_,S,function(O){return _.stop(O)},function(O){return _.fail(O)})||((b=""+(T=_.primaryKey))=="[object ArrayBuffer]"&&(b=""+new Uint8Array(T)),B(f,b)||(f[b]=!0,n(p,_,S)))};return Promise.all([t.or._iterate(v,i),Eo(To(t,s,i),t.algorithm,v,!t.keysOnly&&t.valueMapper)])}return Eo(To(t,s,i),Jn(t.algorithm,c),n,!t.keysOnly&&t.valueMapper)}function Eo(t,n,i,s){var c=mt(s?function(f,v,p){return i(s(f),v,p)}:i);return t.then(function(f){if(f)return f.start(function(){var v=function(){return f.continue()};n&&!n(f,function(p){return v=p},function(p){f.stop(p),v=Ae},function(p){f.fail(p),v=Ae})||c(f.value,f,function(p){return v=p}),v()})})}var hs=(ut.prototype._read=function(t,n){var i=this._ctx;return i.error?i.table._trans(null,Nt.bind(null,i.error)):i.table._trans("readonly",t).then(n)},ut.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,Nt.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},ut.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Jn(n.algorithm,t)},ut.prototype._iterate=function(t,n){return qr(this._ctx,t,n,this._ctx.table.core)},ut.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return t&&w(i,t),n._ctx=i,n},ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},ut.prototype.each=function(t){var n=this._ctx;return this._read(function(i){return qr(n,t,i,n.table.core)})},ut.prototype.count=function(t){var n=this;return this._read(function(i){var s=n._ctx,c=s.table.core;if(or(s,!0))return c.count({trans:i,query:{index:Vr(s,c.schema),range:s.range}}).then(function(v){return Math.min(v,s.limit)});var f=0;return qr(s,function(){return++f,!1},i,c).then(function(){return f})}).then(t)},ut.prototype.sortBy=function(t,n){var i=t.split(".").reverse(),s=i[0],c=i.length-1;function f(_,S){return S?f(_[i[S]],S-1):_[s]}var v=this._ctx.dir==="next"?1:-1;function p(_,S){return rt(f(_,c),f(S,c))*v}return this.toArray(function(_){return _.sort(p)}).then(n)},ut.prototype.toArray=function(t){var n=this;return this._read(function(i){var s=n._ctx;if(s.dir==="next"&&or(s,!0)&&0<s.limit){var c=s.valueMapper,f=Vr(s,s.table.core.schema);return s.table.core.query({trans:i,limit:s.limit,values:!0,query:{index:f,range:s.range}}).then(function(p){return p=p.result,c?p.map(c):p})}var v=[];return qr(s,function(p){return v.push(p)},i,s.table.core).then(function(){return v})},t)},ut.prototype.offset=function(t){var n=this._ctx;return t<=0||(n.offset+=t,or(n)?wi(n,function(){var i=t;return function(s,c){return i===0||(i===1?--i:c(function(){s.advance(i),i=0}),!1)}}):wi(n,function(){var i=t;return function(){return--i<0}})),this},ut.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),wi(this._ctx,function(){var n=t;return function(i,s,c){return--n<=0&&s(c),0<=n}},!0),this},ut.prototype.until=function(t,n){return bi(this._ctx,function(i,s,c){return!t(i.value)||(s(c),n)}),this},ut.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},ut.prototype.last=function(t){return this.reverse().first(t)},ut.prototype.filter=function(t){var n;return bi(this._ctx,function(i){return t(i.value)}),(n=this._ctx).isMatch=Jn(n.isMatch,t),this},ut.prototype.and=function(t){return this.filter(t)},ut.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ut.prototype.desc=function(){return this.reverse()},ut.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,s){t(s.key,s)})},ut.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},ut.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,s){t(s.primaryKey,s)})},ut.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var i=[];return this.each(function(s,c){i.push(c.key)}).then(function(){return i}).then(t)},ut.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&or(n,!0)&&0<n.limit)return this._read(function(s){var c=Vr(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:c,range:n.range}})}).then(function(s){return s.result}).then(t);n.keysOnly=!n.isMatch;var i=[];return this.each(function(s,c){i.push(c.primaryKey)}).then(function(){return i}).then(t)},ut.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},ut.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},ut.prototype.lastKey=function(t){return this.reverse().firstKey(t)},ut.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var n={};return bi(this._ctx,function(c){var s=c.primaryKey.toString(),c=B(n,s);return n[s]=!0,!c}),this},ut.prototype.modify=function(t){var n=this,i=this._ctx;return this._write(function(s){var c=typeof t=="function"?t:function(P){return Po(P,t)},f=i.table.core,S=f.schema.primaryKey,v=S.outbound,p=S.extractKey,_=200,S=n.db._options.modifyChunkSize;S&&(_=typeof S=="object"?S[f.name]||S["*"]||200:S);function T(P,j){var L=j.failures,j=j.numFailures;O+=P-j;for(var G=0,Y=d(L);G<Y.length;G++){var ae=Y[G];b.push(L[ae])}}var b=[],O=0,k=[],I=t===Do;return n.clone().primaryKeys().then(function(P){function E(j){var G=Math.min(_,P.length-j),Y=P.slice(j,j+G);return(I?Promise.resolve([]):f.getMany({trans:s,keys:Y,cache:"immutable"})).then(function(ae){var ce=[],ie=[],se=v?[]:null,ue=I?Y:[];if(!I)for(var le=0;le<G;++le){var ye=ae[le],qe={value:Pe(ye),primKey:P[j+le]};c.call(qe,qe.value,qe)!==!1&&(qe.value==null?ue.push(P[j+le]):v||rt(p(ye),p(qe.value))===0?(ie.push(qe.value),v&&se.push(P[j+le])):(ue.push(P[j+le]),ce.push(qe.value)))}return Promise.resolve(0<ce.length&&f.mutate({trans:s,type:"add",values:ce}).then(function(We){for(var Xe in We.failures)ue.splice(parseInt(Xe),1);T(ce.length,We)})).then(function(){return(0<ie.length||L&&typeof t=="object")&&f.mutate({trans:s,type:"put",keys:se,values:ie,criteria:L,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<j}).then(function(We){return T(ie.length,We)})}).then(function(){return(0<ue.length||L&&I)&&f.mutate({trans:s,type:"delete",keys:ue,criteria:L,isAdditionalChunk:0<j}).then(function(We){return jr(i.table,ue,We)}).then(function(We){return T(ue.length,We)})}).then(function(){return P.length>j+G&&E(j+_)})})}var L=or(i)&&i.limit===1/0&&(typeof t!="function"||I)&&{index:i.index,range:i.range};return E(0).then(function(){if(0<b.length)throw new Je("Error modifying one or more objects",b,O,k);return P.length})})})},ut.prototype.delete=function(){var t=this._ctx,n=t.range;return!or(t)||t.table.schema.yProps||!t.isPrimKey&&n.type!==3?this.modify(Do):this._write(function(i){var s=t.table.core.schema.primaryKey,c=n;return t.table.core.count({trans:i,query:{index:s,range:c}}).then(function(f){return t.table.core.mutate({trans:i,type:"deleteRange",range:c}).then(function(_){var p=_.failures,_=_.numFailures;if(_)throw new Je("Could not delete some values",Object.keys(p).map(function(S){return p[S]}),f-_);return f-_})})})},ut);function ut(){}var Do=function(t,n){return n.value=null};function vs(t,n){return t<n?-1:t===n?0:1}function gs(t,n){return n<t?-1:t===n?0:1}function rn(t,n,i){return t=t instanceof Mo?new t.Collection(t):t,t._ctx.error=new(i||TypeError)(n),t}function ar(t){return new t.Collection(t,function(){return Oo("")}).limit(0)}function Kr(t,n,i,s){var c,f,v,p,_,S,T,b=i.length;if(!i.every(function(I){return typeof I=="string"}))return rn(t,_o);function O(I){c=I==="next"?function(E){return E.toUpperCase()}:function(E){return E.toLowerCase()},f=I==="next"?function(E){return E.toLowerCase()}:function(E){return E.toUpperCase()},v=I==="next"?vs:gs;var P=i.map(function(E){return{lower:f(E),upper:c(E)}}).sort(function(E,L){return v(E.lower,L.lower)});p=P.map(function(E){return E.upper}),_=P.map(function(E){return E.lower}),T=(S=I)==="next"?"":s}O("next"),t=new t.Collection(t,function(){return Ln(p[0],_[b-1]+s)}),t._ondirectionchange=function(I){O(I)};var k=0;return t._addAlgorithm(function(I,P,E){var L=I.key;if(typeof L!="string")return!1;var j=f(L);if(n(j,_,k))return!0;for(var G=null,Y=k;Y<b;++Y){var ae=(function(ce,ie,se,ue,le,ye){for(var qe=Math.min(ce.length,ue.length),We=-1,Xe=0;Xe<qe;++Xe){var on=ie[Xe];if(on!==ue[Xe])return le(ce[Xe],se[Xe])<0?ce.substr(0,Xe)+se[Xe]+se.substr(Xe+1):le(ce[Xe],ue[Xe])<0?ce.substr(0,Xe)+ue[Xe]+se.substr(Xe+1):0<=We?ce.substr(0,We)+ie[We]+se.substr(We+1):null;le(ce[Xe],on)<0&&(We=Xe)}return qe<ue.length&&ye==="next"?ce+se.substr(ce.length):qe<ce.length&&ye==="prev"?ce.substr(0,se.length):We<0?null:ce.substr(0,We)+ue[We]+se.substr(We+1)})(L,j,p[Y],_[Y],v,S);ae===null&&G===null?k=Y+1:(G===null||0<v(G,ae))&&(G=ae)}return P(G!==null?function(){I.continue(G+T)}:E),!1}),t}function Ln(t,n,i,s){return{type:2,lower:t,upper:n,lowerOpen:i,upperOpen:s}}function Oo(t){return{type:1,lower:t,upper:t}}var Mo=(Object.defineProperty(Gt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Gt.prototype.between=function(t,n,i,s){i=i!==!1,s=s===!0;try{return 0<this._cmp(t,n)||this._cmp(t,n)===0&&(i||s)&&(!i||!s)?ar(this):new this.Collection(this,function(){return Ln(t,n,!i,!s)})}catch{return rn(this,An)}},Gt.prototype.equals=function(t){return t==null?rn(this,An):new this.Collection(this,function(){return Oo(t)})},Gt.prototype.above=function(t){return t==null?rn(this,An):new this.Collection(this,function(){return Ln(t,void 0,!0)})},Gt.prototype.aboveOrEqual=function(t){return t==null?rn(this,An):new this.Collection(this,function(){return Ln(t,void 0,!1)})},Gt.prototype.below=function(t){return t==null?rn(this,An):new this.Collection(this,function(){return Ln(void 0,t,!1,!0)})},Gt.prototype.belowOrEqual=function(t){return t==null?rn(this,An):new this.Collection(this,function(){return Ln(void 0,t)})},Gt.prototype.startsWith=function(t){return typeof t!="string"?rn(this,_o):this.between(t,t+Yn,!0,!0)},Gt.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Kr(this,function(n,i){return n.indexOf(i[0])===0},[t],Yn)},Gt.prototype.equalsIgnoreCase=function(t){return Kr(this,function(n,i){return n===i[0]},[t],"")},Gt.prototype.anyOfIgnoreCase=function(){var t=ze.apply(we,arguments);return t.length===0?ar(this):Kr(this,function(n,i){return i.indexOf(n)!==-1},t,"")},Gt.prototype.startsWithAnyOfIgnoreCase=function(){var t=ze.apply(we,arguments);return t.length===0?ar(this):Kr(this,function(n,i){return i.some(function(s){return n.indexOf(s)===0})},t,Yn)},Gt.prototype.anyOf=function(){var t=this,n=ze.apply(we,arguments),i=this._cmp;try{n.sort(i)}catch{return rn(this,An)}if(n.length===0)return ar(this);var s=new this.Collection(this,function(){return Ln(n[0],n[n.length-1])});s._ondirectionchange=function(f){i=f==="next"?t._ascending:t._descending,n.sort(i)};var c=0;return s._addAlgorithm(function(f,v,p){for(var _=f.key;0<i(_,n[c]);)if(++c===n.length)return v(p),!1;return i(_,n[c])===0||(v(function(){f.continue(n[c])}),!1)}),s},Gt.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Gt.prototype.noneOf=function(){var t=ze.apply(we,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return rn(this,An)}var n=t.reduce(function(i,s){return i?i.concat([[i[i.length-1][1],s]]):[[-1/0,s]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},Gt.prototype.inAnyRange=function(L,n){var i=this,s=this._cmp,c=this._ascending,f=this._descending,v=this._min,p=this._max;if(L.length===0)return ar(this);if(!L.every(function(j){return j[0]!==void 0&&j[1]!==void 0&&c(j[0],j[1])<=0}))return rn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var _=!n||n.includeLowers!==!1,S=n&&n.includeUppers===!0,T,b=c;function O(j,G){return b(j[0],G[0])}try{(T=L.reduce(function(j,G){for(var Y=0,ae=j.length;Y<ae;++Y){var ce=j[Y];if(s(G[0],ce[1])<0&&0<s(G[1],ce[0])){ce[0]=v(ce[0],G[0]),ce[1]=p(ce[1],G[1]);break}}return Y===ae&&j.push(G),j},[])).sort(O)}catch{return rn(this,An)}var k=0,I=S?function(j){return 0<c(j,T[k][1])}:function(j){return 0<=c(j,T[k][1])},P=_?function(j){return 0<f(j,T[k][0])}:function(j){return 0<=f(j,T[k][0])},E=I,L=new this.Collection(this,function(){return Ln(T[0][0],T[T.length-1][1],!_,!S)});return L._ondirectionchange=function(j){b=j==="next"?(E=I,c):(E=P,f),T.sort(O)},L._addAlgorithm(function(j,G,Y){for(var ae,ce=j.key;E(ce);)if(++k===T.length)return G(Y),!1;return!I(ae=ce)&&!P(ae)||(i._cmp(ce,T[k][1])===0||i._cmp(ce,T[k][0])===0||G(function(){b===c?j.continue(T[k][0]):j.continue(T[k][1])}),!1)}),L},Gt.prototype.startsWithAnyOf=function(){var t=ze.apply(we,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?ar(this):this.inAnyRange(t.map(function(n){return[n,n+Yn]})):rn(this,"startsWithAnyOf() only works with strings")},Gt);function Gt(){}function xn(t){return mt(function(n){return wr(n),t(n.target.error),!1})}function wr(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var _r="storagemutated",_i="x-storagemutated-1",Bn=yr(null,_r),ms=(kn.prototype._lock=function(){return J(!te.global),++this._reculock,this._reculock!==1||te.global||(te.lockOwnerFor=this),this},kn.prototype._unlock=function(){if(J(!te.global),--this._reculock==0)for(te.global||(te.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{mn(t[1],t[0])}catch{}}return this},kn.prototype._locked=function(){return this._reculock&&te.lockOwnerFor!==this},kn.prototype.create=function(t){var n=this;if(!this.mode)return this;var i=this.db.idbdb,s=this.db._state.dbOpenError;if(J(!this.idbtrans),!t&&!i)switch(s&&s.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(s);case"MissingAPIError":throw new fe.MissingAPI(s.message,s);default:throw new fe.OpenFailed(s)}if(!this.active)throw new fe.TransactionInactive;return J(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=mt(function(c){wr(c),n._reject(t.error)}),t.onabort=mt(function(c){wr(c),n.active&&n._reject(new fe.Abort(t.error)),n.active=!1,n.on("abort").fire(c)}),t.oncomplete=mt(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Bn.storagemutated.fire(t.mutatedParts)}),this},kn.prototype._promise=function(t,n,i){var s=this;if(t==="readwrite"&&this.mode!=="readwrite")return Nt(new fe.ReadOnly("Transaction is readonly"));if(!this.active)return Nt(new fe.TransactionInactive);if(this._locked())return new ne(function(f,v){s._blockedFuncs.push([function(){s._promise(t,n,i).then(f,v)},te])});if(i)return cn(function(){var f=new ne(function(v,p){s._lock();var _=n(v,p,s);_&&_.then&&_.then(v,p)});return f.finally(function(){return s._unlock()}),f._lib=!0,f});var c=new ne(function(f,v){var p=n(f,v,s);p&&p.then&&p.then(f,v)});return c._lib=!0,c},kn.prototype._root=function(){return this.parent?this.parent._root():this},kn.prototype.waitFor=function(t){var n,i=this._root(),s=ne.resolve(t);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return s}):(i._waitingFor=s,i._waitingQueue=[],n=i.idbtrans.objectStore(i.storeNames[0]),(function f(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(n.get(-1/0).onsuccess=f)})());var c=i._waitingFor;return new ne(function(f,v){s.then(function(p){return i._waitingQueue.push(mt(f.bind(null,p)))},function(p){return i._waitingQueue.push(mt(v.bind(null,p)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},kn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},kn.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(B(n,t))return n[t];var i=this.schema[t];if(!i)throw new fe.NotFound("Table "+t+" not part of transaction");return i=new this.db.Table(t,i,this),i.core=this.db.core.table(t),n[t]=i},kn);function kn(){}function Si(t,n,i,s,c,f,v,p){return{name:t,keyPath:n,unique:i,multi:s,auto:c,compound:f,src:(i&&!v?"&":"")+(s?"*":"")+(c?"++":"")+Fo(n),type:p}}function Fo(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function xi(t,n,i){return{name:t,primKey:n,indexes:i,mappedClass:null,idxByName:(s=function(c){return[c.name,c]},i.reduce(function(c,f,v){return v=s(f,v),v&&(c[v[0]]=v[1]),c},{}))};var s}var Sr=function(t){try{return t.only([[]]),Sr=function(){return[[]]},[[]]}catch{return Sr=function(){return Yn},Yn}};function ki(t){return t==null?function(){}:typeof t=="string"?(n=t).split(".").length===1?function(i){return i[n]}:function(i){return W(i,n)}:function(i){return W(i,t)};var n}function Ro(t){return[].slice.call(t)}var ps=0;function xr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function ys(t,n,_){function s(E){if(E.type===3)return null;if(E.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var k=E.lower,I=E.upper,P=E.lowerOpen,E=E.upperOpen;return k===void 0?I===void 0?null:n.upperBound(I,!!E):I===void 0?n.lowerBound(k,!!P):n.bound(k,I,!!P,!!E)}function c(O){var k,I=O.name;return{name:I,schema:O,mutate:function(P){var E=P.trans,L=P.type,j=P.keys,G=P.values,Y=P.range;return new Promise(function(ae,ce){ae=mt(ae);var ie=E.objectStore(I),se=ie.keyPath==null,ue=L==="put"||L==="add";if(!ue&&L!=="delete"&&L!=="deleteRange")throw new Error("Invalid operation type: "+L);var le,ye=(j||G||{length:1}).length;if(j&&G&&j.length!==G.length)throw new Error("Given keys array must have same length as given values array.");if(ye===0)return ae({numFailures:0,failures:{},results:[],lastResult:void 0});function qe(Zt){++on,wr(Zt)}var We=[],Xe=[],on=0;if(L==="deleteRange"){if(Y.type===4)return ae({numFailures:on,failures:Xe,results:[],lastResult:void 0});Y.type===3?We.push(le=ie.clear()):We.push(le=ie.delete(s(Y)))}else{var se=ue?se?[G,j]:[G,null]:[j,null],Ve=se[0],Jt=se[1];if(ue)for(var Qt=0;Qt<ye;++Qt)We.push(le=Jt&&Jt[Qt]!==void 0?ie[L](Ve[Qt],Jt[Qt]):ie[L](Ve[Qt])),le.onerror=qe;else for(Qt=0;Qt<ye;++Qt)We.push(le=ie[L](Ve[Qt])),le.onerror=qe}function ti(Zt){Zt=Zt.target.result,We.forEach(function(Zn,qi){return Zn.error!=null&&(Xe[qi]=Zn.error)}),ae({numFailures:on,failures:Xe,results:L==="delete"?j:We.map(function(Zn){return Zn.result}),lastResult:Zt})}le.onerror=function(Zt){qe(Zt),ti(Zt)},le.onsuccess=ti})},getMany:function(P){var E=P.trans,L=P.keys;return new Promise(function(j,G){j=mt(j);for(var Y,ae=E.objectStore(I),ce=L.length,ie=new Array(ce),se=0,ue=0,le=function(We){We=We.target,ie[We._pos]=We.result,++ue===se&&j(ie)},ye=xn(G),qe=0;qe<ce;++qe)L[qe]!=null&&((Y=ae.get(L[qe]))._pos=qe,Y.onsuccess=le,Y.onerror=ye,++se);se===0&&j(ie)})},get:function(P){var E=P.trans,L=P.key;return new Promise(function(j,G){j=mt(j);var Y=E.objectStore(I).get(L);Y.onsuccess=function(ae){return j(ae.target.result)},Y.onerror=xn(G)})},query:(k=S,function(P){return new Promise(function(E,L){E=mt(E);var j,G,Y,se=P.trans,ae=P.values,ce=P.limit,le=P.query,ie=ce===1/0?void 0:ce,ue=le.index,le=le.range,se=se.objectStore(I),ue=ue.isPrimaryKey?se:se.index(ue.name),le=s(le);if(ce===0)return E({result:[]});k?((ie=ae?ue.getAll(le,ie):ue.getAllKeys(le,ie)).onsuccess=function(ye){return E({result:ye.target.result})},ie.onerror=xn(L)):(j=0,G=!ae&&"openKeyCursor"in ue?ue.openKeyCursor(le):ue.openCursor(le),Y=[],G.onsuccess=function(ye){var qe=G.result;return qe?(Y.push(ae?qe.value:qe.primaryKey),++j===ce?E({result:Y}):void qe.continue()):E({result:Y})},G.onerror=xn(L))})}),openCursor:function(P){var E=P.trans,L=P.values,j=P.query,G=P.reverse,Y=P.unique;return new Promise(function(ae,ce){ae=mt(ae);var ue=j.index,ie=j.range,se=E.objectStore(I),se=ue.isPrimaryKey?se:se.index(ue.name),ue=G?Y?"prevunique":"prev":Y?"nextunique":"next",le=!L&&"openKeyCursor"in se?se.openKeyCursor(s(ie),ue):se.openCursor(s(ie),ue);le.onerror=xn(ce),le.onsuccess=mt(function(ye){var qe,We,Xe,on,Ve=le.result;Ve?(Ve.___id=++ps,Ve.done=!1,qe=Ve.continue.bind(Ve),We=(We=Ve.continuePrimaryKey)&&We.bind(Ve),Xe=Ve.advance.bind(Ve),on=function(){throw new Error("Cursor not stopped")},Ve.trans=E,Ve.stop=Ve.continue=Ve.continuePrimaryKey=Ve.advance=function(){throw new Error("Cursor not started")},Ve.fail=mt(ce),Ve.next=function(){var Jt=this,Qt=1;return this.start(function(){return Qt--?Jt.continue():Jt.stop()}).then(function(){return Jt})},Ve.start=function(Jt){function Qt(){if(le.result)try{Jt()}catch(Zt){Ve.fail(Zt)}else Ve.done=!0,Ve.start=function(){throw new Error("Cursor behind last entry")},Ve.stop()}var ti=new Promise(function(Zt,Zn){Zt=mt(Zt),le.onerror=xn(Zn),Ve.fail=Zn,Ve.stop=function(qi){Ve.stop=Ve.continue=Ve.continuePrimaryKey=Ve.advance=on,Zt(qi)}});return le.onsuccess=mt(function(Zt){le.onsuccess=Qt,Qt()}),Ve.continue=qe,Ve.continuePrimaryKey=We,Ve.advance=Xe,Qt(),ti},ae(Ve)):ae(null)},ce)})},count:function(P){var E=P.query,L=P.trans,j=E.index,G=E.range;return new Promise(function(Y,ae){var ce=L.objectStore(I),ie=j.isPrimaryKey?ce:ce.index(j.name),ce=s(G),ie=ce?ie.count(ce):ie.count();ie.onsuccess=mt(function(se){return Y(se.target.result)}),ie.onerror=xn(ae)})}}}var f,v,p,T=(v=_,p=Ro((f=t).objectStoreNames),{schema:{name:f.name,tables:p.map(function(O){return v.objectStore(O)}).map(function(O){var k=O.keyPath,E=O.autoIncrement,I=g(k),P={},E={name:O.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:k==null,compound:I,keyPath:k,autoIncrement:E,unique:!0,extractKey:ki(k)},indexes:Ro(O.indexNames).map(function(L){return O.index(L)}).map(function(Y){var j=Y.name,G=Y.unique,ae=Y.multiEntry,Y=Y.keyPath,ae={name:j,compound:g(Y),keyPath:Y,unique:G,multiEntry:ae,extractKey:ki(Y)};return P[xr(Y)]=ae}),getIndexByKeyPath:function(L){return P[xr(L)]}};return P[":id"]=E.primaryKey,k!=null&&(P[xr(k)]=E.primaryKey),E})},hasGetAll:0<p.length&&"getAll"in v.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),_=T.schema,S=T.hasGetAll,T=_.tables.map(c),b={};return T.forEach(function(O){return b[O.name]=O}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(O){if(!b[O])throw new Error("Table '".concat(O,"' not found"));return b[O]},MIN_KEY:-1/0,MAX_KEY:Sr(n),schema:_}}function bs(t,n,i,s){var c=i.IDBKeyRange;return i.indexedDB,{dbcore:(s=ys(n,c,s),t.dbcore.reduce(function(f,v){return v=v.create,o(o({},f),v(f))},s))}}function Hr(t,s){var i=s.db,s=bs(t._middlewares,i,t._deps,s);t.core=s.dbcore,t.tables.forEach(function(c){var f=c.name;t.core.schema.tables.some(function(v){return v.name===f})&&(c.core=t.core.table(f),t[f]instanceof t.Table&&(t[f].core=c.core))})}function Ur(t,n,i,s){i.forEach(function(c){var f=s[c];n.forEach(function(v){var p=(function _(S,T){return q(S,T)||(S=y(S))&&_(S,T)})(v,c);(!p||"value"in p&&p.value===void 0)&&(v===t.Transaction.prototype||v instanceof t.Transaction?C(v,c,{get:function(){return this.table(c)},set:function(_){M(this,c,{value:_,writable:!0,configurable:!0,enumerable:!0})}}):v[c]=new t.Table(c,f))})})}function Ci(t,n){n.forEach(function(i){for(var s in i)i[s]instanceof t.Table&&delete i[s]})}function ws(t,n){return t._cfg.version-n._cfg.version}function _s(t,n,i,s){var c=t._dbSchema;i.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=xi("$meta",Lo("")[0],[]),t._storeNames.push("$meta"));var f=t._createTransaction("readwrite",t._storeNames,c);f.create(i),f._completion.catch(s);var v=f._reject.bind(f),p=te.transless||te;cn(function(){return te.trans=f,te.transless=p,n!==0?(Hr(t,i),S=n,((_=f).storeNames.includes("$meta")?_.table("$meta").get("version").then(function(T){return T??S}):ne.resolve(S)).then(function(T){return O=T,k=f,I=i,P=[],T=(b=t)._versions,E=b._dbSchema=Wr(0,b.idbdb,I),(T=T.filter(function(L){return L._cfg.version>=O})).length!==0?(T.forEach(function(L){P.push(function(){var j=E,G=L._cfg.dbschema;Yr(b,j,I),Yr(b,G,I),E=b._dbSchema=G;var Y=Ii(j,G);Y.add.forEach(function(ue){Pi(I,ue[0],ue[1].primKey,ue[1].indexes)}),Y.change.forEach(function(ue){if(ue.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var le=I.objectStore(ue.name);ue.add.forEach(function(ye){return Gr(le,ye)}),ue.change.forEach(function(ye){le.deleteIndex(ye.name),Gr(le,ye)}),ue.del.forEach(function(ye){return le.deleteIndex(ye)})});var ae=L._cfg.contentUpgrade;if(ae&&L._cfg.version>O){Hr(b,I),k._memoizedTables={};var ce=be(G);Y.del.forEach(function(ue){ce[ue]=j[ue]}),Ci(b,[b.Transaction.prototype]),Ur(b,[b.Transaction.prototype],d(ce),ce),k.schema=ce;var ie,se=Qe(ae);return se&&Nn(),Y=ne.follow(function(){var ue;(ie=ae(k))&&se&&(ue=Sn.bind(null,null),ie.then(ue,ue))}),ie&&typeof ie.then=="function"?ne.resolve(ie):Y.then(function(){return ie})}}),P.push(function(j){var G,Y,ae=L._cfg.dbschema;G=ae,Y=j,[].slice.call(Y.db.objectStoreNames).forEach(function(ce){return G[ce]==null&&Y.db.deleteObjectStore(ce)}),Ci(b,[b.Transaction.prototype]),Ur(b,[b.Transaction.prototype],b._storeNames,b._dbSchema),k.schema=b._dbSchema}),P.push(function(j){b.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(b.idbdb.version/10)===L._cfg.version?(b.idbdb.deleteObjectStore("$meta"),delete b._dbSchema.$meta,b._storeNames=b._storeNames.filter(function(G){return G!=="$meta"})):j.objectStore("$meta").put(L._cfg.version,"version"))})}),(function L(){return P.length?ne.resolve(P.shift()(k.idbtrans)).then(L):ne.resolve()})().then(function(){No(E,I)})):ne.resolve();var b,O,k,I,P,E}).catch(v)):(d(c).forEach(function(T){Pi(i,T,c[T].primKey,c[T].indexes)}),Hr(t,i),void ne.follow(function(){return t.on.populate.fire(f)}).catch(v));var _,S})}function Ss(t,n){No(t._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains("$meta")||n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=Wr(0,t.idbdb,n);Yr(t,t._dbSchema,n);for(var s=0,c=Ii(i,t._dbSchema).change;s<c.length;s++){var f=(function(v){if(v.change.length||v.recreate)return console.warn("Unable to patch indexes of table ".concat(v.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=n.objectStore(v.name);v.add.forEach(function(_){nt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(v.name,".").concat(_.src)),Gr(p,_)})})(c[s]);if(typeof f=="object")return f.value}}function Ii(t,n){var i,s={del:[],add:[],change:[]};for(i in t)n[i]||s.del.push(i);for(i in n){var c=t[i],f=n[i];if(c){var v={name:i,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||c.primKey.auto!==f.primKey.auto)v.recreate=!0,s.change.push(v);else{var p=c.idxByName,_=f.idxByName,S=void 0;for(S in p)_[S]||v.del.push(S);for(S in _){var T=p[S],b=_[S];T?T.src!==b.src&&v.change.push(b):v.add.push(b)}(0<v.del.length||0<v.add.length||0<v.change.length)&&s.change.push(v)}}else s.add.push([i,f])}return s}function Pi(t,n,i,s){var c=t.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return s.forEach(function(f){return Gr(c,f)}),c}function No(t,n){d(t).forEach(function(i){n.db.objectStoreNames.contains(i)||(nt&&console.debug("Dexie: Creating missing table",i),Pi(n,i,t[i].primKey,t[i].indexes))})}function Gr(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Wr(t,n,i){var s={};return z(n.objectStoreNames,0).forEach(function(c){for(var f=i.objectStore(c),v=Si(Fo(S=f.keyPath),S||"",!0,!1,!!f.autoIncrement,S&&typeof S!="string",!0),p=[],_=0;_<f.indexNames.length;++_){var T=f.index(f.indexNames[_]),S=T.keyPath,T=Si(T.name,S,!!T.unique,!!T.multiEntry,!1,S&&typeof S!="string",!1);p.push(T)}s[c]=xi(c,v,p)}),s}function Yr(t,n,i){for(var s=i.db.objectStoreNames,c=0;c<s.length;++c){var f=s[c],v=i.objectStore(f);t._hasGetAll="getAll"in v;for(var p=0;p<v.indexNames.length;++p){var _=v.indexNames[p],S=v.index(_).keyPath,T=typeof S=="string"?S:"["+z(S).join("+")+"]";!n[f]||(S=n[f].idxByName[T])&&(S.name=_,delete n[f].idxByName[T],n[f].idxByName[_]=S)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Lo(t){return t.split(",").map(function(n,i){var f=n.split(":"),s=(c=f[1])===null||c===void 0?void 0:c.trim(),c=(n=f[0].trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Si(c,f||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),g(f),i===0,s)})}var xs=(sr.prototype._createTableSchema=xi,sr.prototype._parseIndexSyntax=Lo,sr.prototype._parseStoresSpec=function(t,n){var i=this;d(t).forEach(function(s){if(t[s]!==null){var c=i._parseIndexSyntax(t[s]),f=c.shift();if(!f)throw new fe.Schema("Invalid schema for table "+s+": "+t[s]);if(f.unique=!0,f.multi)throw new fe.Schema("Primary key cannot be multiEntry*");c.forEach(function(v){if(v.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!v.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),c=i._createTableSchema(s,f,c),n[s]=c}})},sr.prototype.stores=function(i){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?w(this._cfg.storesSource,i):i;var i=n._versions,s={},c={};return i.forEach(function(f){w(s,f._cfg.storesSource),c=f._cfg.dbschema={},f._parseStoresSpec(s,c)}),n._dbSchema=c,Ci(n,[n._allTables,n,n.Transaction.prototype]),Ur(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],d(c),c),n._storeNames=d(c),this},sr.prototype.upgrade=function(t){return this._cfg.contentUpgrade=_t(this._cfg.contentUpgrade||Ae,t),this},sr);function sr(){}function Ai(t,n){var i=t._dbNamesDB;return i||(i=t._dbNamesDB=new Tn(Br,{addons:[],indexedDB:t,IDBKeyRange:n})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function Ti(t){return t&&typeof t.databases=="function"}function Ei(t){return cn(function(){return te.letThrough=!0,t()})}function Di(t){return!("from"in t)}var Yt=function(t,n){if(!this){var i=new Yt;return t&&"d"in t&&w(i,t),i}w(this,arguments.length?{d:1,from:t,to:1<arguments.length?n:t}:{d:0})};function kr(t,n,i){var s=rt(n,i);if(!isNaN(s)){if(0<s)throw RangeError();if(Di(t))return w(t,{from:n,to:i,d:1});var c=t.l,s=t.r;if(rt(i,t.from)<0)return c?kr(c,n,i):t.l={from:n,to:i,d:1,l:null,r:null},zo(t);if(0<rt(n,t.to))return s?kr(s,n,i):t.r={from:n,to:i,d:1,l:null,r:null},zo(t);rt(n,t.from)<0&&(t.from=n,t.l=null,t.d=s?s.d+1:1),0<rt(i,t.to)&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1),i=!t.r,c&&!t.l&&Cr(t,c),s&&i&&Cr(t,s)}}function Cr(t,n){Di(n)||(function i(s,_){var f=_.from,v=_.to,p=_.l,_=_.r;kr(s,f,v),p&&i(s,p),_&&i(s,_)})(t,n)}function Bo(t,n){var i=Jr(n),s=i.next();if(s.done)return!1;for(var c=s.value,f=Jr(t),v=f.next(c.from),p=v.value;!s.done&&!v.done;){if(rt(p.from,c.to)<=0&&0<=rt(p.to,c.from))return!0;rt(c.from,p.from)<0?c=(s=i.next(p.from)).value:p=(v=f.next(c.from)).value}return!1}function Jr(t){var n=Di(t)?null:{s:0,n:t};return{next:function(i){for(var s=0<arguments.length;n;)switch(n.s){case 0:if(n.s=1,s)for(;n.n.l&&rt(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!s||rt(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function zo(t){var n,i,s=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),c=1<s?"r":s<-1?"l":"";c&&(n=c=="r"?"l":"r",i=o({},t),s=t[c],t.from=s.from,t.to=s.to,t[c]=s[c],i[c]=s[n],(t[n]=i).d=jo(i)),t.d=jo(t)}function jo(i){var n=i.r,i=i.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function Qr(t,n){return d(n).forEach(function(i){t[i]?Cr(t[i],n[i]):t[i]=(function s(c){var f,v,p={};for(f in c)B(c,f)&&(v=c[f],p[f]=!v||typeof v!="object"||Se.has(v.constructor)?v:s(v));return p})(n[i])}),t}function Oi(t,n){return t.all||n.all||Object.keys(t).some(function(i){return n[i]&&Bo(n[i],t[i])})}A(Yt.prototype,((dn={add:function(t){return Cr(this,t),this},addKey:function(t){return kr(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(i){return kr(n,i,i)}),this},hasKey:function(t){var n=Jr(this).next(t).value;return n&&rt(n.from,t)<=0&&0<=rt(n.to,t)}})[et]=function(){return Jr(this)},dn));var Qn={},Mi={},Fi=!1;function Xr(t){Qr(Mi,t),Fi||(Fi=!0,setTimeout(function(){Fi=!1,Ri(Mi,!(Mi={}))},0))}function Ri(t,n){n===void 0&&(n=!1);var i=new Set;if(t.all)for(var s=0,c=Object.values(Qn);s<c.length;s++)Vo(v=c[s],t,i,n);else for(var f in t){var v,p=/^idb\:\/\/(.*)\/(.*)\//.exec(f);p&&(f=p[1],p=p[2],(v=Qn["idb://".concat(f,"/").concat(p)])&&Vo(v,t,i,n))}i.forEach(function(_){return _()})}function Vo(t,n,i,s){for(var c=[],f=0,v=Object.entries(t.queries.query);f<v.length;f++){for(var p=v[f],_=p[0],S=[],T=0,b=p[1];T<b.length;T++){var O=b[T];Oi(n,O.obsSet)?O.subscribers.forEach(function(E){return i.add(E)}):s&&S.push(O)}s&&c.push([_,S])}if(s)for(var k=0,I=c;k<I.length;k++){var P=I[k],_=P[0],S=P[1];t.queries.query[_]=S}}function ks(t){var n=t._state,i=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?Nt(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var s=n.openCanceller,c=Math.round(10*t.verno),f=!1;function v(){if(n.openCanceller!==s)throw new fe.DatabaseClosed("db.open() was cancelled")}function p(){return new ne(function(O,k){if(v(),!i)throw new fe.MissingAPI;var I=t.name,P=n.autoSchema||!c?i.open(I):i.open(I,c);if(!P)throw new fe.MissingAPI;P.onerror=xn(k),P.onblocked=mt(t._fireOnBlocked),P.onupgradeneeded=mt(function(E){var L;T=P.transaction,n.autoSchema&&!t._options.allowEmptyDB?(P.onerror=wr,T.abort(),P.result.close(),(L=i.deleteDatabase(I)).onsuccess=L.onerror=mt(function(){k(new fe.NoSuchDatabase("Database ".concat(I," doesnt exist")))})):(T.onerror=xn(k),E=E.oldVersion>Math.pow(2,62)?0:E.oldVersion,b=E<1,t.idbdb=P.result,f&&Ss(t,T),_s(t,E/10,T,k))},k),P.onsuccess=mt(function(){T=null;var E,L,j,G,Y,ae=t.idbdb=P.result,ce=z(ae.objectStoreNames);if(0<ce.length)try{var ie=ae.transaction((G=ce).length===1?G[0]:G,"readonly");if(n.autoSchema)L=ae,j=ie,(E=t).verno=L.version/10,j=E._dbSchema=Wr(0,L,j),E._storeNames=z(L.objectStoreNames,0),Ur(E,[E._allTables],d(j),j);else if(Yr(t,t._dbSchema,ie),((Y=Ii(Wr(0,(Y=t).idbdb,ie),Y._dbSchema)).add.length||Y.change.some(function(se){return se.add.length||se.change.length}))&&!f)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ae.close(),c=ae.version+1,f=!0,O(p());Hr(t,ie)}catch{}ir.push(t),ae.onversionchange=mt(function(se){n.vcFired=!0,t.on("versionchange").fire(se)}),ae.onclose=mt(function(){t.close({disableAutoOpen:!1})}),b&&(Y=t._deps,ie=I,ae=Y.indexedDB,Y=Y.IDBKeyRange,Ti(ae)||ie===Br||Ai(ae,Y).put({name:ie}).catch(Ae)),O()},k)}).catch(function(O){switch(O?.name){case"UnknownError":if(0<n.PR1398_maxLoop)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<c)return c=0,p()}return ne.reject(O)})}var _,S=n.dbReadyResolve,T=null,b=!1;return ne.race([s,(typeof navigator>"u"?ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function k(){return indexedDB.databases().finally(O)}_=setInterval(k,100),k()}).finally(function(){return clearInterval(_)}):Promise.resolve()).then(p)]).then(function(){return v(),n.onReadyBeingFired=[],ne.resolve(Ei(function(){return t.on.ready.fire(t.vip)})).then(function O(){if(0<n.onReadyBeingFired.length){var k=n.onReadyBeingFired.reduce(_t,Ae);return n.onReadyBeingFired=[],ne.resolve(Ei(function(){return k(t.vip)})).then(O)}})}).finally(function(){n.openCanceller===s&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(O){n.dbOpenError=O;try{T&&T.abort()}catch{}return s===n.openCanceller&&t._close(),Nt(O)}).finally(function(){n.openComplete=!0,S()}).then(function(){var O;return b&&(O={},t.tables.forEach(function(k){k.schema.indexes.forEach(function(I){I.name&&(O["idb://".concat(t.name,"/").concat(k.name,"/").concat(I.name)]=new Yt(-1/0,[[[]]]))}),O["idb://".concat(t.name,"/").concat(k.name,"/")]=O["idb://".concat(t.name,"/").concat(k.name,"/:dels")]=new Yt(-1/0,[[[]]])}),Bn(_r).fire(O),Ri(O,!0)),t})}function Ni(t){function n(f){return t.next(f)}var i=c(n),s=c(function(f){return t.throw(f)});function c(f){return function(_){var p=f(_),_=p.value;return p.done?_:_&&typeof _.then=="function"?_.then(i,s):g(_)?Promise.all(_).then(i,s):i(_)}}return c(n)()}function Zr(t,n,i){for(var s=g(t)?t.slice():[t],c=0;c<i;++c)s.push(n);return s}var Cs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return o(o({},t),{table:function(n){var i=t.table(n),s=i.schema,c={},f=[];function v(b,O,k){var I=xr(b),P=c[I]=c[I]||[],E=b==null?0:typeof b=="string"?1:b.length,L=0<O,L=o(o({},k),{name:L?"".concat(I,"(virtual-from:").concat(k.name,")"):k.name,lowLevelIndex:k,isVirtual:L,keyTail:O,keyLength:E,extractKey:ki(b),unique:!L&&k.unique});return P.push(L),L.isPrimaryKey||f.push(L),1<E&&v(E===2?b[0]:b.slice(0,E-1),O+1,k),P.sort(function(j,G){return j.keyTail-G.keyTail}),L}n=v(s.primaryKey.keyPath,0,s.primaryKey),c[":id"]=[n];for(var p=0,_=s.indexes;p<_.length;p++){var S=_[p];v(S.keyPath,0,S)}function T(b){var O,k=b.query.index;return k.isVirtual?o(o({},b),{query:{index:k.lowLevelIndex,range:(O=b.query.range,k=k.keyTail,{type:O.type===1?2:O.type,lower:Zr(O.lower,O.lowerOpen?t.MAX_KEY:t.MIN_KEY,k),lowerOpen:!0,upper:Zr(O.upper,O.upperOpen?t.MIN_KEY:t.MAX_KEY,k),upperOpen:!0})}}):b}return o(o({},i),{schema:o(o({},s),{primaryKey:n,indexes:f,getIndexByKeyPath:function(b){return(b=c[xr(b)])&&b[0]}}),count:function(b){return i.count(T(b))},query:function(b){return i.query(T(b))},openCursor:function(b){var O=b.query.index,k=O.keyTail,I=O.isVirtual,P=O.keyLength;return I?i.openCursor(T(b)).then(function(L){return L&&E(L)}):i.openCursor(b);function E(L){return Object.create(L,{continue:{value:function(j){j!=null?L.continue(Zr(j,b.reverse?t.MAX_KEY:t.MIN_KEY,k)):b.unique?L.continue(L.key.slice(0,P).concat(b.reverse?t.MIN_KEY:t.MAX_KEY,k)):L.continue()}},continuePrimaryKey:{value:function(j,G){L.continuePrimaryKey(Zr(j,t.MAX_KEY,k),G)}},primaryKey:{get:function(){return L.primaryKey}},key:{get:function(){var j=L.key;return P===1?j[0]:j.slice(0,P)}},value:{get:function(){return L.value}}})}}})}})}};function Li(t,n,i,s){return i=i||{},s=s||"",d(t).forEach(function(c){var f,v,p;B(n,c)?(f=t[c],v=n[c],typeof f=="object"&&typeof v=="object"&&f&&v?(p=Ye(f))!==Ye(v)?i[s+c]=n[c]:p==="Object"?Li(f,v,i,s+c+"."):f!==v&&(i[s+c]=n[c]):f!==v&&(i[s+c]=n[c])):i[s+c]=void 0}),d(n).forEach(function(c){B(t,c)||(i[s+c]=n[c])}),i}function Bi(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var Is={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return o(o({},t),{table:function(n){var i=t.table(n),s=i.schema.primaryKey;return o(o({},i),{mutate:function(c){var f=te.trans,v=f.table(n).hook,p=v.deleting,_=v.creating,S=v.updating;switch(c.type){case"add":if(_.fire===Ae)break;return f._promise("readwrite",function(){return T(c)},!0);case"put":if(_.fire===Ae&&S.fire===Ae)break;return f._promise("readwrite",function(){return T(c)},!0);case"delete":if(p.fire===Ae)break;return f._promise("readwrite",function(){return T(c)},!0);case"deleteRange":if(p.fire===Ae)break;return f._promise("readwrite",function(){return(function b(O,k,I){return i.query({trans:O,values:!1,query:{index:s,range:k},limit:I}).then(function(P){var E=P.result;return T({type:"delete",keys:E,trans:O}).then(function(L){return 0<L.numFailures?Promise.reject(L.failures[0]):E.length<I?{failures:[],numFailures:0,lastResult:void 0}:b(O,o(o({},k),{lower:E[E.length-1],lowerOpen:!0}),I)})})})(c.trans,c.range,1e4)},!0)}return i.mutate(c);function T(b){var O,k,I,P=te.trans,E=b.keys||Bi(s,b);if(!E)throw new Error("Keys missing");return(b=b.type==="add"||b.type==="put"?o(o({},b),{keys:E}):o({},b)).type!=="delete"&&(b.values=l([],b.values)),b.keys&&(b.keys=l([],b.keys)),O=i,I=E,((k=b).type==="add"?Promise.resolve([]):O.getMany({trans:k.trans,keys:I,cache:"immutable"})).then(function(L){var j=E.map(function(G,Y){var ae,ce,ie,se=L[Y],ue={onerror:null,onsuccess:null};return b.type==="delete"?p.fire.call(ue,G,se,P):b.type==="add"||se===void 0?(ae=_.fire.call(ue,G,b.values[Y],P),G==null&&ae!=null&&(b.keys[Y]=G=ae,s.outbound||oe(b.values[Y],s.keyPath,G))):(ae=Li(se,b.values[Y]),(ce=S.fire.call(ue,ae,G,se,P))&&(ie=b.values[Y],Object.keys(ce).forEach(function(le){B(ie,le)?ie[le]=ce[le]:oe(ie,le,ce[le])}))),ue});return i.mutate(b).then(function(G){for(var Y=G.failures,ae=G.results,ce=G.numFailures,G=G.lastResult,ie=0;ie<E.length;++ie){var se=(ae||E)[ie],ue=j[ie];se==null?ue.onerror&&ue.onerror(Y[ie]):ue.onsuccess&&ue.onsuccess(b.type==="put"&&L[ie]?b.values[ie]:se)}return{failures:Y,results:ae,numFailures:ce,lastResult:G}}).catch(function(G){return j.forEach(function(Y){return Y.onerror&&Y.onerror(G)}),Promise.reject(G)})})}}})}})}};function qo(t,n,i){try{if(!n||n.keys.length<t.length)return null;for(var s=[],c=0,f=0;c<n.keys.length&&f<t.length;++c)rt(n.keys[c],t[f])===0&&(s.push(i?Pe(n.values[c]):n.values[c]),++f);return s.length===t.length?s:null}catch{return null}}var Ps={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return o(o({},i),{getMany:function(s){if(!s.cache)return i.getMany(s);var c=qo(s.keys,s.trans._cache,s.cache==="clone");return c?ne.resolve(c):i.getMany(s).then(function(f){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?Pe(f):f},f})},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),i.mutate(s)}})}}}};function Ko(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function Ho(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var As={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new Yt(t.MIN_KEY,t.MAX_KEY);return o(o({},t),{transaction:function(s,c,f){if(te.subscr&&c!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(te.querier));return t.transaction(s,c,f)},table:function(s){var c=t.table(s),f=c.schema,v=f.primaryKey,b=f.indexes,p=v.extractKey,_=v.outbound,S=v.autoIncrement&&b.filter(function(k){return k.compound&&k.keyPath.includes(v.keyPath)}),T=o(o({},c),{mutate:function(k){function I(le){return le="idb://".concat(n,"/").concat(s,"/").concat(le),G[le]||(G[le]=new Yt)}var P,E,L,j=k.trans,G=k.mutatedParts||(k.mutatedParts={}),Y=I(""),ae=I(":dels"),ce=k.type,ue=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[Bi(v,k).filter(function(le){return le}),k.values]:[],ie=ue[0],se=ue[1],ue=k.trans._cache;return g(ie)?(Y.addKeys(ie),(ue=ce==="delete"||ie.length===se.length?qo(ie,ue):null)||ae.addKeys(ie),(ue||se)&&(P=I,E=ue,L=se,f.indexes.forEach(function(le){var ye=P(le.name||"");function qe(Xe){return Xe!=null?le.extractKey(Xe):null}function We(Xe){return le.multiEntry&&g(Xe)?Xe.forEach(function(on){return ye.addKey(on)}):ye.addKey(Xe)}(E||L).forEach(function(Xe,Jt){var Ve=E&&qe(E[Jt]),Jt=L&&qe(L[Jt]);rt(Ve,Jt)!==0&&(Ve!=null&&We(Ve),Jt!=null&&We(Jt))})}))):ie?(se={from:(se=ie.lower)!==null&&se!==void 0?se:t.MIN_KEY,to:(se=ie.upper)!==null&&se!==void 0?se:t.MAX_KEY},ae.add(se),Y.add(se)):(Y.add(i),ae.add(i),f.indexes.forEach(function(le){return I(le.name).add(i)})),c.mutate(k).then(function(le){return!ie||k.type!=="add"&&k.type!=="put"||(Y.addKeys(le.results),S&&S.forEach(function(ye){for(var qe=k.values.map(function(Ve){return ye.extractKey(Ve)}),We=ye.keyPath.findIndex(function(Ve){return Ve===v.keyPath}),Xe=0,on=le.results.length;Xe<on;++Xe)qe[Xe][We]=le.results[Xe];I(ye.name).addKeys(qe)})),j.mutatedParts=Qr(j.mutatedParts||{},G),le})}}),b=function(I){var P=I.query,I=P.index,P=P.range;return[I,new Yt((I=P.lower)!==null&&I!==void 0?I:t.MIN_KEY,(P=P.upper)!==null&&P!==void 0?P:t.MAX_KEY)]},O={get:function(k){return[v,new Yt(k.key)]},getMany:function(k){return[v,new Yt().addKeys(k.keys)]},count:b,query:b,openCursor:b};return d(O).forEach(function(k){T[k]=function(I){var P=te.subscr,E=!!P,L=Ko(te,c)&&Ho(k,I)?I.obsSet={}:P;if(E){var j=function(se){return se="idb://".concat(n,"/").concat(s,"/").concat(se),L[se]||(L[se]=new Yt)},G=j(""),Y=j(":dels"),P=O[k](I),E=P[0],P=P[1];if((k==="query"&&E.isPrimaryKey&&!I.values?Y:j(E.name||"")).add(P),!E.isPrimaryKey){if(k!=="count"){var ae=k==="query"&&_&&I.values&&c.query(o(o({},I),{values:!1}));return c[k].apply(this,arguments).then(function(se){if(k==="query"){if(_&&I.values)return ae.then(function(qe){return qe=qe.result,G.addKeys(qe),se});var ue=I.values?se.result.map(p):se.result;(I.values?G:Y).addKeys(ue)}else if(k==="openCursor"){var le=se,ye=I.values;return le&&Object.create(le,{key:{get:function(){return Y.addKey(le.primaryKey),le.key}},primaryKey:{get:function(){var qe=le.primaryKey;return Y.addKey(qe),qe}},value:{get:function(){return ye&&G.addKey(le.primaryKey),le.value}}})}return se})}Y.add(i)}}return c[k].apply(this,arguments)}}),T}})}};function Uo(t,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var s=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return i.numFailures===s?null:(n=o({},n),g(n.keys)&&(n.keys=n.keys.filter(function(c,f){return!(f in i.failures)})),"values"in n&&g(n.values)&&(n.values=n.values.filter(function(c,f){return!(f in i.failures)})),n)}function zi(t,n){return i=t,((s=n).lower===void 0||(s.lowerOpen?0<rt(i,s.lower):0<=rt(i,s.lower)))&&(t=t,(n=n).upper===void 0||(n.upperOpen?rt(t,n.upper)<0:rt(t,n.upper)<=0));var i,s}function Go(t,n,O,s,c,f){if(!O||O.length===0)return t;var v=n.query.index,p=v.multiEntry,_=n.query.range,S=s.schema.primaryKey.extractKey,T=v.extractKey,b=(v.lowLevelIndex||v).extractKey,O=O.reduce(function(k,I){var P=k,E=[];if(I.type==="add"||I.type==="put")for(var L=new Yt,j=I.values.length-1;0<=j;--j){var G,Y=I.values[j],ae=S(Y);L.hasKey(ae)||(G=T(Y),(p&&g(G)?G.some(function(le){return zi(le,_)}):zi(G,_))&&(L.addKey(ae),E.push(Y)))}switch(I.type){case"add":var ce=new Yt().addKeys(n.values?k.map(function(ye){return S(ye)}):k),P=k.concat(n.values?E.filter(function(ye){return ye=S(ye),!ce.hasKey(ye)&&(ce.addKey(ye),!0)}):E.map(function(ye){return S(ye)}).filter(function(ye){return!ce.hasKey(ye)&&(ce.addKey(ye),!0)}));break;case"put":var ie=new Yt().addKeys(I.values.map(function(ye){return S(ye)}));P=k.filter(function(ye){return!ie.hasKey(n.values?S(ye):ye)}).concat(n.values?E:E.map(function(ye){return S(ye)}));break;case"delete":var se=new Yt().addKeys(I.keys);P=k.filter(function(ye){return!se.hasKey(n.values?S(ye):ye)});break;case"deleteRange":var ue=I.range;P=k.filter(function(ye){return!zi(S(ye),ue)})}return P},t);return O===t?t:(O.sort(function(k,I){return rt(b(k),b(I))||rt(S(k),S(I))}),n.limit&&n.limit<1/0&&(O.length>n.limit?O.length=n.limit:t.length===n.limit&&O.length<n.limit&&(c.dirty=!0)),f?Object.freeze(O):O)}function Wo(t,n){return rt(t.lower,n.lower)===0&&rt(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function Ts(t,n){return(function(i,s,c,f){if(i===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;if((s=rt(i,s))===0){if(c&&f)return 0;if(c)return 1;if(f)return-1}return s})(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&0<=(function(i,s,c,f){if(i===void 0)return s!==void 0?1:0;if(s===void 0)return-1;if((s=rt(i,s))===0){if(c&&f)return 0;if(c)return-1;if(f)return 1}return s})(t.upper,n.upper,t.upperOpen,n.upperOpen)}function Es(t,n,i,s){t.subscribers.add(i),s.addEventListener("abort",function(){var c,f;t.subscribers.delete(i),t.subscribers.size===0&&(c=t,f=n,setTimeout(function(){c.subscribers.size===0&&Ue(f,c)},3e3))})}var Ds={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name;return o(o({},t),{transaction:function(i,s,c){var f,v,p=t.transaction(i,s,c);return s==="readwrite"&&(v=(f=new AbortController).signal,c=function(_){return function(){if(f.abort(),s==="readwrite"){for(var S=new Set,T=0,b=i;T<b.length;T++){var O=b[T],k=Qn["idb://".concat(n,"/").concat(O)];if(k){var I=t.table(O),P=k.optimisticOps.filter(function(ye){return ye.trans===p});if(p._explicit&&_&&p.mutatedParts)for(var E=0,L=Object.values(k.queries.query);E<L.length;E++)for(var j=0,G=(ce=L[E]).slice();j<G.length;j++)Oi((ie=G[j]).obsSet,p.mutatedParts)&&(Ue(ce,ie),ie.subscribers.forEach(function(ye){return S.add(ye)}));else if(0<P.length){k.optimisticOps=k.optimisticOps.filter(function(ye){return ye.trans!==p});for(var Y=0,ae=Object.values(k.queries.query);Y<ae.length;Y++)for(var ce,ie,se,ue=0,le=(ce=ae[Y]).slice();ue<le.length;ue++)(ie=le[ue]).res!=null&&p.mutatedParts&&(_&&!ie.dirty?(se=Object.isFrozen(ie.res),se=Go(ie.res,ie.req,P,I,ie,se),ie.dirty?(Ue(ce,ie),ie.subscribers.forEach(function(ye){return S.add(ye)})):se!==ie.res&&(ie.res=se,ie.promise=ne.resolve({result:se}))):(ie.dirty&&Ue(ce,ie),ie.subscribers.forEach(function(ye){return S.add(ye)})))}}}S.forEach(function(ye){return ye()})}}},p.addEventListener("abort",c(!1),{signal:v}),p.addEventListener("error",c(!1),{signal:v}),p.addEventListener("complete",c(!0),{signal:v})),p},table:function(i){var s=t.table(i),c=s.schema.primaryKey;return o(o({},s),{mutate:function(f){var v=te.trans;if(c.outbound||v.db._options.cache==="disabled"||v.explicit||v.idbtrans.mode!=="readwrite")return s.mutate(f);var p=Qn["idb://".concat(n,"/").concat(i)];return p?(v=s.mutate(f),f.type!=="add"&&f.type!=="put"||!(50<=f.values.length||Bi(c,f).some(function(_){return _==null}))?(p.optimisticOps.push(f),f.mutatedParts&&Xr(f.mutatedParts),v.then(function(_){0<_.numFailures&&(Ue(p.optimisticOps,f),(_=Uo(0,f,_))&&p.optimisticOps.push(_),f.mutatedParts&&Xr(f.mutatedParts))}),v.catch(function(){Ue(p.optimisticOps,f),f.mutatedParts&&Xr(f.mutatedParts)})):v.then(function(_){var S=Uo(0,o(o({},f),{values:f.values.map(function(T,b){var O;return _.failures[b]?T:(T=(O=c.keyPath)!==null&&O!==void 0&&O.includes(".")?Pe(T):o({},T),oe(T,c.keyPath,_.results[b]),T)})}),_);p.optimisticOps.push(S),queueMicrotask(function(){return f.mutatedParts&&Xr(f.mutatedParts)})}),v):s.mutate(f)},query:function(f){if(!Ko(te,s)||!Ho("query",f))return s.query(f);var v=((S=te.trans)===null||S===void 0?void 0:S.db._options.cache)==="immutable",b=te,p=b.requery,_=b.signal,S=(function(I,P,E,L){var j=Qn["idb://".concat(I,"/").concat(P)];if(!j)return[];if(!(P=j.queries[E]))return[null,!1,j,null];var G=P[(L.query?L.query.index.name:null)||""];if(!G)return[null,!1,j,null];switch(E){case"query":var Y=G.find(function(ae){return ae.req.limit===L.limit&&ae.req.values===L.values&&Wo(ae.req.query.range,L.query.range)});return Y?[Y,!0,j,G]:[G.find(function(ae){return("limit"in ae.req?ae.req.limit:1/0)>=L.limit&&(!L.values||ae.req.values)&&Ts(ae.req.query.range,L.query.range)}),!1,j,G];case"count":return Y=G.find(function(ae){return Wo(ae.req.query.range,L.query.range)}),[Y,!!Y,j,G]}})(n,i,"query",f),T=S[0],b=S[1],O=S[2],k=S[3];return T&&b?T.obsSet=f.obsSet:(b=s.query(f).then(function(I){var P=I.result;if(T&&(T.res=P),v){for(var E=0,L=P.length;E<L;++E)Object.freeze(P[E]);Object.freeze(P)}else I.result=Pe(P);return I}).catch(function(I){return k&&T&&Ue(k,T),Promise.reject(I)}),T={obsSet:f.obsSet,promise:b,subscribers:new Set,type:"query",req:f,dirty:!1},k?k.push(T):(k=[T],(O=O||(Qn["idb://".concat(n,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[f.query.index.name||""]=k)),Es(T,k,p,_),T.promise.then(function(I){return{result:Go(I.result,f,O?.optimisticOps,s,T,v)}})}})}})}};function $r(t,n){return new Proxy(t,{get:function(i,s,c){return s==="db"?n:Reflect.get(i,s,c)}})}var Tn=(Lt.prototype.version=function(t){if(isNaN(t)||t<.1)throw new fe.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,i=n.filter(function(s){return s._cfg.version===t})[0];return i||(i=new this.Version(t),n.push(i),n.sort(ws),i.stores({}),this._state.autoSchema=!1,i)},Lt.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||te.letThrough||this._vip)?t():new ne(function(i,s){if(n._state.openComplete)return s(new fe.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void s(new fe.DatabaseClosed);n.open().catch(Ae)}n._state.dbReadyPromise.then(i,s)}).then(t)},Lt.prototype.use=function(t){var n=t.stack,i=t.create,s=t.level,c=t.name;return c&&this.unuse({stack:n,name:c}),t=this._middlewares[n]||(this._middlewares[n]=[]),t.push({stack:n,create:i,level:s??10,name:c}),t.sort(function(f,v){return f.level-v.level}),this},Lt.prototype.unuse=function(t){var n=t.stack,i=t.name,s=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(c){return s?c.create!==s:!!i&&c.name!==i})),this},Lt.prototype.open=function(){var t=this;return mn(gt,function(){return ks(t)})},Lt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,n=ir.indexOf(this);if(0<=n&&ir.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new ne(function(i){t.dbReadyResolve=i}),t.openCanceller=new ne(function(i,s){t.cancelOpen=s}))},Lt.prototype.close=function(i){var n=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;n?(i.isBeingOpened&&i.cancelOpen(new fe.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new fe.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},Lt.prototype.delete=function(t){var n=this;t===void 0&&(t={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",s=this._state;return new ne(function(c,f){function v(){n.close(t);var p=n._deps.indexedDB.deleteDatabase(n.name);p.onsuccess=mt(function(){var _,S,T;_=n._deps,S=n.name,T=_.indexedDB,_=_.IDBKeyRange,Ti(T)||S===Br||Ai(T,_).delete(S).catch(Ae),c()}),p.onerror=xn(f),p.onblocked=n._fireOnBlocked}if(i)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(v):v()})},Lt.prototype.backendDB=function(){return this.idbdb},Lt.prototype.isOpen=function(){return this.idbdb!==null},Lt.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},Lt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Lt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Lt.prototype,"tables",{get:function(){var t=this;return d(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),Lt.prototype.transaction=function(){var t=(function(n,i,s){var c=arguments.length;if(c<2)throw new fe.InvalidArgument("Too few arguments");for(var f=new Array(c-1);--c;)f[c-1]=arguments[c];return s=f.pop(),[n,de(f),s]}).apply(this,arguments);return this._transaction.apply(this,t)},Lt.prototype._transaction=function(t,n,i){var s=this,c=te.trans;c&&c.db===this&&t.indexOf("!")===-1||(c=null);var f,v,p=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(v=n.map(function(S){if(S=S instanceof s.Table?S.name:S,typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),t=="r"||t===pi)f=pi;else{if(t!="rw"&&t!=yi)throw new fe.InvalidArgument("Invalid transaction mode: "+t);f=yi}if(c){if(c.mode===pi&&f===yi){if(!p)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&v.forEach(function(S){if(c&&c.storeNames.indexOf(S)===-1){if(!p)throw new fe.SubTransaction("Table "+S+" not included in parent transaction.");c=null}}),p&&c&&!c.active&&(c=null)}}catch(S){return c?c._promise(null,function(T,b){b(S)}):Nt(S)}var _=(function S(T,b,O,k,I){return ne.resolve().then(function(){var P=te.transless||te,E=T._createTransaction(b,O,T._dbSchema,k);if(E.explicit=!0,P={trans:E,transless:P},k)E.idbtrans=k.idbtrans;else try{E.create(),E.idbtrans._explicit=!0,T._state.PR1398_maxLoop=3}catch(G){return G.name===Me.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return S(T,b,O,null,I)})):Nt(G)}var L,j=Qe(I);return j&&Nn(),P=ne.follow(function(){var G;(L=I.call(E,E))&&(j?(G=Sn.bind(null,null),L.then(G,G)):typeof L.next=="function"&&typeof L.throw=="function"&&(L=Ni(L)))},P),(L&&typeof L.then=="function"?ne.resolve(L).then(function(G){return E.active?G:Nt(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):P.then(function(){return L})).then(function(G){return k&&E._resolve(),E._completion.then(function(){return G})}).catch(function(G){return E._reject(G),Nt(G)})})}).bind(null,this,f,v,c,i);return c?c._promise(f,_,"lock"):te.trans?mn(te.transless,function(){return s._whenReady(_)}):this._whenReady(_)},Lt.prototype.table=function(t){if(!B(this._allTables,t))throw new fe.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},Lt);function Lt(t,n){var i=this;this._middlewares={},this.verno=0;var s=Lt.dependencies;this._options=n=o({addons:Lt.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},s=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,f,v,p,_,S={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ae,dbReadyPromise:null,cancelOpen:Ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};S.dbReadyPromise=new ne(function(b){S.dbReadyResolve=b}),S.openCanceller=new ne(function(b,O){S.cancelOpen=O}),this._state=S,this.name=t,this.on=yr(this,"populate","blocked","versionchange","close",{ready:[_t,Ae]}),this.once=function(b,O){var k=function(){for(var I=[],P=0;P<arguments.length;P++)I[P]=arguments[P];i.on(b).unsubscribe(k),O.apply(i,I)};return i.on(b,k)},this.on.ready.subscribe=H(this.on.ready.subscribe,function(b){return function(O,k){Lt.vip(function(){var I,P=i._state;P.openComplete?(P.dbOpenError||ne.resolve().then(O),k&&b(O)):P.onReadyBeingFired?(P.onReadyBeingFired.push(O),k&&b(O)):(b(O),I=i,k||b(function E(){I.on.ready.unsubscribe(O),I.on.ready.unsubscribe(E)}))})}}),this.Collection=(c=this,br(hs.prototype,function(L,E){this.db=c;var k=So,I=null;if(E)try{k=E()}catch(j){I=j}var P=L._ctx,E=P.table,L=E.hook.reading.fire;this._ctx={table:E,index:P.index,isPrimKey:!P.index||E.schema.primKey.keyPath&&P.index===E.schema.primKey.name,range:k,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:I,or:P.or,valueMapper:L!==ht?L:null}})),this.Table=(f=this,br(Ao.prototype,function(b,O,k){this.db=f,this._tx=k,this.name=b,this.schema=O,this.hook=f._allTables[b]?f._allTables[b].hook:yr(null,{creating:[pt,Ae],reading:[yt,ht],updating:[Rt,Ae],deleting:[Kt,Ae]})})),this.Transaction=(v=this,br(ms.prototype,function(b,O,k,I,P){var E=this;b!=="readonly"&&O.forEach(function(L){L=(L=k[L])===null||L===void 0?void 0:L.yProps,L&&(O=O.concat(L.map(function(j){return j.updatesTable})))}),this.db=v,this.mode=b,this.storeNames=O,this.schema=k,this.chromeTransactionDurability=I,this.idbtrans=null,this.on=yr(this,"complete","error","abort"),this.parent=P||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function(L,j){E._resolve=L,E._reject=j}),this._completion.then(function(){E.active=!1,E.on.complete.fire()},function(L){var j=E.active;return E.active=!1,E.on.error.fire(L),E.parent?E.parent._reject(L):j&&E.idbtrans&&E.idbtrans.abort(),Nt(L)})})),this.Version=(p=this,br(xs.prototype,function(b){this.db=p,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(_=this,br(Mo.prototype,function(b,O,k){if(this.db=_,this._ctx={table:b,index:O===":id"?null:O,or:k},this._cmp=this._ascending=rt,this._descending=function(I,P){return rt(P,I)},this._max=function(I,P){return 0<rt(I,P)?I:P},this._min=function(I,P){return rt(I,P)<0?I:P},this._IDBKeyRange=_._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})),this.on("versionchange",function(b){0<b.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=Sr(n.IDBKeyRange),this._createTransaction=function(b,O,k,I){return new i.Transaction(b,O,k,i._options.chromeTransactionDurability,I)},this._fireOnBlocked=function(b){i.on("blocked").fire(b),ir.filter(function(O){return O.name===i.name&&O!==i&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(b)})},this.use(Ps),this.use(Ds),this.use(As),this.use(Cs),this.use(Is);var T=new Proxy(this,{get:function(b,O,k){if(O==="_vip")return!0;if(O==="table")return function(P){return $r(i.table(P),T)};var I=Reflect.get(b,O,k);return I instanceof Ao?$r(I,T):O==="tables"?I.map(function(P){return $r(P,T)}):O==="_createTransaction"?function(){return $r(I.apply(this,arguments),T)}:I}});this.vip=T,s.forEach(function(b){return b(i)})}var ei,dn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Os=(ji.prototype.subscribe=function(t,n,i){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:i})},ji.prototype[dn]=function(){return this},ji);function ji(t){this._subscribe=t}try{ei={indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch{ei={indexedDB:null,IDBKeyRange:null}}function Yo(t){var n,i=!1,s=new Os(function(c){var f=Qe(t),v,p=!1,_={},S={},T={get closed(){return p},unsubscribe:function(){p||(p=!0,v&&v.abort(),b&&Bn.storagemutated.unsubscribe(k))}};c.start&&c.start(T);var b=!1,O=function(){return mr(I)},k=function(P){Qr(_,P),Oi(S,_)&&O()},I=function(){var P,E,L;!p&&ei.indexedDB&&(_={},P={},v&&v.abort(),v=new AbortController,L=(function(j){var G=Vt();try{f&&Nn();var Y=cn(t,j);return Y=f?Y.finally(Sn):Y}finally{G&&ln()}})(E={subscr:P,signal:v.signal,requery:O,querier:t,trans:null}),Promise.resolve(L).then(function(j){i=!0,n=j,p||E.signal.aborted||(_={},(function(G){for(var Y in G)if(B(G,Y))return;return 1})(S=P)||b||(Bn(_r,k),b=!0),mr(function(){return!p&&c.next&&c.next(j)}))},function(j){i=!1,["DatabaseClosedError","AbortError"].includes(j?.name)||p||mr(function(){p||c.error&&c.error(j)})}))};return setTimeout(O,0),T});return s.hasValue=function(){return i},s.getValue=function(){return n},s}var Xn=Tn;function Vi(t){var n=zn;try{zn=!0,Bn.storagemutated.fire(t),Ri(t,!0)}finally{zn=n}}A(Xn,o(o({},ft),{delete:function(t){return new Xn(t,{addons:[]}).delete()},exists:function(t){return new Xn(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return n=Xn.dependencies,i=n.indexedDB,n=n.IDBKeyRange,(Ti(i)?Promise.resolve(i.databases()).then(function(s){return s.map(function(c){return c.name}).filter(function(c){return c!==Br})}):Ai(i,n).toCollection().primaryKeys()).then(t)}catch{return Nt(new fe.MissingAPI)}var n,i},defineClass:function(){return function(t){w(this,t)}},ignoreTransaction:function(t){return te.trans?mn(te.transless,t):t()},vip:Ei,async:function(t){return function(){try{var n=Ni(t.apply(this,arguments));return n&&typeof n.then=="function"?n:ne.resolve(n)}catch(i){return Nt(i)}}},spawn:function(t,n,i){try{var s=Ni(t.apply(i,n||[]));return s&&typeof s.then=="function"?s:ne.resolve(s)}catch(c){return Nt(c)}},currentTransaction:{get:function(){return te.trans||null}},waitFor:function(t,n){return n=ne.resolve(typeof t=="function"?Xn.ignoreTransaction(t):t).timeout(n||6e4),te.trans?te.trans.waitFor(n):n},Promise:ne,debug:{get:function(){return nt},set:function(t){_e(t)}},derive:R,extend:w,props:A,override:H,Events:yr,on:Bn,liveQuery:Yo,extendObservabilitySet:Qr,getByKeyPath:W,setByKeyPath:oe,delByKeyPath:function(t,n){typeof n=="string"?oe(t,n,void 0):"length"in n&&[].map.call(n,function(i){oe(t,i,void 0)})},shallowClone:be,deepClone:Pe,getObjectDiff:Li,cmp:rt,asap:Z,minKey:-1/0,addons:[],connections:ir,errnames:Me,dependencies:ei,cache:Qn,semVer:"4.2.1",version:"4.2.1".split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,i){return t+n/Math.pow(10,2*i)})})),Xn.maxKey=Sr(Xn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Bn(_r,function(t){zn||(t=new CustomEvent(_i,{detail:t}),zn=!0,dispatchEvent(t),zn=!1)}),addEventListener(_i,function(t){t=t.detail,zn||Vi(t)}));var lr,zn=!1,Jo=function(){};return typeof BroadcastChannel<"u"&&((Jo=function(){(lr=new BroadcastChannel(_i)).onmessage=function(t){return t.data&&Vi(t.data)}})(),typeof lr.unref=="function"&&lr.unref(),Bn(_r,function(t){zn||lr.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Tn.disableBfCache&&t.persisted){nt&&console.debug("Dexie: handling persisted pagehide"),lr?.close();for(var n=0,i=ir;n<i.length;n++)i[n].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!Tn.disableBfCache&&t.persisted&&(nt&&console.debug("Dexie: handling persisted pageshow"),Jo(),Vi({all:new Yt(-1/0,[[]])}))})),ne.rejectionMapper=function(t,n){return!t||t instanceof lt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ct[t.name]?t:(n=new ct[t.name](n||t.message,t),"stack"in t&&C(n,"stack",{get:function(){return this.inner.stack}}),n)},_e(nt),o(Tn,Object.freeze({__proto__:null,Dexie:Tn,liveQuery:Yo,Entity:xo,cmp:rt,PropModification:pr,replacePrefix:function(t,n){return new pr({replacePrefix:[t,n]})},add:function(t){return new pr({add:t})},remove:function(t){return new pr({remove:t})},default:Tn,RangeSet:Yt,mergeRanges:Cr,rangesOverlap:Bo}),{default:Tn}),Tn})})(li)),li.exports}var vd=hd();const Ji=pl(vd),ga=Symbol.for("Dexie"),hi=globalThis[ga]||(globalThis[ga]=Ji);if(Ji.semVer!==hi.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ji.semVer} and ${hi.semVer}`);const{liveQuery:ig,mergeRanges:og,rangesOverlap:ag,RangeSet:sg,cmp:lg,Entity:cg,PropModification:ug,replacePrefix:dg,add:fg,remove:hg,DexieYProvider:vg}=hi,Or="current";class gd extends hi{uprnSelections;areaSelections;dataSelections;userDownloads;constructor(){super("app-db2"),this.version(2).stores({uprnSelections:"&id",areaSelections:"++id, layerId, *areaIds",dataSelections:"++id, layerId, *fields",userDownloads:"++id, &localId, createdAt"}),this.on("populate",async e=>{if(console.log("[db] Populating database with initial data"),await e.table("uprnSelections").get(Or)){console.log("[db] Initial UPRN selection already exists");return}await e.table("uprnSelections").add({id:"current",areas:null,data:[]}),console.log("[db] Initial UPRN selection created")})}}const qn=new gd,Ya=async()=>await qn.uprnSelections.get(Or),Ir=async u=>{let e=await Ya();e||(e={id:Or,areas:null,data:[]},await qn.uprnSelections.add(e)),console.log("[db] Updating UPRN selection with patch:",u,"current:",e),await qn.uprnSelections.update(Or,u)},md=async()=>{await qn.uprnSelections.put({id:Or,areas:null,data:[]})},pd=async(u,e,r)=>await qn.userDownloads.add({localId:u,areaSelection:e,dataSelections:r,status:yn.Pending,createdAt:Date.now()}),yd=async(u,e,r,o)=>{const l={};e!==void 0&&(l.externalId=e),r!==void 0&&(l.areaSelection=r),o!==void 0&&(l.dataSelections=o),Object.keys(l).length!==0&&await qn.userDownloads.where("localId").equals(u).modify(l)},bd=async()=>await qn.userDownloads.orderBy("createdAt").reverse().toArray(),wd=async u=>await qn.userDownloads.where("localId").equals(u).delete();class _d{#e=re(Ze(new fn));constructor(){this.#t()}addDownload(e){console.log("[downloads-store] Adding download:",e),a(this.#e).set(e.localId,e),pd(e.localId,e.areaSelection,e.dataSelections)}updateDownloadStatus(e){console.log("[downloads-store] Updating download status:",e),a(this.#e).set(e.localId,{...e}),yd(e.localId,e.externalId,e.areaSelection,e.dataSelections)}removeDownload(e){a(this.#e).delete(e),wd(e)}getDownloads(){return Array.from(a(this.#e).values())}async#t(){const e=await bd();!e||e.length===0||(console.log("Loaded downloads from DB:",e),e.forEach(r=>{a(this.#e).set(r.localId,{localId:r.localId,status:yn.Pending,areaSelection:r.areaSelection,dataSelections:r.dataSelections})}))}}const cr=new _d;var Sd=X('<div class="data-item svelte-5fx6pg"><span class="data-name svelte-5fx6pg"> </span> <div class="data-actions svelte-5fx6pg"><!></div></div>');function Qi(u,e){const r=U(e,"title",3,"");to(u,{class:"data-item-card",children:(o,l)=>{var h=Sd(),d=ee(h),g=ee(d,!0);Q(d);var w=ve(d,2),y=ee(w);xe(y,()=>e.children??De),Q(w),Q(h),at(()=>{St(d,"title",r()),qt(g,r())}),m(o,h)},$$slots:{default:!0}})}var xd=X("<!> <!> <!> <!>",1),kd=X('<ul class="selected-list svelte-1vh7kre"></ul> <p class="count svelte-1vh7kre"> </p>',1),Cd=X('<p class="no-selection svelte-1vh7kre">No downloads in queue</p>'),Id=X('<div class="section svelte-1vh7kre"><h4 class="svelte-1vh7kre">Download Queue</h4> <!></div>');function Pd(u,e){ge(e,!0);let r=re(Ze(new Set));const o=K(()=>cr.getDownloads()),l={completed:{color:"#059669",text:"Completed",icon:Cc},"in-progress":{color:"#2563eb",text:"In Progress",icon:Ec},failed:{color:"#dc2626",text:"Failed",icon:vl},pending:{color:"#6b7280",text:"Pending",icon:hl}};er(()=>{const q=setInterval(()=>{h()},5e3);return()=>{clearInterval(q)}}),$e(()=>{if(!a(o)||a(o).length<=0||!e.uprnDownloadService)return;(async()=>{for(const N of a(o)){if(N.externalId||N.status!==yn.Pending)continue;const z={exports:{areaSelectionLayer:{remoteId:N.areaSelection.layerId,areas:N.areaSelection.areaFieldInfos.map(J=>J.code)},dataSelectionLayers:N.dataSelections.map(J=>({remoteId:J.layerId,fields:J.fields.filter(Z=>!e.fieldsToHide||!e.fieldsToHide.has(Z))}))}};console.log("[downloads-menu] Submitting download request:",z);const H=await e.uprnDownloadService.requestJob(z);if(!H||H.type===dd.Error){console.error("[downloads-menu] Failed to submit download request.",H),N.status=yn.Failed,cr.updateDownloadStatus(N);continue}N.externalId=H.guid,N.status=yn.InProgress,cr.updateDownloadStatus(N)}})()});async function h(){if(a(o).length<=0||!e.uprnDownloadService)return;const q={jobs:a(o).filter(z=>z.externalId&&z.status!==yn.Completed&&z.status!==yn.Failed).map(z=>z.externalId)};if(q.jobs.length===0)return;console.log("[downloads-menu] Checking job statuses for downloads:",q);const N=await e.uprnDownloadService.requestJobStatuses(q);if(!N){console.error("[downloads-menu] Failed to get job statuses.",N);return}for(const z of N.jobs){const H=a(o).find(J=>J.externalId===z.guid);if(!H){console.warn("[downloads-menu] Received job status for unknown download:",z.guid);continue}switch(z.status.type){case oi.Submitted:case oi.Processing:H.status=yn.InProgress;break;case oi.Completed:H.status=yn.Completed;break;case oi.Error:H.status=yn.Failed;break;default:console.warn("[downloads-menu] Unknown job status type:",z.status.type);break}cr.updateDownloadStatus(H)}}function d(q){cr.removeDownload(q)}async function g(q){try{await navigator.clipboard.writeText(q),F(r,new Set(a(r)).add(q),!0),Dr.success("URL copied to clipboard"),setTimeout(()=>{const N=new Set(a(r));N.delete(q),F(r,N,!0)},2e3)}catch(N){console.error("Failed to copy URL:",N),Dr.error("Failed to copy URL to clipboard")}}function w(q){return l[q]?.color??l.pending.color}function y(q){return l[q]?.text??l.pending.text}function x(q){return l[q]?.icon??l.pending.icon}function B(q){return e.uprnDownloadService.getDownloadUrl(q)}var A=Id(),M=ve(ee(A),2);{var C=q=>{var N=kd(),z=D(N);nn(z,21,()=>a(o),tr,(Z,W)=>{{let oe=K(()=>a(W).externalId?a(W).externalId:"Pending...");Qi(Z,{get title(){return a(oe)},children:(be,Ie)=>{var de=xd(),Se=D(de);{let Re=K(()=>w(a(W).status)),Ue=K(()=>y(a(W).status));sn(Se,{variant:"ghost",size:"sm",class:"download-status-btn",get style(){return`color: ${a(Re)??""}`},get title(){return a(Ue)},disabled:!0,children:(we,ze)=>{const Qe=K(()=>x(a(W).status));var xt=V(),lt=D(xt);{let he=K(()=>a(W).status==="in-progress"?"spinning":"");pe(lt,()=>a(Qe),(Je,dt)=>{dt(Je,{size:14,get class(){return a(he)}})})}m(we,xt)},$$slots:{default:!0}})}var Oe=ve(Se,2);{var Pe=Re=>{sn(Re,{variant:"ghost",size:"sm",class:"download-clipboard-btn",onclick:()=>g(B(a(W).externalId)),title:"Copy URL to clipboard",children:(Ue,we)=>{var ze=V(),Qe=D(ze);{var xt=he=>{Ic(he,{size:14})},lt=he=>{Pc(he,{size:14})};$(Qe,he=>{a(r).has(B(a(W).externalId))?he(xt):he(lt,!1)})}m(Ue,ze)},$$slots:{default:!0}})};$(Oe,Re=>{a(W).externalId&&Re(Pe)})}var Ne=ve(Oe,2);{var Ye=Re=>{sn(Re,{variant:"ghost",size:"sm",class:"download-action-btn",onclick:()=>window.open(B(a(W).externalId),"_blank"),title:"Open download",children:(Ue,we)=>{Ac(Ue,{})},$$slots:{default:!0}})};$(Ne,Re=>{a(W).externalId&&a(W).status==="completed"&&Re(Ye)})}var et=ve(Ne,2);sn(et,{variant:"ghost",size:"sm",class:"download-remove-btn",onclick:()=>d(a(W).localId),title:"Remove from queue",children:(Re,Ue)=>{en();var we=tn("");m(Re,we)},$$slots:{default:!0}}),m(be,de)},$$slots:{default:!0}})}}),Q(z);var H=ve(z,2),J=ee(H);Q(H),at(()=>qt(J,`${a(o).length??""} download(s) in queue`)),m(q,N)},R=q=>{var N=Cd();m(q,N)};$(M,q=>{a(o).length>0?q(C):q(R,!1)})}Q(A),m(u,A),me()}function Ad(u,e){ge(e,!0);{let r=K(()=>fr("size-7 border-1 border-destructive",e.class));sn(u,{onclick:()=>e.clear(),variant:"ghost",get class(){return a(r)},title:"Clear all selections",children:(o,l)=>{Dc(o,{class:"text-destructive"})},$$slots:{default:!0}})}me()}class Td{#e=re(Ze(new fn));get dataSelections(){return a(this.#e)}set dataSelections(e){F(this.#e,e,!0)}addSelection(e){this.dataSelections.set(e.layerId,e)}updateSelection(e,r){const o=this.dataSelections.get(e);if(!o){console.warn(`[data-selection-store] no existing selection for layerId ${e}`);return}o.selectedFieldIds=new Cn(r),this.dataSelections.set(e,{...o})}addOrUpdateSelection(e,r){const o=this.dataSelections.get(e);if(o)o.selectedFieldIds=new Cn(r),this.dataSelections.set(e,{...o});else{const l={layerId:e,selectedFieldIds:new Cn(r)};this.dataSelections.set(e,l)}}removeSelection(e){console.log(`[data-selection-store] Removing selection for layerId: ${e}`),this.dataSelections.delete(e)}getSelection(e){return this.dataSelections.get(e)}getAllSelections(){return Array.from(this.dataSelections.values())}clearSelections(){console.log("[data-selection-store] Clearing all selections"),this.dataSelections.clear(),console.log("[data-selection-store] selections cleared.")}cleanup(){this.dataSelections.clear()}}var Ed=X('<div class="export-footer svelte-tx6b2m"><div class="export-footer__left svelte-tx6b2m"><p class="text-sm text-muted-foreground svelte-tx6b2m">Click "Export" to begin the download.</p></div> <div class="export-footer__right svelte-tx6b2m"><!> <!></div></div>');function Dd(u,e){ge(e,!0);function r(){if(e.areaSelectionInteractionStore.selectionViewState?.areaHandles.size<=0){Dr.error("Please select at least one area to export.");return}if(e.dataSelectionStore.getAllSelections().length<=0){Dr.error("Please select at least one data layer to export.");return}console.log("Starting export..."),(async()=>{const w=await e.areaSelectionInteractionStore.getAreaCodesById(e.areaSelectionInteractionStore.selectionViewState.areaHandles.keys().toArray()),y=e.areaSelectionInteractionStore.selectionViewState.areaHandles.entries().map(([M,C],R)=>({id:M,code:w[R]})).toArray(),x={layerId:e.areaSelectionInteractionStore.selectionViewState.layerView?.layer.id||"",areaFieldInfos:y},B=e.dataSelectionStore.getAllSelections().map(M=>({layerId:M.layerId,fields:Array.from(M.selectedFieldIds)})),A=crypto.randomUUID();cr.addDownload({localId:A,status:yn.Pending,areaSelection:x,dataSelections:B}),e.onExportSuccess?.()})()}var o=Ed(),l=ve(ee(o),2),h=ee(l);Ad(h,{class:"mr-4",get clear(){return e.clearSelections}});var d=ve(h,2);sn(d,{onclick:r,title:"Export",children:(g,w)=>{en();var y=tn("Export");m(g,y)},$$slots:{default:!0}}),Q(l),Q(o),m(u,o),me()}class Od{#e=re(null);get ActiveLayer(){return a(this.#e)}set ActiveLayer(e){F(this.#e,e,!0)}}class Md{#e=re(!1);get isLoaded(){return a(this.#e)}set isLoaded(e){F(this.#e,e,!0)}#t=re(null);get data(){return a(this.#t)}set data(e){F(this.#t,e,!0)}#n=K(()=>{const e=new fn;function r(o){e.set(o.id,o),o.type==="group"&&o.layers.forEach(h=>{r(h)})}return this.data&&this.data.layers.forEach(o=>{r(o)}),e});get dataLookup(){return a(this.#n)}set dataLookup(e){F(this.#n,e)}#i=re(!1);get loading(){return a(this.#i)}set loading(e){F(this.#i,e,!0)}#r=re(null);get error(){return a(this.#r)}set error(e){F(this.#r,e,!0)}async initializeAsync(e){if(!this.data){this.loading=!0,this.error=null;try{const{portalUrl:r,itemId:o,proxy:l}=e;await this.configurePortalAsync(r,l),await this.loadwebmapAsync(o)}catch(r){console.error("Error initializing webmap:",r),this.error=r.message}finally{this.loading=!1}}}async configurePortalAsync(e,r){if(!e||(Xo.portalUrl=e,console.log(Xo),!r))return;const{addProxyRule:o}=Al;console.log("Adding proxy rule for portal traffic"),o({urlPrefix:r?.urlPrefix,proxyUrl:r?.proxyUrl})}async loadwebmapAsync(e){if(this.data)return;const r=new Pl({id:e}),o=new Il({portalItem:r});this.data=o,await this.data.when(),this.data.loaded&&(this.isLoaded=!0)}clear(){this.data=null,this.loading=!1,this.error=null}clearError(){this.error=null}getWebmap(){return this.data}}const Fd='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-funnel-icon lucide-funnel"><path d="M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"/></svg>',Rd='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-funnel-x-icon lucide-funnel-x"><path d="M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473"/><path d="m16.5 3.5 5 5"/><path d="m21.5 3.5-5 5"/></svg>';function Nd(u,e){u.stopPropagation(),e.onFilterClicked?.(e.layerId)}var Ld=X('<button title="Filter"><!></button>');function Bd(u,e){ge(e,!0);let r=re(Ze(e.hasFiltersApplied?.(e.layerId)??!1));$e(()=>{F(r,e.hasFiltersApplied?.(e.layerId)??!1,!0)});const o=K(()=>a(r)?Fd:Rd);var l=Ld();let h;l.__click=[Nd,e];var d=ee(l);Er(d,()=>a(o)),Q(l),at(g=>{h=an(l,1,"filter-btn svelte-1075mfp",null,h,g),St(l,"aria-pressed",a(r))},[()=>({active:a(r)})]),m(u,l),me()}Rr(["click"]);var zd=X('<ul class="selected-list"></ul> <p class="count svelte-1kiikpe"> </p>',1),jd=X('<p class="no-selection svelte-1kiikpe">No areas selected</p>'),Vd=X("<!> <!>",1),qd=X('<ul></ul> <p class="count svelte-1kiikpe"> </p>',1),Kd=X('<p class="no-selection svelte-1kiikpe">No data selected</p>'),Hd=X('<h2 class="svelte-1kiikpe">Export Options</h2> <div class="section svelte-1kiikpe"><h3 class="svelte-1kiikpe"> </h3> <h4 class="svelte-1kiikpe">Selected Areas</h4> <!></div> <div class="section svelte-1kiikpe"><h4 class="svelte-1kiikpe">Selected Data</h4> <!></div>',1);function Ud(u,e){ge(e,!0);const r=U(e,"fieldFilterMenuStore",7);let o=re(Ze([]));$e(()=>{if(!e.areaSelectionInteractionStore){F(o,[],!0);return}if(!e.areaSelectionInteractionStore.selectionViewState?.areaHandles.size){F(o,[],!0);return}(async()=>{const J=await e.areaSelectionInteractionStore.getAreaNamesById(e.areaSelectionInteractionStore.selectionViewState.areaHandles.keys().toArray()),Z=e.areaSelectionInteractionStore.selectionViewState.areaHandles.entries().toArray().map(([oe,be])=>({id:oe,handle:be})),W=[];for(let oe=0;oe<J.length;oe++)W.push({name:J[oe]||"Unknown Area",HighlightAreaInfo:Z[oe]});F(o,W,!0)})()});function l(H){const J=a(o).findIndex(Z=>Z.name===H);J!==-1&&e.areaSelectionInteractionStore.removeSelectedArea(a(o)[J]?.HighlightAreaInfo.id)}function h(H){console.log("[export-menu] Removing data selection for layerId:",H),e.dataSelectionStore.removeSelection(H),console.log("[export-menu] Current SelectedData:",ci(e.dataSelectionStore.getAllSelections()))}function d(H){if(r().ActiveLayer?.id===H){r().ActiveLayer=null;return}const J=e.webMapStore.dataLookup.get(H);if(!J){console.warn(`[export-menu] Layer with ID ${H} not found in web map store.`);return}r().ActiveLayer=J}function g(H){const J=e.dataSelectionStore.getSelection(H);return!(!J||!J.selectedFieldIds||J.selectedFieldIds.size===0||J.selectedFieldIds.size===e.webMapStore.dataLookup.get(H)?.fields?.length)}var w=Hd(),y=ve(D(w),2),x=ee(y),B=ee(x,!0);Q(x);var A=ve(x,4);{var M=H=>{var J=zd(),Z=D(J);nn(Z,21,()=>a(o),tr,(be,Ie)=>{Qi(be,{get title(){return a(Ie).name},children:(de,Se)=>{sn(de,{variant:"ghost",size:"sm",class:"area-remove-btn",title:"Remove area",onclick:()=>l(a(Ie).name),children:(Oe,Pe)=>{en();var Ne=tn("");m(Oe,Ne)},$$slots:{default:!0}})},$$slots:{default:!0}})}),Q(Z);var W=ve(Z,2),oe=ee(W);Q(W),at(()=>qt(oe,`${a(o).length??""} area(s) selected`)),m(H,J)},C=H=>{var J=jd();m(H,J)};$(A,H=>{a(o).length>0?H(M):H(C,!1)})}Q(y);var R=ve(y,2),q=ve(ee(R),2);{var N=H=>{var J=qd(),Z=D(J);nn(Z,21,()=>e.dataSelectionStore.getAllSelections(),tr,(be,Ie)=>{{let de=K(()=>e.webMapStore.dataLookup.get(a(Ie).layerId)?.title??"");Qi(be,{get title(){return a(de)},children:(Se,Oe)=>{var Pe=Vd(),Ne=D(Pe);{var Ye=Re=>{Bd(Re,{get layerId(){return a(Ie).layerId},onFilterClicked:d,hasFiltersApplied:g})};$(Ne,Re=>{e.dataSelectionTreeviewConfig?.getItemConfig(a(Ie).layerId)?.showFields&&Re(Ye)})}var et=ve(Ne,2);sn(et,{variant:"ghost",size:"sm",class:"data-remove-btn",title:"Remove data selection",onclick:()=>h(a(Ie).layerId),children:(Re,Ue)=>{en();var we=tn("");m(Re,we)},$$slots:{default:!0}}),m(Se,Pe)},$$slots:{default:!0}})}}),Q(Z);var W=ve(Z,2),oe=ee(W);Q(W),at(be=>qt(oe,`${be??""} data layer(s) selected`),[()=>e.dataSelectionStore.getAllSelections().length]),m(H,J)},z=H=>{var J=Kd();m(H,J)};$(q,H=>{e.dataSelectionStore.getAllSelections().length>0?H(N):H(z,!1)})}Q(R),at(()=>qt(B,e.areaSelectionInteractionStore.selectionViewState?.layerView?.layer?e.areaSelectionInteractionStore.selectionViewState?.layerView?.layer.title:"No Area Layer Selected")),m(u,w),me()}const Gd=`<?xml version="1.0" encoding="utf-8"?>
\r<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="800px" height="800px" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\r
  <title>information-circle</title>\r
  <g id="Layer_2" data-name="Layer 2">\r
    <g id="invisible_box" data-name="invisible box">\r
      <rect width="48" height="48" fill="none"/>\r
    </g>\r
    <g id="icons_Q2" data-name="icons Q2">\r
      <path d="M24,2A22,22,0,1,0,46,24,21.9,21.9,0,0,0,24,2Zm0,40A18,18,0,1,1,42,24,18.1,18.1,0,0,1,24,42Z"/>\r
      <path d="M24,20a2,2,0,0,0-2,2V34a2,2,0,0,0,4,0V22A2,2,0,0,0,24,20Z"/>\r
      <circle cx="24" cy="14" r="2"/>\r
    </g>\r
  </g>\r
</svg>`;var Wd=X('<div data-slot="checkbox-indicator" class="text-current transition-none"><!></div>');function ma(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=U(e,"checked",15,!1),l=U(e,"indeterminate",15,!1),h=Be(e,["$$slots","$$events","$$legacy","ref","checked","indeterminate","class"]);var d=V(),g=D(d);{const w=(x,B)=>{let A=()=>B?.().checked,M=()=>B?.().indeterminate;var C=Wd(),R=ee(C);{var q=z=>{Bc(z,{class:"size-3.5"})},N=z=>{var H=V(),J=D(H);{var Z=W=>{Ha(W,{class:"size-3.5"})};$(J,W=>{M()&&W(Z)},!0)}m(z,H)};$(R,z=>{A()?z(q):z(N,!1)})}Q(C),m(x,C)};let y=K(()=>Wt("border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive shadow-xs peer flex size-4 shrink-0 items-center justify-center rounded-[4px] border outline-none transition-shadow focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e.class));pe(g,()=>Ka,(x,B)=>{B(x,Ke({"data-slot":"checkbox",get class(){return a(y)}},()=>h,{get ref(){return r()},set ref(A){r(A)},get checked(){return o()},set checked(A){o(A)},get indeterminate(){return l()},set indeterminate(A){l(A)},children:w,$$slots:{default:!0}}))})}m(u,d),me()}function Ja(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class"]);var l=V(),h=D(l);{let d=K(()=>Wt("text-lg font-semibold leading-none",e.class));pe(h,()=>el,(g,w)=>{w(g,Ke({"data-slot":"dialog-title",get class(){return a(d)}},()=>o,{get ref(){return r()},set ref(y){r(y)}}))})}m(u,l),me()}var Yd=X("<div><!></div>");function Jd(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class","children"]);var l=Yd();zt(l,d=>({"data-slot":"dialog-footer",class:d,...o}),[()=>Wt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e.class)]);var h=ee(l);xe(h,()=>e.children??De),Q(l),$t(l,d=>r(d),()=>r()),m(u,l),me()}var Qd=X("<div><!></div>");function Qa(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class","children"]);var l=Qd();zt(l,d=>({"data-slot":"dialog-header",class:d,...o}),[()=>Wt("flex flex-col gap-2 text-center sm:text-start",e.class)]);var h=ee(l);xe(h,()=>e.children??De),Q(l),$t(l,d=>r(d),()=>r()),m(u,l),me()}function Xd(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class"]);var l=V(),h=D(l);{let d=K(()=>Wt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e.class));pe(h,()=>tl,(g,w)=>{w(g,Ke({"data-slot":"dialog-overlay",get class(){return a(d)}},()=>o,{get ref(){return r()},set ref(y){r(y)}}))})}m(u,l),me()}var Zd=X('<!> <span class="sr-only">Close</span>',1),$d=X("<!> <!>",1),ef=X("<!> <!>",1);function Xa(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=U(e,"showCloseButton",3,!0),l=Be(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children","showCloseButton"]);var h=V(),d=D(h);pe(d,()=>nf,(g,w)=>{w(g,Ke(()=>e.portalProps,{children:(y,x)=>{var B=ef(),A=D(B);pe(A,()=>Xd,(C,R)=>{R(C,{})});var M=ve(A,2);{let C=K(()=>Wt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed start-[50%] top-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e.class));pe(M,()=>nl,(R,q)=>{q(R,Ke({"data-slot":"dialog-content",get class(){return a(C)}},()=>l,{get ref(){return r()},set ref(N){r(N)},children:(N,z)=>{var H=$d(),J=D(H);xe(J,()=>e.children??De);var Z=ve(J,2);{var W=oe=>{var be=V(),Ie=D(be);pe(Ie,()=>rl,(de,Se)=>{Se(de,{class:"ring-offset-background focus:ring-ring rounded-xs focus:outline-hidden absolute end-4 top-4 opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",children:(Oe,Pe)=>{var Ne=Zd(),Ye=D(Ne);il(Ye,{}),en(2),m(Oe,Ne)},$$slots:{default:!0}})}),m(oe,be)};$(Z,oe=>{o()&&oe(W)})}m(N,H)},$$slots:{default:!0}}))})}m(y,B)},$$slots:{default:!0}}))}),m(u,h),me()}function Za(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class"]);var l=V(),h=D(l);{let d=K(()=>Wt("text-muted-foreground text-sm",e.class));pe(h,()=>ol,(g,w)=>{w(g,Ke({"data-slot":"dialog-description",get class(){return a(d)}},()=>o,{get ref(){return r()},set ref(y){r(y)}}))})}m(u,l),me()}function tf(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref"]);var l=V(),h=D(l);pe(h,()=>Hl,(d,g)=>{g(d,Ke({"data-slot":"dialog-trigger"},()=>o,{get ref(){return r()},set ref(w){r(w)}}))}),m(u,l),me()}const $a=al,nf=El;function rf(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class"]);var l=V(),h=D(l);{let d=K(()=>Wt("bg-border -mx-1 h-px",e.class));pe(h,()=>ic,(g,w)=>{w(g,Ke({"data-slot":"command-separator",get class(){return a(d)}},()=>o,{get ref(){return r()},set ref(y){r(y)}}))})}m(u,l),me()}var of=X("<!> <!>",1),af=(u,e,r)=>e(a(r).name),sf=X('<div class="info-icon-container svelte-1hl7txa"><!></div>'),lf=X('<div class="field-content-wrapper svelte-1hl7txa"><!> <button class="field-content svelte-1hl7txa" tabindex="0"><div class="field-name-container svelte-1hl7txa"><span class="field-name svelte-1hl7txa"> </span> <!></div></button></div>'),cf=X('<div class="master-checkbox-container svelte-1hl7txa"><!> <span class="master-checkbox-label svelte-1hl7txa">Select All Fields</span></div> <!> <!>',1),uf=X("<!> <!>",1),df=X("<!> <!>",1),ff=X('<!> <div class="card-content min-h-0 flex-1 svelte-1hl7txa"><!></div>',1);function hf(u,e){ge(e,!0);const r=U(e,"fieldFilterMenuStore",7);let o=re(null),l=re(Ze(new Cn)),h=K(()=>r().ActiveLayer!==null),d=K(()=>{if(!a(o)||!a(o).fields)return{checked:!1,indeterminate:!1};const C=a(o).fields.length,R=a(l)?.size||0;return R===0?{checked:!1,indeterminate:!1}:R===C?{checked:!0,indeterminate:!1}:{checked:!1,indeterminate:!0}});$e(()=>{const C=r().ActiveLayer;if(!C){F(o,null),F(l,new Cn,!0);return}F(o,C,!0);const R=e.dataSelectionStore.getSelection(C.id);R?.selectedFieldIds?F(l,new Cn([...R.selectedFieldIds]),!0):F(l,new Cn,!0)});function g(C){C||(w(),r().ActiveLayer=null)}function w(){if(!a(o))return;let C=e.dataSelectionStore.getSelection(a(o).id);if(C){if((C.selectedFieldIds===void 0||C.selectedFieldIds===null)&&(C.selectedFieldIds=new Cn),a(l).size===0){e.dataSelectionStore.removeSelection(a(o).id);return}C.selectedFieldIds.clear(),a(l).forEach(R=>{C.selectedFieldIds?.add(R)})}}function y(C){a(o)&&(a(l).has(C)?a(l).delete(C):a(l).add(C))}function x(){if(!a(o)?.fields)return;(a(l)?.size||0)===0?a(o).fields.forEach(R=>{a(l).add(R.name)}):a(l).clear()}function B(){if(!a(o)?.fields)return[];const C=a(o).fields.filter(R=>!e.fieldsToHide.has(R.name.toLowerCase()));return console.log("Filtered fields to show:",C,e.fieldsToHide,a(o).fields),C}var A=V(),M=D(A);pe(M,()=>$a,(C,R)=>{R(C,{get open(){return a(h)},onOpenChange:g,children:(q,N)=>{var z=V(),H=D(z);pe(H,()=>Xa,(J,Z)=>{Z(J,{class:"flex max-h-[80vh] flex-col sm:max-w-[700px]",children:(W,oe)=>{var be=ff(),Ie=D(be);pe(Ie,()=>Qa,(Oe,Pe)=>{Pe(Oe,{children:(Ne,Ye)=>{var et=of(),Re=D(et);pe(Re,()=>Ja,(we,ze)=>{ze(we,{children:(Qe,xt)=>{en();var lt=tn("Select Fields");m(Qe,lt)},$$slots:{default:!0}})});var Ue=ve(Re,2);pe(Ue,()=>Za,(we,ze)=>{ze(we,{children:(Qe,xt)=>{en();var lt=tn("Choose fields to include in your data selection.");m(Qe,lt)},$$slots:{default:!0}})}),m(Ne,et)},$$slots:{default:!0}})});var de=ve(Ie,2),Se=ee(de);pe(Se,()=>Sl,(Oe,Pe)=>{Pe(Oe,{children:(Ne,Ye)=>{var et=df(),Re=D(et);pe(Re,()=>sl,(we,ze)=>{ze(we,{placeholder:"Search for fields..."})});var Ue=ve(Re,2);pe(Ue,()=>xl,(we,ze)=>{ze(we,{children:(Qe,xt)=>{var lt=uf(),he=D(lt);pe(he,()=>kl,(dt,Me)=>{Me(dt,{children:(kt,fe)=>{en();var ct=tn("No results found.");m(kt,ct)},$$slots:{default:!0}})});var Je=ve(he,2);pe(Je,()=>ll,(dt,Me)=>{Me(dt,{heading:"Fields",children:(kt,fe)=>{var ct=cf(),ft=D(ct),Ae=ee(ft);ma(Ae,{get checked(){return a(d).checked},get indeterminate(){return a(d).indeterminate},onCheckedChange:x}),en(2),Q(ft);var ht=ve(ft,2);pe(ht,()=>rf,(Ee,pt)=>{pt(Ee,{})});var yt=ve(ht,2);nn(yt,17,B,tr,(Ee,pt)=>{var Kt=V(),Rt=D(Kt);pe(Rt,()=>Cl,(Ht,_t)=>{_t(Ht,{class:"field-item",onselect:()=>y(a(pt).name),children:(nt,_e)=>{var Ce=lf(),Ge=ee(Ce);{let Ct=K(()=>a(l)?.has(a(pt).name)??!1);ma(Ge,{class:"field-checkbox",get checked(){return a(Ct)},onCheckedChange:()=>y(a(pt).name)})}var He=ve(Ge,2);He.__click=[af,y,pt];var tt=ee(He),je=ee(tt),Pt=ee(je,!0);Q(je);var Et=ve(je,2);{var Xt=Ct=>{var st=sf(),vt=ee(st);Er(vt,()=>Gd),Q(st),at(()=>St(st,"title",a(pt).description)),m(Ct,st)};$(Et,Ct=>{a(pt).description&&Ct(Xt)})}Q(tt),Q(He),Q(Ce),at(()=>qt(Pt,a(pt).alias||a(pt).name)),m(nt,Ce)},$$slots:{default:!0}})}),m(Ee,Kt)}),m(kt,ct)},$$slots:{default:!0}})}),m(Qe,lt)},$$slots:{default:!0}})}),m(Ne,et)},$$slots:{default:!0}})}),Q(de),m(W,be)},$$slots:{default:!0}})}),m(q,z)},$$slots:{default:!0}})}),m(u,A),me()}Rr(["click"]);var vf=X("<div><!></div>");function es(u,e){ge(e,!0);var r=vf(),o=ee(r);xe(o,()=>e.children??De),Q(r),at(l=>an(r,1,l),[()=>pn(fr("flex flex-col",e.class))]),m(u,r),me()}class ts{id;name;children;parent;constructor(e,r,o=[],l=null){this.id=e,this.name=r,this.children=o,this.parent=l}}class Ft extends ts{layer;constructor(e,r,o,l=[],h=null){super(e,r,l,h),this.layer=o}}class dr extends Ft{featureLayer;field;constructor(e,r,o,l,h=[],d=null){super(e,r,o,h,d),this.field=l,this.featureLayer=o}}var Tt=(u=>(u.Inactive="inactive",u.Indeterminate="indeterminate",u.Active="active",u))(Tt||{}),jn=(u=>(u.Hidden="hidden",u.Suspended="suspended",u.Visible="visible",u))(jn||{}),Vn=(u=>(u.None="none",u.GroupLayer="group-layer",u.FeatureLayer="feature-layer",u.TileLayer="tile-layer",u.Field="field",u))(Vn||{});class ns{#e=re(!1);get initialized(){return a(this.#e)}set initialized(e){F(this.#e,e,!0)}#t=null;#n=null;#i=re(Ze([]));#r=K(()=>{const e=new fn;return this.#S(a(this.#i),e),e});#o=re(Ze(new fn));#a=re(Ze(new fn));#s=re(Ze(new fn));#l=re(Ze(new fn));#f=re(Ze(new fn));#h=null;initialize(e,r,o,l,h){if(this.initialized)throw new Error("TreeviewStore is already initialized.");if(this.initialized=!0,!r)throw new Error("TreeviewStore requires a valid TreeviewConfigStore to initialize.");if(this.#t=r,l)for(const d of l)a(this.#f).set(d.id,d);if(h&&(this.#h=h),!e)throw new Error("TreeviewStore requires a valid array of layers to initialize.");this.#n=o,this.#p(e),F(this.#i,this.#y(e),!0)}getNodeById(e){return this.#d(),a(this.#r).get(e)}getNodes(){return this.#d(),a(this.#i)}getVisibleNodes(){this.#d();const e=[];for(const[r,o]of a(this.#o)){if(!o)continue;const l=a(this.#r).get(r);l&&e.push(l)}return e}getNonHiddenNodes(){return this.#d(),this.#c(a(this.#i))}clearSelections(){for(const e of a(this.#o).keys()){a(this.#o).set(e,!1);const r=a(this.#r).get(e);r&&r instanceof Ft&&(r.layer.visible=!1)}a(this.#l).clear()}#c(e){this.#d();const r=[];for(const o of e){const l=this.#v(o.id);if(!(l&&l.isHidden)&&(r.push(o),o.children?.length)){const h=this.#c(o.children);r.push(...h)}}return r}getVisibilityState(e){return this.#d(),a(this.#o).get(e)??!1}setVisibilityState(e,r){this.#d();const o=a(this.#r).get(e);if(!o)throw new Error(`Tree node not found for ID: ${e}`);if(!(o instanceof Ft))throw new Error(`Tree node is not a layer node: ${e}`);const l=this.#v(e);if(l?.disableVisibilityToggle||(a(this.#o).set(e,r),o.layer.visible=r,this.updateDrawState(o,r),o instanceof dr&&(o.featureLayer.displayField=r?o.field.name:"",r&&this.#h&&(console.log("[TreeviewStore] Applying custom renderer for field:",o.field.name),this.#h.applyCustomRenderer(o.featureLayer,o.field.name))),this.#u(o,r),!l||l.isHidden)||(l.visibilityDependencyIds?.length&&this.#g(o,r),!l.visibilityGroupId))return;const h=l.visibilityGroupId;let d=a(this.#l).get(h);d||(d=[],a(this.#l).set(h,d));const g=this.#m(h);if(!g)throw new Error(`Visibility group config not found for group ID: ${h}`);if(!r){const y=d.indexOf(e);d.splice(y,1);return}const w=y=>{a(this.#o).set(y,!1);const x=a(this.#r).get(y);if(x&&x instanceof Ft){x.layer.visible=!1,this.updateDrawState(x,!1),this.#u(x,!1);const A=this.#v(y);A&&A.visibilityDependencyIds?.length&&this.#g(x,!1)}const B=d.indexOf(y);B>=0&&d.splice(B,1)};for(;d.length>=g.maxVisibleLayers;){const y=d[0];w(y)}d.push(e),this.#u(o,r),l.visibilityDependencyIds?.length&&this.#g(o,r)}async updateDrawState(e,r){if(!this.#n)return;if(!r){a(this.#a).delete(e.id),a(this.#s).get(e.id)?.remove(),a(this.#s).delete(e.id);return}if(!(e instanceof Ft)||!(e.layer instanceof Zo))return;const o=await this.#n.getLayerView(e.layer);if(!o)return;this.setInitialDrawState(e,o);const l=Nl(()=>o.suspended,(h,d)=>{d&&!h?a(this.#a).set(e.id,jn.Visible):!d&&h&&a(this.#a).set(e.id,jn.Suspended)});a(this.#s).set(e.id,l)}getNodeDrawState(e){return this.#d(),a(this.#a).get(e)??jn.Hidden}setInitialDrawState(e,r){!(e instanceof Ft)||!(e.layer instanceof Zo)||r&&(r.suspended?a(this.#a).set(e.id,jn.Suspended):a(this.#a).set(e.id,jn.Visible))}clearDrawStateHandles(){for(const e of a(this.#s).values())e.remove();a(this.#s).clear()}cleanup(){this.initialized=!1,a(this.#o).clear(),a(this.#l).clear(),a(this.#f).clear(),F(this.#i,[],!0),a(this.#r).clear(),a(this.#a).clear(),this.clearDrawStateHandles()}#u(e,r){const o=e.parent;if(o){if(!(o instanceof Ft)){this.#u(o,r);return}a(this.#o).set(o.id,r),o.layer.visible=r,this.#u(o,r)}}#g(e,r){const o=this.#v(e.id);if(o&&o.visibilityDependencyIds?.length)for(const l of o.visibilityDependencyIds){const h=a(this.#r).get(l);h&&h instanceof Ft&&(a(this.#o).set(l,r),h.layer.visible=r,this.#u(h,r))}}#m(e){if(e&&this.#t)return this.#t.getVisibilityGroupConfig(e)}#p(e){this.#t&&this.#t.resolveInheritance(e)}#y(e){const r=e.map(o=>this.#w(o,void 0));return this.#b([...r])}#v(e){if(e&&this.#t)return this.#t.getItemConfig(e)}#b(e){e.reverse();for(const r of e)r.children?.length&&this.#b(r.children);return e}#w(e,r){const o=this.#v(e.id);if(o&&o.customConverterId){if(!a(this.#f).has(o.customConverterId))throw new Error(`Custom converter not found: ${o.customConverterId}`);const h=a(this.#f).get(o.customConverterId);if(!h)throw new Error(`Custom converter not found: ${o.customConverterId}`);return h.layerToNode(e,r??null)}const l=new Ft(e.id,e.title,e,[],r);if(e.visible=o?.disableVisibilityToggle?e.visible:o?.isHidden?!1:o?.isVisibleOnInit??!1,a(this.#o).set(e.id,e.visible),this.updateDrawState(l,e.visible),this.#P(e)&&o?.showFields){const h=e;h.loaded||console.warn(`Layer not loaded: ${e.id}`);for(const d of h.fields??[]){const g=this.#x(d,l);l.children.push(g)}}if(this.#I(e)){const h=e;return l.children=h.layers.toArray().map(d=>this.#w(d,l)),l}if(this.#k(e)){const h=e;if(h.sublayers&&h.sublayers.length>0){const d=h.sublayers;l.children=d.toArray().map(this.#_)}}return l}#x(e,r){const o=this.#C(r.id,e.name),l=new dr(o,e.alias||e.name,r.layer,e,[],r),h=this.#v(o);return a(this.#o).set(o,h?.isVisibleOnInit??!1),l}#k(e){return e.type==="map-image"||e.type==="wms"}#_(e){const r=new Ft(e.uid,e.title,e);return e.sublayers?.length&&(r.children=e.sublayers.toArray().map(this.#_)),r}#S(e,r){for(const o of e)r.set(o.id,o),o.children?.length&&this.#S(o.children,r)}#C(e,r){return`${e}-${r}`}#I(e){return e.type==="group"}#P(e){return e.type==="feature"}#d(){if(!this.initialized)throw new Error("TreeviewStore is not initialized. Call initialize() first.")}}const pa='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m8.023 1.023-8 4.5 8 4.5 8-4.5zm-5.96 4.5 5.96-3.352 5.96 3.352-5.96 3.353zm13.96 3-8 4.5-8-4.5 1.02-.573 6.98 3.926 6.98-3.926zm-8 6.353 6.98-3.926 1.02.573-7.914 4.452a.18.18 0 0 1-.171 0L.023 11.523l1.02-.573z"/><path fill="none" d="M0 0h16v16H0z"/></svg>',ya='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.793 14.8A9.2 9.2 0 0 1 0 14.089l2.133-12.6a10.3 10.3 0 0 0 2.018.44 4.2 4.2 0 0 0-.143.991 12 12 0 0 1-1.073-.18l-1.81 10.697a9.5 9.5 0 0 0 2.668.363 11 11 0 0 0 3.888-.748 12.8 12.8 0 0 1 4.526-.852 8.3 8.3 0 0 1 2.489.376l-1.72-10.163a8 8 0 0 0-1.065-.278 4 4 0 0 0-.399-1.07 8.4 8.4 0 0 1 2.355.623L16 14.29a6.6 6.6 0 0 0-3.793-1.089c-3.665 0-4.749 1.6-8.414 1.6zM8 0a2.893 2.893 0 0 1 3 2.999V7l-3 3-3-3V2.999A2.893 2.893 0 0 1 8 0M6 2.999v3.587l2 2 2-2V2.999A1.893 1.893 0 0 0 8 1a1.893 1.893 0 0 0-2 1.999M8 1.75A1.25 1.25 0 1 0 9.25 3 1.25 1.25 0 0 0 8 1.75"/><path fill="none" d="M0 0h16v16H0z"/></svg>',gf='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 14.09 1.2 7h1.014l-1.09 6.437a9.5 9.5 0 0 0 2.669.363 11 11 0 0 0 3.888-.748 12.8 12.8 0 0 1 4.526-.852 8.3 8.3 0 0 1 2.489.376l-1.72-10.163a7.2 7.2 0 0 0-2.27-.399 5.9 5.9 0 0 0-2.367.434q-.165.06-.339.12V1.506a6.9 6.9 0 0 1 2.706-.493 8.2 8.2 0 0 1 3.161.674L16 14.29a6.6 6.6 0 0 0-3.793-1.089c-3.665 0-4.749 1.6-8.414 1.6A9.2 9.2 0 0 1 0 14.089zM4 11V7h4V4h4v7zm4-2.5a.954.954 0 0 1-.995 1.062h-.002L7 10h1zm3 1.5v-.487A2.96 2.96 0 0 1 9.5 10zM9 7h2V5H9zm0 1v1h.5a2.7 2.7 0 0 0 1.5-.721V8zm-4 2h1v-.5c0-.574.312-.889.93-.936l.068-.005L7 8.5a1.2 1.2 0 0 1 .119-.5H5zM2 6V1h5v5zm1.564-2.19a1.6 1.6 0 0 1 .442-.756.9.9 0 0 1 .74-.179A2.2 2.2 0 0 1 5.182 2H3v2.34a.56.56 0 0 0 .336-.09 1 1 0 0 0 .228-.44M6 2.56a1.26 1.26 0 0 0-.297.609 1 1 0 0 1-.279.544.87.87 0 0 1-.756.161l-.05-.009a2 2 0 0 0-.11.276A1.85 1.85 0 0 1 3.992 5H6z"/><path fill="none" d="M0 0h16v16H0z"/></svg>',mf='<path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>',pf='<path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/>',yf='<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14,2 14,8 20,8"/>',rs=(u,e,r,o)=>e?bf(u,r):r?o?mf:pf:yf,bf=(u,e)=>{switch(u.type){case"group":return pa;case"feature":return ya;case"tile":return gf;default:return e?pa:ya}};function wf(u){const e=u-1;return e*e*e+1}var _f=X('<div class="relative ml-4 w-full"><div class="tree-guide-line svelte-tfs16z"></div> <div class="tree-children svelte-tfs16z"></div></div>'),Sf=X('<div class="w-full"><!> <!></div>');function is(u,e){const r=U(e,"isOpen",3,!1),o=U(e,"childNodes",3,null),l=U(e,"duration",3,300);var h=Sf(),d=ee(h);xe(d,()=>e.content??De);var g=ve(d,2);{var w=y=>{var x=_f(),B=ve(ee(x),2);nn(B,21,()=>o()??[],A=>A.id,(A,M)=>{var C=V(),R=D(C);xe(R,()=>e.childNode??De,()=>a(M)),m(A,C)}),Q(B),Q(x),ui(1,B,()=>fa,()=>({duration:l(),easing:wf})),ui(2,B,()=>fa,()=>({duration:l()})),m(y,x)};$(g,y=>{r()&&o()&&y(w)})}Q(h),m(u,h)}const xf=Xs({base:"hover:bg-muted hover:text-muted-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium outline-none transition-[color,box-shadow] focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",variants:{variant:{default:"bg-transparent",outline:"border-input shadow-xs hover:bg-accent hover:text-accent-foreground border bg-transparent"},size:{default:"h-9 min-w-9 px-2",sm:"h-8 min-w-8 px-1.5",lg:"h-10 min-w-10 px-2.5"}},defaultVariants:{variant:"default",size:"default"}});function kf(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=U(e,"pressed",15,!1),l=U(e,"size",3,"default"),h=U(e,"variant",3,"default"),d=Be(e,["$$slots","$$events","$$legacy","ref","pressed","class","size","variant"]);var g=V(),w=D(g);{let y=K(()=>Wt(xf({variant:h(),size:l()}),e.class));pe(w,()=>kc,(x,B)=>{B(x,Ke({"data-slot":"toggle",get class(){return a(y)}},()=>d,{get ref(){return r()},set ref(A){r(A)},get pressed(){return o()},set pressed(A){o(A)}}))})}m(u,g),me()}function os(u,e){{let r=K(()=>e.isOpen?"rotate-90":"rotate-0");Ll(u,{get class(){return`h-4 w-4 text-muted-foreground transition-transform duration-200 ease-in-out ${a(r)??""}`}})}}const Xi="mb-1 cursor-pointer rounded-md border border-border p-2 text-left",Zi="transition-all duration-150 hover:border-border/50 hover:bg-gray-100 hover:shadow-sm",Cf="transition-colors hover:bg-blue-500",$i="text-sm font-normal",eo="bg-card",as="bg-accent text-accent-foreground",If="!h-auto !min-h-9 !whitespace-normal data-[state=on]:!bg-accent data-[state=on]:!text-accent-foreground data-[state=on]:hover:!bg-accent data-[state=on]:hover:!text-accent-foreground";function Pf(u={}){const{enhancedHover:e=!1,includeFont:r=!1,pressed:o=!1}=u;let l=Xi;return e?l+=" "+Zi:l+=" "+Cf,r&&(l+=" "+$i),o?l+=" "+as:l+=" "+eo,l}var Af=X('<div class="flex w-full !items-center !justify-between gap-2"><div class="pointer-events-none !flex min-w-0 flex-1 !items-center gap-1"><span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div>'),Tf=X('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><!> <span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function ba(u,e){const r=`calc(100% - ${e.depth*1}rem)`,o=`${Xi} ${Zi} ${If} ${eo} ${$i}`,l=`${Xi} ${Zi} ${$i}`;var h=V(),d=D(h);{var g=y=>{kf(y,{get pressed(){return e.pressed},get class(){return o},variant:"outline",get style(){return`width: ${r};`},get onPressedChange(){return e.onclick},children:(x,B)=>{var A=Af(),M=ee(A),C=ee(M),R=ee(C);Er(R,()=>e.icon),Q(C);var q=ve(C,2),N=ee(q,!0);Q(q),Q(M);var z=ve(M,2);xe(z,()=>e.children??De),Q(A),at(()=>qt(N,e.name)),m(x,A)},$$slots:{default:!0}})},w=y=>{var x=Tf();x.__click=function(...H){e.onclick?.apply(this,H)};var B=ee(x),A=ee(B),M=ee(A);os(M,{get isOpen(){return e.isOpen}});var C=ve(M,2),R=ee(C);Er(R,()=>e.icon),Q(C);var q=ve(C,2),N=ee(q,!0);Q(q),Q(A);var z=ve(A,2);xe(z,()=>e.children??De),Q(B),Q(x),at(()=>{an(x,1,`${l} ${e.pressed?as:eo}`),$n(x,`width: ${r};`),qt(N,e.name)}),m(y,x)};$(d,y=>{e.isTogglable?y(g):y(w,!1)})}m(u,h)}Rr(["click"]);function ss(u,e){ge(e,!0);const r=R=>{var q=V(),N=D(q);{var z=H=>{var J=V(),Z=D(J);{var W=be=>{ba(be,{isTogglable:!1,get pressed(){return a(y)},get icon(){return a(x)},get name(){return e.node.name},get depth(){return l()},onclick:C,get isOpen(){return a(w)}})},oe=be=>{ba(be,{isTogglable:!0,get pressed(){return a(y)},get icon(){return a(x)},get name(){return e.node.name},get depth(){return l()},onclick:M,get isOpen(){return a(w)}})};$(Z,be=>{d?be(W):be(oe,!1)})}m(H,J)};$(N,H=>{e.treeviewConfigStore.getItemConfig(e.node.id)?.isHidden||H(z)})}m(R,q)},o=(R,q=De)=>{var N=V(),z=D(N);{var H=J=>{{let Z=K(()=>l()+1);ss(J,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return q()},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get getNodeVisibility(){return e.getNodeVisibility},get depth(){return a(Z)},get useLayerTypeIcon(){return h()}})}};$(z,J=>{d&&a(w)&&!e.treeviewConfigStore.getItemConfig(q().id)?.isHidden&&J(H)})}m(R,N)},l=U(e,"depth",3,0),h=U(e,"useLayerTypeIcon",3,!1),d=!!(e.node.children&&e.node.children.length),g=!d;let w=re(!1),y=re(!1),x=re("");function B(){return!e.node.children||!e.getNodeVisibility?!1:e.node.children.some(R=>{const q=e.getNodeVisibility(R.id);return q!==void 0?q:R instanceof Ft?R.layer.visible:!1})}$e(()=>{if(!(!e.node||!(e.node instanceof Ft))){if(d)F(y,B(),!0);else{const R=e.getNodeVisibility?e.getNodeVisibility(e.node.id):void 0;F(y,R!==void 0?R:e.node.layer.visible,!0)}F(x,rs(e.node.layer,h(),d,a(w)),!0)}});function A(){!g||!e.onNodeVisibilityChange||d||(F(y,!a(y)),e.onNodeVisibilityChange(e.node,a(y)))}function M(){d||A(),e.onNodeClick?.(e.node)}function C(){F(w,!a(w)),e.onNodeClick?.(e.node)}{let R=K(()=>d?e.node.children:null);is(u,{get isOpen(){return a(w)},get content(){return r},get childNodes(){return a(R)},get childNode(){return o}})}me()}function Ef(u,e){ge(e,!0);const r=new ns;function o(){r.clearSelections()}$e(()=>{!e.webMap||r.initialized||r.initialize(e.webMap.layers.toArray(),e.treeviewConfigStore,null)}),$e(()=>{r.initialized&&!r.getVisibleNodes().length&&e.areaSelectionStore.layerId&&r.setVisibilityState(e.areaSelectionStore.layerId,!0)}),$e(()=>{if(!r.initialized||!r.getVisibleNodes().length)return;const w=r.getVisibleNodes().find(y=>y instanceof Ft&&y.layer instanceof ea);if(!w||!(w instanceof Ft)){console.warn("Visible node is not a FeatureLayer");return}if(!w.layer||!(w.layer instanceof ea)){console.warn("Visible node layer is not a FeatureLayer",w.layer.type);return}e.areaSelectionStore.setLayerId(w.id)});var l={clearSelections:o},h=V(),d=D(h);{var g=w=>{var y=V(),x=D(y);pe(x,()=>es,(B,A)=>{A(B,{children:(M,C)=>{var R=V(),q=D(R);nn(q,17,()=>r.getNodes(),N=>N.id,(N,z)=>{ss(N,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return a(z)},onNodeClick:()=>{},onNodeVisibilityChange:(H,J)=>r.setVisibilityState(H.id,J),getNodeVisibility:H=>r.getVisibilityState(H),depth:0,useLayerTypeIcon:!0})}),m(M,R)},$$slots:{default:!0}})}),m(w,y)};$(d,w=>{r.initialized&&w(g)})}return m(u,h),me(l)}class Df{configStore;constructor(e){this.configStore=e}}class Of extends Df{id="aliasPath";layerToNode(e,r){const o=new Ft(e.id,e.title,e,[],r),l=this.configStore.getItemConfig(e.id);if(this.#n(e)&&l?.showFields){const h=e;h.loaded||console.warn(`Layer not loaded: ${e.id}`);const d=new Map;for(const g of h.fields??[]){const w=this.configStore.getItemConfig(this.#t(e.id,g.name));!w||w.isHidden||this.#e(g,o,d)}o.children.sort((g,w)=>g.children.length>0&&w.children.length===0?1:g.children.length===0&&w.children.length>0?-1:0)}return o}#e(e,r,o=new Map){const l=this.#t(r.id,e.name),d=gl(e.alias||"")?.split("|").map(A=>A.trim()).filter(Boolean)??[];if(d.length===0){const A=new dr(l,e.alias||e.name,r.layer,e,[],r);return r.children.push(A),A}const g=d.slice(0,-1),w=d[d.length-1];let y=r;const x=(A,M)=>{A.children??=[],A.children.includes(M)||A.children.push(M)};for(let A=0;A<g.length;A++){const M=g[A],C=d.slice(0,A+1).join("::"),R=`${r.id}::${C}`;let q=o.get(R);q||(q=new ts(R,M,[],y),o.set(R,q),x(y,q)),y=q}const B=new dr(l,w||e.name,r.layer,e,[],y);return x(y,B),B}#t(e,r){return`${e}-${r}`}#n(e){return e.type==="feature"}}function Mf(u){switch(u.type){case"group":return Vn.GroupLayer;case"feature":return Vn.FeatureLayer;case"tile":return Vn.TileLayer;default:throw new Error(`Unsupported layer type: ${u.type}`)}}class wa{#e=[];#t=new Map;#n=[];#i=new Map;#r=[];#o=new Map;#a=new Set;constructor(e){if(!e)throw new Error("TreeviewConfigStore requires a valid configuration object.");this.#e=e.items??[],this.#t=new Map(this.#e.map(r=>[r.id,r])),this.#n=e.visibilityGroups??[],this.#i=new Map(this.#n.map(r=>[r.id,r])),this.#r=e.inheritanceGroups??[],this.#o=new Map(this.#r.map(r=>[r.id,r])),e.fieldsToHide&&(this.#a=new Set(e.fieldsToHide.map(r=>r.trim().toLowerCase())))}getItemConfig(e){return this.#t.get(e)}getVisibilityGroupConfig(e){return this.#i.get(e)}getInheritanceGroupConfig(e){return this.#o.get(e)}resolveInheritance(e){if(!(e.length===0||!this.#e||this.#e.length===0))for(const r of e){const o=this.getItemConfig(r.id);this.#s(r,o)}}#s(e,r){const o=this.#l(e,r);if(this.#y(e)&&o.showFields){const l=e;l.loaded||console.warn(`Layer not loaded: ${e.id}`);for(const h of l.fields??[])this.#f(this.#m(e.id,h.name),h.alias||h.name,o)}if(this.#p(e)){const l=e;for(const h of l.layers.toArray())this.#s(h,o)}}#l(e,r){const o=this.#h(e.id,r);return o.type===Vn.None&&(o.type=Mf(e)),o}#f(e,r,o){const l=this.#h(e,o);return l.type===Vn.None&&(l.type=Vn.Field),this.#a.has(r.trim().toLowerCase())&&(l.isHidden=!0),l}#h(e,r){let o=this.getItemConfig(e);const l=o?.inheritanceGroupId?this.getInheritanceGroupConfig(o.inheritanceGroupId):this.getInheritanceGroupConfig(r?.inheritanceGroupId??"");return o={id:e,type:Vn.None,isDownloadable:this.#c(l,"isDownloadable",o,r,!0),isVisibleOnInit:this.#c(l,"isVisibleOnInit",o,r,!1),isHidden:this.#c(l,"isHidden",o,r,!1),disableVisibilityToggle:this.#c(l,"disableVisibilityToggle",o,r,!1),isOpenOnInit:this.#c(l,"isOpenOnInit",o,r,!1),showFields:this.#c(l,"showFields",o,r,!1),visibilityDependencyIds:this.#c(l,"visibilityDependencyIds",o,r,[]),visibilityGroupId:this.#c(l,"visibilityGroupId",o,r,void 0),customConverterId:this.#c(l,"customConverterId",o,r,void 0),inheritanceGroupId:this.#c(l,"inheritanceGroupId",o,r,void 0)},this.#g(o),this.#u(o),o}#c(e,r,o,l,h){const d=o?.[r];return d!==void 0?d:e?.inheritedProperties.includes(r)&&l?l[r]??h:h}#u(e){if(this.#t.has(e.id))throw new Error(`Item with id ${e.id} already exists.`);this.#e.push(e),this.#t.set(e.id,e)}#g(e){this.#t.has(e.id)&&(this.#e=this.#e.filter(r=>r.id!==e.id),this.#t.delete(e.id))}#m(e,r){return`${e}-${r}`}#p(e){return e.type==="group"}#y(e){return e.type==="feature"}}var Ff=X("<button><!></button>");function _a(u,e){ge(e,!0);let r=U(e,"checked",15,!1),o=U(e,"indeterminate",11,!1),l=U(e,"disabled",3,!1),h=Be(e,["$$slots","$$events","$$legacy","checked","indeterminate","class","onCheckedChange","disabled"]);function d(){l()||(r(!r()),e.onCheckedChange?.(r()))}function g(M){l()||(M.key==="Enter"||M.key===" ")&&(M.preventDefault(),M.stopPropagation(),d())}var w=Ff(),y=M=>{M.stopPropagation(),d()};zt(w,M=>({type:"button",class:"visibility-btn",onclick:y,onkeydown:g,disabled:l(),"aria-pressed":r(),role:"switch","aria-label":r()?"Hide layer":"Show layer",title:r()&&!o()?"Visible":o()?"Zoom in/out to view layer":"Not visible",...h,[Ws]:M}),[()=>({visible:r(),indeterminate:o()})],void 0,"svelte-mzs82z");var x=ee(w);{var B=M=>{aa(M,{class:"size-4"})},A=M=>{var C=V(),R=D(C);{var q=z=>{aa(z,{class:"size-4"})},N=z=>{Tc(z,{class:"size-4"})};$(R,z=>{o()?z(q):z(N,!1)},!0)}m(M,C)};$(x,M=>{r()?M(B):M(A,!1)})}Q(w),m(u,w),me()}var Rf=X('<div data-slot="checkbox-indicator" class="text-current transition-none"><!></div>');function Nf(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=U(e,"checked",11,!1),l=U(e,"indeterminate",11,!1),h=Be(e,["$$slots","$$events","$$legacy","ref","checked","indeterminate","class"]),d=re(Ze(o())),g=re(Ze(l()));$e(()=>{F(d,o())}),$e(()=>{F(g,l())});var w=V(),y=D(w);{const x=(A,M)=>{let C=()=>M?.().checked,R=()=>M?.().indeterminate;var q=Rf(),N=ee(q);{var z=J=>{Nc(J,{class:"size-3.5"})},H=J=>{var Z=V(),W=D(Z);{var oe=be=>{Ha(be,{class:"size-3.5"})};$(W,be=>{R()&&be(oe)},!0)}m(J,Z)};$(N,J=>{C()?J(z):J(H,!1)})}Q(q),m(A,q)};let B=K(()=>Wt("peer flex size-4 shrink-0 items-center justify-center rounded-[4px] border border-input shadow-xs transition-shadow outline-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[state=checked]:border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:bg-input/30 dark:aria-invalid:ring-destructive/40 dark:data-[state=checked]:bg-primary",e.class));pe(y,()=>Ka,(A,M)=>{M(A,Ke({"data-slot":"checkbox",get class(){return a(B)}},()=>h,{get ref(){return r()},set ref(C){r(C)},get checked(){return a(d)},set checked(C){F(d,C,!0)},get indeterminate(){return a(g)},set indeterminate(C){F(g,C,!0)},children:x,$$slots:{default:!0}}))})}m(u,w),me()}var Lf=X("<div><!></div>");function Sa(u,e){ge(e,!0);let r=K(()=>e.getDownloadState?.(e.node)??Tt.Inactive),o=K(()=>a(r)===Tt.Active),l=K(()=>a(r)===Tt.Indeterminate);function h(w){w.stopPropagation();const y=a(r)===Tt.Active?Tt.Inactive:Tt.Active;e.onDownloadStateChanged?.(e.node,y)}var d=Lf(),g=ee(d);Nf(g,{get checked(){return a(o)},get indeterminate(){return a(l)},onclick:h,title:"Download"}),Q(d),m(u,d),me()}var Bf=X('<button><div class="flex w-full items-center justify-between gap-2"><div class="pointer-events-none flex min-w-0 flex-1 items-center gap-1"><!> <span class="inline-block size-4" aria-hidden="true"><!></span> <span class="block w-full text-left break-words"> </span></div> <!></div></button>');function xa(u,e){ge(e,!0);const r=U(e,"isFolder",3,!1),o=U(e,"isOpen",3,!1),l=`calc(100% - ${e.depth*1}rem)`;var h=Bf();h.__click=function(...R){e.onclick?.apply(this,R)};var d=ee(h),g=ee(d),w=ee(g);{var y=R=>{os(R,{get isOpen(){return o()}})};$(w,R=>{r()&&R(y)})}var x=ve(w,2),B=ee(x);Er(B,()=>e.icon),Q(x);var A=ve(x,2),M=ee(A,!0);Q(A),Q(g);var C=ve(g,2);xe(C,()=>e.children??De),Q(d),Q(h),at(R=>{an(h,1,R),$n(h,`width: ${l};`),qt(M,e.name)},[()=>pn(Pf({enhancedHover:!0,includeFont:!0}))]),m(u,h),me()}Rr(["click"]);var zf=X('<div class="flex items-center gap-2"><!> <!></div>'),jf=X('<div class="flex items-center gap-2"><!> <!></div>');function ls(u,e){ge(e,!0);const r=z=>{var H=V(),J=D(H);{var Z=W=>{var oe=V(),be=D(oe);{var Ie=Se=>{xa(Se,{get icon(){return a(A)},get name(){return e.node.name},get depth(){return h()},onclick:N,get isFolder(){return g},get isOpen(){return a(x)},children:Pe=>{var Ne=zf(),Ye=ee(Ne);{var et=we=>{Sa(we,{get node(){return e.node},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState}})};$(Ye,we=>{e.isDownloadable&&we(et)})}var Re=ve(Ye,2);{var Ue=we=>{{let ze=K(()=>e.getNodeDrawState?.(e.node.id)===jn.Suspended);_a(we,{get checked(){return a(B)},get indeterminate(){return a(ze)},onCheckedChange:R})}};$(Re,we=>{w&&we(Ue)})}Q(Ne),m(Pe,Ne)},$$slots:{default:!0}})},de=Se=>{xa(Se,{get icon(){return a(A)},get name(){return e.node.name},get depth(){return h()},onclick:q,get isFolder(){return g},children:Pe=>{var Ne=jf(),Ye=ee(Ne);{var et=we=>{Sa(we,{get node(){return e.node},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState}})};$(Ye,we=>{e.isDownloadable&&we(et)})}var Re=ve(Ye,2);{var Ue=we=>{{let ze=K(()=>e.getNodeDrawState?.(e.node.id)===jn.Suspended);_a(we,{get checked(){return a(B)},get indeterminate(){return a(ze)},onCheckedChange:R})}};$(Re,we=>{w&&we(Ue)})}Q(Ne),m(Pe,Ne)},$$slots:{default:!0}})};$(be,Se=>{g?Se(Ie):Se(de,!1)})}m(W,oe)};$(J,W=>{l()?.getItemConfig(e.node.id)?.isHidden||W(Z)})}m(z,H)},o=(z,H=De)=>{var J=V(),Z=D(J);{var W=oe=>{{let be=K(()=>l()?.getItemConfig(H().id)?.isDownloadable??!0),Ie=K(()=>h()+1);ls(oe,{get treeviewConfigStore(){return l()},get node(){return H()},get isDownloadable(){return a(be)},get onNodeClick(){return e.onNodeClick},get onNodeVisibilityChange(){return e.onNodeVisibilityChange},get onDownloadStateChanged(){return e.onDownloadStateChanged},get getDownloadState(){return e.getDownloadState},get onFilterClicked(){return e.onFilterClicked},get hasFiltersApplied(){return e.hasFiltersApplied},get getNodeVisibility(){return e.getNodeVisibility},get getNodeDrawState(){return e.getNodeDrawState},get depth(){return a(Ie)},get useLayerTypeIcon(){return d()}})}};$(Z,oe=>{g&&a(x)&&!l()?.getItemConfig(H().id)?.isHidden&&oe(W)})}m(z,J)},l=U(e,"treeviewConfigStore",3,null),h=U(e,"depth",3,0),d=U(e,"useLayerTypeIcon",3,!1),g=!!(e.node.children&&e.node.children.length),w=!g;let y=!1,x=re(!1),B=re(!1),A=re(""),M=re(!1),C=re(!1);$e(()=>{y||(F(x,l()?.getItemConfig(e.node.id)?.isOpenOnInit??!1,!0),y=!0)}),$e(()=>{if(!e.node)return;const z=e.getNodeVisibility?e.getNodeVisibility(e.node.id):!1;F(B,z??!1,!0),e.node instanceof Ft&&F(A,rs(e.node.layer,d(),g,a(x)),!0)}),$e(()=>{if(!(e.node instanceof Ft))return;const z=(e.getDownloadState?.(e.node)===Tt.Active&&e.node.layer.type==="feature")??!1;z&&!a(M)?(F(M,!0),F(C,!1)):!z&&a(M)&&(F(C,!0),setTimeout(()=>{F(M,!1),F(C,!1)},180))});function R(){!w||!e.onNodeVisibilityChange||(F(B,!a(B)),e.onNodeVisibilityChange(e.node,a(B)))}function q(){e.onNodeClick?.(e.node)}function N(){F(x,!a(x)),e.onNodeClick?.(e.node)}{let z=K(()=>g?e.node.children:null);is(u,{get isOpen(){return a(x)},get content(){return r},get childNodes(){return a(z)},get childNode(){return o}})}me()}class Vf{#e;#t;constructor(e,r){this.#e=e,this.#t=r}updateSelection(e,r){if(!this.#t.getItemConfig(e.id)?.isHidden){if(!(e instanceof Ft)){this.updateChildrenSelection(e,r);return}if(e instanceof dr){this.updateFieldSelection(e,r);return}this.updateLayerSelection(e,r)}}getSelectionState(e){if(!(e instanceof Ft))return this.determineSelectionStateFromChildren(e);if(this.isGroupLayer(e))return this.determineSelectionStateFromChildren(e);let r;return e instanceof dr?(r=this.#e.getSelection(e.featureLayer.id),r&&r.selectedFieldIds.has(e.field.name)?Tt.Active:Tt.Inactive):(r=this.#e.getSelection(e.id),r?this.isFeatureLayer(e)&&e.children&&e.children.length>0?this.determineSelectionStateFromChildren(e):Tt.Active:Tt.Inactive)}updateLayerSelection(e,r){let o=this.#e.getSelection(e.id);switch(r){case Tt.Active:!o&&!this.isGroupLayer(e)&&(o=this.createAndAddDataSelection(e.id));for(const l of e.children||[])this.updateSelection(l,r);break;case Tt.Inactive:o&&!this.isGroupLayer(e)&&this.#e.removeSelection(e.id),this.updateChildrenSelection(e,r);break}}updateFieldSelection(e,r){let o=this.#e.getSelection(e.featureLayer.id);switch(r){case Tt.Active:o||(o=this.createAndAddDataSelection(e.featureLayer.id)),this.#e.addOrUpdateSelection(e.featureLayer.id,[...o.selectedFieldIds,e.field.name]);break;case Tt.Inactive:{if(!o)break;const l=new Cn(o.selectedFieldIds);l.delete(e.field.name),this.#e.addOrUpdateSelection(e.featureLayer.id,[...l]),l.size===0&&this.#e.removeSelection(o.layerId);break}}}updateChildrenSelection(e,r){for(const o of e.children||[])this.updateSelection(o,r)}determineSelectionStateFromChildren(e){let r=0,o=0;for(const l of e.children||[]){if(this.#t.getItemConfig(l.id)?.isHidden)continue;o++;const d=this.getSelectionState(l);if(d===Tt.Active||this.isFeatureLayer(l)&&d!==Tt.Inactive)r++;else if(d===Tt.Indeterminate)return Tt.Indeterminate}return r===0?Tt.Inactive:r===o?Tt.Active:Tt.Indeterminate}createAndAddDataSelection(e){const r={layerId:e,selectedFieldIds:new Cn};return this.#e.addSelection(r),r}isGroupLayer(e){return e instanceof Ft&&e.layer.type==="group"}isFeatureLayer(e){return e instanceof Ft&&e.layer.type==="feature"}}function qf(u,e){ge(e,!0);const r=U(e,"fieldFilterMenuStore",7);function o(){l.clearSelections()}const l=new ns,h=new Vf(e.dataSelectionStore,e.treeviewConfigStore);$e(()=>{if(!e.webMap||l.initialized)return;(async()=>{await e.webMap.when(),await d(e.webMap.layers.toArray());const z=new Of(e.treeviewConfigStore);l.initialize(e.webMap.layers.toArray(),e.treeviewConfigStore,e.layerViewProvider,[z],e.customRendererService)})()});async function d(N){for(const z of N)z.type==="feature"&&!z.loaded&&await z.load(),z.type==="group"&&await d(z.layers.toArray())}function g(N,z){console.log(`[tree-view] onNodeVisibilityChange: Setting visibility of node ${N.id} to ${z}`),l.setVisibilityState(N.id,z)}function w(N){return l.getNodeDrawState(N)}function y(N,z){h.updateSelection(N,z)}function x(N){return h.getSelectionState(N)}function B(N){if(r().ActiveLayer?.uid===N){r().ActiveLayer=null;return}const H=l.getNodeById(N);!H||!(H instanceof Ft)||(r().ActiveLayer=H.layer)}function A(N){const z=e.dataSelectionStore.getSelection(N);if(!z?.selectedFieldIds)return!1;const H=l.getNodeById(N);if(!H||!(H instanceof Ft))return!1;const J=H.layer.fields?.length||0,Z=z?.selectedFieldIds.size||0;return Z>0&&Z!==J}var M={clearSelections:o},C=V(),R=D(C);{var q=N=>{var z=V(),H=D(z);pe(H,()=>es,(J,Z)=>{Z(J,{children:(W,oe)=>{var be=V(),Ie=D(be);nn(Ie,17,()=>l.getNodes(),de=>de.id,(de,Se)=>{{let Oe=K(()=>e.treeviewConfigStore.getItemConfig(a(Se).id)?.isDownloadable??!0);ls(de,{get treeviewConfigStore(){return e.treeviewConfigStore},get node(){return a(Se)},get isDownloadable(){return a(Oe)},onNodeClick:()=>{},onNodeVisibilityChange:g,getNodeVisibility:Pe=>l.getVisibilityState(Pe),onDownloadStateChanged:y,getDownloadState:x,onFilterClicked:B,hasFiltersApplied:A,getNodeDrawState:w,depth:0,useLayerTypeIcon:!0})}}),m(W,be)},$$slots:{default:!0}})}),m(N,z)};$(R,N=>{l.initialized&&N(q)})}return m(u,C),me(M)}var Kf=X('<div class="map-view svelte-v1ttpo"></div>');function Hf(u,e){ge(e,!0);const r=U(e,"mapView",7);let o=re(null),l=null;const h="streets-vector";let d,g;function w(){if(!r())throw new Error("MapView is not initialized");return new za(r())}er(async()=>{await y(),await A()});async function y(){if(!g){const[{default:N},{default:z},{default:H},{default:J}]=await Promise.all([Ar(()=>import("../chunks/h5rW6lAS.js").then(Z=>Z.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),Ar(()=>import("../chunks/DP-0fjQN.js").then(Z=>Z.a2),__vite__mapDeps([25,1,3,26,27,15,28,13,4,29,5,6,12,17,30,31,8,14,32,22,33,34,35,16,36,37,38,39,40,0,2,7,9,10,11,18,19,20,21,23,24,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url),Ar(()=>import("../chunks/COf4WTrX.js").then(Z=>Z.W),__vite__mapDeps([63,1,3,4,0,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29,30,31,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,46,47,97,98,99]),import.meta.url),Ar(()=>import("../chunks/O7sg2ysZ.js").then(Z=>Z.aq),__vite__mapDeps([64,3,1,29,15,5,4,6,12,13,17,30,65,66,67,16,68,31,8,69,70,22,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,9]),import.meta.url)]);d=N,g=z}}async function x(){return new d({basemap:h})}async function B(){if(e.webMap)try{if(await y(),await A(),!r()){console.error("MapView is not initialized");return}r().container=l,r().popupEnabled=!1,r().map=e.webMap,console.log("[uprn-map-view] MapView updated with new webMap"),await e.areaSelectionInteractionStore.refreshLayerView(),await e.areaSelectionInteractionStore.refreshAreas()}catch(N){console.error("Error updating MapView with new webMap:",N)}}async function A(){if(!l){console.error("Map container element was not found");return}try{r().container=l,r().popupEnabled=!1,r().map=e.webMap??void 0,r().ui.move("zoom","top-right"),await r().when(),console.log("[uprn-map-view] Map loaded successfully")}catch(N){console.error("Error loading map:",N),await M()}}async function M(){try{const N=await x();r().container=l,r().popupEnabled=!1,r().map=N,await r().when(),console.log("[uprn-map-view] Fallback map loaded")}catch(N){console.error("Error loading fallback map:",N)}}$e(()=>{e.webMap&&B()}),$e(()=>{r()&&(a(o)?a(o).updateInteractableLayers(e.interactableLayers):F(o,new Ol(r(),e.areaSelectionInteractionStore,e.interactableLayers),!0))});function C(){a(o)&&a(o).cleanup(),r()&&r().destroy()}Ea(()=>{C()});var R={getLayerViewProvider:w},q=Kf();return $t(q,N=>l=N,()=>l),m(u,q),me(R)}function Uf(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=U(e,"value",15,""),l=Be(e,["$$slots","$$events","$$legacy","ref","value","class"]);var h=V(),d=D(h);{let g=K(()=>Wt("flex flex-col gap-2",e.class));pe(d,()=>mc,(w,y)=>{y(w,Ke({"data-slot":"tabs",get class(){return a(g)}},()=>l,{get ref(){return r()},set ref(x){r(x)},get value(){return o()},set value(x){o(x)}}))})}m(u,h),me()}function Gf(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class"]);var l=V(),h=D(l);{let d=K(()=>Wt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e.class));pe(h,()=>yc,(g,w)=>{w(g,Ke({"data-slot":"tabs-list",get class(){return a(d)}},()=>o,{get ref(){return r()},set ref(y){r(y)}}))})}m(u,l),me()}function Wf(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class"]);var l=V(),h=D(l);{let d=K(()=>Wt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 whitespace-nowrap rounded-md border border-transparent px-2 py-1 text-sm font-medium transition-[color,box-shadow] focus-visible:outline-1 focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",e.class));pe(h,()=>wc,(g,w)=>{w(g,Ke({"data-slot":"tabs-trigger",get class(){return a(d)}},()=>o,{get ref(){return r()},set ref(y){r(y)}}))})}m(u,l),me()}var Yf=X('<div class="min-w-0 space-y-2 overflow-hidden p-4"><!></div>'),Jf=X('<div class="flex min-h-0 flex-1 flex-col"><!></div>');function ai(u,e){var r=Jf(),o=ee(r);pe(o,()=>no,(l,h)=>{h(l,{class:"card-content flex min-h-0 flex-1 flex-col overflow-hidden p-0",children:(d,g)=>{var w=Yf(),y=ee(w);xe(y,()=>e.children??De),Q(w),m(d,w)},$$slots:{default:!0}})}),Q(r),m(u,r)}var Qf=X("<!> <!>",1),Xf=X('<div class="tab-list-wrapper flex-shrink-0 svelte-op5eza"><!></div> <!>',1);function Zf(u,e){ge(e,!0);const r=U(e,"triggers",19,()=>[]);var o=V(),l=D(o);pe(l,()=>Uf,(h,d)=>{d(h,{get value(){return e.value},get onValueChange(){return e.onValueChange},class:"flex h-full w-full flex-col",children:(g,w)=>{var y=Xf(),x=D(y),B=ee(x);pe(B,()=>Gf,(M,C)=>{C(M,{class:"tab-list",children:(R,q)=>{var N=V(),z=D(N);nn(z,17,r,tr,(H,J,Z,W)=>{let oe=()=>a(J).value,be=()=>a(J).label;var Ie=Qf(),de=D(Ie);pe(de,()=>Wf,(Pe,Ne)=>{Ne(Pe,{get value(){return oe()},class:"tab-trigger",children:(Ye,et)=>{en();var Re=tn();at(()=>qt(Re,be())),m(Ye,Re)},$$slots:{default:!0}})});var Se=ve(de,2);{var Oe=Pe=>{cl(Pe,{class:"separator"})};$(Se,Pe=>{oe()!==r()[r().length-1]?.value&&Pe(Oe)})}m(H,Ie)}),m(R,N)},$$slots:{default:!0}})}),Q(x);var A=ve(x,2);xe(A,()=>e.children??De),m(g,y)},$$slots:{default:!0}})}),m(u,o),me()}const cs=typeof window<"u"?window:void 0;function $f(u){let e=u.activeElement;for(;e?.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}let eh=class{#e;#t;constructor(e={}){const{window:r=cs,document:o=r?.document}=e;r!==void 0&&(this.#e=o,this.#t=gi(l=>{const h=Mn(r,"focusin",l),d=Mn(r,"focusout",l);return()=>{h(),d()}}))}get current(){return this.#t?.(),this.#e?$f(this.#e):null}};new eh;function th(u,e){switch(u){case"post":$e(e);break;case"pre":Oa(e);break}}function us(u,e,r,o={}){const{lazy:l=!1}=o;let h=!l,d=Array.isArray(u)?[]:void 0;th(e,()=>{const g=Array.isArray(u)?u.map(y=>y()):u();if(!h){h=!0,d=g;return}const w=On(()=>r(g,d));return d=g,w})}function bo(u,e,r){us(u,"post",e,r)}function nh(u,e,r){us(u,"pre",e,r)}bo.pre=nh;function rh(u,e){switch(u){case"local":return e.localStorage;case"session":return e.sessionStorage}}class ds{#e;#t;#n;#i;#r;#o=re(0);constructor(e,r,o={}){const{storage:l="local",serializer:h={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:d=!0,window:g=cs}=o;if(this.#e=r,this.#t=e,this.#n=h,g===void 0)return;const w=rh(l,g);this.#i=w;const y=w.getItem(e);y!==null?this.#e=this.#s(y):this.#l(r),d&&l==="local"&&(this.#r=gi(()=>Mn(g,"storage",this.#a)))}get current(){this.#r?.(),a(this.#o);const e=this.#s(this.#i?.getItem(this.#t))??this.#e,r=new WeakMap,o=l=>{if(l===null||l?.constructor.name==="Date"||typeof l!="object")return l;let h=r.get(l);return h||(h=new Proxy(l,{get:(d,g)=>(a(this.#o),o(Reflect.get(d,g))),set:(d,g,w)=>(F(this.#o,a(this.#o)+1),Reflect.set(d,g,w),this.#l(e),!0)}),r.set(l,h)),h};return o(e)}set current(e){this.#l(e),F(this.#o,a(this.#o)+1)}#a=e=>{e.key!==this.#t||e.newValue===null||(this.#e=this.#s(e.newValue),F(this.#o,a(this.#o)+1))};#s(e){try{return this.#n.deserialize(e)}catch(r){console.error(`Error when parsing "${e}" from persisted store "${this.#t}"`,r);return}}#l(e){try{e!=null&&this.#i?.setItem(this.#t,this.#n.serialize(e))}catch(r){console.error(`Error when writing value from persisted store "${this.#t}" to ${this.#i}`,r)}}}function ka(u){return u.filter(e=>e.length>0)}const fs={getItem:u=>null,setItem:(u,e)=>{}},mi=typeof document<"u";function ih(u){return typeof u=="function"}function oh(u){return u!==null&&typeof u=="object"}const Mr=Symbol("box"),wo=Symbol("is-writable");function ah(u){return oh(u)&&Mr in u}function sh(u){return Bt.isBox(u)&&wo in u}function Bt(u){let e=re(Ze(u));return{[Mr]:!0,[wo]:!0,get current(){return a(e)},set current(r){F(e,r,!0)}}}function lh(u,e){const r=K(u);return e?{[Mr]:!0,[wo]:!0,get current(){return a(r)},set current(o){e(o)}}:{[Mr]:!0,get current(){return u()}}}function ch(u){return Bt.isBox(u)?u:ih(u)?Bt.with(u):Bt(u)}function uh(u){return Object.entries(u).reduce((e,[r,o])=>Bt.isBox(o)?(Bt.isWritableBox(o)?Object.defineProperty(e,r,{get(){return o.current},set(l){o.current=l}}):Object.defineProperty(e,r,{get(){return o.current}}),e):Object.assign(e,{[r]:o}),{})}function dh(u){return Bt.isWritableBox(u)?{[Mr]:!0,get current(){return u.current}}:u}Bt.from=ch;Bt.with=lh;Bt.flatten=uh;Bt.readonly=dh;Bt.isBox=ah;Bt.isWritableBox=sh;function fh(u,e){const r=RegExp(u,"g");return o=>{if(typeof o!="string")throw new TypeError(`expected an argument of type string, but got ${typeof o}`);return o.match(r)?o.replace(r,e):o}}const hh=fh(/[A-Z]/,u=>`-${u.toLowerCase()}`);function vh(u){if(!u||typeof u!="object"||Array.isArray(u))throw new TypeError(`expected an argument of type object, but got ${typeof u}`);return Object.keys(u).map(e=>`${hh(e)}: ${u[e]};`).join(`
`)}function gh(u={}){return vh(u).replace(`
`," ")}const mh={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};gh(mh);const ph=typeof window<"u"?window:void 0;function yh(u){let e=u.activeElement;for(;e?.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}class bh{#e;#t;constructor(e={}){const{window:r=ph,document:o=r?.document}=e;r!==void 0&&(this.#e=o,this.#t=gi(l=>{const h=Mn(r,"focusin",l),d=Mn(r,"focusout",l);return()=>{h(),d()}}))}get current(){return this.#t?.(),this.#e?yh(this.#e):null}}new bh;const Ui=Bt("mode-watcher-mode"),Gi=Bt("mode-watcher-theme"),wh=["dark","light","system"];function Ca(u){return typeof u!="string"?!1:wh.includes(u)}class _h{#e="system";#t=mi?localStorage:fs;#n=this.#t.getItem(Ui.current);#i=Ca(this.#n)?this.#n:this.#e;#r=re(Ze(this.#o()));#o(e=this.#i){return new ds(Ui.current,e,{serializer:{serialize:r=>r,deserialize:r=>Ca(r)?r:this.#e}})}constructor(){vi(()=>bo.pre(()=>Ui.current,(e,r)=>{const o=a(this.#r).current;F(this.#r,this.#o(o),!0),r&&localStorage.removeItem(r)}))}get current(){return a(this.#r).current}set current(e){a(this.#r).current=e}}class Sh{#e=void 0;#t=!0;#n=re(Ze(this.#e));#i=typeof window<"u"&&typeof window.matchMedia=="function"?new ul("prefers-color-scheme: light"):{current:!1};query(){mi&&F(this.#n,this.#i.current?"light":"dark",!0)}tracking(e){this.#t=e}constructor(){vi(()=>{Oa(()=>{this.#t&&this.query()})}),this.query=this.query.bind(this),this.tracking=this.tracking.bind(this)}get current(){return a(this.#n)}}const Ia=new _h,xh=new Sh;class kh{#e=mi?localStorage:fs;#t=this.#e.getItem(Gi.current);#n=this.#t===null||this.#t===void 0?"":this.#t;#i=re(Ze(this.#r()));#r(e=this.#n){return new ds(Gi.current,e,{serializer:{serialize:r=>typeof r!="string"?"":r,deserialize:r=>r}})}constructor(){vi(()=>bo.pre(()=>Gi.current,(e,r)=>{const o=a(this.#i).current;F(this.#i,this.#r(o),!0),r&&localStorage.removeItem(r)}))}get current(){return a(this.#i).current}set current(e){a(this.#i).current=e}}new kh;let Pa,Aa,Ta=!1,Pr=null;function Ch(){return Pr||(Pr=document.createElement("style"),Pr.appendChild(document.createTextNode(`* {
		-webkit-transition: none !important;
		-moz-transition: none !important;
		-o-transition: none !important;
		-ms-transition: none !important;
		transition: none !important;
	}`)),Pr)}function Ih(u,e=!1){if(typeof document>"u")return;if(!Ta){Ta=!0,u();return}if(typeof window<"u"&&window.__vitest_worker__){u();return}clearTimeout(Pa),clearTimeout(Aa);const o=Ch(),l=()=>document.head.appendChild(o),h=()=>{o.parentNode&&document.head.removeChild(o)};function d(){u(),window.requestAnimationFrame(h)}if(typeof window.requestAnimationFrame<"u"){l(),e?d():window.requestAnimationFrame(()=>{d()});return}l(),Pa=window.setTimeout(()=>{u(),Aa=window.setTimeout(h,16)},16)}const si=Bt(void 0),Ph=Bt(!0),Ah=Bt(!1),Th=Bt([]),Eh=Bt([]);function Dh(){const u=K(()=>{if(!mi)return;const e=Ia.current==="system"?xh.current:Ia.current,r=ka(Th.current),o=ka(Eh.current);function l(){const h=document.documentElement,d=document.querySelector('meta[name="theme-color"]');e==="light"?(r.length&&h.classList.remove(...r),o.length&&h.classList.add(...o),h.style.colorScheme="light",d&&si.current&&d.setAttribute("content",si.current.light)):(o.length&&h.classList.remove(...o),r.length&&h.classList.add(...r),h.style.colorScheme="dark",d&&si.current&&d.setAttribute("content",si.current.dark))}return Ph.current?Ih(l,Ah.current):l(),e});return{get current(){return a(u)}}}const Oh=Dh();function Mh(u,e){ge(e,!0);let r=Be(e,["$$slots","$$events","$$legacy"]);Uu(u,Ke({get theme(){return Oh.current},class:"toaster group",style:"--normal-bg: var(--color-popover); --normal-text: var(--color-popover-foreground); --normal-border: var(--color-border);"},()=>r)),me()}const Fh=[{value:"define-areas",label:"Define Areas"},{value:"select-data",label:"Select Data"},{value:"export",label:"Export"},{value:"downloads",label:"Download"}];class Rh{#e;constructor(e){if(!e)throw new Error("UprnDownloadService endpoints configuration is required");if(!e.baseUrl||!e.healthRoute||!e.requestJobRoute||!e.requestJobStatusesRoute||!e.getAreaSelectionLimitsRoute||!e.fetchDownloadRoute)throw new Error("UprnDownloadService endpoints configuration is incomplete");this.#e=e}async getHealth(){try{const e=`${this.#e.baseUrl}${this.#e.healthRoute}`,r=await fetch(e);return r.ok?(await r.json()).status==="ok":!1}catch(e){return console.error("Health check failed:",e),!1}}async requestJob(e){try{console.log("[uprn-download-service] requesting job with request:",e);const r=`${this.#e.baseUrl}${this.#e.requestJobRoute}`,o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok){console.error("Failed to request job:",o.statusText,"request:",JSON.stringify(e));return}return await o.json()}catch(r){console.error("Error requesting job:",r);return}}async requestJobStatuses(e){try{const r=`${this.#e.baseUrl}${this.#e.requestJobStatusesRoute}`,o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok){console.error("Failed to get job statuses:",o.statusText);return}return await o.json()}catch(r){console.error("Error getting job statuses:",r);return}}async getSelectionAreaLimits(){try{const e=`${this.#e.baseUrl}${this.#e.getAreaSelectionLimitsRoute}`,r=await fetch(e);if(!r.ok){console.error("Failed to get area selection limits:",r.statusText);return}return await r.json()}catch(e){console.error("Error getting selection area limits:",e);return}}getDownloadUrl(e){const r=this.#e.baseUrl.replace(/\/+$/,""),o=this.#e.fetchDownloadRoute.replace(/\/+$/,"");return`${r}${o}/${encodeURIComponent(e)}`}}class Nh{#e;constructor(e){this.#e=e}async getHealth(){try{const e=`${this.#e.baseUrl}${this.#e.healthRoute}`,r=await fetch(e);return r.ok?(await r.json()).status==="ok":!1}catch(e){return console.error("Health check failed:",e),!1}}async chat(e){try{const r=`${this.#e.baseUrl}${this.#e.chatRoute}`,l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(!l.ok){console.error("Failed to send chat query:",l.statusText);return}return await l.json()}catch(r){console.error("Error sending chat query:",r);return}}async chatStream(e,r){try{const o=`${this.#e.baseUrl}${this.#e.chatStreamRoute}`,h=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(!h.ok)return console.error("Failed to start chat stream:",h.statusText),!1;const d=h.body?.getReader();if(!d)return console.error("No response body reader available"),!1;const g=new TextDecoder;let w=!1;for(;!w;){const{value:y,done:x}=await d.read();if(w=x,y){const B=g.decode(y,{stream:!w});r(B)}}return!0}catch(o){return console.error("Error during chat stream:",o),!1}}}const Lh=Object.freeze({lod00World:{lod:0,scale:591657527591555e-6},lod01World:{lod:1,scale:295828763795777e-6},lod02World:{lod:2,scale:147914381897889e-6},lod03Continent:{lod:3,scale:73957190948944e-6},lod04Continent:{lod:4,scale:36978595474472e-6},lod05Countries:{lod:5,scale:18489297737236e-6},lod06Country:{lod:6,scale:9244648868618e-6},lod07StatesProvinces:{lod:7,scale:4622324434309e-6},lod08Counties:{lod:8,scale:2311162217155e-6},lod09Counties:{lod:9,scale:1155581108577e-6},lod10Country:{lod:10,scale:577790.554289},lod11MetropolitanArea:{lod:11,scale:288895.277144},lod12Cities:{lod:12,scale:144447.638572},lod13City:{lod:13,scale:72223.819286},lod14Town:{lod:14,scale:36111.909643},lod15Neighborhood:{lod:15,scale:18055.954822},lod16Streets:{lod:16,scale:9027.977411},lod17CityBlock:{lod:17,scale:4513.988705},lod18Buildings:{lod:18,scale:2256.994353},lod19Building:{lod:19,scale:1128.497176},lod20Houses:{lod:20,scale:564.248588},lod21Houses:{lod:21,scale:282.124294},lod22Houses:{lod:22,scale:141.062147},lod23HouseProperty:{lod:23,scale:70.5310735}});class Bh{#e=null;#t=!1;async init(e){this.#t||(await this.#n(e),this.#t=!0)}async#n(e){const o=await(await fetch(e)).json();this.#e=o}doesFieldHaveCustomRenderer(e,r){this.#l();const o=this.#e.FeatureLayers.find(d=>d.Name===e.title);if(!o)return!1;const l=this.#e.Fields.find(d=>d.FeatureLayerId===o.Id&&d.Name===r);return l?!!this.#e.CustomRenderers_Fields.find(d=>d.FieldId===l.Id):!1}getAllFieldsWithCustomRenderers(e){this.#l();const r=this.#e.FeatureLayers.find(h=>h.Name===e.title);if(!r)return[];const o=this.#e.Fields.filter(h=>h.FeatureLayerId===r.Id),l=[];for(const h of o)this.#e.CustomRenderers_Fields.some(g=>g.FieldId===h.Id)&&l.push(h.Name);return l}async applyCustomRenderer(e,r){this.#l();const o=this.#e.FeatureLayers.find(x=>x.Name===e.title);if(!o)return;const l=this.#e.Fields.find(x=>x.FeatureLayerId===o.Id&&x.Name===r);if(!l){console.warn(`[custom-renderer-service] could not find the field ${r} for feature layer id ${o.Id}`);return}const h=this.#e.CustomRenderers_Fields.find(x=>x.FieldId===l.Id);if(!h){console.warn(`[custom-renderer-service] could not find a custom renderer field for field ${r} in feature layer id ${o.Id}`);return}const d=this.#e.CustomRenderers.find(x=>x.Id===h.CustomRendererId);if(!d)throw new Error(`Could not find a custom renderer with the id ${h.CustomRendererId}`);const g=await this.getRendererClassBreaks(d.ClassBreaksGroupId.toString()),w=await this.getRendererSymbols(d.SymbolsId.toString()),y=this.#r(d.CustomRendererType,w,g,[],r);e.renderer=y,this.setCustomOutlines(e,d.LodsGroupId)}async setCustomOutlines(e,r){const o=this.#e.CustomRenderers_Lods.filter(d=>d.GroupId===r).sort((d,g)=>d.Lod-g.Lod);if(o.length===0){console.warn(`No LODs found for LODs group id ${r}`);return}const l=[],h=Object.values(Lh);o.forEach(d=>{const g=d.OutlineWidth,w=d.Lod,y=this.#i(h,w)-1;l.push({size:g,value:h[y].scale})}),(e.renderer instanceof ta||e.renderer instanceof na)&&this.#s(e.renderer,l)}async getRendererClassBreaks(e){const r=parseInt(e,10),o=this.#e.CustomRenderers_ClassBreaks.filter(l=>l.GroupId===r).sort((l,h)=>l.Order-h.Order);if(o.length===0)throw new Error(`Could not find a group with the id ${e}`);return o}async getRendererSymbols(e){const r=parseInt(e,10),o=this.#e.CustomRenderers_Symbols.find(d=>d.Id===r);if(!o)throw new Error(`Could not find a symbol with the id ${e}`);const l=this.#e.CustomRenderers_Symbols_Appearances.filter(d=>d.SymbolsId===r).sort((d,g)=>d.Order-g.Order);return{...o,Appearances:l}}#i(e,r){const o=e.findIndex(l=>l.lod===r);return o===-1?0:o<23?o+1:o}#r(e,r,o,l,h){switch(e){case 1:return this.#a(r,l);case 2:return this.#o(h,r,o,l);default:throw new Error(`Unknown renderer type: ${e}`)}}#o(e,r,o,l){const h="ClassMinValue",d="ClassMaxValue",g="SymbolColor",w="OutlineColor",y="OutlineWidth",x=r.Appearances.length,B=new ta({field:e});for(let A=0;A<x;A++){const M=o[A][h],C=o[A][d],R=r.Appearances[A][g],q=r.Appearances[A][w],N=r.Appearances[A][y];B.addClassBreakInfo({minValue:M,maxValue:C,symbol:new ra({color:ni.fromHex(R),outline:new ia({color:ni.fromHex(q),width:N})})})}return this.#s(B,l),B}#a(e,r){const o="SymbolColor",l="OutlineColor",h="OutlineWidth",d=e.Appearances[0][o],g=e.Appearances[0][l],w=e.Appearances[0][h],y=new na({symbol:new ra({color:ni.fromHex(d),outline:new ia({color:ni.fromHex(g),width:w})})});return this.#s(y,r),y}#s(e,r){e.visualVariables=[{type:"size",target:"outline",valueExpression:"$view.scale",stops:r}]}#l(){if(!this.#t)throw new Error("CustomRendererService is not initialized");if(!this.#e)throw new Error("Data is not loaded")}}var zh=X('<div class="flex w-full items-center justify-between"><div class="font-medium">Chat</div> <div class="flex gap-1"><!> <!></div></div>'),jh=X("<!> <!>",1),Vh=X("<div><!></div>");function qh(u,e){ge(e,!0);const r=U(e,"isOpenedOnInit",3,!1);let o=re(!1),l=re(Ze(r())),h=re(!1),d=re(void 0),g="300px",w="45px";$e(()=>{a(o)||!a(d)||(a(l)&&(a(d).style.height=g),F(o,!0))});function y(){a(d)&&(F(l,!a(l)),F(h,!1),a(l)?(w=a(d).style.height,a(d).style.height=g):a(d).style.height=w)}function x(){a(d)&&(F(h,!a(h)),a(h)?(g=a(d).style.height,a(d).style.height="100%"):a(d).style.height=g)}var B=Vh(),A=ee(B);pe(A,()=>to,(M,C)=>{C(M,{class:"h-full w-full gap-0 rounded-none py-0 pt-0 pb-0",children:(R,q)=>{var N=jh(),z=D(N);pe(z,()=>Ys,(Z,W)=>{W(Z,{class:"pt-2",children:(oe,be)=>{var Ie=zh(),de=ve(ee(Ie),2),Se=ee(de);{var Oe=Ne=>{sn(Ne,{class:"size-6 border-1 bg-background hover:bg-accent focus-visible:border-ring",onclick:x,children:(Ye,et)=>{var Re=V(),Ue=D(Re);{var we=Qe=>{qc(Qe,{class:"text-primary"})},ze=Qe=>{Vc(Qe,{class:"text-primary"})};$(Ue,Qe=>{a(h)?Qe(we):Qe(ze,!1)})}m(Ye,Re)},$$slots:{default:!0}})};$(Se,Ne=>{a(l)&&Ne(Oe)})}var Pe=ve(Se,2);sn(Pe,{class:"size-6 border-1 bg-background hover:bg-accent focus-visible:border-ring",onclick:y,children:(Ne,Ye)=>{var et=V(),Re=D(et);{var Ue=ze=>{zc(ze,{class:"text-primary"})},we=ze=>{Dl(ze,{class:"text-primary"})};$(Re,ze=>{a(l)?ze(we,!1):ze(Ue)})}m(Ne,et)},$$slots:{default:!0}}),Q(de),Q(Ie),m(oe,Ie)},$$slots:{default:!0}})});var H=ve(z,2);{var J=Z=>{var W=V(),oe=D(W);pe(oe,()=>no,(be,Ie)=>{Ie(be,{class:"h-full min-h-[10px] w-full p-0",children:(de,Se)=>{var Oe=V(),Pe=D(Oe);xe(Pe,()=>e.children??De),m(de,Oe)},$$slots:{default:!0}})}),m(Z,W)};$(H,Z=>{a(l)&&Z(J)})}m(R,N)},$$slots:{default:!0}})}),Q(B),$t(B,M=>F(d,M),()=>a(d)),m(u,B),me()}class Kh{#e;#t;#n=re(!1);#i=K(()=>this.#e.exportSnapshot());#r=K(()=>{const e=new fn;for(const[r,o]of this.#t.dataSelections)e.set(r,{layerId:o.layerId,selectedFieldIds:o.selectedFieldIds});return e});constructor(e,r){this.#e=e,this.#t=r,vi(()=>{$e(()=>{console.log("[selection-tracking-store] Detected area selection change"),(async()=>{if(!a(this.#n)){console.log("[selection-tracking-store] Initial load not complete, skipping area selection effect");return}if(a(this.#i)){if(!a(this.#i).layerId){await Ir({areas:null});return}if(!a(this.#i).selectedAreaIds.size){await Ir({areas:null});return}await Ir({areas:a(this.#i)}),console.log("[selection-tracking-store] Area selection updated:",ci(a(this.#i)))}})()}),$e(()=>{console.log("[selection-tracking-store] Detected data selection change"),(async()=>{if(!a(this.#n)){console.log("[selection-tracking-store] Initial load not complete, skipping data selection effect");return}if(!a(this.#r)||a(this.#r).size===0){console.log("[selection-tracking-store] No data selections, clearing in database"),await Ir({data:[]});return}await Ir({data:a(this.#r).values().toArray()}),console.log("[selection-tracking-store] Data selection updated:",ci(a(this.#r)))})()})})}async loadSelections(){const e=await Ya();if(!e){console.log("[selection-tracking-store] No existing selection found in database"),F(this.#n,!0);return}console.log("[selection-tracking-store] Loaded selection from database:",e),e.areas&&(this.#e.setLayerId(e.areas.layerId),console.log("[selection-tracking-store] (loadSelections) Restoring selected area IDs:",Array.from(e.areas.selectedAreaIds),"layer ID:",this.#e.layerId),this.#e.addSelectedAreas(Array.from(e.areas.selectedAreaIds))),e.data.forEach(r=>{this.#t.addSelection(r)}),F(this.#n,!0)}}function Hh(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=U(e,"value",15,""),l=Be(e,["$$slots","$$events","$$legacy","ref","class","value"]);var h=V(),d=D(h);{let g=K(()=>Wt("grid gap-3",e.class));pe(d,()=>dc,(w,y)=>{y(w,Ke({"data-slot":"radio-group",get class(){return a(g)}},()=>l,{get ref(){return r()},set ref(x){r(x)},get value(){return o()},set value(x){o(x)}}))})}m(u,h),me()}var Uh=X('<div data-slot="radio-group-indicator" class="relative flex items-center justify-center"><!></div>');function Gh(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class"]);var l=V(),h=D(l);{const d=(w,y)=>{let x=()=>y?.().checked;var B=Uh(),A=ee(B);{var M=C=>{jc(C,{class:"fill-primary absolute start-1/2 top-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})};$(A,C=>{x()&&C(M)})}Q(B),m(w,B)};let g=K(()=>Wt("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 shadow-xs aspect-square size-4 shrink-0 rounded-full border outline-none transition-[color,box-shadow] focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e.class));pe(h,()=>hc,(w,y)=>{y(w,Ke({"data-slot":"radio-group-item",get class(){return a(g)}},()=>o,{get ref(){return r()},set ref(x){r(x)},children:d,$$slots:{default:!0}}))})}m(u,l),me()}function Wh(u,e){ge(e,!0);let r=U(e,"ref",15,null),o=Be(e,["$$slots","$$events","$$legacy","ref","class"]);var l=V(),h=D(l);{let d=K(()=>Wt("flex select-none items-center gap-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-50 group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50",e.class));pe(h,()=>sc,(g,w)=>{w(g,Ke({"data-slot":"label",get class(){return a(d)}},()=>o,{get ref(){return r()},set ref(y){r(y)}}))})}m(u,l),me()}var Yh=X("<!> <!>",1),Jh=X('<div class="flex items-center space-x-2"><!> <!></div>'),Qh=X("<!> <!> <!>",1),Xh=X("<!> <!>",1);function Zh(u,e){ge(e,!0);let r=re(-1);function o(){F(r,-1)}function l(){console.log("Submitting map selection, currentMapIndex:",a(r)),a(r)!==-1&&e.onSelectMap(a(r))}var h=V(),d=D(h);pe(d,()=>$a,(g,w)=>{w(g,{children:(y,x)=>{var B=Xh(),A=D(B);{let C=K(()=>Wt(Js({variant:"outline"}),e.buttonClass));pe(A,()=>tf,(R,q)=>{q(R,{onclick:o,get class(){return a(C)},children:(N,z)=>{Hc(N,{})},$$slots:{default:!0}})})}var M=ve(A,2);pe(M,()=>Xa,(C,R)=>{R(C,{class:"sm:max-w-[425px]",children:(q,N)=>{var z=Qh(),H=D(z);pe(H,()=>Qa,(W,oe)=>{oe(W,{children:(be,Ie)=>{var de=Yh(),Se=D(de);pe(Se,()=>Ja,(Pe,Ne)=>{Ne(Pe,{children:(Ye,et)=>{en();var Re=tn("Select Map");m(Ye,Re)},$$slots:{default:!0}})});var Oe=ve(Se,2);pe(Oe,()=>Za,(Pe,Ne)=>{Ne(Pe,{children:(Ye,et)=>{en();var Re=tn("Choose a map from the list below.");m(Ye,Re)},$$slots:{default:!0}})}),m(be,de)},$$slots:{default:!0}})});var J=ve(H,2);{let W=K(()=>a(r).toString());pe(J,()=>Hh,(oe,be)=>{be(oe,{get value(){return a(W)},onValueChange:Ie=>F(r,parseInt(Ie),!0),children:(Ie,de)=>{var Se=V(),Oe=D(Se);nn(Oe,17,()=>e.maps,tr,(Pe,Ne,Ye)=>{var et=Jh(),Re=ee(et);{let we=K(()=>Ye.toString());pe(Re,()=>Gh,(ze,Qe)=>{Qe(ze,{get value(){return a(we)},id:`map-${Ye}`})})}var Ue=ve(Re,2);Wh(Ue,{for:`map-${Ye}`,children:(we,ze)=>{en();var Qe=tn();at(()=>qt(Qe,a(Ne).title)),m(we,Qe)},$$slots:{default:!0}}),Q(et),m(Pe,et)}),m(Ie,Se)},$$slots:{default:!0}})})}var Z=ve(J,2);pe(Z,()=>Jd,(W,oe)=>{oe(W,{children:(be,Ie)=>{sn(be,{type:"submit",onclick:l,children:(de,Se)=>{en();var Oe=tn("Save changes");m(de,Oe)},$$slots:{default:!0}})},$$slots:{default:!0}})}),m(q,z)},$$slots:{default:!0}})}),m(y,B)},$$slots:{default:!0}})}),m(u,h),me()}var $h=X("<!> <!>",1),ev=X('<p class="p-4 text-center text-sm text-gray-500">Download service is not available.</p>'),tv=X("<div><!></div> <div><!></div> <div><!></div> <div><!></div>",1),nv=X("<div><!></div>"),rv=X('<p class="p-4 text-center text-sm text-gray-500">AI UPRN Chatbot service is not available.</p>'),iv=X('<div class="relative flex h-full w-full min-w-0 flex-col overflow-visible"><!> <!> <!> <!> <!></div>'),ov=X("<!> <!> <!> <!>",1);function mg(u,e){ge(e,!0);let r,o,l;const h=Ze(new Md),d=Ze(new Od);let g=re(Ze([])),w=re(0),y=K(()=>a(g)[a(w)]),x=re("define-areas"),B=Ze(new Td),A=Ze(new Ml),M=re(null),C=Ze(new Kh(A,B)),R=re(null),q=re(void 0),N=re(void 0),z=re(void 0),H=re(void 0),J=re(void 0),Z=re(!1),W=re(!1),oe=re(Ze(new Set)),be=re(Ze(new Set)),Ie=re(!0),de=Ze($o.LEFT);Ze($o.BOTTOM);let Se=re(Ze([])),Oe=re(Ze(typeof window<"u"?window.innerWidth:1280)),Pe=K(()=>Ye(a(Se),Me=>Me.originalSize)),Ne=K(()=>Ye(a(Se),Me=>Me.minSize));function Ye(Me,kt){if(!Me||Me.length===0)return;const ct=[...Me].sort((ft,Ae)=>Ae.breakpoint-ft.breakpoint).find(ft=>a(Oe)>=ft.breakpoint);return ct?kt(ct):"0"}function et(){F(Ie,!a(Ie))}function Re(Me){F(x,Me,!0)}function Ue(){F(x,"downloads")}function we(Me){if(Me<0||Me>=a(g).length){console.warn(`[uprn-2/page] Invalid map index: ${Me}`);return}ze(),F(x,"define-areas"),h.data=null,h.isLoaded=!1,F(w,Me,!0)}function ze(){console.log("[uprn-2/page] Clearing all selections"),A.clearSelectedAreas(),B.clearSelections(),r?.clearSelections(),o?.clearSelections(),md()}er(async()=>{F(z,new Bh,!0),await a(z).init(`${yl}/custom-renderers.json`),console.log("[uprn-2/page] CustomRendererService initialized");const Me=await dl();if(F(g,Me.appsUprnConfig.maps||[],!0),a(g).length===0){console.error("[uprn-2/page] No map configuration found in appConfig");return}await C.loadSelections();const{default:kt}=await Ar(async()=>{const{default:ct}=await import("../chunks/DP-0fjQN.js").then(ft=>ft.a2);return{default:ct}},__vite__mapDeps([25,1,3,26,27,15,28,13,4,29,5,6,12,17,30,31,8,14,32,22,33,34,35,16,36,37,38,39,40,0,2,7,9,10,11,18,19,20,21,23,24,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url);F(R,new kt,!0),F(M,new Fl(A,new za(a(R))),!0),F(Se,Me.appsUprnConfig.mainSidebarSizes||[],!0),(async()=>{const ct=Me.appsUprnConfig.uprnDownloadServiceEndpoints,ft=Me.appsUprnConfig.aiUprnChatbotServiceEndpoints;F(H,new Rh(ct),!0),F(J,new Nh(ft),!0),F(Z,await a(H).getHealth(),!0),a(Z)?console.log("[uprn-2/page] UPRN Download Service is available"):console.warn("[uprn-2/page] UPRN Download Service is NOT available"),F(W,await a(J).getHealth(),!0),a(W)?console.log("[uprn-2/page] AI UPRN Chatbot Service is available"):console.warn("[uprn-2/page] AI UPRN Chatbot Service is NOT available")})()}),$e(()=>{!a(y)||!a(R)||!a(M)||(console.log(`[uprn-2/page] Loading map ${a(w)+1} of ${a(g).length}`),F(be,new Set((a(y).selectableLayers||[]).map(Me=>Me.layerName)),!0),a(M).setFieldInfos(a(y).selectableLayers||[]),F(q,new wa(a(y).dataTreeview),!0),F(N,new wa(a(y).areaTreeview),!0),F(oe,new Set(a(y).dataTreeview?.fieldsToHide||[]),!0),h.initializeAsync({portalUrl:a(y).portalUrl,itemId:a(y).portalItemId||"",proxy:a(y).proxy}))}),er(()=>{const Me=()=>{F(Oe,window.innerWidth,!0)};return window.addEventListener("resize",Me),()=>{window.removeEventListener("resize",Me)}}),Ea(()=>{B.cleanup()});var Qe=ov(),xt=D(Qe);Mh(xt,{});var lt=ve(xt,2);hf(lt,{get dataSelectionStore(){return B},get fieldFilterMenuStore(){return d},get fieldsToHide(){return a(oe)}});var he=ve(lt,2);{var Je=Me=>{var kt=$h(),fe=D(kt);Wc(fe,{get areaSelectionInteractionStore(){return a(M)}});var ct=ve(fe,2);Gu(ct,{get areaSelectionInteractionStore(){return a(M)}}),m(Me,kt)};$(he,Me=>{a(M)&&Me(Je)})}var dt=ve(he,2);{const Me=fe=>{var ct=iv(),ft=ee(ct);Zh(ft,{get maps(){return a(g)},onSelectMap:we,buttonClass:"absolute top-0 left-0 z-10 shadow-none p-0 w-8 h-8 hover:bg-transparent focus:outline-none focus:ring-0 ml-1 mt-1"});var Ae=ve(ft,2);pe(Ae,()=>Mc,(pt,Kt)=>{Kt(pt,{children:(Rt,Ht)=>{Zf(Rt,{get value(){return a(x)},get triggers(){return Fh},onValueChange:Re})},$$slots:{default:!0}})});var ht=ve(Ae,2);pe(ht,()=>Rl,(pt,Kt)=>{Kt(pt,{children:(Rt,Ht)=>{var _t=tv(),nt=D(_t),_e=ee(nt);ai(_e,{children:(Et,Xt)=>{var Ct=V(),st=D(Ct);{var vt=bt=>{$t(Ef(bt,{get webMap(){return h.data},get treeviewConfigStore(){return a(N)},get areaSelectionStore(){return A}}),gt=>r=gt,()=>r)};$(st,bt=>{h.isLoaded&&bt(vt)})}m(Et,Ct)}}),Q(nt);var Ce=ve(nt,2),Ge=ee(Ce);ai(Ge,{children:(Et,Xt)=>{var Ct=V(),st=D(Ct);{var vt=bt=>{{let gt=K(()=>l?.getLayerViewProvider());$t(qf(bt,{get webMap(){return h.data},get dataSelectionStore(){return B},get layerViewProvider(){return a(gt)},get treeviewConfigStore(){return a(q)},get customRendererService(){return a(z)},get fieldFilterMenuStore(){return d}}),te=>o=te,()=>o)}};$(st,bt=>{h.isLoaded&&bt(vt)})}m(Et,Ct)}}),Q(Ce);var He=ve(Ce,2),tt=ee(He);ai(tt,{children:(Et,Xt)=>{var Ct=V(),st=D(Ct);{var vt=bt=>{Ud(bt,{get webMapStore(){return h},get areaSelectionInteractionStore(){return a(M)},get dataSelectionStore(){return B},get dataSelectionTreeviewConfig(){return a(q)},get fieldFilterMenuStore(){return d}})};$(st,bt=>{a(M)&&h.isLoaded&&bt(vt)})}m(Et,Ct)}}),Q(He);var je=ve(He,2),Pt=ee(je);ai(Pt,{children:(Et,Xt)=>{var Ct=V(),st=D(Ct);{var vt=gt=>{var te=ev();m(gt,te)},bt=gt=>{Pd(gt,{get webMapStore(){return h},get uprnDownloadService(){return a(H)},get fieldsToHide(){return a(oe)}})};$(st,gt=>{!a(H)||!a(Z)?gt(vt):gt(bt,!1)})}m(Et,Ct)}}),Q(je),at(()=>{nt.hidden=a(x)!=="define-areas",Ce.hidden=a(x)!=="select-data",He.hidden=a(x)!=="export",je.hidden=a(x)!=="downloads"}),m(Rt,_t)},$$slots:{default:!0}})});var yt=ve(ht,2);pe(yt,()=>Rc,(pt,Kt)=>{Kt(pt,{children:(Rt,Ht)=>{var _t=nv(),nt=ee(_t);{var _e=Ce=>{Dd(Ce,{onExportSuccess:Ue,clearSelections:ze,get areaSelectionInteractionStore(){return a(M)},get dataSelectionStore(){return B}})};$(nt,Ce=>{a(M)&&Ce(_e)})}Q(_t),at(()=>_t.hidden=a(x)!=="export"),m(Rt,_t)},$$slots:{default:!0}})});var Ee=ve(yt,2);qh(Ee,{isOpenedOnInit:!0,children:(pt,Kt)=>{var Rt=V(),Ht=D(Rt);{var _t=_e=>{var Ce=rv();m(_e,Ce)},nt=_e=>{ud(_e,{get aiUprnChatbotService(){return a(J)}})};$(Ht,_e=>{!a(J)||!a(W)?_e(_t):_e(nt,!1)})}m(pt,Rt)},$$slots:{default:!0}}),Q(ct),m(fe,ct)},kt=fe=>{var ct=V(),ft=D(ct);{var Ae=ht=>{$t(Hf(ht,{get webMap(){return h.data},get mapView(){return a(R)},get areaSelectionInteractionStore(){return a(M)},get interactableLayers(){return a(be)}}),yt=>l=yt,()=>l)};$(ft,ht=>{a(M)&&ht(Ae)})}m(fe,ct)};pe(dt,()=>Bl,(fe,ct)=>{ct(fe,{get isOpen(){return a(Ie)},onToggle:et,get position(){return de},get originalSize(){return a(Pe)},get minSize(){return a(Ne)},sidebarContent:Me,mainContent:kt,$$slots:{sidebarContent:!0,mainContent:!0}})})}m(u,Qe),me()}export{mg as component};
